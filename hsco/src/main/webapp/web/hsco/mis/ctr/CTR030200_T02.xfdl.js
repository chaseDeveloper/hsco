(function(){return function(){if(!this._is_form){return;}this.on_create=function(){var _a=null;if(Form==this.constructor){this.set_name("CTR030200_T01");this.set_classname("CTR030200_T01");this.set_titletext("물품상세");this._setFormPosition(0,0,1031,400);}_a=new Static("sta_title","absolute","0","11","120","19",null,null,this);_a.set_taborder("58");_a.set_text("물품상세");_a.set_cssclass("sta_WF_Title02");this.addChild(_a.name,_a);_a=new Static("Static00","absolute","0","1",null,"10","0",null,this);_a.set_taborder("59");_a.set_text("10");_a.set_visible("false");_a.style.set_background("#dc143c3c");_a.style.set_align("center middle");this.addChild(_a.name,_a);_a=new Static("Static08","absolute","0","30",null,"5","0",null,this);_a.set_taborder("60");_a.set_text("5");_a.set_visible("false");_a.style.set_background("#dc143c3c");_a.style.set_align("center middle");this.addChild(_a.name,_a);_a=new Button("btn_add","absolute",null,"11","64","19","134",null,this);_a.set_taborder("0");_a.set_text("행추가");_a.set_cssclass("btn_WF_Gridadd");this.addChild(_a.name,_a);_a=new Button("btn_del","absolute",null,"11","64","19","67",null,this);_a.set_taborder("1");_a.set_text("행삭제");_a.set_cssclass("btn_WF_Griddel");this.addChild(_a.name,_a);_a=new Button("btn_reset","absolute",null,"11","64","19","0",null,this);_a.set_taborder("2");_a.set_text("행취소");_a.set_cssclass("btn_WF_Gridcnl");this.addChild(_a.name,_a);_a=new Grid("grd","absolute","0","35",null,null,"0","0",this);_a.set_taborder("3");_a.set_binddataset("ds_cntReqestDetai");_a.set_autoenter("select");_a.set_autosizingtype("none");_a._setContents("<Formats><Format id=\"default\"><Columns><Column size=\"180\"/><Column size=\"180\"/><Column size=\"100\"/><Column size=\"100\"/><Column size=\"120\"/><Column size=\"120\"/><Column size=\"180\"/></Columns><Rows><Row size=\"24\" band=\"head\"/><Row size=\"24\"/></Rows><Band id=\"head\"><Cell text=\"품명\"/><Cell col=\"1\" text=\"규격\"/><Cell col=\"2\" text=\"단위\"/><Cell col=\"3\" text=\"수량\"/><Cell col=\"4\" text=\"단가\"/><Cell col=\"5\" text=\"경비\"/><Cell col=\"6\" text=\"용도\"/></Band><Band id=\"body\"><Cell edittype=\"text\" style=\"align:left;\" text=\"bind:PRDNM\"/><Cell col=\"1\" edittype=\"text\" style=\"align:left;\" text=\"bind:STNDRD\"/><Cell col=\"2\" displaytype=\"combo\" edittype=\"combo\" text=\"bind:UNIT\" combodataset=\"ds_cmp002\" combocodecol=\"CODE\" combodatacol=\"CODE_NM\"/><Cell col=\"3\" displaytype=\"number\" edittype=\"masknumber\" style=\"align:right middle;\" text=\"bind:QY\" mask=\"#,###,###,###,###\" editlimitbymask=\"both\"/><Cell col=\"4\" displaytype=\"number\" edittype=\"masknumber\" style=\"align:right middle;\" text=\"bind:REQEST_UNTPC\" mask=\"#,###,###,###,###\" editlimitbymask=\"both\"/><Cell col=\"5\" displaytype=\"number\" edittype=\"masknumber\" style=\"align:right middle;\" text=\"bind:PRSMP_AM\" mask=\"#,###,###,###,###\" editlimitbymask=\"both\"/><Cell col=\"6\" edittype=\"text\" style=\"align:left;\" text=\"bind:THNG_DETAI_PRPOS\"/></Band></Format></Formats>");this.addChild(_a.name,_a);_a=new Button("btn_assPop","absolute",null,"11","118","19","201",null,this);_a.set_taborder("61");_a.set_text("물품수급계획 선택");_a.set_cssclass("btn_WF_Process");this.addChild(_a.name,_a);_a=new Layout("default","",1031,400,this,function(_b){_b.set_classname("CTR030200_T01");_b.set_titletext("물품상세");});this.addLayout(_a.name,_a);_a=null;};this.addIncludeScript("CTR030200_T02.xfdl","lib::comInclude.xjs");this.addIncludeScript("CTR030200_T02.xfdl","mis_lib::misUtil.xjs");this.registerScript("CTR030200_T02.xfdl",function(){this.CTR030200_T02_oninit=function(_a,_b){this.fn_init_form();this.fn_init_dataset();};this.CTR030200_T02_onload=function(_a,_b){};this.fn_init_form=function(){this.gfn_initForm(this);this.fn_misFormInit(this);};this.fn_init_dataset=function(){};this.btn_onclick=function(_a,_b){switch(_a.name){case "btn_assPop":var _c={arg_0:this,deptCode:this.gfn_getDeptId(),deptName:this.gfn_getDeptName()};var _d=function(_g,_h){var _i=new Dataset();var _j=_i.loadXML(_h);if(_j){this.parent.parent.ds_cntReqestDetai.deleteAll();for(var _x=0;_x<_i.getRowCount();_x++ ){var _k=_i.getColumn(_x,"RECIPT_YEAR");var _l=_i.getColumn(_x,"ODR");var _m=_i.getColumn(_x,"SN");var _n=_i.getColumn(_x,"ASSETS_CL_CODE");var _o=_i.getColumn(_x,"ASSETS_CL_NM");var _p=_i.getColumn(_x,"RM");var _q=_i.getColumn(_x,"ASSETS_NM");var _r=_i.getColumn(_x,"STNDRD");var _s=_i.getColumn(_x,"UNIT");var _t=_i.getColumn(_x,"QY");var _u=_i.getColumn(_x,"UNTPC");var _v=_i.getColumn(_x,"AMOUNT");var _w=_i.getColumn(_x,"PRVONSH");var _e=this.parent.parent.ds_cntRequest.getColumn(0,"REQEST_NO");var _f=this.parent.parent.ds_cntReqestDetai.addRow();this.parent.parent.ds_cntReqestDetai.setColumn(_f,"REQEST_NO",_e);this.parent.parent.ds_cntReqestDetai.setColumn(_f,"PRDNM",_q);this.parent.parent.ds_cntReqestDetai.setColumn(_f,"STNDRD",_r);this.parent.parent.ds_cntReqestDetai.setColumn(_f,"UNIT",_s);this.parent.parent.ds_cntReqestDetai.setColumn(_f,"QY",_t);this.parent.parent.ds_cntReqestDetai.setColumn(_f,"REQEST_UNTPC",_u);this.parent.parent.ds_cntReqestDetai.setColumn(_f,"PRSMP_AM",_v);this.parent.parent.ds_cntReqestDetai.setColumn(_f,"THNG_DETAI_PRPOS",_w);}}};this.gfn_popup("ASS010000_P01",800,530,"의뢰번호 선택",_c,"mis_ass::ASS010000_P01.xfdl",_d,true);break;case "btn_add":var _e=this.parent.parent.ds_cntRequest.getColumn(0,"REQEST_NO");var _f=this.parent.parent.ds_cntReqestDetai.addRow();this.parent.parent.ds_cntReqestDetai.setColumn(_f,"REQEST_NO",_e);break;case "btn_del":if(this.gfn_message("confirm.삭제여부")){this.parent.parent.ds_cntReqestDetai.deleteRow(this.parent.parent.ds_cntReqestDetai.rowposition);}break;case "btn_reset":if(this.gfn_message("confirm.변경.취소.여부")){this.parent.parent.ds_cntReqestDetai.reset();}break;}};this.parent.parent.ds_cntRequest_oncolumnchanged=function(_a,_b){switch(_b.columnid){case "AMOUNT":_a.setColumn(_b.row,"SUPLY_AMOUNT",Math.floor(_b.newvalue/1.1));_a.setColumn(_b.row,"VAT_AM",_b.newvalue-Math.floor(_b.newvalue/1.1));break;case "SUPLY_AMOUNT":_a.setColumn(_b.row,"AMOUNT",_b.newvalue+_a.getColumn(_b.row,"VAT_AM"));break;case "VAT_AM":_a.setColumn(_b.row,"AMOUNT",_b.newvalue+_a.getColumn(_b.row,"SUPLY_AMOUNT"));break;}};this.ds_cntReqestDetai_oncolumnchanged=function(_a,_b){switch(_b.columnid){case "QY":_a.setColumn(_b.row,"PRSMP_AM",_b.newvalue*_a.getColumn(_b.row,"REQEST_UNTPC"));break;case "REQEST_UNTPC":_a.setColumn(_b.row,"PRSMP_AM",_b.newvalue*_a.getColumn(_b.row,"QY"));break;}};});this.on_initEvent=function(){this.addEventHandler("onload",this.CTR030200_T01_onload,this);this.addEventHandler("oninit",this.CTR030200_T01_oninit,this);this.Static00.addEventHandler("onclick",this.Static00_onclick,this);this.btn_add.addEventHandler("onclick",this.btn_onclick,this);this.btn_del.addEventHandler("onclick",this.btn_onclick,this);this.btn_reset.addEventHandler("onclick",this.btn_onclick,this);this.btn_assPop.addEventHandler("onclick",this.btn_onclick,this);};this.loadIncludeScript("CTR030200_T02.xfdl");};})();