(function(){return function(){if(!this._is_form){return;}this.on_create=function(){var _a=null;if(Form==this.constructor){this.set_name("CTR030100_P06");this.set_classname("CTR030100_P06");this.set_titletext("장기공사 변경관리 팝업");this.set_scrollbars("none");this._setFormPosition(0,0,1065,400);}_a=new Dataset("ds_cond_pop",this);_a.set_firefirstcount("0");_a.getSetter("firenextcount").set("0");_a.set_useclientlayout("false");_a.set_updatecontrol("true");_a.set_enableevent("true");_a.set_loadkeymode("keep");_a.set_loadfiltermode("keep");_a.set_reversesubsum("false");_a._setContents("<ColumnInfo><Column id=\"BSNS_CODE\" type=\"STRING\" size=\"256\"/><Column id=\"BSNS_NM\" type=\"STRING\" size=\"256\"/><Column id=\"CNTRCT_NO\" type=\"STRING\" size=\"256\"/><Column id=\"CNTRCT_NM\" type=\"STRING\" size=\"256\"/><Column id=\"BCNC_CODE\" type=\"STRING\" size=\"256\"/><Column id=\"BCNC_NM\" type=\"STRING\" size=\"256\"/><Column id=\"BUDGET_YEAR\" type=\"STRING\" size=\"256\"/><Column id=\"BSNS_SE\" type=\"STRING\" size=\"256\"/><Column id=\"BALC_SE\" type=\"STRING\" size=\"256\"/><Column id=\"BUDGET_ACNT_CODE\" type=\"STRING\" size=\"256\"/><Column id=\"BUDGET_ACNT_NM\" type=\"STRING\" size=\"256\"/><Column id=\"EXPNDTR_UNIT_CODE\" type=\"STRING\" size=\"256\"/><Column id=\"EXPNDTR_UNIT_NM\" type=\"STRING\" size=\"256\"/><Column id=\"CA_CNT\" type=\"STRING\" size=\"256\"/><Column id=\"DEPT_CODE\" type=\"STRING\" size=\"256\"/></ColumnInfo>");this.addChild(_a.name,_a);_a=new Dataset("ds_ctr017",this);_a.set_firefirstcount("0");_a.getSetter("firenextcount").set("0");_a.set_useclientlayout("true");_a.set_updatecontrol("true");_a.set_enableevent("true");_a.set_loadkeymode("keep");_a.set_loadfiltermode("keep");_a.set_reversesubsum("false");_a._setContents("<ColumnInfo><Column id=\"ETC1\" type=\"string\" size=\"32\"/><Column id=\"VAL2\" type=\"string\" size=\"32\"/><Column id=\"CODE_CN\" type=\"string\" size=\"32\"/><Column id=\"VAL1\" type=\"string\" size=\"32\"/><Column id=\"USE_YN\" type=\"string\" size=\"32\"/><Column id=\"ETC3\" type=\"string\" size=\"32\"/><Column id=\"VAL4\" type=\"string\" size=\"32\"/><Column id=\"ETC2\" type=\"string\" size=\"32\"/><Column id=\"VAL3\" type=\"string\" size=\"32\"/><Column id=\"CODE_ORDR\" type=\"bigdecimal\" size=\"16\"/><Column id=\"MSTK_VAL\" type=\"string\" size=\"32\"/><Column id=\"ALL_CODE_NM\" type=\"string\" size=\"32\"/><Column id=\"CODE_NM\" type=\"string\" size=\"32\"/><Column id=\"INT_VAL\" type=\"string\" size=\"32\"/><Column id=\"GRP_CODE\" type=\"string\" size=\"32\"/><Column id=\"CODE\" type=\"string\" size=\"32\"/><Column id=\"VAL0\" type=\"string\" size=\"32\"/></ColumnInfo>");this.addChild(_a.name,_a);_a=new Dataset("ds_inorgCtnuCntrwkChange",this);_a.set_firefirstcount("0");_a.getSetter("firenextcount").set("0");_a.set_useclientlayout("true");_a.set_enableevent("true");_a.set_loadkeymode("keep");_a.set_loadfiltermode("keep");_a.set_reversesubsum("false");_a.set_updatecontrol("true");_a._setContents("<ColumnInfo><Column id=\"BSNS_CODE\" type=\"STRING\" size=\"5\"/><Column id=\"CNTRCT_NO\" type=\"STRING\" size=\"11\"/><Column id=\"YY_ATMB\" type=\"BIGDECIMAL\" size=\"22\"/><Column id=\"YEAR\" type=\"STRING\" size=\"4\"/><Column id=\"ODR\" type=\"BIGDECIMAL\" size=\"22\"/><Column id=\"BFCHG_CNTRCT_AMOUNT\" type=\"BIGDECIMAL\" size=\"22\"/><Column id=\"BFCHG_SUPLY_AMOUNT\" type=\"BIGDECIMAL\" size=\"22\"/><Column id=\"BFCHG_VAT\" type=\"BIGDECIMAL\" size=\"22\"/><Column id=\"AFTCH_CNTRCT_AMOUNT\" type=\"BIGDECIMAL\" size=\"22\"/><Column id=\"AFTCH_SUPLY_AMOUNT\" type=\"BIGDECIMAL\" size=\"22\"/><Column id=\"AFTCH_VAT\" type=\"BIGDECIMAL\" size=\"22\"/><Column id=\"CHANGE_DE\" type=\"STRING\" size=\"8\"/><Column id=\"CNTRCT_YEAR\" type=\"STRING\" size=\"4\"/><Column id=\"CAUSE_ACTION_NO\" type=\"STRING\" size=\"256\"/><Column id=\"BUDGET_YEAR\" type=\"STRING\" size=\"256\"/><Column id=\"BSNS_SE\" type=\"STRING\" size=\"256\"/><Column id=\"BALC_SE\" type=\"STRING\" size=\"256\"/><Column id=\"BUDGET_ACNT_CODE\" type=\"STRING\" size=\"256\"/><Column id=\"BUDGET_ACNT_NM\" type=\"STRING\" size=\"256\"/><Column id=\"EXPNDTR_UNIT_CODE\" type=\"STRING\" size=\"256\"/><Column id=\"EXPNDTR_UNIT_NM\" type=\"STRING\" size=\"256\"/><Column id=\"DEPT_CODE\" type=\"STRING\" size=\"256\"/></ColumnInfo>");this.addChild(_a.name,_a);_a=new Dataset("ds_validation",this);_a.set_firefirstcount("0");_a.getSetter("firenextcount").set("0");_a.set_updatecontrol("true");_a.set_enableevent("true");_a.set_loadkeymode("keep");_a.set_loadfiltermode("keep");_a.set_reversesubsum("false");_a.set_useclientlayout("false");_a._setContents("<ColumnInfo><Column id=\"compId\" type=\"STRING\" size=\"256\"/><Column id=\"colId\" type=\"STRING\" size=\"256\"/><Column id=\"msgId\" type=\"STRING\" size=\"256\"/><Column id=\"PK\" type=\"STRING\" size=\"256\"/><Column id=\"notNull\" type=\"STRING\" size=\"256\"/><Column id=\"nlength\" type=\"STRING\" size=\"256\"/><Column id=\"lengthChkGb\" type=\"STRING\" size=\"256\"/><Column id=\"type\" type=\"STRING\" size=\"256\"/><Column id=\"from\" type=\"STRING\" size=\"256\"/><Column id=\"to\" type=\"STRING\" size=\"256\"/><Column id=\"expr\" type=\"STRING\" size=\"256\"/><Column id=\"func\" type=\"STRING\" size=\"256\"/></ColumnInfo><Rows><Row><Col id=\"colId\">YY_ATMB</Col><Col id=\"msgId\">년차</Col><Col id=\"notNull\">Y</Col><Col id=\"compId\">ds_inorgCtnuCntrwkChange</Col></Row><Row><Col id=\"colId\">YEAR</Col><Col id=\"msgId\">년도</Col><Col id=\"notNull\">Y</Col><Col id=\"compId\">ds_inorgCtnuCntrwkChange</Col></Row><Row><Col id=\"colId\">AFTCH_CNTRCT_AMOUNT</Col><Col id=\"msgId\">변경후계약금액</Col><Col id=\"notNull\">Y</Col><Col id=\"nlength\">15</Col><Col id=\"lengthChkGb\">LE</Col><Col id=\"compId\">ds_inorgCtnuCntrwkChange</Col></Row><Row><Col id=\"colId\">AFTCH_SUPLY_AMOUNT</Col><Col id=\"msgId\">변경후공급가액</Col><Col id=\"notNull\">Y</Col><Col id=\"nlength\">15</Col><Col id=\"lengthChkGb\">LE</Col><Col id=\"compId\">ds_inorgCtnuCntrwkChange</Col></Row><Row><Col id=\"colId\">AFTCH_VAT</Col><Col id=\"msgId\">변경후부가세</Col><Col id=\"notNull\">Y</Col><Col id=\"nlength\">15</Col><Col id=\"lengthChkGb\">LE</Col><Col id=\"compId\">ds_inorgCtnuCntrwkChange</Col></Row></Rows>");this.addChild(_a.name,_a);_a=new Dataset("ds_inorgCtnuCntrwk",this);_a.set_firefirstcount("0");_a.getSetter("firenextcount").set("0");_a.set_useclientlayout("true");_a.set_updatecontrol("true");_a.set_enableevent("true");_a.set_loadkeymode("keep");_a.set_loadfiltermode("keep");_a.set_reversesubsum("false");_a._setContents("<ColumnInfo><Column id=\"BSNS_CODE\" type=\"STRING\" size=\"256\"/><Column id=\"CNTRCT_NO\" type=\"STRING\" size=\"256\"/><Column id=\"YY_ATMB\" type=\"STRING\" size=\"256\"/><Column id=\"YEAR\" type=\"STRING\" size=\"256\"/><Column id=\"CNTRCT_AMOUNT\" type=\"BIGDECIMAL\" size=\"22\"/><Column id=\"SUPLY_AMOUNT\" type=\"BIGDECIMAL\" size=\"22\"/><Column id=\"VAT\" type=\"BIGDECIMAL\" size=\"22\"/><Column id=\"CNTRCT_YEAR\" type=\"STRING\" size=\"256\"/></ColumnInfo>");this.addChild(_a.name,_a);_a=new Grid("grd_entrpsCntrctAssrncCha","absolute","15","83",null,null,"15","0",this);_a.set_taborder("0");_a.set_binddataset("ds_inorgCtnuCntrwkChange");_a.set_autoenter("select");_a.set_cellsizingtype("col");_a.set_autoupdatetype("comboselect");_a._setContents("<Formats><Format id=\"default\"><Columns><Column size=\"60\"/><Column size=\"80\"/><Column size=\"80\"/><Column size=\"110\"/><Column size=\"61\"/><Column size=\"120\"/><Column size=\"120\"/><Column size=\"120\"/><Column size=\"142\"/><Column size=\"140\"/></Columns><Rows><Row size=\"24\" band=\"head\"/><Row size=\"24\"/><Row size=\"24\"/></Rows><Band id=\"head\"><Cell text=\"년차\"/><Cell col=\"1\" text=\"년도\"/><Cell col=\"2\" text=\"차수\"/><Cell col=\"3\" text=\"변경일자\"/><Cell col=\"4\" text=\"구분\"/><Cell col=\"5\" text=\"계약금액\"/><Cell col=\"6\" text=\"공급가액\"/><Cell col=\"7\" text=\"부가세\"/><Cell col=\"8\" text=\"원인행위 예산계정코드\"/><Cell col=\"9\" text=\"원인행위 지출단위코드\"/></Band><Band id=\"body\"><Cell rowspan=\"2\" displaytype=\"combo\" edittype=\"expr:ODR==null ? 'combo' : 'none'\" style=\"selectbackground:#ffffffff;\" text=\"bind:YY_ATMB\" suppress=\"1\" combodataset=\"ds_inorgCtnuCntrwk\" combocodecol=\"YY_ATMB\" combodatacol=\"YY_ATMB\" combodisplay=\"expr:ODR==null ? 'display' : 'edit'\" combotype=\"dropdown\"/><Cell col=\"1\" rowspan=\"2\" style=\"selectbackground:#ffffffff;\" text=\"bind:YEAR\" suppress=\"1\"/><Cell col=\"2\" rowspan=\"2\" text=\"bind:ODR\"/><Cell col=\"3\" rowspan=\"2\" displaytype=\"date\" edittype=\"date\" text=\"bind:CHANGE_DE\" calendardisplay=\"expr:ODR==null ? 'display' : 'edit'\" calendardisplaynulltype=\"none\"/><Cell col=\"4\" style=\"font:bold 9 arial;selectfont:bold 9 arial;\" text=\"변경전\"/><Cell col=\"5\" displaytype=\"number\" style=\"align:right middle;\" text=\"bind:BFCHG_CNTRCT_AMOUNT\"/><Cell col=\"6\" displaytype=\"number\" style=\"align:right middle;\" text=\"bind:BFCHG_SUPLY_AMOUNT\"/><Cell col=\"7\" displaytype=\"number\" style=\"align:right middle;\" text=\"bind:BFCHG_VAT\"/><Cell col=\"8\" rowspan=\"2\" text=\"bind:BUDGET_ACNT_NM\" expandshow=\"expr:ODR==null ? 'show' : 'hide'\"/><Cell col=\"9\" rowspan=\"2\" text=\"bind:EXPNDTR_UNIT_NM\" expandshow=\"hide\"/><Cell row=\"1\" col=\"4\" style=\"font:bold 9 arial;selectfont:bold 9 arial;\" text=\"변경후\"/><Cell row=\"1\" col=\"5\" displaytype=\"number\" edittype=\"expr:ODR==null ? 'masknumber' : 'none'\" style=\"align:right middle;\" text=\"bind:AFTCH_CNTRCT_AMOUNT\" mask=\"#,###,###,###,###\" editdisplay=\"expr:ODR==null ? 'display' : 'edit'\"/><Cell row=\"1\" col=\"6\" displaytype=\"number\" edittype=\"expr:ODR==null ? 'masknumber' : 'none'\" style=\"align:right middle;\" text=\"bind:AFTCH_SUPLY_AMOUNT\" mask=\"#,###,###,###,###\" editdisplay=\"expr:ODR==null ? 'display' : 'edit'\"/><Cell row=\"1\" col=\"7\" displaytype=\"number\" edittype=\"expr:ODR==null ? 'masknumber' : 'none'\" style=\"align:right middle;\" text=\"bind:AFTCH_VAT\" mask=\"#,###,###,###,###\" editdisplay=\"expr:ODR==null ? 'display' : 'edit'\"/></Band></Format></Formats>");this.addChild(_a.name,_a);_a=new Static("Static06","absolute","15","0",null,"15","15",null,this);_a.set_taborder("3");_a.set_text("15");_a.set_visible("false");_a.style.set_background("#dc143c3c");_a.style.set_align("center middle");this.addChild(_a.name,_a);_a=new Static("Static05","absolute","0","0","15",null,null,"0",this);_a.set_taborder("4");_a.set_text("15");_a.set_visible("false");_a.style.set_background("#1b3cd23c");_a.style.set_align("center middle");this.addChild(_a.name,_a);_a=new Static("Static00","absolute",null,"0","15",null,"0","0",this);_a.set_taborder("5");_a.set_text("15");_a.set_visible("false");_a.style.set_background("#1b3cd23c");_a.style.set_align("center middle");this.addChild(_a.name,_a);_a=new Button("btn_insert","absolute",null,"15","50","25","174",null,this);_a.set_taborder("15");_a.set_text("신규");_a.set_cssclass("btn_WF_CRUD");this.addChild(_a.name,_a);_a=new Button("btn_save","absolute",null,"15","50","25","68",null,this);_a.set_taborder("17");_a.set_text("저장");_a.set_cssclass("btn_WF_CRUD");this.addChild(_a.name,_a);_a=new Button("btn_close","absolute",null,"15","50","25","15",null,this);_a.set_taborder("18");_a.set_text("종료");_a.set_cssclass("btn_WF_CRUD");this.addChild(_a.name,_a);_a=new Static("Static11","absolute","15","40",null,"5","15",null,this);_a.set_taborder("19");_a.set_text("5");_a.set_visible("false");_a.style.set_background("#dc143c3c");_a.style.set_align("center middle");this.addChild(_a.name,_a);_a=new Static("Static07","absolute","15","78",null,"5","15",null,this);_a.set_taborder("21");_a.set_text("5");_a.set_visible("false");_a.style.set_background("#dc143c3c");_a.style.set_align("center middle");this.addChild(_a.name,_a);_a=new Button("btn_search","absolute",null,"15","50","25","227",null,this);_a.set_taborder("25");_a.set_text("조회");_a.set_cssclass("btn_WF_CRUD");this.addChild(_a.name,_a);_a=new Div("div_search","absolute","15","45",null,"33","15",null,this);_a.set_taborder("26");_a.set_cssclass("div_WFSA_Box");this.addChild(_a.name,_a);_a=new Static("sta_bcncNm","absolute","15","5","64","21",null,null,this.div_search);_a.set_taborder("47");_a.set_text("사업번호");_a.set_cssclass("sta_WFSA_Label");this.div_search.addChild(_a.name,_a);_a=new Static("sta_bizrno","absolute","440","5","64","21",null,null,this.div_search);_a.set_taborder("48");_a.set_text("계약번호");_a.set_cssclass("sta_WFSA_Label");this.div_search.addChild(_a.name,_a);_a=new Static("Static04","absolute","0","5","15",null,null,"5",this.div_search);_a.set_taborder("49");_a.set_text("15");_a.set_visible("false");_a.style.set_background("#00ffff66");this.div_search.addChild(_a.name,_a);_a=new Static("Static00","absolute","178","5","2","21",null,null,this.div_search);_a.set_taborder("50");_a.set_text("2");_a.set_visible("false");_a.style.set_background("#00ffff66");this.div_search.addChild(_a.name,_a);_a=new Static("Static01","absolute","425","5","15","21",null,null,this.div_search);_a.set_taborder("51");_a.set_text("15");_a.set_visible("false");_a.style.set_background("#00ffff66");this.div_search.addChild(_a.name,_a);_a=new Static("Static02","absolute","619","5","2","21",null,null,this.div_search);_a.set_taborder("52");_a.set_text("2");_a.set_visible("false");_a.style.set_background("#00ffff66");this.div_search.addChild(_a.name,_a);_a=new Edit("edt_CNTRCT_NM","absolute","621","5","245","21",null,null,this.div_search);_a.set_taborder("53");_a.set_readonly("true");this.div_search.addChild(_a.name,_a);_a=new Edit("edt_BSNS_CODE","absolute","79","5","99","21",null,null,this.div_search);_a.set_taborder("54");_a.set_readonly("true");this.div_search.addChild(_a.name,_a);_a=new Edit("edt_BSNS_NM","absolute","180","5","245","21",null,null,this.div_search);_a.set_taborder("55");_a.set_readonly("true");this.div_search.addChild(_a.name,_a);_a=new MaskEdit("msk_CNTRCT_NO","absolute","504","5","115","21",null,null,this.div_search);_a.set_taborder("56");_a.set_readonly("true");_a.set_type("string");_a.set_mask("####-###-###");_a.set_maskchar(" ");_a.style.set_align("left middle");this.div_search.addChild(_a.name,_a);_a=new Static("Static36","absolute","350","0",null,"5","531",null,this.div_search);_a.set_taborder("57");_a.set_text("5");_a.set_visible("false");_a.style.set_background("#fa794f66");_a.style.set_align("center middle");this.div_search.addChild(_a.name,_a);_a=new Static("Static03","absolute","350","26",null,"5","531",null,this.div_search);_a.set_taborder("60");_a.set_text("5");_a.set_visible("false");_a.style.set_background("#fa794f66");_a.style.set_align("center middle");this.div_search.addChild(_a.name,_a);_a=new Button("btn_delete","absolute",null,"15","50","25","121",null,this);_a.set_taborder("27");_a.set_text("삭제");_a.set_cssclass("btn_WF_CRUD");this.addChild(_a.name,_a);_a=new Static("sta_acntCode","absolute","15","18","360","19",null,null,this);_a.set_taborder("29");_a.set_text("계약의 예산년도를 기준으로 원인행위에 반영됩니다.");_a.set_cssclass("sta_WF_Title02");this.addChild(_a.name,_a);_a=new Layout("default","",0,33,this.div_search,function(_b){_b.set_taborder("26");_b.set_cssclass("div_WFSA_Box");});this.div_search.addLayout(_a.name,_a);_a=new Layout("default","",1065,400,this,function(_b){_b.set_classname("CTR030100_P06");_b.set_titletext("장기공사 변경관리 팝업");_b.set_scrollbars("none");});this.addLayout(_a.name,_a);_a=new BindItem("item0","div_search.edt_CNTRCT_NM","value","ds_cond_pop","CNTRCT_NM");this.addChild(_a.name,_a);_a.bind();_a=new BindItem("item1","div_search.msk_CNTRCT_NO","value","ds_cond_pop","CNTRCT_NO");this.addChild(_a.name,_a);_a.bind();_a=new BindItem("item3","div_search.edt_BSNS_NM","value","ds_cond_pop","BSNS_NM");this.addChild(_a.name,_a);_a.bind();_a=new BindItem("item4","div_search.edt_BSNS_CODE","value","ds_cond_pop","BSNS_CODE");this.addChild(_a.name,_a);_a.bind();_a=null;};this.addIncludeScript("CTR030100_P06.xfdl","lib::comInclude.xjs");this.addIncludeScript("CTR030100_P06.xfdl","mis_lib::misUtil.xjs");this.registerScript("CTR030100_P06.xfdl",function(){this.CTR030100_P06_oninit=function(_a,_b){this.fn_init_form();this.fn_init_dataset();};this.CTR030100_P06_onload=function(_a,_b){};this.fn_init_form=function(){this.gfn_initForm(this);this.fn_misFormInit(this);this.ds_cond_pop.clearData();var _a=this.ds_cond_pop.addRow();this.ds_cond_pop.setColumn(_a,"BSNS_CODE",this.parent.bsnsCode);this.ds_cond_pop.setColumn(_a,"BSNS_NM",this.parent.bsnsNm);this.ds_cond_pop.setColumn(_a,"CNTRCT_NO",this.parent.cntrctNo);this.ds_cond_pop.setColumn(_a,"CNTRCT_NM",this.parent.cntrctNm);this.ds_cond_pop.setColumn(_a,"BUDGET_YEAR",this.parent.budgetYear);this.ds_cond_pop.setColumn(_a,"BSNS_SE",this.parent.bsnsSe);this.ds_cond_pop.setColumn(_a,"BALC_SE",this.parent.balcSe);this.ds_cond_pop.setColumn(_a,"BUDGET_ACNT_CODE",this.parent.bugetAcntCode);this.ds_cond_pop.setColumn(_a,"BUDGET_ACNT_NM",this.parent.bugetAcntNm2);this.ds_cond_pop.setColumn(_a,"EXPNDTR_UNIT_CODE",this.parent.expndtrUnitCode);this.ds_cond_pop.setColumn(_a,"EXPNDTR_UNIT_NM",this.parent.expndtrUnitNm2);this.ds_cond_pop.setColumn(_a,"DEPT_CODE",this.parent.deptCode);this.ds_cond_pop.setColumn(_a,"CA_CNT",this.parent.caCnt);this.ds_inorgCtnuCntrwk.loadXML(this.parent.ds_inorgCtnuCntrwk);this.fn_search();};this.fn_init_dataset=function(){};this.fn_search=function(){this.ds_inorgCtnuCntrwkChange.clearData();this.fn_transaction("select");};this.fn_transaction=function(_a){switch(_a){case "select":var _b="hsco/mis/ctr/CTR030100_P06/select.do";var _c="input1=ds_cond_pop";var _d="ds_inorgCtnuCntrwkChange=output1";break;case "save":var _b="hsco/mis/ctr/CTR030100_P06/save.do";var _c="input1=ds_inorgCtnuCntrwkChange:U";var _d="";break;}Ex.core.tran(this,_a,_b,_c,_d);};this.fn_callBack=function(_a,_b,_c){if(_b!=0){this.gfn_callback_message(_a,_b,_c);}if(_b==0){switch(_a){case "select":break;case "save":this.fn_search();break;}}};this.entrpsCntrctAssrncCha_onheadclick=function(_a,_b){this.gfn_gridSort(_a,_b);};this.ds_inorgCtnuCntrwkChange_oncolumnchanged=function(_a,_b){if(_b.columnid=="YY_ATMB"){var _c=this.ds_inorgCtnuCntrwk.findRow("YY_ATMB",_b.newvalue);var _d=this.ds_inorgCtnuCntrwk.getColumn(_c,"YEAR");this.ds_inorgCtnuCntrwkChange.setColumn(_b.row,"YEAR",_d);var _e;var _f;var _g;for(var _i=_b.row-1;_i>=0;_i-- ){var _h=_a.getColumn(_i,"YY_ATMB");if(_h+""==_b.newvalue+""){_e=_a.getColumn(_i,"AFTCH_CNTRCT_AMOUNT");_f=_a.getColumn(_i,"AFTCH_SUPLY_AMOUNT");_g=_a.getColumn(_i,"AFTCH_VAT");_a.setColumn(_b.row,"BFCHG_CNTRCT_AMOUNT",_e);_a.setColumn(_b.row,"BFCHG_SUPLY_AMOUNT",_f);_a.setColumn(_b.row,"BFCHG_VAT",_g);break;}}if(!_e){_e=this.ds_inorgCtnuCntrwk.getColumn(_c,"CNTRCT_AMOUNT");_f=this.ds_inorgCtnuCntrwk.getColumn(_c,"SUPLY_AMOUNT");_g=this.ds_inorgCtnuCntrwk.getColumn(_c,"VAT");_a.setColumn(_b.row,"BFCHG_CNTRCT_AMOUNT",_e);_a.setColumn(_b.row,"BFCHG_SUPLY_AMOUNT",_f);_a.setColumn(_b.row,"BFCHG_VAT",_g);}if(_a.getColumn(_b.row,"ODR")==null){if(_a.getColumn(_b.row,"YEAR")==this.comUtils.getClientDate("YYYY")&&this.ds_cond_pop.getColumn(0,"CA_CNT")>0){_a.setColumn(_b.row,"BUDGET_YEAR",this.ds_cond_pop.getColumn(0,"BUDGET_YEAR"));_a.setColumn(_b.row,"BSNS_SE",this.ds_cond_pop.getColumn(0,"BSNS_SE"));_a.setColumn(_b.row,"BALC_SE",this.ds_cond_pop.getColumn(0,"BALC_SE"));_a.setColumn(_b.row,"BUDGET_ACNT_CODE",this.ds_cond_pop.getColumn(0,"BUDGET_ACNT_CODE"));_a.setColumn(_b.row,"BUDGET_ACNT_NM",this.ds_cond_pop.getColumn(0,"BUDGET_ACNT_NM"));_a.setColumn(_b.row,"EXPNDTR_UNIT_CODE",this.ds_cond_pop.getColumn(0,"EXPNDTR_UNIT_CODE"));_a.setColumn(_b.row,"EXPNDTR_UNIT_NM",this.ds_cond_pop.getColumn(0,"EXPNDTR_UNIT_NM"));_a.setColumn(_b.row,"DEPT_CODE",this.ds_cond_pop.getColumn(0,"DEPT_CODE"));}else{_a.setColumn(_b.row,"BUDGET_YEAR","");_a.setColumn(_b.row,"BSNS_SE","");_a.setColumn(_b.row,"BALC_SE","");_a.setColumn(_b.row,"BUDGET_ACNT_CODE","");_a.setColumn(_b.row,"BUDGET_ACNT_NM","");_a.setColumn(_b.row,"EXPNDTR_UNIT_CODE","");_a.setColumn(_b.row,"EXPNDTR_UNIT_NM","");_a.setColumn(_b.row,"DEPT_CODE","");}}}if(_b.columnid=="AFTCH_CNTRCT_AMOUNT"){var _e=!this.comUtils.isNull(_b.newvalue)?_b.newvalue:0;var _f=nexacro.round(_e/1.1);var _g=_e-_f;_a.setColumn(_b.row,"AFTCH_SUPLY_AMOUNT",_f);_a.setColumn(_b.row,"AFTCH_VAT",_g);}};this.ds_inorgCtnuCntrwkChange_cancolumnchange=function(_a,_b){if(_b.columnid=="YY_ATMB"){var _c=_a.findRowExpr("YY_ATMB=='"+_b.newvalue+"' && ODR==null");if(_c> -1){var _d="동일한 '년차'는 하나씩 신규추가 해주시기 바랍니다.";alert(_d);return false;}}};this.btn_search_onclick=function(_a,_b){if(this.comUtils.isDatasetUpdated(this.ds_inorgCtnuCntrwkChange)){if(!this.gfn_message("confirm.변경.취소.여부")){return false;}}this.fn_search();};this.btn_insert_onclick=function(_a,_b){if(this.ds_inorgCtnuCntrwkChange.getDeletedColumn()>0){this.gfn_message("comm.err","삭제한 내역이 있습니다.\n저장 후 진행해 주시기 바랍니다.");return;}var _c=this.ds_cond_pop.getColumn(0,"BSNS_CODE");var _d=this.ds_cond_pop.getColumn(0,"CNTRCT_NO");var _e=this.ds_inorgCtnuCntrwkChange.addRow();this.ds_inorgCtnuCntrwkChange.setColumn(_e,"BSNS_CODE",_c);this.ds_inorgCtnuCntrwkChange.setColumn(_e,"CNTRCT_NO",_d);this.ds_inorgCtnuCntrwkChange.setColumn(_e,"CHANGE_DE",this.gfn_today());};this.btn_delete_onclick=function(_a,_b){var _c=this.ds_inorgCtnuCntrwkChange.getColumn(this.ds_inorgCtnuCntrwkChange.rowposition,"YEAR");var _d=this.ds_inorgCtnuCntrwkChange.getColumn(this.ds_inorgCtnuCntrwkChange.rowposition,"ODR");var _e=0;if(_d==null&&_e!=_d){if(this.gfn_message("confirm.삭제여부")){this.ds_inorgCtnuCntrwkChange.deleteRow(this.ds_inorgCtnuCntrwkChange.rowposition);}return;}if(this.comUtils.isDatasetUpdated(this.ds_inorgCtnuCntrwkChange)){if(!this.gfn_message("comm.confirm","기 등록된 내역을 삭제하려면 현재 작업을 취소해야 합니다.\n계속 진행 하시겠습니까?")){return false;}else{this.ds_inorgCtnuCntrwkChange.reset();this.ds_inorgCtnuCntrwkChange.applyChange();return;}}for(var _f=0;_f<this.ds_inorgCtnuCntrwkChange.rowcount;_f++ ){if(this.ds_inorgCtnuCntrwkChange.getColumn(_f,"YEAR")==_c){_e=this.ds_inorgCtnuCntrwkChange.getColumn(_f,"ODR");}}if(_d!=null&&_e!=_d){this.gfn_message("comm.err","삭제하려는 년도의 최종 차수 데이터만 삭제 가능합니다.");return;}if(this.gfn_message("confirm.삭제여부")){this.ds_inorgCtnuCntrwkChange.deleteRow(this.ds_inorgCtnuCntrwkChange.rowposition);}};this.btn_save_onclick=function(_a,_b){if(!this.gfn_checkValidation(this.ds_inorgCtnuCntrwkChange,this.ds_validation)){return false;}for(var _c=0;_c<this.ds_inorgCtnuCntrwkChange.rowcount;_c++ ){if(this.ds_inorgCtnuCntrwkChange.getColumn(_c,"ODR")==null&&this.ds_cond_pop.getColumn(0,"CA_CNT")>0){if(this.comUtils.getClientDate("YYYY")==this.ds_inorgCtnuCntrwkChange.getColumn(_c,"YEAR")){if(this.ds_inorgCtnuCntrwkChange.getColumn(_c,"BUDGET_ACNT_CODE")==null||this.ds_inorgCtnuCntrwkChange.getColumn(_c,"EXPNDTR_UNIT_CODE")==null){this.gfn_message("comm.chk","원인행위 예산계정코드를 입력해 주시기 바랍니다.");return;}}}}if(this.gfn_message("confirm.저장.여부")){this.fn_transaction("save");}};this.btn_close_onclick=function(_a,_b){this.close();};this.grd_entrpsCntrctAssrncCha_onexpandup=function(_a,_b){if(this.ds_inorgCtnuCntrwkChange.getColumn(this.ds_inorgCtnuCntrwkChange.rowposition,"YEAR")==null){this.gfn_message("comm.chk","년차를 선택 해 주시기 바랍니다.");return;}if(this.ds_cond_pop.getColumn(0,"CA_CNT")==0){this.gfn_message("comm.info","최초 원인행위가 등록되지 않은 경우 계약금액이\n변경되어도 원인행위가 생성되지 않습니다.");return;}this.gfn_popup("btn_bdgPopup",600,500,"계정과목 선택",{acntPopup:false},"com::bdgAcntPop.xfdl","fn_popupCallBack",true);};this.fn_popupCallBack=function(_a,_b){if(_a=="btn_bdgPopup"){var _c=new Dataset();var _d=_c.loadXML(_b);if(_d){var _e=_c.getColumn(0,"YEAR");var _f=_c.getColumn(0,"ACNT_LEVEL");if(_f<(_e>=2016?5:4)){this.gfn_message("info.항목.선택.알림","'"+(_e>=2016?"세목":"목")+"'단위");return false;}var _g=_c.getColumn(0,"BSNS_SE");var _h=_c.getColumn(0,"BALC_SE");var _i=_c.getColumn(0,"BUDGET_ACNT_CODE");var _j=_c.getColumn(0,"BUDGET_ACNT_NM");var _k=_c.getColumn(0,"EXPNDTR_UNIT_CODE");var _l=_c.getColumn(0,"EXPNDTR_UNIT_NM");var _m=_c.getColumn(0,"EXPNDTR_UNIT_TREE_NM");var _n=_c.getColumn(0,"DEPT_CODE");var _o=_g+""+_h;var _p=_i.substr(0,3)+"-"+_i.substr(3)+". "+_j;var _q=_k.substr(0,2)+"-"+_k.substr(2,2)+"-"+_k.substr(4,2)+"-"+_k.substr(6,2)+". "+_l;this.ds_inorgCtnuCntrwkChange.setColumn(this.ds_inorgCtnuCntrwkChange.rowposition,"BUDGET_YEAR",_e);this.ds_inorgCtnuCntrwkChange.setColumn(this.ds_inorgCtnuCntrwkChange.rowposition,"BSNS_SE",_g);this.ds_inorgCtnuCntrwkChange.setColumn(this.ds_inorgCtnuCntrwkChange.rowposition,"BALC_SE",_h);this.ds_inorgCtnuCntrwkChange.setColumn(this.ds_inorgCtnuCntrwkChange.rowposition,"BUDGET_ACNT_CODE",_i);this.ds_inorgCtnuCntrwkChange.setColumn(this.ds_inorgCtnuCntrwkChange.rowposition,"BUDGET_ACNT_NM",_p);this.ds_inorgCtnuCntrwkChange.setColumn(this.ds_inorgCtnuCntrwkChange.rowposition,"EXPNDTR_UNIT_CODE",_k);this.ds_inorgCtnuCntrwkChange.setColumn(this.ds_inorgCtnuCntrwkChange.rowposition,"EXPNDTR_UNIT_NM",_q);this.ds_inorgCtnuCntrwkChange.setColumn(this.ds_inorgCtnuCntrwkChange.rowposition,"DEPT_CODE",_n);}}};});this.on_initEvent=function(){this.ds_inorgCtnuCntrwkChange.addEventHandler("oncolumnchanged",this.ds_inorgCtnuCntrwkChange_oncolumnchanged,this);this.ds_inorgCtnuCntrwkChange.addEventHandler("cancolumnchange",this.ds_inorgCtnuCntrwkChange_cancolumnchange,this);this.ds_inorgCtnuCntrwk.addEventHandler("oncolumnchanged",this.ds_inorgCtnuCntrwk_oncolumnchanged,this);this.addEventHandler("onload",this.CTR030100_P06_onload,this);this.addEventHandler("oninit",this.CTR030100_P06_oninit,this);this.grd_entrpsCntrctAssrncCha.addEventHandler("onheadclick",this.entrpsCntrctAssrncCha_onheadclick,this);this.grd_entrpsCntrctAssrncCha.addEventHandler("onexpandup",this.grd_entrpsCntrctAssrncCha_onexpandup,this);this.btn_insert.addEventHandler("onclick",this.btn_insert_onclick,this);this.btn_save.addEventHandler("onclick",this.btn_save_onclick,this);this.btn_close.addEventHandler("onclick",this.btn_close_onclick,this);this.btn_search.addEventHandler("onclick",this.btn_search_onclick,this);this.btn_delete.addEventHandler("onclick",this.btn_delete_onclick,this);};this.loadIncludeScript("CTR030100_P06.xfdl");};})();