(function(){return function(){if(!this._is_form){return;}this.on_create=function(){var _a=null;if(Form==this.constructor){this.set_name("HRM090403");this.set_classname("HRM090403");this.set_titletext("배차신청 등록");this._setFormPosition(0,0,1059,735);}_a=new Dataset("ds_reqstList",this);_a.set_firefirstcount("0");_a.getSetter("firenextcount").set("0");_a.set_useclientlayout("true");_a.set_updatecontrol("true");_a.set_enableevent("true");_a.set_loadkeymode("keep");_a.set_loadfiltermode("keep");_a.set_reversesubsum("false");_a._setContents("<ColumnInfo><Column id=\"CHK\" type=\"STRING\" size=\"256\"/><Column id=\"VHCLE_CODE\" type=\"STRING\" size=\"256\"/><Column id=\"USE_DE\" type=\"STRING\" size=\"256\"/><Column id=\"USE_TM\" type=\"STRING\" size=\"256\"/><Column id=\"SEQ\" type=\"STRING\" size=\"256\"/><Column id=\"VHCLE_CODE_ORG\" type=\"STRING\" size=\"256\"/><Column id=\"USE_DE_ORG\" type=\"STRING\" size=\"256\"/><Column id=\"USE_TM_ORG\" type=\"STRING\" size=\"256\"/><Column id=\"SEQ_ORG\" type=\"STRING\" size=\"256\"/><Column id=\"ENDDE\" type=\"STRING\" size=\"256\"/><Column id=\"END_TM\" type=\"STRING\" size=\"256\"/><Column id=\"REQST_DE\" type=\"STRING\" size=\"256\"/><Column id=\"APPLCNT_EMPNO\" type=\"STRING\" size=\"256\"/><Column id=\"APPLCNT_EMPNM\" type=\"STRING\" size=\"256\"/><Column id=\"APPLCNT_DEPT_CODE\" type=\"STRING\" size=\"256\"/><Column id=\"APPLCNT_DEPT_NM\" type=\"STRING\" size=\"256\"/><Column id=\"DSTN\" type=\"STRING\" size=\"256\"/><Column id=\"BUSINS\" type=\"STRING\" size=\"256\"/><Column id=\"USER_NM\" type=\"STRING\" size=\"256\"/><Column id=\"DRVER_NM\" type=\"STRING\" size=\"256\"/><Column id=\"SANCTN_NO\" type=\"STRING\" size=\"256\"/><Column id=\"PROGRS_STTUS_SE\" type=\"STRING\" size=\"256\"/><Column id=\"DRFT_STS\" type=\"STRING\" size=\"256\"/><Column id=\"DRFT_STS_IMG\" type=\"STRING\" size=\"256\"/><Column id=\"DRFT_DT\" type=\"STRING\" size=\"256\"/><Column id=\"SANCTN_STS\" type=\"STRING\" size=\"256\"/><Column id=\"SANCTN_STS_IMG\" type=\"STRING\" size=\"256\"/><Column id=\"LAST_SANCTN_DT\" type=\"STRING\" size=\"256\"/><Column id=\"CONFM_AT\" type=\"STRING\" size=\"256\"/><Column id=\"RO\" type=\"STRING\" size=\"256\"/><Column id=\"CONFM_DT\" type=\"STRING\" size=\"256\"/><Column id=\"CONFMER_EMPNO\" type=\"STRING\" size=\"256\"/><Column id=\"CONFMER_EMPNM\" type=\"STRING\" size=\"256\"/><Column id=\"CONFMER_DEPT_CODE\" type=\"STRING\" size=\"256\"/><Column id=\"MANAGE_DEPT_CODE\" type=\"STRING\" size=\"256\"/><Column id=\"REGIST_DT\" type=\"STRING\" size=\"256\"/></ColumnInfo>");this.addChild(_a.name,_a);_a=new Dataset("ds_cond",this);_a.set_firefirstcount("0");_a.getSetter("firenextcount").set("0");_a.set_useclientlayout("false");_a.set_updatecontrol("true");_a.set_enableevent("true");_a.set_loadkeymode("keep");_a.set_loadfiltermode("keep");_a.set_reversesubsum("false");_a._setContents("<ColumnInfo><Column id=\"BGN_DE\" type=\"STRING\" size=\"256\"/><Column id=\"END_DE\" type=\"STRING\" size=\"256\"/><Column id=\"VHCLE_NM\" type=\"STRING\" size=\"256\"/><Column id=\"EMPNO\" type=\"STRING\" size=\"256\"/><Column id=\"EMPNM\" type=\"STRING\" size=\"256\"/><Column id=\"PROGRS_STTUS_SE\" type=\"STRING\" size=\"256\"/><Column id=\"DEPT_CODE\" type=\"STRING\" size=\"256\"/><Column id=\"DEPT_NM\" type=\"STRING\" size=\"256\"/><Column id=\"JOB_GB\" type=\"STRING\" size=\"256\"/></ColumnInfo><Rows><Row/></Rows>");this.addChild(_a.name,_a);_a=new Dataset("ds_validation",this);_a.set_firefirstcount("0");_a.getSetter("firenextcount").set("0");_a.set_useclientlayout("false");_a.set_updatecontrol("true");_a.set_enableevent("true");_a.set_loadkeymode("keep");_a.set_loadfiltermode("keep");_a.set_reversesubsum("false");_a._setContents("<ColumnInfo><Column id=\"compId\" type=\"STRING\" size=\"256\"/><Column id=\"colId\" type=\"STRING\" size=\"256\"/><Column id=\"PK\" type=\"STRING\" size=\"256\"/><Column id=\"notNull\" type=\"STRING\" size=\"256\"/><Column id=\"type\" type=\"STRING\" size=\"256\"/><Column id=\"nlength\" type=\"STRING\" size=\"256\"/><Column id=\"from\" type=\"STRING\" size=\"256\"/><Column id=\"to\" type=\"STRING\" size=\"256\"/><Column id=\"lengthChkGb\" type=\"STRING\" size=\"256\"/><Column id=\"msgId\" type=\"STRING\" size=\"256\"/><Column id=\"expr\" type=\"STRING\" size=\"256\"/><Column id=\"func\" type=\"STRING\" size=\"256\"/></ColumnInfo><Rows><Row><Col id=\"colId\">BGN_DE</Col><Col id=\"compId\">ds_cond</Col><Col id=\"notNull\">Y</Col><Col id=\"msgId\">조회시작일자</Col></Row><Row><Col id=\"colId\">END_DE</Col><Col id=\"compId\">ds_cond</Col><Col id=\"notNull\">Y</Col><Col id=\"msgId\">조회종료일자</Col></Row><Row><Col id=\"colId\">END_DE</Col><Col id=\"compId\">ds_cond</Col><Col id=\"from\">BGN_DE</Col><Col id=\"msgId\">조회종료일자^조회시작일자</Col></Row><Row><Col id=\"compId\">ds_reqstList</Col><Col id=\"colId\">VHCLE_CODE</Col><Col id=\"notNull\">Y</Col><Col id=\"msgId\">차량명</Col></Row><Row><Col id=\"compId\">ds_reqstList</Col><Col id=\"colId\">APPLCNT_EMPNO</Col><Col id=\"notNull\">Y</Col><Col id=\"msgId\">신청자</Col></Row><Row><Col id=\"compId\">ds_reqstList</Col><Col id=\"colId\">USE_DE</Col><Col id=\"notNull\">Y</Col><Col id=\"msgId\">시작일</Col></Row><Row><Col id=\"colId\">USE_TM</Col><Col id=\"compId\">ds_reqstList</Col><Col id=\"notNull\">Y</Col><Col id=\"msgId\">시작시간</Col></Row><Row><Col id=\"colId\">ENDDE</Col><Col id=\"compId\">ds_reqstList</Col><Col id=\"notNull\">Y</Col><Col id=\"msgId\">종료일</Col></Row><Row><Col id=\"colId\">END_TM</Col><Col id=\"compId\">ds_reqstList</Col><Col id=\"notNull\">Y</Col><Col id=\"msgId\">종료시간</Col></Row><Row><Col id=\"colId\">USER_NM</Col><Col id=\"compId\">ds_reqstList</Col><Col id=\"notNull\">Y</Col><Col id=\"msgId\">동승자</Col></Row><Row><Col id=\"colId\">DRVER_NM</Col><Col id=\"compId\">ds_reqstList</Col><Col id=\"notNull\">Y</Col><Col id=\"msgId\">운전자</Col></Row><Row><Col id=\"colId\">DSTN</Col><Col id=\"compId\">ds_reqstList</Col><Col id=\"notNull\">Y</Col><Col id=\"msgId\">행선지</Col></Row><Row><Col id=\"colId\">BUSINS</Col><Col id=\"compId\">ds_reqstList</Col><Col id=\"notNull\">Y</Col><Col id=\"msgId\">용무</Col></Row><Row><Col id=\"compId\">ds_reqstList</Col><Col id=\"colId\">ENDDE</Col><Col id=\"PK\"/><Col id=\"notNull\"/><Col id=\"type\"/><Col id=\"nlength\"/><Col id=\"from\">USE_DE</Col><Col id=\"to\"/><Col id=\"lengthChkGb\"/><Col id=\"msgId\">종료일자^시작일자</Col><Col id=\"expr\"/><Col id=\"func\"/></Row></Rows>");this.addChild(_a.name,_a);_a=new Dataset("ds_vhcleList",this);_a.set_firefirstcount("0");_a.getSetter("firenextcount").set("0");_a.set_useclientlayout("true");_a.set_updatecontrol("true");_a.set_enableevent("true");_a.set_loadkeymode("keep");_a.set_loadfiltermode("keep");_a.set_reversesubsum("false");_a._setContents("<ColumnInfo><Column id=\"VHCLE_CODE\" type=\"STRING\" size=\"256\"/><Column id=\"VHCLE_NM\" type=\"STRING\" size=\"256\"/><Column id=\"REGIST_NO\" type=\"STRING\" size=\"256\"/><Column id=\"CARALC_USE_AT\" type=\"STRING\" size=\"256\"/></ColumnInfo>");this.addChild(_a.name,_a);_a=new Dataset("ds_radioGb",this);_a.set_firefirstcount("0");_a.getSetter("firenextcount").set("0");_a.set_useclientlayout("true");_a.set_updatecontrol("true");_a.set_enableevent("true");_a.set_loadkeymode("keep");_a.set_loadfiltermode("keep");_a.set_reversesubsum("false");_a._setContents("<ColumnInfo><Column id=\"CD\" type=\"STRING\" size=\"256\"/><Column id=\"CD_NM\" type=\"STRING\" size=\"256\"/></ColumnInfo><Rows><Row><Col id=\"CD\">0</Col><Col id=\"CD_NM\">일반</Col></Row><Row><Col id=\"CD\">1</Col><Col id=\"CD_NM\">전용(주거복지처)</Col></Row></Rows>");this.addChild(_a.name,_a);_a=new Static("Static00","absolute",null,"0","15","735","13",null,this);_a.set_taborder("2");_a.set_text("15");_a.set_visible("false");_a.style.set_background("#1b3cd23c");_a.style.set_align("center middle");this.addChild(_a.name,_a);_a=new Static("Static01","absolute",null,"0","13","735","0",null,this);_a.set_taborder("3");_a.set_text("스\r\n크\r\n롤\r\n13");_a.set_visible("false");_a.style.set_background("#d07b173c");_a.style.set_align("center middle");this.addChild(_a.name,_a);_a=new Div("div_search","absolute","0","0",null,"66","28",null,this);_a.set_taborder("0");_a.set_cssclass("div_WFSA_Box");this.addChild(_a.name,_a);_a=new Static("sta_vhcleNm","absolute","13","34","51","21",null,null,this.div_search);_a.set_taborder("5");_a.set_text("차량명");_a.set_cssclass("sta_WFSA_Label");this.div_search.addChild(_a.name,_a);_a=new Edit("edt_vhcleNm","absolute","76","34","103","21",null,null,this.div_search);_a.set_taborder("2");this.div_search.addChild(_a.name,_a);_a=new Static("sta_applcDe","absolute","13","5","64","21",null,null,this.div_search);_a.set_taborder("6");_a.set_text("조회기간");_a.set_cssclass("sta_WFSA_Label");this.div_search.addChild(_a.name,_a);_a=new Calendar("cal_bgnDe","absolute","76","5","103","21",null,null,this.div_search);this.div_search.addChild(_a.name,_a);_a.set_taborder("0");_a.set_dateformat("yyyy-MM-dd");_a.set_cssclass("cal_WF_Essential");_a=new Static("Static00","absolute","182","5","12","21",null,null,this.div_search);_a.set_taborder("7");_a.set_text("~");this.div_search.addChild(_a.name,_a);_a=new Calendar("cal_endDe","absolute","195","5","103","21",null,null,this.div_search);this.div_search.addChild(_a.name,_a);_a.set_taborder("1");_a.set_dateformat("yyyy-MM-dd");_a.set_cssclass("cal_WF_Essential");_a=new Static("sta_searchDept","absolute","322","5","64","21",null,null,this.div_search);_a.set_taborder("8");_a.set_text("조회부서");_a.set_cssclass("sta_WFSA_Label");this.div_search.addChild(_a.name,_a);_a=new Div("div_DEPT","absolute","386","5","189","21",null,null,this.div_search);_a.set_taborder("9");_a.set_url("com::deptCode.xfdl");this.div_search.addChild(_a.name,_a);_a=new Static("sta_applcnt","absolute","604","5","51","21",null,null,this.div_search);_a.set_taborder("10");_a.set_text("사번");_a.set_cssclass("sta_WFSA_Label");this.div_search.addChild(_a.name,_a);_a=new Div("div_EMP","absolute","644","5","166","21",null,null,this.div_search);_a.set_taborder("11");_a.set_url("com::empno.xfdl");this.div_search.addChild(_a.name,_a);_a=new Radio("rdo_jobGb","absolute","389","36","228","20",null,null,this.div_search);this.div_search.addChild(_a.name,_a);_a.set_taborder("12");_a.set_innerdataset("@ds_radioGb");_a.set_codecolumn("CD");_a.set_datacolumn("CD_NM");_a.set_direction("vertical");_a.set_index("-1");_a=new Static("sta_vhcleNm00","absolute","322","34","61","21",null,null,this.div_search);_a.set_taborder("13");_a.set_text("업부구분");_a.set_cssclass("sta_WFSA_Label");this.div_search.addChild(_a.name,_a);_a=new Static("sta_reqstList","absolute","0","71","100","19",null,null,this);_a.set_taborder("4");_a.set_text("배차신청 내역");_a.set_cssclass("sta_WF_Title02");this.addChild(_a.name,_a);_a=new Div("div_work","absolute","0","67",null,null,"28","0",this);_a.set_taborder("1");this.addChild(_a.name,_a);_a=new Grid("grd_reqstList","absolute","0","24",null,null,"0","0",this.div_work);_a.set_taborder("0");_a.set_autoenter("select");_a.set_autofittype("col");_a.set_binddataset("ds_reqstList");_a._setContents("<Formats><Format id=\"default\"><Columns><Column size=\"40\"/><Column size=\"30\"/><Column size=\"80\"/><Column size=\"80\"/><Column size=\"80\"/><Column size=\"70\"/><Column size=\"80\"/><Column size=\"80\"/><Column size=\"80\"/><Column size=\"80\"/><Column size=\"70\"/><Column size=\"70\"/><Column size=\"80\"/><Column size=\"80\"/><Column size=\"0\"/><Column size=\"0\"/><Column size=\"0\"/></Columns><Rows><Row size=\"24\" band=\"head\"/><Row size=\"24\" band=\"head\"/><Row size=\"24\"/></Rows><Band id=\"head\"><Cell rowspan=\"2\" text=\"순번\"/><Cell col=\"1\" displaytype=\"normal\" edittype=\"none\" text=\"확정\"/><Cell col=\"2\" rowspan=\"2\" cssclass=\"Cellgrd_WF_HeadEssential\" text=\"차량명\"/><Cell col=\"3\" rowspan=\"2\" text=\"신청일자\"/><Cell col=\"4\" colspan=\"2\" text=\"신청자\"/><Cell col=\"6\" colspan=\"8\" text=\"신청내역\"/><Cell col=\"14\" colspan=\"3\" text=\"전자결재\"/><Cell row=\"1\" col=\"1\" displaytype=\"checkbox\" edittype=\"checkbox\" text=\"0\"/><Cell row=\"1\" col=\"4\" text=\"소속\"/><Cell row=\"1\" col=\"5\" cssclass=\"Cellgrd_WF_HeadEssential\" text=\"성명\"/><Cell row=\"1\" col=\"6\" cssclass=\"Cellgrd_WF_HeadEssential\" text=\"시작일자\"/><Cell row=\"1\" col=\"7\" cssclass=\"Cellgrd_WF_HeadEssential\" text=\"시작시간\"/><Cell row=\"1\" col=\"8\" cssclass=\"Cellgrd_WF_HeadEssential\" text=\"종료일자\"/><Cell row=\"1\" col=\"9\" cssclass=\"Cellgrd_WF_HeadEssential\" text=\"종료시간\"/><Cell row=\"1\" col=\"10\" cssclass=\"Cellgrd_WF_HeadEssential\" text=\"동승자\"/><Cell row=\"1\" col=\"11\" cssclass=\"Cellgrd_WF_HeadEssential\" text=\"운전자\"/><Cell row=\"1\" col=\"12\" cssclass=\"Cellgrd_WF_HeadEssential\" text=\"행선지\"/><Cell row=\"1\" col=\"13\" cssclass=\"Cellgrd_WF_HeadEssential\" text=\"용무\"/><Cell row=\"1\" col=\"14\" text=\"기안\"/><Cell row=\"1\" col=\"15\" text=\"결재\"/><Cell row=\"1\" col=\"16\" text=\"상세\"/></Band><Band id=\"body\"><Cell displaytype=\"number\" text=\"expr:currow + 1\"/><Cell col=\"1\" displaytype=\"checkbox\" edittype=\"expr:comp.parent.parent.ds_cond.getColumn(0, &quot;DEPT_CODE&quot;)==dataset.getColumn(currow, &quot;MANAGE_DEPT_CODE&quot;)?&quot;checkbox&quot;:&quot;none&quot;\" text=\"bind:CONFM_AT\"/><Cell col=\"2\" displaytype=\"combo\" edittype=\"combo\" text=\"bind:VHCLE_CODE\" combodataset=\"ds_vhcleList\" combocodecol=\"VHCLE_CODE\" combodatacol=\"VHCLE_NM\" calendardisplaynulltype=\"none\"/><Cell col=\"3\" displaytype=\"date\" edittype=\"expr:dataset.getRowType(currow)==Dataset.ROWTYPE_INSERT ? 'date':'none'\" text=\"bind:REQST_DE\" calendardisplaynulltype=\"none\"/><Cell col=\"4\" cssclass=\"Cellgrd_WF_AlignLeft\" text=\"bind:APPLCNT_DEPT_NM\"/><Cell col=\"5\" displaytype=\"normal\" edittype=\"expand\" cssclass=\"Cellgrd_WF_AlignLeft\" text=\"bind:APPLCNT_EMPNM\" expandshow=\"show\"/><Cell col=\"6\" displaytype=\"date\" edittype=\"expr:dataset.getRowType(currow)==Dataset.ROWTYPE_INSERT ? 'date':'none'\" text=\"bind:USE_DE\" calendardisplaynulltype=\"none\"/><Cell col=\"7\" edittype=\"expr:dataset.getRowType(currow)==Dataset.ROWTYPE_INSERT ? 'mask':'none'\" style=\"align:center;\" text=\"bind:USE_TM\" mask=\"##:##\"/><Cell col=\"8\" displaytype=\"date\" edittype=\"expr:dataset.getRowType(currow)==Dataset.ROWTYPE_INSERT ? 'date':'none'\" text=\"bind:ENDDE\" calendardisplaynulltype=\"none\"/><Cell col=\"9\" edittype=\"expr:dataset.getRowType(currow)==Dataset.ROWTYPE_INSERT ? 'mask':'none'\" style=\"align:center;\" text=\"bind:END_TM\" mask=\"##:##\"/><Cell col=\"10\" edittype=\"expr:dataset.getRowType(currow)==Dataset.ROWTYPE_INSERT ? 'normal':'none'\" cssclass=\"Cellgrd_WF_AlignLeft\" text=\"bind:USER_NM\"/><Cell col=\"11\" edittype=\"expr:dataset.getRowType(currow)==Dataset.ROWTYPE_INSERT ? 'normal':'none'\" cssclass=\"Cellgrd_WF_AlignLeft\" text=\"bind:DRVER_NM\"/><Cell col=\"12\" edittype=\"expr:dataset.getRowType(currow)==Dataset.ROWTYPE_INSERT ? 'normal':'none'\" cssclass=\"Cellgrd_WF_AlignLeft\" text=\"bind:DSTN\"/><Cell col=\"13\" edittype=\"expr:dataset.getRowType(currow)==Dataset.ROWTYPE_INSERT ? 'normal':'none'\" cssclass=\"Cellgrd_WF_AlignLeft\" text=\"bind:BUSINS\"/><Cell col=\"14\" displaytype=\"image\" text=\"bind:DRFT_STS_IMG\" tooltiptext=\"bind:DRFT_DT\"/><Cell col=\"15\" displaytype=\"image\" style=\"backgroundimage: ;\" text=\"bind:SANCTN_STS_IMG\" tooltiptext=\"bind:LAST_SANCTN_DT\"/><Cell col=\"16\" displaytype=\"expr:DRFT_STS == '1' ? 'image' : 'none'\" edittype=\"none\" style=\"align:center;cursor:EXPR(DRFT_STS!= '1' ? 'arrow' : 'hand');controlbackground: ;\" text=\"URL('theme://images/sanctn/ico_pop_dtl.png')\"/></Band></Format></Formats>");this.div_work.addChild(_a.name,_a);_a=new Layout("default","",0,66,this.div_search,function(_b){_b.set_taborder("0");_b.set_cssclass("div_WFSA_Box");});this.div_search.addLayout(_a.name,_a);_a=new Layout("default","",0,0,this.div_work,function(_b){_b.set_taborder("1");});this.div_work.addLayout(_a.name,_a);_a=new Layout("default","",1059,735,this,function(_b){_b.set_classname("HRM090403");_b.set_titletext("배차신청 등록");});this.addLayout(_a.name,_a);_a=new BindItem("item0","div_search.cal_bgnDe","value","ds_cond","BGN_DE");this.addChild(_a.name,_a);_a.bind();_a=new BindItem("item1","div_search.cal_endDe","value","ds_cond","END_DE");this.addChild(_a.name,_a);_a.bind();_a=new BindItem("item2","div_search.edt_vhcleNm","value","ds_cond","VHCLE_NM");this.addChild(_a.name,_a);_a.bind();_a=new BindItem("item25","div_search.rdo_jobGb","value","ds_cond","JOB_GB");this.addChild(_a.name,_a);_a.bind();_a=null;};this.loadPreloadList=function(){this._addPreloadList("fdl","com::deptCode.xfdl");this._addPreloadList("fdl","com::empno.xfdl");};this.addIncludeScript("HRM090603.xfdl","lib::comInclude.xjs");this.addIncludeScript("HRM090603.xfdl","mis_lib::misUtil.xjs");this.registerScript("HRM090603.xfdl",function(){this.checkDs=[this.ds_reqstList];this.saveRow= -1;this.isAuth=false;this.HRM090403_oninit=function(_a,_b){this.fn_init_form();this.fn_init_dataset();};this.HRM090403_onload=function(_a,_b){this.isAuth=(this.gfn_authcode("005")> -1)||(this.gfn_authcode("112")> -1);this.div_search.div_EMP.fn_setBind("ds_cond","EMPNO","EMPNM");this.div_search.div_DEPT.fn_setBind("ds_cond","DEPT_CODE","DEPT_NM");if(!this.isAuth){this.div_search.div_DEPT.fn_set_enable(false);this.ds_cond.setColumn(0,"DEPT_CODE",this.gfn_getDeptId());this.ds_cond.setColumn(0,"DEPT_NM",this.gfn_getDeptName());this.ds_cond.setColumn(0,"EMPNO",this.fn_getEmpno());this.ds_cond.setColumn(0,"EMPNM",this.fn_getEmpnm());}this.div_search.rdo_jobGb.set_value(0);var _c=this.gfn_today();var _d=this.dateUtils.addDate(_c,1,'s');this.ds_cond.setColumn(0,"END_DE",_d);this.ds_cond.setColumn(0,"BGN_DE",_c);this.fn_transaction("getVhcleList");};this.fn_init_form=function(){this.gfn_initForm(this);this.fn_misFormInit(this);};this.fn_init_dataset=function(){this.gfn_initCondDs(this,this.div_search);};this.fn_search=function(){if(!this.gfn_checkValidation_NoUpdChk(this.ds_cond,this.ds_validation)){return;}this.ds_reqstList.clearData();this.ds_cond.setColumn(0,"JOB_GB",this.div_search.rdo_jobGb.value);this.fn_transaction("tbhrmReqstList");};this.fn_save=function(){if(!this.comUtils.isDatasetUpdated(this.ds_reqstList)){this.gfn_message("comm.데이터.변경.없음");return false;}if(this.gfn_message("confirm.저장.여부")){if(!this.gfn_checkValidation(this.ds_reqstList,this.ds_validation)){return;}this.saveRow=this.ds_reqstList.rowposition;this.fn_transaction("tbhrmReqstSave");}};this.fn_transaction=function(_a){switch(_a){case "getVhcleList":var _b="/hsco/mis/hrm/HRM090403/getVhcleList.do";var _c="input1=ds_cond";var _d="ds_vhcleList=output1";break;case "tbhrmReqstList":var _b="/hsco/mis/hrm/HRM090403/tbhrmReqstList.do";var _c="input1=ds_cond";var _d="ds_reqstList=output1";break;case "tbhrmReqstSave":var _b="/hsco/mis/hrm/HRM090403/tbhrmReqstSave.do";var _c="input1=ds_reqstList:U";var _d="";break;case "tbhrmReqstSave":var _b="hsco/mis/hrm/HRM090403/tbhrmReqstSave.do";var _c="input1=ds_reqstList:U";var _d="";break;}Ex.core.tran(this,_a,_b,_c,_d);};this.fn_callBack=function(_a,_b,_c){if(_b!='0'){this.gfn_callback_message(_a,_b,_c);}if(_b==0){switch(_a){case "getVhcleList":this.fn_search();break;case "tbhrmReqstList":if(this.saveRow> -1){this.ds_reqstList.set_rowposition(this.saveRow);this.saveRow= -1;}break;case "tbhrmReqstSave":this.gfn_message("success.처리.성공");this.fn_search();break;case "tbhrmReqstSave":this.gfn_message("success.처리.성공",null,null,null,this.fn_popupCallback);break;}}};this.fn_popupCallBack=function(_a,_b){switch(_a){case "empnoPopup":var _c=new Dataset();nRowCnt=_c.loadXML(_b);if(nRowCnt>0){this.ds_reqstList.setColumn(this.ds_reqstList.rowposition,"APPLCNT_EMPNO",_c.getColumn(0,"EMPNO"));this.ds_reqstList.setColumn(this.ds_reqstList.rowposition,"APPLCNT_EMPNM",_c.getColumn(0,"EMPNM"));}break;}};this.fn_callback1=function(_a,_b){if(_a=="CellPopup"){this.fn_search();}if(_a=="NewPopup"){this.fn_search();}};this.div_work_grd_reqstList_oncellclick=function(_a,_b){if(_b.cell==0){_a.setCellProperty("Head",_b.cell,"text","0");}if(_b.col==15){var _c=this.ds_reqstList.getColumn(_b.row,"SANCTN_NO");var _d=this.ds_reqstList.getColumn(this.ds_reqstList.rowposition,"SANCTN_STS");var _e=this.ds_reqstList.getColumn(this.ds_reqstList.rowposition,"REGIST_DT");if(_d<1||_d=='NUL'){return;}if(_c){this.popupSactionStts(_c,_e);}}};this.div_work_grd_reqstList_onheadclick=function(_a,_b){if(_b.col==0){this.gfn_setGridCheckAll(_a,_b);var _c=0;for(var _l=0;_l<this.ds_reqstList.rowcount;_l++ ){var _d=this.ds_reqstList.getColumn(_l,"CONFM_AT");var _e=this.ds_reqstList.getColumn(_l,"CHK");if(_d=="1"&&_e=="1"){_c++ ;this.ds_reqstList.setColumn(_l,"CHK","0");}}if(_c>0){alert("확인완료건은 선택할 수 없습니다.");}}else if(_b.col==2){if(!this.isAuth){return;}this.gfn_setGridCheckAll(_a,_b);for(var _l=0;_l<this.ds_reqstList.rowcount;_l++ ){var _f="";var _g="";var _h="";var _i="";var _j=this.ds_reqstList.getColumn(_l,"CONFM_AT");var _k=this.ds_reqstList.getOrgColumn(_l,"CONFM_AT");if(_j==_k){_f=this.ds_reqstList.getOrgColumn(_l,"CONFMER_DEPT_CODE");_g=this.ds_reqstList.getOrgColumn(_l,"CONFMER_EMPNO");_h=this.ds_reqstList.getOrgColumn(_l,"CONFMER_EMPNM");_i=this.ds_reqstList.getOrgColumn(_l,"CONFM_DT");}else if(_j=='1'){_f=this.gfn_getDeptId();_g=this.fn_getEmpno();_h=this.fn_getEmpnm();_i=this.gfn_today();}this.ds_reqstList.setColumn(_l,"CONFMER_DEPT_CODE",_f);this.ds_reqstList.setColumn(_l,"CONFMER_EMPNO",_g);this.ds_reqstList.setColumn(_l,"CONFMER_EMPNM",_h);this.ds_reqstList.setColumn(_l,"CONFM_DT",_i);}}this.gfn_gridSort(_a,_b);};this.div_work_grd_reqstList_onexpandup=function(_a,_b){var _c={arg_0:this,deptCd:this.ds_reqstList.getColumn(this.ds_reqstList.rowposition,"APPLCNT_DEPT_CODE")};this.gfn_popup("empnoPopup",590,500,"신청자 선택",_c,"com::empno_P01.xfdl","fn_popupCallBack",true);};this.fn_insert=function(){var _a=this.ds_reqstList.addRow();this.ds_reqstList.setColumn(_a,"APPLCNT_DEPT_CODE",this.gfn_getDeptId());this.ds_reqstList.setColumn(_a,"APPLCNT_DEPT_NM",this.gfn_getDeptName());this.ds_reqstList.setColumn(_a,"REQST_DE",this.dateUtils.today());};this.fn_delete=function(){var _a='';for(var _f=0;_f<this.ds_reqstList.rowcount;_f++ ){var _b=this.ds_reqstList.getColumn(_f,"CHK");if(_b=='1'){var _c=this.ds_reqstList.getColumn(_f,"DRFT_STS");var _d=(_c=="1"||_c=="9")?false:true;if(!_d){msg=(msg.toString().length>0)?(_f+1)+", "+msg:msg=(_f+1);}else{this.ds_reqstList.deleteRow(_f);}}}if(msg.toString().length>0){var _e=msg+"행은 결재가 진행되어";this.gfn_message("fail.삭제.불가",_e);}};this.fn_cancel=function(){if(this.gfn_message("confirm.취소여부")){this.ds_reqstList.reset();this.ds_reqstList.applyChange();return;}};this.popupSactionStts=function(_a,_b){var _c={arg_0:this,arg_1:_a,arg_2:_b};this.gfn_popup("COM010400_P01",710,580,"전자결재진행 현황",_c,"com::COM010400_P01.xfdl","fn_callback2");};this.ds_reqstList_oncolumnchanged=function(_a,_b){if(_b.columnid=="CHK"){var _c=_a.getColumn(_b.row,"CONFM_AT");var _d=_a.getColumn(_b.row,"CHK");if(_c=="1"&&_d=="1"){alert("확인완료건은 선택할 수 없습니다.");_a.setColumn(_b.row,"CHK","0");}}if(_b.columnid=="CONFM_AT"){var _e="";var _f="";var _g="";var _h="";var _i=_a.getOrgColumn(_b.row,_b.columnid);if(_b.newvalue==_i){_e=_a.getOrgColumn(_b.row,"CONFMER_EMPNO");_f=_a.getOrgColumn(_b.row,"CONFMER_EMPNM");_g=_a.getOrgColumn(_b.row,"CONFMER_DEPT_CODE");_h=_a.getOrgColumn(_b.row,"CONFM_DT");}else if(_b.newvalue=='1'){_e=this.fn_getEmpno();_f=this.fn_getEmpnm();_g=this.gfn_getDeptId();_h=this.gfn_today();}_a.setColumn(_b.row,"CONFMER_EMPNO",_e);_a.setColumn(_b.row,"CONFMER_EMPNM",_f);_a.setColumn(_b.row,"CONFMER_DEPT_CODE",_g);_a.setColumn(_b.row,"CONFM_DT",_h);}};this.div_search_rdo_Gb_onitemchanged=function(_a,_b){this.fn_search();};this.ds_reqstList_onvaluechanged=function(_a,_b){if(_b.columnid=="USE_TM"||_b.columnid=="END_TM"){if(_b.newvalue.substr(0,2)>23||_b.newvalue.substr(2,4)>59){this.gfn_message("comm.항목.무효","시간");_a.set_updatecontrol(false);_a.setColumn(_b.row,_b.columnid,_b.oldvalue);_a.set_updatecontrol(true);}}};});this.on_initEvent=function(){this.ds_reqstList.addEventHandler("oncolumnchanged",this.ds_reqstList_oncolumnchanged,this);this.ds_reqstList.addEventHandler("onrowposchanged",this.ds_reqstList_onrowposchanged,this);this.ds_reqstList.addEventHandler("onvaluechanged",this.ds_reqstList_onvaluechanged,this);this.ds_vhcleList.addEventHandler("onrowposchanged",this.ds_vhcleList_onrowposchanged,this);this.addEventHandler("oninit",this.HRM090403_oninit,this);this.addEventHandler("onload",this.HRM090403_onload,this);this.div_search.cal_bgnDe.addEventHandler("oneditclick",this.div_search_cal_BEGIN_APPLCDE_oneditclick,this);this.div_search.cal_bgnDe.addEventHandler("onchanged",this.div_search_cal_bgnDe_onchanged,this);this.div_search.cal_endDe.addEventHandler("onchanged",this.div_search_cal_endDe_onchanged,this);this.div_search.rdo_jobGb.addEventHandler("onitemchanged",this.div_search_rdo_Gb_onitemchanged,this);this.div_work.grd_reqstList.addEventHandler("onheadclick",this.div_work_grd_reqstList_onheadclick,this);this.div_work.grd_reqstList.addEventHandler("oncellclick",this.div_work_grd_reqstList_oncellclick,this);this.div_work.grd_reqstList.addEventHandler("oncelldblclick",this.div_work_grd_reqstList_oncelldblclick,this);this.div_work.grd_reqstList.addEventHandler("onexpandup",this.div_work_grd_reqstList_onexpandup,this);};this.loadIncludeScript("HRM090603.xfdl");this.loadPreloadList();};})();