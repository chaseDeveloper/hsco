(function(){return function(){if(!this._is_form){return;}this.on_create=function(){var _a=null;if(Form==this.constructor){this.set_name("HRM070501");this.set_classname("HRM070501");this.set_titletext("현장체재비관리");this._setFormPosition(0,0,1059,735);}_a=new Dataset("ds_sptScstList",this);_a.set_firefirstcount("0");_a.getSetter("firenextcount").set("0");_a.set_useclientlayout("true");_a.set_updatecontrol("true");_a.set_enableevent("true");_a.set_loadkeymode("keep");_a.set_loadfiltermode("keep");_a.set_reversesubsum("false");_a._setContents("<ColumnInfo><Column id=\"EMPNO\" type=\"STRING\" size=\"256\"/><Column id=\"EMPNM\" type=\"STRING\" size=\"256\"/><Column id=\"HR_CLSF_NM\" type=\"STRING\" size=\"256\"/><Column id=\"PYMNT_YM\" type=\"STRING\" size=\"256\"/><Column id=\"DEPT_CODE\" type=\"STRING\" size=\"256\"/><Column id=\"DEPT_NM\" type=\"STRING\" size=\"256\"/><Column id=\"CLOS_AT\" type=\"STRING\" size=\"256\"/><Column id=\"AREA_CODE\" type=\"STRING\" size=\"256\"/><Column id=\"AREA_NM\" type=\"STRING\" size=\"256\"/><Column id=\"PYMNT_SE\" type=\"STRING\" size=\"256\"/><Column id=\"PYMNT_AMOUNT\" type=\"BIGDECIMAL\" size=\"256\"/><Column id=\"BGNDE\" type=\"STRING\" size=\"256\"/><Column id=\"ENDDE\" type=\"STRING\" size=\"256\"/><Column id=\"MT_PYMNTAMT\" type=\"BIGDECIMAL\" size=\"256\"/><Column id=\"WORK_DAYCNT\" type=\"BIGDECIMAL\" size=\"256\"/><Column id=\"EDC_DAYCNT\" type=\"BIGDECIMAL\" size=\"256\"/><Column id=\"SLE_DAYCNT\" type=\"BIGDECIMAL\" size=\"256\"/><Column id=\"HALF_DAYCNT\" type=\"BIGDECIMAL\" size=\"256\"/><Column id=\"YRYC_DAYCNT\" type=\"BIGDECIMAL\" size=\"256\"/><Column id=\"OUTNATN_DAYCNT\" type=\"BIGDECIMAL\" size=\"256\"/><Column id=\"ETC_DAYCNT\" type=\"BIGDECIMAL\" size=\"256\"/><Column id=\"RM\" type=\"STRING\" size=\"256\"/></ColumnInfo>");this.addChild(_a.name,_a);_a=new Dataset("ds_cond",this);_a.set_firefirstcount("0");_a.getSetter("firenextcount").set("0");_a.set_useclientlayout("true");_a.set_updatecontrol("true");_a.set_enableevent("true");_a.set_loadkeymode("keep");_a.set_loadfiltermode("keep");_a.set_reversesubsum("false");_a._setContents("<ColumnInfo><Column id=\"PYMNT_YM\" type=\"STRING\" size=\"256\"/><Column id=\"DEPT_CODE\" type=\"STRING\" size=\"256\"/><Column id=\"DEPT_NM\" type=\"STRING\" size=\"256\"/></ColumnInfo><Rows><Row/></Rows>");this.addChild(_a.name,_a);_a=new Dataset("ds_validation",this);_a.set_firefirstcount("0");_a.getSetter("firenextcount").set("0");_a.set_useclientlayout("false");_a.set_updatecontrol("true");_a.set_enableevent("true");_a.set_loadkeymode("keep");_a.set_loadfiltermode("keep");_a.set_reversesubsum("false");_a._setContents("<ColumnInfo><Column id=\"compId\" type=\"STRING\" size=\"256\"/><Column id=\"colId\" type=\"STRING\" size=\"256\"/><Column id=\"PK\" type=\"STRING\" size=\"256\"/><Column id=\"notNull\" type=\"STRING\" size=\"256\"/><Column id=\"type\" type=\"STRING\" size=\"256\"/><Column id=\"nlength\" type=\"STRING\" size=\"256\"/><Column id=\"from\" type=\"STRING\" size=\"256\"/><Column id=\"to\" type=\"STRING\" size=\"256\"/><Column id=\"lengthChkGb\" type=\"STRING\" size=\"256\"/><Column id=\"msgId\" type=\"STRING\" size=\"256\"/><Column id=\"expr\" type=\"STRING\" size=\"256\"/><Column id=\"func\" type=\"STRING\" size=\"256\"/></ColumnInfo><Rows><Row><Col id=\"compId\">ds_sptScstList</Col><Col id=\"colId\">EMPNO</Col><Col id=\"notNull\">Y</Col><Col id=\"msgId\">성명</Col></Row><Row><Col id=\"compId\">ds_sptScstList</Col><Col id=\"colId\">AREA_NM</Col><Col id=\"notNull\">Y</Col><Col id=\"msgId\">지역명</Col></Row><Row><Col id=\"compId\">ds_sptScstList</Col><Col id=\"colId\">BGNDE</Col><Col id=\"from\"/><Col id=\"msgId\">현근무지시작일</Col><Col id=\"notNull\">Y</Col></Row><Row><Col id=\"colId\">ENDDE</Col><Col id=\"compId\">ds_sptScstList</Col><Col id=\"notNull\">Y</Col><Col id=\"msgId\">현근무지종료일</Col></Row><Row><Col id=\"compId\">ds_sptScstList</Col><Col id=\"colId\">ENDDE</Col><Col id=\"from\">BGNDE</Col><Col id=\"msgId\">현근무지종료일^현근무지시작일</Col></Row><Row><Col id=\"colId\">PYMNT_YM</Col><Col id=\"compId\">ds_cond</Col><Col id=\"notNull\">Y</Col><Col id=\"msgId\">기준년월</Col></Row></Rows>");this.addChild(_a.name,_a);_a=new Dataset("ds_hrm032",this);_a.set_firefirstcount("0");_a.getSetter("firenextcount").set("0");_a.set_useclientlayout("false");_a.set_updatecontrol("true");_a.set_enableevent("true");_a.set_loadkeymode("keep");_a.set_loadfiltermode("keep");_a.set_reversesubsum("false");_a._setContents("<ColumnInfo><Column id=\"GRP_CODE_SN\" type=\"bigdecimal\" size=\"16\"/><Column id=\"CODE_CN\" type=\"string\" size=\"32\"/><Column id=\"CODE_ORDR\" type=\"bigdecimal\" size=\"16\"/><Column id=\"USE_AT\" type=\"string\" size=\"32\"/><Column id=\"CODE_NM\" type=\"string\" size=\"32\"/><Column id=\"GRP_CODE\" type=\"string\" size=\"32\"/><Column id=\"CODE\" type=\"string\" size=\"32\"/></ColumnInfo>");this.addChild(_a.name,_a);_a=new Dataset("ds_cond_sub",this);_a.set_firefirstcount("0");_a.getSetter("firenextcount").set("0");_a.set_useclientlayout("true");_a.set_updatecontrol("true");_a.set_enableevent("true");_a.set_loadkeymode("keep");_a.set_loadfiltermode("keep");_a.set_reversesubsum("false");_a._setContents("<ColumnInfo><Column id=\"EMPNO\" type=\"STRING\" size=\"256\"/><Column id=\"BGNDE\" type=\"STRING\" size=\"256\"/><Column id=\"ENDDE\" type=\"STRING\" size=\"256\"/></ColumnInfo><Rows><Row/></Rows>");this.addChild(_a.name,_a);_a=new Dataset("ds_yrycInfo",this);_a.set_firefirstcount("0");_a.getSetter("firenextcount").set("0");_a.set_useclientlayout("true");_a.set_updatecontrol("true");_a.set_enableevent("true");_a.set_loadkeymode("keep");_a.set_loadfiltermode("keep");_a.set_reversesubsum("false");_a._setContents("<ColumnInfo><Column id=\"STDR_DAYCNT\" type=\"BIGDECIMAL\" size=\"256\"/><Column id=\"EDC_DAYCNT\" type=\"BIGDECIMAL\" size=\"256\"/><Column id=\"SLE_DAYCNT\" type=\"BIGDECIMAL\" size=\"256\"/><Column id=\"YRYC_DAYCNT\" type=\"BIGDECIMAL\" size=\"256\"/><Column id=\"OUTNATN_DAYCNT\" type=\"BIGDECIMAL\" size=\"256\"/><Column id=\"HALF_DAYCNT\" type=\"BIGDECIMAL\" size=\"256\"/></ColumnInfo>");this.addChild(_a.name,_a);_a=new Dataset("ds_sptScstCloseDt",this);_a.set_firefirstcount("0");_a.getSetter("firenextcount").set("0");_a.set_useclientlayout("true");_a.set_updatecontrol("true");_a.set_enableevent("true");_a.set_loadkeymode("keep");_a.set_loadfiltermode("keep");_a.set_reversesubsum("false");_a._setContents("<ColumnInfo><Column id=\"STDR_YR\" type=\"STRING\" size=\"256\"/><Column id=\"STDR_YM\" type=\"STRING\" size=\"256\"/><Column id=\"REGIST_CLOS_DE\" type=\"STRING\" size=\"256\"/></ColumnInfo>");this.addChild(_a.name,_a);_a=new Static("Static00","absolute",null,"0","15","735","13",null,this);_a.set_taborder("2");_a.set_text("15");_a.set_visible("false");_a.style.set_background("#1b3cd23c");_a.style.set_align("center middle");this.addChild(_a.name,_a);_a=new Static("Static01","absolute",null,"0","13","735","0",null,this);_a.set_taborder("3");_a.set_text("스\r\n크\r\n롤\r\n13");_a.set_visible("false");_a.style.set_background("#d07b173c");_a.style.set_align("center middle");this.addChild(_a.name,_a);_a=new Div("div_search","absolute","0","0",null,"33","28",null,this);_a.set_taborder("0");_a.set_cssclass("div_WFSA_Box");this.addChild(_a.name,_a);_a=new Static("sta_registDe","absolute","15","6","64","21",null,null,this.div_search);_a.set_taborder("2");_a.set_text("기준년월");_a.set_cssclass("sta_WFSA_Label");this.div_search.addChild(_a.name,_a);_a=new Static("sta_searchDept","absolute","179","6","64","21",null,null,this.div_search);_a.set_taborder("4");_a.set_text("대상부서");_a.set_cssclass("sta_WFSA_Label");this.div_search.addChild(_a.name,_a);_a=new Div("div_DEPT","absolute","243","6","195","21",null,null,this.div_search);_a.set_taborder("5");_a.set_async("false");_a.set_url("com::deptCode.xfdl");this.div_search.addChild(_a.name,_a);_a=new Div("div_pymntYm","absolute","79","6","85","21",null,null,this.div_search);_a.set_taborder("6");_a.set_async("false");_a.set_url("common::frmMonCal.xfdl");this.div_search.addChild(_a.name,_a);_a=new Static("sta_closeInfo","absolute","453","6","265","21",null,null,this.div_search);_a.set_taborder("7");_a.set_text("Static00");_a.style.set_color("red");_a.style.set_font("bold 9 Gulim");this.div_search.addChild(_a.name,_a);_a=new Static("sta_pblancList","absolute","0","42","150","19",null,null,this);_a.set_taborder("4");_a.set_text("현장체재비 등록내역");_a.set_cssclass("sta_WF_Title02");this.addChild(_a.name,_a);_a=new Grid("grd_sptScstList","absolute","0","62",null,null,"28","144",this);_a.set_taborder("5");_a.set_binddataset("ds_sptScstList");_a.set_autoenter("select");_a.set_autoupdatetype("itemselect");_a._setContents("<Formats><Format id=\"default\"><Columns><Column size=\"0\"/><Column size=\"40\"/><Column size=\"80\"/><Column size=\"100\"/><Column size=\"90\"/><Column size=\"150\"/><Column size=\"100\"/><Column size=\"150\"/><Column size=\"100\"/><Column size=\"100\"/><Column size=\"60\"/><Column size=\"50\"/><Column size=\"50\"/><Column size=\"50\"/><Column size=\"40\"/><Column size=\"55\"/><Column size=\"50\"/><Column size=\"60\"/><Column size=\"100\"/><Column size=\"250\"/></Columns><Rows><Row size=\"24\" band=\"head\"/><Row size=\"24\" band=\"head\"/><Row size=\"24\"/></Rows><Band id=\"head\"><Cell/><Cell col=\"1\" rowspan=\"2\" text=\"마감&#13;&#10;여부\"/><Cell col=\"2\" colspan=\"4\" text=\"사원\"/><Cell col=\"6\" colspan=\"2\" text=\"근무지역\"/><Cell col=\"8\" colspan=\"2\" text=\"기간\"/><Cell col=\"10\" rowspan=\"2\" text=\"월근무&#13;&#10;기준일수\"/><Cell col=\"11\" colspan=\"6\" text=\"산출제외일수\"/><Cell col=\"17\" rowspan=\"2\" text=\"현장근무&#13;&#10;일수\"/><Cell col=\"18\" rowspan=\"2\" text=\"총지급액\"/><Cell col=\"19\" rowspan=\"2\" text=\"비고\"/><Cell row=\"1\"/><Cell row=\"1\" col=\"2\" style=\"background:URL('theme://images/grd_WF_HeadEssential.png') left top;\" text=\"사번\"/><Cell row=\"1\" col=\"3\" text=\"성명\"/><Cell row=\"1\" col=\"4\" text=\"직급\"/><Cell row=\"1\" col=\"5\" text=\"부서\"/><Cell row=\"1\" col=\"6\" style=\"background: ;\" text=\"지급구분\"/><Cell row=\"1\" col=\"7\" style=\"background:URL('theme://images/grd_WF_HeadEssential.png') left top;\" text=\"지역명\"/><Cell row=\"1\" col=\"8\" style=\"background:URL('theme://images/grd_WF_HeadEssential.png') left top;\" text=\"현근무처시작일\"/><Cell row=\"1\" col=\"9\" style=\"background:URL('theme://images/grd_WF_HeadEssential.png') left top;\" text=\"현근무처종료일\"/><Cell row=\"1\" col=\"11\" text=\"교육\"/><Cell row=\"1\" col=\"12\" text=\"병가\"/><Cell row=\"1\" col=\"13\" text=\"연차\"/><Cell row=\"1\" col=\"14\" text=\"반차\"/><Cell row=\"1\" col=\"15\" text=\"국외출장\"/><Cell row=\"1\" col=\"16\" text=\"기타\"/></Band><Band id=\"body\"><Cell displaytype=\"checkbox\" edittype=\"checkbox\" text=\"bind:CNFIRM_AT\"/><Cell col=\"1\" displaytype=\"checkbox\" edittype=\"expr:comp.parent.admin ? &quot;checkbox&quot; : &quot;none&quot;\" text=\"bind:CLOS_AT\"/><Cell col=\"2\" text=\"bind:EMPNO\" expandshow=\"expr:comp.parent.updateYn == 'Y' ? CLOS_AT == &quot;1&quot; ? &quot;hide&quot; : &quot;show&quot; : &quot;hide&quot;\"/><Cell col=\"3\" text=\"bind:EMPNM\"/><Cell col=\"4\" text=\"bind:HR_CLSF_NM\"/><Cell col=\"5\" text=\"bind:DEPT_NM\"/><Cell col=\"6\" displaytype=\"combo\" style=\"align:center middle;\" text=\"bind:PYMNT_SE\" combodataset=\"ds_hrm032\" combocodecol=\"CODE\" combodatacol=\"CODE_NM\" combodisplay=\"edit\"/><Cell col=\"7\" style=\"align:center middle;\" text=\"bind:AREA_NM\" expandshow=\"expr:comp.parent.updateYn == 'Y' ? CLOS_AT == &quot;1&quot; ? &quot;hide&quot; : &quot;show&quot; : &quot;hide&quot;\"/><Cell col=\"8\" displaytype=\"date\" edittype=\"expr:comp.parent.updateYn == 'Y' ? CLOS_AT == &quot;1&quot; ? &quot;none&quot; : &quot;date&quot; : &quot;none&quot;\" style=\"align:center middle;\" text=\"bind:BGNDE\" calendardisplay=\"expr:comp.parent.updateYn == 'Y' ? CLOS_AT == &quot;1&quot; ? &quot;edit&quot; : &quot;display&quot; : &quot;edit&quot;\" calendardisplaynulltype=\"none\"/><Cell col=\"9\" displaytype=\"date\" edittype=\"expr:comp.parent.updateYn == 'Y' ? CLOS_AT == &quot;1&quot; ? &quot;none&quot; : &quot;date&quot; : &quot;none&quot;\" style=\"align:center middle;\" text=\"bind:ENDDE\" calendardisplay=\"expr:comp.parent.updateYn == 'Y' ? CLOS_AT == &quot;1&quot; ? &quot;edit&quot; : &quot;display&quot; : &quot;edit&quot;\" calendardisplaynulltype=\"none\"/><Cell col=\"10\" style=\"align:center middle;\" text=\"expr:nexacro.toNumber(WORK_DAYCNT+EDC_DAYCNT+SLE_DAYCNT+HALF_DAYCNT+YRYC_DAYCNT+OUTNATN_DAYCNT+ETC_DAYCNT,null,null,null)\"/><Cell col=\"11\" style=\"align:center middle;\" text=\"bind:EDC_DAYCNT\"/><Cell col=\"12\" style=\"align:center middle;\" text=\"bind:SLE_DAYCNT\"/><Cell col=\"13\" style=\"align:center middle;\" text=\"bind:YRYC_DAYCNT\"/><Cell col=\"14\" text=\"bind:HALF_DAYCNT\"/><Cell col=\"15\" style=\"align:center middle;\" text=\"bind:OUTNATN_DAYCNT\"/><Cell col=\"16\" edittype=\"expr:comp.parent.updateYn == 'Y' ? CLOS_AT == &quot;1&quot; ? &quot;none&quot; : &quot;normal&quot; : &quot;none&quot;\" editfilter=\"integer\" style=\"align:center middle;\" text=\"bind:ETC_DAYCNT\" editdisplay=\"expr:comp.parent.updateYn == 'Y' ? CLOS_AT == &quot;1&quot; ? &quot;edit&quot; : &quot;display&quot; : &quot;edit&quot;\"/><Cell col=\"17\" style=\"align:center middle;\" text=\"bind:WORK_DAYCNT\"/><Cell col=\"18\" displaytype=\"number\" text=\"bind:MT_PYMNTAMT\"/><Cell col=\"19\" edittype=\"expr:comp.parent.updateYn == 'Y' ? CLOS_AT == &quot;1&quot; ? &quot;none&quot; : &quot;normal&quot; : &quot;none&quot;\" text=\"bind:RM\" editdisplay=\"expr:comp.parent.updateYn == 'Y' ? CLOS_AT == &quot;1&quot; ? &quot;edit&quot; : &quot;display&quot; : &quot;edit&quot;\"/></Band></Format></Formats>");this.addChild(_a.name,_a);_a=new Static("Static02","absolute","0","57","1031","5",null,null,this);_a.set_taborder("6");_a.set_text("5");_a.set_visible("false");_a.style.set_background("#dc143c3c");_a.style.set_align("center middle");this.addChild(_a.name,_a);_a=new Static("Static36","absolute","0","33","1031","10",null,null,this);_a.set_taborder("7");_a.set_text("10");_a.set_visible("false");_a.style.set_background("#dc143c3c");_a.style.set_align("center middle");this.addChild(_a.name,_a);_a=new GroupBox("GroupBox00","absolute","5",null,null,"129","33","5",this);_a.set_taborder("8");_a.set_text("총 지급액 산출공식");this.addChild(_a.name,_a);_a=new Static("Static03","absolute","15",null,"433","100",null,"15",this);_a.set_taborder("9");_a.set_text("① 현장근무 일 수, 15일 이상일 경우\r\n  - 지역별 등록된 월정액 적용\r\n\r\n② 현장근무 일 수, 15일 미만일 경우 (※ 천원단위 미만 절사)\r\n  - (지역별 등록된 월정액 / 15일) * 현장근무 일 수");this.addChild(_a.name,_a);_a=new Layout("default","",0,33,this.div_search,function(_b){_b.set_taborder("0");_b.set_cssclass("div_WFSA_Box");});this.div_search.addLayout(_a.name,_a);_a=new Layout("default","",1059,735,this,function(_b){_b.set_classname("HRM070501");_b.set_titletext("현장체재비관리");});this.addLayout(_a.name,_a);_a=null;};this.loadPreloadList=function(){this._addPreloadList("fdl","com::deptCode.xfdl");this._addPreloadList("fdl","common::frmMonCal.xfdl");};this.addIncludeScript("HRM070501.xfdl","lib::comInclude.xjs");this.addIncludeScript("HRM070501.xfdl","mis_lib::misUtil.xjs");this.registerScript("HRM070501.xfdl",function(){this.srcYm='';this.admin=true;this.updateYn='N';this.HRM070501_oninit=function(_a,_b){};this.HRM070501_onload=function(_a,_b){this.fn_init_form();this.fn_init_dataset();};this.fn_init_form=function(){this.gfn_initForm(this);this.fn_misFormInit(this);this.admin=true;this.div_search.div_pymntYm.msk_mon.set_cssclass("msk_WF_Essential");this.div_search.div_DEPT.fn_setBind("ds_cond","DEPT_CODE","DEPT_NM");this.div_search.div_pymntYm.fn_setBind("ds_cond","PYMNT_YM");this.ds_cond.setColumn(0,"DEPT_CODE",this.gfn_getDeptId());this.ds_cond.setColumn(0,"DEPT_NM",this.gfn_getDeptName());this.ds_cond.set_enableevent(false);this.ds_cond.setColumn(0,"PYMNT_YM",this.gfn_today().substr(0,6));this.ds_cond.set_enableevent(true);var _a=[["ds_hrm032","HRM032","Y","E","B"]];var _b=function(_c,_d,_e){this.fn_search();};this.gfn_comboLoad(_a,_b);};this.fn_init_dataset=function(){this.gfn_initCondDs(this,this.div_search);};this.fn_search=function(){if(!this.gfn_checkValidation_NoUpdChk(this.ds_cond,this.ds_validation)){return;}this.ds_sptScstList.clearData();this.srcYm=this.ds_cond.getColumn(0,"PYMNT_YM");this.fn_transaction("selectSptScstList");};this.fn_save=function(){if(!this.comUtils.isDatasetUpdated(this.ds_sptScstList)){this.gfn_message("comm.데이터.변경.없음");return false;}if(!this.gfn_checkValidation_NoUpdChk(this.ds_sptScstList,this.ds_validation)){return;}if(this.gfn_message("confirm.저장.여부")){this.fn_transaction("saveSptScstCUD");}};this.fn_transaction=function(_a){switch(_a){case "selectSptScstList":var _b="/hsco/mis/hrm/HRM070501/selectSptScstList.do";var _c="input1=ds_cond";var _d="ds_sptScstList=output1 ds_sptScstCloseDt=output2";break;case "saveSptScstCUD":var _b="/hsco/mis/hrm/HRM070501/saveSptScstCUD.do";var _c="input1=ds_sptScstList:U";var _d="";break;case "selectYrycInfo":var _b="/hsco/mis/hrm/HRM070501/selectYrycInfo.do";var _c="input1=ds_cond_sub";var _d="ds_yrycInfo=output1";break;}Ex.core.tran(this,_a,_b,_c,_d);};this.fn_callBack=function(_a,_b,_c){if(_b!='0'){this.gfn_callback_message(_a,_b,_c);}if(_b==0){switch(_a){case "selectSptScstList":if(this.ds_sptScstCloseDt.rowcount>0){var _d=this.ds_sptScstCloseDt.getColumn(0,"REGIST_CLOS_DE");var _e="등록마감일자 : "+_d.substr(0,4)+"년 "+_d.substr(4,2)+"월 "+_d.substr(6,2)+"일";this.div_search.sta_closeInfo.set_text(_e);if(this.admin){this.updateYn='Y';}else{if(this.gfn_today()>_d){this.updateYn='N';}else{this.updateYn='Y';}}}else{this.updateYn='Y';this.div_search.sta_closeInfo.set_text(null);}if(this.ds_sptScstList.rowcount>0){this.ds_sptScstList.set_rowposition( -1);this.ds_sptScstList.set_rowposition(0);}break;case "saveSptScstCUD":this.gfn_message("success.처리.성공");this.fn_search();break;case "selectYrycInfo":var _f=this.ds_sptScstList.rowposition;if(this.ds_yrycInfo.rowcount>0){var _g=this.ds_yrycInfo.getColumn(0,"STDR_DAYCNT");var _h=this.ds_yrycInfo.getColumn(0,"EDC_DAYCNT");var _i=this.ds_yrycInfo.getColumn(0,"SLE_DAYCNT");var _j=this.ds_yrycInfo.getColumn(0,"YRYC_DAYCNT");var _k=this.ds_yrycInfo.getColumn(0,"HALF_DAYCNT");var _l=this.ds_yrycInfo.getColumn(0,"OUTNATN_DAYCNT");var _m=this.ds_sptScstList.getColumn(_f,"ETC_DAYCNT");var _n=this.ds_sptScstList.getColumn(_f,"PYMNT_SE");if(this.comUtils.isNull(_m)){_m=0;this.ds_sptScstList.set_enableevent(false);this.ds_sptScstList.setColumn(_f,"ETC_DAYCNT",_m);this.ds_sptScstList.set_enableevent(true);}var _o=_g-(_h+_i+_j+_k+_l+_m);this.ds_sptScstList.setColumn(_f,"EDC_DAYCNT",_h);this.ds_sptScstList.setColumn(_f,"SLE_DAYCNT",_i);this.ds_sptScstList.setColumn(_f,"YRYC_DAYCNT",_j);this.ds_sptScstList.setColumn(_f,"HALF_DAYCNT",_k);this.ds_sptScstList.setColumn(_f,"OUTNATN_DAYCNT",_l);this.ds_sptScstList.setColumn(_f,"WORK_DAYCNT",_o);}break;}}};this.fn_popupCallBack=function(_a,_b){if(_a=="EMPNO_P01"){var _c=new Dataset();var _d=_c.loadXML(_b);if(_d){var _e=_c.getColumn(0,"DEPT_CODE");var _f=_c.getColumn(0,"DEPT_NM");var _g=_c.getColumn(0,"EMPNO");var _h=_c.getColumn(0,"EMPNM");var _i=_c.getColumn(0,"HR_CLSF_NM");var _j=this.ds_sptScstList.findRow("EMPNO",_g);if(_j<0){var _k=this.ds_sptScstList.rowposition;this.ds_sptScstList.setColumn(_k,"DEPT_CODE",_e);this.ds_sptScstList.setColumn(_k,"DEPT_NM",_f);this.ds_sptScstList.setColumn(_k,"EMPNO",_g);this.ds_sptScstList.setColumn(_k,"EMPNM",_h);this.ds_sptScstList.setColumn(_k,"HR_CLSF_NM",_i);this.fn_yrycInfo();}else{alert("동일한 대상자가 존재합니다.");}}}if(_a=="HRM070503_P01"){var _l=new Dataset();var _d=_l.loadXML(_b);if(_d){var _m=_l.getColumn(0,"AREA_CODE");var _n=_l.getColumn(0,"PYMNT_SE");var _o=_l.getColumn(0,"AREA_NM");var _p=_l.getColumn(0,"PYMNT_AMOUNT");var _k=this.ds_sptScstList.rowposition;this.ds_sptScstList.setColumn(_k,"PYMNT_AMOUNT",_p);this.ds_sptScstList.setColumn(_k,"AREA_CODE",_m);this.ds_sptScstList.setColumn(_k,"PYMNT_SE",null);this.ds_sptScstList.setColumn(_k,"PYMNT_SE",_n);this.ds_sptScstList.setColumn(_k,"AREA_NM",_o);}else{var _k=this.ds_sptScstList.rowposition;this.ds_sptScstList.setColumn(_k,"PYMNT_AMOUNT",0);this.ds_sptScstList.setColumn(_k,"AREA_CODE",null);this.ds_sptScstList.setColumn(_k,"PYMNT_SE",null);this.ds_sptScstList.setColumn(_k,"AREA_NM",null);}}};this.div_work_grd_pblancList_onexpandup=function(_a,_b){if(_b.cell=='2'){this.gfn_popup("EMPNO_P01",500,457,'',{deptCode:"",empNo:"",empNm:"",deptCd:this.ds_cond.getColumn(0,"DEPT_CODE")},"com::empno_P01.xfdl","fn_popupCallBack",true);}if(_b.cell=='7'){this.gfn_popup("HRM070503_P01",500,457,'',null,"mis_hrm::HRM070503_P01.xfdl","fn_popupCallBack",true);}};this.div_work_grd_pblancList_onheadclick=function(_a,_b){this.gfn_gridSort(_a,_b);};this.fn_insert=function(){if(this.updateYn=='Y'){var _a=this.ds_sptScstList.addRow();this.ds_sptScstList.setColumn(_a,"PYMNT_SE","");this.ds_sptScstList.setColumn(_a,"PYMNT_YM",this.srcYm);this.ds_sptScstList.setColumn(_a,"BGNDE",this.srcYm+"01");this.ds_sptScstList.setColumn(_a,"ENDDE",this.dateUtils.format(this.dateUtils.getLastDay(this.srcYm+"01"),"yyyymmdd"));}else{alert("등록마감일이 경과되었습니다.");}};this.fn_delete=function(){if(this.updateYn=='Y'){var _a=this.ds_sptScstList.rowposition;var _b=this.ds_sptScstList.getColumn(_a,"CLOS_AT");if(_b!="1"){if(this.gfn_message("confirm.삭제여부")){this.ds_sptScstList.deleteRow(_a);}}else{this.gfn_message("fail.삭제.불가","마감이 완료되어");}}else{alert("등록마감일이 경과되었습니다.");}};this.fn_cancel=function(){if(this.gfn_message("confirm.취소여부")){this.ds_sptScstList.reset();this.ds_sptScstList.applyChange();return;}};this.fn_yrycInfo=function(){var _a=this.ds_sptScstList.rowposition;var _b=this.ds_sptScstList.getColumn(_a,"EMPNO");var _c=this.ds_sptScstList.getColumn(_a,"BGNDE");var _d=this.ds_sptScstList.getColumn(_a,"ENDDE");if(!this.comUtils.isNull(_b)&&!this.comUtils.isNull(_c)&&!this.comUtils.isNull(_d)){this.ds_cond_sub.clearData();this.ds_cond_sub.addRow();this.ds_cond_sub.setColumn(0,"EMPNO",_b);this.ds_cond_sub.setColumn(0,"BGNDE",_c);this.ds_cond_sub.setColumn(0,"ENDDE",_d);this.fn_transaction("selectYrycInfo");}else{this.ds_sptScstList.setColumn(_a,"EDC_DAYCNT",null);this.ds_sptScstList.setColumn(_a,"SLE_DAYCNT",null);this.ds_sptScstList.setColumn(_a,"YRYC_DAYCNT",null);this.ds_sptScstList.setColumn(_a,"HALF_DAYCNT",null);this.ds_sptScstList.setColumn(_a,"OUTNATN_DAYCNT",null);this.ds_sptScstList.setColumn(_a,"WORK_DAYCNT",null);}};this.ds_sptScstList_cancolumnchange=function(_a,_b){if(_b.columnid=="BGNDE"||_b.columnid=="ENDDE"){var _c=this.ds_cond.getColumn(0,"PYMNT_YM");if(_b.columnid=="BGNDE"&&!this.comUtils.isNull(_b.newvalue)){if(_c==_b.newvalue.substr(0,6)){var _d=this.ds_sptScstList.getColumn(_b.row,"ENDDE");if(!this.comUtils.isNull(_d)){if(_b.newvalue<_d){}else{alert("종료일은 시작일보다 크거나 같아야 합니다.");return false;}}}else{alert("시작일은 기준년월에 해당되어야 합니다.");return false;}}if(_b.columnid=="ENDDE"&&!this.comUtils.isNull(_b.newvalue)){if(_c==_b.newvalue.substr(0,6)){var _e=this.ds_sptScstList.getColumn(_b.row,"BGNDE");if(!this.comUtils.isNull(_e)){if(_e<_b.newvalue){}else{alert("종료일은 시작일보다 크거나 같아야 합니다.");return false;}}}else{alert("종료일은 기준년월에 해당되어야 합니다.");return false;}}}};this.ds_sptScstList_oncolumnchanged=function(_a,_b){if(_b.columnid=="BGNDE"||_b.columnid=="ENDDE"){this.fn_yrycInfo();}if(_b.columnid=="ETC_DAYCNT"){if(this.comUtils.isNull(_b.newvalue)){_a.set_enableevent(false);_a.setColumn(_b.row,_b.columnid,0);_a.set_enableevent(true);}var _c=_a.getColumn(_b.row,"ETC_DAYCNT");var _d=_a.getColumn(_b.row,"WORK_DAYCNT");var _e=_a.getColumn(_b.row,"PYMNT_SE");if(!this.comUtils.isNull(_d)){this.ds_sptScstList.setColumn(_b.row,"WORK_DAYCNT",nexacro.toNumber(_d+_b.oldvalue-_c,null,null,null));if(!this.comUtils.isNull(_e)){this.fn_mt_pymntAmt();}}}if(_b.columnid=="PYMNT_SE"){if(!this.comUtils.isNull(_b.newvalue)){var _f=_a.getColumn(_b.row,"WORK_DAYCNT");if(!this.comUtils.isNull(_f)){this.fn_mt_pymntAmt();}else{_a.setColumn(_b.row,"MT_PYMNTAMT",null);}}else{_a.setColumn(_b.row,"MT_PYMNTAMT",null);}}if(_b.columnid=="WORK_DAYCNT"){if(!this.comUtils.isNull(_b.newvalue)){var _g=_a.getColumn(_b.row,"PYMNT_SE");if(!this.comUtils.isNull(_g)){this.fn_mt_pymntAmt();}else{_a.setColumn(_b.row,"MT_PYMNTAMT",null);}}else{_a.setColumn(_b.row,"MT_PYMNTAMT",null);}}};this.fn_mt_pymntAmt=function(){var _a=this.ds_sptScstList.rowposition;var _b=this.ds_sptScstList.getColumn(_a,"WORK_DAYCNT");var _c=this.ds_sptScstList.getColumn(_a,"PYMNT_SE");var _d=this.ds_sptScstList.getColumn(_a,"PYMNT_AMOUNT");var _e=0;if(_b>=15){_e=_d;}else{if(_c=='A'){_e=nexacro.floor(_d/15, -3)*_b;}if(_c=='B'){_e=nexacro.floor(_d/15, -3)*_b;}}this.ds_sptScstList.setColumn(_a,"MT_PYMNTAMT",_e);};this.ds_cond_oncolumnchanged=function(_a,_b){if(_b.columnid=="PYMNT_YM"){this.fn_search();}};this.ds_cond_cancolumnchange=function(_a,_b){if(_b.columnid=="PYMNT_YM"){if(!this.comUtils.isNull(_b.newvalue)){if(Ex.util.isUpdated(this.ds_sptScstList)){if(this.gfn_message("confirm.변경.취소.여부")){return true;}else{return false;}}else{return true;}}else{return false;}}};});this.on_initEvent=function(){this.ds_sptScstList.addEventHandler("cancolumnchange",this.ds_sptScstList_cancolumnchange,this);this.ds_sptScstList.addEventHandler("oncolumnchanged",this.ds_sptScstList_oncolumnchanged,this);this.ds_cond.addEventHandler("oncolumnchanged",this.ds_cond_oncolumnchanged,this);this.ds_cond.addEventHandler("cancolumnchange",this.ds_cond_cancolumnchange,this);this.ds_yrycInfo.addEventHandler("oncolumnchanged",this.ds_sptScstList_oncolumnchanged,this);this.ds_sptScstCloseDt.addEventHandler("cancolumnchange",this.ds_sptScstList_cancolumnchange,this);this.ds_sptScstCloseDt.addEventHandler("oncolumnchanged",this.ds_sptScstList_oncolumnchanged,this);this.addEventHandler("onload",this.HRM070501_onload,this);this.addEventHandler("oninit",this.HRM070501_oninit,this);this.grd_sptScstList.addEventHandler("onheadclick",this.div_work_grd_pblancList_onheadclick,this);this.grd_sptScstList.addEventHandler("onexpandup",this.div_work_grd_pblancList_onexpandup,this);};this.loadIncludeScript("HRM070501.xfdl");this.loadPreloadList();};})();