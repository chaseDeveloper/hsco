(function(){return function(){if(!this._is_form){return;}this.on_create=function(){var _a=null;if(Form==this.constructor){this.set_name("HRM010201");this.set_classname("");this.set_titletext("조직도등록");this._setFormPosition(0,0,1059,735);}this.getSetter("inheritanceid").set("");_a=new Dataset("ds_cond",this);_a.set_firefirstcount("0");_a.getSetter("firenextcount").set("0");_a.set_useclientlayout("true");_a.set_updatecontrol("true");_a.set_enableevent("true");_a.set_loadkeymode("keep");_a.set_loadfiltermode("keep");_a.set_reversesubsum("false");_a._setContents("<ColumnInfo><Column id=\"ORGCHT_CNM\" type=\"STRING\" size=\"256\"/></ColumnInfo>");this.addChild(_a.name,_a);_a=new Dataset("ds_cond_sub",this);_a.set_firefirstcount("0");_a.getSetter("firenextcount").set("0");_a.set_useclientlayout("true");_a.set_updatecontrol("true");_a.set_enableevent("true");_a.set_loadkeymode("keep");_a.set_loadfiltermode("keep");_a.set_reversesubsum("false");_a._setContents("<ColumnInfo><Column id=\"ORGCHT_CODE\" type=\"STRING\" size=\"256\"/><Column id=\"TRGET_ORGCHT_CODE\" type=\"STRING\" size=\"256\"/></ColumnInfo>");this.addChild(_a.name,_a);_a=new Dataset("ds_orgcht",this);_a.set_firefirstcount("0");_a.getSetter("firenextcount").set("0");_a.set_useclientlayout("true");_a.set_updatecontrol("true");_a.set_enableevent("true");_a.set_loadkeymode("keep");_a.set_loadfiltermode("keep");_a.set_reversesubsum("false");_a._setContents("<ColumnInfo><Column id=\"ORGCHT_CODE\" type=\"STRING\" size=\"256\"/><Column id=\"ORGCHT_NM\" type=\"STRING\" size=\"256\"/><Column id=\"APPLC_DE\" type=\"STRING\" size=\"256\"/><Column id=\"APPLC_AT\" type=\"STRING\" size=\"256\"/><Column id=\"RM\" type=\"STRING\" size=\"256\"/><Column id=\"REGISTER_ID\" type=\"STRING\" size=\"256\"/><Column id=\"REGIST_DT\" type=\"STRING\" size=\"256\"/><Column id=\"UPDUSR_ID\" type=\"STRING\" size=\"256\"/><Column id=\"UPDT_DT\" type=\"STRING\" size=\"256\"/></ColumnInfo>");this.addChild(_a.name,_a);_a=new Dataset("ds_orgcht_dept",this);_a.set_firefirstcount("0");_a.getSetter("firenextcount").set("0");_a.set_useclientlayout("true");_a.set_updatecontrol("true");_a.set_enableevent("true");_a.set_loadkeymode("keep");_a.set_loadfiltermode("keep");_a.set_reversesubsum("false");_a._setContents("<ColumnInfo><Column id=\"ORGCHT_CODE\" type=\"STRING\" size=\"256\"/><Column id=\"DEPT_CODE\" type=\"STRING\" size=\"256\"/><Column id=\"ORI_DEPT_CODE\" type=\"STRING\" size=\"256\"/><Column id=\"DEPT_NM\" type=\"STRING\" size=\"256\"/><Column id=\"DEPT_CNM\" type=\"STRING\" size=\"256\"/><Column id=\"UPPER_DEPT_CODE\" type=\"STRING\" size=\"256\"/><Column id=\"DEPT_LEVEL\" type=\"INT\" size=\"256\"/><Column id=\"SORT_ORDR\" type=\"STRING\" size=\"256\"/><Column id=\"RM\" type=\"STRING\" size=\"256\"/><Column id=\"REGISTER_ID\" type=\"STRING\" size=\"256\"/><Column id=\"REGIST_DT\" type=\"STRING\" size=\"256\"/><Column id=\"UPDUSR_ID\" type=\"STRING\" size=\"256\"/><Column id=\"UPDT_DT\" type=\"STRING\" size=\"256\"/><Column id=\"USE_AT\" type=\"STRING\" size=\"256\"/></ColumnInfo>");this.addChild(_a.name,_a);_a=new Dataset("ds_validation",this);_a.set_firefirstcount("0");_a.getSetter("firenextcount").set("0");_a.set_updatecontrol("true");_a.set_enableevent("true");_a.set_loadkeymode("keep");_a.set_loadfiltermode("keep");_a.set_reversesubsum("false");_a.set_useclientlayout("true");_a._setContents("<ColumnInfo><Column id=\"compId\" type=\"STRING\" size=\"256\"/><Column id=\"colId\" type=\"STRING\" size=\"256\"/><Column id=\"msgId\" type=\"STRING\" size=\"256\"/><Column id=\"PK\" type=\"STRING\" size=\"256\"/><Column id=\"notNull\" type=\"STRING\" size=\"256\"/><Column id=\"nlength\" type=\"STRING\" size=\"256\"/><Column id=\"lengthChkGb\" type=\"STRING\" size=\"256\"/><Column id=\"type\" type=\"STRING\" size=\"256\"/><Column id=\"from\" type=\"STRING\" size=\"256\"/><Column id=\"to\" type=\"STRING\" size=\"256\"/><Column id=\"expr\" type=\"STRING\" size=\"256\"/><Column id=\"func\" type=\"STRING\" size=\"256\"/></ColumnInfo><Rows><Row><Col id=\"colId\">ORGCHT_NM</Col><Col id=\"msgId\">조직도명</Col><Col id=\"lengthChkGb\">LE</Col><Col id=\"nlength\">25</Col><Col id=\"compId\">ds_orgcht</Col><Col id=\"notNull\">Y</Col></Row><Row><Col id=\"compId\">ds_orgcht_dept</Col><Col id=\"colId\">DEPT_CODE</Col><Col id=\"msgId\">부서코드</Col><Col id=\"PK\">Y</Col><Col id=\"notNull\">Y</Col><Col id=\"nlength\">6</Col><Col id=\"lengthChkGb\">LE</Col></Row></Rows>");this.addChild(_a.name,_a);_a=new Div("div_SEARCH","absolute","0","0",null,"33","28",null,this);_a.set_taborder("29");_a.set_cssclass("div_WFSA_Box");this.addChild(_a.name,_a);_a=new Static("sta_ORG_CDNM","absolute","11","5","100","20",null,null,this.div_SEARCH);_a.set_taborder("2");_a.set_text("조직도코드(명)");_a.set_cssclass("sta_WFSA_Label");this.div_SEARCH.addChild(_a.name,_a);_a=new Edit("edt_ORGCHT_CNM","absolute","111","5","206","20",null,null,this.div_SEARCH);_a.set_taborder("1");_a.set_imemode("hangul");_a.set_autoselect("true");this.div_SEARCH.addChild(_a.name,_a);_a=new Static("Static08","absolute","0","33",null,"10","28",null,this);_a.set_taborder("45");_a.set_text("10");_a.set_visible("false");_a.style.set_background("#dc143c3c");_a.style.set_align("center middle");this.addChild(_a.name,_a);_a=new Static("Static04","absolute","0","43",null,"21","845",null,this);_a.set_taborder("46");_a.set_text("조직도 목록");_a.set_cssclass("sta_WF_Title02");this.addChild(_a.name,_a);_a=new Static("Static00","absolute","0","62",null,"5","28",null,this);_a.set_taborder("47");_a.set_text("5");_a.set_visible("false");_a.style.set_background("#dc143c3c");_a.style.set_align("center middle");this.addChild(_a.name,_a);_a=new Grid("grd_orgcht_dept","absolute",null,"67","438",null,"28","0",this);_a.set_taborder("65");_a.set_binddataset("ds_orgcht_dept");_a.set_autoenter("select");_a.set_treeusecheckbox("false");_a.set_treeinitstatus("expand,all");_a.set_treeuseexpandkey("true");_a.set_autofittype("col");_a.set_treeuseimage("false");_a._setContents("<Formats><Format id=\"default\"><Columns><Column size=\"30\" band=\"left\"/><Column size=\"247\"/><Column size=\"40\" band=\"right\"/><Column size=\"40\" band=\"right\"/></Columns><Rows><Row size=\"24\" band=\"head\"/><Row size=\"24\"/></Rows><Band id=\"head\"><Cell text=\"No\"/><Cell col=\"1\" text=\"부서코드\"/><Cell col=\"2\" text=\"사용\"/><Cell col=\"3\" text=\"정렬\"/></Band><Band id=\"body\" style=\"selectfont: ;\"><Cell style=\"selectfont:9 Gulim bold;\" text=\"expr:currow+1\"/><Cell col=\"1\" displaytype=\"tree\" edittype=\"tree\" style=\"background:EXPR(comp.parent.fn_rowColor(currow));background2:EXPR(comp.parent.fn_rowColor(currow));font:EXPR(DEPT_LEVEL == '1' ? '9 Gulim bold' : '9 Gulim');selectbackground:EXPR(comp.parent.fn_rowColor(currow));selectfont:9 Gulim bold;\" text=\"bind:DEPT_CNM\" expandshow=\"show\" treelevel=\"bind:DEPT_LEVEL\"/><Cell col=\"2\" displaytype=\"checkbox\" edittype=\"checkbox\" style=\"background:EXPR(comp.parent.fn_rowColor(currow));background2:EXPR(comp.parent.fn_rowColor(currow));selectbackground:EXPR(comp.parent.fn_rowColor(currow));\" text=\"bind:USE_AT\"/><Cell col=\"3\" displaytype=\"number\" edittype=\"masknumber\" style=\"align: ;\" text=\"bind:SORT_ORDR\" mask=\"###\" editdisplay=\"display\" editlimitbymask=\"both\"/></Band></Format></Formats>");this.addChild(_a.name,_a);_a=new Grid("grd_orgcht","absolute","0","67",null,null,"476","0",this);_a.set_taborder("66");_a.set_binddataset("ds_orgcht");_a.set_autoenter("select");_a.set_treeusecheckbox("false");_a.set_treeinitstatus("expand,null");_a.set_treeuseexpandkey("true");_a.set_autoupdatetype("itemselect");_a._setContents("<Formats><Format id=\"default\"><Columns><Column size=\"42\"/><Column size=\"90\"/><Column size=\"200\"/><Column size=\"69\"/><Column size=\"110\"/><Column size=\"300\"/><Column size=\"115\"/></Columns><Rows><Row size=\"24\" band=\"head\"/><Row size=\"24\"/></Rows><Band id=\"head\"><Cell text=\"순번\"/><Cell col=\"1\" cssclass=\"Cellgrd_WF_HeadEssential\" text=\"등록일\"/><Cell col=\"2\" cssclass=\"Cellgrd_WF_HeadEssential\" text=\"조직도명\"/><Cell col=\"3\" text=\"적용여부\" tooltiptext=\"현재 부서정보로의 적용여부\"/><Cell col=\"4\" cssclass=\"Cellgrd_WF_HeadEssential\" text=\"적용일\"/><Cell col=\"5\" text=\"비고\"/><Cell col=\"6\"/></Band><Band id=\"body\"><Cell style=\"font: ;\" expr=\"expr:currow + 1\"/><Cell col=\"1\" displaytype=\"date\" style=\"font: ;\" text=\"bind:REGIST_DT\" editautoselect=\"true\" calendardisplaynulltype=\"none\"/><Cell col=\"2\" displaytype=\"normal\" edittype=\"expr:APPLC_AT == '1' ? &quot;none&quot; : &quot;normal&quot;\" style=\"align:left middle;font: ;\" text=\"bind:ORGCHT_NM\" editdisplay=\"expr:APPLC_AT == '1' ? &quot;edit&quot; : &quot;display&quot;\"/><Cell col=\"3\" displaytype=\"checkbox\" edittype=\"checkbox\" style=\"font: ;controlborder:1 none #808080ff ;\" text=\"bind:APPLC_AT\" editautoselect=\"true\"/><Cell col=\"4\" displaytype=\"date\" edittype=\"expr:APPLC_AT == '1' ? &quot;date&quot; : &quot;none&quot;\" style=\"font: ;\" text=\"bind:APPLC_DE\" calendardisplay=\"expr:APPLC_AT == '1' ? &quot;display&quot; : &quot;edit&quot;\" calendardisplaynulltype=\"none\"/><Cell col=\"5\" displaytype=\"normal\" edittype=\"expr:APPLC_AT == '1' ? &quot;none&quot; : &quot;normal&quot;\" style=\"align:left middle;font: ;\" text=\"bind:RM\" editdisplay=\"expr:APPLC_AT == '1' ? &quot;edit&quot; : &quot;display&quot;\"/><Cell col=\"6\" displaytype=\"button\" text=\"조직도 가져오기\"/></Band></Format></Formats>");this.addChild(_a.name,_a);_a=new Static("Static07","absolute","1031","0","15","735",null,null,this);_a.set_taborder("67");_a.set_text("15");_a.set_visible("false");_a.style.set_background("#1b3cd23c");_a.style.set_align("center middle");this.addChild(_a.name,_a);_a=new Static("Static09","absolute",null,"0","13","735","0",null,this);_a.set_taborder("68");_a.set_text("스\r\n크\r\n롤\r\n13");_a.set_visible("false");_a.style.set_background("#d07b173c");_a.style.set_align("center middle");this.addChild(_a.name,_a);_a=new Static("Static42","absolute","583","33","10",null,null,"0",this);_a.set_taborder("69");_a.set_text("10");_a.set_visible("false");_a.style.set_background("#1b3cd23c");_a.style.set_align("center middle");this.addChild(_a.name,_a);_a=new Button("btn_Add","absolute",null,"43","87","19","214",null,this);_a.set_taborder("70");_a.set_text("최상위레벨");_a.set_cssclass("btn_WF_Gridadd");this.addChild(_a.name,_a);_a=new Button("btn_Delete","absolute",null,"43","52","19","82",null,this);_a.set_taborder("71");_a.set_text("삭제");_a.set_cssclass("btn_WF_Griddel");_a.set_visible("true");this.addChild(_a.name,_a);_a=new Button("btn_Cancel","absolute",null,"43","52","19","28",null,this);_a.set_taborder("72");_a.set_text("취소");_a.set_cssclass("btn_WF_Gridcnl");_a.set_visible("true");this.addChild(_a.name,_a);_a=new Button("btn_Insert","absolute",null,"43","76","19","136",null,this);_a.set_taborder("73");_a.set_text("하위레벨");_a.set_cssclass("btn_WF_Gridadd");this.addChild(_a.name,_a);_a=new Button("btn_fld","absolute",null,"43","54","19","351",null,this);_a.set_taborder("74");_a.set_text("펼치기");_a.style.set_border("1 solid #b5b5b5ff");_a.style.set_color("#444444ff");_a.style.set_bordertype("round 2 2");_a.style.set_font("-11 Dotum");_a.style.set_gradation("linear 0,0 #ffffffff 0,100 #e9e9e9ff");this.addChild(_a.name,_a);_a=new Button("btn_unfld","absolute",null,"43","46","19","303",null,this);_a.set_taborder("75");_a.set_text("접기");_a.style.set_border("1 solid #b5b5b5ff");_a.style.set_color("#444444ff");_a.style.set_bordertype("round 2 2");_a.style.set_font("-11 Dotum");_a.style.set_gradation("linear 0,0 #ffffffff 0,100 #e9e9e9ff");this.addChild(_a.name,_a);_a=new Layout("default","",1031,33,this.div_SEARCH,function(_b){_b.set_taborder("29");_b.set_cssclass("div_WFSA_Box");});this.div_SEARCH.addLayout(_a.name,_a);_a=new Layout("default","",1059,735,this,function(_b){_b.set_classname("");_b.getSetter("inheritanceid").set("");_b.set_titletext("조직도등록");});this.addLayout(_a.name,_a);_a=new BindItem("item7","Search00.D_EOPCHE_EDIT","value","TBITM_MNTNC_MENDNG_ENTRPS","ENTRPS_NM");this.addChild(_a.name,_a);_a.bind();_a=new BindItem("item8","Search00.D_DAEPYOJA_EDIT","value","TBITM_MNTNC_MENDNG_ENTRPS","REPRSNT_MAN");this.addChild(_a.name,_a);_a.bind();_a=new BindItem("item9","Search00.D_POST_EDIT","value","TBITM_MNTNC_MENDNG_ENTRPS","POST_NO");this.addChild(_a.name,_a);_a.bind();_a=new BindItem("item10","Search00.D_JUSO_EDIT1","value","TBITM_MNTNC_MENDNG_ENTRPS","ADRES");this.addChild(_a.name,_a);_a.bind();_a=new BindItem("item11","Search00.D_JUSO_EDIT2","value","TBITM_MNTNC_MENDNG_ENTRPS","DETAIL_ADRES");this.addChild(_a.name,_a);_a.bind();_a=new BindItem("item12","Search00.D_TEL_EDIT","value","TBITM_MNTNC_MENDNG_ENTRPS","CTTPC");this.addChild(_a.name,_a);_a.bind();_a=new BindItem("item13","Search00.D_FAX_EDIT","value","TBITM_MNTNC_MENDNG_ENTRPS","FAX_NO");this.addChild(_a.name,_a);_a.bind();_a=new BindItem("item14","Search00.D_SAYONG_RADIO","value","TBITM_MNTNC_MENDNG_ENTRPS","USE_ENNC");this.addChild(_a.name,_a);_a.bind();_a=new BindItem("item15","Search00.D_BIGO_EDIT","value","TBITM_MNTNC_MENDNG_ENTRPS","RM");this.addChild(_a.name,_a);_a.bind();_a=new BindItem("item0","Tab00.tabpage1.D_NAME_EDIT","value","TBITM_ENTRPS_EMP","ENTRPS_EMP_NM");this.addChild(_a.name,_a);_a.bind();_a=new BindItem("item1","Tab00.tabpage1.D_JIKWI_EDIT","value","TBITM_ENTRPS_EMP","OFCPS");this.addChild(_a.name,_a);_a.bind();_a=new BindItem("item2","Tab00.tabpage1.D_DAMDANG_EDIT","value","TBITM_ENTRPS_EMP","CHRG_JOB");this.addChild(_a.name,_a);_a.bind();_a=new BindItem("item3","Tab00.tabpage1.D_JIWON_COMBO","value","TBITM_ENTRPS_EMP","SPORT_STLE");this.addChild(_a.name,_a);_a.bind();_a=new BindItem("item4","Tab00.tabpage1.D_TEL_EDIT","value","TBITM_ENTRPS_EMP","CTTPC");this.addChild(_a.name,_a);_a.bind();_a=new BindItem("item5","Tab00.tabpage1.D_EMAIL_EDIT","value","TBITM_ENTRPS_EMP","EMAIL");this.addChild(_a.name,_a);_a.bind();_a=new BindItem("item6","div_DETAIL00.edt_ENTRPS_NM","value","DS_TBITM_MNTNC_MENDNG_ENTRPS","ENTRPS_NM");this.addChild(_a.name,_a);_a.bind();_a=new BindItem("item16","div_DETAIL00.edt_REPRSNT_MAN","value","DS_TBITM_MNTNC_MENDNG_ENTRPS","REPRSNT_MAN");this.addChild(_a.name,_a);_a.bind();_a=new BindItem("item17","div_DETAIL00.mae_POST_NO","value","DS_TBITM_MNTNC_MENDNG_ENTRPS","POST_NO");this.addChild(_a.name,_a);_a.bind();_a=new BindItem("item18","div_DETAIL00.edt_ADRES","value","DS_TBITM_MNTNC_MENDNG_ENTRPS","ADRES");this.addChild(_a.name,_a);_a.bind();_a=new BindItem("item19","div_DETAIL00.edt_DETAIL_ADRES","value","DS_TBITM_MNTNC_MENDNG_ENTRPS","DETAIL_ADRES");this.addChild(_a.name,_a);_a.bind();_a=new BindItem("item20","div_DETAIL00.edt_CTTPC","value","DS_TBITM_MNTNC_MENDNG_ENTRPS","CTTPC");this.addChild(_a.name,_a);_a.bind();_a=new BindItem("item21","div_DETAIL00.edt_FAX_NO","value","DS_TBITM_MNTNC_MENDNG_ENTRPS","FAX_NO");this.addChild(_a.name,_a);_a.bind();_a=new BindItem("item22","div_DETAIL00.edt_USE_ENNC","value","DS_TBITM_MNTNC_MENDNG_ENTRPS","USE_ENNC");this.addChild(_a.name,_a);_a.bind();_a=new BindItem("item23","div_DETAIL00.txt_RM","value","DS_TBITM_MNTNC_MENDNG_ENTRPS","RM");this.addChild(_a.name,_a);_a.bind();_a=new BindItem("item30","div_SEARCH.edt_ORGCHT_CNM","value","ds_cond","ORGCHT_CNM");this.addChild(_a.name,_a);_a.bind();_a=null;};this.addIncludeScript("HRM010201.xfdl","lib::comInclude.xjs");this.addIncludeScript("HRM010201.xfdl","mis_lib::misUtil.xjs");this.registerScript("HRM010201.xfdl",function(){this.nRowPos=0;this.HRM010201_oninit=function(_a,_b){};this.HRM010201_onload=function(_a,_b){this.fn_init_form();this.fn_init_dataset();};this.fn_init_form=function(){this.gfn_initForm(this);this.fn_misFormInit(this);this.ds_cond.clearData();this.ds_cond.addRow();this.fn_search();};this.fn_init_dataset=function(){};this.fn_search=function(){this.ds_orgcht.set_enableevent(false);this.ds_orgcht.clearData();this.ds_orgcht.set_enableevent(true);this.ds_orgcht_dept.clearData();this.fn_transaction("selectOrgcht");};this.fn_search_dtl=function(){var _a=this.ds_orgcht.rowposition;var _b=this.ds_orgcht.getColumn(_a,"ORGCHT_CODE");this.ds_cond_sub.clearData();var _c=this.ds_cond_sub.addRow();this.ds_cond_sub.setColumn(_c,"ORGCHT_CODE",_b);this.ds_orgcht_dept.clearData();this.fn_transaction("selectOrgchtDept");};this.fn_save=function(){if(Ex.util.isUpdated(this.ds_orgcht)||Ex.util.isUpdated(this.ds_orgcht_dept)){if(!this.gfn_checkValidation_NoUpdChk(this.ds_orgcht,this.ds_validation)){return false;}if(!this.gfn_checkValidation_NoUpdChk(this.ds_orgcht_dept,this.ds_validation)){return false;}for(var _e=0;_e<this.ds_orgcht.getRowCount();_e++ ){var _a=this.ds_orgcht.getRowType(_e);if(_a!=Dataset.ROWTYPE_NORMAL){var _b=this.ds_orgcht.getColumn(_e,"APPLC_AT");var _c=this.ds_orgcht.getColumn(_e,"APPLC_DE");if(_b=='1'){if(this.comUtils.isNull(_c)){var _d="적용일자가 체크되었음에도, 적용일이 입력되지 않은 건이 존재합니다."+"\n";_d+="(위치 : "+(_e+1)+"행";alert(_d);return false;}}}}if(this.gfn_message("confirm.저장.여부")){this.nRowPos=this.ds_orgcht.rowposition;this.fn_transaction("saveOrgcht");}}};this.fn_transaction=function(_a){switch(_a){case "selectOrgcht":var _b="hsco/mis/hrm/HRM010201/selectOrgcht.do";var _c="input1=ds_cond";var _d="ds_orgcht=output1";break;case "selectOrgchtDept":var _b="hsco/mis/hrm/HRM010201/selectOrgchtDept.do";var _c="input1=ds_cond_sub";var _d="ds_orgcht_dept=output1";break;case "saveOrgcht":var _b="hsco/mis/hrm/HRM010201/saveOrgcht.do";var _c="input1=ds_orgcht:U input2=ds_orgcht_dept:U";var _d="";break;case "saveOrgchtDept":var _b="hsco/mis/hrm/HRM010201/saveOrgchtDept.do";var _c="input1=ds_cond_sub";var _d="ds_orgcht_dept=output1";break;}Ex.core.tran(this,_a,_b,_c,_d);};this.fn_callBack=function(_a,_b,_c){if(_b!='0'){this.gfn_callback_message(_a,_b,_c);}else{switch(_a){case "selectOrgcht":if(this.ds_orgcht.rowcount>0){this.ds_orgcht.set_rowposition(this.nRowPos);this.nRowPos=0;}this.fn_search_dtl();break;case "selectOrgchtDept":break;case "saveOrgcht":this.fn_search();break;case "saveOrgchtDept":break;}}};this.fn_insert=function(){this.ds_orgcht.set_rowposition( -1);this.ds_orgcht.insertRow(0);};this.fn_delete=function(){var _a=this.ds_orgcht.rowposition;var _b=this.ds_orgcht.getColumn(_a,"APPLC_AT");if(_b=='1'){this.gfn_message("info.처리불가","적용 완료된 조직도는 삭제할 수 없습니다.");return false;}this.ds_orgcht.deleteRow(_a);};this.fn_cancel=function(){if(Ex.util.isUpdated(this.ds_orgcht)){if(!this.gfn_message("confirm.변경.취소.여부")){return false;}}this.ds_orgcht.reset();this.ds_orgcht.applyChange();this.fn_search_dtl();};this.grd_orgcht_oncellclick=function(_a,_b){if(_b.col==6){var _c=this.ds_orgcht.rowposition;var _d=this.ds_orgcht.getRowType(_c);if(_d==Dataset.ROWTYPE_INSERT){alert("조직도 데이터를 우선 저장하신 후 진행하여 주시기 바랍니다");return false;}if(!application.confirm("조직도 정보를 불러오시겠습니까?\n(현재 조직도 정보는 삭제되며, 자동 저장됩니다.)")){return false;}var _e={arg_0:this};this.gfn_popup("HRM010201_P01",600,400,"조직도선택",_e,"mis_hrm::HRM010201_P1.xfdl","fn_popupCallBack",true);}};this.grd_orgcht_dept_onexpandup=function(_a,_b){var _c={arg_0:this};this.gfn_popup("HRM010101_P01",400,400,"부서선택",_c,"mis_hrm::HRM010101_P1.xfdl","fn_popupCallBack",true);};this.fn_popupCallBack=function(_a,_b){if(_a=="HRM010101_P01"){var _c=new Dataset();var _d=_c.loadXML(_b);if(_d){var _e=this.ds_orgcht_dept.rowposition;var _f=_c.getColumn(0,"DEPT_CODE");var _g=_c.getColumn(0,"DEPT_NM");var _h=this.ds_orgcht_dept.getRowType(this.ds_orgcht_dept.rowposition);var _i=this.ds_orgcht_dept.findRow("DEPT_CODE",_f);if(_i> -1&&_h==Dataset.ROWTYPE_INSERT){this.gfn_message("info.항목.중복","부서코드("+_f+")");return false;}this.ds_orgcht_dept.setColumn(_e,"DEPT_CODE",_f);this.ds_orgcht_dept.setColumn(_e,"DEPT_NM",_g);this.ds_orgcht_dept.setColumn(_e,"DEPT_CNM","["+_f+"] "+_g);}}if(_a=="HRM010201_P01"){var _j=new Dataset();var _d=_j.loadXML(_b);if(_d){var _k=this.ds_orgcht.rowposition;var _l=this.ds_orgcht.getColumn(_k,"ORGCHT_CODE");var _m=_j.getColumn(0,"ORGCHT_CODE");this.ds_cond_sub.clearData();var _n=this.ds_cond_sub.addRow();this.ds_cond_sub.setColumn(_n,"ORGCHT_CODE",_l);this.ds_cond_sub.setColumn(_n,"TRGET_ORGCHT_CODE",_m);this.ds_orgcht_dept.clearData();this.fn_transaction("saveOrgchtDept");}}};this.ds_orgcht_canrowposchange=function(_a,_b){if(Ex.util.isUpdated(this.ds_orgcht_dept)){if(!this.gfn_message("confirm.변경.취소.여부")){return false;}}};this.ds_orgcht_onrowposchanged=function(_a,_b){if(_b.newrow> -1){this.fn_search_dtl();}};this.ds_orgcht_cancolumnchange=function(_a,_b){if(_b.columnid=="APPLC_DE"){var _c=_b.newvalue;var _d=_a.findRow(_b.columnid,_b.newvalue);if(_d> -1){alert("해당 적용일은 이미 조직도 목록에 존재합니다. 다른 적용일을 선택하여 주시기 바랍니다.");return false;}}};this.ds_orgcht_oncolumnchanged=function(_a,_b){if(_b.columnid=="APPLC_AT"){if(_b.newvalue=='1'){var _c=this.comUtils.getClientDate("YYYYMMDD");_a.setColumn(_b.row,"APPLC_DE",_c);}else if(_b.newvalue='0'){_a.setColumn(_b.row,"APPLC_DE","");}}};this.btn_Insert_onclick=function(_a,_b){if(this.ds_orgcht.getRowCount()==0){return false;}var _c=this.ds_orgcht.rowposition;var _d=this.ds_orgcht.getColumn(_c,"ORGCHT_CODE");var _e=this.ds_orgcht_dept.rowposition;var _f=this.ds_orgcht_dept.getColumn(_e,"DEPT_CODE");var _g=this.ds_orgcht_dept.getColumn(_e,"DEPT_NM");var _h=this.ds_orgcht_dept.getColumn(_e,"DEPT_LEVEL")+1;if(this.ds_orgcht_dept.getRowCount()==0){_h=1;}if(this.comUtils.isNull(_f)){alert("상위트리에 대한 정보가 존재하지 않습니다. 상위트리정보를 입력하신 후 진행하여 주시기 바랍니다.");return false;}this.ds_orgcht_dept.set_enableevent(false);var _i=_e+1;if(this.ds_orgcht_dept.findRow("UPPER_DEPT_CODE",_f)> -1){for(var _n=this.ds_orgcht_dept.getRowCount()-1;_n>=0;_n-- ){trace("fRow : "+_n+"    "+this.ds_orgcht_dept.getColumn(_n,"DEPT_CNM"));var _j=this.ds_orgcht_dept.getColumn(_n,"UPPER_DEPT_CODE");if(_j==_f){for(var _o=_n+1;_o<this.ds_orgcht_dept.getRowCount();_o++ ){trace("dRow : "+_o+"    "+this.ds_orgcht_dept.getColumn(_o,"DEPT_CNM"));var _k=this.ds_orgcht_dept.getColumn(_o,"DEPT_LEVEL");if(_k<=_h||_k==null){_i=_o;break;}else if(_o==this.ds_orgcht_dept.getRowCount()-1){_i=_o+1;break;}}break;}}}var _l=this.ds_orgcht_dept.insertRow(_i);this.ds_orgcht_dept.set_enableevent(true);this.ds_orgcht_dept.setColumn(_l,"ORGCHT_CODE",_d);this.ds_orgcht_dept.setColumn(_l,"DEPT_LEVEL",_h);this.ds_orgcht_dept.setColumn(_l,"UPPER_DEPT_CODE",_f);this.ds_orgcht_dept.setColumn(_l,"UPPER_DEPT_NM",_g);this.ds_orgcht_dept.set_rowposition(_l);var _m=this.ds_orgcht_dept.getCaseMax("UPPER_DEPT_CODE == '"+_f+"'","SORT_ORDR");if(_m){this.ds_orgcht_dept.setColumn(_l,"SORT_ORDR",nexacro.toNumber(_m)+1);}};this.btn_Add_onclick=function(_a,_b){if(this.ds_orgcht.getRowCount()==0){return false;}var _c=this.ds_orgcht.rowposition;var _d=this.ds_orgcht.getColumn(_c,"ORGCHT_CODE");var _e=this.ds_orgcht_dept.rowposition;var _f=this.ds_orgcht_dept.getColumn(_e,"DEPT_CODE");var _g=this.ds_orgcht_dept.getColumn(_e,"DEPT_NM");var _h=this.ds_orgcht_dept.getColumn(_e,"DEPT_LEVEL")+1;if(this.ds_orgcht_dept.getRowCount()==0){_h=1;}var _i=this.ds_orgcht_dept.addRow();this.ds_orgcht_dept.setColumn(_i,"ORGCHT_CODE",_d);this.ds_orgcht_dept.setColumn(_i,"USE_AT",'1');var _j=this.ds_orgcht_dept.getCaseMax("UPPER_DEPT_CODE == null","SORT_ORDR");if(_j){this.ds_orgcht_dept.setColumn(_i,"SORT_ORDR",nexacro.toNumber(_j)+1);}};this.btn_Delete_onclick=function(_a,_b){if(this.ds_orgcht_dept.getRowCount()==0){return false;}var _c=this.ds_orgcht_dept.rowposition;var _d=this.ds_orgcht_dept.getColumn(_c,"DEPT_CODE");var _e=this.ds_orgcht_dept.findRow("UPPER_DEPT_CODE",_d);if(_e> -1){alert("삭제되지 않은 하위트리가 존재합니다.");return false;}for(var _g=0;_g<this.ds_orgcht_dept.getDeletedRowCount();_g++ ){var _f=this.ds_orgcht_dept.getDeletedColumn(_g,"UPPER_DEPT_CODE");if(_f==_d){alert("하위 트리의 데이터를 삭제 후 저장하셔야 상위트리를 삭제하실 수 있습니다.");return false;}}this.ds_orgcht_dept.deleteRow(_c);};this.btn_Cancel_onclick=function(_a,_b){if(Ex.util.isUpdated(this.ds_orgcht_dept)){if(!this.gfn_message("confirm.변경.취소.여부")){return false;}}this.ds_orgcht_dept.reset();};this.fn_rowColor=function(_a){var _b="#ffffffff";var _c=this.ds_orgcht_dept.getColumn(_a,"DEPT_LEVEL");switch(_c){case 1:_b="lightblue";break;case 2:_b="lightcyan";break;case 3:_b="lightyellow";break;case 4:_b="lightgreen";break;case 5:_b="lightpink";break;}return _b;};this.btn_fld_onclick=function(_a,_b){this.grd_orgcht_dept.set_treeinitstatus("expand,all");};this.btn_unfld_onclick=function(_a,_b){this.grd_orgcht_dept.set_treeinitstatus("collapse,null");};});this.on_initEvent=function(){this.ds_orgcht.addEventHandler("onrowposchanged",this.ds_orgcht_onrowposchanged,this);this.ds_orgcht.addEventHandler("canrowposchange",this.ds_orgcht_canrowposchange,this);this.ds_orgcht.addEventHandler("oncolumnchanged",this.ds_orgcht_oncolumnchanged,this);this.ds_orgcht.addEventHandler("cancolumnchange",this.ds_orgcht_cancolumnchange,this);this.addEventHandler("onload",this.HRM010201_onload,this);this.addEventHandler("oninit",this.HRM010201_oninit,this);this.grd_orgcht_dept.addEventHandler("onexpandup",this.grd_orgcht_dept_onexpandup,this);this.grd_orgcht.addEventHandler("oncellclick",this.grd_orgcht_oncellclick,this);this.btn_Add.addEventHandler("onclick",this.btn_Add_onclick,this);this.btn_Delete.addEventHandler("onclick",this.btn_Delete_onclick,this);this.btn_Cancel.addEventHandler("onclick",this.btn_Cancel_onclick,this);this.btn_Insert.addEventHandler("onclick",this.btn_Insert_onclick,this);this.btn_fld.addEventHandler("onclick",this.btn_fld_onclick,this);this.btn_unfld.addEventHandler("onclick",this.btn_unfld_onclick,this);};this.loadIncludeScript("HRM010201.xfdl");};})();