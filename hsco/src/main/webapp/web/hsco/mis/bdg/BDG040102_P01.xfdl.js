(function(){return function(){if(!this._is_form){return;}this.on_create=function(){var _a=null;if(Form==this.constructor){this.set_name("BDG040102_P01");this.set_classname("BDG040102_P01");this.set_titletext("파일첨부");this._setFormPosition(0,0,600,400);}_a=new Dataset("ds_fileList",this);_a.set_firefirstcount("0");_a.getSetter("firenextcount").set("0");_a.set_useclientlayout("true");_a.set_updatecontrol("true");_a.set_enableevent("true");_a.set_loadkeymode("keep");_a.set_loadfiltermode("keep");_a.set_reversesubsum("false");_a._setContents("<ColumnInfo><Column id=\"CHK\" type=\"STRING\" size=\"256\"/><Column id=\"PROGRS\" type=\"BIGDECIMAL\" size=\"16\"/><Column id=\"ORGINL_FILE_NM\" type=\"string\" size=\"32\"/><Column id=\"FILE_EXTSN\" type=\"string\" size=\"32\"/><Column id=\"FILE_STRE_COURS\" type=\"string\" size=\"32\"/><Column id=\"FILE_ID\" type=\"string\" size=\"32\"/><Column id=\"SN\" type=\"bigdecimal\" size=\"16\"/><Column id=\"SYS_SE_CODE\" type=\"string\" size=\"32\"/><Column id=\"FILE_IMAGE\" type=\"string\" size=\"32\"/><Column id=\"FILE_TY\" type=\"string\" size=\"32\"/><Column id=\"JOB_SE\" type=\"string\" size=\"32\"/><Column id=\"DELETE_IMAGE\" type=\"string\" size=\"32\"/><Column id=\"STRE_FILE_NM\" type=\"string\" size=\"32\"/><Column id=\"FILE_MG\" type=\"bigdecimal\" size=\"16\"/><Column id=\"FILE_CN\" type=\"string\" size=\"32\"/><Column id=\"FILE_ORDR\" type=\"bigdecimal\" size=\"16\"/><Column id=\"TRNSMIS_FILE_SIZE\" type=\"string\" size=\"32\"/><Column id=\"USE_AT\" type=\"string\" size=\"32\"/><Column id=\"STTUS\" type=\"string\" size=\"32\"/><Column id=\"FILE_SN\" type=\"bigdecimal\" size=\"16\"/></ColumnInfo>");this.addChild(_a.name,_a);_a=new Dataset("ds_cond00",this);_a.set_firefirstcount("0");_a.getSetter("firenextcount").set("0");_a.set_useclientlayout("true");_a.set_updatecontrol("true");_a.set_enableevent("true");_a.set_loadkeymode("keep");_a.set_loadfiltermode("keep");_a.set_reversesubsum("false");_a._setContents("<ColumnInfo><Column id=\"FILE_SN\" type=\"STRING\" size=\"256\"/><Column id=\"FILE_VALUE_0\" type=\"STRING\" size=\"256\"/></ColumnInfo>");this.addChild(_a.name,_a);_a=new Dataset("ds_operIncme",this);_a.set_firefirstcount("0");_a.getSetter("firenextcount").set("0");_a.set_useclientlayout("true");_a.set_updatecontrol("true");_a.set_enableevent("true");_a.set_loadkeymode("keep");_a.set_loadfiltermode("keep");_a.set_reversesubsum("false");_a._setContents("<ColumnInfo><Column id=\"CHK_ORG\" type=\"STRING\" size=\"1\"/><Column id=\"CHK\" type=\"STRING\" size=\"1\"/><Column id=\"YEAR\" type=\"STRING\" size=\"4\"/><Column id=\"BSNS_SE\" type=\"STRING\" size=\"1\"/><Column id=\"BALC_SE\" type=\"STRING\" size=\"1\"/><Column id=\"DETAIL_BSNS_CODE\" type=\"STRING\" size=\"6\"/><Column id=\"DEPT_CODE\" type=\"STRING\" size=\"6\"/><Column id=\"DEPT_NM\" type=\"STRING\" size=\"100\"/><Column id=\"BUDGET_ACNT_CODE\" type=\"STRING\" size=\"8\"/><Column id=\"BUDGET_ACNT_NM\" type=\"STRING\" size=\"100\"/><Column id=\"EXPNDTR_UNIT_CODE\" type=\"STRING\" size=\"8\"/><Column id=\"EXPNDTR_UNIT_NM\" type=\"STRING\" size=\"200\"/><Column id=\"INCME_DT\" type=\"STRING\" size=\"8\"/><Column id=\"SE_ACCNUT_ACNT_CODE\" type=\"STRING\" size=\"8\"/><Column id=\"ATMC_JRNLZ_TY_CODE\" type=\"STRING\" size=\"11\"/><Column id=\"LVDC_AM\" type=\"BIGDECIMAL\" size=\"22\"/><Column id=\"ACCMLT_LVDC_AM\" type=\"BIGDECIMAL\" size=\"22\"/><Column id=\"INCME_AM\" type=\"BIGDECIMAL\" size=\"22\"/><Column id=\"ACCMLT_INCME_AM\" type=\"BIGDECIMAL\" size=\"22\"/><Column id=\"PSTYR_ATMPT_AM\" type=\"BIGDECIMAL\" size=\"22\"/><Column id=\"LEV_CHIT_NO\" type=\"BIGDECIMAL\" size=\"22\"/><Column id=\"INCME_CHIT_NO\" type=\"BIGDECIMAL\" size=\"22\"/><Column id=\"SUMRY\" type=\"STRING\" size=\"200\"/><Column id=\"LAST_SANCTNSTS_IMG\" type=\"STRING\" size=\"256\"/><Column id=\"LAST_SANCTN_STTUS\" type=\"STRING\" size=\"256\"/><Column id=\"JOB_KEY\" type=\"STRING\" size=\"256\"/><Column id=\"REGIST_DT\" type=\"STRING\" size=\"8\"/><Column id=\"DECME_AM\" type=\"BIGDECIMAL\" size=\"256\"/><Column id=\"DECME_CHIT_NO\" type=\"BIGDECIMAL\" size=\"256\"/><Column id=\"ACCMLT_DECME_AM\" type=\"BIGDECIMAL\" size=\"256\"/><Column id=\"FILE_SN\" type=\"STRING\" size=\"256\"/><Column id=\"FILE_VALUE_0\" type=\"STRING\" size=\"256\"/></ColumnInfo>");this.addChild(_a.name,_a);_a=new Dataset("ds_fileList00",this);_a.set_firefirstcount("0");_a.getSetter("firenextcount").set("0");_a.set_useclientlayout("true");_a.set_updatecontrol("true");_a.set_enableevent("true");_a.set_loadkeymode("keep");_a.set_loadfiltermode("keep");_a.set_reversesubsum("false");_a._setContents("<ColumnInfo><Column id=\"CHK\" type=\"STRING\" size=\"256\"/><Column id=\"PROGRS\" type=\"BIGDECIMAL\" size=\"16\"/><Column id=\"ORGINL_FILE_NM\" type=\"string\" size=\"32\"/><Column id=\"FILE_EXTSN\" type=\"string\" size=\"32\"/><Column id=\"FILE_STRE_COURS\" type=\"string\" size=\"32\"/><Column id=\"FILE_ID\" type=\"string\" size=\"32\"/><Column id=\"SN\" type=\"bigdecimal\" size=\"16\"/><Column id=\"SYS_SE_CODE\" type=\"string\" size=\"32\"/><Column id=\"FILE_IMAGE\" type=\"string\" size=\"32\"/><Column id=\"FILE_TY\" type=\"string\" size=\"32\"/><Column id=\"JOB_SE\" type=\"string\" size=\"32\"/><Column id=\"DELETE_IMAGE\" type=\"string\" size=\"32\"/><Column id=\"STRE_FILE_NM\" type=\"string\" size=\"32\"/><Column id=\"FILE_MG\" type=\"bigdecimal\" size=\"16\"/><Column id=\"FILE_CN\" type=\"string\" size=\"32\"/><Column id=\"FILE_ORDR\" type=\"bigdecimal\" size=\"16\"/><Column id=\"TRNSMIS_FILE_SIZE\" type=\"string\" size=\"32\"/><Column id=\"USE_AT\" type=\"string\" size=\"32\"/><Column id=\"STTUS\" type=\"string\" size=\"32\"/><Column id=\"FILE_SN\" type=\"bigdecimal\" size=\"16\"/></ColumnInfo>");this.addChild(_a.name,_a);_a=new Grid("grd_file","absolute","15","72",null,null,"15","15",this);_a.set_taborder("0");_a.set_binddataset("ds_fileList");_a._setContents("<Formats><Format id=\"default\"><Columns><Column size=\"40\"/><Column size=\"65\"/><Column size=\"303\"/><Column size=\"80\"/><Column size=\"80\"/></Columns><Rows><Row size=\"24\" band=\"head\"/><Row size=\"40\"/></Rows><Band id=\"head\"><Cell displaytype=\"checkbox\" edittype=\"checkbox\"/><Cell col=\"1\" text=\"파일형식\"/><Cell col=\"2\" celltype=\"head\" text=\"파일명\"/><Cell col=\"3\" text=\"확장자\"/><Cell col=\"4\" text=\"사이즈\"/></Band><Band id=\"body\"><Cell displaytype=\"checkbox\" edittype=\"checkbox\" text=\"bind:CHK\"/><Cell col=\"1\" displaytype=\"image\" text=\"bind:FILE_IMAGE\" autosizerow=\"limitmin\" autosizecol=\"limitmin\"/><Cell col=\"2\" displaytype=\"normal\" style=\"align:left middle;\" text=\"bind:ORGINL_FILE_NM\"/><Cell col=\"3\" text=\"bind:FILE_EXTSN\"/><Cell col=\"4\" text=\"bind:FILE_MG\"/></Band></Format></Formats>");this.addChild(_a.name,_a);_a=new Static("sta_title","absolute","17","17","215","21",null,null,this);_a.set_taborder("1");_a.set_cssclass("sta_WF_Title01");this.addChild(_a.name,_a);_a=new Button("btn_close2","absolute",null,"15","50","25","15",null,this);_a.set_taborder("5");_a.set_text("종료");_a.set_cssclass("btn_WF_CRUD");this.addChild(_a.name,_a);_a=new Static("Static06","absolute","0","0","600","15",null,null,this);_a.set_taborder("6");_a.set_text("15");_a.set_visible("false");_a.style.set_background("#dc143c3c");_a.style.set_align("center middle");this.addChild(_a.name,_a);_a=new Static("Static05","absolute","0","0","15",null,null,"0",this);_a.set_taborder("7");_a.set_text("15");_a.set_visible("false");_a.style.set_background("#1b3cd23c");_a.style.set_align("center middle");this.addChild(_a.name,_a);_a=new Static("Static00","absolute","584","0","15",null,null,"0",this);_a.set_taborder("8");_a.set_text("15");_a.set_visible("false");_a.style.set_background("#1b3cd23c");_a.style.set_align("center middle");this.addChild(_a.name,_a);_a=new Static("Static15","absolute","-8","812","903","15",null,null,this);_a.set_taborder("9");_a.set_text("15");_a.set_visible("false");_a.style.set_background("#dc143c3c");_a.style.set_align("center middle");this.addChild(_a.name,_a);_a=new Static("Static01","absolute","0","385","600","15",null,null,this);_a.set_taborder("10");_a.set_text("15");_a.set_visible("false");_a.style.set_background("#dc143c3c");_a.style.set_align("center middle");this.addChild(_a.name,_a);_a=new Static("Static12","absolute","0","40","599","4",null,null,this);_a.set_taborder("11");_a.set_text("5");_a.set_visible("false");_a.style.set_background("#dc143c3c");_a.style.set_align("center middle");this.addChild(_a.name,_a);_a=new Button("btn_delFiles","absolute",null,"50","68","19","177",null,this);_a.set_taborder("12");_a.set_text("선택삭제");_a.set_cssclass("btn_WF_Process");_a.set_visible("true");this.addChild(_a.name,_a);_a=new Button("btn_uploadFiles","absolute",null,"50","69","19","105",null,this);_a.set_taborder("13");_a.set_text("파일업로드");_a.set_cssclass("btn_WF_Process");_a.set_visible("true");this.addChild(_a.name,_a);_a=new Button("btn_downFiles","absolute",null,"50","86","19","16",null,this);_a.set_taborder("14");_a.set_text("선택다운로드");_a.set_cssclass("btn_WF_Process");_a.set_visible("true");this.addChild(_a.name,_a);_a=new Layout("default","",600,400,this,function(_b){_b.set_classname("BDG040102_P01");_b.set_titletext("파일첨부");});this.addLayout(_a.name,_a);_a=null;};this.addIncludeScript("BDG040102_P01.xfdl","lib::comInclude.xjs");this.addIncludeScript("BDG040102_P01.xfdl","mis_lib::misUtil.xjs");this.addIncludeScript("BDG040102_P01.xfdl","lib::comInnerSanct.xjs");this.addIncludeScript("BDG040102_P01.xfdl","lib::comUpDownUtils.xjs");this.registerScript("BDG040102_P01.xfdl",function(){this.strRtnGbn="";this.File_UpDownManager=null;this.BDG040102_P01_onload=function(_a,_b){var _c={useMultiUpload:true,onChange:this.fn_onFileSelected,onSuccess:this.fn_onFileSuccess};this.File_UpDownManager=new this.fileUpDownManager(this,"MIS","BDG");this.File_UpDownManager.init(_c);this.fn_misFormInit(this);var _d=new Dataset();var _e=this.ds_operIncme.loadXML(this.getOwnerFrame().searchStr);if(!this.comUtils.isNull(this.parent.fileSnName_S)){fileSnName=this.parent.fileSnName_S;}var _f=fileSnName.split("_",1);var _g="";if(_f=="LVDC"){_g="징수결정액 파일첨부";}else if(_f=="INCME"){_g="수입액 파일첨부";}else if(_f=="DECME"){_g="감액 파일첨부";}this.sta_title.set_text(_g);this.ds_cond00.clearData();var _h=this.ds_cond00.addRow();this.ds_cond00.setColumn(_h,"FILE_SN",this.ds_operIncme.getColumn(0,"FILE_SN"));this.fn_transaction("selectAtchFile");if('S01'==this.ds_operIncme.getColumn(0,"LAST_SANCTN_STTUS")){this.btn_delFiles.set_enable(false);this.btn_uploadFiles.set_enable(false);}};this.fn_transaction=function(_a){var _b="";switch(_a){case "selectAtchFile":this.ds_cond00.setColumn(0,"FILE_VALUE_0",fileSnName);var _c="hsco/mis/bdg/BDG040102/selectAtchFile.do";var _d="input1=ds_cond00";var _e="ds_fileList=output1";break;case "updateFileValue":this.ds_cond00.setColumn(0,"FILE_SN",this.ds_operIncme.getColumn(0,"FILE_SN"));this.ds_cond00.setColumn(0,"FILE_VALUE_0",fileSnName);var _c="hsco/mis/bdg/BDG040102/updateFileValue.do";var _d="input1=ds_cond00";var _e="";break;default:break;}Ex.core.tran(this,_a,_c,_d,_e,_b);};this.fn_callBack=function(_a,_b,_c){if(_b==0){switch(_a){case "selectAtchFile":break;case "updateFileValue":this.fn_transaction("selectAtchFile");break;default:break;}}this.gfn_callback_message(_a,_b,_c);};this.fn_close=function(){this.close(this.ds_cond00.getColumn(0,"FILE_SN"));};this.btn_uploadFiles_onclick=function(_a,_b){this.fn_autoFileSn("MIS","BDG",this.File_UpDownManager,this.ds_fileList00,this.ds_operIncme,"TBBDG_OPER_INCME","FILE_SN",["BALC_SE","DETAIL_BSNS_CODE","DEPT_CODE","BUDGET_ACNT_CODE","EXPNDTR_UNIT_CODE","INCME_DT","YEAR","BSNS_SE"]);alert("처리됐습니다.");this.fn_transaction("updateFileValue");};this.btn_downFiles_onclick=function(_a,_b){var _c=this.ds_fileList.findRow("CHK","1");if(_c<0){this.gfn_message("comm.데이터.선택.없음");return;}for(var _h=0;_h<this.ds_fileList.getRowCount();_h++ ){var _d=this.ds_fileList.getColumn(_h,"FILE_SN");var _e=this.ds_fileList.getColumn(_h,"FILE_ORDR");var _f=this.ds_fileList.getColumn(_h,"ORGINL_FILE_NM");var _g=this.ds_fileList.getColumn(_h,"CHK");if(_g=='1'){this.File_UpDownManager.download(_d,_e,_f);}}};this.btn_delFiles_onclick=function(_a,_b){var _c=this.ds_fileList.findRow("CHK","1");if(_c<0){this.gfn_message("comm.데이터.선택.없음");return;}if(!this.gfn_message("confirm.선택파일.삭제여부","들")){return false;}for(var _i=this.ds_fileList.getRowCount()-1;_i>=0;_i-- ){var _d=this.ds_fileList.getColumn(_i,"CHK");if(_d=='1'){this.ds_fileList.deleteRow(_i);}}var _e="deleteFile";var _f="hsco/cmm/file/deleteFile.do";var _g="input1=ds_fileList:U";var _h="ds_fileList=output1";Ex.core.tran(this,_e,_f,_g,_h);};this.grd_file_onheadclick=function(_a,_b){if(_b.col==0){this.gfn_setGridCheckAll(_a,_b);}};});this.on_initEvent=function(){this.ds_cond00.addEventHandler("oncolumnchanged",this.ds_cond_oncolumnchanged,this);this.addEventHandler("onload",this.BDG040102_P01_onload,this);this.addEventHandler("oninit",this.BDG040102_P01_oninit,this);this.grd_file.addEventHandler("onheadclick",this.grd_file_onheadclick,this);this.sta_title.addEventHandler("onclick",this.sta_title_onclick,this);this.btn_close2.addEventHandler("onclick",this.fn_close,this);this.btn_delFiles.addEventHandler("onclick",this.btn_delFiles_onclick,this);this.btn_uploadFiles.addEventHandler("onclick",this.btn_uploadFiles_onclick,this);this.btn_downFiles.addEventHandler("onclick",this.btn_downFiles_onclick,this);};this.loadIncludeScript("BDG040102_P01.xfdl");};})();