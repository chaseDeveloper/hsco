(function(){return function(){if(!this._is_form){return;}this.on_create=function(){var _a=null;if(Form==this.constructor){this.set_name("BDG050102_P01");this.set_classname("BDG050102_P01");this.set_titletext("조기집행실적 문자전송");this._setFormPosition(0,0,680,300);}_a=new Dataset("ds_cond",this);_a.set_firefirstcount("0");_a.getSetter("firenextcount").set("0");_a.set_useclientlayout("true");_a.set_updatecontrol("true");_a.set_enableevent("true");_a.set_loadkeymode("keep");_a.set_loadfiltermode("keep");_a.set_reversesubsum("false");_a._setContents("<ColumnInfo><Column id=\"EMPNO\" type=\"STRING\" size=\"256\"/></ColumnInfo>");this.addChild(_a.name,_a);_a=new Dataset("ds_rcverList",this);_a.set_firefirstcount("0");_a.getSetter("firenextcount").set("0");_a.set_useclientlayout("true");_a.set_updatecontrol("true");_a.set_enableevent("true");_a.set_loadkeymode("keep");_a.set_loadfiltermode("keep");_a.set_reversesubsum("false");_a._setContents("<ColumnInfo><Column id=\"EMPNO\" type=\"STRING\" size=\"256\"/><Column id=\"EMPNM\" type=\"STRING\" size=\"256\"/><Column id=\"DEPT_CODE\" type=\"STRING\" size=\"256\"/><Column id=\"DEPT_NM\" type=\"STRING\" size=\"256\"/><Column id=\"HR_CLSF_SE\" type=\"STRING\" size=\"256\"/><Column id=\"HR_CLSF_NM\" type=\"STRING\" size=\"256\"/><Column id=\"TELNO\" type=\"STRING\" size=\"256\"/></ColumnInfo>");this.addChild(_a.name,_a);_a=new Dataset("ds_validation",this);_a.set_firefirstcount("0");_a.getSetter("firenextcount").set("0");_a.set_useclientlayout("true");_a.set_updatecontrol("true");_a.set_enableevent("true");_a.set_loadkeymode("keep");_a.set_loadfiltermode("keep");_a.set_reversesubsum("false");_a._setContents("<ColumnInfo><Column id=\"compId\" type=\"STRING\" size=\"256\"/><Column id=\"colId\" type=\"STRING\" size=\"256\"/><Column id=\"PK\" type=\"STRING\" size=\"256\"/><Column id=\"notNull\" type=\"STRING\" size=\"256\"/><Column id=\"type\" type=\"STRING\" size=\"256\"/><Column id=\"nlength\" type=\"STRING\" size=\"256\"/><Column id=\"from\" type=\"STRING\" size=\"256\"/><Column id=\"to\" type=\"STRING\" size=\"256\"/><Column id=\"lengthChkGb\" type=\"STRING\" size=\"256\"/><Column id=\"msgId\" type=\"STRING\" size=\"256\"/><Column id=\"expr\" type=\"STRING\" size=\"256\"/><Column id=\"func\" type=\"STRING\" size=\"256\"/></ColumnInfo><Rows><Row><Col id=\"compId\">ds_rcverList</Col><Col id=\"colId\">EMPNO</Col><Col id=\"notNull\">Y</Col><Col id=\"PK\"/><Col id=\"msgId\">사번</Col></Row><Row><Col id=\"colId\">TELNO</Col><Col id=\"notNull\">Y</Col><Col id=\"msgId\">수신번호</Col><Col id=\"compId\">ds_rcverList</Col></Row></Rows>");this.addChild(_a.name,_a);_a=new Dataset("ds_telno",this);_a.set_firefirstcount("0");_a.getSetter("firenextcount").set("0");_a.set_useclientlayout("true");_a.set_updatecontrol("true");_a.set_enableevent("true");_a.set_loadkeymode("keep");_a.set_loadfiltermode("keep");_a.set_reversesubsum("false");_a._setContents("<ColumnInfo><Column id=\"TELNO\" type=\"STRING\" size=\"256\"/></ColumnInfo>");this.addChild(_a.name,_a);_a=new Dataset("ds_sendMssage",this);_a.set_firefirstcount("0");_a.getSetter("firenextcount").set("0");_a.set_useclientlayout("true");_a.set_updatecontrol("true");_a.set_enableevent("true");_a.set_loadkeymode("keep");_a.set_loadfiltermode("keep");_a.set_reversesubsum("false");_a._setContents("<ColumnInfo><Column id=\"USER_ID\" type=\"STRING\" size=\"256\"/><Column id=\"SCHEDULE_TYPE\" type=\"STRING\" size=\"256\"/><Column id=\"SUBJECT\" type=\"STRING\" size=\"256\"/><Column id=\"CALLBACK\" type=\"STRING\" size=\"256\"/><Column id=\"DEST_COUNT\" type=\"STRING\" size=\"256\"/><Column id=\"DEST_INFO\" type=\"STRING\" size=\"256\"/><Column id=\"MSG_TYPE\" type=\"STRING\" size=\"256\"/><Column id=\"MMS_MSG\" type=\"STRING\" size=\"256\"/><Column id=\"CONTENT_COUNT\" type=\"STRING\" size=\"256\"/><Column id=\"CONTENT_DATA\" type=\"STRING\" size=\"256\"/></ColumnInfo>");this.addChild(_a.name,_a);_a=new Static("Static00","absolute","0","0","680","300",null,null,this);_a.set_taborder("5");_a.set_cssclass("sta_WF_PopupBg");this.addChild(_a.name,_a);_a=new Div("div_SearchArea","absolute","17","47",null,"33","17",null,this);_a.set_taborder("3");_a.set_cssclass("div_WFSA_Box");this.addChild(_a.name,_a);_a=new Static("Static09","absolute","0","129",null,"7","20",null,this.div_SearchArea);_a.set_taborder("2");_a.set_text("7");_a.set_visible("false");_a.style.set_background("bisque");_a.style.set_border("0 none transparent");this.div_SearchArea.addChild(_a.name,_a);_a=new Static("Static01","absolute","0","0","15",null,null,"0",this.div_SearchArea);_a.set_taborder("3");_a.set_text("15");_a.set_visible("false");_a.style.set_background("#00ffff66");this.div_SearchArea.addChild(_a.name,_a);_a=new Static("Static05","absolute",null,"0","15",null,"0","0",this.div_SearchArea);_a.set_taborder("4");_a.set_text("15");_a.set_visible("false");_a.style.set_background("#00ffff66");this.div_SearchArea.addChild(_a.name,_a);_a=new Static("sta_issuId","absolute","15","5","64","21",null,null,this.div_SearchArea);_a.set_taborder("5");_a.set_text("발신번호");_a.set_cssclass("sta_WFSA_Label");_a.style.set_align("left middle");this.div_SearchArea.addChild(_a.name,_a);_a=new Edit("edt_telno","absolute","79","5","200","21",null,null,this.div_SearchArea);_a.set_taborder("0");_a.set_lengthunit("ascii");_a.set_maxlength("20");_a.set_inputtype("number");this.div_SearchArea.addChild(_a.name,_a);_a=new Button("btn_Close","absolute",null,"17","50","25","17",null,this);_a.set_taborder("2");_a.set_text("닫기");_a.set_cssclass("btn_WF_CRUD");this.addChild(_a.name,_a);_a=new Button("btn_sendMssage","absolute",null,"17","64","25","70",null,this);_a.set_taborder("1");_a.set_text("문자전송");_a.set_cssclass("btn_WF_CRUD");this.addChild(_a.name,_a);_a=new Div("div_Cont","absolute","17","90",null,null,"17","14",this);_a.set_taborder("4");this.addChild(_a.name,_a);_a=new Static("sta_title2","absolute","0","0","180","19",null,null,this.div_Cont);_a.set_taborder("0");_a.set_text("수신자 목록");_a.set_cssclass("sta_WF_Title02");_a.style.set_font("bold 9 Dotum");this.div_Cont.addChild(_a.name,_a);_a=new Static("Static01","absolute","0","19",null,"5","0",null,this.div_Cont);_a.set_taborder("2");_a.set_text("5");_a.set_visible("false");_a.style.set_background("#dc143c3c");_a.style.set_align("center middle");this.div_Cont.addChild(_a.name,_a);_a=new Grid("grd_rcverList","absolute","0","24",null,null,"0","0",this.div_Cont);_a.set_taborder("1");_a.set_binddataset("ds_rcverList");_a.set_extendsizetype("row");_a.set_cellsizingtype("col");_a._setContents("<Formats><Format id=\"default\"><Columns><Column size=\"100\"/><Column size=\"80\"/><Column size=\"100\"/><Column size=\"160\"/><Column size=\"80\"/><Column size=\"110\"/></Columns><Rows><Row size=\"24\" band=\"head\"/><Row size=\"24\"/></Rows><Band id=\"head\"><Cell text=\"사번\"/><Cell col=\"1\" text=\"성명\"/><Cell col=\"2\" text=\"부서코드\"/><Cell col=\"3\" text=\"부서명\"/><Cell col=\"4\" text=\"직급\"/><Cell col=\"5\" text=\"수신번호\"/></Band><Band id=\"body\"><Cell text=\"bind:EMPNO\" expandshow=\"show\"/><Cell col=\"1\" style=\"align:left middle;padding:0 5 0 0;\" text=\"bind:EMPNM\"/><Cell col=\"2\" text=\"bind:DEPT_CODE\"/><Cell col=\"3\" style=\"align:left middle;padding:0 5 0 0;\" text=\"bind:DEPT_NM\"/><Cell col=\"4\" style=\"align:left middle;padding:0 5 0 0;\" text=\"bind:HR_CLSF_NM\"/><Cell col=\"5\" text=\"bind:TELNO\"/></Band></Format></Formats>");this.div_Cont.addChild(_a.name,_a);_a=new Button("btn_Add_Row","absolute",null,"0","64","19","133",null,this.div_Cont);_a.set_taborder("3");_a.set_text("행추가");_a.set_cssclass("btn_WF_Gridadd");this.div_Cont.addChild(_a.name,_a);_a=new Button("btn_Del_Row","absolute",null,"0","64","19","67",null,this.div_Cont);_a.set_taborder("4");_a.set_text("행삭제");_a.set_cssclass("btn_WF_Griddel");this.div_Cont.addChild(_a.name,_a);_a=new Button("btn_Can_Row","absolute",null,"0","64","19","0",null,this.div_Cont);_a.set_taborder("5");_a.set_text("행취소");_a.set_cssclass("btn_WF_Gridcnl");this.div_Cont.addChild(_a.name,_a);_a=new Static("sta_title","absolute","17","20","180","19",null,null,this);_a.set_taborder("6");_a.set_text("조기집행실적 문자전송");_a.set_cssclass("sta_WF_Title01");_a.style.set_font("bold 9 Dotum");this.addChild(_a.name,_a);_a=new Static("Static06","absolute","0","2",null,"15","0",null,this);_a.set_taborder("7");_a.set_text("15");_a.set_visible("false");_a.style.set_background("#dc143c3c");_a.style.set_align("center middle");this.addChild(_a.name,_a);_a=new Static("Static05","absolute","2","32","15","250",null,null,this);_a.set_taborder("8");_a.set_text("15");_a.set_visible("false");_a.style.set_background("#1b3cd23c");_a.style.set_align("center middle");this.addChild(_a.name,_a);_a=new Static("Static02","absolute",null,"16","15","250","2",null,this);_a.set_taborder("9");_a.set_text("15");_a.set_visible("false");_a.style.set_background("#1b3cd23c");_a.style.set_align("center middle");this.addChild(_a.name,_a);_a=new Static("Static12","absolute","17","42","600","5",null,null,this);_a.set_taborder("10");_a.set_text("5");_a.set_visible("false");_a.style.set_background("#dc143c3c");_a.style.set_align("center middle");this.addChild(_a.name,_a);_a=new Static("Static21","absolute","0","80",null,"10","0",null,this);_a.set_taborder("11");_a.set_text("10");_a.set_visible("false");_a.style.set_background("#dc143c3c");_a.style.set_align("center middle");this.addChild(_a.name,_a);_a=new Layout("default","",766,59,this.div_SearchArea,function(_b){_b.set_taborder("3");_b.set_cssclass("div_WFSA_Box");});this.div_SearchArea.addLayout(_a.name,_a);_a=new Layout("default","",0,0,this.div_Cont,function(_b){_b.set_taborder("4");});this.div_Cont.addLayout(_a.name,_a);_a=new Layout("default","",680,300,this,function(_b){_b.set_classname("BDG050102_P01");_b.set_titletext("조기집행실적 문자전송");});this.addLayout(_a.name,_a);_a=new BindItem("item3","div_SearchArea.edt_telno","value","ds_telno","TELNO");this.addChild(_a.name,_a);_a.bind();_a=null;};this.addIncludeScript("BDG050102_P01.xfdl","lib::comInclude.xjs");this.addIncludeScript("BDG050102_P01.xfdl","mis_lib::misUtil.xjs");this.registerScript("BDG050102_P01.xfdl",function(){this.BDG050102_P01_oninit=function(_a,_b){};this.BDG050102_P01_onload=function(_a,_b){this.fn_init_form();this.fn_init_dataset();};this.fn_init_form=function(){this.gfn_initForm(this);this.fn_misFormInit(this);this.ds_cond.clearData();this.ds_cond.addRow();var _a=this.gfn_getEmpNo();this.ds_cond.setColumn(0,"EMPNO",_a);this.fn_transaction("selectTelno");};this.fn_init_dataset=function(){};this.fn_init=function(){};this.fn_transaction=function(_a){switch(_a){case "selectTelno":var _b="/hsco/mis/bdg/BDG050102/selectTelno.do";var _c="input1=ds_cond";var _d="ds_telno=output1";break;case "sendMssage":var _b="/hsco/mis/bdg/BDG050102/sendMssage.do";var _c="input1=ds_sendMssage:A";var _d="";break;}Ex.core.tran(this,_a,_b,_c,_d);};this.fn_callBack=function(_a,_b,_c){if(_b!='0'){this.gfn_callback_message(_a,_b,_c);}if(_b==0){switch(_a){case "selectTelno":break;case "sendMssage":this.gfn_message("success.처리.성공",null,null,null,this.fn_callbackPopup);break;}}};this.fn_callbackPopup=function(){this.close();};this.fn_popupCallBack=function(_a,_b){if(_a=="empPopup"){var _c=new Dataset();var _d=_c.loadXML(_b);if(_d){var _e=_c.getColumn(0,"EMPNO");var _f=_c.getColumn(0,"EMPNM");var _g=_c.getColumn(0,"DEPT_CODE");var _h=_c.getColumn(0,"DEPT_NM");var _i=_c.getColumn(0,"HR_CLSF_SE");var _j=_c.getColumn(0,"HR_CLSF_NM");var _k=_c.getColumn(0,"TELNO_2");trace(_k);var _l=this.ds_rcverList.rowposition;this.ds_rcverList.setColumn(_l,"EMPNO",_e);this.ds_rcverList.setColumn(_l,"EMPNM",_f);this.ds_rcverList.setColumn(_l,"DEPT_CODE",_g);this.ds_rcverList.setColumn(_l,"DEPT_NM",_h);this.ds_rcverList.setColumn(_l,"HR_CLSF_SE",_i);this.ds_rcverList.setColumn(_l,"HR_CLSF_NM",_j);this.ds_rcverList.setColumn(_l,"TELNO",_k);}}};this.btn_sendMssage_onclick=function(_a,_b){var _c=this.ds_telno.rowposition;var _d=this.ds_telno.getColumn(_c,"TELNO");if(this.comUtils.isNull(_d)){this.gfn_message("info.처리불가","발신번호 항목을 입력하십시오.");return false;}if(!this.comUtils.isDatasetUpdated(this.ds_rcverList)){this.gfn_message("comm.데이터.변경.없음");return false;}if(!this.gfn_checkValidation_NoUpdChk(this.ds_rcverList,this.ds_validation)){return;}var _e='hsuco7765';var _f='1';var _g='조기집행실적';var _h='031-8012-7725';var _i='1';var _j='0';var _k='조기집행실적관리가 필요합니다. 확인 부탁드립니다.';var _l='0';var _m='';this.ds_sendMssage.clearData();var _n=this.ds_rcverList.rowcount;for(var _p=0;_p<_n;_p++ ){empnm=this.ds_rcverList.getColumn(_p,"EMPNM");telno=this.ds_rcverList.getColumn(_p,"TELNO");destInfo=empnm+"^"+telno;var _o=this.ds_sendMssage.addRow();this.ds_sendMssage.setColumn(_o,"USER_ID",_e);this.ds_sendMssage.setColumn(_o,"SCHEDULE_TYPE",_f);this.ds_sendMssage.setColumn(_o,"SUBJECT",_g);this.ds_sendMssage.setColumn(_o,"CALLBACK",_h);this.ds_sendMssage.setColumn(_o,"DEST_COUNT",_i);this.ds_sendMssage.setColumn(_o,"DEST_INFO",destInfo);this.ds_sendMssage.setColumn(_o,"MSG_TYPE",_j);this.ds_sendMssage.setColumn(_o,"MMS_MSG",_k);this.ds_sendMssage.setColumn(_o,"CONTENT_COUNT",_l);this.ds_sendMssage.setColumn(_o,"CONTENT_DATA",_m);}if(this.gfn_message("comm.행위여부","문자전송을")){this.fn_transaction("sendMssage");}};this.btn_Close_onclick=function(_a,_b){this.close();};this.div_Cont_btn_Add_Row_onclick=function(_a,_b){this.ds_rcverList.addRow();};this.div_Cont_btn_Del_Row_onclick=function(_a,_b){var _c=this.ds_rcverList.rowposition;if(_c<0){this.gfn_message("comm.항목.선택.요청","수신자 목록");return false;}if(!this.gfn_message("confirm.삭제여부")){return false;}this.ds_rcverList.deleteRow(_c);};this.div_Cont_btn_Can_Row_onclick=function(_a,_b){if(Ex.util.isUpdated(this.ds_rcverList)){if(!this.gfn_message("confirm.변경.취소.여부")){return false;}}this.ds_rcverList.reset();this.ds_rcverList.applyChange();};this.div_Cont_grd_updtTaxbilTrget_onexpandup=function(_a,_b){if(_b.cell=="0"){var _c={arg_0:this};this.gfn_popup("empPopup",590,500,"",_c,"com::empno_P01.xfdl","fn_popupCallBack",true);}};});this.on_initEvent=function(){this.ds_cond.addEventHandler("oncolumnchanged",this.ds_cond_oncolumnchanged,this);this.ds_rcverList.addEventHandler("oncolumnchanged",this.ds_updtTaxbilTrget_oncolumnchanged,this);this.addEventHandler("onload",this.BDG050102_P01_onload,this);this.addEventHandler("oninit",this.BDG050102_P01_oninit,this);this.btn_Close.addEventHandler("onclick",this.btn_Close_onclick,this);this.btn_sendMssage.addEventHandler("onclick",this.btn_sendMssage_onclick,this);this.div_Cont.grd_rcverList.addEventHandler("onexpandup",this.div_Cont_grd_updtTaxbilTrget_onexpandup,this);this.div_Cont.btn_Add_Row.addEventHandler("onclick",this.div_Cont_btn_Add_Row_onclick,this);this.div_Cont.btn_Del_Row.addEventHandler("onclick",this.div_Cont_btn_Del_Row_onclick,this);this.div_Cont.btn_Can_Row.addEventHandler("onclick",this.div_Cont_btn_Can_Row_onclick,this);this.sta_title.addEventHandler("onclick",this.Static00_onclick,this);};this.loadIncludeScript("BDG050102_P01.xfdl");};})();