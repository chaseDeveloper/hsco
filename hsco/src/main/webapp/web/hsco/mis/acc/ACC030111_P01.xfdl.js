(function(){return function(){if(!this._is_form){return;}this.on_create=function(){var _a=null;if(Form==this.constructor){this.set_name("ACC030111_P01");this.set_classname("ACC030111_P01");this.set_titletext("수정세금계산서 매입장등록");this._setFormPosition(0,0,1011,600);}_a=new Dataset("ds_cond",this);_a.set_firefirstcount("0");_a.getSetter("firenextcount").set("0");_a.set_useclientlayout("true");_a.set_updatecontrol("true");_a.set_enableevent("true");_a.set_loadkeymode("keep");_a.set_loadfiltermode("keep");_a.set_reversesubsum("false");_a._setContents("<ColumnInfo><Column id=\"ISSU_ID\" type=\"STRING\" size=\"256\"/><Column id=\"BILL_TYPE\" type=\"STRING\" size=\"256\"/><Column id=\"SUM_AM\" type=\"BIGDECIMAL\" size=\"15\"/></ColumnInfo>");this.addChild(_a.name,_a);_a=new Dataset("ds_updtTaxbilTrget",this);_a.set_firefirstcount("0");_a.getSetter("firenextcount").set("0");_a.set_useclientlayout("true");_a.set_updatecontrol("true");_a.set_enableevent("true");_a.set_loadkeymode("keep");_a.set_loadfiltermode("keep");_a.set_reversesubsum("false");_a._setContents("<ColumnInfo><Column id=\"CHK\" type=\"STRING\" size=\"256\"/><Column id=\"ISSU_SEQNO\" type=\"STRING\" size=\"256\"/><Column id=\"BILL_TYPE\" type=\"STRING\" size=\"256\"/><Column id=\"ISSU_ID\" type=\"STRING\" size=\"256\"/><Column id=\"SELR_CORP_NM\" type=\"STRING\" size=\"256\"/><Column id=\"SELR_CEO\" type=\"STRING\" size=\"256\"/><Column id=\"SELR_CORP_NO\" type=\"STRING\" size=\"256\"/><Column id=\"REGS_DATE\" type=\"STRING\" size=\"256\"/><Column id=\"CHRG_AMT\" type=\"BIGDECIMAL\" size=\"27\"/><Column id=\"TAX_AMT\" type=\"BIGDECIMAL\" size=\"27\"/><Column id=\"TOTL_AMT\" type=\"BIGDECIMAL\" size=\"27\"/></ColumnInfo>");this.addChild(_a.name,_a);_a=new Dataset("ds_validation",this);_a.set_firefirstcount("0");_a.getSetter("firenextcount").set("0");_a.set_useclientlayout("true");_a.set_updatecontrol("true");_a.set_enableevent("true");_a.set_loadkeymode("keep");_a.set_loadfiltermode("keep");_a.set_reversesubsum("false");_a._setContents("<ColumnInfo><Column id=\"compId\" type=\"STRING\" size=\"256\"/><Column id=\"colId\" type=\"STRING\" size=\"256\"/><Column id=\"PK\" type=\"STRING\" size=\"256\"/><Column id=\"notNull\" type=\"STRING\" size=\"256\"/><Column id=\"type\" type=\"STRING\" size=\"256\"/><Column id=\"nlength\" type=\"STRING\" size=\"256\"/><Column id=\"from\" type=\"STRING\" size=\"256\"/><Column id=\"to\" type=\"STRING\" size=\"256\"/><Column id=\"lengthChkGb\" type=\"STRING\" size=\"256\"/><Column id=\"msgId\" type=\"STRING\" size=\"256\"/><Column id=\"expr\" type=\"STRING\" size=\"256\"/><Column id=\"func\" type=\"STRING\" size=\"256\"/></ColumnInfo><Rows><Row><Col id=\"compId\">ds_cond</Col><Col id=\"colId\">APPR_BGNDE</Col><Col id=\"notNull\">Y</Col><Col id=\"msgId\">승인시작일자</Col></Row><Row><Col id=\"compId\">ds_cond</Col><Col id=\"colId\">APPR_ENDDE</Col><Col id=\"notNull\">Y</Col><Col id=\"msgId\">승인종료일자</Col></Row><Row><Col id=\"compId\">ds_cond</Col><Col id=\"colId\">APPR_ENDDE</Col><Col id=\"from\">APPR_BGNDE</Col><Col id=\"msgId\">승인종료일자^승인시작일자</Col></Row></Rows>");this.addChild(_a.name,_a);_a=new Dataset("ds_searchSe",this);_a.set_firefirstcount("0");_a.getSetter("firenextcount").set("0");_a.set_useclientlayout("true");_a.set_updatecontrol("true");_a.set_enableevent("true");_a.set_loadkeymode("keep");_a.set_loadfiltermode("keep");_a.set_reversesubsum("false");_a._setContents("<ColumnInfo><Column id=\"CODE\" type=\"STRING\" size=\"256\"/><Column id=\"CODE_NM\" type=\"STRING\" size=\"256\"/></ColumnInfo><Rows><Row><Col id=\"CODE\">1</Col><Col id=\"CODE_NM\">카드명</Col></Row><Row><Col id=\"CODE\">2</Col><Col id=\"CODE_NM\">카드번호</Col></Row></Rows>");this.addChild(_a.name,_a);_a=new Static("Static00","absolute","0","0","1011","600",null,null,this);_a.set_taborder("5");_a.set_cssclass("sta_WF_PopupBg");this.addChild(_a.name,_a);_a=new Div("div_SearchArea","absolute","17","47",null,"33","17",null,this);_a.set_taborder("3");_a.set_cssclass("div_WFSA_Box");this.addChild(_a.name,_a);_a=new Static("Static09","absolute","0","129",null,"7","20",null,this.div_SearchArea);_a.set_taborder("2");_a.set_text("7");_a.set_visible("false");_a.style.set_background("bisque");_a.style.set_border("0 none transparent");this.div_SearchArea.addChild(_a.name,_a);_a=new Static("Static01","absolute","0","0","15",null,null,"0",this.div_SearchArea);_a.set_taborder("3");_a.set_text("15");_a.set_visible("false");_a.style.set_background("#00ffff66");this.div_SearchArea.addChild(_a.name,_a);_a=new Static("Static05","absolute",null,"0","15",null,"0","0",this.div_SearchArea);_a.set_taborder("4");_a.set_text("15");_a.set_visible("false");_a.style.set_background("#00ffff66");this.div_SearchArea.addChild(_a.name,_a);_a=new Static("sta_issuId","absolute","15","5","103","21",null,null,this.div_SearchArea);_a.set_taborder("5");_a.set_text("국세청승인번호");_a.set_cssclass("sta_WFSA_Label");_a.style.set_align("left middle");this.div_SearchArea.addChild(_a.name,_a);_a=new Edit("edt_issuId","absolute","118","5","200","21",null,null,this.div_SearchArea);_a.set_taborder("0");_a.set_cssclass("edt_WF_Readonly");_a.set_readonly("true");this.div_SearchArea.addChild(_a.name,_a);_a=new MaskEdit("msk_sumAm","absolute",null,"5","130","21","15",null,this.div_SearchArea);_a.set_taborder("1");_a.set_mask("###,###,###,###,###");_a.set_limitbymask("both");_a.set_cssclass("msk_WF_Readonly");_a.set_readonly("true");this.div_SearchArea.addChild(_a.name,_a);_a=new Static("sta_sumAm","absolute",null,"5","64","21","145",null,this.div_SearchArea);_a.set_taborder("6");_a.set_text("합계금액");_a.set_cssclass("sta_WFSA_Label");_a.style.set_align("left middle");this.div_SearchArea.addChild(_a.name,_a);_a=new Button("btn_Close","absolute",null,"17","50","25","17",null,this);_a.set_taborder("2");_a.set_text("닫기");_a.set_cssclass("btn_WF_CRUD");this.addChild(_a.name,_a);_a=new Button("btn_Save","absolute",null,"17","50","25","70",null,this);_a.set_taborder("1");_a.set_text("반영");_a.set_cssclass("btn_WF_CRUD");_a.set_enable("false");this.addChild(_a.name,_a);_a=new Div("div_Cont","absolute","17","90",null,null,"17","14",this);_a.set_taborder("4");this.addChild(_a.name,_a);_a=new Static("sta_title2","absolute","0","0","180","19",null,null,this.div_Cont);_a.set_taborder("0");_a.set_text("수정세금계산서 대상 목록");_a.set_cssclass("sta_WF_Title02");_a.style.set_font("bold 9 Dotum");this.div_Cont.addChild(_a.name,_a);_a=new Static("Static01","absolute","0","19",null,"5","0",null,this.div_Cont);_a.set_taborder("2");_a.set_text("5");_a.set_visible("false");_a.style.set_background("#dc143c3c");_a.style.set_align("center middle");this.div_Cont.addChild(_a.name,_a);_a=new Grid("grd_updtTaxbilTrget","absolute","0","24",null,null,"0","0",this.div_Cont);_a.set_taborder("1");_a.set_binddataset("ds_updtTaxbilTrget");_a.set_extendsizetype("row");_a.set_cellsizingtype("col");_a.set_autosizingtype("row");_a._setContents("<Formats><Format id=\"default\"><Columns><Column size=\"40\"/><Column size=\"180\"/><Column size=\"80\"/><Column size=\"100\"/><Column size=\"90\"/><Column size=\"100\"/><Column size=\"100\"/><Column size=\"100\"/><Column size=\"180\"/></Columns><Rows><Row size=\"24\" band=\"head\"/><Row size=\"24\"/></Rows><Band id=\"head\"><Cell displaytype=\"checkbox\" edittype=\"checkbox\"/><Cell col=\"1\" text=\"업체명\"/><Cell col=\"2\" text=\"대표자\"/><Cell col=\"3\" text=\"사업자번호\"/><Cell col=\"4\" text=\"작성일자\"/><Cell col=\"5\" text=\"공급가액\"/><Cell col=\"6\" text=\"부가세\"/><Cell col=\"7\" text=\"총금액\"/><Cell col=\"8\" text=\"국세청승인번호\"/></Band><Band id=\"body\"><Cell displaytype=\"checkbox\" edittype=\"checkbox\" text=\"bind:CHK\"/><Cell col=\"1\" style=\"align:left middle;padding:0 0 0 5;\" text=\"bind:SELR_CORP_NM\" tooltiptext=\"bind:SELR_CORP_NM\"/><Cell col=\"2\" style=\"align:left middle;padding:0 0 0 5;\" text=\"bind:SELR_CEO\" tooltiptext=\"bind:SELR_CEO\"/><Cell col=\"3\" text=\"bind:SELR_CORP_NO\" mask=\"###-##-#####\"/><Cell col=\"4\" displaytype=\"date\" text=\"bind:REGS_DATE\" calendardisplaynulltype=\"none\"/><Cell col=\"5\" displaytype=\"number\" style=\"align:right middle;padding:0 5 0 0;\" text=\"bind:CHRG_AMT\"/><Cell col=\"6\" displaytype=\"number\" style=\"align:right middle;padding:0 5 0 0;\" text=\"bind:TAX_AMT\"/><Cell col=\"7\" displaytype=\"number\" style=\"align:right middle;padding:0 5 0 0;\" text=\"bind:TOTL_AMT\"/><Cell col=\"8\" text=\"bind:ISSU_ID\"/></Band></Format></Formats>");this.div_Cont.addChild(_a.name,_a);_a=new Static("sta_title","absolute","17","20","180","19",null,null,this);_a.set_taborder("6");_a.set_text("수정세금계산서 매입장등록");_a.set_cssclass("sta_WF_Title01");_a.style.set_font("bold 9 Dotum");this.addChild(_a.name,_a);_a=new Static("Static06","absolute","0","2",null,"15","0",null,this);_a.set_taborder("7");_a.set_text("15");_a.set_visible("false");_a.style.set_background("#dc143c3c");_a.style.set_align("center middle");this.addChild(_a.name,_a);_a=new Button("btn_Search","absolute",null,"17","50","25","123",null,this);_a.set_taborder("0");_a.set_text("조회");_a.set_cssclass("btn_WF_CRUD");this.addChild(_a.name,_a);_a=new Static("Static05","absolute","2","32","15","496",null,null,this);_a.set_taborder("8");_a.set_text("15");_a.set_visible("false");_a.style.set_background("#1b3cd23c");_a.style.set_align("center middle");this.addChild(_a.name,_a);_a=new Static("Static02","absolute",null,"16","15","496","2",null,this);_a.set_taborder("9");_a.set_text("15");_a.set_visible("false");_a.style.set_background("#1b3cd23c");_a.style.set_align("center middle");this.addChild(_a.name,_a);_a=new Static("Static12","absolute","17","42","770","5",null,null,this);_a.set_taborder("10");_a.set_text("5");_a.set_visible("false");_a.style.set_background("#dc143c3c");_a.style.set_align("center middle");this.addChild(_a.name,_a);_a=new Static("Static21","absolute","0","80",null,"10","0",null,this);_a.set_taborder("11");_a.set_text("10");_a.set_visible("false");_a.style.set_background("#dc143c3c");_a.style.set_align("center middle");this.addChild(_a.name,_a);_a=new Static("sta_title00","absolute",null,"21","437","19","179",null,this);_a.set_taborder("12");_a.set_text("(선택한 세금계산서의 합계금액을 0원이 되면 반영 버튼이 활성화됩니다.)");_a.style.set_color("blue");_a.style.set_padding("0 0 0 0");_a.style.set_align("left middle");_a.style.set_font("bold 9 Gulim");this.addChild(_a.name,_a);_a=new Layout("default","",766,59,this.div_SearchArea,function(_b){_b.set_taborder("3");_b.set_cssclass("div_WFSA_Box");});this.div_SearchArea.addLayout(_a.name,_a);_a=new Layout("default","",0,0,this.div_Cont,function(_b){_b.set_taborder("4");});this.div_Cont.addLayout(_a.name,_a);_a=new Layout("default","",1011,600,this,function(_b){_b.set_classname("ACC030111_P01");_b.set_titletext("수정세금계산서 매입장등록");});this.addLayout(_a.name,_a);_a=new BindItem("item3","div_SearchArea.edt_issuId","value","ds_cond","ISSU_ID");this.addChild(_a.name,_a);_a.bind();_a=new BindItem("item9","div_SearchArea.msk_sumAm","value","ds_cond","SUM_AM");this.addChild(_a.name,_a);_a.bind();_a=null;};this.addIncludeScript("ACC030111_P01.xfdl","lib::comInclude.xjs");this.addIncludeScript("ACC030111_P01.xfdl","mis_lib::misUtil.xjs");this.registerScript("ACC030111_P01.xfdl",function(){this.ACC030111_P01_oninit=function(_a,_b){};this.ACC030111_P01_onload=function(_a,_b){this.fn_init_form();this.fn_init_dataset();};this.fn_init_form=function(){this.gfn_initForm(this);this.fn_misFormInit(this);this.ds_cond.clearData();this.ds_cond.addRow();this.ds_cond.setColumn(0,"BILL_TYPE","2");var _a=null;if(!this.comUtils.isNull(this.parent.issuId)){_a=this.parent.issuId;}this.ds_cond.setColumn(0,"ISSU_ID",_a);this.fn_search();};this.fn_init_dataset=function(){};this.fn_search=function(_a,_b){if(!this.gfn_checkValidation_NoUpdChk(this.ds_cond,this.ds_validation)){return;}this.ds_updtTaxbilTrget.clearData();this.fn_transaction("selectUpdtTaxbilTrget");};this.fn_init=function(){};this.fn_transaction=function(_a){switch(_a){case "selectUpdtTaxbilTrget":var _b="hsco/mis/acc/ACC030111/selectUpdtTaxbilTrget.do";var _c="input1=ds_cond";var _d="ds_updtTaxbilTrget=output1";break;case "saveP01":var _b="hsco/mis/acc/ACC030111/saveP01.do";var _c="input1=ds_updtTaxbilTrget:U";var _d="";break;}Ex.core.tran(this,_a,_b,_c,_d);};this.fn_callBack=function(_a,_b,_c){if(_b!='0'){this.gfn_callback_message(_a,_b,_c);}if(_b==0){switch(_a){case "selectUpdtTaxbilTrget":break;case "saveP01":this.gfn_message("success.처리.성공",null,null,null,this.fn_popupCallback);break;}}};this.fn_popupCallback=function(){this.close();};this.ds_updtTaxbilTrget_oncolumnchanged=function(_a,_b){if(_b.columnid=="CHK"){var _c=_a.rowcount;var _d=0;for(var _h=0;_h<_c;_h++ ){var _e=_a.getColumn(_h,"CHK");if(_e=="1"){var _f=_a.getColumn(_h,"TOTL_AMT");_d+=_f;}}var _g=this.ds_cond.rowposition;this.ds_cond.setColumn(_g,"SUM_AM",_d);}};this.ds_cond_oncolumnchanged=function(_a,_b){if(_b.columnid=="SUM_AM"){var _c=this.ds_updtTaxbilTrget.rowcount;var _d=0;for(var _f=0;_f<_c;_f++ ){var _e=this.ds_updtTaxbilTrget.getColumn(_f,"CHK");if(_e=="1"){_d++ ;}}if(_b.newvalue==0&&_d>0){this.btn_Save.set_enable(true);}else{this.btn_Save.set_enable(false);}}};this.div_Cont_grd_updtTaxbilTrget_onheadclick=function(_a,_b){if(_b.col==0){this.gfn_setGridCheckAll(_a,_b);var _c=this.ds_updtTaxbilTrget.rowcount;var _d=0;for(var _h=0;_h<_c;_h++ ){var _e=this.ds_updtTaxbilTrget.getColumn(_h,"CHK");if(_e=="1"){var _f=this.ds_updtTaxbilTrget.getColumn(_h,"TOTL_AMT");_d+=_f;}}var _g=this.ds_cond.rowposition;this.ds_cond.setColumn(_g,"SUM_AM",_d);}this.gfn_gridSort(_a,_b);};this.btn_Search_onclick=function(_a,_b){this.fn_search();};this.btn_Save_onclick=function(_a,_b){var _c=this.ds_updtTaxbilTrget.rowcount;for(var _e=0;_e<_c;_e++ ){var _d=this.ds_updtTaxbilTrget.getColumn(_e,"CHK");if(_d!="1"){this.ds_updtTaxbilTrget.set_enableevent(false);this.ds_updtTaxbilTrget.set_updatecontrol(false);this.ds_updtTaxbilTrget.setRowType(_e,1);this.ds_updtTaxbilTrget.set_enableevent(true);this.ds_updtTaxbilTrget.set_updatecontrol(true);}}if(this.gfn_message("comm.행위여부","반영")){this.fn_transaction("saveP01");}};this.btn_Close_onclick=function(_a,_b){this.close();};});this.on_initEvent=function(){this.ds_cond.addEventHandler("oncolumnchanged",this.ds_cond_oncolumnchanged,this);this.ds_updtTaxbilTrget.addEventHandler("oncolumnchanged",this.ds_updtTaxbilTrget_oncolumnchanged,this);this.addEventHandler("onload",this.ACC030111_P01_onload,this);this.addEventHandler("oninit",this.ACC030111_P01_oninit,this);this.btn_Close.addEventHandler("onclick",this.btn_Close_onclick,this);this.btn_Save.addEventHandler("onclick",this.btn_Save_onclick,this);this.div_Cont.grd_updtTaxbilTrget.addEventHandler("onheadclick",this.div_Cont_grd_updtTaxbilTrget_onheadclick,this);this.sta_title.addEventHandler("onclick",this.Static00_onclick,this);this.btn_Search.addEventHandler("onclick",this.btn_Search_onclick,this);};this.loadIncludeScript("ACC030111_P01.xfdl");};})();