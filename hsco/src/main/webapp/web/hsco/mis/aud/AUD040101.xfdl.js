(function(){return function(){if(!this._is_form){return;}this.on_create=function(){var _a=null;if(Form==this.constructor){this.set_name("AUD040101");this.set_classname("AUD040101");this.set_titletext("청렴마일리지설정");this._setFormPosition(0,0,1059,752);}_a=new Dataset("ds_cond",this);_a.set_firefirstcount("0");_a.getSetter("firenextcount").set("0");_a.set_useclientlayout("false");_a.set_updatecontrol("true");_a.set_enableevent("true");_a.set_loadkeymode("keep");_a.set_loadfiltermode("keep");_a.set_reversesubsum("false");_a._setContents("<ColumnInfo><Column id=\"ESTBS_YEAR\" type=\"STRING\" size=\"256\"/></ColumnInfo>");this.addChild(_a.name,_a);_a=new Dataset("DS_INTGTY_MLG_ESTBS",this);_a.set_firefirstcount("0");_a.getSetter("firenextcount").set("0");_a.set_useclientlayout("true");_a.set_updatecontrol("true");_a.set_enableevent("true");_a.set_loadkeymode("keep");_a.set_loadfiltermode("keep");_a.set_reversesubsum("false");_a._setContents("<ColumnInfo><Column id=\"ESTBS_YEAR\" type=\"STRING\" size=\"4\"/><Column id=\"MLG_CODE\" type=\"STRING\" size=\"6\"/><Column id=\"MLG_SE\" type=\"STRING\" size=\"50\"/><Column id=\"MLG_KND\" type=\"STRING\" size=\"50\"/><Column id=\"MLG_DETAIL\" type=\"STRING\" size=\"100\"/><Column id=\"MLG_UPPER_CODE\" type=\"STRING\" size=\"6\"/><Column id=\"MXMM_VALUE\" type=\"STRING\" size=\"15\"/><Column id=\"DDC_MXMM_VALUE_AT\" type=\"STRING\" size=\"1\"/><Column id=\"UNIT\" type=\"STRING\" size=\"8\"/><Column id=\"MLG_LEVEL\" type=\"STRING\" size=\"15\"/><Column id=\"CSBY_ALLOT\" type=\"STRING\" size=\"15\"/><Column id=\"RM\" type=\"STRING\" size=\"200\"/><Column id=\"REGISTER_ID\" type=\"STRING\" size=\"12\"/><Column id=\"REGIST_DT\" type=\"DATE\" size=\"10\"/><Column id=\"UPDUSR_ID\" type=\"STRING\" size=\"12\"/><Column id=\"UPDT_DT\" type=\"DATE\" size=\"10\"/></ColumnInfo>");this.addChild(_a.name,_a);_a=new Dataset("DS_COPY_LIST",this);_a.set_firefirstcount("0");_a.getSetter("firenextcount").set("0");_a.set_useclientlayout("false");_a.set_updatecontrol("true");_a.set_enableevent("true");_a.set_loadkeymode("keep");_a.set_loadfiltermode("keep");_a.set_reversesubsum("false");_a._setContents("<ColumnInfo><Column id=\"ESTBS_YEAR\" type=\"STRING\" size=\"256\"/></ColumnInfo>");this.addChild(_a.name,_a);_a=new Dataset("ds_validation",this);_a.set_firefirstcount("0");_a.getSetter("firenextcount").set("0");_a.set_useclientlayout("true");_a.set_updatecontrol("true");_a.set_enableevent("true");_a.set_loadkeymode("keep");_a.set_loadfiltermode("keep");_a.set_reversesubsum("false");_a._setContents("<ColumnInfo><Column id=\"compId\" type=\"STRING\" size=\"256\"/><Column id=\"colId\" type=\"STRING\" size=\"256\"/><Column id=\"PK\" type=\"STRING\" size=\"256\"/><Column id=\"notNull\" type=\"STRING\" size=\"256\"/><Column id=\"type\" type=\"STRING\" size=\"256\"/><Column id=\"nlength\" type=\"STRING\" size=\"256\"/><Column id=\"from\" type=\"STRING\" size=\"256\"/><Column id=\"to\" type=\"STRING\" size=\"256\"/><Column id=\"lengthChkGb\" type=\"STRING\" size=\"256\"/><Column id=\"msgId\" type=\"STRING\" size=\"256\"/><Column id=\"expr\" type=\"STRING\" size=\"256\"/><Column id=\"func\" type=\"STRING\" size=\"256\"/></ColumnInfo><Rows><Row><Col id=\"colId\">MLG_CODE</Col><Col id=\"notNull\">Y</Col><Col id=\"msgId\">코드</Col><Col id=\"compId\">DS_INTGTY_MLG_ESTBS</Col></Row><Row><Col id=\"colId\">MLG_UPPER_CODE</Col><Col id=\"notNull\"/><Col id=\"msgId\">상위코드</Col><Col id=\"compId\">DS_INTGTY_MLG_ESTBS</Col></Row><Row><Col id=\"colId\">MLG_LEVEL</Col><Col id=\"notNull\">Y</Col><Col id=\"msgId\">레벨</Col><Col id=\"compId\">DS_INTGTY_MLG_ESTBS</Col></Row><Row><Col id=\"compId\">DS_INTGTY_MLG_ESTBS</Col><Col id=\"colId\">MLG_SE</Col><Col id=\"notNull\">Y</Col><Col id=\"msgId\">분야</Col></Row><Row><Col id=\"colId\">CSBY_ALLOT</Col><Col id=\"compId\">DS_INTGTY_MLG_ESTBS</Col><Col id=\"notNull\">N</Col><Col id=\"msgId\">배점</Col></Row></Rows>");this.addChild(_a.name,_a);_a=new Dataset("ds_cond2",this);_a.set_firefirstcount("0");_a.getSetter("firenextcount").set("0");_a.set_useclientlayout("false");_a.set_updatecontrol("true");_a.set_enableevent("true");_a.set_loadkeymode("keep");_a.set_loadfiltermode("keep");_a.set_reversesubsum("false");_a._setContents("<ColumnInfo><Column id=\"YEAR\" type=\"STRING\" size=\"256\"/><Column id=\"CODE\" type=\"STRING\" size=\"256\"/></ColumnInfo>");this.addChild(_a.name,_a);_a=new Dataset("ds_deleteAt",this);_a.set_firefirstcount("0");_a.getSetter("firenextcount").set("0");_a.set_useclientlayout("true");_a.set_updatecontrol("true");_a.set_enableevent("true");_a.set_loadkeymode("keep");_a.set_loadfiltermode("keep");_a.set_reversesubsum("false");_a._setContents("<ColumnInfo><Column id=\"DELETE_AT\" type=\"STRING\" size=\"256\"/></ColumnInfo>");this.addChild(_a.name,_a);_a=new Div("div_Cont","absolute","0","33",null,null,"28","0",this);_a.set_taborder("1");this.addChild(_a.name,_a);_a=new Static("sta_MLG_LIST","absolute","0","9","130","19",null,null,this.div_Cont);_a.set_taborder("9");_a.set_text("마일리지설정목록");_a.set_cssclass("sta_WF_Title02");_a.style.set_font("bold 9 Dotum");_a.getSetter("titletext").set("내외부감사실시관리");this.div_Cont.addChild(_a.name,_a);_a=new Grid("grd_INTGTY_MLG_ESTBS","absolute","0","34",null,null,"0","10",this.div_Cont);_a.set_taborder("8");_a.set_binddataset("DS_INTGTY_MLG_ESTBS");_a.set_autoenter("select");_a.set_autofittype("col");_a.set_treeinitstatus("expand,all");_a.set_treeuseexpandkey("true");_a.set_treeusecheckbox("false");_a._setContents("<Formats><Format id=\"default\"><Columns><Column size=\"150\"/><Column size=\"50\"/><Column size=\"40\"/><Column size=\"150\"/><Column size=\"220\"/><Column size=\"220\"/><Column size=\"70\"/><Column size=\"70\"/><Column size=\"60\"/><Column size=\"100\"/></Columns><Rows><Row size=\"24\" band=\"head\"/><Row size=\"24\"/></Rows><Band id=\"head\"><Cell cssclass=\"Cellgrd_WF_HeadEssential\" text=\"코드\"/><Cell col=\"1\" text=\"상위\"/><Cell col=\"2\" cssclass=\"Cellgrd_WF_HeadEssential\" text=\"레벨\"/><Cell col=\"3\" cssclass=\"Cellgrd_WF_HeadEssential\" text=\"분야\"/><Cell col=\"4\" text=\"평가항목\"/><Cell col=\"5\" text=\"평가기준\"/><Cell col=\"6\" cssclass=\"Cellgrd_WF_HeadEssential\" text=\"배점\"/><Cell col=\"7\" text=\"상한점수\"/><Cell col=\"8\" text=\"상한적용\"/><Cell col=\"9\" text=\"비고\"/></Band><Band id=\"body\"><Cell displaytype=\"tree\" edittype=\"tree\" text=\"bind:MLG_CODE\" treestartlevel=\"0\" treelevel=\"bind:MLG_LEVEL\"/><Cell col=\"1\" displaytype=\"normal\" edittype=\"none\" style=\"align: ;\" text=\"bind:MLG_UPPER_CODE\"/><Cell col=\"2\" displaytype=\"normal\" edittype=\"none\" style=\"align: ;\" text=\"bind:MLG_LEVEL\"/><Cell col=\"3\" edittype=\"expr:dataset.getRowType(currow) == &quot;2&quot; ? 'normal' : 'none'\" style=\"align: ;\" text=\"bind:MLG_SE\" editlimit=\"150\" editdisplay=\"expr:dataset.getRowType(currow) == &quot;2&quot; ? 'display': 'edit'\" editlengthunit=\"ascii\"/><Cell col=\"4\" displaytype=\"normal\" edittype=\"normal\" style=\"align:left;padding: ;\" text=\"bind:MLG_KND\" editlimit=\"75\" editdisplay=\"display\" editlengthunit=\"ascii\"/><Cell col=\"5\" edittype=\"normal\" style=\"align:left;padding: ;\" text=\"bind:MLG_DETAIL\" editlimit=\"150\" editdisplay=\"display\" editlengthunit=\"ascii\"/><Cell col=\"6\" displaytype=\"number\" edittype=\"masknumber\" style=\"align:right;\" text=\"bind:CSBY_ALLOT\" mask=\"###,###,###,###,###\" maskchar=\" \" editlimit=\"15\" editdisplay=\"display\" editlimitbymask=\"integer\"/><Cell col=\"7\" displaytype=\"number\" edittype=\"masknumber\" style=\"align:right;\" text=\"bind:MXMM_VALUE\" mask=\"###,###,###,###,###\" editlimit=\"15\" editdisplay=\"display\" editlimitbymask=\"integer\"/><Cell col=\"8\" displaytype=\"checkbox\" edittype=\"checkbox\" text=\"bind:DDC_MXMM_VALUE_AT\"/><Cell col=\"9\" edittype=\"normal\" text=\"bind:RM\" editlimit=\"300\" editdisplay=\"display\" editlengthunit=\"ascii\"/></Band></Format><Format id=\"format_copy\"></Format></Formats>");this.div_Cont.addChild(_a.name,_a);_a=new Button("btn_Copy_Year","absolute",null,"10","66","19","206",null,this.div_Cont);_a.set_taborder("4");_a.set_text("년도복사");_a.set_cssclass("btn_WF_Process");this.div_Cont.addChild(_a.name,_a);_a=new Button("btn_Add_CurrentNode","absolute",null,"10","69","19","134",null,this.div_Cont);_a.set_taborder("5");_a.set_text("현재행추가");this.div_Cont.addChild(_a.name,_a);_a=new Button("btn_Add_ChildNode","absolute",null,"10","69","19","63",null,this.div_Cont);_a.set_taborder("6");_a.set_text("하위행추가");this.div_Cont.addChild(_a.name,_a);_a=new Button("btn_Collapse_Expand","absolute",null,"10","60","19","0",null,this.div_Cont);_a.set_taborder("7");_a.set_text("모두접기");this.div_Cont.addChild(_a.name,_a);_a=new Static("Static04","absolute","2","0","999","10",null,null,this.div_Cont);_a.set_taborder("10");_a.set_text("10");_a.set_visible("false");_a.style.set_background("#dc143c3c");_a.style.set_align("center middle");this.div_Cont.addChild(_a.name,_a);_a=new Static("Static05","absolute","2","29","999","5",null,null,this.div_Cont);_a.set_taborder("11");_a.set_text("10");_a.set_visible("false");_a.style.set_background("#dc143c3c");_a.style.set_align("center middle");this.div_Cont.addChild(_a.name,_a);_a=new Spin("spn_COPY_YEAR","absolute",null,"10","78","21","275",null,this.div_Cont);_a.set_taborder("3");_a.set_value("0");this.div_Cont.addChild(_a.name,_a);_a=new Div("div_SearchArea","absolute","0","0",null,"33","28",null,this);_a.set_taborder("0");_a.set_cssclass("div_WFSA_Box");this.addChild(_a.name,_a);_a=new Static("sta_ESTBS_YEAR","absolute","15","5","60","21",null,null,this.div_SearchArea);_a.set_taborder("1");_a.set_text("설정년도");_a.style.set_align("right middle");_a.set_cssclass("sta_WFSA_Label");this.div_SearchArea.addChild(_a.name,_a);_a=new Spin("spn_ESTBS_YEAR","absolute","80","5","80","21",null,null,this.div_SearchArea);_a.set_taborder("0");_a.set_cssclass("spn_WF_Essential");this.div_SearchArea.addChild(_a.name,_a);_a=new Layout("default","",1031,735,this.div_Cont,function(_b){_b.set_taborder("1");});this.div_Cont.addLayout(_a.name,_a);_a=new Layout("default","",0,33,this.div_SearchArea,function(_b){_b.set_taborder("0");_b.set_cssclass("div_WFSA_Box");});this.div_SearchArea.addLayout(_a.name,_a);_a=new Layout("default","",1059,752,this,function(_b){_b.set_classname("AUD040101");_b.set_titletext("청렴마일리지설정");});this.addLayout(_a.name,_a);_a=null;};this.addIncludeScript("AUD040101.xfdl","lib::comInclude.xjs");this.addIncludeScript("AUD040101.xfdl","mis_lib::misUtil.xjs");this.registerScript("AUD040101.xfdl",function(){var _a="0";this.checkDs=[this.DS_INTGTY_MLG_ESTBS];this.AUD040101_oninit=function(_b,_c){this.fn_init_form();this.fn_init_dataset();};this.AUD040101_onload=function(_b,_c){this.div_SearchArea.spn_ESTBS_YEAR.setFocus(true);this.div_Cont.spn_COPY_YEAR.set_value(nexacro.toNumber(this.gfn_today().substring(0,4))-1);this.fn_search();};this.fn_search=function(_b,_c){this.DS_INTGTY_MLG_ESTBS.clearData();this.ds_cond.clearData();var _d=this.ds_cond.addRow();this.ds_cond.setColumn(_d,"ESTBS_YEAR",this.div_SearchArea.spn_ESTBS_YEAR.value);this.fn_transaction("selectMlgList");};this.fn_init_form=function(){this.gfn_initForm(this);this.fn_misFormInit(this);this.div_SearchArea.spn_ESTBS_YEAR.set_value(this.gfn_today().substring(0,4));};this.fn_init_dataset=function(){};this.fn_insert=function(_b,_c){this.div_Cont_btn_Add_CurrentNode_onclick();};this.fn_cancel=function(_b,_c){if(Ex.util.isUpdated(this.DS_INTGTY_MLG_ESTBS)){if(this.gfn_message("confirm.취소여부")){this.DS_INTGTY_MLG_ESTBS.reset();this.DS_INTGTY_MLG_ESTBS.applyChange();return;}}else{this.gfn_message("comm.내역.변경.없음");}};this.fn_save=function(_b,_c){for(var _h=0;_h<this.DS_INTGTY_MLG_ESTBS.rowcount;_h++ ){var _d=this.DS_INTGTY_MLG_ESTBS.getColumn(_h,"MLG_LEVEL");var _e=this.DS_INTGTY_MLG_ESTBS.getColumn(_h,"CSBY_ALLOT");if(_d==3&&this.comUtils.isNull(_e)){var _f=nexacro.toNumber(nexacro.toNumber(_h)+1);var _g=this.DS_INTGTY_MLG_ESTBS.getColumn(_h,"MLG_CODE");alert("마일리지 코드 "+_g+"의 배점을 입력해주세요.");return false;}}if(!this.gfn_checkValidation(this.DS_INTGTY_MLG_ESTBS,this.ds_validation)){return;}this.fn_transaction("MlgListListCUD");};this.fn_save_copy=function(){this.fn_transaction("MlgListCOPYListCUD");};this.fn_delete=function(_b,_c){var _d=this.DS_INTGTY_MLG_ESTBS.rowposition;var _e=this.DS_INTGTY_MLG_ESTBS.getColumn(_d,"MLG_CODE");var _f="1";for(var _g=0;_g<=this.DS_INTGTY_MLG_ESTBS.rowcount-1;_g++ ){if(this.DS_INTGTY_MLG_ESTBS.getColumn(_g,"MLG_UPPER_CODE")==_e){_f="0";break;}}if(_f=="1"){this.ds_deleteAt.clearData();this.ds_cond2.clearData();this.ds_cond2.addRow();this.ds_cond2.setColumn(0,"YEAR",this.div_SearchArea.spn_ESTBS_YEAR.value);this.ds_cond2.setColumn(0,"CODE",_e);this.fn_transaction("deleteData");}else{this.gfn_message("fail.삭제.실패","하위노드가 존재하여,");}};this.fn_transaction=function(_b){switch(_b){case "selectMlgList":var _c="hsco/mis/aud/AUD040101/selectMlgList.do";var _d="input01=ds_cond";var _e="DS_INTGTY_MLG_ESTBS=output01";break;case "MlgListListCUD":var _c="hsco/mis/aud/AUD040101/MlgListListCUD.do";var _d="input02=DS_INTGTY_MLG_ESTBS:U";var _e="";break;case "MlgListCOPYListCUD":var _c="hsco/mis/aud/AUD040101/MlgListCOPYListCUD.do";var _d="input04=DS_INTGTY_MLG_ESTBS:U";var _e="";break;case "deleteData":var _c="hsco/mis/aud/AUD040101/deleteData.do";var _d="input05=ds_cond2";var _e="ds_deleteAt=output05";break;}var _f="";Ex.core.tran(this,_b,_c,_d,_e,_f);};this.div_Cont_btn_Add_CurrentNode_onclick=function(_b,_c){if(this.DS_INTGTY_MLG_ESTBS.rowcount==0){_i=this.DS_INTGTY_MLG_ESTBS.addRow();this.DS_INTGTY_MLG_ESTBS.setColumn(_i,"MLG_CODE","A");this.DS_INTGTY_MLG_ESTBS.setColumn(_i,"MLG_LEVEL","0");this.DS_INTGTY_MLG_ESTBS.setColumn(_i,"MLG_UPPER_CODE","");this.DS_INTGTY_MLG_ESTBS.setColumn(_i,"ESTBS_YEAR",this.div_SearchArea.spn_ESTBS_YEAR.value);}else{var _d=this.DS_INTGTY_MLG_ESTBS.getColumn(this.DS_INTGTY_MLG_ESTBS.rowposition,"MLG_LEVEL");if(_d==0){var _e=this.DS_INTGTY_MLG_ESTBS.getColumn(this.DS_INTGTY_MLG_ESTBS.rowposition,"MLG_CODE");var _f=this.DS_INTGTY_MLG_ESTBS.getColumn(this.DS_INTGTY_MLG_ESTBS.rowposition,"MLG_UPPER_CODE");if(this.DS_INTGTY_MLG_ESTBS.getColumn(this.DS_INTGTY_MLG_ESTBS.rowposition,"MLG_LEVEL")==0){var _g="";var _h=this.DS_INTGTY_MLG_ESTBS.rowcount;for(var _o=_h;_o>=0;_o-- ){if(this.DS_INTGTY_MLG_ESTBS.getColumn(_o,"MLG_LEVEL")==0){_g=this.DS_INTGTY_MLG_ESTBS.getColumn(_o,"MLG_CODE");break;}}var _i=this.DS_INTGTY_MLG_ESTBS.addRow();this.DS_INTGTY_MLG_ESTBS.setColumn(_i,"MLG_CODE",String.fromCharCode(_g.charCodeAt(0)+1));this.DS_INTGTY_MLG_ESTBS.setColumn(_i,"MLG_LEVEL",0);this.DS_INTGTY_MLG_ESTBS.setColumn(_i,"MLG_UPPER_CODE","");this.DS_INTGTY_MLG_ESTBS.setColumn(_i,"ESTBS_YEAR",this.div_SearchArea.spn_ESTBS_YEAR.value);}else if(_d==1){var _j="";var _h=this.DS_INTGTY_MLG_ESTBS.rowcount;for(var _o=_h;_o>=0;_o-- ){if(this.DS_INTGTY_MLG_ESTBS.getColumn(_o,"MLG_LEVEL")==1){_g=this.DS_INTGTY_MLG_ESTBS.getColumn(_o,"MLG_CODE");break;}}var _i=this.DS_INTGTY_MLG_ESTBS.addRow();this.DS_INTGTY_MLG_ESTBS.setColumn(_i,"MLG_CODE",String.fromCharCode(_e.charCodeAt(0)+1));this.DS_INTGTY_MLG_ESTBS.setColumn(_i,"MLG_LEVEL",_d);this.DS_INTGTY_MLG_ESTBS.setColumn(_i,"MLG_UPPER_CODE",_f);this.DS_INTGTY_MLG_ESTBS.setColumn(_i,"ESTBS_YEAR",this.div_SearchArea.spn_ESTBS_YEAR.value);}else{var _j="";var _d=this.DS_INTGTY_MLG_ESTBS.getColumn(this.DS_INTGTY_MLG_ESTBS.rowposition,"MLG_LEVEL");var _f=this.DS_INTGTY_MLG_ESTBS.getColumn(this.DS_INTGTY_MLG_ESTBS.rowposition,"MLG_UPPER_CODE");var _h=this.DS_INTGTY_MLG_ESTBS.rowcount;var _k=this.DS_INTGTY_MLG_ESTBS.rowposition;var _l=1;for(var _o=_h;_o>=0;_o-- ){if(this.DS_INTGTY_MLG_ESTBS.getColumn(_o,"MLG_LEVEL")==_d&&this.DS_INTGTY_MLG_ESTBS.getColumn(_o,"MLG_UPPER_CODE")==_f){_l=_l+1;}}if(_d=="2"){if(_l<10){_j=_f+'0'+_l;}else{_j=_f+_l;}}else{_j=_f+_l;}var _i=this.DS_INTGTY_MLG_ESTBS.addRow();this.DS_INTGTY_MLG_ESTBS.setColumn(_i,"MLG_CODE",_j);this.DS_INTGTY_MLG_ESTBS.setColumn(_i,"MLG_LEVEL",_d);this.DS_INTGTY_MLG_ESTBS.setColumn(_i,"MLG_UPPER_CODE",_f);this.DS_INTGTY_MLG_ESTBS.setColumn(_i,"ESTBS_YEAR",this.div_SearchArea.spn_ESTBS_YEAR.value);}}else{if(this.DS_INTGTY_MLG_ESTBS.getColumn(this.DS_INTGTY_MLG_ESTBS.rowposition,"MLG_LEVEL")==0){var _g="";var _h=this.DS_INTGTY_MLG_ESTBS.rowcount;for(var _o=_h;_o>=0;_o-- ){if(this.DS_INTGTY_MLG_ESTBS.getColumn(_o,"MLG_LEVEL")==0){_g=this.DS_INTGTY_MLG_ESTBS.getColumn(_o,"MLG_CODE");break;}}var _i=this.DS_INTGTY_MLG_ESTBS.addRow();this.DS_INTGTY_MLG_ESTBS.setColumn(_i,"MLG_CODE",String.fromCharCode(_g.charCodeAt(0)+1));this.DS_INTGTY_MLG_ESTBS.setColumn(_i,"MLG_LEVEL",0);this.DS_INTGTY_MLG_ESTBS.setColumn(_i,"MLG_UPPER_CODE","");this.DS_INTGTY_MLG_ESTBS.setColumn(_i,"ESTBS_YEAR",this.div_SearchArea.spn_ESTBS_YEAR.value);}else{var _f=this.DS_INTGTY_MLG_ESTBS.getColumn(this.DS_INTGTY_MLG_ESTBS.rowposition,"MLG_UPPER_CODE");var _k=this.DS_INTGTY_MLG_ESTBS.rowposition;var _m=this.DS_INTGTY_MLG_ESTBS.rowcount-1;var _d=this.DS_INTGTY_MLG_ESTBS.getColumn(_k,"MLG_LEVEL");var _n="";var _l=1;var _j="";for(var _o=_k;_o<=_m;_o++ ){if(this.DS_INTGTY_MLG_ESTBS.getColumn(_o,"MLG_LEVEL")<_d){_n=_o-1;break;}else{_n=_m;}}for(var _o=0;_o<=_m;_o++ ){if(this.DS_INTGTY_MLG_ESTBS.getColumn(_o,"MLG_LEVEL")==_d&&this.DS_INTGTY_MLG_ESTBS.getColumn(_o,"MLG_UPPER_CODE")==_f){_l=_l+1;}}if(_d=="2"){if(_l<10){_j=_f+'0'+_l;}else{_j=_f+_l;}}else{_j=_f+_l;}var _i=this.DS_INTGTY_MLG_ESTBS.insertRow(_n+1);this.DS_INTGTY_MLG_ESTBS.setColumn(_i,"MLG_CODE",_j);this.DS_INTGTY_MLG_ESTBS.setColumn(_i,"MLG_LEVEL",_d);this.DS_INTGTY_MLG_ESTBS.setColumn(_i,"MLG_UPPER_CODE",_f);this.DS_INTGTY_MLG_ESTBS.setColumn(_i,"ESTBS_YEAR",this.div_SearchArea.spn_ESTBS_YEAR.value);}}}};this.div_Cont_btn_Add_ChildNode_onclick=function(_b,_c){if(this.DS_INTGTY_MLG_ESTBS.rowposition> -1){if(this.DS_INTGTY_MLG_ESTBS.getColumn(this.DS_INTGTY_MLG_ESTBS.rowposition,'MLG_LEVEL')==3){this.gfn_message("info.저장.초과","노드는 3레벨까지");}else{var _d=this.DS_INTGTY_MLG_ESTBS.getColumn(this.DS_INTGTY_MLG_ESTBS.rowposition,"MLG_LEVEL");var _e=this.DS_INTGTY_MLG_ESTBS.getColumn(this.DS_INTGTY_MLG_ESTBS.rowposition,"MLG_CODE");var _f=this.DS_INTGTY_MLG_ESTBS.getColumn(this.DS_INTGTY_MLG_ESTBS.rowposition,"MLG_SE");var _g=parseInt(_d)+1;var _h=this.DS_INTGTY_MLG_ESTBS.rowposition;var _i=_h+1;var _j=1;var _k="";if(this.DS_INTGTY_MLG_ESTBS.getColumn(_h,"MLG_CODE")==this.DS_INTGTY_MLG_ESTBS.getColumn(_i,"MLG_UPPER_CODE")){for(var _q=_h;_q<=this.DS_INTGTY_MLG_ESTBS.rowcount-1;_q++ ){if(this.DS_INTGTY_MLG_ESTBS.getColumn(_q,"MLG_UPPER_CODE")==this.DS_INTGTY_MLG_ESTBS.getColumn(_i,"MLG_UPPER_CODE")){_j=_j+1;}}var _l=_j-1;if(_d==1){if(_j<10){var _m=_e+'0'+_l;}else{var _m=_e+_l;}}else{var _m=_e+_l;}var _n=this.DS_INTGTY_MLG_ESTBS.findRow("MLG_CODE",_m);var _o=0;for(var _q=_n;_q<=this.DS_INTGTY_MLG_ESTBS.rowcount;_q++ ){if(this.DS_INTGTY_MLG_ESTBS.getColumn(_n,"MLG_CODE")==this.DS_INTGTY_MLG_ESTBS.getColumn(_q,"MLG_UPPER_CODE")){_o=_o+1;}}_n=_n+_o;var _p=this.DS_INTGTY_MLG_ESTBS.insertRow(_n+1);if(this.DS_INTGTY_MLG_ESTBS.getColumn(_h,"MLG_LEVEL")=="1"){if(_j>9){_k=_e+_j;}else{_k=_e+'0'+_j;}}else{_k=_e+_j;}}else{if(this.DS_INTGTY_MLG_ESTBS.getColumn(_h,"MLG_LEVEL")=="1"){_k=_e+'01';}else{_k=_e+'1';}var _p=this.DS_INTGTY_MLG_ESTBS.insertRow(this.DS_INTGTY_MLG_ESTBS.rowposition+1);}this.DS_INTGTY_MLG_ESTBS.setColumn(_p,"MLG_SE",_f);this.DS_INTGTY_MLG_ESTBS.setColumn(_p,"MLG_CODE",_k);this.DS_INTGTY_MLG_ESTBS.setColumn(_p,"MLG_LEVEL",_g);this.DS_INTGTY_MLG_ESTBS.setColumn(_p,"MLG_UPPER_CODE",_e);this.DS_INTGTY_MLG_ESTBS.setColumn(_p,"ESTBS_YEAR",this.div_SearchArea.spn_ESTBS_YEAR.value);}}else{this.gfn_message("comm.항목.선택.요청","기준노드");}};this.div_Cont_btn_Collapse_Expand_onclick=function(_b,_c){if(_a=="0"){this.div_Cont.grd_INTGTY_MLG_ESTBS.set_treeinitstatus("collapse,all");this.div_Cont.btn_Collapse_Expand.set_text('모두펼치기');_a="1";}else{this.div_Cont.grd_INTGTY_MLG_ESTBS.set_treeinitstatus("expand,null");this.div_Cont.btn_Collapse_Expand.set_text('모두접기');_a="0";}};this.div_Cont_btn_Copy_Year_onclick=function(_b,_c){if(this.DS_INTGTY_MLG_ESTBS.rowcount>0){this.gfn_message("error.복사.불가","모두 삭제");}else{if(this.comUtils.isNull(this.div_Cont.spn_COPY_YEAR.value)){this.gfn_message("comm.항목.입력.을","년도");}else{if(this.gfn_message("confirm.복사.여부","(자동저장)"+this.div_Cont.spn_COPY_YEAR.value+"년 내용|"+this.div_SearchArea.spn_ESTBS_YEAR.value+"년으")){this.DS_INTGTY_MLG_ESTBS.clearData();this.DS_COPY_LIST.clearData();var _d=this.DS_COPY_LIST.addRow();this.DS_COPY_LIST.setColumn(_d,"ESTBS_YEAR",this.div_Cont.spn_COPY_YEAR.value);var _e="selectMlgListCopy";var _f="hsco/mis/aud/AUD040101/selectMlgListCopy.do";var _g="input03=DS_COPY_LIST";var _h="DS_INTGTY_MLG_ESTBS=output03";var _i="";Ex.core.tran(this,_e,_f,_g,_h,_i);}}}};this.div_SearchArea_spn_ESTBS_YEAR_ontextchanged=function(_b,_c){if(Ex.util.isUpdated(this.DS_INTGTY_MLG_ESTBS)){if(!this.gfn_message("confirm.변경.취소.여부")){return false;}}this.fn_search();};this.fn_callBack=function(_b,_c,_d){if(_c!=0){this.gfn_callback_message(_b,_c,_d);}else{switch(_b){case "selectMlgListCopy":var _e=this.DS_INTGTY_MLG_ESTBS.rowcount-1;for(var _f=0;_f<=_e;_f++ ){this.DS_INTGTY_MLG_ESTBS.setColumn(_f,"ESTBS_YEAR",this.div_SearchArea.spn_ESTBS_YEAR.value);}this.fn_save_copy();break;case "MlgListCOPYListCUD":this.fn_search();break;case "MlgListListCUD":this.fn_search();break;case "deleteData":if(this.ds_deleteAt.getColumn(0,"DELETE_AT")<=0){this.DS_INTGTY_MLG_ESTBS.deleteRow(this.DS_INTGTY_MLG_ESTBS.rowposition);}else{trace("삭제실패");}break;}}};this.Button00_onclick=function(_b,_c){this.DS_INTGTY_MLG_ESTBS.deleteAll();};});this.on_initEvent=function(){this.addEventHandler("onload",this.AUD040101_onload,this);this.addEventHandler("oninit",this.AUD040101_oninit,this);this.div_Cont.sta_MLG_LIST.addEventHandler("onclick",this.Static00_onclick,this);this.div_Cont.grd_INTGTY_MLG_ESTBS.addEventHandler("oncellclick",this.div_Cont_grd_INTGTY_MLG_ESTBS_oncellclick,this);this.div_Cont.btn_Copy_Year.addEventHandler("onclick",this.div_Cont_btn_Copy_Year_onclick,this);this.div_Cont.btn_Add_CurrentNode.addEventHandler("onclick",this.div_Cont_btn_Add_CurrentNode_onclick,this);this.div_Cont.btn_Add_ChildNode.addEventHandler("onclick",this.div_Cont_btn_Add_ChildNode_onclick,this);this.div_Cont.btn_Collapse_Expand.addEventHandler("onclick",this.div_Cont_btn_Collapse_Expand_onclick,this);this.div_SearchArea.spn_ESTBS_YEAR.addEventHandler("ontextchanged",this.div_SearchArea_spn_ESTBS_YEAR_ontextchanged,this);};this.loadIncludeScript("AUD040101.xfdl");};})();