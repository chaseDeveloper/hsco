(function(){return function(){if(!this._is_form){return;}this.on_create=function(){var _a=null;if(Form==this.constructor){this.set_name("ASS000000_P01");this.set_classname("ASS000000_P01");this.set_titletext("자산물품 사진 팝업");this.set_cssclass("sta_WF_PopupBg");this._setFormPosition(0,0,351,356);}_a=new Dataset("ds_fileList",this);_a.set_firefirstcount("0");_a.getSetter("firenextcount").set("0");_a.set_useclientlayout("true");_a.set_updatecontrol("true");_a.set_enableevent("true");_a.set_loadkeymode("keep");_a.set_loadfiltermode("keep");_a.set_reversesubsum("false");_a._setContents("<ColumnInfo><Column id=\"CHK\" type=\"STRING\" size=\"256\"/><Column id=\"PROGRS\" type=\"BIGDECIMAL\" size=\"16\"/><Column id=\"ORGINL_FILE_NM\" type=\"string\" size=\"32\"/><Column id=\"FILE_EXTSN\" type=\"string\" size=\"32\"/><Column id=\"FILE_STRE_COURS\" type=\"string\" size=\"32\"/><Column id=\"FILE_ID\" type=\"string\" size=\"32\"/><Column id=\"SN\" type=\"bigdecimal\" size=\"16\"/><Column id=\"SYS_SE_CODE\" type=\"string\" size=\"32\"/><Column id=\"FILE_IMAGE\" type=\"string\" size=\"32\"/><Column id=\"FILE_TY\" type=\"string\" size=\"32\"/><Column id=\"JOB_SE\" type=\"string\" size=\"32\"/><Column id=\"DELETE_IMAGE\" type=\"string\" size=\"32\"/><Column id=\"STRE_FILE_NM\" type=\"string\" size=\"32\"/><Column id=\"FILE_MG\" type=\"bigdecimal\" size=\"16\"/><Column id=\"FILE_CN\" type=\"string\" size=\"32\"/><Column id=\"FILE_ORDR\" type=\"bigdecimal\" size=\"16\"/><Column id=\"TRNSMIS_FILE_SIZE\" type=\"string\" size=\"32\"/><Column id=\"USE_AT\" type=\"string\" size=\"32\"/><Column id=\"STTUS\" type=\"string\" size=\"32\"/><Column id=\"FILE_SN\" type=\"bigdecimal\" size=\"16\"/></ColumnInfo>");this.addChild(_a.name,_a);_a=new Dataset("ds_cond_file",this);_a.set_firefirstcount("0");_a.getSetter("firenextcount").set("0");_a.set_useclientlayout("true");_a.set_updatecontrol("true");_a.set_enableevent("true");_a.set_loadkeymode("keep");_a.set_loadfiltermode("keep");_a.set_reversesubsum("false");_a._setContents("<ColumnInfo><Column id=\"FILE_SN\" type=\"STRING\" size=\"256\"/></ColumnInfo><Rows><Row/></Rows>");this.addChild(_a.name,_a);_a=new Dataset("DS_ASSETS_MASTR",this);_a.set_firefirstcount("0");_a.getSetter("firenextcount").set("0");_a.set_useclientlayout("true");_a.set_updatecontrol("true");_a.set_enableevent("true");_a.set_loadkeymode("keep");_a.set_loadfiltermode("keep");_a.set_reversesubsum("false");_a._setContents("<ColumnInfo><Column id=\"ASSETS_NO\" type=\"STRING\" size=\"256\"/><Column id=\"FILE_SN\" type=\"STRING\" size=\"256\"/></ColumnInfo>");this.addChild(_a.name,_a);_a=new Dataset("ds_trans",this);_a.set_firefirstcount("0");_a.getSetter("firenextcount").set("0");_a.set_useclientlayout("true");_a.set_updatecontrol("true");_a.set_enableevent("true");_a.set_loadkeymode("keep");_a.set_loadfiltermode("keep");_a.set_reversesubsum("false");_a._setContents("<ColumnInfo><Column id=\"FILE_SN\" type=\"STRING\" size=\"256\"/><Column id=\"FILE_CNT\" type=\"STRING\" size=\"256\"/></ColumnInfo>");this.addChild(_a.name,_a);_a=new Static("Static06","absolute","2","0","345","10",null,null,this);_a.set_taborder("12");_a.set_text("15");_a.set_visible("false");_a.style.set_background("#dc143c3c");_a.style.set_align("center middle");this.addChild(_a.name,_a);_a=new Static("sta_title","absolute","8","11","60","21",null,null,this);_a.set_taborder("16");_a.set_text("사진");_a.set_cssclass("sta_WF_Title01");this.addChild(_a.name,_a);_a=new Static("Static07","absolute","2","32","346","8",null,null,this);_a.set_taborder("17");_a.set_text("10");_a.set_visible("false");_a.style.set_background("#dc143c3c");_a.style.set_align("center middle");this.addChild(_a.name,_a);_a=new ImageViewer("ImageViewer04","absolute","6","40",null,null,"6","7",this);_a.set_taborder("25");_a.set_image("URL('theme://images/image_sample.png')");_a.set_stretch("fit");_a.style.set_opacity("100");this.addChild(_a.name,_a);_a=new Button("btn_Close","absolute",null,"9","50","25","6",null,this);_a.set_taborder("28");_a.set_text("종료");_a.set_cssclass("btn_WF_CRUD");this.addChild(_a.name,_a);_a=new Button("btn_insert","absolute",null,"9","50","25","114",null,this);_a.set_taborder("32");_a.set_text("신규");_a.set_cssclass("btn_WF_CRUD");this.addChild(_a.name,_a);_a=new Button("btn_delete","absolute",null,"9","50","25","60",null,this);_a.set_taborder("33");_a.set_text("삭제");_a.set_cssclass("btn_WF_CRUD");this.addChild(_a.name,_a);_a=new Layout("default","",351,356,this,function(_b){_b.set_classname("ASS000000_P01");_b.set_titletext("자산물품 사진 팝업");_b.set_cssclass("sta_WF_PopupBg");});this.addLayout(_a.name,_a);_a=null;};this.addIncludeScript("ASS000000_P01.xfdl","lib::comInclude.xjs");this.addIncludeScript("ASS000000_P01.xfdl","mis_lib::misUtil.xjs");this.addIncludeScript("ASS000000_P01.xfdl","lib::comUpDownUtils.xjs");this.registerScript("ASS000000_P01.xfdl",function(){this.File_UpDownManager=null;this.fv_objForm;this.ASS000000_P01_onload=function(_a,_b){this.fv_objForm=this.parent.arg_0;this.DS_ASSETS_MASTR.clearData();this.DS_ASSETS_MASTR.addRow();this.DS_ASSETS_MASTR.setColumn(0,"ASSETS_NO",this.parent.assetsNo);this.DS_ASSETS_MASTR.setColumn(0,"FILE_SN",this.parent.fileSn);var _c={useMultiUpload:false,onChange:this.fn_onFileSelected,onSuccess:this.fn_onFileSuccess,onError:this.fn_onFileError,allowTypes:["jpg","jpeg","gif","png"]};this.File_UpDownManager=new this.fileUpDownManager(this,"MIS","ASS");this.File_UpDownManager.init(_c);this.fn_search();};this.fn_search=function(){this.ds_fileList.clearData();this.ds_cond_file.clearData();this.ds_cond_file.addRow();this.ds_cond_file.setColumn(0,"FILE_SN",this.DS_ASSETS_MASTR.getColumn(0,"FILE_SN"));this.ImageViewer04.set_image("URL('theme://images/image_sample.png')");this.fn_transaction("selectFileList");};this.fn_transaction=function(_a){switch(_a){case "selectFileList":var _b="hsco/mis/ass/ASS000000/selectFileList.do";var _c="input1=ds_cond_file";var _d="ds_fileList=output1";break;case "deleteFile":var _b="hsco/cmm/file/deleteFile.do";var _c="input1=ds_fileList:U";var _d="ds_fileList=output1";}Ex.core.tran(this,_a,_b,_c,_d);};this.fn_callBack=function(_a,_b,_c){if(_b!=0){}else{switch(_a){case "selectFileList":if(this.ds_fileList.rowcount>0){var _d=this.ds_fileList.getColumn(0,"FILE_EXTSN");var _e=this.ds_fileList.getColumn(0,"FILE_SN");var _f=this.ds_fileList.getColumn(0,"FILE_ORDR");var _g=this.ds_fileList.getColumn(0,"ATCH_FILE");var _h=this.ds_fileList.getColumn(0,"FILE_TY");if(_h.indexOf("image/")> -1){var _i={};_i["FILE_SN"]=_e;_i["FILE_ORDR"]=_f;var _j=application.gv_host+"hsco/cmm/download/viewImage.do";var _k="?FILE_SN="+_e+"&FILE_ORDR="+_f;this.ImageViewer04.set_image(_j+_k);}}break;case "deleteFile":this.ImageViewer04.set_image("URL('theme://images/image_sample.png')");break;}}};this.btn_photo_onclick=function(_a,_b){if(this.ds_fileList.rowcount<1){mCallback=function(){this.fn_autoFileSn("MIS","ASS",this.File_UpDownManager,this.ds_fileList,this.DS_ASSETS_MASTR,"TBASS_ASSETS_MASTR","FILE_SN",["ASSETS_NO"]);};this.gfn_message("info.저장.초과","이미지 파일만",null,null,mCallback);}else{this.gfn_message("info.저장.초과","최대 1개 까지만");}};this.fn_onFileSuccess=function(){this.fn_search();};this.fn_onFileError=function(){this.gfn_message("info.저장.초과","이미지 파일만");};this.btn_del_photo_onclick=function(_a,_b){var _c=this.DS_ASSETS_MASTR.getColumn(0,"FILE_SN");if(!_c){this.gfn_message("info.파일정보.없음");}else{if(this.gfn_message("confirm.삭제여부")){this.ds_fileList.deleteRow(0);this.fn_transaction("deleteFile");}}};this.btn_Close_onclick=function(_a,_b){var _c=this.DS_ASSETS_MASTR.getColumn(0,"FILE_SN");var _d=this.ds_fileList.getRowCount();this.ds_trans.clearData();this.ds_trans.addRow();this.ds_trans.setColumn(0,"FILE_SN",_c);this.ds_trans.setColumn(0,"FILE_CNT",_d);this.close(this.ds_trans.saveXML());};this.fv_cX;this.fv_cY;this.Static01_onlbuttondown=function(_a,_b){this.fv_cX=_b.screenX;this.fv_cY=_b.screenY;};this.Static01_onmousemove=function(_a,_b){if(_b.button=="none"){return;}var _c=_b.screenX;var _d=_b.screenY;this.parent.set_left(parseInt(this.parent.left)-(this.fv_cX-_c));this.parent.set_top(parseInt(this.parent.top)-(this.fv_cY-_d));this.fv_cX=_b.screenX;this.fv_cY=_b.screenY;};});this.on_initEvent=function(){this.DS_ASSETS_MASTR.addEventHandler("onrowposchanged",this.DS_ASSETS_MASTR_TABLE_onrowposchanged,this);this.addEventHandler("onload",this.ASS000000_P01_onload,this);this.addEventHandler("onkillfocus",this.ASS000000_P01_onkillfocus,this);this.ImageViewer04.addEventHandler("onclick",this.ImageViewer04_onclick,this);this.btn_Close.addEventHandler("onclick",this.btn_Close_onclick,this);this.btn_insert.addEventHandler("onclick",this.btn_photo_onclick,this);this.btn_delete.addEventHandler("onclick",this.btn_del_photo_onclick,this);};this.loadIncludeScript("ASS000000_P01.xfdl");};})();