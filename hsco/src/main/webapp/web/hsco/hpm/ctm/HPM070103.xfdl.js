(function(){return function(){if(!this._is_form){return;}this.on_create=function(){var _a=null;if(Form==this.constructor){this.set_name("HPM070103");this.set_classname("HPM070102");this.set_titletext("실적현황");this._setFormPosition(0,0,1059,735);}_a=new Dataset("ds_cond",this);_a.set_firefirstcount("0");_a.getSetter("firenextcount").set("0");_a.set_useclientlayout("true");_a.set_updatecontrol("true");_a.set_enableevent("true");_a.set_loadkeymode("keep");_a.set_loadfiltermode("keep");_a.set_reversesubsum("false");_a._setContents("<ColumnInfo><Column id=\"FCLTS_SN\" type=\"STRING\" size=\"256\"/><Column id=\"DEPT_CODE\" type=\"STRING\" size=\"256\"/><Column id=\"DEPT_NM\" type=\"STRING\" size=\"256\"/><Column id=\"BGNDE\" type=\"STRING\" size=\"256\"/><Column id=\"ENDDE\" type=\"STRING\" size=\"256\"/><Column id=\"AUTH_AT\" type=\"STRING\" size=\"256\"/><Column id=\"BIZPLC_CODE\" type=\"STRING\" size=\"256\"/></ColumnInfo>");this.addChild(_a.name,_a);_a=new Dataset("ds_acmsltSttusList",this);_a.set_useclientlayout("true");_a._setContents("<ColumnInfo><Column id=\"MBER_ID\" type=\"STRING\" size=\"256\"/><Column id=\"MBER_NM\" type=\"STRING\" size=\"256\"/><Column id=\"GRP_NM\" type=\"STRING\" size=\"256\"/><Column id=\"USE_DE\" type=\"STRING\" size=\"256\"/><Column id=\"USE_TIME\" type=\"STRING\" size=\"256\"/><Column id=\"USE_NMPR\" type=\"BIGDECIMAL\" size=\"256\"/><Column id=\"DAY\" type=\"STRING\" size=\"256\"/><Column id=\"TM\" type=\"STRING\" size=\"256\"/><Column id=\"RCPMNYER\" type=\"STRING\" size=\"256\"/><Column id=\"SETLE_COMPT_DE\" type=\"STRING\" size=\"256\"/><Column id=\"SETLE_AM\" type=\"BIGDECIMAL\" size=\"256\"/><Column id=\"SETLE_SE\" type=\"STRING\" size=\"256\"/><Column id=\"REFND_BANK_CODE\" type=\"STRING\" size=\"256\"/><Column id=\"REFND_BANK_NM\" type=\"STRING\" size=\"256\"/><Column id=\"REFND_ACNUTNO\" type=\"STRING\" size=\"256\"/><Column id=\"REFND_DPSTR\" type=\"STRING\" size=\"256\"/><Column id=\"SETLE_STTUS\" type=\"STRING\" size=\"256\"/><Column id=\"AM\" type=\"BIGDECIMAL\" size=\"256\"/><Column id=\"REFND_AM\" type=\"BIGDECIMAL\" size=\"256\"/></ColumnInfo>");this.addChild(_a.name,_a);_a=new Dataset("ds_rentFcltsManageList",this);_a.set_firefirstcount("0");_a.getSetter("firenextcount").set("0");_a.set_useclientlayout("true");_a.set_updatecontrol("true");_a.set_enableevent("true");_a.set_loadkeymode("keep");_a.set_loadfiltermode("keep");_a.set_reversesubsum("false");_a._setContents("<ColumnInfo><Column id=\"FCLTS_SN\" type=\"STRING\" size=\"256\"/><Column id=\"FCLTS_NM\" type=\"STRING\" size=\"256\"/><Column id=\"USE_AT\" type=\"STRING\" size=\"256\"/><Column id=\"DEPT_CODE\" type=\"STRING\" size=\"256\"/><Column id=\"MUMM_RESVE_TIME\" type=\"STRING\" size=\"256\"/></ColumnInfo>");this.addChild(_a.name,_a);_a=new Dataset("ds_setleSttusSe",this);_a._setContents("<ColumnInfo><Column id=\"CODE\" type=\"STRING\" size=\"256\"/><Column id=\"CODE_NM\" type=\"STRING\" size=\"256\"/><Column id=\"VAL0\" type=\"STRING\" size=\"256\"/></ColumnInfo>");this.addChild(_a.name,_a);_a=new Dataset("ds_setleSe",this);_a.set_useclientlayout("true");_a._setContents("<ColumnInfo><Column id=\"CODE\" type=\"STRING\" size=\"256\"/><Column id=\"CODE_NM\" type=\"STRING\" size=\"256\"/></ColumnInfo>");this.addChild(_a.name,_a);_a=new Dataset("ds_validation",this);_a.set_firefirstcount("0");_a.getSetter("firenextcount").set("0");_a.set_useclientlayout("false");_a.set_updatecontrol("true");_a.set_enableevent("true");_a.set_loadkeymode("keep");_a.set_loadfiltermode("keep");_a.set_reversesubsum("false");_a._setContents("<ColumnInfo><Column id=\"compId\" type=\"STRING\" size=\"256\"/><Column id=\"colId\" type=\"STRING\" size=\"256\"/><Column id=\"PK\" type=\"STRING\" size=\"256\"/><Column id=\"notNull\" type=\"STRING\" size=\"256\"/><Column id=\"type\" type=\"STRING\" size=\"256\"/><Column id=\"nlength\" type=\"STRING\" size=\"256\"/><Column id=\"from\" type=\"STRING\" size=\"256\"/><Column id=\"to\" type=\"STRING\" size=\"256\"/><Column id=\"lengthChkGb\" type=\"STRING\" size=\"256\"/><Column id=\"msgId\" type=\"STRING\" size=\"256\"/><Column id=\"expr\" type=\"STRING\" size=\"256\"/><Column id=\"func\" type=\"STRING\" size=\"256\"/></ColumnInfo><Rows><Row><Col id=\"compId\">ds_cond</Col><Col id=\"notNull\">Y</Col><Col id=\"msgId\">담당부서</Col><Col id=\"colId\">DEPT_CODE</Col></Row><Row><Col id=\"compId\">ds_cond</Col><Col id=\"notNull\">Y</Col><Col id=\"lengthChkGb\"/><Col id=\"nlength\"/><Col id=\"msgId\">조회시작일</Col><Col id=\"colId\">BGNDE</Col></Row><Row><Col id=\"compId\">ds_cond</Col><Col id=\"colId\">ENDDE</Col><Col id=\"PK\"/><Col id=\"notNull\">Y</Col><Col id=\"type\"/><Col id=\"nlength\"/><Col id=\"from\"/><Col id=\"to\"/><Col id=\"lengthChkGb\"/><Col id=\"msgId\">조회종료일</Col><Col id=\"expr\"/><Col id=\"func\"/></Row><Row><Col id=\"compId\">ds_cond2</Col><Col id=\"colId\">DEPT_CODE</Col><Col id=\"PK\"/><Col id=\"notNull\">Y</Col><Col id=\"type\"/><Col id=\"nlength\"/><Col id=\"from\"/><Col id=\"to\"/><Col id=\"lengthChkGb\"/><Col id=\"msgId\">담당부서</Col><Col id=\"expr\"/><Col id=\"func\"/></Row><Row><Col id=\"compId\">ds_cond2</Col><Col id=\"colId\">BGNDE</Col><Col id=\"PK\"/><Col id=\"notNull\">Y</Col><Col id=\"type\"/><Col id=\"nlength\"/><Col id=\"from\"/><Col id=\"to\"/><Col id=\"lengthChkGb\"/><Col id=\"msgId\">조회시작일</Col><Col id=\"expr\"/><Col id=\"func\"/></Row><Row><Col id=\"compId\">ds_cond2</Col><Col id=\"colId\">ENDDE</Col><Col id=\"PK\"/><Col id=\"notNull\">Y</Col><Col id=\"type\"/><Col id=\"nlength\"/><Col id=\"from\"/><Col id=\"to\"/><Col id=\"lengthChkGb\"/><Col id=\"msgId\">조회종료일</Col><Col id=\"expr\"/><Col id=\"func\"/></Row></Rows>");this.addChild(_a.name,_a);_a=new Dataset("ds_fcltsList",this);_a.set_useclientlayout("true");_a._setContents("<ColumnInfo><Column id=\"FCLTS_SN\" type=\"STRING\" size=\"256\"/><Column id=\"FCLTS_NM\" type=\"STRING\" size=\"256\"/></ColumnInfo>");this.addChild(_a.name,_a);_a=new Dataset("ds_acmsltSttusList2",this);_a.set_useclientlayout("false");_a._setContents("");this.addChild(_a.name,_a);_a=new Dataset("ds_fcltsSe",this);_a.set_useclientlayout("true");_a._setContents("<ColumnInfo><Column id=\"FCLTS_SE\" type=\"STRING\" size=\"256\"/><Column id=\"FCLTS_SE_NM\" type=\"STRING\" size=\"256\"/></ColumnInfo>");this.addChild(_a.name,_a);_a=new Dataset("ds_cond2",this);_a.set_firefirstcount("0");_a.getSetter("firenextcount").set("0");_a.set_useclientlayout("true");_a.set_updatecontrol("true");_a.set_enableevent("true");_a.set_loadkeymode("keep");_a.set_loadfiltermode("keep");_a.set_reversesubsum("false");_a._setContents("<ColumnInfo><Column id=\"DEPT_CODE\" type=\"STRING\" size=\"256\"/><Column id=\"DEPT_NM\" type=\"STRING\" size=\"256\"/><Column id=\"BGNDE\" type=\"STRING\" size=\"256\"/><Column id=\"ENDDE\" type=\"STRING\" size=\"256\"/><Column id=\"FCLTS_SE\" type=\"STRING\" size=\"256\"/><Column id=\"AUTH_AT\" type=\"STRING\" size=\"256\"/><Column id=\"BIZPLC_CODE\" type=\"STRING\" size=\"256\"/></ColumnInfo>");this.addChild(_a.name,_a);_a=new Dataset("ds_day",this);_a._setContents("<ColumnInfo><Column id=\"CODE\" type=\"STRING\" size=\"256\"/><Column id=\"CODE_NM\" type=\"STRING\" size=\"256\"/></ColumnInfo><Rows><Row><Col id=\"CODE\">1</Col><Col id=\"CODE_NM\">휴일</Col></Row><Row><Col id=\"CODE\">0</Col><Col id=\"CODE_NM\">평일</Col></Row></Rows>");this.addChild(_a.name,_a);_a=new Dataset("ds_tm",this);_a._setContents("<ColumnInfo><Column id=\"CODE\" type=\"STRING\" size=\"256\"/><Column id=\"CODE_NM\" type=\"STRING\" size=\"256\"/></ColumnInfo><Rows><Row><Col id=\"CODE\">1</Col><Col id=\"CODE_NM\">야간</Col></Row><Row><Col id=\"CODE\">0</Col><Col id=\"CODE_NM\">주간</Col></Row></Rows>");this.addChild(_a.name,_a);_a=new Dataset("ds_bizplcList",this);_a.set_firefirstcount("0");_a.getSetter("firenextcount").set("0");_a.set_useclientlayout("true");_a.set_updatecontrol("true");_a.set_enableevent("true");_a.set_loadkeymode("keep");_a.set_loadfiltermode("keep");_a.set_reversesubsum("false");_a._setContents("<ColumnInfo><Column id=\"BIZPLC_CODE\" type=\"STRING\" size=\"256\"/><Column id=\"BIZPLC_NM\" type=\"STRING\" size=\"256\"/><Column id=\"DEPT_CODE\" type=\"STRING\" size=\"256\"/></ColumnInfo>");this.addChild(_a.name,_a);_a=new Dataset("ds_bizplcList2",this);_a.set_firefirstcount("0");_a.getSetter("firenextcount").set("0");_a.set_useclientlayout("true");_a.set_updatecontrol("true");_a.set_enableevent("true");_a.set_loadkeymode("keep");_a.set_loadfiltermode("keep");_a.set_reversesubsum("false");_a._setContents("<ColumnInfo><Column id=\"BIZPLC_CODE\" type=\"STRING\" size=\"256\"/><Column id=\"BIZPLC_NM\" type=\"STRING\" size=\"256\"/><Column id=\"DEPT_CODE\" type=\"STRING\" size=\"256\"/></ColumnInfo>");this.addChild(_a.name,_a);_a=new Static("Static00","absolute","1031","0","15","735",null,null,this);_a.set_taborder("2");_a.set_text("15");_a.set_visible("false");_a.style.set_background("#1b3cd23c");_a.style.set_align("center middle");this.addChild(_a.name,_a);_a=new Static("Static01","absolute",null,"0","13","735","0",null,this);_a.set_taborder("3");_a.set_text("스\r\n크\r\n롤\r\n13");_a.set_visible("false");_a.style.set_background("#d07b173c");_a.style.set_align("center middle");this.addChild(_a.name,_a);_a=new Tab("tab","absolute","0","0",null,null,"28","0",this);_a.set_taborder("5");_a.set_tabindex("0");_a.set_scrollbars("autoboth");_a.style.set_showextrabutton("false");_a.set_preload("true");this.addChild(_a.name,_a);_a=new Tabpage("tabpage1",this.tab);_a.set_text("시설별 실적현황");_a.set_url("hpm_ctm::HPM070103_T01.xfdl");this.tab.addChild(_a.name,_a);_a=new Tabpage("tabpage2",this.tab);_a.set_text("통계현황");_a.set_url("hpm_ctm::HPM070103_T02.xfdl");this.tab.addChild(_a.name,_a);_a=new Layout("default","",1059,735,this,function(_b){_b.set_classname("HPM070102");_b.set_titletext("실적현황");});this.addLayout(_a.name,_a);_a=new BindItem("item3","div_SEARCH.cmb_fcltsCn","value","ds_cond","FCLTS_SN");this.addChild(_a.name,_a);_a.bind();_a=null;};this.loadPreloadList=function(){this._addPreloadList("fdl","hpm_ctm::HPM070103_T01.xfdl");this._addPreloadList("fdl","hpm_ctm::HPM070103_T02.xfdl");};this.addIncludeScript("HPM070103.xfdl","lib::comInclude.xjs");this.addIncludeScript("HPM070103.xfdl","mis_lib::misUtil.xjs");this.registerScript("HPM070103.xfdl",function(){this.saveRow= -1;this.HPM070103_oninit=function(_a,_b){};this.HPM070103_onload=function(_a,_b){this.fn_init_form();this.fn_init_dataset();var _c=[["ds_setleSttusSe","HPM008","1",""],["ds_setleSe","HPM009","1",""]];var _d=function(_e,_f,_g){this.ds_cond.clearData();this.ds_cond.addRow();this.ds_cond2.clearData();this.ds_cond2.addRow();this.ds_cond.setColumn(0,"DEPT_CODE",this.gfn_getDeptId());this.ds_cond.setColumn(0,"DEPT_NM",this.gfn_getDeptName());this.ds_cond.setColumn(0,"BGNDE",this.dateUtils.format(this.gfn_today(),"yyyy")+'0101');this.ds_cond.setColumn(0,"ENDDE",this.dateUtils.format(this.gfn_today(),"yyyymmdd"));this.ds_cond.setColumn(0,"FCLTS_SN","");this.ds_cond.setColumn(0,"BIZPLC_CODE","9999");this.ds_cond2.setColumn(0,"DEPT_CODE",this.gfn_getDeptId());this.ds_cond2.setColumn(0,"DEPT_NM",this.gfn_getDeptName());this.ds_cond2.setColumn(0,"BGNDE",this.dateUtils.format(this.gfn_today(),"yyyy")+'0101');this.ds_cond2.setColumn(0,"ENDDE",this.dateUtils.format(this.gfn_today(),"yyyymmdd"));this.ds_cond.setColumn(0,"ENDDE",this.dateUtils.format(this.gfn_today(),"yyyymmdd"));this.ds_cond.setColumn(0,"BIZPLC_CODE","9999");if(this.gfn_authGrpId("HPM_ADMIN")!= -1){this.chargerAt=true;}if(this.chargerAt){this.tab.tabpage2.div_search.div_dept.set_enable(true);this.tab.tabpage1.div_search.div_dept.set_enable(true);this.ds_cond.setColumn(0,"AUTH_AT","1");this.ds_cond2.setColumn(0,"AUTH_AT","1");}else{this.ds_cond.setColumn(0,"AUTH_AT","0");this.ds_cond2.setColumn(0,"AUTH_AT","0");}this.fn_transaction("selectBizplcCode");};this.gfn_comboLoad(_c,_d);};this.fn_init_form=function(){this.fn_misFormInit(this);this.gfn_initForm(this);};this.fn_init_dataset=function(){this.gfn_initCondDs(this,this.div_search);};this.fn_search=function(){if(this.tab.tabindex==0){this.ds_acmsltSttusList.clearData();if(!this.gfn_checkValidation_NoUpdChk(this.ds_cond,this.ds_validation)){return;}this.fn_transaction("selectAcmsltSttusList");}else if(this.tab.tabindex==1){this.ds_acmsltSttusList2.clearData();if(!this.gfn_checkValidation_NoUpdChk(this.ds_cond2,this.ds_validation)){return;}this.fn_transaction("selectAcmsltSttusListT02");}};this.fn_transaction=function(_a){switch(_a){case "selectBizplcCode":var _b="/hsco/hpm/usm/HPM010203/selectBizplcList.do";var _c="input1=ds_cond";var _d="ds_bizplcList=output1";break;case "selectRentFcltsManageList":var _b="hsco/hpm/ctm/HPM060101/selectRentFcltsManageList.do";var _c="input1=ds_cond";var _d="ds_rentFcltsManageList=output1";break;case "selectAcmsltSttusList":var _b="hsco/hpm/ctm/HPM070103/selectAcmsltSttusList.do";var _c="input1=ds_cond";var _d="ds_acmsltSttusList=output1";break;case "selectAcmsltSttusListT02":var _b="hsco/hpm/ctm/HPM070103/selectAcmsltSttusListT02.do";var _c="input1=ds_cond2";var _d="ds_fcltsList=output1 ds_acmsltSttusList2=output2";break;case "selectFcltsSe":var _b="hsco/hpm/ctm/HPM070103/selectFcltsSe.do";var _c="input1=ds_cond2";var _d="ds_fcltsSe=output1";break;}Ex.core.tran(this,_a,_b,_c,_d);};this.fn_callBack=function(_a,_b,_c){if(_b!='0'){this.gfn_callback_message(_a,_b,_c);}if(_b=='0'){switch(_a){case "selectBizplcCode":this.ds_bizplcList2.copyData(this.ds_bizplcList);if(this.ds_bizplcList.rowcount<1){this.ds_bizplcList.insertRow(0);this.ds_bizplcList.setColumn(0,"BIZPLC_CODE","9999");this.ds_bizplcList.setColumn(0,"BIZPLC_NM","해당없음");}if(this.ds_bizplcList2.rowcount<1){this.ds_bizplcList2.insertRow(0);this.ds_bizplcList2.setColumn(0,"BIZPLC_CODE","9999");this.ds_bizplcList2.setColumn(0,"BIZPLC_NM","해당없음");}break;case "selectRentFcltsManageList":var _d=this.ds_rentFcltsManageList.rowcount;if(_d>0){var _e=this.ds_rentFcltsManageList.getColumn(0,"FCLTS_SN");this.ds_cond.setColumn(0,"FCLTS_SN",_e);this.fn_transaction("selectAcmsltSttusList");}break;case "selectAcmsltSttusList":break;case "selectAcmsltSttusListT02":this.fn_dynamicGrid();break;case "selectFcltsSe":var _f=this.ds_fcltsSe.rowcount;if(_f>0){this.ds_fcltsSe.insertRow(0);this.ds_fcltsSe.setColumn(0,"FCLTS_SE","");this.ds_fcltsSe.setColumn(0,"FCLTS_SE_NM","전체");this.ds_cond2.setColumn(0,"FCLTS_SE","");this.fn_transaction("selectAcmsltSttusListT02");}break;}}};this.ds_cond_oncolumnchanged=function(_a,_b){if(_b.columnid=="DEPT_CODE"){this.tab.tabpage2.div_search.cmb_bizplcList.set_index(0);var _c=_b.newvalue;trace("deptCode ; "+_c);this.ds_bizplcList.set_filterstr("DEPT_CODE == '"+_c+"' || BIZPLC_CODE == '9999'");}else if(_b.columnid=="BIZPLC_CODE"){trace("???");this.fn_transaction("selectRentFcltsManageList");}};this.ds_cond2_oncolumnchanged=function(_a,_b){if(_b.columnid=="DEPT_CODE"){var _c=_b.newvalue;this.ds_bizplcList2.set_filterstr("DEPT_CODE == '"+_c+"' || BIZPLC_CODE == '9999'");var _d=this.ds_bizplcList2.getColumn(0,"BIZPLC_CODE");this.ds_cond2.setColumn(0,"BIZPLC_CODE",_d);}else if(_b.columnid=="BIZPLC_CODE"){this.fn_search();}};this.fn_dynamicGrid=function(){this.tab.tabpage2.grd_acmsltSttusList.set_enableredraw(false);for(var _f=this.tab.tabpage2.grd_acmsltSttusList.getCellCount("Head");_f>0;_f-- ){this.tab.tabpage2.grd_acmsltSttusList.deleteContentsCol(_f);}this.ds_acmsltSttusList2.set_keystring("MT_SUM");var _a=[["금액","이용자수"],["SETLE_AM_","USE_NMPR_"]];for(var _f=0;_f<this.ds_fcltsList.getRowCount();_f++ ){var _b=this.ds_fcltsList.getColumn(_f,"FCLTS_NM");var _c=this.ds_fcltsList.getColumn(_f,"FCLTS_SN");var _d=_b;for(var _g=0;_g<2;_g++ ){var _e=this.tab.tabpage2.grd_acmsltSttusList.appendContentsCol("body",true);this.tab.tabpage2.grd_acmsltSttusList.setCellProperty("Head",(_g+1)+_f,"text",_d);this.tab.tabpage2.grd_acmsltSttusList.setCellProperty("Head",((_g+1)+_f)+_e,"text",_a[0][_g]);if((_g+1)%2==0){this.tab.tabpage2.grd_acmsltSttusList.mergeContentsCell("Head",0,_e-1,0,_e,(_g+1)+_f,false);}this.tab.tabpage2.grd_acmsltSttusList.setCellProperty("Body",_e,"displaytype","number");this.tab.tabpage2.grd_acmsltSttusList.setCellProperty("Body",_e,"align","right middle");this.tab.tabpage2.grd_acmsltSttusList.setFormatColProperty(_e,"size",80);this.tab.tabpage2.grd_acmsltSttusList.setCellProperty("Body",_e,"text","bind:"+_a[1][_g]+_c);this.tab.tabpage2.grd_acmsltSttusList.setCellProperty("Body",_e,"background","expr:dataset.getRowType(currow) == Dataset.ROWTYPE_GROUP ? 'beige' : ''");this.tab.tabpage2.grd_acmsltSttusList.setCellProperty("Body",_e,"background2","expr:dataset.getRowType(currow) == Dataset.ROWTYPE_GROUP ? 'beige' : ''");this.tab.tabpage2.grd_acmsltSttusList.setCellProperty("Summ",_e,"displaytype","number");this.tab.tabpage2.grd_acmsltSttusList.setCellProperty("Summ",_e,"text","expr:dataset.getSum('"+_a[1][_g]+_c+"')");}}this.tab.tabpage2.grd_acmsltSttusList.set_enableredraw(true);};this.tab_onchanged=function(_a,_b){this.fn_search();};this.Button00_onclick=function(_a,_b){this.tab.tabpage2.div_search.cmb_bizplcList.set_index(0);};});this.on_initEvent=function(){this.ds_cond.addEventHandler("oncolumnchanged",this.ds_cond_oncolumnchanged,this);this.ds_rentFcltsManageList.addEventHandler("onrowposchanged",this.ds_rentFcltsManageList_onrowposchanged,this);this.ds_rentFcltsManageList.addEventHandler("oncolumnchanged",this.ds_rentFcltsManageList_oncolumnchanged,this);this.ds_setleSttusSe.addEventHandler("canrowposchange",this.ds_setleSttusSe_canrowposchange,this);this.ds_cond2.addEventHandler("oncolumnchanged",this.ds_cond2_oncolumnchanged,this);this.addEventHandler("oninit",this.HPM070103_oninit,this);this.addEventHandler("onload",this.HPM070103_onload,this);this.tab.addEventHandler("onchanged",this.tab_onchanged,this);};this.loadIncludeScript("HPM070103.xfdl");this.loadPreloadList();};})();