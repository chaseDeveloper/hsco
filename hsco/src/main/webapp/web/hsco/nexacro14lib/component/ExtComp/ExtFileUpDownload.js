if(!nexacro.ExtFileUploadChangeEventInfo){nexacro.ExtFileUploadChangeEventInfo=function(_a,_b){this.id=this.eventid=_b||"onchange";this.fromobject=this.fromreferenceobject=_a;this.index;this.files;};var _pEventInfo=nexacro._createPrototype(nexacro.Event,nexacro.ExtFileUploadChangeEventInfo);nexacro.ExtFileUploadChangeEventInfo.prototype=_pEventInfo;_pEventInfo._type_name="ExtFileUploadChangeEventInfo";delete _pEventInfo;nexacro.ExtFileLoadEventInfo=function(_a,_b){this.id=this.eventid=_b||"onsuccess";this.fromobject=this.fromreferenceobject=_a;this.datasets;this.type;this.errorcode;this.errormsg;this.url;};var _pExtFileLoadEventInfo=nexacro._createPrototype(nexacro.Event);nexacro.ExtFileLoadEventInfo.prototype=_pExtFileLoadEventInfo;_pExtFileLoadEventInfo._type="ExtFileLoadEventInfo";_pExtFileLoadEventInfo._type_name="ExtFileLoadEventInfo";delete _pExtFileLoadEventInfo;nexacro.ExtFileErrorEventInfo=function(_a,_b){this.id=this.eventid=_b||"onerror";this.fromobject=this.fromreferenceobject=_a;this.errorcode;this.errormsg;this.errorobj;this.errortype;this.statuscode;this.requesturi;this.locationuri;this.index= -1;};var _pExtFileErrorEventInfo=nexacro._createPrototype(nexacro.Event);nexacro.ExtFileErrorEventInfo.prototype=_pExtFileErrorEventInfo;_pExtFileErrorEventInfo._type="ExtFileErrorEventInfo";_pExtFileErrorEventInfo._type_name="ExtFileErrorEventInfo";delete _pExtFileErrorEventInfo;}if(nexacro.Browser=="Runtime"){nexacro.ExtFileTransaction=function(_a,_b,_c,_d,_e,_f){nexacro.CommunicationItem.call(this,_a,_b,false);this.context=_c;this.inputDatasets=this._parseDSParam(_d);this.outputDatasets=this._parseDSParam(_e);this.datatype=(!_f?0:_f);this._sendData=this._serializeData();this._usewaitcursor=application.usewaitcursor;this._remain_data=null;if(nexacro.Browser=="IE"&&nexacro.BrowserVersion<9){this._check_responseXML=true;}else{this._check_responseXML=false;}};var _pFileTransaction=nexacro._createPrototype(nexacro.CommunicationItem);nexacro.ExtFileTransaction.prototype=_pFileTransaction;_pFileTransaction._type="ExtFileTransaction";_pFileTransaction._type_name="ExtFileTransaction";_pFileTransaction._serializeData=function(){if(this.datatype==1){return this.__serializeBIN();}else if(this.datatype==2){return this.__serializeSSV();}else{return this.__serializeXML();}};_pFileTransaction._TABS=["","\t","\t\t","\t\t\t","\t\t\t\t","\t\t\t\t\t","\t\t\t\t\t\t"];_pFileTransaction._writeData=function(_a,_b,_c){_a[_a.length]=this._TABS[_c]+_b;};_pFileTransaction.__serializeXML=function(){return "";};_pFileTransaction.__serializeSSV=function(){var _a=String.fromCharCode(30);var _b=String.fromCharCode(31);var _c=0;var _d=[];var _e=application._cookie_variables;var _f,_g,_h;var _i=0;_d.push("SSV:utf-8"+_a);var _j=0;var _k=0;var _l=this.parameters;if(_l){_j=_l.length;}if(_e){_k=_e.length;}if(_k>0){for(i=0;i<_k;i++ ){_f=_e[i];_g=application[_f];if(_g&&_g.length){_g=_g;_d.push(_f+"="+_g+_a);}else{_d.push(_f+"="+_a);}}}if(_j>0){for(i=0;i<_j;i++ ){_f=_l[i].lval;_g=_l[i].rval;if(_g){_g=_g;_d.push(_f+"="+_g+_a);}else{_d.push(_f+"="+_a);}}}var _m=this.inputDatasets;if(_m&&_m.length){var _n=_m.length;for(var _p=0;_p<_n;_p++ ){var _f=_m[_p].rval;var _h=this.context._getDatasetObject(_f);if(_h){_d.push(_h.saveSSV(_m[_p].lval,_m[_p].saveType));}}}var _o=_d.join("");return _o;};_pFileTransaction.__serializeBIN=function(){var _a=this.__serializeSSV();if(_a){return nexacro._convertStreamSSVToBIN(_a);}return "";};_pFileTransaction.on_start=function(){if(this._usewaitcursor){this._showWaitCursor();}};_pFileTransaction.on_load_file=function(_a,_b,_c,_d){if(this._usewaitcursor){this._hideWaitCursor();}if(!_a){return [ -1,"Stream Data is null!"];}_a=_a.trim();var _e=_a.substring(0,3);var _f,_g,_h,_i,_j=0,_k="";if(_e=="SSV"){_f=this.__deserializeSSV(_a);_j=_f[0];_k=_f[1];}else{_f=this._deserializeXMLFromStr(_a);_j=_f[0];_k=_f[1];}delete nexacro._CommunicationManager[this.path];if(this._protocol<0){_a=this.on_decrypt(_a);}this._addCookieToGlobalVariable(_b);var _l=this.callbackList;var _m=_l.length;if(_m>0){for(var _g=0;_g<_m;_g++ ){var _n=_l[_g];var _o=_n.target;if(_o._is_alive!=false){_n.callback.call(_o,this.type,_j,_k,this.path);}}_l.splice(0,_m);}};_pFileTransaction.on_loadframe_file=function(_a,_b){if(this._usewaitcursor){this._hideWaitCursor();}var _c,_d,_e,_f,_g,_h,_i,_j,_k=0,_l="";_j=this.context;_f=nexacro._getXMLDocument(_a);_g=nexacro._getCommDataFromDom(_f,this);_h=_g[0];for(_c=0;_c<_h.length;_c++ ){_d=_h[_c]["id"];if(_d&&_d.length){_e=_h[_c]["val"];if(_d=="ErrorCode"){_k=parseInt(_e,10);if(!isFinite(_k)){_k= -1;}}else if(_d=="ErrorMsg"){_l=_e;}}}delete nexacro._CommunicationManager[this.path];var _m=this.callbackList;var _n=_m.length;if(_n>0){for(var _c=0;_c<_n;_c++ ){var _o=_m[_c];var _b=_o.target;if(_b._is_alive!=false){_o.callback.call(_b,this.type,_k,_l,this.path);}}_m.splice(0,_n);}};_pFileTransaction.on_down_file=function(_a,_b,_c,_d,_e){var _f,_g=this._downfilename;if(nexacro._ExtFileUpDownloadSupport.Download){_f=this._createObjectURL(_a);this._downfileblob=_f;var _h=nexacro._IframeManager;var _i=_h.search_form(_b);if(_i&&_i.node){var _j=_i.node;var _k=nexacro._managerFrameDoc;var _l=_k.createElement("a");_l.href=_f;_l.download=_g;_l.style.display="none";nexacro.__appendDOMNode(_j,_l);_l.click();nexacro.__removeDOMNode(_j,_l);_l=null;}}else if(nexacro._ExtFileUpDownloadSupport.MSSave){window.navigator.msSaveOrOpenBlob(_a,_g);}else{nexacro._download(this.path);}delete nexacro._CommunicationManager[this.path];if(this._protocol<0){_a=this.on_decrypt(_a);}this._addCookieToGlobalVariable(_c);var _m=this.callbackList;var _n=_m.length;if(_n>0){for(var _q=0;_q<_n;_q++ ){var _o=_m[_q];var _p=_o.target;if(_p._is_alive!=false){_o.callback.call(_p,this.type,_d,_e,this.path);}}_m.splice(0,_n);}};_pFileTransaction.on_downend_file=function(){var _a=this._downfileblob,_b=this;if(nexacro._ExtFileUpDownloadSupport.Download&&_a){setTimeout(function(){_b._revokeObjectURL(_a);},250);}if(this._usewaitcursor){this._hideWaitCursor();}this._downfileblob=null;this._downfilename=null;};_pFileTransaction._createObjectURL=function(_a){if(window.webkitURL){return window.webkitURL.createObjectURL(_a);}else if(window.URL&&window.URL.createObjectURL){return window.URL.createObjectURL(_a);}else{return null;}};_pFileTransaction._revokeObjectURL=function(_a){if(window.webkitURL){window.webkitURL.revokeObjectURL(_a);}else if(window.URL&&window.URL.revokeObjectURL){window.URL.revokeObjectURL(_a);}};_pFileTransaction.__deserializeSSV=function(_a){var _b=String.fromCharCode(30);var _c=String.fromCharCode(31);var _d=0;var _e="SUCCESS";if(!_a){return [ -1,"Stream Data is null!"];}var _f=this.context;var _g=this.parent;var _h=_a.split(_b);var _i=_h.length;var _j=0;_j++ ;var _k;for(;_j<_i;_j++ ){_k=_h[_j];if(_k.substring(0,7)!="Dataset"){var _l=_k.split(_c);var _m=_l.length;for(var _aa=0;_aa<_m;_aa++ ){var _n=_l[_aa];var _o=_n;var _p=undefined;var _q=_n.indexOf("=");if(_q>=0){_o=_n.substring(0,_q);_p=_n.substring(_q+1);}if(_o){var _r=_o;var _q=_o.indexOf(":");if(_q>=0){_r=_o.substring(0,_q);}if(_r=="ErrorCode"){_d=parseInt(_p)|0;if(isFinite(_d)==false){_d= -1;}}else if(_r=="ErrorMsg"){_e=_p;}else if(_r in _f){if(typeof (_f[_r])!="object"){_f[_r]=_p;}}else{if(application._existVariable(_r)){application[_r]=_p;}}}}}else{break;}}if(_d<= -1){return [_d,_e];}var _s=this.inputDatasets;if(_s&&_s.length){var _t=_s.length;for(var _aa=0;_aa<_t;_aa++ ){var _u=_s[_aa];var _v=_f._getDatasetObject(_u.rval);if(_v){_v.applyChange();}}}var _w={};var _x=this.outputDatasets;if(_x&&_x.length){var _y=_x.length;for(var _aa=0;_aa<_y;_aa++ ){var _u=_x[_aa];if(_w[_u.rval]==undefined){_w[_u.rval]=_u.lval;}}}function find_next_dataset_loop(){if(_j<_i){_k=_h[_j];if(_k.substring(0,7)=="Dataset"){return true;}_j++ ;return false;}return true;}while(_j<_i){while(true){if(find_next_dataset_loop()){break;}if(find_next_dataset_loop()){break;}if(find_next_dataset_loop()){break;}if(find_next_dataset_loop()){break;}if(find_next_dataset_loop()){break;}if(find_next_dataset_loop()){break;}if(find_next_dataset_loop()){break;}if(find_next_dataset_loop()){break;}if(find_next_dataset_loop()){break;}if(find_next_dataset_loop()){break;}}if(_j<_i){var _q=_k.indexOf(":");if(_q>=0){var _z=_k.substring(_q+1);if(_z&&_z.length){var _v=this.getResponseDataset(_f);if(_v){_v.rowposition= -1;_j=_v.loadFromSSVArray(_h,_i,_j,true);}else{_j++ ;}}else{_j++ ;}}else{_j++ ;}}}return [_d,_e];};_pFileTransaction.getResponseDataset=function(_a){var _b=_a["_extFileDsPool"];var _c=_b.length;var _d;var _e;var _f;var _g="_ds_extResponse_";for(var _i=0;_i<_c;_i++ ){_e=_b[_i];_f=_e["_used"];if(!_f){_d=_e;_d["_used"]=true;break;}}if(!_d){var _h=Eco.getSequenceId(_a,_g);_d=new Dataset(_h);_d["_used"]=true;_b.push(_d);}return _d;};_pFileTransaction.releaseResponseDataset=function(_a){var _b=_a["_extFileDsPool"];var _c=_b.length;var _d;var _e;for(var _f=0;_f<_c;_f++ ){_d=_b[_f];_d.clear();_d["_used"]=false;}};_pFileTransaction._deserializeXMLFromStr=function(_a){var _b=0;var _c="SUCCESS";if(!_a){return [ -1,"Stream Data is null!"];}var _d=this.context;var _e=_a.indexOf("<Dataset ");var _f;if(_e> -1){_f=_a.substring(0,_e);}else{_f=_a;}var _g=0;var _h=nexacro._getXMLTagData(_f,_g,"<Parameters>","</Parameters>");if(_h){var _i=_h[0];_g=_h[3];var _j=0;var _k=nexacro._getXMLTagData2(_i,_j,"<Parameter ","</Parameter>");while(_k){_j=_k[3];var _l=_k[1];var _m=nexacro._getXMLAttributeID(_l);if(_m&&_m.length){var _n=_k[0];if(_m=="ErrorCode"){_b=parseInt(_n)|0;if(isFinite(_b)==false){_b= -1;}}else if(_m=="ErrorMsg"){_c=_n;}else{this._setParamter(_m,_n);}}_k=nexacro._getXMLTagData2(_i,_j,"<Parameter ","</Parameter>");}}if(_b<= -1){return [_b,_c];}var _o={};var _p=this.outputDatasets;if(_p&&_p.length){var _q=_p.length;for(var _w=0;_w<_q;_w++ ){var _r=_p[_w];if(_o[_r.rval]==undefined){_o[_r.rval]=_r.lval;}}}if(_e>= -1){var _s=nexacro._getXMLTagData2(_a,_e,"<Dataset ","</Dataset>");while(_s){_e=_s[3];var _l=_s[1];var _t=nexacro._getXMLAttributeID(_l);if(_t&&_t.length){var _u=_o[_t];var _v=_d._getDatasetObject(_u);if(_v){_v.loadFromXMLStr(_s[0]);}}_s=nexacro._getXMLTagData2(_a,_e,"<Dataset ","</Dataset>");}}_o=null;return [_b,_c];};_pFileTransaction._parseVarParam=function(_a){if(!_a){return;}_a=_a.replace(/^\s*|\s*$/g,'');if(_a.length==0){return undefined;}var _b=[];var _c=/([a-zA-Z_][a-zA-Z0-9_]*)\s*="([^"]*)"|([a-zA-Z_][a-zA-Z0-9_]*)\s*='([^']*)'|([a-zA-Z_][a-zA-Z0-9_]*)\s*=([^ ]*)/g;var _d=_a.match(_c);var _e=_d.length;for(var _l=0;_l<_e;_l++ ){var _f=_d[_l].split("=");var _g=_f.length;var _h=_f[0].trim();var _i=_f[1].trim();for(var _m=2;_m<_g;_m++ ){_i=_i+"="+_f[_m].trim();}var _j="N";var _g=_i.length;if(_g>0){if((_i.charAt(0)=="\""&&_i.charAt(_g-1)=="\"")||(_i.charAt(0)=="\'"&&_i.charAt(_g-1)=="\'")){_i=_i.substring(1,_g-1);}}var _k={lval:_h,rval:_i,saveType:_j};_b.push(_k);}return _b;};_pFileTransaction._parseDSParam=function(_a){if(!_a){return undefined;}var _b=[];var _c=/([a-zA-Z_][a-zA-Z0-9_]*)\s*=\s*([a-zA-Z_][a-zA-Z0-9_]*(?:\:[aAuUnN])?)/g;var _d=_a.match(_c);if(!_d||_d.length==0){return undefined;}var _e=_d.length;var _f=0;for(var _p=0;_p<_e;_p++ ){var _g=_d[_p].split("=");var _h=_g[0].trim();var _i=_g[1].trim();var _j=false;for(var _q=0;_q<_p;_q++ ){var _k=_d[_q].split("=");var _l=_k[0].trim();if(_h==_l){_j=true;}}if(_j){_p++ ;return false;}var _m="N";var _n=_i.indexOf(":");if(_n> -1){_m=_i.substring(_n+1);_i=_i.substring(0,_n);}var _o={lval:_h,rval:_i,saveType:_m};_b.push(_o);}return _b;};_pFileTransaction._setParamter=function(_a,_b){var _c=this.context;if(_a in _c){if(typeof (_c[_a])!="object"){_c[_a]=_b;}}else{if(application._existVariable(_a)){application[_a]=_b;}}};_pFileTransaction._getDataset=function(_a){var _b=this.context;var _c=this.outputDatasets;if(_c&&_c.length){var _d=_c.length;for(var _f=0;_f<_d;_f++ ){var _e=_c[_f];if(_e.rval==_a){return _b._getDatasetObject(_e.lval);}}}};_pFileTransaction._showWaitCursor=function(){return;var _a=this.context;if(_a){_a._waitCursor(true,_a);}};_pFileTransaction._hideWaitCursor=function(){return;var _a=this.context;if(_a){_a._waitCursor(false,_a);}};delete _pFileTransaction;nexacro._remove_hidden_item=function(_a,_b,_c,_d){nexacro.__removeFileUploadItem(_a,_b,_c,_d);};nexacro._ExtFileUpDownloadSupport={FileAPI:false,XHR2:false,MultipleInput:true,Download:false,MSSave:false,Draggable:false,SelectorsAPI:false};nexacro.ExtFileUploadCtrl=function(_a,_b,_c,_d,_e,_f,_g,_h,_i){nexacro.FileUpload.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i);this._is_subcontrol=true;};var _pFileUploadCtrl=nexacro._createPrototype(nexacro.FileUpload,nexacro.ExtFileUploadCtrl);nexacro.ExtFileUploadCtrl.prototype=_pFileUploadCtrl;nexacro._setForControlStyleFinder(_pFileUploadCtrl);delete _pFileUploadCtrl;nexacro.ExtFileItem=function(_a,_b,_c,_d,_e,_f,_g,_h,_i){nexacro.Component.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i);this.fileitemedit=null;this.fileitembutton=null;this.selected=false;this.itemheight=18;this.buttontext="find";this.buttonsize=18;this.name="";this.oldvalue="";this.value="";this.index=0;this.components=[];this._accessibility_role="none";this._event_list={"onfindclick":1,"onitemclick":1};};var _pFileItem=nexacro._createPrototype(nexacro.Component,nexacro.ExtFileItem);nexacro.ExtFileItem.prototype=_pFileItem;_pFileItem._type_name="FileItem";_pFileItem.on_apply_style_itemheight=function(){this.on_change_containerRect(this._client_width,this._client_height);};_pFileItem.on_apply_style_buttonsize=function(){this.on_change_containerRect(this._client_width,this._client_height);};_pFileItem.on_apply_style_buttontext=function(_a){if(this.fileitembutton){this.fileitembutton.set_text(_a);}};_pFileItem.on_create_contents=function(){var _a=this.getElement();if(_a){this.fileitemedit=new nexacro.ExtFileItemEditCtrl("fileitemedit","absolute",0,0,0,0,null,null,this);this.fileitembutton=new nexacro.ExtFileItemButtonCtrl("fileitembutton","absolute",0,0,0,0,null,null,this);this.fileitemedit.set_readonly("true");this.fileitemedit.style.set_align(this.parent.on_find_CurrentStyle_align());this.fileitembutton.set_text("find");this.fileitemedit.createComponent();this.fileitembutton.createComponent();}};_pFileItem.on_created_contents=function(){var _a=this.parent;nexacro._append_hidden_item(_a._unique_id,this.name,this.on_fileinput_onchange,this,_a._handle,this.parent._multiselect);this.fileitemedit.on_created();this.fileitembutton.on_created();this.fileitemedit._setEventHandler("oneditclick",this.on_notify_fileitem_oneditclick,this);this.fileitembutton._setEventHandler("onclick",this.on_notify_fileitem_onfindclick,this);this.fileitemedit._setEventHandler("onlbuttondown",this.on_notify_fileitem_oneditlbuttondown,this);this.fileitembutton._setEventHandler("onlbuttondown",this.on_notify_fileitem_onfindlbuttondown,this);if(nexacro._enableaccessibility){this.components.push(this.fileitemedit);this.components.push(this.fileitembutton);}this._setAccessibilityActiveDescendant(this.fileitembutton);};_pFileItem.on_destroy_contents=function(){if(this.fileitemedit){this.parent.filepathedits.delete_item(this.id);this.fileitemedit.destroy();this.fileitemedit=null;}if(this.fileitembutton){this.parent.filefindbuttons.delete_item(this.id);this.fileitembutton.destroy();this.fileitembutton=null;}var _a=this.parent;nexacro._remove_hidden_item(_a._unique_id,this.name,_a._handle);};_pFileItem.on_change_containerRect=function(_a,_b){var _c=parseInt(this.parent.on_find_CurrentStyle_buttonsize(this._pseudo),10);var _b=parseInt(this.parent.on_find_CurrentStyle_itemheight(this._pseudo),10);var _d=parseInt(this.index,10);var _e=this._client_left;var _f=this._client_top;var _g=this._client_width-_c;var _h=_b;var _i=_e+_g;var _j=_f;var _k=_c;var _l=_h;if(this.fileitemedit){this.fileitemedit.move(_e,_f,_g,_h,null,null);}if(this.fileitembutton){this.fileitembutton.move(_i,_j,_k,_l,null,null);}};_pFileItem.set_value=function(_a){if(_a!=this.value){this.oldvalue=this.value;this.value=_a;this.on_apply_value(_a);this.parent.set_index(this.index);this.parent._setText(_a);this.parent._setValue(_a);return true;}return false;};_pFileItem.on_apply_value=function(_a){if(this.fileitemedit){this.fileitemedit.set_value(_a);}};_pFileItem.set_name=function(_a){if(_a!=this.name){this.name=_a;}};_pFileItem.set_selected=function(_a){if(_a!=this.selected){this.selected=_a;this.on_apply_selected(_a);}};_pFileItem.on_apply_selected=function(_a){if(_a){this._stat_change("select","selected");}else{this._stat_change("notselect","normal");}};_pFileItem.on_notify_fileitem_oneditclick=function(_a,_b){this.parent.set_index(this.index);if(this.onitemclick&&this.onitemclick._has_handlers){this.onitemclick._fireEvent(this,_b);}return false;};_pFileItem.on_notify_fileitem_onfindclick=function(_a,_b){this.parent.set_index(this.index);if(this.onfindclick&&this.onfindclick._has_handlers){this.onfindclick._fireEvent(this,_b);}return false;};_pFileItem.on_notify_fileitem_oneditlbuttondown=function(_a,_b){this._accessibility_find_focus_flag(true,false);this.parent.set_index(this.index);};_pFileItem.on_notify_fileitem_onfindlbuttondown=function(_a,_b){this._accessibility_find_focus_flag(false,true);this.parent.set_index(this.index);};_pFileItem._accessibility_find_focus_flag=function(_a,_b){if(nexacro._enableaccessibility){this.parent._editFlag=_a;this.parent._buttonFlag=_b;}};_pFileItem.on_fileinput_onchange=function(_a){if(this.set_value(_a)){this.parent.on_fire_onitemchanged(this,this.index,this.oldvalue,this.value);}};_pFileItem._isPopupFrame=function(){return this.parent._onPopupWin;};delete _pFileItem;nexacro.ExtFileItemCtrl=function(_a,_b,_c,_d,_e,_f,_g,_h,_i){nexacro.ExtFileItem.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i);this._is_subcontrol=true;};var _pFileItemCtrl=nexacro._createPrototype(nexacro.ExtFileItem,nexacro.ExtFileItemCtrl);nexacro.ExtFileItemCtrl.prototype=_pFileItemCtrl;_pFileItemCtrl._type_name="FileItemControl";delete _pFileItemCtrl;nexacro.ExtFileItemEditCtrl=function(_a,_b,_c,_d,_e,_f,_g,_h,_i){nexacro.EditCtrl.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i);this._edit=null;};var _pFileItemEditCtrl=nexacro._createPrototype(nexacro.EditCtrl,nexacro.ExtFileItemEditCtrl);nexacro.ExtFileItemEditCtrl.prototype=_pFileItemEditCtrl;_pFileItemEditCtrl.on_find_CurrentStyle_background=function(_a){return this.parent.parent._find_pseudo_obj("editbackground",_a,"background");};_pFileItemEditCtrl.on_find_CurrentStyle_gradation=function(_a){return this.parent.parent._find_pseudo_obj("editgradation",_a,"gradation");};_pFileItemEditCtrl.on_find_CurrentStyle_border=function(_a){return this.parent.parent._find_pseudo_obj("editborder",_a,"border");};_pFileItemEditCtrl.on_find_CurrentStyle_bordertype=function(_a){return this.parent.parent._find_pseudo_obj("editbordertype",_a,"bordertype");};_pFileItemEditCtrl.on_find_CurrentStyle_padding=function(_a){var _b=this.parent.parent._find_pseudo_obj("editpadding",_a,"padding");return (_b)?_b:this._defaultPadding;};_pFileItemEditCtrl.on_find_CurrentStyle_margin=function(_a){var _b=this.parent.parent._find_pseudo_obj("editmargin",_a,"margin");return (_b)?_b:this._defaultMargin;};_pFileItemEditCtrl.on_find_CurrentStyle_font=function(_a){var _b=this.parent.parent._find_pseudo_obj("editfont",_a,"font")||this._find_inherit_pseudo_obj("font",_a,"font")||nexacro.Component._default_font;return _b;};_pFileItemEditCtrl.on_find_CurrentStyle_color=function(_a){var _b=this.parent.parent._find_pseudo_obj("editcolor",_a,"color")||this._find_inherit_pseudo_obj("color",_a,"color")||nexacro.Component._default_color;return _b;};_pFileItemEditCtrl.on_find_CurrentStyle_accessibility=function(_a){return this.parent.parent.on_find_CurrentStyle_itemaccessibility(_a);};_pFileItemEditCtrl.on_apply_style_accessibility=function(_a){var _b=this._control_element;if(_b&&_a){_b.setAccessibility(_a);}};delete _pFileItemEditCtrl;nexacro.ExtFileItemButtonCtrl=function(_a,_b,_c,_d,_e,_f,_g,_h,_i){nexacro.Button.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i);this._is_subcontrol=true;this._button=null;};var _pFileItemButtonCtrl=nexacro._createPrototype(nexacro.Button,nexacro.ExtFileItemButtonCtrl);nexacro.ExtFileItemButtonCtrl.prototype=_pFileItemButtonCtrl;_pFileItemButtonCtrl.on_find_CurrentStyle_background=function(_a){return this.parent.parent._find_pseudo_obj("buttonbackground",_a,"background");};_pFileItemButtonCtrl.on_find_CurrentStyle_gradation=function(_a){return this.parent.parent._find_pseudo_obj("buttongradation",_a,"gradation");};_pFileItemButtonCtrl.on_find_CurrentStyle_border=function(_a){return this.parent.parent._find_pseudo_obj("buttonborder",_a,"border");};_pFileItemButtonCtrl.on_find_CurrentStyle_bordertype=function(_a){return this.parent.parent._find_pseudo_obj("buttonbordertype",_a,"bordertype");};_pFileItemButtonCtrl.on_find_CurrentStyle_padding=function(_a){var _b=this.parent.parent._find_pseudo_obj("buttonpadding",_a,"padding");return (_b)?_b:this._defaultPadding;};_pFileItemButtonCtrl.on_find_CurrentStyle_margin=function(_a){var _b=this.parent.parent._find_pseudo_obj("buttonmargin",_a,"margin");return (_b)?_b:this._defaultMargin;};_pFileItemButtonCtrl.on_find_CurrentStyle_font=function(_a){var _b=this.parent.parent._find_pseudo_obj("buttonfont",_a,"font")||this._find_inherit_pseudo_obj("font",_a,"font")||nexacro.Component._default_font;return _b;};_pFileItemButtonCtrl.on_find_CurrentStyle_color=function(_a){var _b=this.parent.parent._find_pseudo_obj("buttoncolor",_a,"color")||this._find_inherit_pseudo_obj("color",_a,"color")||nexacro.Component._default_color;return _b;};_pFileItemButtonCtrl.on_fire_sys_onkeyup=function(_a,_b,_c,_d,_e,_f){var _g=nexacro.Component.prototype.on_fire_onkeyup.call(this,_a,_b,_c,_d,_e,_f);if(_a==13||_a==32){this.click();}return _g;};delete _pFileItemButtonCtrl;if(!nexacro.ExtFileUpload){nexacro.ExtFileUpload=function(_a,_b){if(arguments.length==9){_b=arguments[8];}var _c="absolute";nexacro.Component.call(this,_a,_c,0,0,0,0,null,null,_b);this.scrollbars="autoboth";this.filecolumn="";this.innerdataset=null;this._innerdataset=null;this.text="";this.index= -1;this.async=false;this.retry=3;this.timeout=30;this.itemheight=18;this.itemcount=1;this.uploadurl="";this.multiselect=false;this._multiselect=false;this.support={};Eco.object.copyProperties(this.support,nexacro._ExtFileUpDownloadSupport);this._autoDeleteItem=true;this._is_scrollable=true;this._scrollbars=3;this._items=[];this._handle=null;this._last_id= -1;this._editFlag=null;this._buttonFlag=true;this._set_focus_dir= -1;this._want_tab=false;this.filepathedits=new nexacro.Collection();this.filefindbuttons=new nexacro.Collection();this._onPopupWin=false;this._accessibility_role="fileupload";this._event_list={"onclick":1,"ondblclick":1,"onkeypress":1,"onkeydown":1,"onkeyup":1,"onkillfocus":1,"onsetfocus":1,"ondrag":1,"ondrop":1,"ondragenter":1,"ondragleave":1,"ondragmove":1,"onlbuttondown":1,"onlbuttonup":1,"onrbuttondown":1,"onrbuttonup":1,"onmousedown":1,"onmouseup":1,"onmouseenter":1,"onmouseleave":1,"onmousemove":1,"onmousewheel":1,"onmove":1,"onsize":1,"onsuccess":1,"onerror":1,"onappenditem":1,"ondeleteitem":1,"onitemclick":1,"onfindclick":1,"onitemchanged":1,"ontouchstart":1,"ontouchmove":1,"ontouchend":1,"onpinchstart":1,"onpinch":1,"onpinchend":1,"onflingstart":1,"onfling":1,"onflingend":1,"onlongpress":1,"onslidestart":1,"onslide":1,"onslideend":1};};var _pFileUpload=nexacro._createPrototype(nexacro.Component,nexacro.ExtFileUpload);nexacro.ExtFileUpload.prototype=_pFileUpload;_pFileUpload._type_name="ExtFileUpload";_pFileUpload._defaultButtontext=nexacro._getCachedStyleObj("buttontext","find");_pFileUpload._defaultButtonsize=nexacro._getCachedStyleObj("buttonsize","18");_pFileUpload._defaultItemheight=nexacro._getCachedStyleObj("itemheight","18");_pFileUpload._changeFiles=function(){};_pFileUpload.fileIdMap={};_pFileUpload.fileIndexMap={};_pFileUpload.addEventHandler=function(_a,_b,_c){if(_a=="onchange"){_a="onitemchanged";}if(this._is_loading){if(!this._loading_event_list){this._loading_event_list=[];}this._loading_event_list.push({id:_a,func:_b,target:_c});}var _d=this[_a];var _e= -1;if(_d){if(_c){_e=_d._addHandler(_c,_b,true);}else{_e=_d._addHandler(this,_b,true);}}else if(_a in this._event_list){_d=new nexacro.EventListener(_a);this[_a]=_d;if(this._created_event_list){this._created_event_list.push(_a);}else{this._created_event_list=[];this._created_event_list.push(_a);}if(_c){_e=_d._addHandler(_c,_b,true);}else{_e=_d._addHandler(this,_b,true);}}return _e;};_pFileUpload.setResponseZone=function(_a,_b,_c){};_pFileUpload.getAddedFileLength=function(_a){return this.getItemCount(_a);};_pFileUpload.getAddedFile=function(_a){};_pFileUpload.addFiles=function(){var _a=this;var _b=_a.getItemCount()-1;if((_b<0)||(_a.hasValue(_b))){_a.appendItem();_b=_a.getItemCount()-1;}var _c=_a.filefindbuttons;var _d=_c.get_id(_b);var _e=_c.get_item(_d);_e.click();};_pFileUpload.setFileInfo=function(_a,_b){var _c=_b.length;var _d=(function(){var _m=0;var _n=0;return {deleteFile:function(){_n-=1;},updateItemIndex:function(_o){if(_m>_o){_m-=1;}},getItemIndex:function(){return _m;},getfileCount:function(){return _n;},setConfig:function(_a,_c){_m=_a;_n=_c;}};})();_d.setConfig(_a,_c);var _e=[];for(var _m=0;_m<_c;_m++ ){var _f=this.getSingleFileInfo(_m);var _g=_b[_m];var _h=_g.name;var _i=_g.id;this.fileIdMap[_i]={fileInfo:_d,order:_f};_e.push(_f);}var _j=this.fileIndexMap;var _k="key_"+_a;var _l={fileInfo:_d,seqList:_e};_j[_k]=_l;};_pFileUpload.getSingleFileInfo=function(_a){var _b=(function(){var _c= -1;return {updateFileSeq:function(_d){if(_c>_d){_c-=1;}},getFileSeq:function(){return _c;},setFileSeq:function(_a){_c=_a;}};})();_b.setFileSeq(_a);return _b;};_pFileUpload.removeFile=function(_a){var _b=this.fileIdMap[_a];var _c=this.fileIndexMap;var _d=_b.fileInfo;var _e=_d.getItemIndex();var _f=_d.getfileCount();if(_f==1){this.deleteItem(_e);delete _c["key_"+_e];var _g=_e+1;var _h="key_"+_g;var _i=0;while(_c[_h]){var _j=_c[_h].fileInfo.updateItemIndex(_e);_c["key_"+(_g-1)]=_j;delete _c[_h];_h="key_"+_g++ ;_i++ ;if(_i>20){break;}}}else if(_f>1){var _k=_b.order;var _l=_k.getFileSeq();var _m=this._items[_e];nexacro._remove_hidden_item(this._unique_id,_m.name,this._handle,_l);var _n=_c["key_"+_e].seqList;var _o=_n.length;for(var _p=0;_p<_o;_p++ ){if(_l==_p){continue;}_n[_p].updateFileSeq(_l);}_n.splice(_l,(_l+1));_d.deleteFile();}_b="";delete this.fileIdMap[_a];};_pFileUpload.removeAll=function(){var _a=this.getItemCount();var _b=_a-1;for(;_b> -1;_b-- ){this.deleteItem(_b);}this.fileIdMap={};this.fileIndexMap={};};_pFileUpload.setAutoDeleteItem=function(_a){this._autoDeleteItem=_a;};_pFileUpload.on_apply_custom_pseudo=function(_a){var _b=this.currentstyle;var _c=this.on_find_CurrentStyle_padding(_a);if(_c!=_b.padding){_b.padding=_c;this.on_apply_style_padding(_c);}var _d=this.on_find_CurrentStyle_align(_a);if(_d!=_b.align){_b.align=_d;this.on_apply_style_align(_d);}var _e=this.on_find_CurrentStyle_font(_a);if(_e!=_b.font){_b.font=_e;this.on_apply_style_font(_e);}var _f=this.on_find_CurrentStyle_color(_a);if(_f!=_b.color){_b.color=_f;this.on_apply_style_color(_f);}var _g=this.on_find_CurrentStyle_editbackground(_a);if(_g!=_b.editbackground){_b.editbackground=_g;}var _h=this.on_find_CurrentStyle_editborder(_a);if(_h!=_b.editborder){_b.editborder=_h;}var _i=this.on_find_CurrentStyle_editbordertype(_a);if(_i!=_b.editbordertype){_b.editbordertype=_i;}var _j=this.on_find_CurrentStyle_editgradation(_a);if(_j!=_b.editgradation){_b.editgradation=_j;}var _k=this.on_find_CurrentStyle_editpadding(_a);if(_k!=_b.editpadding){_b.editpadding=_k;}var _l=this.on_find_CurrentStyle_editmargin(_a);if(_l!=_b.editmargin){_b.editmargin=_l;}var _m=this.on_find_CurrentStyle_editfont(_a);if(_m!=_b.editfont){_b.editfont=_m;}var _n=this.on_find_CurrentStyle_editcolor(_a);if(_n!=_b.editcolor){_b.editcolor=_n;}var _o=this.on_find_CurrentStyle_buttonbackground(_a);if(_o!=_b.buttonbackground){_b.buttonbackground=_o;}var _p=this.on_find_CurrentStyle_buttonborder(_a);if(_p!=_b.buttonborder){_b.buttonborder=_p;}var _q=this.on_find_CurrentStyle_buttonbordertype(_a);if(_q!=_b.buttonbordertype){_b.buttonbordertype=_q;}var _r=this.on_find_CurrentStyle_buttongradation(_a);if(_r!=_b.buttongradation){_b.buttongradation=_r;}var _s=this.on_find_CurrentStyle_buttonpadding(_a);if(_s!=_b.buttonpadding){_b.buttonpadding=_s;}var _t=this.on_find_CurrentStyle_buttonmargin(_a);if(_t!=_b.buttonmargin){_b.buttonmargin=_t;}var _u=this.on_find_CurrentStyle_buttonfont(_a);if(_u!=_b.buttonfont){_b.buttonfont=_u;}var _v=this.on_find_CurrentStyle_buttoncolor(_a);if(_v!=_b.buttoncolor){_b.buttoncolor=_v;}var _w=this.on_find_CurrentStyle_buttonsize(_a);if(_w!=_b.buttonsize){_b.buttonsize=_w;this.on_apply_style_buttonsize(_w);}var _x=this.on_find_CurrentStyle_buttontext(_a);if(_x!=_b.buttontext){_b.buttontext=_x;this.on_apply_style_buttontext(_x);}var _y=this.on_find_CurrentStyle_itemheight(_a);if(_y!=_b.itemheight){_b.itemheight=_y;this.on_apply_style_itemheight(_y);}var _z=this.on_find_CurrentStyle_itemaccessibility(_a);if(_z!=_b.itemaccessibility){_b.itemaccessibility=_z;this.on_apply_style_itemaccessibility(_z);}};_pFileUpload.on_create_custom_style=function(){return new nexacro.FileUpload_Style(this);};_pFileUpload.on_create_custom_currentStyles=function(){return new nexacro.FileUpload_CurrentStyle();};_pFileUpload.on_find_CurrentStyle_editbackground=function(_a){var _b=this._find_pseudo_obj("editbackground",_a,"background");return _b;};_pFileUpload.on_find_CurrentStyle_editborder=function(_a){var _b=this._find_pseudo_obj("editborder",_a,"border");return _b;};_pFileUpload.on_find_CurrentStyle_editbordertype=function(_a){var _b=this._find_pseudo_obj("editbordertype",_a,"bordertype");return _b;};_pFileUpload.on_find_CurrentStyle_editgradation=function(_a){var _b=this._find_pseudo_obj("editgradation",_a,"gradation");return _b;};_pFileUpload.on_find_CurrentStyle_editpadding=function(_a){var _b=this._find_pseudo_obj("editpadding",_a,"padding");return _b;};_pFileUpload.on_find_CurrentStyle_editmargin=function(_a){var _b=this._find_pseudo_obj("editmargin",_a,"margin");return _b;};_pFileUpload.on_find_CurrentStyle_editfont=function(_a){var _b=this._find_pseudo_obj("editfont",_a,"font");return _b;};_pFileUpload.on_find_CurrentStyle_editcolor=function(_a){var _b=this._find_pseudo_obj("editcolor",_a,"color");return _b;};_pFileUpload.on_find_CurrentStyle_buttonbackground=function(_a){var _b=this._find_pseudo_obj("buttonbackground",_a,"background");return _b;};_pFileUpload.on_find_CurrentStyle_buttonborder=function(_a){var _b=this._find_pseudo_obj("buttonborder",_a,"border");return _b;};_pFileUpload.on_find_CurrentStyle_buttonbordertype=function(_a){var _b=this._find_pseudo_obj("buttonbordertype",_a,"bordertype");return _b;};_pFileUpload.on_find_CurrentStyle_buttongradation=function(_a){var _b=this._find_pseudo_obj("buttongradation",_a,"gradation");return _b;};_pFileUpload.on_find_CurrentStyle_buttonpadding=function(_a){var _b=this._find_pseudo_obj("buttonpadding",_a,"padding");return _b;};_pFileUpload.on_find_CurrentStyle_buttonmargin=function(_a){var _b=this._find_pseudo_obj("buttonmargin",_a,"margin");return _b;};_pFileUpload.on_find_CurrentStyle_buttonfont=function(_a){var _b=this._find_pseudo_obj("buttonfont",_a,"font");return _b;};_pFileUpload.on_find_CurrentStyle_buttoncolor=function(_a){var _b=this._find_pseudo_obj("buttoncolor",_a,"color");return _b;};_pFileUpload.on_find_CurrentStyle_buttonsize=function(_a){var _b=this._find_pseudo_obj("buttonsize",_a);return _b?_b:this._defaultButtonsize;};_pFileUpload.on_find_CurrentStyle_buttontext=function(_a){var _b=this._find_pseudo_obj("buttontext",_a);return _b?_b:this._defaultButtontext;};_pFileUpload.on_find_CurrentStyle_itemheight=function(_a){var _b=this._find_pseudo_obj("itemheight",_a);return _b?_b:this._defaultItemheight;};_pFileUpload.on_find_CurrentStyle_itemaccessibility=function(_a){return this._find_pseudo_obj("itemaccessibility",_a,"accessibility")||nexacro.Component._default_accessibility;};_pFileUpload.on_update_style_editbackground=function(){var _a=this.currentstyle.editbackground=this.on_find_CurrentStyle_editbackground(this._pseudo);this.on_apply_style_editbackground(_a);};_pFileUpload.on_update_style_editborder=function(){var _a=this.currentstyle.editborder=this.on_find_CurrentStyle_editborder(this._pseudo);this.on_apply_style_editborder(_a);};_pFileUpload.on_update_style_editbordertype=function(){var _a=this.currentstyle.editbordertype=this.on_find_CurrentStyle_editbordertype(this._pseudo);this.on_apply_style_editbordertype(_a);};_pFileUpload.on_update_style_editgradation=function(){var _a=this.currentstyle.editgradation=this.on_find_CurrentStyle_editgradation(this._pseudo);this.on_apply_style_editgradation(_a);};_pFileUpload.on_update_style_editpadding=function(){var _a=this.currentstyle.editpadding=this.on_find_CurrentStyle_editpadding(this._pseudo);this.on_apply_style_editpadding(_a);};_pFileUpload.on_update_style_editmargin=function(){var _a=this.currentstyle.editmargin=this.on_find_CurrentStyle_editmargin(this._pseudo);this.on_apply_style_editmargin(_a);};_pFileUpload.on_update_style_editfont=function(){var _a=this.currentstyle.editfont=this.on_find_CurrentStyle_editfont(this._pseudo);this.on_apply_style_editfont(_a);};_pFileUpload.on_update_style_editcolor=function(){var _a=this.currentstyle.editcolor=this.on_find_CurrentStyle_editcolor(this._pseudo);this.on_apply_style_editcolor(_a);};_pFileUpload.on_update_style_buttonbackground=function(){var _a=this.currentstyle.buttonbackground=this.on_find_CurrentStyle_buttonbackground(this._pseudo);this.on_apply_style_buttonbackground(_a);};_pFileUpload.on_update_style_buttonborder=function(){var _a=this.currentstyle.buttonborder=this.on_find_CurrentStyle_buttonborder(this._pseudo);this.on_apply_style_buttonborder(_a);};_pFileUpload.on_update_style_buttonbordertype=function(){var _a=this.currentstyle.buttonbordertype=this.on_find_CurrentStyle_buttonbordertype(this._pseudo);this.on_apply_style_buttonbordertype(_a);};_pFileUpload.on_update_style_buttongradation=function(){var _a=this.currentstyle.buttongradation=this.on_find_CurrentStyle_buttongradation(this._pseudo);this.on_apply_style_buttongradation(_a);};_pFileUpload.on_update_style_buttonpadding=function(){var _a=this.currentstyle.buttonpadding=this.on_find_CurrentStyle_buttonpadding(this._pseudo);this.on_apply_style_buttonpadding(_a);};_pFileUpload.on_update_style_buttonmargin=function(){var _a=this.currentstyle.buttonmargin=this.on_find_CurrentStyle_buttonmargin(this._pseudo);this.on_apply_style_buttonmargin(_a);};_pFileUpload.on_update_style_buttonfont=function(){var _a=this.currentstyle.buttonfont=this.on_find_CurrentStyle_buttonfont(this._pseudo);this.on_apply_style_buttonfont(_a);};_pFileUpload.on_update_style_buttoncolor=function(){var _a=this.currentstyle.buttoncolor=this.on_find_CurrentStyle_buttoncolor(this._pseudo);this.on_apply_style_buttoncolor(_a);};_pFileUpload.on_update_style_buttonsize=function(){var _a=this.currentstyle.buttonsize=this.on_find_CurrentStyle_buttonsize(this._pseudo);this.on_apply_style_buttonsize(_a);};_pFileUpload.on_update_style_buttontext=function(){var _a=this.currentstyle.buttontext=this.on_find_CurrentStyle_buttontext(this._pseudo);this.on_apply_style_buttontext(_a);};_pFileUpload.on_update_style_itemheight=function(){var _a=this.currentstyle.itemheight=this.on_find_CurrentStyle_itemheight(this._pseudo);this.on_apply_style_itemheight(_a);};_pFileUpload.on_update_style_itemaccessibility=function(){var _a=this.currentstyle.itemaccessibility=this.on_find_CurrentStyle_itemaccessibility(this._pseudo);this.on_apply_style_itemaccessibility(_a);};_pFileUpload.on_apply_style_padding=function(_a){var _b=this._items;var _c=_b.length;var _d=this._client_width-_a.right;var _e=this.on_find_CurrentStyle_itemheight(this._pseudo);for(var _f=0;_f<_c;_f++ ){_b[_f].move(_a.left,(itemheight*_f+_a.top),_d,(_e*(_f+1)+_a.top),null,null);}};_pFileUpload.on_apply_style_cursor=function(_a){var _b=this._control_element;var _c=this._items;var _d=_c.length;if(_b){_b.setElementCursor(_a);for(var _e=0;_e<_d;_e++ ){_c[_e].on_apply_style_cursor(_a);}}};_pFileUpload.on_apply_style_editbackground=function(_a){var _b=this._items;var _c=_b.length;for(var _d=0;_d<_c;_d++ ){if(_b[_d].fileitemedit){_b[_d].fileitemedit.on_apply_style_background(_a);}}};_pFileUpload.on_apply_style_editborder=function(_a){var _b=this._items;var _c=_b.length;for(var _d=0;_d<_c;_d++ ){if(_b[_d].fileitemedit){_b[_d].fileitemedit.on_apply_style_border(_a);}}};_pFileUpload.on_apply_style_editbordertype=function(_a){var _b=this._items;var _c=_b.length;for(var _d=0;_d<_c;_d++ ){if(_b[_d].fileitemedit){_b[_d].fileitemedit.on_apply_style_bordertype(_a);}}};_pFileUpload.on_apply_style_editgradation=function(_a){var _b=this._items;var _c=_b.length;for(var _d=0;_d<_c;_d++ ){if(_b[_d].fileitemedit){_b[_d].fileitemedit.on_apply_style_gradation(_a);}}};_pFileUpload.on_apply_style_editpadding=function(_a){var _b=this._items;var _c=_b.length;for(var _d=0;_d<_c;_d++ ){if(_b[_d].fileitemedit){_b[_d].fileitemedit.on_update_style_padding(_a);}}};_pFileUpload.on_apply_style_editmargin=function(_a){var _b=this._items;var _c=_b.length;for(var _d=0;_d<_c;_d++ ){if(_b[_d].fileitemedit){_b[_d].fileitemedit.on_apply_style_margin(_a);}}};_pFileUpload.on_apply_style_editfont=function(_a){var _b=this._items;var _c=_b.length;for(var _d=0;_d<_c;_d++ ){if(_b[_d].fileitemedit){_b[_d].fileitemedit.on_apply_style_font(_a);}}};_pFileUpload.on_apply_style_editcolor=function(_a){var _b=this._items;var _c=_b.length;for(var _d=0;_d<_c;_d++ ){if(_b[_d].fileitemedit){_b[_d].fileitemedit.on_apply_style_color(_a);}}};_pFileUpload.on_apply_style_buttonbackground=function(_a){var _b=this._items;var _c=_b.length;for(var _d=0;_d<_c;_d++ ){if(_b[_d].fileitembutton){_b[_d].fileitembutton.on_apply_style_background(_a);}}};_pFileUpload.on_apply_style_buttonborder=function(_a){var _b=this._items;var _c=_b.length;for(var _d=0;_d<_c;_d++ ){if(_b[_d].fileitembutton){_b[_d].fileitembutton.on_apply_style_border(_a);}}};_pFileUpload.on_apply_style_buttonbordertype=function(_a){var _b=this._items;var _c=_b.length;for(var _d=0;_d<_c;_d++ ){if(_b[_d].fileitembutton){_b[_d].fileitembutton.on_apply_style_bordertype(_a);}}};_pFileUpload.on_apply_style_buttongradation=function(_a){var _b=this._items;var _c=_b.length;for(var _d=0;_d<_c;_d++ ){if(_b[_d].fileitembutton){_b[_d].fileitembutton.on_apply_style_gradation(_a);}}};_pFileUpload.on_apply_style_buttonpadding=function(_a){var _b=this._items;var _c=_b.length;for(var _d=0;_d<_c;_d++ ){if(_b[_d].fileitembutton){_b[_d].fileitembutton.on_update_style_padding(_a);}}};_pFileUpload.on_apply_style_buttonmargin=function(_a){var _b=this._items;var _c=_b.length;for(var _d=0;_d<_c;_d++ ){if(_b[_d].fileitembutton){_b[_d].fileitembutton.on_apply_style_margin(_a);}}};_pFileUpload.on_apply_style_buttonfont=function(_a){var _b=this._items;var _c=_b.length;for(var _d=0;_d<_c;_d++ ){if(_b[_d].fileitembutton){_b[_d].fileitembutton.on_apply_style_font(_a);}}};_pFileUpload.on_apply_style_buttoncolor=function(_a){var _b=this._items;var _c=_b.length;for(var _d=0;_d<_c;_d++ ){if(_b[_d].fileitembutton){_b[_d].fileitembutton.on_apply_style_color(_a);}}};_pFileUpload.on_apply_style_buttonsize=function(_a){this.on_change_containerRect();};_pFileUpload.on_apply_style_buttontext=function(_a){if(_a==null){_a=this._defaultButtontext;}var _b=this._items;var _c=_b.length;if(_b==null){return;}for(var _d=0;_d<_c;_d++ ){_b[_d].on_apply_style_buttontext(_a);}};_pFileUpload.on_apply_style_itemheight=function(_a){this.on_change_containerRect();this.resetScroll();};_pFileUpload.on_apply_style_align=function(_a){var _b=this._items;var _c=_b.length;for(var _d=0;_d<_c;_d++ ){if(_b[_d].fileitemedit){_b[_d].fileitemedit.style.set_align(_a);}}};_pFileUpload.on_apply_style_itemaccessibility=function(_a){var _b=this._items.length;var _c=null;if(_a){for(var _d=0;_d<_b;_d++ ){_c=this._getItem(_d);_c.fileitemedit.style.set_accessibility(_a._value);}}};_pFileUpload.on_create_contents=function(){var _a=this.getElement();if(_a){var _b=this._items;var _c=this.itemcount;for(var _e=0;_e<_c;_e++ ){var _d=this._createFileItem(_e,0,0,0,0);this.filepathedits.add_item(_d.id,_d.fileitemedit);this.filefindbuttons.add_item(_d.id,_d.fileitembutton);_b[_e]=_d;}}};_pFileUpload.on_created_contents=function(){var _a=new Date().valueOf().toString();nexacro._create_hidden_frame(this._unique_id,_a,this.on_load,this);this.on_apply_index();this.on_apply_innerdataset();this.on_apply_filecolumn();this.on_apply_prop_enable(this._isEnable());if(nexacro._enableaccessibility){this.on_apply_style_itemaccessibility(this.currentstyle.itemaccessibility=this.on_find_CurrentStyle_itemaccessibility(this._pseudo));}var _b=this._items;var _c=this.itemcount;for(var _d=0;_d<_c;_d++ ){_b[_d].on_created();_b[_d].set_visible(false);_b[_d]._setEventHandler("onfindclick",this.on_notify_onfindclick,this);_b[_d]._setEventHandler("onitemclick",this.on_notify_onitemclick,this);if(nexacro._enableaccessibility){_b[_d]._setAccessibilityInfoIndex(_d+1);_b[_d]._setAccessibilityInfoCount(_c);}};};_pFileUpload.on_destroy_contents=function(){var _a=this.name;var _b=this._items;var _c=_b.length;for(var _d=0;_d<_c;_d++ ){_b[_d].destroy();}this._items=[];nexacro._destroy_hidden_frame(this._unique_id,this,this._handle);};_pFileUpload.on_change_containerRect=function(_a,_b){var _c=this._items;var _d=_c.length;if(_d<=0){return;}var _e=this._pseudo;var _f=this._client_width;var _g=this._client_left;var _h=this._client_top;var _i,_j;var _k=parseInt(this.on_find_CurrentStyle_itemheight(_e),10);var _l=parseInt(this.on_find_CurrentStyle_buttonsize(_e),10);var _m=this.on_find_CurrentStyle_padding(_e);var _n=_l+_m.left+_m.right;var _o=_f;if(_n>_f){_i=_g-_m.left;}else{_i=_g-_m.left;}for(var _p=0;_p<_d;_p++ ){_j=_k*_p;_c[_p].move(_i,_j,_o,_k,null,null);_c[_p].on_apply_style_itemheight(_k);_c[_p].on_apply_style_buttonsize(_l);}};_pFileUpload.resetScroll=function(){var _a=this.getElement();if(_a){this._onRecalcScrollSize();this._updateClientSize(_a);}};_pFileUpload._onRecalcScrollSize=function(_a){var _b=this.getElement();if(_b){var _c=this._pseudo;var _d=this.vscrollbar;var _e=this.hscrollbar;var _f=this.on_find_CurrentStyle_itemheight(_c);var _g=this.on_find_CurrentStyle_border(_c);var _h=this.on_find_CurrentStyle_padding(_c);var _i=this.itemcount*_f;var _j=this._client_width;if(_i>this._client_height){if(_d){_j-=_d._adjust_width;}else{_j-=nexacro.Component.SCROLLBAR_DEFAULT_SIZE;}}_b.setElementScrollMaxSize(_j,_i);}};_pFileUpload.on_hscroll=function(_a,_b){if(this.onhscroll&&this.onhscroll._has_handlers){_b.fromobject=this;this.onhscroll._fireEvent(this,_b);}var _c=this._control_element;if(_c){_c.setElementHScrollPos(_b.pos);}return true;};_pFileUpload.on_vscroll=function(_a,_b){if(this.onvscroll&&this.onvscroll._has_handlers){_b.fromobject=this;this.onvscroll._fireEvent(this,_b);}var _c=this._control_element;if(_c){_c.setElementVScrollPos(_b.pos);}return true;};_pFileUpload.set_multiselect=function(_a){if(_a!=this.multiselect){this.multiselect=_a;_a=nexacro._toBoolean(_a);if(_a!=this._multiselect){this._multiselect=_a;this.on_apply_multiselect(_a);}}};if(nexacro.Browser=="IE"&&nexacro.BrowserVersion<10){_pFileUpload.on_apply_multiselect=nexacro._emptyFn;}else{_pFileUpload.on_apply_multiselect=function(){var _a=this.getElement();if(_a){var _b=this._items;var _c=_b.length;var _d=this._multiselect;var _e=this._unique_id;var _f=this._handle;for(var _g=0;_g<_c;_g++ ){nexacro._setMultipleFile(_e,_b[_g].name,_d,_b[_g]);}}};}_pFileUpload.set_uploadurl=function(_a){if(_a!=this.uploadurl){this.uploadurl=_a;}};_pFileUpload.set_itemcount=function(_a){trace(" set_itemcount >>> "+set_itemcount);var _b=parseInt(_a)|0;if(_b!=this.itemcount){this._old_itemcount=this.itemcount;this.itemcount=_b;this.on_apply_itemcount();}};_pFileUpload.on_apply_itemcount=function(){var _a=this.getElement();if(_a){var _b=this._pseudo;var _c=this._old_itemcount;var _d=this.itemcount;var _e=this._items;var _f=_e.length;var _g=this._client_left;var _h=this._client_top;var _i=this._client_width;var _j=parseInt(this.on_find_CurrentStyle_itemheight(_b),10);var _k=parseInt(this.on_find_CurrentStyle_buttonsize(_b),10);var _l=this.on_find_CurrentStyle_buttontext(_b);while(_f&&_c>_d){_c-- ;_e.pop().destroy();}for(var _q=_f;_q<_d;_q++ ){var _m=_g;var _n=_h+(_j*_q);var _o=_i;var _p=this._createFileItem(_q,_m,_n,_o,_j);this.filepathedits.add_item(_p.id,_p.fileitemedit);this.filefindbuttons.add_item(_p.id,_p.fileitembutton);this._items[_q]=_p;}this.on_change_containerRect();this.on_apply_style_buttontext(_l);this.resetScroll();}};_pFileUpload.set_itemheight=function(_a){var _b=parseInt(_a)|0;if(_b!=this.itemheight){this.itemheight=_b;this.on_apply_itemheight(_b);}};_pFileUpload.on_apply_itemheight=function(_a){var _b=this.getElement();if(_b){this.style.set_itemheight(_a);}};_pFileUpload.set_timeout=function(_a){if(_a!=this.timeout){this.timeout=_a;}};_pFileUpload.set_retry=function(_a){if(_a!=this.retry){this.retry=_a;}};_pFileUpload.set_async=function(_a){if(_a!=this.async){this.async=_a;}};_pFileUpload.set_index=function(_a){if(_a!=this.index){this.index=_a;this.on_apply_index(_a);this._setAccessibilityStatSelected(_a);};};_pFileUpload.on_apply_index=function(_a){var _b=this.getElement();if(_b){var _c=this._items[_a];if(_c){if(this._editFlag){_c.fileitemedit.setFocus(false);}if(this._buttonFlag){_c.fileitembutton.setFocus(false);}var _d=_c._getLastFocused();this.value=_c.value;}}};_pFileUpload.set_text=function(_a){};_pFileUpload._setText=function(_a){if(_a!=this.text){this.text=_a;}return this.text;};_pFileUpload.on_apply_text=function(_a){};_pFileUpload.set_value=function(_a){};_pFileUpload._setValue=function(_a){if(_a!=this.value){this.value=_a;}};_pFileUpload.on_apply_value=function(_a){};_pFileUpload.setInnerDataset=function(_a){if(_a instanceof nexacro.Dataset){if(!_a){this._innerdataset=null;this.innerdataset="";}else{this._innerdataset=_a;this.innerdataset=_a.id;}this.on_apply_innerdataset();}};_pFileUpload.getInnerDataset=function(){return this._innerdataset;};_pFileUpload.set_innerdataset=function(_a){if(typeof _a!="string"){this.setInnerDataset(_a);return;}if(_a!=this.innerdataset){if(!_a){this._innerdataset=null;this.innerdataset="";}else{_a=_a.replace("@","");this._innerdataset=this._findDataset(_a);this.innerdataset=_a;}this.on_apply_innerdataset();}else if(this.innerdataset&&!this._innerdataset){this._setInnerDatasetStr(this.innerdataset);this.on_apply_innerdataset();}return this.innerdataset;};_pFileUpload.on_apply_innerdataset=function(){var _a=this.getElement();if(_a){this.on_apply_filecolumn();}};_pFileUpload.set_filecolumn=function(_a){if(_a!=this.filecolumn){this.filecolumn=_a;this.on_apply_filecolumn(_a);}};_pFileUpload.on_apply_filecolumn=function(_a){var _b=this.getElement();if(_b&&this._innerdataset){var _c=this._items;for(var _d=0;_d<_c.length;_d++ ){var _a=this._innerdataset.getColumn(_d,_a);if(_a){_c[_d].set_value(_a);_a=0;}}}};_pFileUpload.upload=function(_a,_b,_c,_d){var _e=false;var _f;if(_a==undefined){if(this.uploadurl){_f=application._getServiceLocation(this.uploadurl);}}else{_f=application._getServiceLocation(_a);}if(_f){var _g=this._items;var _h=_g.length;for(var _i=0;_i<_h;_i++ ){if(_g[_i].value){_e=true;this.loadItem=new nexacro.ExtFileTransaction(_f,"upload",this.parent,_b,_c,_d);this.loadItem["parent"]=this;this.loadItem["FORM_URL"]=dsNameArr[1];nexacro._submit(this._unique_id,_f,this._handle);break;}}}return _e;};_pFileUpload.appendItem=function(){var _a=this.getElement();if(_a){var _b=this._pseudo;var _c=this.itemcount;var _d=this._client_left;var _e=this._client_top;var _f=this._client_width;var _g=parseInt(this.on_find_CurrentStyle_itemheight(_b),10);var _h=parseInt(this.on_find_CurrentStyle_buttonsize(_b),10);var _i=this.on_find_CurrentStyle_buttontext(_b);var _j=this.on_find_CurrentStyle_padding(_b);var _k=_d+_j.left;var _l=_e+(_g*_c)+_j.top;var _m=_f-_j.right;var _n=_c;var _o=this._createFileItem(_n,_k,_l,_m,_g);this.filepathedits.add_item(_o.id,_o.fileitemedit);this.filefindbuttons.add_item(_o.id,_o.fileitembutton);this._items[_n]=_o;this.itemcount++ ;if(nexacro._enableaccessibility){_o._setAccessibilityInfoIndex(_n);_o._setAccessibilityInfoCount(_n+1);}this.on_change_containerRect();this.on_apply_style_buttontext(_i);this.resetScroll();this.on_fire_onappenditem(this,_n);}};_pFileUpload.deleteItem=function(_a){var _b=this.getElement();if(_b){_a=parseInt(_a,10);var _c=this._items;if(this.itemcount<=_a){return;}var _d=this.itemcount;var _e=_d-1;for(var _f=_a+1;_f<_d;_f++ ){_c[_f].index-- ;if(nexacro._enableaccessibility){_c[_f]._setAccessibilityInfoIndex(_f);_c[_f]._setAccessibilityInfoCount(_e);}}_c[_a].destroy();_c.splice(_a,1);this.itemcount-- ;this.on_change_containerRect();this.on_update_fileitem(_a);this.resetScroll();this.on_fire_ondeleteitem(this,_a);}};_pFileUpload.on_update_fileitem=function(_a){_a=parseInt(_a,10);var _b=this._pseudo;var _c=this._client_width;var _d=this._client_left;var _e=this._client_top;var _f=this._items;var _g=_f.length;var _h,_i;var _j=parseInt(this.on_find_CurrentStyle_itemheight(_b),10);var _k=parseInt(this.on_find_CurrentStyle_buttonsize(_b),10);var _l=this.on_find_CurrentStyle_padding(_b);var _m=_k+_l.left+_l.right;var _n=_c-_l.right;if(_m>_c){}else{_h=_d;}while(_a<_g){_i=_e+(_j*_a)+_l.top;_f[_a].move(_h,_i,_n,_j,null,null);_a++ ;}};_pFileUpload.getItemCount=function(_a){var _b=this.getElement();if(_b){_a=nexacro._toBoolean(_a);var _c=0;var _d=0;var _e;var _f=this._items;var _g=_f.length;while(_d<_g){if(_a==true){if(_f[_d].value){_c++ ;}}else{return _g;}++ _d;}return _c;}};_pFileUpload.getItemIndex=function(_a){var _b=this.getElement();if(_b){if(typeof _a=="object"){var _c=0;var _d=this._items;while(_c<_d.length){if(_a==_d[_c].fileitembutton){return _c;}if(_a==_d[_c].fileitemedit){return _c;}++ _c;}return  -1;}}};_pFileUpload._getItem=function(_a){if(_a>=0&&this._items.length>0){return this._items[_a];}return null;};_pFileUpload.hasValue=function(_a){var _b=this.getElement();if(_b){var _c=0;var _d=this._items;if(_a== -1){while(_c<_d.length){if(_d[_c].value){ ++cnt;}++ _c;}if(cnt==_d.length){return true;}return false;}if(_a<_d.length&&_d[_a].value){return true;}return false;}};_pFileUpload.getValue=function(_a){var _b=this.getElement();if(_b){var _c=this._items;if(_c&&_a>=0&&_a<_c.length){return _c[_a].value;}return "";}};_pFileUpload.on_notify_onfindclick=function(_a,_b){var _c=false;var _d=nexacro._indexOf(this._items,_a);if(this.visible&&this._isEnable()&&this.enableevent){_c=this.on_fire_onfindclick(_a,_d);if(_c){try{nexacro._findclick(this._unique_id,_a.name,_a,this._handle);}catch(_b){var _e=nexacro.MakeError("ObjectError",this,"comp_incorrect_file");this.on_fire_onerror(this,_e.name,_e.message,_a,null,null,null,_d);}}}return _c;};_pFileUpload.on_notify_onitemclick=function(_a,_b){if(this.visible&&this._isEnable()&&this.enableevent){this.on_fire_onitemclick(_a,_a.index);}};_pFileUpload.on_getAccessibilityAdditionalLabel=function(){var _a=0;var _b=this._items;if(_b){_a=_b.length;}return ( +this.index)+1+" "+_a;};_pFileUpload.on_fire_onerror=function(_a,_b,_c,_d,_e,_f,_g,_h){if(this.onerror&&this.onerror._has_handlers){var _i=new nexacro.ExtFileErrorEventInfo(_a,"onerror");_i["errortype"]=_b;_i["errormsg"]=_c;_i["errorobj"]=_d;_i["statuscode"]=_e;_i["requesturi"]=_f;_i["locationuri"]=_g;_i["index"]=_h;return this.onerror._fireEvent(this,_i);}return true;};_pFileUpload.on_fire_user_onlbuttondown=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l){if(this.onlbuttondown&&this.onlbuttondown._has_handlers){var _m=new nexacro.FileUploadMouseEventInfo(this,"onlbuttondown",_a,_b,_c,_d,this.index,_e,_f,_g,_h,_i,_j,_k,_l);return this.onlbuttondown._fireEvent(this,_m);}return false;};_pFileUpload.on_fire_user_onlbuttonup=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m){if(this.onlbuttonup&&this.onlbuttonup._has_handlers){var _n=new nexacro.FileUploadMouseEventInfo(this,"onlbuttonup",_a,_b,_c,_d,this.index,_e,_f,_g,_h,_i,_j,_k,_l);return this.onlbuttonup._fireUserEvent(this,_n);}return false;};_pFileUpload.on_fire_onfindclick=function(_a,_b){var _c=true;if(this.onfindclick&&this.onfindclick._has_handlers){var _d=new nexacro.FileUploadItemEventInfo(this,"onfindclick",_b);_c=this.onfindclick._fireCheckEvent(this,_d);}return _c;};_pFileUpload.on_fire_onitemclick=function(_a,_b){if(this.onitemclick&&this.onitemclick._has_handlers){var _c=new nexacro.FileUploadItemEventInfo(this,"onitemclick",_b);this.onitemclick._fireEvent(this,_c);}};_pFileUpload.on_fire_onappenditem=function(_a,_b){trace("on_fire_onappenditem 호출 1 this.onappenditem="+this.onappenditem);if(this.onappenditem&&this.onappenditem._has_handlers){var _c=new nexacro.FileUploadItemEventInfo(_a,"onappenditem",_b);trace("on_fire_onappenditem 호출 2");this.onappenditem._fireEvent(this,_c);}};_pFileUpload.on_fire_ondeleteitem=function(_a,_b){if(this.ondeleteitem&&this.ondeleteitem._has_handlers){var _c=new nexacro.FileUploadItemEventInfo(_a,"ondeleteitem",_b);this.ondeleteitem._fireEvent(this,_c);}};_pFileUpload.on_fire_onitemchanged=function(_a,_b,_c,_d){if(Eco.isEmpty(_d)){return;}if(this.onitemchanged&&this.onitemchanged._has_handlers){var _e=new nexacro.ExtFileUploadChangeEventInfo(_a,"onchange");_e["index"]=_b;_e["files"]=this.convertFileInfo(_d);this.setFileInfo(_b,_e["files"]);return this.onitemchanged._fireEvent(this,_e);}};_pFileUpload.convertFileInfo=function(_a){var _b=_a.split(",");var _c=_b.length;var _d=[];var _e,_f;for(var _h=0;_h<_c;_h++ ){_e=_b[_h].replace(/^.*[\\\/]/,'');_f=Eco.getUniqueId("file_");var _g={id:_f,name:_e,size: -1,type:"unknown"};_d.push(_g);}return _d;};_pFileUpload.on_fire_onsuccess=function(_a,_b,_c,_d,_e){application._endCommProgress();if(this.onsuccess&&this.onsuccess._has_handlers){if(this._autoDeleteItem){var _f=this.getAddedFileLength();for(var _h=0;_h<_f;_h++ ){this.deleteItem(0);}}if(_e&&_e.length>0){var _g=new nexacro.ExtFileLoadEventInfo(this,"onsuccess");_g["datasets"]=_a;_g["type"]="upload";_g["errorcode"]=_b;_g["errormsg"]=_c;_g["url"]=_d;return this.onsuccess._fireEvent(this,_g);}else{var _g=new nexacro.ExtFileLoadEventInfo(this,"onsuccess");_g["datasets"]=_a;_g["type"]="upload";_g["errorcode"]=_b;_g["errormsg"]=_c;_g["url"]=_d;return this.onsuccess._fireEvent(this,_g);}}};_pFileUpload._getDlgCode=function(){var _a=this._want_tab;return {want_tab:_a,want_return:true,want_escape:false,want_chars:false,want_arrows:false};};_pFileUpload.on_fire_user_onkeydown=function(_a,_b,_c,_d,_e,_f){var _g=this._items;var _h=false;var _i=this.index;var _j=nexacro.Event;var _k=_a==_j.KEY_UP||(_a==_j.KEY_TAB&&_d);var _l=_a==_j.KEY_DOWN||(_a==_j.KEY_TAB&&!_d);if(nexacro._enableaccessibility){if(_g[_i]){this._find_item_pseudo(_g[_i]);}if(_k||_l){if((_k&&_i<0)||(_l&&this._buttonFlag&&_i==_g.length-1)){this._want_tab=false;}else{if(_k){if(!this._editFlag){this.index= -1;this._editFlag=true;this._buttonFlag=false;}else{_i-- ;if(_i<0){this._editFlag=false;this._buttonFlag=false;var _m=this._getWindow();_m._removeFromCurrentFocusPath(this,false);this._setFocus(false);}else{this._editFlag=false;this._buttonFlag=true;}}}else if(_l){if(!this._editFlag){_i++ ;this._editFlag=true;this._buttonFlag=false;}else{this.index= -1;this._editFlag=false;this._buttonFlag=true;}}this.set_index(_i);}this._getWindow()._keydown_element._event_stop=true;}}else{if(_a==_j.KEY_TAB){if((_d&&_i==0)||(!_d&&_i==_g.length-1)){this._want_tab=false;this.set_index( -1);}else{if(_d){_i-- ;}else{_i++ ;}this.set_index(_i);}this._getWindow()._keydown_element._event_stop=true;}}return nexacro.Component.prototype.on_fire_user_onkeydown.call(this,_a,_b,_c,_d,_e,_f);};_pFileUpload._find_item_pseudo=function(_a){this._editFlag=(_a.fileitemedit._pseudo=="focused");this._buttonFlag=(_a.fileitembutton._pseudo=="focused");};_pFileUpload._on_focus=function(_a,_b,_c,_d,_e,_f){nexacro.Component.prototype._on_focus.call(this,_a,_b,_c,_d,_e,_f);var _g=this._items;var _h=_g.length;var _i=_b=="shifttabkey";var _j=0;if(_h){this._want_tab=true;if(nexacro._enableaccessibility){if(_i){this.index= -1;_j=_h-1;this._editFlag=false;this._buttonFlag=true;}else{_j= -1;this._editFlag=false;this._buttonFlag=false;}}else{_j=this.index<0?0:this.index;this.index= -1;}this.set_index(_j);}};_pFileUpload.on_apply_custom_setfocus=function(_a){var _b=nexacro._enableaccessibility;var _c=((_a=="lbutton")?false:_b);var _d=this._items;if(_d.length< -1||_b){var _e=this._control_element;if(_e){_e.setElementFocus(_c);}}else{var _f=_d[this.index];if(_f){_f.fileitembutton._control_element.setElementFocus(_c);}}};_pFileUpload._setParamter=nexacro._emptyFn;_pFileUpload._getDataset=nexacro._emptyFn;_pFileUpload.on_load=function(_a,_b,_c,_d,_e,_f){var _g,_h,_i,_j,_k;var _l=0,_m="";_b=_b.trim();var _n=_b.substring(0,3);if(_n=="SSV"){try{trace("\n\n\t====  SSV 처리 시작 ===");var _o=this.parent;if(!_o["_extFileDsPool"]){_o["_extFileDsPool"]=[];}var _p=_o["_extFileDsPool"];var _q=this.loadItem;var _r=_q.__deserializeSSV(_b);_l=_r[0];_m=_r[1];var _s=[];var _t=_p.length;var _k;for(var _g=0;_g<_t;_g++ ){_k=_p[_g];if(_k["_used"]){_s.push(_k);}}this.on_fire_onsuccess(_s,_l,_m,_c);_q.releaseResponseDataset(_o);trace("\n\n\t====  SSV 끝 ===");}catch(e){var _u="[FileUpload.on_load] failed to data receive.";this.on_fire_onerror(this,"ObjectError",_u,this,9901,null,null, -1);}}else{try{var _v=nexacro._getXMLDocument(this._unique_id,_b,_c);if(_v){_c=_v.URL?_v.URL:_v.url;if(_c=="about:blank"){return;}var _r=nexacro._getCommDataFromDom(_v,this);var _w=_r[0];var _s=_r[1];var _t=_w.length;if(_t>0){for(_g=0;_g<_t;_g++ ){_h=_w[_g]["id"];if(_h&&_h.length){_i=_w[_g]["val"];if(_h=="ErrorCode"){_l=parseInt(_i,10);if(!isFinite(_l)){_l= -1;}}else if(_h=="ErrorMsg"){_m=_i;}}}this.on_fire_onsuccess(_s,_l,_m,_c,_w);}else{var _u="failed to get";this.on_fire_onerror(this,"ObjectError",_u,this,9901,null,null, -1);}}}catch(e){var _u="failed to get";this.on_fire_onerror(this,"ObjectError",_u,this,9901,null,null, -1);}}};nexacro.ExtFileUploadSSV=function(_a,_b){this.id=_a;this.parent=_b;};var _pSSV=nexacro.ExtFileUploadSSV.prototype;_pSSV._type_name="ExtFileUploadSSV";_pSSV.loadSSV=function(_a,_b){this.colinfos=new nexacro.DSColumnInfoList();this.colcount=0;this.constcount=0;this.rowcount=0;this.rowposition= -1;this._constVars=new nexacro.VariableList();this._rawRecords=[];this._viewRecords=this._rawRecords;this.errorCode= -1;this.errorMsg="Error";var _c=String.fromCharCode(30);if(_a){var _d=_a.split(_c);if(_d.length){var _e=_d.length;for(var _h=0;_h<_e;_h++ ){trace("ssvLine["+_h+"]= "+_d[_h]);}var _f=_d[1].split("=");var _g=_d[2].split("=");this.errorCode=_f[1];this.errorMsg=_g[1];this.loadFromSSVArray(_d,_e,0,_b);}}trace("rowcount="+this.rowcount);return this.rowcount;};_pSSV.loadFromSSVArray=function(_a,_b,_c,_d){_d=nexacro._toBoolean(_d);if(_a){while(_a[_c].substring(0,7)!="Dataset"){_c++ ;}trace("loadFromSSVArray > curIdx="+_c);if(_c<_b){_c++ ;var _e=this._getColLinesFromSSVLines(_a,_c);_c+=_e.length;trace("\n= >>>> curIdx="+_c+", ssvColLines.length="+_e.length);_c=this._loadFromSSVArray(_e,_a,_c, -1,false,_d);}return _c;}};_pSSV._getColLinesFromSSVLines=function(_a,_b){trace("_getColLinesFromSSVLines > curIdx="+_b);var _c=_a.length;var _d=_b;if(_d<_c&&_a[_d].substring(0,7)=="_Const_"){_d++ ;}if(_d<_c&&_a[_d].substring(0,9)=="_RowType_"){_d++ ;}trace("_getColLinesFromSSVLines > idx="+_d);var _e=_a.slice(_b,_d);trace("typeCol > "+_e+", isArray= "+Eco.isArray(_e));return _e;};_pSSV._loadFromSSVArray=function(_a,_b,_c,_d,_e,_f){var _g=String.fromCharCode(31);var _h=this._setColInfoFromSSVLines(_a,_e);_c=this._loadRecordFromSSVLines(_b,_c,_d,_h);this._viewRecords=this._rawRecords;this.constcount=this._constVars.length;this.colcount=this.colinfos.length+this.constcount;this.rowcount=this._viewRecords.length;return _c;};_pSSV._loadRecordFromSSVLines=function(_a,_b,_c,_d){var _e=String.fromCharCode(31);var _f=String.fromCharCode(3);var _g=this._rawRecords;var _h=_g.length;var _i=_a.length;var _j=this.parent._ssvDataset;function _loadRecordFromSSVLines_loop(_k){if(_b<_i){var _l=_a[_b];if(_l==""){_b++ ;return true;}var _m=_l.split(_e);type=_m[0];_m.shift();_m=_d(_m);var _n=_m.length;for(var _q=0;_q<_n;_q++ ){var _o=_m[_q];if(_o==_f){_o=undefined;}var _p=_j.addRow();_j.setColumn(_p,"data",_o);}_h++ ;_b++ ;if(_c>0&&_h==_c){return true;}return false;}return true;}while(true){if(_loadRecordFromSSVLines_loop(_j)){break;}}return _b;};_pSSV._setColInfoFromSSVLines=function(_a,_b){if(!_a||_a.length==0){return null;}var _c=null;var _d=_a.length;var _e=0;if(_e>_d){return null;}if(_e<_d&&_a[_e].substring(0,9)=="_RowType_"){this.__ssvSetColInfo(_a[_e]);_e++ ;}if(_e>_d){return null;}_c=this.__MakeDataConvertFunc();return _c;};_pSSV.__ssvSetColInfo=function(_a){var _b=String.fromCharCode(31);var _c=0;var _d=_a.split(_b);var _c=_d.length;var _e=0;var _f=this.parent._ssvDataset;function __ssvSetColInfo_loop(_g,_h){if(_e<_c){var _i=_d[_e].split(":");var _j=_i[0];var _k,_l;if(_j&&_j!="_RowType_"){var _m=_i[1];if(_m){var _n=_m.indexOf("(");if(_n> -1){_k=_m.substring(0,_n).toUpperCase();_l=_m.substring(_n+1,_m.indexOf(")",_n+1))|0;}else{_k=_m;}}else{_k="STRING";_l=256;}_g._addColumn(_j,_k,_l,_i[2],_i[3],_f);}_e++ ;return false;}return true;}while(true){if(__ssvSetColInfo_loop(this,_f)){break;}}return _c;};_pSSV._addColumn=function(_a,_b,_c,_d,_e,_f){if((_a in this.colinfos)||(_a in this._constVars)){return  -1;}var _g;if(_b==undefined){_g=1;_b="STRING";}else{_g=nexacro.DataUtils._typeint[_b.toLowerCase()];}if(_g==null){_g=1;}if(( +_c)!=( +_c)){_c=256;}trace("_addColumn id="+_a+", strtype="+_b+", type="+_g+", size="+_c+", prop="+_d+", text="+_e);_f.addColumn(_a,_b,_c);this.colcount++ ;};_pSSV.__MakeDataConvertFunc=function(){var _a=this.colinfos;var _b=_a.length;var _c="(function () { return function (arr) { ";for(var _e=0;_e<_b;_e++ ){var _d=_a[_e];switch(_d.ntype){case 1:break;case 2:_c+="arr["+_e+"] = nexacro.DataUtils.toIntFromText(arr["+_e+"]); ";break;case 3:_c+="arr["+_e+"] = nexacro.DataUtils.toFloatFromText(arr["+_e+"]); ";break;case 4:_c+="arr["+_e+"] = nexacro.DataUtils.toDecimalFromText(arr["+_e+"]); ";break;case 5:_c+="arr["+_e+"] = nexacro.DataUtils.toDateFromText(arr["+_e+"]); ";break;case 6:_c+="arr["+_e+"] = nexacro.DataUtils.toTimeFromText(arr["+_e+"]); ";break;case 7:_c+="arr["+_e+"] = nexacro.DataUtils.toDateTimeFromText(arr["+_e+"]); ";break;case 8:_c+="arr["+_e+"] = nexacro.DataUtils.toBlobFromText(arr["+_e+"]); ";break;default:_c+="arr["+_e+"] = nexacro.DataUtils.toTextFromvariant(arr["+_e+"]); ";break;}}_c+="return arr; }; })();";return nexacro._executeEvalStr(_c);};delete _pSSV;_pFileUpload._createFileItem=function(_a,_b,_c,_d,_e){var _f=this.itemcount<1?this._last_id=0: ++this._last_id;var _g="upfile"+_f;var _h=new nexacro.ExtFileItemCtrl(_g,"absolute",_b,_c,_d,_e,null,null,this);_h.index=_a;_h.set_name(_g);_h.createComponent();_h.on_created();_h._setEventHandler("onfindclick",this.on_notify_onfindclick,this);_h._setEventHandler("onitemclick",this.on_notify_onitemclick,this);return _h;};_pFileUpload.on_apply_prop_enable=function(_a){nexacro.Component.prototype.on_apply_prop_enable.call(this,_a);var _b=this._items;var _c=_b.length;for(var _d=0;_d<_c;_d++ ){_b[_d]._setEnable(_a);_b[_d].fileitemedit._setEnable(_a);_b[_d].fileitembutton._setEnable(_a);}};_pFileUpload._isPopupFrame=function(){return this._onPopupWin;};delete _pFileUpload;}if(!nexacro.ExtFileDownload){nexacro.ExtFileDownload=function(_a,_b){if(arguments.length==9){_b=arguments[8];}nexacro.Component.call(this,_a,"absolute",0,0,0,0,null,null,_b);this.downloadurl="";this.wordwrap=true;this.support={};Eco.object.copyProperties(this.support,nexacro._ExtFileUpDownloadSupport);this._handle=null;this._event_list={"onclick":1,"ondblclick":1,"onkeypress":1,"onkeydown":1,"onkeyup":1,"onkillfocus":1,"onsetfocus":1,"ondrag":1,"ondrop":1,"ondragenter":1,"ondragleave":1,"ondragmove":1,"onlbuttondown":1,"onlbuttonup":1,"onrbuttondown":1,"onrbuttonup":1,"onmouseenter":1,"onmouseleave":1,"onmousemove":1,"onmove":1,"onsize":1,"onsuccess":1,"onerror":1};this._accessibility_role="button";};var _pFileDownload=nexacro._createPrototype(nexacro.Component,nexacro.ExtFileDownload);nexacro.ExtFileDownload.prototype=_pFileDownload;_pFileDownload._type_name="ExtFileDownload";_pFileDownload.addEventHandler=function(_a,_b,_c){if(this._is_loading){if(!this._loading_event_list){this._loading_event_list=[];}this._loading_event_list.push({id:_a,func:_b,target:_c});}var _d=this[_a];var _e= -1;if(_d){if(_c){_e=_d._addHandler(_c,_b,true);}else{_e=_d._addHandler(this,_b,true);}}else if(_a in this._event_list){_d=new nexacro.EventListener(_a);this[_a]=_d;if(this._created_event_list){this._created_event_list.push(_a);}else{this._created_event_list=[];this._created_event_list.push(_a);}if(_c){_e=_d._addHandler(_c,_b,true);}else{_e=_d._addHandler(this,_b,true);}}return _e;};_pFileDownload.on_create_contents=function(){var _a=this.getElement();if(_a){nexacro._create_filedownload_handle(this.on_load,this);}};_pFileDownload.on_created_contents=function(){};_pFileDownload.on_destroy_contents=function(){var _a=this._text_elem;if(_a){_a.destroy();this._text_elem=null;}nexacro._destroy_filedownload_handle(this._handle);};_pFileDownload.on_change_containerRect=function(_a,_b){};_pFileDownload.set_downloadurl=function(_a){if(_a!=this.downloadurl){this.downloadurl=_a;}};_pFileDownload.download=function(_a,_b){var _c=false;var _d=this.downloadurl;if(_a!=undefined){_a=nexacro._toString(_a);if(application["_getImageLocation"]){_a=application._getImageLocation(_a);}else{_a=nexacro._getImageLocation(_a);}nexacro._download(_a,this._handle);_c=true;}else if(_d&&_d!=undefined&&_d!=""){if(application["_getImageLocation"]){_d=application._getImageLocation(_d);}else{_d=nexacro._getImageLocation(_d);}nexacro._download(_d,this._handle);_c=true;}return _c;};_pFileDownload.on_fire_onsuccess=function(_a){application._endCommProgress();if(this.onsuccess&&this.onsuccess._has_handlers&&_a!=""){var _b=new nexacro.ExtFileLoadEventInfo(this,"onsuccess");_b["type"]="download";_b["url"]=_a;return this.onsuccess._fireEvent(this,_b);}};_pFileDownload.on_load=function(_a,_b,_c,_d,_e,_f){this.on_fire_onsuccess(_c);};_pFileDownload.on_fire_onclick=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l){var _m=nexacro.Component.prototype.on_fire_onclick.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l);this.download();return _m;};_pFileDownload.on_fire_sys_onkeyup=function(_a,_b,_c,_d,_e,_f){var _g=nexacro.Component.prototype.on_fire_sys_onkeyup.call(this,_a,_b,_c,_d,_e,_f);if(_a==13||_a==32){this.on_fire_onclick("none",false,false,false, -1, -1, -1, -1, -1, -1,this,this);}return _g;};_pFileDownload._getDlgCode=function(){return {want_tab:false,want_return:true,want_escape:false,want_chars:false,want_arrows:false};};delete _pFileDownload;}}else{nexacro._ExtFileUpDownloadSupport={FileAPI:(window.File&&window.FileList&&window.Blob&&window.FileReader)?true:false,XHR2:(((function(){try{var _a=new XMLHttpRequest();return !!(_a&&('upload' in _a)&&('onprogress' in _a.upload));}catch(e){return false;}})())&&(('max' in document.createElement("progress"))?true:false)&&((window.FormData)?true:false))?true:false,MultipleInput:('multiple' in document.createElement("input"))?true:false,Download:('download' in document.createElement("a"))?true:false,MSSave:(window.navigator.msSaveOrOpenBlob)?true:false,Draggable:(function(){var _a=document.createElement("div");return ('draggable' in _a)||('ondragstart' in _a&&'ondrop' in _a);})(),SelectorsAPI:(nexacro.Browser=="IE")?((nexacro.BrowserVersion>=9)&&!!document.querySelector):!!document.querySelector};nexacro.ExtFileReadystateChangEventInfo=function(_a,_b,_c,_d){this.id=this.eventid=_b||"onreadystatechange";this.fromobject=this.fromreferenceobject=_a;this.readyState=_c;this.status=_d;};var _pExtFileLoadEventInfo=nexacro._createPrototype(nexacro.Event);nexacro.ExtFileLoadEventInfo.prototype=_pExtFileLoadEventInfo;_pExtFileLoadEventInfo._type="ExtFileLoadEventInfo";_pExtFileLoadEventInfo._type_name="ExtFileLoadEventInfo";delete _pExtFileLoadEventInfo;nexacro.ExtFileUpDownloadChangeEventInfo=function(_a,_b,_c,_d){this.id=this.eventid=_b||"onchange";this.fromobject=this.fromreferenceobject=_a;this.type=_c;this.files=_d;};var _pExtFileUploadChangeEventInfo=nexacro._createPrototype(nexacro.Event);nexacro.ExtFileUpDownloadChangeEventInfo.prototype=_pExtFileUploadChangeEventInfo;_pExtFileUploadChangeEventInfo._type="ExtFileUploadChangeEventInfo";_pExtFileUploadChangeEventInfo._type_name="ExtFileUploadChangeEventInfo";delete _pExtFileUploadChangeEventInfo;nexacro.Event.ExtFileProgress=function(_a,_b,_c,_d,_e,_f,_g){this.id=this.eventid=_b||"onuploadprogress";this.fileId=_g;this.fromobject=this.fromreferenceobject=_a;this.type=_c;this.lengthComputable=_d;this.loaded=_e;this.total=_f;};var _pEventExtFileProgress=nexacro._createPrototype(nexacro.Event);nexacro.Event.ExtFileProgress.prototype=_pEventExtFileProgress;_pEventExtFileProgress._type="ExtFileProgress";_pEventExtFileProgress._type_name="ExtFileProgress";delete _pEventExtFileProgress;nexacro.ExtFileUpDownload_Style=function(_a){nexacro.Style.call(this,_a);this.buttonbackground=null;this.buttonborder=null;this.buttonbordertype=null;this.buttongradation=null;this.buttonpadding=null;this.buttonmargin=null;this.buttonfont=null;this.buttoncolor=null;this.buttonsize=null;this.buttontext=null;};var _pExtFileUploadStyle=nexacro._createPrototype(nexacro.Style);nexacro.ExtFileUpDownload_Style.prototype=_pExtFileUploadStyle;_pExtFileUploadStyle._type="ExtFileUploadStyle";eval(nexacro._createBackgroundAttributeEvalStr("_pExtFileUploadStyle","buttonbackground"));eval(nexacro._createBorderAttributeEvalStr("_pExtFileUploadStyle","buttonborder"));eval(nexacro._createBordertypeAttributeEvalStr("_pExtFileUploadStyle","buttonbordertype"));eval(nexacro._createGradationAttributeEvalStr("_pExtFileUploadStyle","buttongradation"));eval(nexacro._createPaddingAttributeEvalStr("_pExtFileUploadStyle","buttonpadding"));eval(nexacro._createMarginAttributeEvalStr("_pExtFileUploadStyle","buttonmargin"));eval(nexacro._createFontAttributeEvalStr("_pExtFileUploadStyle","buttonfont"));eval(nexacro._createColorAttributeEvalStr("_pExtFileUploadStyle","buttoncolor"));eval(nexacro._createValueAttributeEvalStr("_pExtFileUploadStyle","buttonsize"));eval(nexacro._createValueAttributeEvalStr("_pExtFileUploadStyle","buttontext"));_pExtFileUploadStyle.__custom_emptyObject=function(){this.buttonbackground=null;this.buttonborder=null;this.buttonbordertype=null;this.buttongradation=null;this.buttonpadding=null;this.buttonmargin=null;this.buttonfont=null;this.buttoncolor=null;this.buttonsize=null;this.buttontext=null;};_pExtFileUploadStyle.__get_custom_style_value=function(){var _a="";if(this.buttonsize&&this.buttonsize._is_empty){_a+="buttonsize"+this.buttonsize._value+"; ";}if(this.buttontext&&this.buttontext._is_empty){_a+="buttontext"+this.buttontext._value+"; ";}if(this.buttonbackground&&this.buttonbackground._is_empty){_a+="buttonbackground"+this.buttonbackground._value+"; ";}if(this.buttonborder&&this.buttonborder._is_empty){_a+="buttonborder"+this.buttonborder._value+"; ";}if(this.buttonbordertype&&this.buttonbordertype._is_empty){_a+="buttonbordertype"+this.buttonbordertype._value+"; ";}if(this.buttongradation&&this.buttongradation._is_empty){_a+="buttongradation"+this.buttongradation._value+"; ";}if(this.buttonpadding&&this.buttonpadding._is_empty){_a+="buttonpadding"+this.buttonpadding._value+"; ";}if(this.buttonmargin&&this.buttonmargin._is_empty){_a+="buttonmargin"+this.buttonmargin._value+"; ";}if(this.buttonfont&&this.buttonfont._is_empty){_a+="buttonfont"+this.buttonfont._value+"; ";}if(this.buttoncolor&&this.buttoncolor._is_empty){_a+="buttoncolor"+this.buttoncolor._value+"; ";}return _a;};nexacro.ExtFileUpDownload_CurrentStyle=function(){nexacro.CurrentStyle.call(this);this.buttonbackground=null;this.buttonborder=null;this.buttonbordertype=null;this.buttongradation=null;this.buttonpadding=null;this.buttonmargin=null;this.buttonfont=null;this.buttoncolor=null;this.buttonsize=null;this.buttontext=null;};var _pExtFileUploadCurrentStyle=nexacro._createPrototype(nexacro.CurrentStyle);nexacro.ExtFileUpDownload_CurrentStyle.prototype=_pExtFileUploadCurrentStyle;_pExtFileUploadCurrentStyle._type="ExtFileUploadCurrentStyle";_pExtFileUploadCurrentStyle.__custom_emptyObject=_pExtFileUploadStyle.__custom_emptyObject;_pExtFileUploadCurrentStyle.__get_custom_style_value=_pExtFileUploadStyle.__get_custom_style_value;delete _pExtFileUploadStyle;delete _pExtFileUploadCurrentStyle;if(!nexacro.ExtFileUpload){nexacro.ExtFileUpload=function(_a,_b){if(arguments.length==9){_b=arguments[8];}var _c="absolute";nexacro.Component.call(this,_a,_c,0,0,0,0,null,null,_b);this.filebutton=null;this.multiselect=false;this.uploadurl="";this.downloadurl="";this.helpMessage=undefined;this.guideComp=undefined;this.fileListComp=undefined;this.support={};Eco.object.copyProperties(this.support,nexacro._ExtFileUpDownloadSupport);this._autoDeleteItem=true;this._form=_b;this._inputfiles=[];this._addedfiles=[];this._pExtFileItem;this._event_list={"onclick":1,"ondblclick":1,"onkeypress":1,"onkeydown":1,"onkeyup":1,"onkillfocus":1,"onsetfocus":1,"onmove":1,"onsize":1,"ondrag":1,"ondragenter":1,"ondragleave":1,"ondragmove":1,"ondrop":1,"onlbuttondown":1,"onlbuttonup":1,"onmouseenter":1,"onmouseleave":1,"onmousemove":1,"onrbuttondown":1,"onrbuttonup":1,"ontouchstart":1,"ontouchmove":1,"ontouchend":1,"ontap":1,"ondbltap":1,"onpinchstart":1,"onpinch":1,"onpinchend":1,"onflingstart":1,"onfling":1,"onflingend":1,"onlongpress":1,"onslidestart":1,"onslide":1,"onslideend":1,"onloadstart":1,"onprogress":1,"onload":1,"onloadend":1,"onsuccess":1,"onerror":1,"onchange":1,"onreadystatechange":1};};var _pExtFileUpload=nexacro._createPrototype(nexacro.Component);nexacro.ExtFileUpload.prototype=_pExtFileUpload;_pExtFileUpload._type="ExtFileUpload";_pExtFileUpload._type_name="ExtFileUpload";_pExtFileUpload._defaultButtontext=nexacro._getCachedStyleObj("buttontext","파일추가");_pExtFileUpload._defaultButtonsize=nexacro._getCachedStyleObj("buttonsize","80");_pExtFileUpload._changeFiles=function(){};_pExtFileUpload.addEventHandler=function(_a,_b,_c){if(_a=="onsuccess"){_a="onload";}if(this._is_loading){if(!this._loading_event_list){this._loading_event_list=[];}this._loading_event_list.push({id:_a,func:_b,target:_c});}var _d=this[_a];var _e= -1;if(_d){if(_c){_e=_d._addHandler(_c,_b,true);}else{_e=_d._addHandler(this,_b,true);}}else if(_a in this._event_list){_d=new nexacro.EventListener(_a);this[_a]=_d;if(this._created_event_list){this._created_event_list.push(_a);}else{this._created_event_list=[];this._created_event_list.push(_a);}if(_c){_e=_d._addHandler(_c,_b,true);}else{_e=_d._addHandler(this,_b,true);}}return _e;};_pExtFileUpload.on_create_custom_style=function(){return new nexacro.ExtFileUpDownload_Style(this);};_pExtFileUpload.on_create_custom_currentStyles=function(){return new nexacro.ExtFileUpDownload_CurrentStyle();};_pExtFileUpload.on_apply_custom_pseudo=function(_a){var _b=this.currentstyle;var _c=this.on_find_CurrentStyle_buttonbackground(_a);if(_c!=_b.buttonbackground){_b.buttonbackground=_c;}var _d=this.on_find_CurrentStyle_buttonborder(_a);if(_d!=_b.buttonborder){_b.buttonborder=_d;}var _e=this.on_find_CurrentStyle_buttonbordertype(_a);if(_e!=_b.buttonbordertype){_b.buttonbordertype=_e;}var _f=this.on_find_CurrentStyle_buttongradation(_a);if(_f!=_b.buttongradation){_b.buttongradation=_f;}var _g=this.on_find_CurrentStyle_buttonpadding(_a);if(_g!=_b.buttonpadding){_b.buttonpadding=_g;}var _h=this.on_find_CurrentStyle_buttonmargin(_a);if(_h!=_b.buttonmargin){_b.buttonmargin=_h;}var _i=this.on_find_CurrentStyle_buttonfont(_a);if(_i!=_b.buttonfont){_b.buttonfont=_i;}var _j=this.on_find_CurrentStyle_buttoncolor(_a);if(_j!=_b.buttoncolor){_b.buttoncolor=_j;}var _k=this.on_find_CurrentStyle_buttonsize(_a);if(_k!=_b.buttonsize){_b.buttonsize=_k;this.on_apply_style_buttonsize(_k);}var _l=this.on_find_CurrentStyle_buttontext(_a);if(_l!=_b.buttontext){_b.buttontext=_l;this.on_apply_style_buttontext(_l);}};_pExtFileUpload.on_find_CurrentStyle_buttonbackground=function(_a){var _b=this._find_pseudo_obj("buttonbackground",_a);return _b;};_pExtFileUpload.on_find_CurrentStyle_buttonborder=function(_a){var _b=this._find_pseudo_obj("buttonborder",_a,"border");return _b;};_pExtFileUpload.on_find_CurrentStyle_buttonbordertype=function(_a){var _b=this._find_pseudo_obj("buttonbordertype",_a);return _b;};_pExtFileUpload.on_find_CurrentStyle_buttongradation=function(_a){var _b=this._find_pseudo_obj("buttongradation",_a);return _b;};_pExtFileUpload.on_find_CurrentStyle_buttonpadding=function(_a){var _b=this._find_pseudo_obj("buttonpadding",_a);return _b;};_pExtFileUpload.on_find_CurrentStyle_buttonmargin=function(_a){var _b=this._find_pseudo_obj("buttonmargin",_a);return _b;};_pExtFileUpload.on_find_CurrentStyle_buttonfont=function(_a){var _b=this._find_pseudo_obj("buttonfont",_a);return _b;};_pExtFileUpload.on_find_CurrentStyle_buttoncolor=function(_a){var _b=this._find_pseudo_obj("buttoncolor",_a);return _b;};_pExtFileUpload.on_find_CurrentStyle_buttonsize=function(_a){var _b=this._find_pseudo_obj("buttonsize",_a);return _b?_b:this._defaultButtonsize;};_pExtFileUpload.on_find_CurrentStyle_buttontext=function(_a){var _b=this._find_pseudo_obj("buttontext",_a);return _b?_b:this._defaultButtontext;};_pExtFileUpload.on_update_style_buttonbackground=function(){var _a=this.currentstyle.buttonbackground=this.on_find_CurrentStyle_buttonbackground(this._pseudo);this.on_apply_style_buttonbackground(_a);};_pExtFileUpload.on_update_style_buttonborder=function(){var _a=this.currentstyle.buttonborder=this.on_find_CurrentStyle_buttonborder(this._pseudo);this.on_apply_style_buttonborder(_a);};_pExtFileUpload.on_update_style_buttonbordertype=function(){var _a=this.currentstyle.buttonbordertype=this.on_find_CurrentStyle_buttonbordertype(this._pseudo);this.on_apply_style_buttonbordertype(_a);};_pExtFileUpload.on_update_style_buttongradation=function(){var _a=this.currentstyle.buttongradation=this.on_find_CurrentStyle_buttongradation(this._pseudo);this.on_apply_style_buttongradation(_a);};_pExtFileUpload.on_update_style_buttonpadding=function(){var _a=this.currentstyle.buttonpadding=this.on_find_CurrentStyle_buttonpadding(this._pseudo);this.on_apply_style_buttonpadding(_a);};_pExtFileUpload.on_update_style_buttonmargin=function(){var _a=this.currentstyle.buttonmargin=this.on_find_CurrentStyle_buttonmargin(this._pseudo);this.on_apply_style_buttonmargin(_a);};_pExtFileUpload.on_update_style_buttonfont=function(){var _a=this.currentstyle.buttonfont=this.on_find_CurrentStyle_buttonfont(this._pseudo);this.on_apply_style_buttonfont(_a);};_pExtFileUpload.on_update_style_buttoncolor=function(){var _a=this.currentstyle.buttoncolor=this.on_find_CurrentStyle_buttoncolor(this._pseudo);this.on_apply_style_buttoncolor(_a);};_pExtFileUpload.on_update_style_buttonsize=function(){var _a=this.currentstyle.buttonsize=this.on_find_CurrentStyle_buttonsize(this._pseudo);this.on_apply_style_buttonsize(_a);};_pExtFileUpload.on_update_style_buttontext=function(){var _a=this.currentstyle.buttontext=this.on_find_CurrentStyle_buttontext(this._pseudo);this.on_apply_style_buttontext(_a);};_pExtFileUpload.on_apply_style_buttonbackground=function(_a){this.filebutton.on_apply_style_background(_a);};_pExtFileUpload.on_apply_style_buttonborder=function(_a){this.filebutton.on_apply_style_border(_a);};_pExtFileUpload.on_apply_style_buttonbordertype=function(_a){this.filebutton.on_apply_style_bordertype(_a);};_pExtFileUpload.on_apply_style_buttongradation=function(_a){this.filebutton.on_apply_style_gradation(_a);};_pExtFileUpload.on_apply_style_buttonpadding=function(_a){this.filebutton.on_update_style_padding(_a);};_pExtFileUpload.on_apply_style_buttonmargin=function(_a){this.filebutton.on_apply_style_margin(_a);};_pExtFileUpload.on_apply_style_buttonfont=function(_a){this.filebutton.on_apply_style_font(_a);};_pExtFileUpload.on_apply_style_buttoncolor=function(_a){this.filebutton.on_apply_style_color(_a);};_pExtFileUpload.on_apply_style_buttonsize=function(_a){this.on_change_containerRect();};_pExtFileUpload.on_apply_style_buttontext=function(_a){if(_a==null){_a=this._defaultButtontext;}if(this.filebutton){this.filebutton.set_text(_a);}};_pExtFileUpload.on_apply_style_cursor=function(_a){nexacro.Component.prototype.on_apply_style_cursor.call(this,_a);if(this.filebutton){this.filebutton.on_apply_style_cursor(_a);}};_pExtFileUpload.on_create_contents=function(){var _a=this.getElement();if(_a){this.filebutton=new nexacro.ExtFileButtonCtrl("ExtFileButtonCtrl","absolute",0,0,0,0,null,null,this);this.filebutton.createComponent();}};_pExtFileUpload.on_created_contents=function(){this.addResponseZone();var _a=new Date().valueOf().toString();nexacro._create_hidden_frame(this._unique_id,_a,this.on_load,this);var _b=this.on_fileinput_onchange;if(this.support.MultipleInput){_b=this.on_filesinput_onchange;if((nexacro.Browser=="Safari")&&(nexacro.BrowserVersion==5)){this.multiselect=false;_b=this.on_filesinput_onchange;}}var _c=this._unique_id+"_"+_a+"_inputFile";nexacro._append_hidden_item(this._unique_id,_c,_b,this);var _d=this._input_node;_d._inputname=_c;this._inputfiles.push(_d);this.on_apply_multiselect();this.filebutton._setEventHandler("onclick",this.on_notify_filebutton_onclick,this);this.filebutton.set_visible(false);this.filebutton.on_created();this.on_apply_style_buttontext(this.currentstyle.buttontext);this.on_apply_prop_enable(this._isEnable());this.on_apply_style_cursor(this.currentstyle.cursor);};_pExtFileUpload.on_destroy_contents=function(){if(this.filebutton){this.filebutton.destroy();this.filebutton=null;}nexacro._destroy_hidden_frame(this._unique_id,this);};_pExtFileUpload.on_change_containerRect=function(){var _a=this.filebutton;var _b=0;var _c=this._client_width;var _d=this._client_height;var _e=this._client_left;var _f=this._client_top;var _g=this.on_find_CurrentStyle_buttonsize("normal");if(!_g||_g._is_empty){_b=_d;}else if(parseInt(_g._value,10)>_c){_b=_c;}else{_b=parseInt(_g._value,10)|0;if(_b<0){_b=_d;}}if(_a){var _h=_e;var _i=_f;var _j=_b;var _k=_d;var _l=_a.on_find_CurrentStyle_margin("normal");if(_l&&!_l._is_empty){_h=_h+_l.left;_i=_l.top;_j=_b-_l.left-_l.right;_k=_d-_l.top-_l.bottom;}_a.move(_h,_i,_j,_k,null,null);}};_pExtFileUpload.on_apply_prop_enable=function(_a){nexacro.Component.prototype.on_apply_prop_enable.call(this,_a);var _b=_a;if(_a==undefined){_b=this.enable;}if(this.filebutton){this.filebutton._setEnable(_b);}};_pExtFileUpload.addFiles=function(){this.filebutton.click();};_pExtFileUpload.set_multiselect=function(_a){_a=nexacro._toBoolean(_a);if(_a!=this.multiselect){this.multiselect=_a;}return this.multiselect;};_pExtFileUpload.on_apply_multiselect=function(){if(this._inputfiles){if(this.support.MultipleInput){if(this.multiselect){this._inputfiles[this._inputfiles.length-1].multiple=this.multiselect;}else{if(this._inputfiles[this._inputfiles.length-1].hasAttribute("multiple")){this._inputfiles[this._inputfiles.length-1].removeAttribute("multiple");}}}}};_pExtFileUpload.set_uploadurl=function(_a){if(_a!=this.uploadurl){this.uploadurl=_a;}};_pExtFileUpload.set_downloadurl=function(_a){if(_a!=this.downloadurl){this.downloadurl=_a;}};_pExtFileUpload.setAutoDeleteItem=function(_a){this._autoDeleteItem=_a;};_pExtFileUpload.upload=function(_a,_b,_c,_d,_e){_d=_d||"all";this.set_uploadurl(_a);if(_d=="all"){return this.uploadAll(_a,_b,_c,_e);}else if(_d=="each"){trace("\n\n @@@ this.multiselect="+this.multiselect);trace("nexacro.Browser="+nexacro.Browser);trace("nexacro.BrowserVersion="+nexacro.BrowserVersion);if(nexacro.Browser.toLowerCase()=="safari"&&nexacro.BrowserVersion==5){var _f="[알림]";_f+="\nXMLHttpRequest Level 2 미지원으로 인해서";_f+="\nSafari 5.x 버전에서는 개별파일 upload를 지원하지 않습니다.";_f+="\n단건 처리만 가능함.";alert(_f);return this.uploadAll(_a,_b,_c,_e);}if(this.support.XHR2){return this.uploadEach(_a,_b,_c,_e);}else{return this.uploadAll(_a,_b,_c,_e);}}return false;};_pExtFileUpload.uploadAll=function(_a,_b,_c,_d){var _e;var _f=false;if(!_a){_e=application._getServiceLocation(this.uploadurl);}else{_e=application._getServiceLocation(_a);}if(_e){var _g=new nexacro.ExtFileTransaction(_e,"upload",this._form,_b,_c,_d);_g.scope=this.parent;_g.parent=this;if(this.support.XHR2){trace("ExtFileUploadSupport.XHR2 지원");var _h=this._appendFormData();if(_h){_g.appendCallback(this,this.on_load_filemodule);this._appendInputDatasetsToFormData(_g,"inputDatasets",_h);this._startCommunication(_g,_e,_h);_f=true;}else{trace("_startCommunication 미호출");}}else{trace("ExtFileUploadSupport.XHR2 미지원");_g.appendCallback(this,this.on_loadframe_filemodule);this._pExtFileItem=_g;nexacro._submit(this._unique_id,_e);_f=true;}}return _f;};_pExtFileUpload.uploadEach=function(_a,_b,_c,_d){var _e;var _f=false;if(!_a){_e=application._getServiceLocation(this.uploadurl);}else{_e=application._getServiceLocation(_a);}if(_e){var _g=this._getFormDataList();var _h=_g.length;for(var _k=0;_k<_h;_k++ ){var _i=new nexacro.ExtFileTransaction(_e,"upload",this._form,_b,_c,_d);_i.scope=this.parent;_i.parent=this;if(this.support.XHR2){trace("[개별] ExtFileUploadSupport.XHR2 지원");var _j=_g[_k];if(_j){_i.appendCallback(this,this._makeLoadFileModule(this,_j.fileName));this._appendInputDatasetsToFormData(_i,"inputDatasets",_j);this._startCommunication(_i,_e,_j,_j.fileName);_f=true;}else{trace("   [개별] _startCommunication 미호출");}}else{trace("[개별] ExtFileUploadSupport.XHR2 미지원");_i.appendCallback(this,this.on_loadframe_filemodule);this._pExtFileItem=_i;nexacro._submit(this._unique_id,_e);_f=true;}}}return _f;};_pExtFileUpload._getFormDataList=function(){var _a,_b=0,_c=0,_d,_e,_f,_g=[];_f=this._addedfiles;if(_f){_b=_f.length;for(_c=0;_c<_b;_c++ ){_a=new FormData();_d=_f[_c].file;if(_d){_e=_d.name;_a.append(_e,_d);_a["fileName"]=_e;_g.push(_a);}}}return _g;};_pExtFileUpload._appendInputDatasetsToFormData=function(_a,_b,_c){return _c.append(_b,_a._sendData);};_pExtFileUpload.addDropZone=function(_a){var _b=false;if(this.support.XHR2&&this.isDraggable()){var _c=_a._control_element._client_element._handle;if(_c){_c._pExtFileUploadTarget=this;_b=true;}}return _b;};_pExtFileUpload.setResponseZone=function(_a,_b,_c){this.guideComp=_a;this.helpMessage=_b;this.fileListComp=_c;};_pExtFileUpload.addResponseZone=function(){var _a=this.guideComp;var _b=this.helpMessage;if(Eco.isEmpty(_a)||Eco.isEmpty(_b)){trace("Response or helpMessage Components are not exist.");return;}var _c=false;var _d=_a._control_element._client_element._handle;var _e=_b._control_element._client_element._handle;if(this.support.XHR2&&this.isDraggable()){if(_d){_d._pExtFileUploadTarget=this;nexacro._observeSysEvent(_d,"dragover","ondragover",this._dragOverGuide);nexacro._observeSysEvent(_d,"dragleave","ondragleave",this._dragLeaveGuide);nexacro._observeSysEvent(_d,"drop","ondrop",this._dropGuide);if(_e){_e._pExtFileUploadTarget=this;nexacro._observeSysEvent(_e,"dragover","ondragover",this._dragOverHelpMessage);nexacro._observeSysEvent(_e,"drop","ondrop",this._dropFiles);}_c=true;}}else if(nexacro.Browser.toLowerCase()=="safari"){trace("nexacro.Browser="+nexacro.Browser);if(_d){trace("node 존재");_d.addEventListener("dragover",this._dragOverGuide);_d.addEventListener("dragleave",this._dragLeaveGuide);_d.addEventListener("drop",this._dropGuide);_d.style="";}if(_e){trace("helpNode 존재");_e._pExtFileUploadTarget=this;_e.addEventListener("dragover",this._dragOverHelpMessage);_e.addEventListener("drop",this._dropFiles);}_c=true;}return _c;};_pExtFileUpload.isProgressbar=function(){return this.support.XHR2;};_pExtFileUpload.isDraggable=function(){return (this.support.Draggable&&this.support.FileAPI);};_pExtFileUpload.isMultipleInput=function(){return this.support.MultipleInput;};_pExtFileUpload.getAddedFile=function(){if(this._addedfiles){return this._addedfiles;}};_pExtFileUpload.getAddedFileLength=function(){if(this._addedfiles){return this._addedfiles.length;}};_pExtFileUpload.resetAddedFile=function(){this._addedfiles=[];};_pExtFileUpload.addFile=function(_a){if(this._addedfiles){var _b={"id":_a.id,"file":_a};this._addedfiles.push(_b);}};_pExtFileUpload.removeFile=function(_a){var _b=Eco.array.lastIndexOfProp(this._addedfiles,"id",_a);if(_b> -1){this._addedfiles[_b]=null;Eco.array.removeAt(this._addedfiles,_b);}if(!this.support.XHR2||!this.support.FileAPI){if(_b> -1){_a=this._inputfiles[_b]["_inputname"];_b=Eco.array.lastIndexOfProp(this._inputfiles,"name",_a);nexacro._remove_hidden_item(this._unique_id,_a);this._inputfiles[_b]=null;Eco.array.removeAt(this._inputfiles,_b);}}else{this._resetInputFile();}};_pExtFileUpload.removeAll=function(){var _a=this._addedfiles;var _b=_a.length;var _c;var _d=[];for(var _f=0;_f<_b;_f++ ){_c=_a[0]["id"];_d.push(_c);index=Eco.array.lastIndexOfProp(this._addedfiles,"id",_c);if(index> -1){_a[index]=null;Eco.array.removeAt(_a,index);}}this._addedfiles=[];if(!this.support.XHR2||!this.support.FileAPI){var _e=this._inputfiles;var _b=_d.length;for(var _f=_b-1;_f> -1;_f-- ){_c=this._inputfiles[_f]["_inputname"];index=Eco.array.lastIndexOfProp(this._inputfiles,"name",_c);if(index> -1){nexacro._remove_hidden_item(this._unique_id,_c);this._inputfiles[index]=null;Eco.array.removeAt(this._inputfiles,index);}}}else{this._resetInputFile();}};_pExtFileUpload._resetInputFile=function(){var _a=this._inputfiles[0]._inputname;nexacro._remove_hidden_item(this._unique_id,_a);this._inputfiles=[];var _b=new Date().valueOf().toString();var _c=this._unique_id+"_"+_b+"_inputFile";var _d=this.on_fileinput_onchange;if(this.support.MultipleInput){_d=this.on_filesinput_onchange;if((nexacro.Browser=="Safari")&&(nexacro.BrowserVersion==5)){this.multiselect=false;_d=this.on_filesinput_onchange;}}nexacro._append_hidden_item(this._unique_id,_c,_d,this);var _e=this._input_node;_e._inputname=_c;this._inputfiles.push(_e);this.on_apply_multiselect();};_pExtFileUpload.on_fire_onreadystatechange=function(_a,_b,_c,_d,_e){if(this.onreadystatechange&&this.onreadystatechange._has_handlers){var _f=new nexacro.ExtFileReadystateChangEventInfo(_a,"readystatechange",_b,_c);_f["fileId"]=_d;_f["type"]=_e;this.onreadystatechange._fireEvent(this,_f);}};_pExtFileUpload.on_fire_onerror=function(_a,_b,_c,_d,_e,_f){var _c=nexacro._GetSystemErrorMsg(this,_b);if(Eco.isEmpty(_c)){_b=_d.status;_c=_d.statusText;}if(this.onerror&&this.onerror._has_handlers){var _g=new nexacro.ExtFileErrorEventInfo(_a,"onerror",_b,_c,_d);_g["fileId"]=_e;_g["type"]=_f;return this.onerror._fireEvent(this,_g);}return true;};_pExtFileUpload.on_fire_onchange=function(_a,_b,_c){trace("on_fire_onchange 호출 "+this._type_name);if(this.onchange&&this.onchange._has_handlers){var _d=new nexacro.ExtFileUploadChangeEventInfo(_a,"onchange");_d["index"]= -1;_d["files"]=this.convertFileInfo(_c);return this.onchange._fireEvent(this,_d);}};_pExtFileUpload.convertFileInfo=function(_a){var _b=_a.length;var _c=[];var _d,_e,_f,_g;if(nexacro.OS!="iOS"){for(var _k=0;_k<_b;_k++ ){var _h=_a[_k];_d=_h.name;_f=_h.size;_g=_h.type;_e=Eco.getUniqueId("file_");var _i={id:_e,name:_d,size:_f,type:_g};_c.push(_i);_h.id=_e;this.addFile(_h);}}else if(nexacro.OS=="iOS"){for(var _k=0;_k<_b;_k++ ){var _h=_a[_k];_d=_h.name;if(_d=="image.jpg"){var _j=new Date().getTime();_d="image.temp_"+_j+"."+_k+".jpg";}_f=_h.size;_g=_h.type;_e=Eco.getUniqueId("file_");var _i={id:_e,name:_d,size:_f,type:_g};_c.push(_i);_h.id=_e;this.addFile(_h);}}return _c;};_pExtFileUpload.on_fileinput_onchange=function(_a){trace("on_fileinput_onchange 호출");var _b=_a;if(_b){var _c=new Date().valueOf().toString();var _d=this._unique_id+"_"+_c+"_inputFile";var _e=this.on_fileinput_onchange;nexacro._append_hidden_item(this._unique_id,_d,_e,this);var _f=this._input_node;_f._inputname=_d;this._inputfiles.push(_f);var _g=_b.split('\\');var _h=_g[_g.length-1];trace("    fileTemp:"+_g+"  fileName:"+_h);var _i=[];_i.push({"id":this._inputfiles[this._inputfiles.length-2]._inputname,"name":_h});this.on_fire_onchange(this,"HtmlInputElement",_i);}};_pExtFileUpload.on_filesinput_onchange=function(_a){trace("\non_filesinput_onchange 호출 ==> on_fire_onchange");if(this._inputfiles){var _b=this._inputfiles[this._inputfiles.length-1];this.on_fire_onchange(this,_b.type,_b.files);}};_pExtFileUpload.on_notify_filebutton_onclick=function(_a,_b){trace(" *** on_notify_filebutton_onclick");if(this._inputfiles&&this.visible&&this._isEnable()&&this.enableevent){try{var _c=this._inputfiles[this._inputfiles.length-1];var _d=_c._inputname;nexacro._findclick(this._unique_id,_d,_a);}catch(_b){var _e=nexacro._GetSystemErrorMsg(this,"0x8100000E");this.on_fire_onerror(this,"0x8100000E",_e,_a);}}return false;};_pExtFileUpload.on_fire_onloadstart=function(_a,_b,_c,_d){if(this.onloadstart&&this.onloadstart._has_handlers){var _c=new nexacro.Event.ExtFileProgress(_a,"onloadstart",_b,_c.lengthComputable,_c.loaded,_c.total,_d);this.onloadstart._fireEvent(this,_c);}};_pExtFileUpload.on_fire_onprogress=function(_a,_b,_c,_d){if(this.onprogress&&this.onprogress._has_handlers){var _c=new nexacro.Event.ExtFileProgress(_a,"onprogress",_b,_c.lengthComputable,_c.loaded,_c.total,_d);this.onprogress._fireEvent(this,_c);}};_pExtFileUpload.on_fire_onload=function(_a,_b,_c,_d,_e,_f){if(this.onload&&this.onload._has_handlers&&_d!="about:blank"){if(this._autoDeleteItem){this.removeAll();}var _g=new nexacro.ExtFileLoadEventInfo(this,"onsuccess",_a,_b,_c,_d);_g["fileId"]=_e;_g["type"]="upload";_g["errorcode"]=_b;_g["errormsg"]=_c;_g["url"]=_d;_g["datasets"]=_f||[];return this.onload._fireEvent(this,_g);}};_pExtFileUpload.on_fire_onloadend=function(_a,_b,_c,_d){if(this.onloadend&&this.onloadend._has_handlers){var _c=new nexacro.Event.ExtFileProgress(_a,"onloadend",_b,_c.lengthComputable,_c.loaded,_c.total);_c["fileId"]=_d;this.onloadend._fireEvent(this,_c);}};_pExtFileUpload._appendFormData=function(){var _a,_b=0,_c=0,_d,_e,_f;if(this._addedfiles){_f=this._addedfiles;_a=new FormData();_b=_f.length;for(_c=0;_c<_b;_c++ ){_d=_f[_c].file;if(_d){_e=_d.name;_a.append(_e,_d);}}}return _a;};_pExtFileUpload._startCommunication=function(_a,_b,_c,_d){var _e=_b;var _f=_c;if(_a._protocol<0){var _g=false;var _h=application._getProtocol(_a.protocol);if(!_h){trace("loadItem.protocol="+_a.protocol);var _i=nexacro._executeEvalStr(_a.protocol);trace("loadItem.protocol="+_a.protocol);trace("adptorclass="+_i);if(_i){_h=new _i;_g=true;}}if(_h){if(_g&&_h.initialize){_h.initialize(_b);application._addProtocol(_a.protocol,_h);}var _j=_h.getUsingProtocol(_b);var _k=_e.split("://");if(_k){_e=_j+"://"+_k[1];}if(_c&&_h.encrypt){_f=_a.on_encrypt(_c);}if(_h.getCommunicationHeaders){var _l=_h.getCommunicationHeaders(_b);if(_l){_a._addCookieFromVariables(_l);}}}}this.__startCommunication(_a,_e,_f,_d);};_pExtFileUpload.__startCommunication=function(_a,_b,_c,_d){var _e=nexacro.__createHttpRequest();var _f=_e._handle;if(_b.indexOf("://")> -1){var _g=_b.split("://");var _h=_g[0];switch(_h){case "http":_e._protocol=0;break;case "https":_e._protocol=1;break;case "file":_e._protocol=2;break;default:_e._protocol= -1;break;}}var _i="GET";var _j=false;_f._pExtFileTarget=this;_f._pExtFileItem=_a;_f.upload._pExtFileTarget=this;_f.upload._pExtFileItem=_a;nexacro._observeSysEvent(_f,"loadstart","onloadstart",this._makeLoadstartHandler(this,_d,_a));nexacro._observeSysEvent(_f.upload,"progress","onprogress",this._makeProcessHandler(this,_d,_a));nexacro._observeSysEvent(_f,"load","onload",this._makeLoadHandler(this,_d,_a));nexacro._observeSysEvent(_f,"loadend","onloadend",this._makeLoadendHandler(this,_d,_a));nexacro._observeSysEvent(_f,"error","onerror",this._makeErrorHandler(this,_d,_a));nexacro._observeSysEvent(_f,"readystatechange","onreadystatechange",this._makeReadystateChangeHandler(this,_d,_a.type));nexacro._observeSysEvent(_f,"abort","onabort",this._makeTransferCanceledHandler(this,_d));_i="POST";_j=true;try{_f.open(_i,_b,true);}catch(e){this.on_fire_onerror(this,e.number,e.message,_f,_d,_a.type);}if(_j){_f.setRequestHeader("X-Requested-With","XMLHttpRequest");_f.setRequestHeader("Accept","application/xml, text/xml, */*");}try{_f.send(_c?_c:null);}catch(e){this.on_fire_onerror(this,e.number,e.message,_f,_d,_a.type);}_e=null;};_pExtFileUpload._makeLoadFileModule=function(_a,_b){return function(_c,_d,_e,_f,_g){_a.on_fire_onload(_c,_d,_e,_f,_b,_g);};};_pExtFileUpload._makeProcessHandler=function(_a,_b,_c){return function(_d){_a.on_fire_onprogress(_a,_c.type,_d,_b);};};_pExtFileUpload._makeLoadstartHandler=function(_a,_b,_c){return function(_d){_a.on_fire_onloadstart(_a,_c.type,_d,_b);};};_pExtFileUpload._makeLoadHandler=function(_a,_b,_c){return function(_d){var _e=_c.type;if(this.readyState==4&&this.status==200){var _f="";if(_c.context){_f=_c.context._getWindow()._doc.cookie;}var _g;if(_e=="upload"){_g=this.responseText||"";if(Eco.isEmpty(_g)){var _h="response data is empty!";_a.on_fire_onerror(_a,"ObjectError",_h,this,9901,null,null, -1);return;}_c.on_load_file(_g,_f,this.status,this.statusText);}else if(_e=="download"){if(this.responseType=="blob"){_g=this.response;_c.on_down_file(_g,_a._unique_id,_f,this.status,this.statusText);}else{var _h=nexacro._GetSystemErrorMsg(this,"0x80010040");_a.on_fire_onerror(_a,"0x80010040",_h,this,_b,_c.type);}}}else{var _h=nexacro._GetSystemErrorMsg(this,"0x80010040");_a.on_fire_onerror(_a,"0x80010040",_h,this,_b,_c.type);}};};_pExtFileUpload._makeLoadendHandler=function(_a,_b,_c){return function(_d){var _e=_c.type;if(_e=="download"){if(this.responseType=="blob"){_c.on_downend_file();}}_a.on_fire_onloadend(_a,_e,_d,_b);_c=null;pthis=null;if(this.upload._pExtFileTarget){this.upload._pExtFileTarget=null;}if(this.upload._pExtFileItem){this.upload._pExtFileItem=null;}};};_pExtFileUpload._makeErrorHandler=function(_a,_b,_c,_d){return function(_e){if(_c._usewaitcursor){_c._hideWaitCursor();}_a.on_fire_onerror(_a, -1,"File transfer was failure.",_a,_b,_c.type);};};_pExtFileUpload._makeReadystateChangeHandler=function(_a,_b,_c){return function(_d){var _e=_d.target;_a.on_fire_onreadystatechange(_a,_e.readyState,_e.status,_b,_c);};};_pExtFileUpload._makeTransferCanceledHandler=function(_a,_b){return function(_c){alert(_b+". 사용자에 의해 전송이 취소되었습니다.");};};_pExtFileUpload.on_load_filemodule=function(_a,_b,_c,_d,_e){var _f="";this.on_fire_onload(_a,_b,_c,_d,_f,_e);};_pExtFileUpload.on_loadframe_filemodule=function(_a,_b,_c,_d,_e){this.on_fire_onload(_a,_b,_c,_d,"",_e);};_pExtFileUpload.on_load=function(_a){var _b=this._pExtFileItem;if(_b){_b.on_loadframe_file(this._unique_id,_a);_b=null;}};_pExtFileUpload._dropGuide=function(_a){var _b=this._pExtFileUploadTarget;_b.helpMessage.set_visible(false);_a.stopPropagation();_a.preventDefault();return false;};_pExtFileUpload._dropFiles=function(_a){var _b=_a.dataTransfer.files;trace("_dropFiles dataTransfer.files:"+_b);_a.stopPropagation();_a.preventDefault();if(_a.dataTransfer){var _c=this._pExtFileUploadTarget;if(_c){_c.helpMessage.set_visible(false);_c.on_fire_onchange(_c,_a.type,_b);}}};_pExtFileUpload._dragOverGuide=function(_a){var _b=this._pExtFileUploadTarget;_b.helpMessage.set_visible(true);_a.stopPropagation();_a.preventDefault();_a.dataTransfer.dropEffect="none";return false;};_pExtFileUpload._dragOverHelpMessage=function(_a){_a.stopPropagation();_a.preventDefault();_a.dataTransfer.dropEffect="move";return false;};_pExtFileUpload._dragLeaveGuide=function(_a){var _b=_a.clientX;var _c=_a.clientY;var _d=this._pExtFileUploadTarget;var _e=_d.guideComp;var _f=Eco.XComp.PositionSize.convertXY(application.mainframe,[0,0],_e);var _g=_f[0];var _h=_f[1];if(_b<=_g||_c<=_h){_a.stopPropagation();_a.preventDefault();_d.helpMessage.set_visible(false);return;}var _i=Eco.XComp.PositionSize.getContentSize(_e);var _j=_e.getOffsetLeft();var _k=_e.getOffsetTop();var _l=_i[0]-_j+_g;var _m=_i[1]-_k+_h;var _n=_e["vscrollbar"];var _o=_e["hscrollbar"];if(!Eco.isEmpty(_n)){if(_n.visible){_l-=_n.width;}}if(!Eco.isEmpty(_o)){if(_o.visible){_m-=_o.height;}}if(_b<=_j||_b>=_l){_d.helpMessage.set_visible(false);}if(_c<=_k||_c>=_m){_d.helpMessage.set_visible(false);}_a.stopPropagation();_a.preventDefault();};_pExtFileUpload._dragEnterAddFiles=function(_a){trace("_dragEnterAddFiles :"+this);_a.stopPropagation();_a.preventDefault();};_pExtFileUpload._dragLeaveAddFiles=function(_a){trace("_dragLeaveAddFiles :"+this);_a.stopPropagation();_a.preventDefault();};_pExtFileUpload._dropAddFiles=function(_a){trace("_dropAddFiles");_a.stopPropagation();_a.preventDefault();if(_a.dataTransfer){var _b=this._pExtFileUploadTarget;if(_b){_b.on_fire_onchange(_b,_a.type,_a.dataTransfer.files);}}};delete _pExtFileUpload;};if(!nexacro.ExtFileDownload){nexacro.ExtFileDownload=function(_a,_b){if(arguments.length==9){_b=arguments[8];}var _c="absolute";nexacro.Component.call(this,_a,_c,0,0,0,0,null,null,_b);this.downloadurl="";this.support={};Eco.object.copyProperties(this.support,nexacro._ExtFileUpDownloadSupport);this._form=_b;this._pExtFileItem;this._event_list={"onclick":1,"ondblclick":1,"onkeypress":1,"onkeydown":1,"onkeyup":1,"onkillfocus":1,"onsetfocus":1,"onmove":1,"onsize":1,"ondrag":1,"ondragenter":1,"ondragleave":1,"ondragmove":1,"ondrop":1,"onlbuttondown":1,"onlbuttonup":1,"onmouseenter":1,"onmouseleave":1,"onmousemove":1,"onrbuttondown":1,"onrbuttonup":1,"ontouchstart":1,"ontouchmove":1,"ontouchend":1,"ontap":1,"ondbltap":1,"onpinchstart":1,"onpinch":1,"onpinchend":1,"onflingstart":1,"onfling":1,"onflingend":1,"onlongpress":1,"onslidestart":1,"onslide":1,"onslideend":1,"onloadstart":1,"onprogress":1,"onload":1,"onloadend":1,"onsuccess":1,"onerror":1,"onchange":1,"onreadystatechange":1};};var _pExtFileDownload=nexacro._createPrototype(nexacro.Component);nexacro.ExtFileDownload.prototype=_pExtFileDownload;_pExtFileDownload._type="ExtFileDownload";_pExtFileDownload._type_name="ExtFileDownload";_pExtFileDownload.on_create_contents=function(){};_pExtFileDownload.on_created_contents=function(){var _a=new Date().valueOf().toString();nexacro._create_hidden_frame(this._unique_id,_a,this.on_load,this);};_pExtFileDownload.set_downloadurl=function(_a){if(_a!=this.downloadurl){this.downloadurl=_a;}};_pExtFileDownload.download=function(_a,_b,_c){if(Eco.isEmpty(_b)){alert("file name required.");return false;}var _d=Eco.isEmpty(_c)?false:true;var _e;var _f=false;if(!_a){_e=application._getServiceLocation(this.downloadurl);}else{_e=application._getServiceLocation(_a);}if(_e){var _g=null;if(_d){_g=new nexacro.ExtFileTransaction(_e,"download",this._form,_c,"",0);}else{_g=new nexacro.ExtFileTransaction(_e,"download",this._form);}_g._downfilename=_b;if(this.support.XHR2&&(this.support.Download||this.support.MSSave)){trace("ExtFileUploadSupport.XHR2 지원");_g.appendCallback(this,this.on_load_filemodule);if(_d){var _h=new FormData();_h.append("inputDatasets",_g._sendData);this._startCommunication(_g,_e,_h,_b);}else{this._startCommunication(_g,_e,"",_b);}_f=true;}else{trace("ExtFileUploadSupport.XHR2 미지원");nexacro._download(_e);_f=true;if(_g._usewaitcursor){_g._hideWaitCursor();}}}return _f;};_pExtFileDownload._startCommunication=function(_a,_b,_c,_d){var _e=_b;var _f=_c;if(_a._protocol<0){var _g=false;var _h=application._getProtocol(_a.protocol);if(!_h){trace("loadItem.protocol="+_a.protocol);var _i=nexacro._executeEvalStr(_a.protocol);trace("loadItem.protocol="+_a.protocol);trace("adptorclass="+_i);if(_i){_h=new _i;_g=true;}}if(_h){if(_g&&_h.initialize){_h.initialize(_b);application._addProtocol(_a.protocol,_h);}var _j=_h.getUsingProtocol(_b);var _k=_e.split("://");if(_k){_e=_j+"://"+_k[1];}if(_c&&_h.encrypt){_f=_a.on_encrypt(_c);}if(_h.getCommunicationHeaders){var _l=_h.getCommunicationHeaders(_b);if(_l){_a._addCookieFromVariables(_l);}}}}this.__startCommunication(_a,_e,_f,_d);};_pExtFileDownload.__startCommunication=function(_a,_b,_c,_d){var _e=nexacro.__createHttpRequest();var _f=_e._handle;if(_b.indexOf("://")> -1){var _g=_b.split("://");var _h=_g[0];switch(_h){case "http":_e._protocol=0;break;case "https":_e._protocol=1;break;case "file":_e._protocol=2;break;default:_e._protocol= -1;break;}}var _i="GET";var _j=false;_f._pExtFileTarget=this;_f._pExtFileItem=_a;nexacro._observeSysEvent(_f,"loadstart","onloadstart",this._makeLoadstartHandler(this,_d,_a));nexacro._observeSysEvent(_f,"progress","onprogress",this._makeProcessHandler(this,_d,_a));nexacro._observeSysEvent(_f,"load","onload",this._makeLoadHandler(this,_d,_a));nexacro._observeSysEvent(_f,"loadend","onloadend",this._makeLoadendHandler(this,_d,_a));nexacro._observeSysEvent(_f,"error","onerror",this._makeErrorHandler(this,_d,_a));nexacro._observeSysEvent(_f,"readystatechange","onreadystatechange",this._makeReadystateChangeHandler(this,_d,_a.type));nexacro._observeSysEvent(_f,"abort","onabort",this._makeTransferCanceledHandler(this,_d));var _k=Eco.isEmpty(_c)?false:true;if(_k){_i="POST";_j=true;}try{_f.open(_i,_b,true);_f.responseType="blob";}catch(e){this.on_fire_onerror(this,e.number,e.message,_f,_d,_a.type);}if(_j){_f.setRequestHeader("X-Requested-With","XMLHttpRequest");_f.setRequestHeader("Accept","application/xml, text/xml, */*");}try{_f.send(_c?_c:null);}catch(e){this.on_fire_onerror(this,e.number,e.message,_f,_d,_a.type);}_e=null;};_pExtFileDownload._makeLoadFileModule=function(_a,_b){return function(_c,_d,_e,_f){_a.on_fire_onload(_c,_d,_e,_f,_b);};};_pExtFileDownload._makeProcessHandler=function(_a,_b,_c){return function(_d){_a.on_fire_onprogress(_a,_c.type,_d,_b);};};_pExtFileDownload._makeLoadstartHandler=function(_a,_b,_c){return function(_d){_a.on_fire_onloadstart(_a,_c.type,_d,_b);};};_pExtFileDownload._makeLoadHandler=function(_a,_b,_c){return function(_d){var _e=_c.type;if(this.readyState==4&&this.status==200){var _f="";if(_c.context){_f=_c.context._getWindow()._doc.cookie;}var _g;if(_e=="upload"){_g=this.responseText||"";_c.on_load_file(_g,_f,this.status,this.statusText);}else if(_e=="download"){if(this.responseType=="blob"){_g=this.response;_c.on_down_file(_g,_a._unique_id,_f,this.status,this.statusText);}else{var _h=nexacro._GetSystemErrorMsg(this,"0x80010040");_a.on_fire_onerror(_a,"0x80010040",_h,this,_b,_c.type);}}}else{var _h=nexacro._GetSystemErrorMsg(this,"0x80010040");_a.on_fire_onerror(_a,"0x80010040",_h,this,_b,_c.type);}};};_pExtFileDownload._makeLoadendHandler=function(_a,_b,_c){return function(_d){var _e=_c.type;if(_e=="download"){if(this.responseType=="blob"){_c.on_downend_file();}}_a.on_fire_onloadend(_a,_e,_d,_b);_c=null;pthis=null;if(this.upload._pExtFileTarget){this.upload._pExtFileTarget=null;}if(this.upload._pExtFileItem){this.upload._pExtFileItem=null;}};};_pExtFileDownload._makeErrorHandler=function(_a,_b,_c,_d){return function(_e){if(_c._usewaitcursor){_c._hideWaitCursor();}trace("_makeErrorHandler 에서호출");_a.on_fire_onerror(_a, -1,"File transfer was failure.",_a,_b,_c.type);};};_pExtFileDownload._makeReadystateChangeHandler=function(_a,_b,_c){return function(_d){var _e=_d.target;_a.on_fire_onreadystatechange(_a,_e.readyState,_e.status,_b,_c);};};_pExtFileDownload._makeTransferCanceledHandler=function(_a,_b){return function(_c){alert(_b+". 사용자에 의해 전송이 취소되었습니다.");};};_pExtFileDownload.on_load_filemodule=function(_a,_b,_c,_d){trace("  _pExtFileDownload >>>> on_load_filemodule type:"+_a+",code:"+_b+",msg:"+_c+",url:"+_d);this.on_fire_onload(_a,_b,_c,_d);};_pExtFileDownload.on_loadframe_filemodule=function(_a,_b,_c,_d){this.on_fire_onload(_a,_b,_c,_d);};_pExtFileDownload.on_load=function(_a){var _b=this._pExtFileItem;if(_b){_b.on_loadframe_file(this._unique_id,_a);_b=null;}};_pExtFileDownload.on_fire_onreadystatechange=function(_a,_b,_c,_d,_e){if(this.onreadystatechange&&this.onreadystatechange._has_handlers){var _f=new nexacro.ExtFileReadystateChangEventInfo(_a,"readystatechange",_b,_c);_f["fileId"]=_d;_f["type"]=_e;this.onreadystatechange._fireEvent(this,_f);}};_pExtFileDownload.on_fire_onloadstart=function(_a,_b,_c,_d){if(this.onloadstart&&this.onloadstart._has_handlers){var _c=new nexacro.Event.ExtFileProgress(_a,"onloadstart",_b,_c.lengthComputable,_c.loaded,_c.total,_d);this.onloadstart._fireEvent(this,_c);}};_pExtFileDownload.on_fire_onerror=function(_a,_b,_c,_d,_e,_f){if(Eco.isEmpty(_c)){var _g=nexacro._GetSystemErrorMsg(this,_b);if(Eco.isEmpty(_g)){_b=_d.status;_c=_d.statusText;}}if(this.onerror&&this.onerror._has_handlers){var _h=new nexacro.ExtFileErrorEventInfo(_a,"onerror");_h["fileId"]=_e;_h["type"]=_f;_h["errorcode"]=_b;_h["errormsg"]=_c;_h["errorobj"]=_d;return this.onerror._fireEvent(this,_h);}return true;};_pExtFileDownload.on_fire_onprogress=function(_a,_b,_c,_d){if(this.onprogress&&this.onprogress._has_handlers){var _c=new nexacro.Event.ExtFileProgress(_a,"onprogress",_b,_c.lengthComputable,_c.loaded,_c.total,_d);this.onprogress._fireEvent(this,_c);}};_pExtFileDownload.on_fire_onload=function(_a,_b,_c,_d,_e){if(this.onload&&this.onload._has_handlers&&_d!="about:blank"){var _f=new nexacro.ExtFileLoadEventInfo(this,"onsuccess");_f["fileId"]=_e;_f["type"]="download";_f["errorcode"]=_b;_f["errormsg"]=_c;_f["url"]=_d;return this.onload._fireEvent(this,_f);}};_pExtFileDownload.on_fire_onloadend=function(_a,_b,_c,_d){if(this.onloadend&&this.onloadend._has_handlers){var _c=new nexacro.Event.ExtFileProgress(_a,"onloadend",_b,_c.lengthComputable,_c.loaded,_c.total);_c["fileId"]=_d;this.onloadend._fireEvent(this,_c);}};delete _pExtFileDownload;};nexacro.ExtFileTransaction=function(_a,_b,_c,_d,_e,_f){nexacro.CommunicationItem.call(this,_a,_b,false);this.context=_c;this.inputDatasets=this._parseDSParam(_d);this.outputDatasets=this._parseDSParam(_e);this.datatype=(!_f?0:_f);this._sendData=this._serializeData();this._usewaitcursor=application.usewaitcursor;this._remain_data=null;if(nexacro.Browser=="IE"&&nexacro.BrowserVersion<9){this._check_responseXML=true;}else{this._check_responseXML=false;}};var _pFileTransaction=nexacro._createPrototype(nexacro.CommunicationItem);nexacro.ExtFileTransaction.prototype=_pFileTransaction;_pFileTransaction._type="ExtFileTransaction";_pFileTransaction._type_name="ExtFileTransaction";_pFileTransaction._serializeData=function(){if(this.datatype==1){return this.__serializeBIN();}else if(this.datatype==2){return this.__serializeSSV();}else{return this.__serializeXML();}};_pFileTransaction._TABS=["","\t","\t\t","\t\t\t","\t\t\t\t","\t\t\t\t\t","\t\t\t\t\t\t"];_pFileTransaction._writeData=function(_a,_b,_c){_a[_a.length]=this._TABS[_c]+_b;};_pFileTransaction.__serializeXML=function(){var _a=0;var _b=[];var _c=application._cookie_variables;this._writeData(_b,"<?xml version=\"1.0\" encoding=\"UTF-8\"?>",_a);this._writeData(_b,"<!DOCTYPE p_nexacro [ <!ENTITY nbsp '&#160;'> <!ENTITY quot '&#34;'>"+" <!ENTITY amp '&#38;'> <!ENTITY lt '&#60;'> <!ENTITY gt '&#62;'> ]>",_a);this._writeData(_b,"<Root xmlns=\"http://www.nexacroplatform.com/platform/dataset\">",_a++ );var _d=0;var _e=0;var _f=this.parameters;if(_f){_d=_f.length;}if(_c){_e=_c.length;}if(_d>0||_e>0){this._writeData(_b,"<Parameters>",_a++ );if(_e){for(var _m=0;_m<_e;_m++ ){var _g=_c[_m];var _h=application[_g];if(_h&&_h.length){_h=nexacro._encodeXml(_h);this._writeData(_b,"<Parameter id=\""+_g+"\">"+_h+"</Parameter>",_a);}else{this._writeData(_b,"<Parameter id=\""+_g+"\" />",_a);}}}if(_d>0){for(var _m=0;_m<_d;_m++ ){var _g=_f[_m].lval;var _h=_f[_m].rval;if(_h&&_h.length){_h=nexacro._encodeXml(_h);this._writeData(_b,"<Parameter id=\""+_g+"\">"+_h+"</Parameter>",_a);}else{this._writeData(_b,"<Parameter id=\""+_g+"\" />",_a);}}}this._writeData(_b,"</Parameters>", --_a);}else{this._writeData(_b,"<Parameters />",_a);}var _i=this.inputDatasets;if(_i&&_i.length){var _j=_i.length;for(_m=0;_m<_j;_m++ ){var _g=_i[_m].rval;var _k=this.context._getDatasetObject(_g);if(_k){_b.push(_k._saveXML(_i[_m].lval,_i[_m].saveType,_a,false));}}}this._writeData(_b,"</Root>", --_a);var _l;if(_d==0&&_e==0&&(!_i||_i.length==0)){_l="";}else{_l=_b.join("\n");}return _l;};_pFileTransaction.__serializeSSV=function(){var _a=String.fromCharCode(30);var _b=String.fromCharCode(31);var _c=0;var _d=[];var _e=application._cookie_variables;var _f,_g,_h;var _i=0;_d.push("SSV:utf-8"+_a);var _j=0;var _k=0;var _l=this.parameters;if(_l){_j=_l.length;}if(_e){_k=_e.length;}if(_k>0){for(i=0;i<_k;i++ ){_f=_e[i];_g=application[_f];if(_g&&_g.length){_g=_g;_d.push(_f+"="+_g+_a);}else{_d.push(_f+"="+_a);}}}if(_j>0){for(i=0;i<_j;i++ ){_f=_l[i].lval;_g=_l[i].rval;if(_g){_g=_g;_d.push(_f+"="+_g+_a);}else{_d.push(_f+"="+_a);}}}var _m=this.inputDatasets;if(_m&&_m.length){var _n=_m.length;for(var _p=0;_p<_n;_p++ ){var _f=_m[_p].rval;var _h=this.context._getDatasetObject(_f);if(_h){_d.push(_h.saveSSV(_m[_p].lval,_m[_p].saveType));}}}var _o=_d.join("");return _o;};_pFileTransaction.__serializeBIN=function(){var _a=this.__serializeSSV();if(_a){return nexacro._convertStreamSSVToBIN(_a);}return "";};_pFileTransaction.on_start=function(){if(this._usewaitcursor){this._showWaitCursor();}};_pFileTransaction.on_load_file=function(_a,_b,_c,_d){if(this._usewaitcursor){this._hideWaitCursor();}if(!_a){return [ -1,"Stream Data is null!"];}_a=_a.trim();var _e=_a.substring(0,3);var _f,_g,_h,_i,_j=0,_k="";var _l=this.scope;if(!_l["_extFileDsPool"]){_l["_extFileDsPool"]=[];}var _m=_l["_extFileDsPool"];if(_e=="SSV"){_f=this.__deserializeSSV(_a);_j=_f[0];_k=_f[1];}else{_f=this._deserializeXMLFromStr(_a);_j=_f[0];_k=_f[1];}var _n=[];var _o=_m.length;var _p;for(var _g=0;_g<_o;_g++ ){_p=_m[_g];if(_p["_used"]){_n.push(_p);}}delete nexacro._CommunicationManager[this.path];if(this._protocol<0){_a=this.on_decrypt(_a);}this._addCookieToGlobalVariable(_b);var _q=this.callbackList;var _r=_q.length;if(_r>0){for(var _g=0;_g<_r;_g++ ){var _s=_q[_g];var _t=_s.target;if(_t._is_alive!=false){_s.callback.call(_t,this.type,_j,_k,this.path,_n);}}_q.splice(0,_r);this.releaseResponseDataset(_l);}};_pFileTransaction.on_loadframe_file=function(_a,_b){if(this._usewaitcursor){this._hideWaitCursor();}var _c,_d,_e,_f,_g,_h,_i,_j,_k=0,_l="";_j=this.context;_f=nexacro._getXMLDocument(_a);_g=nexacro._getCommDataFromDom(_f,this);_h=_g[0];for(_c=0;_c<_h.length;_c++ ){_d=_h[_c]["id"];if(_d&&_d.length){_e=_h[_c]["val"];if(_d=="ErrorCode"){_k=parseInt(_e,10);if(!isFinite(_k)){_k= -1;}}else if(_d=="ErrorMsg"){_l=_e;}}}delete nexacro._CommunicationManager[this.path];var _m=this.callbackList;var _n=_m.length;if(_n>0){for(var _c=0;_c<_n;_c++ ){var _o=_m[_c];var _b=_o.target;if(_b._is_alive!=false){_o.callback.call(_b,this.type,_k,_l,this.path,_g[1]);}}_m.splice(0,_n);}};_pFileTransaction.on_down_file=function(_a,_b,_c,_d,_e){var _f,_g=this._downfilename;if(nexacro._ExtFileUpDownloadSupport.Download){_f=this._createObjectURL(_a);this._downfileblob=_f;var _h=nexacro._IframeManager;var _i=_h.search_form(_b);if(_i&&_i.node){var _j=_i.node;var _k=nexacro._managerFrameDoc;var _l=_k.createElement("a");_l.href=_f;_l.download=_g;_l.style.display="none";nexacro.__appendDOMNode(_j,_l);_l.click();nexacro.__removeDOMNode(_j,_l);_l=null;}}else if(nexacro._ExtFileUpDownloadSupport.MSSave){window.navigator.msSaveOrOpenBlob(_a,_g);}else{nexacro._download(this.path);}delete nexacro._CommunicationManager[this.path];if(this._protocol<0){_a=this.on_decrypt(_a);}this._addCookieToGlobalVariable(_c);var _m=this.callbackList;var _n=_m.length;if(_n>0){for(var _q=0;_q<_n;_q++ ){var _o=_m[_q];var _p=_o.target;if(_p._is_alive!=false){_o.callback.call(_p,this.type,_d,_e,this.path);}}_m.splice(0,_n);}};_pFileTransaction.on_downend_file=function(){var _a=this._downfileblob,_b=this;if(nexacro._ExtFileUpDownloadSupport.Download&&_a){setTimeout(function(){_b._revokeObjectURL(_a);},250);}if(this._usewaitcursor){this._hideWaitCursor();}this._downfileblob=null;this._downfilename=null;};_pFileTransaction._createObjectURL=function(_a){if(window.webkitURL){return window.webkitURL.createObjectURL(_a);}else if(window.URL&&window.URL.createObjectURL){return window.URL.createObjectURL(_a);}else{return null;}};_pFileTransaction._revokeObjectURL=function(_a){if(window.webkitURL){window.webkitURL.revokeObjectURL(_a);}else if(window.URL&&window.URL.revokeObjectURL){window.URL.revokeObjectURL(_a);}};_pFileTransaction.__deserializeSSV=function(_a){var _b=String.fromCharCode(30);var _c=String.fromCharCode(31);var _d=0;var _e="SUCCESS";if(!_a){return [ -1,"Stream Data is null!"];}var _f=this.context;var _g=_a.split(_b);var _h=_g.length;var _i=0;_i++ ;var _j;for(;_i<_h;_i++ ){_j=_g[_i];if(_j.substring(0,7)!="Dataset"){var _k=_j.split(_c);var _l=_k.length;for(var _z=0;_z<_l;_z++ ){var _m=_k[_z];var _n=_m;var _o=undefined;var _p=_m.indexOf("=");if(_p>=0){_n=_m.substring(0,_p);_o=_m.substring(_p+1);}if(_n){var _q=_n;var _p=_n.indexOf(":");if(_p>=0){_q=_n.substring(0,_p);}if(_q=="ErrorCode"){_d=parseInt(_o)|0;if(isFinite(_d)==false){_d= -1;}}else if(_q=="ErrorMsg"){_e=_o;}else if(_q in _f){if(typeof (_f[_q])!="object"){_f[_q]=_o;}}else{if(application._existVariable(_q)){application[_q]=_o;}}}}}else{break;}}if(_d<= -1){return [_d,_e];}var _r=this.inputDatasets;if(_r&&_r.length){var _s=_r.length;for(var _z=0;_z<_s;_z++ ){var _t=_r[_z];var _u=_f._getDatasetObject(_t.rval);if(_u){_u.applyChange();}}}var _v={};var _w=this.outputDatasets;if(_w&&_w.length){var _x=_w.length;for(var _z=0;_z<_x;_z++ ){var _t=_w[_z];if(_v[_t.rval]==undefined){_v[_t.rval]=_t.lval;}}}function find_next_dataset_loop(){if(_i<_h){_j=_g[_i];if(_j.substring(0,7)=="Dataset"){return true;}_i++ ;return false;}return true;}while(_i<_h){while(true){if(find_next_dataset_loop()){break;}if(find_next_dataset_loop()){break;}if(find_next_dataset_loop()){break;}if(find_next_dataset_loop()){break;}if(find_next_dataset_loop()){break;}if(find_next_dataset_loop()){break;}if(find_next_dataset_loop()){break;}if(find_next_dataset_loop()){break;}if(find_next_dataset_loop()){break;}if(find_next_dataset_loop()){break;}}if(_i<_h){var _p=_j.indexOf(":");if(_p>=0){var _y=_j.substring(_p+1);if(_y&&_y.length){var _u=this.getResponseDataset(_f);trace("@step 10 remoteId="+_y+", ds="+_u);if(_u){_u.rowposition= -1;_i=_u.loadFromSSVArray(_g,_h,_i,true);}else{_i++ ;}}else{_i++ ;}}else{_i++ ;}}}return [_d,_e];};_pFileTransaction.getResponseDataset=function(_a){var _b=_a["_extFileDsPool"];var _c=_b.length;var _d;var _e;var _f;var _g="_ds_extResponse_";for(var _i=0;_i<_c;_i++ ){_e=_b[_i];_f=_e["_used"];if(!_f){_d=_e;_d["_used"]=true;break;}}if(!_d){var _h=Eco.getSequenceId(_a,_g);_d=new Dataset(_h);_d["_used"]=true;_b.push(_d);}return _d;};_pFileTransaction.releaseResponseDataset=function(_a){var _b=_a["_extFileDsPool"];var _c=_b.length;var _d;var _e;for(var _f=0;_f<_c;_f++ ){_d=_b[_f];_d.clear();_d["_used"]=false;}};_pFileTransaction._deserializeXMLFromStr=function(_a){var _b=0;var _c="SUCCESS";if(!_a){return [ -1,"Stream Data is null!"];}var _d=this.context;var _e=_a.indexOf("<Dataset ");var _f;if(_e> -1){_f=_a.substring(0,_e);}else{_f=_a;}var _g=0;var _h=nexacro._getXMLTagData(_f,_g,"<Parameters>","</Parameters>");if(_h){var _i=_h[0];_g=_h[3];var _j=0;var _k=nexacro._getXMLTagData2(_i,_j,"<Parameter ","</Parameter>");while(_k){_j=_k[3];var _l=_k[1];var _m=nexacro._getXMLAttributeID(_l);if(_m&&_m.length){var _n=_k[0];if(_m=="ErrorCode"){_b=parseInt(_n)|0;if(isFinite(_b)==false){_b= -1;}}else if(_m=="ErrorMsg"){_n=nexacro._decodeXml(_n);_c=_n;}else{this._setParamter(_m,_n);}}_k=nexacro._getXMLTagData2(_i,_j,"<Parameter ","</Parameter>");}}if(_b<= -1){return [_b,_c];}var _o={};var _p=this.outputDatasets;if(_p&&_p.length){var _q=_p.length;for(var _w=0;_w<_q;_w++ ){var _r=_p[_w];if(_o[_r.rval]==undefined){_o[_r.rval]=_r.lval;}}}if(_e>= -1){var _s=nexacro._getXMLTagData2(_a,_e,"<Dataset ","</Dataset>");while(_s){_e=_s[3];var _l=_s[1];var _t=nexacro._getXMLAttributeID(_l);if(_t&&_t.length){var _u=_o[_t];var _v=null;if(_u){_v=_d._getDatasetObject(_u);}else{_v=this.getResponseDataset(_d);}if(_v){_v.loadFromXMLStr(_s[0]);}}_s=nexacro._getXMLTagData2(_a,_e,"<Dataset ","</Dataset>");}}_o=null;return [_b,_c];};_pFileTransaction._parseVarParam=function(_a){if(!_a){return;}_a=_a.replace(/^\s*|\s*$/g,'');if(_a.length==0){return undefined;}var _b=[];var _c=/([a-zA-Z_][a-zA-Z0-9_]*)\s*="([^"]*)"|([a-zA-Z_][a-zA-Z0-9_]*)\s*='([^']*)'|([a-zA-Z_][a-zA-Z0-9_]*)\s*=([^ ]*)/g;var _d=_a.match(_c);var _e=_d.length;for(var _l=0;_l<_e;_l++ ){var _f=_d[_l].split("=");var _g=_f.length;var _h=_f[0].trim();var _i=_f[1].trim();for(var _m=2;_m<_g;_m++ ){_i=_i+"="+_f[_m].trim();}var _j="N";var _g=_i.length;if(_g>0){if((_i.charAt(0)=="\""&&_i.charAt(_g-1)=="\"")||(_i.charAt(0)=="\'"&&_i.charAt(_g-1)=="\'")){_i=_i.substring(1,_g-1);}}var _k={lval:_h,rval:_i,saveType:_j};_b.push(_k);}return _b;};_pFileTransaction._parseDSParam=function(_a){if(!_a){return undefined;}var _b=[];var _c=/([a-zA-Z_][a-zA-Z0-9_]*)\s*=\s*([a-zA-Z_][a-zA-Z0-9_]*(?:\:[aAuUnN])?)/g;var _d=_a.match(_c);if(!_d||_d.length==0){return undefined;}var _e=_d.length;var _f=0;for(var _p=0;_p<_e;_p++ ){var _g=_d[_p].split("=");var _h=_g[0].trim();var _i=_g[1].trim();var _j=false;for(var _q=0;_q<_p;_q++ ){var _k=_d[_q].split("=");var _l=_k[0].trim();if(_h==_l){_j=true;}}if(_j){_p++ ;return false;}var _m="N";var _n=_i.indexOf(":");if(_n> -1){_m=_i.substring(_n+1);_i=_i.substring(0,_n);}var _o={lval:_h,rval:_i,saveType:_m};_b.push(_o);}return _b;};_pFileTransaction._setParamter=function(_a,_b){var _c=this.context;if(_a in _c){if(typeof (_c[_a])!="object"){_c[_a]=_b;}}else{if(application._existVariable(_a)){application[_a]=_b;}}};_pFileTransaction._getDataset=function(_a){var _b=this.context;var _c=this.outputDatasets;if(_c&&_c.length){var _d=_c.length;for(var _f=0;_f<_d;_f++ ){var _e=_c[_f];if(_e.rval==_a){return _b._getDatasetObject(_e.lval);}}}};_pFileTransaction._showWaitCursor=function(){return;var _a=this.context;if(_a){_a._waitCursor(true,_a);}};_pFileTransaction._hideWaitCursor=function(){return;var _a=this.context;if(_a){_a._waitCursor(false,_a);}};delete _pFileTransaction;nexacro.ExtFileButtonCtrl=function(_a,_b,_c,_d,_e,_f,_g,_h,_i){nexacro.Button.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i);this._is_subcontrol=true;};var _pExtFileButtonCtrl=nexacro._createPrototype(nexacro.Button);nexacro.ExtFileButtonCtrl.prototype=_pExtFileButtonCtrl;_pExtFileButtonCtrl._type="ExtFileButtonCtrl";_pExtFileButtonCtrl._type_name="ExtFileButtonCtrl";_pExtFileButtonCtrl.on_find_CurrentStyle_background=function(_a){return this.parent._find_pseudo_obj("buttonbackground",_a,"background");};_pExtFileButtonCtrl.on_find_CurrentStyle_gradation=function(_a){return this.parent._find_pseudo_obj("buttongradation",_a,"gradation");};_pExtFileButtonCtrl.on_find_CurrentStyle_border=function(_a){return this.parent._find_pseudo_obj("buttonborder",_a,"border");};_pExtFileButtonCtrl.on_find_CurrentStyle_bordertype=function(_a){return this.parent._find_pseudo_obj("buttonbordertype",_a,"bordertype");};_pExtFileButtonCtrl.on_find_CurrentStyle_padding=function(_a){var _b=this.parent._find_pseudo_obj("buttonpadding",_a,"padding");return (_b)?_b:this._defaultPadding;};_pExtFileButtonCtrl.on_find_CurrentStyle_margin=function(_a){var _b=this.parent._find_pseudo_obj("buttonmargin",_a,"margin");return (_b)?_b:this._defaultMargin;};_pExtFileButtonCtrl.on_find_CurrentStyle_font=function(_a){var _b=this.parent._find_pseudo_obj("buttonfont",_a,"font")||this._find_inherit_pseudo_obj("font",_a,"font")||nexacro.Component._default_font;return _b;};_pExtFileButtonCtrl.on_find_CurrentStyle_color=function(_a){var _b=this.parent._find_pseudo_obj("buttoncolor",_a,"color")||this._find_inherit_pseudo_obj("color",_a,"color")||nexacro.Component._default_color;return _b;};_pExtFileButtonCtrl.on_find_CurrentStyle_size=function(_a){var _b=this.parent._find_pseudo_obj("buttonsize",_a,"size");return (_b)?_b:this._defaultButtonsize;};_pExtFileButtonCtrl.on_find_CurrentStyle_text=function(_a){var _b=this.parent._find_pseudo_obj("buttontext",_a,"text");return (_b)?_b:this._defaultButtontext;};_pExtFileButtonCtrl._isPopupFrame=function(){return false;};delete _pExtFileButtonCtrl;};