if(!nexacro.HTMLViewer){nexacro.HTMLViewerLoadCompletedEventInfo=function(_a,_b){this.id=this.eventid||"onloadcompleted";this.fromobject=this.fromreferenceobject=_a;this.html=_b;};var _pEventInfo=nexacro._createPrototype(nexacro.Event,nexacro.HTMLViewerLoadCompletedEventInfo);nexacro.HTMLViewerLoadCompletedEventInfo.prototype=_pEventInfo;_pEventInfo._type_name="HTMLViewerLoadCompletedEventInfo";delete _pEventInfo;nexacro.HTMLViewer_Style=function(_a){nexacro.Style.call(this);if(_a){this._target=_a;}};var _pHTMLViewerStyle=nexacro._createPrototype(nexacro.Style);nexacro.HTMLViewer_Style.prototype=_pHTMLViewerStyle;_pHTMLViewerStyle.__custom_emptyObject=function(){};_pHTMLViewerStyle.__get_custom_style_value=function(){};nexacro.HTMLViewer_CurrentStyle=function(){nexacro.CurrentStyle.call(this);};var _pHTMLViewerCurrentStyle=nexacro._createPrototype(nexacro.CurrentStyle);nexacro.HTMLViewer_CurrentStyle.prototype=_pHTMLViewerCurrentStyle;_pHTMLViewerCurrentStyle.__custom_emptyObject=_pHTMLViewerStyle.__custom_emptyObject;_pHTMLViewerCurrentStyle.__get_custom_style_value=_pHTMLViewerStyle.__get_custom_style_value;delete _pHTMLViewerStyle;delete _pHTMLViewerCurrentStyle;nexacro.HTMLViewer=function(_a,_b,_c,_d,_e,_f,_g,_h,_i){nexacro.Component.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i);this.html="";this.autofittype="none";this.scrollbars="autoboth";this._scrollbars=3;this._is_scrollable=true;this._web_elem=null;this._apply_client_padding=false;this._is_focus_accept=false;this._event_list={"onmove":1,"onsize":1,"onloadcompleted":1};this._doc=null;this._contentDoc=null;this._blockLoadFlag=false;this._init_left=null;this._init_top=null;this._init_width=null;this._init_height=null;this._init_right=null;this._init_bottom=null;this._content_width=null;this._content_height=null;};var _pHTMLViewer=nexacro._createPrototype(nexacro.Component);nexacro.HTMLViewer.prototype=_pHTMLViewer;_pHTMLViewer._type_name="HTMLViewer";_pHTMLViewer.on_find_CurrentStyle_background=function(_a){return null;};_pHTMLViewer.on_find_CurrentStyle_bordertype=function(_a){return null;};_pHTMLViewer.on_apply_custom_pseudo=function(_a){var _b=this.currentstyle;var _c=this.on_find_CurrentStyle_border(_a);if(_b.border!=_c){_b.border=_c;this.on_apply_style_border(_c);}var _d=this.on_find_CurrentStyle_padding(_a);if(_b.padding!=_d){_b.padding=_d;this.on_apply_style_padding(_d);}};_pHTMLViewer.on_apply_style_border=function(_a){var _b=this._control_element;if(_b){var _c=this.currentstyle;_b.setElementBorder(_a,_c.bordertype);var _d=this._web_elem;if(_d&&this._is_created){this._updateDisplay();}}};_pHTMLViewer.on_apply_style_padding=function(_a){var _b=this._web_elem;if(_b&&this._is_created){var _c=this._contentDoc;if(_c){var _d=_c.getProperty("body");var _e=_d.getProperty("style");var _f=_a.top+"px "+_a.right+"px "+_a.bottom+"px "+_a.left+"px ";_e.setProperty("padding",_f);this._setElementSize();this._updateDisplay();}}};_pHTMLViewer.on_create_contents=function(){var _a=this.getElement();if(_a){this._web_elem=new nexacro.WebBrowserPluginElement(_a);this._web_elem.setElementPosition(0,0);this._web_elem.setElementSize(this._client_width,this._client_height);}};_pHTMLViewer.on_created_contents=function(){var _a=this._web_elem;if(_a){_a.component=this;_a.create();_a.initEvent();nexacro._observeSysEvent(_a._handle,"mouseover","onmouseover",this._web_elem_mouseover);this._blockLoadFlag=false;_a._setUrl("about:blank");}this._init_left=this.left;this._init_top=this.top;this._init_width=this.width;this._init_height=this.height;this._init_right=this.right;this._init_bottom=this.bottom;};_pHTMLViewer.on_destroy_contents=function(){var _a=this._web_elem;if(_a){nexacro._stopSysObserving(_a._handle,"mouseover","onmouseover",this._web_elem_mouseover);_a.destroy();this._web_elem=null;}};_pHTMLViewer.on_change_containerRect=function(_a,_b){};_pHTMLViewer.on_load_handler=function(_a){if(this._blockLoadFlag){return;}this._blockLoadFlag=true;var _b=this._web_elem.getProperty("document");if(!_b._handle){_b=this._web_elem.getProperty("contentDocument");if(!_b._handle){_b=this._web_elem.getProperty("contentWindow").getProperty("document");}}if(_b){this._doc=_b;var _c='<div id="container"><iframe id="ifm" scrolling="no" frameborder="0" style="position: absolute; left: 0px; top: 0px; width: 0px; height: 0px; overflow:hidden;"></iframe></div>';_b.getProperty("body").setProperty("innerHTML",_c);var _d=_b.getProperty("body").getProperty("style");_d.setProperty("margin","0px");_d.setProperty("border","0px");_d.setProperty("position","absolute");_d.setProperty("width","100%");_d.setProperty("height","100%");_d.setProperty("overflow","hidden");var _e=_b.callMethod("getElementById","ifm");var _f=_e.getProperty("contentWindow");var _g=_e.getProperty("contentDocument");if(!_g){_g=_f.getProperty("document");}if(_g){this._contentDoc=_g;}else{trace("no found document !!");}if(nexacro.Browser=="Runtime"){var _h=_b.getProperty("parentWindow");if(!_h){_h=_b.getProperty("defaultView");}var _i='';_i+='var ifm = document.getElementById("ifm");';_i+='var func = function(evt){';_i+='		var el = evt ? evt.target : event.srcElement;';_i+='		if ( el._checkReady ) {';_i+='			el._checkReady = false;';_i+='			document.title = "__readyIframe";';_i+='		} else { ';_i+='			setTimeout(function(){';_i+='				el.style.width = el.contentWindow.document.body.scrollWidth;';_i+='				el.style.height = el.contentWindow.document.body.scrollHeight;';_i+='				document.title = "__loadComplete";';_i+='			}, 10);';_i+='		} ';_i+='};';_i+='ifm.onload = func;';_i+='ifm._checkReady = true;';_i+='var ifmDoc = ifm.contentWindow.document;';_i+='ifmDoc.open();';_i+='ifmDoc.write("<div></div>");';_i+='ifmDoc.close();';_i+='var el = document.createElement("textarea");';_i+=' el.id = "txt";';_i+=' el.style.display = "none";';_i+='	document.body.appendChild(el);';_h.callMethod("setTimeout","(function(){"+_i+"})()",0);}else{var _j=this._web_elem._handle;var _e=(_j.contentDocument||_j.contentWindow.document).getElementById("ifm");_e._component=this;nexacro._observeSysEvent(_e,"load","onload",this._web_elem_iframe_onload);this.on_fire_onusernotify(this._web_elem,"__readyIframe");}}else{trace("no found document !!");}};_pHTMLViewer.on_fire_onusernotify=function(_a,_b){if(_b=="__readyIframe"){if(!this.__readyIframe){this.__readyIframe=true;if(this.html!=null&&this.html.length>0){this.on_apply_html();}}}else if(_b=="__loadComplete"){this._onloadcompleted();}return true;};_pHTMLViewer.on_fire_onloadcompleted=function(_a,_b){if(this.onloadcompleted&&this.onloadcompleted._has_handlers){var _c=new nexacro.HTMLViewerLoadCompletedEventInfo(_a,_b);_c.eventid="onloadcompleted";return this.onloadcompleted._fireEvent(this,_c);}return true;};_pHTMLViewer.on_getBindableProperties=function(){return "html";};_pHTMLViewer.on_init_bindSource=function(_a,_b,_c){if(_b=="html"){this.set_html("");return true;}};_pHTMLViewer.on_change_bindSource=function(_a,_b,_c,_d,_e){if(_a=="html"){this.set_html(_b.getColumn(_c,_d));return true;}return false;};_pHTMLViewer.on_hscroll=function(_a,_b){if(this.onhscroll&&this.onhscroll._has_handlers){_b.fromobject=this;this.onhscroll._fireEvent(this,_b);}var _c=this._control_element;if(_c){_c.setElementHScrollPos(_b.pos);}return true;};_pHTMLViewer.on_vscroll=function(_a,_b){if(this.onvscroll&&this.onvscroll._has_handlers){_b.fromobject=this;this.onvscroll._fireEvent(this,_b);}var _c=this._control_element;if(_c){_c.setElementVScrollPos(_b.pos);}return true;};_pHTMLViewer.set_html=function(_a){if(_a!=this.html){this.html=_a;this.on_apply_html();}};_pHTMLViewer.on_apply_html=function(){var _a=this._web_elem;if(_a&&this._is_created&&this._doc){var _b=this.html;if(nexacro._isNull(_b)){_b="";}else{_b=nexacro._toString(_b);}if(_b.length==0){_b="<body></body>";}_a.setElementSize(0,0);if(nexacro.Browser=="Runtime"){this._doc.callMethod("getElementById","txt").setProperty("value",_b);var _c='';_c+='var ifm = document.getElementById("ifm");';_c+='ifm.style.width = "10px";';_c+='ifm.style.height = "10px";';_c+='var doc = ifm.contentDocument || ifm.contentWindow.document;';_c+='document.title = "";';_c+='doc.open();';_c+='doc.write(document.getElementById("txt").value);';_c+='var style = doc.body.style;';_c+='style.border = "0px";';_c+='style.margin = "0px";';_c+='style.position = "absolute";';_c+='style.width = "auto";';_c+='style.height = "auto";';_c+='style.overflow = "hidden";';var _d=this.on_find_CurrentStyle_padding(this._pseudo);if(_d){var _e=_d.top+"px "+_d.right+"px "+_d.bottom+"px "+_d.left+"px ";_c+='style.padding = "'+_e+'";';}_c+='doc.close();';var _f=this._doc.getProperty("parentWindow");if(!_f){_f=this._doc.getProperty("defaultView");}_f.callMethod("setTimeout","(function(){ "+_c+" })()",0);}else{var _g=this._web_elem._handle;var _h=(_g.contentDocument||_g.contentWindow.document).getElementById("ifm");var _i=_h.contentDocument||_h.contentWindow.document;_h.style.width="10px";_h.style.height="10px";_i.open();_i.write(_b);var _j=_i.body.style;_j.border="0px";_j.margin="0px";_j.position="absolute";_j.width="auto";_j.height="auto";_j.overflow="hidden";var _d=this.on_find_CurrentStyle_padding(this._pseudo);if(_d){var _e=_d.top+"px "+_d.right+"px "+_d.bottom+"px "+_d.left+"px ";_j.padding=_e;}_i.close();}}};_pHTMLViewer.set_autofittype=function(_a){if(_a!=this.autofittype){if(nexacro._isNull(_a)){_a="none";}this.autofittype=_a;this.on_apply_autofittype();}};_pHTMLViewer.on_apply_autofittype=function(){var _a=this._web_elem;if(_a&&this._is_created){this._updateDisplay();}};_pHTMLViewer.set_enable=function(_a){_a=nexacro._toBoolean(_a);if(this.enable!=_a){var _b=this._control_element;this.enable=_a;if(this._is_created){var _c=(this.parent._real_enable&&_a);if(this._real_enable!=_c){this._real_enable=_c;this._stat_change(_c?"enable":"disable",this._pseudo);this.on_apply_prop_enable(this._real_enable);if(this._web_elem){this._web_elem.setElementEnable(_c);}}}}};_pHTMLViewer.set_scrollbars=function(_a){nexacro.Component.prototype.set_scrollbars.call(this,_a);this._updateDisplay();};_pHTMLViewer._web_elem_mouseover=function(_a){nexacro._cur_drag_info=null;nexacro._cur_track_info=null;};_pHTMLViewer._web_elem_iframe_onload=function(_a){var _b=_a.target||_a.srcElement;_b._component._onloadcompleted();};_pHTMLViewer._onloadcompleted=function(){var _a=this._web_elem;if(_a){this.on_fire_onloadcompleted(this,this.html);this._setElementSize();this._updateDisplay();if(nexacro.Browser=="Runtime"){}else{var _b=window;var _c=this.getElement();var _d=function(_h){nexacro._syshandler_onmousewheel(_b.nexacro_HTMLSysEvent,_c._handle,_h);};var _e=this._contentDoc;var _f=_e.getProperty("body");var _g=_f._handle;if('onwheel' in _g){nexacro._observeSysEvent(_g,"wheel","onwheel",_d);}else{nexacro._observeSysEvent(_g,"mousewheel","onmousewheel",_d);}nexacro._observeSysEvent(_g,"DOMMouseScroll","onDOMMouseScroll",_d);}}};_pHTMLViewer._setElementSize=function(){var _a=this._web_elem;if(_a){var _b=this._contentDoc;var _c=_b.getProperty("body");this._content_width=_c.getProperty("scrollWidth");this._content_height=_c.getProperty("scrollHeight");var _d=this._doc.callMethod("getElementById","ifm");_d.getProperty("style").setProperty("width",this._content_width+"px");_d.getProperty("style").setProperty("height",this._content_height+"px");_a.setElementSize(this._content_width,this._content_height);}};_pHTMLViewer._updateDisplay=function(){var _a=this.getElement();var _b=this._web_elem;if(_a&&_b){var _c=this.html;var _d=this.autofittype;var _e=this.scrollbars;var _f=this._pseudo;var _g=this.on_find_CurrentStyle_border(_f);var _h=this.on_find_CurrentStyle_padding(_f);var _i=(_g?_g._getBorderWidth():0);var _j=(_g?_g._getBorderHeight():0);var _k=this.left;var _l=this.top;var _m=null;var _n=null;var _o=null;var _p=null;var _q=false;var _r=false;if(_d=="both"){_m=this._content_width+_i;_n=this._content_height+_j;}else if(_d=="width"){_m=this._content_width+_i;_n=this._init_height;if(_e!="none"&&this._content_height+_j>_n){_q=true;}}else if(_d=="height"){_m=this._init_width;_n=this._content_height+_j;if(_e!="none"&&this._content_width+_i>_m){_r=true;}}else{_m=this._init_width;_n=this._init_height;_o=this._init_right;_p=this._init_bottom;}if(_q){if(this.vscrollbar){_m+=this.vscrollbar._adjust_width;}else{if(!this._vscrollbar_size){var _s=new nexacro.ScrollBarCtrl("vscrollbar","absolute",0,0,nexacro.Component.SCROLLBAR_DEFAULT_SIZE,this._client_width,null,null,this);_s._setDirection("vert");_s.on_update_style_scrollbarsize();this._vscrollbar_size=_s.scrollbarsize;_s.destroy();_s=null;}_m+=this._vscrollbar_size;}}if(_r){if(this.hscrollbar){_n+=this.hscrollbar._adjust_height;}else{if(!this._hscrollbar_size){var _t=new nexacro.ScrollBarCtrl("hscrollbar","absolute",0,0,nexacro.Component.SCROLLBAR_DEFAULT_SIZE,this._client_width,null,null,this);_t._setDirection("horz");_t.on_update_style_scrollbarsize();this._hscrollbar_size=_t.scrollbarsize;_t.destroy();_t=null;}_n+=this._hscrollbar_size;}}this.move(_k,_l,_m,_n,_o,_p);var _u=this._content_width+_i;var _v=this._content_height+_j;if(_r||(_n==_v)){if(this.hscrollbar){_v-=this.hscrollbar._adjust_height;}else{_v-=this._hscrollbar_size;}}if(_q||(_m==_u)){if(this.vscrollbar){_u-=this.vscrollbar._adjust_width;}else{_u-=this._vscrollbar_size;}}_a.setElementScrollMaxSize(_u,_v);this._onResetScrollBar();}};delete _pHTMLViewer;nexacro.HTMLViewerCtrl=function(_a,_b,_c,_d,_e,_f,_g,_h,_i){nexacro.HTMLViewer.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i);this._is_subcontrol=true;};var _pHTMLViewerCtrl=nexacro.HTMLViewerCtrl.prototype=nexacro._createPrototype(nexacro.HTMLViewer,nexacro.HTMLViewerCtrl);_pHTMLViewerCtrl._type_name="HTMLViewerControl";nexacro._setForControlStyleFinder(_pHTMLViewerCtrl);delete _pHTMLViewerCtrl;}