if(!JsNamespace.exist("Eco.XpCompFactory")){JsNamespace.declare("Eco.XpCompFactory",{"getXpCompByName":function(_a,_b){var _c="default",_d=_a;if(Eco.isObject(_a)){_d=_a.target;_c=_a.poolName;}var _e=Eco.XpCompFactory._getUsed(_d,_c);if(_e){return _e[_b];}},"_getCache":function(_a,_b,_c,_d){var _e;if(_b=="default"){_e=_a._defaultCache;if(_d&&!_e){_a._defaultCache={};_e=_a._defaultCache;}if(!_e){return null;}if(!_c||!_c.length){Eco.Logger.error({message:"poolName이 'default'면 type값이 반드시 존재해야 합니다.",stack:true});}var _f=_e[_c];if(_d&&!_f){_e[_c]=[];_f=_e[_c];}return _f;}else{_e=_a._cache;if(_d&&!_e){_a._cache={};_e=_a._cache;}if(!_e){return null;}var _g=_e[_b];if(_d&&!_g){_e[_b]=[];_g=_e[_b];}return _g;}},"_getUsed":function(_a,_b,_c){var _d;if(_b=="default"){_d=_a._defaultUsed;if(_c&&!_d){_a._defaultUsed={};_d=_a._defaultUsed;}}else{_d=_a._used;if(_c&&!_d){_a._used={};_d=_a._used;}if(!_d){return null;}var _e=_d[_b];if(_c&&!_e){_d[_b]={};_e=_d[_b];}return _e;}return _d;},"getXpComp":function(_a,_b,_c){var _d,_e="default",_f=_a,_g,_h=Eco.XpCompFactory;if(Eco.isObject(_a)){_f=_a.target;_e=_a.poolName;}_g=_h._getCache(_f,_e,_b);var _i;if(!Eco.isString(arguments[2])){_i=null;}else{_i=_c;}if(_g&&_g.length){_d=_g.pop();_d._id=_i||_d._id||_d.name;}else{var _j=_h._getConstructor(_f,_b);if(!_j){Eco.Logger.error({"message":"type("+_b+") is not exist!",stack:true});}_d=new _j();_d.init(Eco.getUniqueId(_b+"_"),"absolute",0,0,0,0);_f.addChild(_d.name,_d);_d.show();_d._id=_i||_d.name;}var _k=arguments.length;if(_k>2){var _l,_m;if(Eco.isString(arguments[2])){if(_k==4){_h.setRect(_d,arguments[3]);}else if(_k==5){_h.setRect(_d,arguments[3],arguments[4]);}else if(_k==6){_h.setRect(_d,arguments[3],arguments[4],arguments[5]);}else if(_k==7){_h.setRect(_d,arguments[3],arguments[4],arguments[5],arguments[6]);}}else if(arguments[2]!=null){if(_k==3){_h.setRect(_d,arguments[2]);}else if(_k==4){_h.setRect(_d,arguments[2],arguments[3]);}else if(_k==5){_h.setRect(_d,arguments[2],arguments[3],arguments[4]);}else if(_k==6){_h.setRect(_d,arguments[2],arguments[3],arguments[4],arguments[5]);}}}_h.setProperties(_d,"visible",true);var _n=_h._getUsed(_f,_e,true);_n[_d._id]=_d;return _d;},"_getConstructor":function(_a,_b){var _c=JsNamespace.getGlobalContext();return _c[_b];},"_recycle":function(_a,_b){var _c=Eco.XpCompFactory.setProperties;if(_b){_a._props=null;var _d=_a._curProps;if(_d){for(var _e in _d){if(_e!="visible"&&_d.hasOwnProperty(_e)){_c(_a,_e,"");}}}_c(_a,"visible",false);}else{_c(_a,"visible",false);}},"getRect":function(_a){var _b=_a._rect||_a._curRect;if(!_b){_b=new Eco.Rectangle(_a.getPixelLeft(),_a.getPixelTop(),_a.getPixelWidth(),_a.getPixelHeight());}return _b;},"getClientWidth":function(_a){var _b=Eco.XpCompFactory.getRect(_a).width;return Eco.XPComp.PositionSize.getClientWidth(_a,_b);},"getClientHeight":function(_a){var _b=Eco.XpCompFactory.getRect(_a).height;return Eco.XPComp.PositionSize.getClientHeight(_a,_b);},"getContentSizeWithStyle":function(_a,_b,_c){if(Eco.isEmpty(_c)){Eco.Logger.error({message:"styleSheet(스타일 속성정보)는 필수 입력값 입니다.",stack:true});return;}var _d=_c.getMargin(),_e=_c.getBorder(),_f=_c.getPadding();var _g=_c.getFont()["_font"];var _h=nexacro._getTextSize2(_b,_g);_e=_e.getLeft().getWidth()*2;var _i=_d.getLeft()+_d.getRight()+_e+_f.getLeft()+_f.getRight();var _j=_d.getTop()+_d.getBottom()+_e+_f.getTop()+_f.getBottom();return [_h[0]+_i,_h[1]+_j];},"setRect":function(_a){var _b=arguments.length;var _c=_a._curRect;var _d=_a._rect;if(_b==5){if(_d){_d.x=arguments[1];_d.y=arguments[2];_d.width=arguments[3];_d.height=arguments[4];}else{_d=new Eco.Rectangle(arguments[1],arguments[2],arguments[3],arguments[4]);}}else if(_b==3){if(Eco.isNumber(arguments[1])){if(_d){_d.x=arguments[1];_d.y=arguments[2];}else{_d=new Eco.Rectangle(arguments[1],arguments[2],0,0);}}else{if(_d){_d.x=arguments[1].x;_d.y=arguments[1].y;_d.width=arguments[2].width;_d.height=arguments[2].height;}else{_d=new Eco.Rectangle(arguments[1].x,arguments[1].y,arguments[2].width,arguments[2].height);}}}else if(_b==2){if(arguments[1] instanceof Eco.Rectangle){_d=arguments[1];}else if(arguments[1] instanceof Eco.Size){if(_d){_d.width=arguments[1].width;_d.height=arguments[1].height;}else{_d=new Eco.Rectangle(0,0,arguments[1].width,arguments[1].height);}}else if(arguments[1] instanceof Eco.Point){if(_d){_d.x=arguments[1].x;_d.y=arguments[1].y;}else{_d=new Eco.Rectangle(arguments[1].x,arguments[1].y,0,0);}}}else if(_b==4){if(arguments[1] instanceof Eco.Point){if(_d){_d.x=arguments[1].x;_d.y=arguments[1].y;_d.width=arguments[2];_d.height=arguments[3];}else{_d=new Eco.Rectangle(arguments[1].x,arguments[1].y,arguments[2],arguments[3]);}}else{if(_d){_d.x=arguments[1];_d.y=arguments[2];_d.width=arguments[3].width;_d.height=arguments[3].height;}else{_d=new Eco.Rectangle(arguments[1],arguments[2],arguments[3].width,arguments[3].height);}}}if(_c){if(!_c.equals(_d)){_a._rect=_d;Eco.XpCompFactory.invalidateRect(_a);}else{_a._needsRender=false;Eco.XpCompFactory._removeRenderItems(_a);Eco.XpCompFactory._deleteParentRect(_a.parent);}}else{_a._rect=_d;Eco.XpCompFactory.invalidateRect(_a);}},"getProperty":function(_a,_b){var _c;if(_a._props){_c=_a._props[_b];}if((_c==null)&&_a._curProps){_c=_a._curProps[_b];}if(_c==null){_c=_a[_b];}return _c;},"setProperties":function(_a){var _b=_a._curProps||{},_c=_a._props||{},_d=arguments,_e,_f,_g,_h=false;for(var _j=1,_k=_d.length;_j<_k;_j+=2){_e=_d[_j];_g=_d[_j+1];if(_c[_e]!=_g||_b[_e]!==_g){_h=true;_c[_e]=_g;if(_b[_e]===_g){delete _c[_e];}}}if(_h){var _i=false;for(var _l in _c){if(_c.hasOwnProperty(_l)){_i=true;break;}}if(_i){_a._props=_c;}else{_a._props=null;}Eco.XpCompFactory.invalidateProps(_a);}},"doLayout":function(_a,_b){if(_b){var _c=_a._commitPropItems,_d=_a._changesPropChilds;if(((_c&&_c.length)||(_d&&_d.length))&&!_a._processLayout){_a._processLayout=true;Eco.XpCompFactory._commitPropsProcess(_a,_b);_a._processLayout=false;}_c=_a._renderItems;_d=_a._changesRectChilds;if(((_c&&_c.length)||(_d&&_d.length))&&!_a._processLayout){_a._processLayout=true;Eco.XpCompFactory._doRender(_a,_b);_a._processLayout=false;}}else{var _c=_a._commitPropItems;if(_c&&_c.length&&!_a._processLayout){_a._processLayout=true;Eco.XpCompFactory._commitPropsProcess(_a,_b);_a._processLayout=false;}_c=_a._renderItems;if(_c&&_c.length&&!_a._processLayout){_a._processLayout=true;Eco.XpCompFactory._doRender(_a,_b);_a._processLayout=false;}}},"_commitPropsProcess":function(_a,_b){var _c=_a._commitPropItems,_d=Eco.XpCompFactory;if(_c&&_c.length&&!_a._processCommitProps){_a._processCommitProps=true;for(var _e=0,_f;(_f=_c[_e]);_e++ ){_d._commitProps(_f);}_a._commitPropItems=null;_a._processCommitProps=false;}if(_b){_c=_a._changesPropChilds;if(_c&&_c.length){for(var _e=0,_f;(_f=_c[_e]);_e++ ){_d._commitPropsProcess(_f,_b);_f._needsPropChildsReg=false;}_a._changesPropChilds=null;}}},"_doRender":function(_a,_b){var _c=_a._renderItems,_d=Eco.XpCompFactory;if(_c&&_c.length&&!_a._processRender){_a._processRender=true;for(var _e=0,_f;(_f=_c[_e]);_e++ ){if(!(_f instanceof Tabpage)){_d._changePosSize(_f);}}_a._renderItems=null;_a._processRender=false;}if(_b){_c=_a._changesRectChilds;if(_c&&_c.length){for(var _e=0,_f;(_f=_c[_e]);_e++ ){_d._doRender(_f,_b);_f._needsRectChildsReg=false;}_a._changesRectChilds=null;}}},"_doZOrder":function(_a){for(var _b=1,_c=_a.length;_b<_c;_b++ ){_a[_b].moveToPrev(_a[_b-1]);}},"invalidate":function(_a){Eco.XpCompFactory.invalidateProps(_a);Eco.XpCompFactory.invalidateRect(_a);},"validate":function(_a){Eco.XpCompFactory.invalidate(_a);Eco.XpCompFactory.doLayout(_a.parent);},"invalidateRect":function(_a){if(!_a._needsRender){_a._needsRender=true;Eco.XpCompFactory._addRenderItems(_a);Eco.XpCompFactory._invalidateParentRect(_a.parent);}},"validateRect":function(_a){Eco.XpCompFactory.invalidateRect(_a);Eco.XpCompFactory.doLayout(_a.parent);},"_invalidateParentRect":function(_a){var _b=_a.parent;if(!_b||_b instanceof ChildFrame){return;}if(_b._changesRectChilds==null){_b._changesRectChilds=[];}if(!_a._needsRectChildsReg){_a._needsRectChildsReg=true;_b._changesRectChilds.push(_a);}Eco.XpCompFactory._invalidateParentRect(_b);},"_deleteParentRect":function(_a){var _b=_a.parent;if(_b instanceof ChildFrame){return;}if(_b._changesRectChilds&&_a._needsRectChildsReg&&(!_a._renderItems||_a._renderItems.length==0)){Eco.array.remove(_b._changesRectChilds,_a);_a._needsRectChildsReg=false;}if(_b._changesPropChilds&&_a._needsPropChildsReg&&(!_a._commitPropItems||_a._commitPropItems.length==0)){Eco.XpCompFactory._deleteParentRect(_b);}},"invalidateProps":function(_a){if(_a._props){if(!_a._needsCommitProps){_a._needsCommitProps=true;Eco.XpCompFactory._addCommitPropItems(_a);Eco.XpCompFactory._invalidateParentProps(_a.parent);}}else{_a._needsCommitProps=false;Eco.XpCompFactory._removeCommitPropItems(_a);Eco.XpCompFactory._deleteParentProps(_a.parent);}},"_invalidateParentProps":function(_a){var _b=_a.parent;if(!_b||_b instanceof ChildFrame){return;}if(_b._changesPropChilds==null){_b._changesPropChilds=[];}if(!_a._needsPropChildsReg){_a._needsPropChildsReg=true;_b._changesPropChilds.push(_a);}Eco.XpCompFactory._invalidateParentProps(_b);},"_deleteParentProps":function(_a){var _b=_a.parent;if(_b instanceof ChildFrame){return;}if(_b._changesPropChilds&&_a._needsPropChildsReg&&(!_a._commitPropItems||_a._commitPropItems.length==0)){Eco.array.remove(_b._changesPropChilds,_a);_a._needsPropChildsReg=false;}Eco.XpCompFactory._deleteParentProps(_b);},"validateProps":function(_a){Eco.XpCompFactory.invalidateProps(_a);Eco.XpCompFactory.doLayout(_a.parent);},"_addRenderItems":function(_a){if(_a instanceof Tabpage){Eco.Logger.error({"meassge":"Tabpage는 position 및 size를 변경 할 수 없습니다.","stack":true});}var _b=_a.parent;if(_b instanceof Tabpage){var _c=_b.parent.parent;if(!_c._renderItems){_c._renderItems=[];}if(Eco.array.indexOf(_c._renderItems,_b)== -1){_c._renderItems.push(_b);}}if(!_b._renderItems){_b._renderItems=[];}_b._renderItems.push(_a);},"_addCommitPropItems":function(_a){var _b=_a.parent;if(!_b._commitPropItems){_b._commitPropItems=[];}_b._commitPropItems.push(_a);},"_removeRenderItems":function(_a){var _b=_a.parent;if(_b._renderItems){Eco.array.remove(_b._renderItems,_a);}},"_removeCommitPropItems":function(_a){var _b=_a.parent;if(_b._commitPropItems){Eco.array.remove(_b._commitPropItems,_a);}},"_commitProps":function(_a){if(_a._needsCommitProps){if(_a._debug){trace("propChange==>"+(_a._id||_a.name)+"//"+Eco.object.getPropertyNames(_a._props));}var _b=_a._props,_c=_a._curProps||{},_d;if(_b){for(var _e in _b){if(_b.hasOwnProperty(_e)){_d=_b[_e];_a["set_"+_e](_d);_c[_e]=_d;}}_a._props=null;_a._curProps=_c;}_a._needsCommitProps=false;}},"_changePosSize":function(_a){if(_a._needsRender){if(_a._debug){trace("rectChange==>"+(_a._id||_a.name)+"::"+_a._rect.toString()+","+_a.text+","+_a.visible+","+_a.style.border);}var _b=_a._rect;if(_b){_a.move(_b.x,_b.y,_b.width,_b.height);if(_a._debug){trace("l:"+_a.getPixelLeft()+" t:"+_a.getPixelTop()+" w:"+_a.getPixelWidth()+" h:"+_a.getPixelHeight());}_a._curRect=_b.clone();}_a._needsRender=false;}},"releaseNamed":function(_a,_b,_c){var _d="default",_e=_a,_f,_g,_h,_i=[],_j;if(Eco.isObject(_a)){_e=_a.target;_d=_a.poolName;}_f=Eco.XpCompFactory._getUsed(_e,_d);if(!_f){return;}_j=(_d=="default");if(_j){_g=_a._defaultCache;if(!_g){_a._defaultCache={};_g=_a._defaultCache;}}else{_g=Eco.XpCompFactory._getCache(_e,_d,null,true);}for(var _l=0,_m=_b.length;_l<_m;_l++ ){_h=_f[_b[_l]];if(_h){if(_j){var _k=Eco.XPComp.typeOf(_h);if(!_g[_k]){_g[_k]=[];}_g[_k].splice(0,0,_h);}else{_g.splice(0,0,_h);}Eco.XpCompFactory._recycle(_h,_c);_i.push(_h);}}for(var _l=0,_m=_i.length;_l<_m;_l++ ){delete _f[_i[_l]._id];}},"releaseAll":function(_a,_b,_c,_d){var _e="default",_f=_a,_g,_h,_i,_j=[],_k;if(Eco.isObject(_a)){_f=_a.target;_e=_a.poolName;}_g=Eco.XpCompFactory._getUsed(_f,_e);if(!_g){return;}_k=(_e=="default");if(_k){_h=_a._defaultCache;if(!_h){_a._defaultCache={};_h=_a._defaultCache;}}else{_h=Eco.XpCompFactory._getCache(_f,_e,null,true);}var _l=Eco.isArray(_b),_m=false;if(!_l){_m=Eco.isObject(_b);}if(_l||_m){var _n;if(_l){_n={};for(var _p=0,_q=_b.length;_p<_q;_p++ ){_n[_b[_p]._id]=true;}}else{_n=_b;}for(var _r in _g){if(_g.hasOwnProperty(_r)){_i=_g[_r];if(!_n[_i._id]){if(_k){var _o=Eco.XPComp.typeOf(_i);if(!_h[_o]){_h[_o]=[];}_h[_o].push(_i);}else{_h.splice(0,0,_i);}Eco.XpCompFactory._recycle(_i,_c);_j.push(_i);if(_d){if(_i instanceof Tab){_i=_i.tabpages[_i.tabindex];Eco.XpCompFactory.releaseAll(_i,null,_c);}else if(_i instanceof Form){Eco.XpCompFactory.releaseAll(_i,null,_c);}}}}}}else{for(var _r in _g){if(_g.hasOwnProperty(_r)){_i=_g[_r];if(_k){var _o=Eco.XPComp.typeOf(_i);if(!_h[_o]){_h[_o]=[];}_h[_o].splice(0,0,_i);}else{_h.splice(0,0,_i);}Eco.XpCompFactory._recycle(_i,_c);_j.push(_i);if(_d){if(_i instanceof Tab){_i=_i.tabpages[_i.tabindex];Eco.XpCompFactory.releaseAll(_i,null,_c);}else if(_i instanceof Form){Eco.XpCompFactory.releaseAll(_i,null,_c);}}}}}for(var _p=0,_q=_j.length;_p<_q;_p++ ){delete _g[_j[_p]._id];}},"release":function(_a,_b,_c){var _d=_a.parent,_e,_f;if(!_b||!_b.length){_b="default";}if(_b=="default"){var _g=Eco.XPComp.typeOf(_a);_f=Eco.XpCompFactory._getCache(_d,_b,_g,true);_f.push(_a);}else{_f=Eco.XpCompFactory._getCache(_d,_b,null,true);_f.push(_a);}Eco.XpCompFactory._recycle(_a,_c);_e=Eco.XpCompFactory._getUsed(_d,_b);if(_e){delete _e[_a._id];}},"setStyleSheet":function(_a,_b){if(Eco.isEmpty(_a)||Eco.isEmpty(_b)){return;}var _c=["_border","font","margin","padding"];var _d=["border","font","margin","padding"];var _e="";for(var _f=0,_g=_c.length;_f<_g;_f++ ){_e+=_d[_f]+":"+_b.getString(_c[_f])+";";}Eco.XpCompFactory.setProperties(_a,"style",_e);}});}