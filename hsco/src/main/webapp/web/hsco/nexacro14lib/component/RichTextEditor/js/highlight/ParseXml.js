if(!window.RichTextEditor){throw new Error("RichTextEditor is not defined !!");}if(!RichTextEditor.Highlight){throw new Error("RichTextEditor.Highlight is not defined !!");}if(!RichTextEditor.Highlight.ParseXml){RichTextEditor.Highlight.ParseXml={init:function(){var _a=arguments[0];var _b=_a.indentUnit;var _c={autoSelfClosers:{"br":true,"img":true,"hr":true,"link":true,"input":true,"meta":true,"col":true,"frame":true,"base":true,"area":true},doNotIndent:{"pre":true,"!cdata":true}};var _d={autoSelfClosers:{},doNotIndent:{"!cdata":true}};var _e=_c;var _f=false;var _g=(function(){function inText(_h,_i){var _j=_h.next();if(_j=="<"){if(_h.equals("!")){_h.next();if(_h.equals("[")){if(_h.lookAhead("[CDATA[",true)){_i(inBlock("xml-cdata","]]>"));return null;}else{return "xml-text";}}else if(_h.lookAhead("--",true)){_i(inBlock("xml-comment","-->"));return null;}else if(_h.lookAhead("DOCTYPE",true)){_h.nextWhileMatches(/[\w\._\-]/);_i(inBlock("xml-doctype",">"));return "xml-doctype";}else{return "xml-text";}}else if(_h.equals("?")){_h.next();_h.nextWhileMatches(/[\w\._\-]/);_i(inBlock("xml-processing","?>"));return "xml-processing";}else{if(_h.equals("/")){_h.next();}_i(inTag);return "xml-punctuation";}}else if(_j=="&"){while(!_h.endOfLine()){if(_h.next()==";"){break;}}return "xml-entity";}else{_h.nextWhileMatches(/[^&<\n]/);return "xml-text";}}function inTag(_h,_i){var _j=_h.next();if(_j==">"){_i(inText);return "xml-punctuation";}else if(/[?\/]/.test(_j)&&_h.equals(">")){_h.next();_i(inText);return "xml-punctuation";}else if(_j=="="){return "xml-punctuation";}else if(/[\'\"]/.test(_j)){_i(inAttribute(_j));return null;}else{_h.nextWhileMatches(/[^\s\u00a0=<>\"\'\/?]/);return "xml-name";}}function inAttribute(_h){return function(_i,_j){while(!_i.endOfLine()){if(_i.next()==_h){_j(inTag);break;}}return "xml-attribute";};}function inBlock(_h,_i){return function(_j,_k){while(!_j.endOfLine()){if(_j.lookAhead(_i,true)){_k(inText);break;}_j.next();}return _h;};}return function(_h,_i){return _a.tokenizer(_h,_i||inText);};})();function parseXML(_h){var _i=_g(_h),_j;var _k=[base];var _l=0,_m=0;var _n=null,_o=null;var _p;function push(_r){for(var _s=_r.length-1;_s>=0;_s-- ){_k.push(_r[_s]);}}function cont(){push(arguments);_p=true;}function pass(){push(arguments);_p=false;}function markErr(){_j.style+=" xml-error";}function expect(_r){return function(_s,_t){if(_t==_r){cont();}else{markErr();cont(arguments.callee);}};}function pushContext(_r,_s){var _t=_e.doNotIndent.hasOwnProperty(_r)||(_o&&_o.noIndent);_o={prev:_o,name:_r,indent:_m,startOfLine:_s,noIndent:_t};}function popContext(){_o=_o.prev;}function computeIndentation(_r){return function(_s,_t){var _o=_r;if(_o&&_o.noIndent){return _t;}if(_f&&/<!\[CDATA\[/.test(_s)){return 0;}if(_o&&/^<\//.test(_s)){_o=_o.prev;}while(_o&&!_o.startOfLine){_o=_o.prev;}if(_o){return _o.indent+_b;}else{return 0;}};}function base(){return pass(element,base);}var _q={"xml-text":true,"xml-entity":true,"xml-comment":true,"xml-processing":true,"xml-doctype":true};function element(_r,_s){if(_s=="<"){cont(tagname,attributes,endtag(_l==1));}else if(_s=="</"){cont(closetagname,expect(">"));}else if(_r=="xml-cdata"){if(!_o||_o.name!="!cdata"){pushContext("!cdata");}if(/\]\]>$/.test(_s)){popContext();}cont();}else if(_q.hasOwnProperty(_r)){cont();}else{markErr();cont();}}function tagname(_r,_s){if(_r=="xml-name"){_n=_s.toLowerCase();_j.style="xml-tagname";cont();}else{_n=null;pass();}}function closetagname(_r,_s){if(_r=="xml-name"){_j.style="xml-tagname";if(_o&&_s.toLowerCase()==_o.name){popContext();}else{markErr();}}cont();}function endtag(_r){return function(_s,_t){if(_t=="/>"||(_t==">"&&_e.autoSelfClosers.hasOwnProperty(_n))){cont();}else if(_t==">"){pushContext(_n,_r);cont();}else{markErr();cont(arguments.callee);}};}function attributes(_r){if(_r=="xml-name"){_j.style="xml-attname";cont(attribute,attributes);}else{pass();}}function attribute(_r,_s){if(_s=="="){cont(value);}else if(_s==">"||_s=="/>"){pass(endtag);}else{pass();}}function value(_r){if(_r=="xml-attribute"){cont(value);}else{pass();}}return {indentation:function(){return _m;},next:function(){_j=_i.next();if(_j.style=="whitespace"&&_l==0){_m=_j.value.length;}else{_l++ ;}if(_j.content=="\n"){_m=_l=0;_j.indentation=computeIndentation(_o);}if(_j.style=="whitespace"||_j.type=="xml-comment"){return _j;}while(true){_p=false;_k.pop()(_j.style,_j.content);if(_p){return _j;}}},copy:function(){var _r=_k.concat([]),_s=_i.state,_t=_o;var _u=this;return function(_v){_k=_r.concat([]);_l=_m=0;_o=_t;_i=_g(_v,_s);return _u;};}};}return {make:parseXML,electricChars:"/",configure:function(_h){if(_h.useHTMLKludges!=null){_e=_h.useHTMLKludges?_c:_d;}if(_h.alignCDATA){_f=_h.alignCDATA;}}};}};}