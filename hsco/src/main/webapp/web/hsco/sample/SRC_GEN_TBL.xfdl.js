(function(){return function(){if(!this._is_form){return;}this.on_create=function(){var _a=null;if(Form==this.constructor){this.set_name("form");this.set_classname("tbl_info");this.set_titletext("TBL 조회");this._setFormPosition(0,0,1039,799);}_a=new Dataset("ds_1",this);_a._setContents("<ColumnInfo><Column id=\"TABLE_NAME\" type=\"STRING\" size=\"255\"/><Column id=\"T_NM\" type=\"STRING\" size=\"255\"/><Column id=\"COL_NAME\" type=\"STRING\" size=\"255\"/></ColumnInfo>");this.addChild(_a.name,_a);_a=new Dataset("ds_2",this);_a._setContents("");this.addChild(_a.name,_a);_a=new Dataset("ds_gb",this);_a._setContents("<ColumnInfo><Column id=\"CODE\" type=\"STRING\" size=\"16\"/><Column id=\"CODE_NM\" type=\"STRING\" size=\"255\"/></ColumnInfo>");this.addChild(_a.name,_a);_a=new Dataset("ds_cond1",this);_a.set_useclientlayout("true");_a._setContents("<ColumnInfo><Column id=\"OWNER\" type=\"STRING\" size=\"100\"/><Column id=\"GB\" type=\"STRING\" size=\"100\"/><Column id=\"TABLE_NAME\" type=\"STRING\" size=\"100\"/><Column id=\"T_NM\" type=\"STRING\" size=\"100\"/><Column id=\"COLUMN_NAME\" type=\"STRING\" size=\"100\"/><Column id=\"C_NM\" type=\"STRING\" size=\"100\"/></ColumnInfo>");this.addChild(_a.name,_a);_a=new Dataset("ds_cond2",this);_a.set_useclientlayout("true");_a._setContents("<ColumnInfo><Column id=\"OWNER\" type=\"STRING\" size=\"100\"/><Column id=\"GB\" type=\"STRING\" size=\"100\"/><Column id=\"TABLE_NAME\" type=\"STRING\" size=\"100\"/><Column id=\"T_NM\" type=\"STRING\" size=\"100\"/><Column id=\"COLUMN_NAME\" type=\"STRING\" size=\"100\"/><Column id=\"C_NM\" type=\"STRING\" size=\"100\"/></ColumnInfo>");this.addChild(_a.name,_a);_a=new Div("div_search","absolute","0","0",null,"60","20",null,this);_a.set_taborder("1");_a.set_cssclass("div_SearchBox");this.addChild(_a.name,_a);_a=new Radio("rdo_tbl","absolute","0","5","100","25",null,null,this.div_search);this.div_search.addChild(_a.name,_a);var _b=new Dataset("rdo_tbl_innerdataset",this.div_search.rdo_tbl);_b._setContents("<ColumnInfo><Column id=\"codecolumn\" size=\"256\"/><Column id=\"datacolumn\" size=\"256\"/></ColumnInfo><Rows><Row><Col id=\"codecolumn\">0</Col><Col id=\"datacolumn\">TBL</Col></Row><Row><Col id=\"codecolumn\">1</Col><Col id=\"datacolumn\">COL</Col></Row></Rows>");_a.set_innerdataset(_b);_a.set_taborder("1");_a.set_codecolumn("codecolumn");_a.set_datacolumn("datacolumn");_a.set_direction("vertical");_a.getSetter("onitemchanged2").set("div_search_onitemchanged");_a.set_index("0");_a=new Static("sta_OWNER","absolute","106","6","55","20",null,null,this.div_search);_a.set_text("OWNER");_a.style.set_align("right");_a.style.set_font("bold 9 Dotum");_a.set_visible("false");this.div_search.addChild(_a.name,_a);_a=new Edit("edt_OWNER","absolute","167","5","80","22",null,null,this.div_search);_a.set_taborder("3");_a.set_visible("false");this.div_search.addChild(_a.name,_a);_a=new Static("sta_GB","absolute","255","7","20","20",null,null,this.div_search);_a.set_text("GB");_a.style.set_font("bold 9 Dotum");this.div_search.addChild(_a.name,_a);_a=new Combo("cmb_GB","absolute","278","5","70","22",null,null,this.div_search);this.div_search.addChild(_a.name,_a);_a.set_taborder("4");_a.set_innerdataset("ds_gb");_a.set_codecolumn("CODE");_a.set_datacolumn("CODE_NM");_a.set_index("0");_a=new Static("sta_TBL_NM","absolute","354","6","40","20",null,null,this.div_search);_a.set_text("T_NM");_a.style.set_align("right");_a.style.set_font("bold 9 Dotum");this.div_search.addChild(_a.name,_a);_a=new Edit("edt_TBL_NM","absolute","399","5","120","22",null,null,this.div_search);_a.set_taborder("5");this.div_search.addChild(_a.name,_a);_a=new Static("sta_T_NM","absolute","521","6","28","20",null,null,this.div_search);_a.set_text("T 명");_a.style.set_align("right");_a.style.set_font("bold 9 Dotum");this.div_search.addChild(_a.name,_a);_a=new Edit("edt_T_NM","absolute","553","5","120","22",null,null,this.div_search);_a.set_taborder("6");_a.set_imemode("hangul");this.div_search.addChild(_a.name,_a);_a=new Static("sta_COL_NM","absolute","687","6","38","20",null,null,this.div_search);_a.set_text("C_NM");_a.style.set_align("right");_a.style.set_font("bold 9 Dotum");this.div_search.addChild(_a.name,_a);_a=new Edit("edt_COL_NM","absolute","730","5","120","22",null,null,this.div_search);_a.set_taborder("7");this.div_search.addChild(_a.name,_a);_a=new Static("sta_COL_NM2","absolute","849","6","36","20",null,null,this.div_search);_a.set_text("C 명");_a.style.set_align("right");_a.style.set_font("bold 9 Dotum");this.div_search.addChild(_a.name,_a);_a=new Edit("edt_C_NM","absolute","888","5","120","22",null,null,this.div_search);_a.set_taborder("8");_a.set_imemode("hangul");this.div_search.addChild(_a.name,_a);_a=new Button("btn_T","absolute","220","30","80","25",null,null,this.div_search);_a.set_text("TBL 생성");_a.set_taborder("3");_a.set_visible("false");_a.set_cssclass("btn_WF_CRUD");this.div_search.addChild(_a.name,_a);_a=new Button("btn_B","absolute","308","30","80","25",null,null,this.div_search);_a.set_text("백업 / 복사");_a.set_taborder("4");_a.set_visible("false");_a.set_cssclass("btn_WF_CRUD");this.div_search.addChild(_a.name,_a);_a=new Button("btn_grd","absolute",null,"30","80","25","544",null,this.div_search);_a.set_text("Grid");_a.set_taborder("5");_a.set_cssclass("btn_WF_CRUD");this.div_search.addChild(_a.name,_a);_a=new Button("btn_DS","absolute",null,"30","80","25","456",null,this.div_search);_a.set_text("DataSet");_a.set_taborder("5");_a.set_cssclass("btn_WF_CRUD");this.div_search.addChild(_a.name,_a);_a=new Button("btn_CRUD","absolute",null,"30","80","25","368",null,this.div_search);_a.set_text("CRUD");_a.set_taborder("6");_a.set_cssclass("btn_WF_CRUD");this.div_search.addChild(_a.name,_a);_a=new Static("sta_S_ID","absolute",null,"30","38","20","304",null,this.div_search);_a.set_taborder("9");_a.set_text("S_ID");_a.style.set_align("right");_a.style.set_font("bold 9 Dotum");this.div_search.addChild(_a.name,_a);_a=new Edit("edt_S_ID","absolute",null,"29","84","22","215",null,this.div_search);_a.set_taborder("10");_a.set_value("PRJ020101");this.div_search.addChild(_a.name,_a);_a=new Static("sta_S_NM","absolute",null,"30","36","20","178",null,this.div_search);_a.set_taborder("11");_a.set_text("S 명");_a.style.set_align("right");_a.style.set_font("bold 9 Dotum");this.div_search.addChild(_a.name,_a);_a=new Edit("edt_S_NM","absolute",null,"29","93","22","82",null,this.div_search);_a.set_taborder("12");_a.set_imemode("hangul");_a.set_value("임시");this.div_search.addChild(_a.name,_a);_a=new Static("sta_S_IFX","absolute",null,"30","37","20","46",null,this.div_search);_a.set_taborder("13");_a.set_text("sFix");_a.style.set_align("right");_a.style.set_font("bold 9 Dotum");this.div_search.addChild(_a.name,_a);_a=new Edit("edt_S_FIX","absolute",null,"29","29","22","14",null,this.div_search);_a.set_taborder("14");_a.set_value("m");this.div_search.addChild(_a.name,_a);_a=new Div("div_w","absolute","0","60",null,null,"20","0",this);_a.set_taborder("12");_a.style.set_border("0 none #808080ff");this.addChild(_a.name,_a);_a=new Grid("grd_1","absolute","0","0","30%",null,null,"0",this.div_w);_a.set_taborder("0");_a.set_binddataset("ds_1");_a.set_cellsizingtype("col");_a.set_autofittype("col");_a.set_cssclass("grd02_WF_blue");_a._setContents("<Formats><Format id=\"default\"><Columns><Column size=\"0\"/><Column size=\"200\"/><Column size=\"170\"/></Columns><Rows><Row size=\"24\" band=\"head\"/><Row size=\"24\"/></Rows><Band id=\"head\"><Cell text=\"#\"/><Cell col=\"1\" text=\"TBL\"/><Cell col=\"2\" text=\"TBL명\"/></Band><Band id=\"body\"><Cell text=\"bind:CODE\"/><Cell col=\"1\" edittype=\"text\" style=\"align:left;\" text=\"bind:TABLE_NAME\"/><Cell col=\"2\" edittype=\"text\" style=\"align:left;\" text=\"bind:T_NM\"/></Band></Format></Formats>");this.div_w.addChild(_a.name,_a);_a=new Grid("grd_2","absolute","30%","0","40%",null,null,"0",this.div_w);_a.set_taborder("3");_a.set_binddataset("ds_2");_a.set_cellsizingtype("col");_a.set_autofittype("col");_a.set_cssclass("grd02_WF_blue");_a._setContents("<Formats><Format id=\"default\"><Columns><Column size=\"30\"/><Column size=\"150\"/><Column size=\"180\"/><Column size=\"70\"/><Column size=\"90\"/><Column size=\"30\"/><Column size=\"30\"/></Columns><Rows><Row size=\"24\" band=\"head\"/><Row size=\"24\"/></Rows><Band id=\"head\"><Cell text=\"#\"/><Cell col=\"1\" text=\"COL\"/><Cell col=\"2\" text=\"COL명\"/><Cell col=\"3\" text=\"LEN\"/><Cell col=\"4\" text=\"TYPE\"/><Cell col=\"5\" text=\"PK\"/><Cell col=\"6\" text=\"NN\"/></Band><Band id=\"body\"><Cell text=\"bind:COLUMN_ID\"/><Cell col=\"1\" text=\"bind:COLUMN_NAME\" edittype=\"text\" style=\"align:left;\"/><Cell col=\"2\" text=\"bind:C_NM\" edittype=\"text\" style=\"align:left;\"/><Cell col=\"3\" text=\"bind:LEN\" displaytype=\"number\" style=\"align:left;\"/><Cell col=\"4\" text=\"bind:DATA_TYPE\" style=\"align:left;\"/><Cell col=\"5\" text=\"bind:PK\"/><Cell col=\"6\" text=\"bind:NN\"/></Band></Format></Formats>");this.div_w.addChild(_a.name,_a);_a=new TextArea("txt_sql","absolute","69.97%","24",null,null,"0","0",this.div_w);_a.set_taborder("4");this.div_w.addChild(_a.name,_a);_a=new Static("sta_LIST_TITLE01","absolute","723","0","237","20",null,null,this.div_w);_a.set_taborder("5");_a.set_text("Script");_a.set_wordwrap("english");_a.set_cssclass("sta_WF_title");_a.style.set_padding("0 5 0 25");_a.style.set_font("bold 9 Dotum");_a.set_visible("false");this.div_w.addChild(_a.name,_a);_a=new Radio("rdo_txt","absolute","71%","0","210","25",null,null,this.div_w);this.div_w.addChild(_a.name,_a);var _c=new Dataset("rdo_txt_innerdataset",this.div_w.rdo_txt);_c._setContents("<ColumnInfo><Column id=\"codecolumn\" size=\"256\"/><Column id=\"datacolumn\" size=\"256\"/></ColumnInfo><Rows><Row><Col id=\"codecolumn\">0</Col><Col id=\"datacolumn\">Script</Col></Row><Row><Col id=\"codecolumn\">1</Col><Col id=\"datacolumn\">TBL - Page_ID</Col></Row></Rows>");_a.set_innerdataset(_c);_a.set_taborder("6");_a.set_codecolumn("codecolumn");_a.set_datacolumn("datacolumn");_a.set_direction("vertical");_a.set_index("1");_a=new Layout("default","",0,60,this.div_search,function(_d){_d.set_taborder("1");_d.set_cssclass("div_SearchBox");});this.div_search.addLayout(_a.name,_a);_a=new Layout("default","",0,0,this.div_w,function(_d){_d.set_taborder("12");_d.style.set_border("0 none #808080ff");});this.div_w.addLayout(_a.name,_a);_a=new Layout("default","",1039,799,this,function(_d){_d.set_classname("tbl_info");_d.set_titletext("TBL 조회");});this.addLayout(_a.name,_a);_a=new BindItem("item1","div_search.edt_OWNER","value","ds_cond1","OWNER");this.addChild(_a.name,_a);_a.bind();_a=new BindItem("item2","div_search.cmb_GB","value","ds_cond1","GB");this.addChild(_a.name,_a);_a.bind();_a=new BindItem("item3","div_search.edt_TBL_NM","value","ds_cond1","TABLE_NAME");this.addChild(_a.name,_a);_a.bind();_a=new BindItem("item4","div_search.edt_T_NM","value","ds_cond1","T_NM");this.addChild(_a.name,_a);_a.bind();_a=new BindItem("item5","div_search.edt_COL_NM","value","ds_cond1","COLUMN_NAME");this.addChild(_a.name,_a);_a.bind();_a=new BindItem("item6","div_search.edt_C_NM","value","ds_cond1","C_NM");this.addChild(_a.name,_a);_a.bind();_a=null;};this.addIncludeScript("SRC_GEN_TBL.xfdl","lib::comInclude.xjs");this.registerScript("SRC_GEN_TBL.xfdl",function(){this.g_S_IDs=null;this.div_search.edt_OWNER.value="DUCODVL";this.form_oninit=function(_a,_b){Ex.core.init(_a);this.gfn_initCondDs(this,this.div_search);this.gfn_initForm(this);};this.form_onload=function(_a,_b){var _c=application.getPrivateProfile('SAMPLE_TBL_PAGEID');this.fn_set_tbl_ids(_c);this.div_w.txt_sql.set_value(_c);this.fn_getCode();trace("onload:end");};this.fn_getCode=function(){this.fn_transaction('listTblGb');};this.fn_getCode_post=function(){this.div_search.cmb_GB.set_value('PRJ');this.fn_search();};this.fn_search=function(){this.fn_transaction('listTbl');};this.fn_transaction=function(_a){var _b="hsco/dev/codegen/"+_a+".do";var _c;var _d="";switch(_a){case "listTblGb":_c="";_d="ds_gb=output1";this.ds_1.clearData();break;case "listTbl":_c="input1=ds_cond1";_d="ds_1=output1";this.ds_2.clearData();break;case "listCols":var _e=this.ds_cond2;var _f=this.ds_1;_e.copyRow(0,_f,_f.rowposition,'');_c="input1=ds_cond2";_d="ds_2=output1";this.ds_2.clearData();break;}Ex.core.tran(this,_a,_b,_c,_d);};this.fn_callBack=function(_a,_b,_c){if(_b<0){return alert(_c);}switch(_a){case 'listTblGb':this.fn_getCode_post();break;case 'listTbl':trace("ds_1 : \n"+this.ds_1.saveCSV());this.fn_transaction('listCols');break;case 'listCols':trace("ds_2 : \n"+this.ds_2.saveCSV());break;}};this.ds_1_onrowposchanged=function(_a,_b){var _c=_a.getColumn(_b.newrow,"T_NM");this.div_search.edt_S_NM.set_value(_c);if(this.g_S_IDs){var _d=this.g_S_IDs[_a.getColumn(_b.newrow,"TABLE_NAME")];this.div_search.edt_S_ID.set_value(_d);}this.fn_transaction('listCols');};this.div_search_onitemchanged=function(_a,_b){this.fn_search();};this.div_search_onkeydown=function(_a,_b){if(_b.keycode==13){this.fn_search();}};this.setTxt=function(_a){this.div_w.txt_sql.set_value(_a);trace("SQL:"+_a);system.setClipboard("CF_TEXT",_a);};this.getCamels=function(_a){var _b=_a.toLowerCase().split('_');var _c='';for(var _d in _b){_c+=(_d==0)?_b[_d]:this.getCamelWord(_b[_d]);}return _c;};this.getCamelWord=function(_a){if(Eco.isEmpty(_a)){return '';}return _a[0].toUpperCase()+_a.substr(1);};this.rdo_txt_onitemchanged=function(_a,_b){switch(_b.postvalue){case '0':case '1':this.div_w.txt_sql.set_value('');break;}};this.txt_sql_onchanged=function(_a,_b){if(this.div_w.rdo_txt.value==0){return;}application.setPrivateProfile('SAMPLE_TBL_PAGEID',_b.postvalue);this.fn_set_tbl_ids(_b.postvalue);};this.fn_set_tbl_ids=function(_a){if(!_a||_a==''||_a.length==0){return;}var _b=_a.replace('\r\n','\n').split('\n');this.g_S_IDs={};for(var _f in _b){var _c=_b[_f].split(' ');this.g_S_IDs[_c[0]]=_c[1];}var _d;var _e=0;for(var _f in this.g_S_IDs){if(!_f||_f==''||_f.length==0){continue;}_e+=1;_d+='\n'+_e+':'+_f+'/'+this.g_S_IDs[_f];}trace(_d+'\n len:'+_e);};this.btn_copy_onclick=function(_a,_b){var _c=this.ds_2;var _d=_c.rowposition;var _e="";var _f=_c.getColumn(_d,"TABLE_NAME");var _g=_c.getColumn(_d,"T_NM");_g=Eco.isEmpty(_g)?"\n":"\t\t\t\t-- "+_g+" \r\n";var _h=Eco.date.getMaskFormatString(new Date(),'yyyy_MMdd');var _i="";var _j=_e+"BAK_"+_f+'_'+_h;var _k=_e+_f;_i+="-- TBL Backup"+_g;_i+="CREATE TABLE "+_j+" AS \r\n";_i+="SELECT * FROM "+_k+"\r\n";_i+="WHERE 1=1\r\n";_i+=";\r\n\r\n";_i+="-- TBL Copy"+_g;_i+="DELETE FROM "+_k+";\r\n";_i+="INSERT INTO "+_k+"\r\n";_i+="SELECT * FROM "+_k+";\r\n\r\n\r\n";_i+="-- TBL Copy2"+_g;_i+="INSERT INTO "+_e+_f+'(\r\n';_i+="(\r\n";var _l="";for(var _o=0;_o<_c.rowcount;_o++ ){var _m=_c.getColumn(_o,"COLUMN_NAME");var _n=_c.getColumn(_o,"C_NM");_n=Eco.isEmpty(_n)?"\n":"\t\t\t\t-- "+_n+" \n";_l+=(_o==0?'\t ':'\t,')+_m+_n;}_i+=_l;_i+=")\r\n";_i+="SELECT\r\n";_i+=_l;_i+="FROM "+_e+_f+_g;_i+=";\r\n";this.setTxt(_i);};this.btn_CRUD_onclick=function(_a,_b){this.div_w.rdo_txt.set_value(0);var _c=this.ds_2;if(_c.rowcount<1){return;}var _d=_c.rowposition;var _e="";var _f=_c.getColumn(_d,"TABLE_NAME");var _g=_c.getColumn(_d,"T_NM");_g=Eco.isEmpty(_g)?"\r\n":"\t\t\t/* "+_g+" */\r\n";var _h=this.div_search.edt_S_ID.value;var _i=this.div_search.edt_S_NM.value;var _j=this.div_search.edt_S_FIX.value;var _k="";var _l=new Array();_k+="	<!-- "+_i+" ================================================== -->\r\n\r\n";_k+="	<!-- "+_i+" 조회 -->\r\n";_k+='	<select id="'+_h+'.'+_j+'List" parameterClass="map" resultClass="hashmap">\r\n';_k+="SELECT\r\n";for(var _r=0;_r<_c.rowcount;_r++ ){var _m=_c.getColumn(_r,"COLUMN_NAME");if(_m=='REGISTER_ID'){continue;}if(_m=='REGIST_DT'){continue;}if(_m=='UPDUSR_ID'){continue;}if(_m=='UPDT_DT'){continue;}var _n=_c.getColumn(_r,"C_NM");_n=Eco.isEmpty(_n)?"\r\n":"\t\t\t/* "+_n+" */\r\n";_k+=(_r==0?'\t A.':'\t,A.')+_m+_n;if(!Eco.isEmpty(_c.getColumn(_r,"PK"))){_l[_c.getColumn(_r,"PK")-1]=_r;}}_k+="FROM "+_e+_f+" A"+_g;for(var _r=0;_r<_l.length;_r++ ){var _o=_l[_r];var _m=_c.getColumn(_o,"COLUMN_NAME");var _n=_c.getColumn(_o,"C_NM");_n=Eco.isEmpty(_n)?"\r\n":"\t\t\t/* "+_n+" */\r\n";if(_r==0){_k+='WHERE 1=1\r\n';}_k+='  AND A.'+_m+" = #"+_m+"#"+_n;}_k+='<isNotEmpty property="CD1" >\r\n';_k+="</isNotEmpty>\r\n";_k+="ORDER BY 1,2,3\r\n";_k+="	</select>\r\n\r\n";var _p="";_k+="	<!-- "+_i+" 추가 -->\r\n";_k+='	<insert id="'+_h+'.'+_j+'C" parameterClass="map">\r\n';_k+="INSERT INTO "+_e+_f+" ("+_g;for(var _r=0;_r<_c.rowcount;_r++ ){var _m=_c.getColumn(_r,"COLUMN_NAME");var _n=_c.getColumn(_r,"C_NM");_n=Eco.isEmpty(_n)?"\r\n":"\t\t\t/* "+_n+" */\r\n";_k+=(_r==0?'\t ':'\t,')+_m+_n;_p+=(_r==0?'\t ':'\t,');if(_m=='REGISTER_ID'||_m=='UPDUSR_ID'){_p+='#S_USER_ID#'+_n;}else if(_m=='REGIST_DT'||_m=='UPDT_DT'){_p+='SYSDATE'+_n;}else{_p+='#'+_m+'#'+_n;}}_k+=") VALUES (\r\n"+_p+")\r\n";_k+="	</insert>\r\n\r\n";_k+="	<!-- "+_i+" 수정 -->\r\n";_k+='	<update id="'+_h+'.'+_j+'U" parameterClass="map">\r\n';_k+="UPDATE "+_e+_f+_g;_k+="  SET\r\n";var _q=_l.length;for(var _r=0;_r<_c.rowcount;_r++ ){if(!Eco.isEmpty(_c.getColumn(_r,"PK"))){continue;}var _m=_c.getColumn(_r,"COLUMN_NAME");if(_m=='REGISTER_ID'){continue;}if(_m=='REGIST_DT'){continue;}var _n=_c.getColumn(_r,"C_NM");_n=Eco.isEmpty(_n)?"\r\n":"\t\t\t/* "+_n+" */\r\n";_k+=(_r==_q?'\t ':'\t,')+_m;if(_m=='UPDUSR_ID'){_k+=" = #S_USER_ID#"+_n;}else if(_m=='UPDT_DT'){_k+=" = SYSDATE"+_n;}else{_k+=" = #"+_m+"#"+_n;}}for(var _r=0;_r<_l.length;_r++ ){var _o=_l[_r];var _m=_c.getColumn(_o,"COLUMN_NAME");var _n=_c.getColumn(_o,"C_NM");_n=Eco.isEmpty(_n)?"\r\n":"\t\t\t/* "+_n+" */\r\n";_k+=(_r==0?'WHERE ':'  AND ')+_m+" = #"+_m+"#"+_n;}_k+="	</update>\r\n\r\n";_k+="	<!-- "+_i+" 삭제 -->\r\n";_k+='	<delete id="'+_h+'.'+_j+'D" parameterClass="map">\r\n';_k+="DELETE FROM "+_e+_f+_g;for(var _r=0;_r<_l.length;_r++ ){var _o=_l[_r];var _m=_c.getColumn(_o,"COLUMN_NAME");var _n=_c.getColumn(_o,"C_NM");_n=Eco.isEmpty(_n)?"\r\n":"\t\t\t/* "+_n+" */\r\n";_k+=(_r==0?'WHERE ':'  AND ')+_m+" = #"+_m+"#"+_n;}_k+="	</delete>\r\n\r\n";this.setTxt(_k);};this.btn_Grid_onclick=function(_a,_b){var _c=this.ds_2;if(_c.rowcount<1){return;}var _d=_c.rowposition;var _e="";var _f=_c.getColumn(_d,"TABLE_NAME");var _g="";var _h=new Array();var _i='';var _j='';var _k='';for(var _n=0;_n<_c.rowcount;_n++ ){var _l=_c.getColumn(_n,"COLUMN_NAME");var _m=_c.getColumn(_n,"C_NM");_i+='  <Column size="50"/>\r\n';_j+='  <Cell col="'+(_n+1)+'" text="'+_m+'"/>\r\n';_k+='  <Cell col="'+(_n+1)+'" displaytype="text" edittype="text" text="bind:'+_l+'"/>\r\n';}_g+='<Columns>\r\n';_g+=_i;_g+='</Columns>\r\n';_g+='<Rows>\r\n';_g+='  <Row size="24" band="head"/>\r\n';_g+='  <Row size="24"/>\r\n';_g+='</Rows>\r\n';_g+='<Band id="head">\r\n';_g+=_j;_g+='</Band>\r\n';_g+='<Band id="body">\r\n';_g+=_k;_g+='</Band>\r\n';this.setTxt(_g);};this.btn_DS_onclick=function(_a,_b){var _c=this.ds_2;if(_c.rowcount<1){return;}var _d=_c.rowposition;var _e="";var _f=_c.getColumn(_d,"TABLE_NAME");var _g="";var _h=new Array();_g+='      <Dataset id="ds_1" useclientlayout="true">\r\n';_g+='        <ColumnInfo>\r\n';for(var _m=0;_m<_c.rowcount;_m++ ){var _i=_c.getColumn(_m,"COLUMN_NAME");var _j=_c.getColumn(_m,"DATA_TYPE");var _k='STRING';var _l='255';switch(_j){case 'NUMBER':_k='BIGDECIMAL';_l=_c.getColumn(_m,"LEN2");break;case 'CHAR':case 'VARCHAR2':_l=_c.getColumn(_m,"LEN");break;default:break;}_g+='          <Column id="'+_i+'" type="'+_k+'" size="'+_l+'"/>\r\n';}_g+='        </ColumnInfo>\r\n';_g+='      </Dataset>\r\n';_g+='\r\n';this.setTxt(_g);};this.btn_tbl_onclick=function(_a,_b){var _c=this.ds_2;var _d=_c.rowposition;var _e="";var _f=_c.getColumn(_d,"TABLE_NAME");var _g=_c.getColumn(_d,"T_NM");var _h=Eco.isEmpty(_g)?"\r\n":"\t\t\t-- "+_g+" \r\n";var _i="";var _j=new Array();var _k="";var _l="";var _m=_c.rowcount-1;_i+="DROP TABLE "+_e+_f+';'+_h;_i+="CREATE TABLE "+_e+_f+_h;_i+="(\r\n";for(var _t=0;_t<_c.rowcount;_t++ ){var _n=_c.getColumn(_t,"COLUMN_NAME");var _o=_c.getColumn(_t,"DATA_TYPE");var _p=_c.getColumn(_t,"C_NM");var _q=Eco.isEmpty(_c.getColumn(_t,"NULLS"))?"":" NOT NULL";var _r=Eco.isEmpty(_p)?"\r\n":"\t\t\t-- "+_p+" \r\n";if(_o!="DATE"){_o+="("+_c.getColumn(_t,"LEN")+")";}var _s="\t"+_n+"\t\t"+_o+_q+(_t==_m?' ':',')+_r;_i+=_s;if(!Eco.isEmpty(_c.getColumn(_t,"PK"))){_j[_c.getColumn(_t,"PK")-1]=_t;}if(!Eco.isEmpty(_p)){_l+="COMMENT ON COLUMN "+_e+_f+'.'+_n+" IS '"+_p+"';\r\n";};}_i+=")\r\n";_i+="IN TS_"+_e+"_DAT\r\n";_i+="INDEX IN TS_"+_e+"_IDX;\r\n\r\n";for(var _t=0;_t<_j.length;_t++ ){_k+=(_k.length==0?' ':',')+_c.getColumn(_j[_t],"COLUMN_NAME");}_i+="ALTER TABLE "+_e+_f+" ADD CONSTRAINT PK_"+_f+"\r\n";_i+="\tPRIMARY KEY("+_k+");\r\n\r\n";_i+="COMMENT ON TABLE "+_e+_f+" IS '"+_g+"';\r\n\r\n";_i+=_l+"\r\n\r\n";this.setTxt(_i);};});this.on_initEvent=function(){this.ds_1.addEventHandler("onrowposchanged",this.ds_1_onrowposchanged,this);this.addEventHandler("onload",this.form_onload,this);this.addEventHandler("oninit",this.form_oninit,this);this.div_search.edt_OWNER.addEventHandler("onkeydown",this.div_search_onkeydown,this);this.div_search.cmb_GB.addEventHandler("onitemchanged",this.div_search_onitemchanged,this);this.div_search.edt_TBL_NM.addEventHandler("onkeydown",this.div_search_onkeydown,this);this.div_search.edt_T_NM.addEventHandler("onkeydown",this.div_search_onkeydown,this);this.div_search.edt_COL_NM.addEventHandler("onkeydown",this.div_search_onkeydown,this);this.div_search.edt_C_NM.addEventHandler("onkeydown",this.div_search_onkeydown,this);this.div_search.btn_T.addEventHandler("onclick",this.btn_tbl_onclick,this);this.div_search.btn_B.addEventHandler("onclick",this.btn_copy_onclick,this);this.div_search.btn_grd.addEventHandler("onclick",this.btn_Grid_onclick,this);this.div_search.btn_DS.addEventHandler("onclick",this.btn_DS_onclick,this);this.div_search.btn_CRUD.addEventHandler("onclick",this.btn_CRUD_onclick,this);this.div_search.edt_S_ID.addEventHandler("onkeydown",this.div_search_onkeydown,this);this.div_search.edt_S_NM.addEventHandler("onkeydown",this.div_search_onkeydown,this);this.div_search.edt_S_FIX.addEventHandler("onkeydown",this.div_search_onkeydown,this);this.div_w.txt_sql.addEventHandler("onchanged",this.txt_sql_onchanged,this);this.div_w.rdo_txt.addEventHandler("onitemchanged",this.rdo_txt_onitemchanged,this);};this.loadIncludeScript("SRC_GEN_TBL.xfdl");};})();