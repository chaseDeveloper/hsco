(function(){return function(){if(!this._is_form){return;}this.on_create=function(){var _a=null;if(Form==this.constructor){this.set_name("SAM030100");this.set_classname("FileManager_test");this.set_titletext("파일 관리자");this._setFormPosition(0,0,1059,735);}_a=new Dataset("ds_fileMast",this);_a.set_firefirstcount("0");_a.getSetter("firenextcount").set("0");_a.set_useclientlayout("true");_a.set_updatecontrol("true");_a.set_enableevent("true");_a.set_loadkeymode("keep");_a.set_loadfiltermode("keep");_a.set_reversesubsum("false");_a._setContents("<ColumnInfo><Column id=\"FILE_SN\" type=\"BIGDECIMAL\" size=\"256\"/><Column id=\"SYS_SE_CODE\" type=\"STRING\" size=\"256\"/><Column id=\"JOB_SE_CODE\" type=\"STRING\" size=\"256\"/><Column id=\"REGISTER_ID\" type=\"STRING\" size=\"256\"/><Column id=\"REGIST_DT\" type=\"STRING\" size=\"256\"/></ColumnInfo>");this.addChild(_a.name,_a);_a=new Dataset("ds_fileList",this);_a.set_firefirstcount("0");_a.getSetter("firenextcount").set("0");_a.set_useclientlayout("true");_a.set_updatecontrol("true");_a.set_enableevent("true");_a.set_loadkeymode("keep");_a.set_loadfiltermode("keep");_a.set_reversesubsum("false");_a._setContents("<ColumnInfo><Column id=\"CHK\" type=\"STRING\" size=\"256\"/><Column id=\"FILE_SN\" type=\"BIGDECIMAL\" size=\"20\"/><Column id=\"FILE_ORDR\" type=\"INT\" size=\"3\"/><Column id=\"FILE_STRE_COURS\" type=\"STRING\" size=\"2000\"/><Column id=\"STRE_FILE_NM\" type=\"STRING\" size=\"255\"/><Column id=\"ORGINL_FILE_NM\" type=\"STRING\" size=\"255\"/><Column id=\"FILE_EXTSN\" type=\"STRING\" size=\"20\"/><Column id=\"FILE_CN\" type=\"STRING\" size=\"4000\"/><Column id=\"FILE_MG\" type=\"INT\" size=\"8\"/><Column id=\"USE_AT\" type=\"STRING\" size=\"1\"/><Column id=\"FILE_ID\" type=\"STRING\" size=\"256\"/><Column id=\"SN\" type=\"INT\" size=\"5\"/><Column id=\"SYS_SE_CODE\" type=\"STRING\" size=\"6\"/><Column id=\"JOB_SE\" type=\"STRING\" size=\"3\"/><Column id=\"FILE_TY\" type=\"STRING\" size=\"256\"/><Column id=\"FILE_IMAGE\" type=\"STRING\" size=\"256\"/><Column id=\"PROGRS\" type=\"INT\" size=\"5\"/><Column id=\"TRNSMIS_FILE_SIZE\" type=\"INT\" size=\"256\"/><Column id=\"DELETE_IMAGE\" type=\"STRING\" size=\"256\"/><Column id=\"STTUS\" type=\"STRING\" size=\"256\"/></ColumnInfo>");this.addChild(_a.name,_a);_a=new Dataset("ds_singleFile",this);_a.set_firefirstcount("0");_a.getSetter("firenextcount").set("0");_a.set_useclientlayout("true");_a.set_updatecontrol("true");_a.set_enableevent("true");_a.set_loadkeymode("keep");_a.set_loadfiltermode("keep");_a.set_reversesubsum("false");_a._setContents("<ColumnInfo><Column id=\"FILE_SN\" type=\"BIGDECIMAL\" size=\"20\"/><Column id=\"FILE_ORDR\" type=\"INT\" size=\"3\"/><Column id=\"FILE_STRE_COURS\" type=\"STRING\" size=\"2000\"/><Column id=\"STRE_FILE_NM\" type=\"STRING\" size=\"255\"/><Column id=\"ORGINL_FILE_NM\" type=\"STRING\" size=\"255\"/><Column id=\"FILE_EXTSN\" type=\"STRING\" size=\"20\"/><Column id=\"FILE_CN\" type=\"STRING\" size=\"4000\"/><Column id=\"FILE_MG\" type=\"INT\" size=\"8\"/><Column id=\"USE_AT\" type=\"STRING\" size=\"1\"/><Column id=\"FILE_ID\" type=\"STRING\" size=\"256\"/><Column id=\"SN\" type=\"INT\" size=\"5\"/><Column id=\"SYS_SE_CODE\" type=\"STRING\" size=\"6\"/><Column id=\"JOB_SE\" type=\"STRING\" size=\"3\"/><Column id=\"FILE_TY\" type=\"STRING\" size=\"256\"/><Column id=\"FILE_IMAGE\" type=\"STRING\" size=\"256\"/><Column id=\"PROGRS\" type=\"INT\" size=\"5\"/><Column id=\"TRNSMIS_FILE_SIZE\" type=\"INT\" size=\"256\"/><Column id=\"DELETE_IMAGE\" type=\"STRING\" size=\"256\"/><Column id=\"STTUS\" type=\"STRING\" size=\"256\"/></ColumnInfo>");this.addChild(_a.name,_a);_a=new Dataset("form_url",this);_a.set_firefirstcount("0");_a.getSetter("firenextcount").set("0");_a.set_useclientlayout("false");_a.set_updatecontrol("true");_a.set_enableevent("true");_a.set_loadkeymode("keep");_a.set_loadfiltermode("keep");_a.set_reversesubsum("false");_a._setContents("<ColumnInfo><Column id=\"FORM_URL\" type=\"STRING\" size=\"256\"/></ColumnInfo><Rows><Row><Col id=\"FORM_URL\">com::COM010300_P01.xfdl</Col></Row></Rows>");this.addChild(_a.name,_a);_a=new Dataset("ds_fileMastSingle",this);_a.set_firefirstcount("0");_a.getSetter("firenextcount").set("0");_a.set_useclientlayout("true");_a.set_updatecontrol("true");_a.set_enableevent("true");_a.set_loadkeymode("keep");_a.set_loadfiltermode("keep");_a.set_reversesubsum("false");_a._setContents("<ColumnInfo><Column id=\"FILE_SN\" type=\"BIGDECIMAL\" size=\"256\"/><Column id=\"SYS_SE_CODE\" type=\"STRING\" size=\"256\"/><Column id=\"JOB_SE_CODE\" type=\"STRING\" size=\"256\"/><Column id=\"REGISTER_ID\" type=\"STRING\" size=\"256\"/><Column id=\"REGIST_DT\" type=\"STRING\" size=\"256\"/></ColumnInfo>");this.addChild(_a.name,_a);_a=new Dataset("ds_fileSn",this);_a.set_firefirstcount("0");_a.getSetter("firenextcount").set("0");_a.set_enableevent("true");_a.set_loadkeymode("keep");_a.set_loadfiltermode("keep");_a.set_reversesubsum("false");_a.set_useclientlayout("true");_a._setContents("<ColumnInfo><Column id=\"FILE_SN\" type=\"BIGDECIMAL\" size=\"20\"/><Column id=\"SYS_SE_CODE\" type=\"STRING\" size=\"6\"/><Column id=\"JOB_SE\" type=\"STRING\" size=\"3\"/></ColumnInfo>");this.addChild(_a.name,_a);_a=new Div("div_multiFile","absolute","9","0","1039","276",null,null,this);_a.set_taborder("1");this.addChild(_a.name,_a);_a=new Grid("grd_fileMast","absolute","0%","39",null,"148","64.68%",null,this.div_multiFile);_a.set_taborder("42");_a.set_binddataset("ds_fileMast");_a._setContents("<Formats><Format id=\"default\"><Columns><Column size=\"120\"/><Column size=\"100\"/><Column size=\"100\"/><Column size=\"93\"/><Column size=\"80\"/></Columns><Rows><Row size=\"24\" band=\"head\"/><Row size=\"24\"/></Rows><Band id=\"head\"><Cell text=\"FILE_SN\"/><Cell col=\"1\" text=\"SYS_SE_CODE\"/><Cell col=\"2\" text=\"JOB_SE_CODE\"/><Cell col=\"3\" text=\"REGISTER_ID\"/><Cell col=\"4\" text=\"REGIST_DT\"/></Band><Band id=\"body\"><Cell text=\"bind:FILE_SN\"/><Cell col=\"1\" text=\"bind:SYS_SE_CODE\"/><Cell col=\"2\" text=\"bind:JOB_SE_CODE\"/><Cell col=\"3\" text=\"bind:REGISTER_ID\"/><Cell col=\"4\" text=\"bind:REGIST_DT\"/></Band></Format></Formats>");this.div_multiFile.addChild(_a.name,_a);_a=new Grid("grd_fileList","absolute",null,"39","410","180","245",null,this.div_multiFile);_a.set_taborder("43");_a.set_binddataset("ds_fileList");_a._setContents("<Formats><Format id=\"default\"><Columns><Column size=\"40\"/><Column size=\"120\"/><Column size=\"66\"/><Column size=\"63\"/><Column size=\"63\"/><Column size=\"73\"/></Columns><Rows><Row size=\"24\" band=\"head\"/><Row size=\"24\"/></Rows><Band id=\"head\"><Cell displaytype=\"checkbox\"/><Cell col=\"1\" text=\"파일명\"/><Cell col=\"2\" text=\"확장자\"/><Cell col=\"3\" text=\"용량\"/><Cell col=\"4\" text=\"사용여부\"/><Cell col=\"5\" text=\"삭제\"/></Band><Band id=\"body\"><Cell displaytype=\"checkbox\" edittype=\"checkbox\" text=\"bind:CHK\"/><Cell col=\"1\" text=\"bind:ORGINL_FILE_NM\"/><Cell col=\"2\" text=\"bind:FILE_EXTSN\"/><Cell col=\"3\" text=\"bind:FILE_MG\"/><Cell col=\"4\" text=\"bind:USE_AT\"/><Cell col=\"5\" displaytype=\"button\" text=\"삭제\"/></Band></Format></Formats>");this.div_multiFile.addChild(_a.name,_a);_a=new ImageViewer("iv_files","absolute",null,"39","222","180","9",null,this.div_multiFile);_a.set_taborder("44");_a.set_stretch("fixaspectratio");this.div_multiFile.addChild(_a.name,_a);_a=new Button("btn_uploadFiles","absolute","638","15","68","19",null,null,this.div_multiFile);_a.set_taborder("46");_a.set_text("파일업로드");_a.set_cssclass("btn_WF_Process");this.div_multiFile.addChild(_a.name,_a);_a=new Static("Static09","absolute","0","34",null,"5","0%",null,this.div_multiFile);_a.set_taborder("50");_a.set_text("5");_a.set_visible("false");_a.style.set_background("#dc143c3c");_a.style.set_align("center middle");this.div_multiFile.addChild(_a.name,_a);_a=new Static("sta_title","absolute","0%","14",null,"21","73.67%",null,this.div_multiFile);_a.set_taborder("51");_a.set_text("파일 업로드/다운로드(multi)");_a.set_cssclass("sta_WF_Title01");this.div_multiFile.addChild(_a.name,_a);_a=new Static("Static06","absolute","0","0",null,"15","0",null,this.div_multiFile);_a.set_taborder("52");_a.set_text("15");_a.set_visible("false");_a.style.set_background("#dc143c3c");_a.style.set_align("center middle");this.div_multiFile.addChild(_a.name,_a);_a=new Static("sta_title00","absolute","23.77%","8",null,"21","64.1%",null,this.div_multiFile);_a.set_taborder("54");_a.set_text("첨부파일 마스터 목록");this.div_multiFile.addChild(_a.name,_a);_a=new Static("sta_title01","absolute","44.56%","224",null,"21","38.79%",null,this.div_multiFile);_a.set_taborder("55");_a.set_text("첨부파일 목록");this.div_multiFile.addChild(_a.name,_a);_a=new Static("Static00","absolute","0%","270",null,"5","0.19%",null,this.div_multiFile);_a.set_taborder("56");_a.set_text("5");_a.set_visible("false");_a.style.set_background("#dc143c3c");_a.style.set_align("center middle");this.div_multiFile.addChild(_a.name,_a);_a=new Button("btn_delFiles","absolute","567","14","67","21",null,null,this.div_multiFile);_a.set_taborder("57");_a.set_text("선택삭제");_a.set_cssclass("btn_WF_Process");this.div_multiFile.addChild(_a.name,_a);_a=new Button("btn_atchFiles","absolute","497","14","67","21",null,null,this.div_multiFile);_a.set_taborder("58");_a.set_text("파일선택");this.div_multiFile.addChild(_a.name,_a);_a=new Button("btn_downFiles","absolute","709","15","85","19",null,null,this.div_multiFile);_a.set_taborder("59");_a.set_text("선택다운로드");_a.set_cssclass("btn_WF_Process");this.div_multiFile.addChild(_a.name,_a);_a=new Button("btn_popupFile","absolute","1.73%","201","167","19",null,null,this.div_multiFile);_a.set_taborder("60");_a.set_text("파일업로드/다운로드 팝업");_a.set_visible("true");this.div_multiFile.addChild(_a.name,_a);_a=new Button("btn_fileUpload","absolute","17","225","150","19",null,null,this.div_multiFile);_a.set_taborder("61");_a.set_text("파일업로드 전용 팝업");_a.set_visible("true");this.div_multiFile.addChild(_a.name,_a);_a=new Button("btn_download","absolute","209","225","150","19",null,null,this.div_multiFile);_a.set_taborder("62");_a.set_text("다운로드 전용 팝업(다건)");_a.set_visible("true");this.div_multiFile.addChild(_a.name,_a);_a=new Button("btn_select01","absolute","20.12%","201",null,"19","69.97%",null,this.div_multiFile);_a.set_taborder("63");_a.set_text("FILE_SN 시퀀스");_a.set_visible("true");this.div_multiFile.addChild(_a.name,_a);_a=new Button("btn_popupMovable","absolute","1.64%","248",null,"19","82.29%",null,this.div_multiFile);_a.set_taborder("64");_a.set_text("Dragable Modal 팝업");this.div_multiFile.addChild(_a.name,_a);_a=new Div("div_singleFile","absolute","8","280","805","176",null,null,this);_a.set_taborder("2");this.addChild(_a.name,_a);_a=new Static("sta_WFDA_Label13","absolute","0.75%","130","778","27",null,null,this.div_singleFile);_a.set_taborder("35");_a.set_cssclass("sta_WF_Labelbg");this.div_singleFile.addChild(_a.name,_a);_a=new Static("sta_detAtchFile","absolute","0.12%","130",null,"27","90.75%",null,this.div_singleFile);_a.set_taborder("36");_a.set_text("첨부파일");_a.set_cssclass("sta_WF_Label");this.div_singleFile.addChild(_a.name,_a);_a=new Edit("edt_atchFile","absolute","9.57%","133",null,"21","22.11%",null,this.div_singleFile);_a.set_taborder("37");_a.set_readonly("true");_a.set_enableevent("false");this.div_singleFile.addChild(_a.name,_a);_a=new Button("btn_atchFile","absolute","75.16%","133",null,"21","22.86%",null,this.div_singleFile);_a.set_taborder("38");_a.set_cssclass("btn_WF_Search");this.div_singleFile.addChild(_a.name,_a);_a=new Button("btn_cancelAtchFile","absolute","87.2%","133","53","21",null,null,this.div_singleFile);_a.set_taborder("39");_a.set_text("취소");this.div_singleFile.addChild(_a.name,_a);_a=new Grid("grd_singleFile","absolute","0.12%","44",null,"77","18",null,this.div_singleFile);_a.set_taborder("42");_a.set_binddataset("ds_singleFile");_a._setContents("<Formats><Format id=\"default\"><Columns><Column size=\"80\"/><Column size=\"80\"/><Column size=\"80\"/><Column size=\"80\"/><Column size=\"80\"/><Column size=\"80\"/><Column size=\"80\"/><Column size=\"80\"/><Column size=\"80\"/></Columns><Rows><Row band=\"head\" size=\"24\"/><Row band=\"body\" size=\"24\"/></Rows><Band id=\"head\"><Cell col=\"0\" disptype=\"normal\" text=\"파일일련번호\"/><Cell col=\"1\" disptype=\"normal\" text=\"파일순차번호\"/><Cell col=\"2\" disptype=\"normal\" text=\"FILE_STRE_COURS\"/><Cell col=\"3\" disptype=\"normal\" text=\"STRE_FILE_NM\"/><Cell col=\"4\" disptype=\"normal\" text=\"파일명\"/><Cell col=\"5\" disptype=\"normal\" text=\"FILE_EXTSN\"/><Cell col=\"6\" disptype=\"normal\" text=\"FILE_CN\"/><Cell col=\"7\" disptype=\"normal\" text=\"FILE_MG\"/><Cell col=\"8\" disptype=\"normal\" text=\"USE_AT\"/></Band><Band id=\"body\"><Cell col=\"0\" disptype=\"normal\" text=\"bind:FILE_SN\"/><Cell col=\"1\" disptype=\"normal\" text=\"bind:FILE_ORDR\"/><Cell col=\"2\" disptype=\"normal\" text=\"bind:FILE_STRE_COURS\"/><Cell col=\"3\" disptype=\"normal\" text=\"bind:STRE_FILE_NM\"/><Cell col=\"4\" disptype=\"normal\" text=\"bind:ORGINL_FILE_NM\"/><Cell col=\"5\" disptype=\"normal\" text=\"bind:FILE_EXTSN\"/><Cell col=\"6\" disptype=\"normal\" text=\"bind:FILE_CN\"/><Cell col=\"7\" disptype=\"normal\" text=\"bind:FILE_MG\"/><Cell col=\"8\" disptype=\"normal\" text=\"bind:USE_AT\"/></Band></Format></Formats>");this.div_singleFile.addChild(_a.name,_a);_a=new Button("btn_uploadFile","absolute","501","20","78","19",null,null,this.div_singleFile);_a.set_taborder("44");_a.set_text("파일업로드");_a.set_cssclass("btn_WF_Process");this.div_singleFile.addChild(_a.name,_a);_a=new Static("Static00","absolute","0.12%","39",null,"5","19",null,this.div_singleFile);_a.set_taborder("46");_a.set_text("5");_a.set_visible("false");_a.style.set_background("#dc143c3c");_a.style.set_align("center middle");this.div_singleFile.addChild(_a.name,_a);_a=new Button("btn_viewAtchFile","absolute","649","20","66","19",null,null,this.div_singleFile);_a.set_taborder("48");_a.set_text("파일보기");_a.set_cssclass("btn_WF_Process");this.div_singleFile.addChild(_a.name,_a);_a=new Button("btn_delAtchFile","absolute","580","20","68","19",null,null,this.div_singleFile);_a.set_taborder("49");_a.set_text("파일삭제");_a.set_cssclass("btn_WF_Process");this.div_singleFile.addChild(_a.name,_a);_a=new Static("sta_title00","absolute","0.12%","19",null,"21","67.03%",null,this.div_singleFile);_a.set_taborder("50");_a.set_text("업로드/다운로드(단건)");_a.set_cssclass("sta_WF_Title01");this.div_singleFile.addChild(_a.name,_a);_a=new Static("Static01","absolute","0.12%","10",null,"10","2.46%",null,this.div_singleFile);_a.set_taborder("51");_a.set_text("5");_a.set_visible("false");_a.style.set_background("#dc143c3c");_a.style.set_align("center middle");this.div_singleFile.addChild(_a.name,_a);_a=new Button("btn_searchSingleFile","absolute","430","20","69","19",null,null,this.div_singleFile);_a.set_taborder("52");_a.set_text("파일 조회");_a.set_visible("true");_a.set_cssclass("btn_WF_Process");this.div_singleFile.addChild(_a.name,_a);_a=new Edit("edt_fileSn","absolute","253","20","107","19",null,null,this.div_singleFile);_a.set_taborder("53");_a.set_readonly("false");_a.set_enableevent("false");this.div_singleFile.addChild(_a.name,_a);_a=new Static("sta_detAtchFile00","absolute","165","20","89","19",null,null,this.div_singleFile);_a.set_taborder("54");_a.set_text("파일일련번호");_a.set_cssclass("sta_WF_Label");this.div_singleFile.addChild(_a.name,_a);_a=new Button("btn_atchFile2","absolute","78.14%","133",null,"21","13.04%",null,this.div_singleFile);_a.set_taborder("55");_a.set_text("파일선택");this.div_singleFile.addChild(_a.name,_a);_a=new Button("btn_downFile","absolute","716","20","71","19",null,null,this.div_singleFile);_a.set_taborder("56");_a.set_text("다운로드");_a.set_cssclass("btn_WF_Process");this.div_singleFile.addChild(_a.name,_a);_a=new Button("btn_init","absolute","46.46%","20",null,"19","46.96%",null,this.div_singleFile);_a.set_taborder("57");_a.set_text("초기화");this.div_singleFile.addChild(_a.name,_a);_a=new Div("div_work","absolute","825","275","232","205",null,null,this);_a.set_taborder("3");this.addChild(_a.name,_a);_a=new ImageViewer("iv_files","absolute","0.86%","10",null,"180","3.45%",null,this.div_work);_a.set_taborder("0");_a.set_stretch("fixaspectratio");this.div_work.addChild(_a.name,_a);_a=new Layout("default","",1039,276,this.div_multiFile,function(_b){_b.set_taborder("1");});this.div_multiFile.addLayout(_a.name,_a);_a=new Layout("default","",805,176,this.div_singleFile,function(_b){_b.set_taborder("2");});this.div_singleFile.addLayout(_a.name,_a);_a=new Layout("default","",232,205,this.div_work,function(_b){_b.set_taborder("3");});this.div_work.addLayout(_a.name,_a);_a=new Layout("default","",1059,735,this,function(_b){_b.set_classname("FileManager_test");_b.set_titletext("파일 관리자");});this.addLayout(_a.name,_a);_a=new BindItem("item0","div_singleFile.edt_atchFile","value","ds_singleFile","ORGINL_FILE_NM");this.addChild(_a.name,_a);_a.bind();_a=new BindItem("item1","div_singleFile.edt_fileSn","value","ds_fileMastSingle","FILE_SN");this.addChild(_a.name,_a);_a.bind();_a=null;};this.addIncludeScript("SAM030100.xfdl","lib::comInclude.xjs");this.addIncludeScript("SAM030100.xfdl","lib::comUpDownUtils.xjs");this.registerScript("SAM030100.xfdl",function(){this.File_UpDownManager=null;this.form_oninit=function(_a,_b){this.fn_init_form();this.fn_init_dataset();};this.form_onload=function(_a,_b){var _c={onChange:this.fn_onFileSelected,onSuccess:this.fn_onFileSuccess};this.File_UpDownManager=new this.fileUpDownManager(this,"SYS","COM");this.File_UpDownManager.init(_c);this.fn_setSingleFileView();};this.fn_init_form=function(){this.gfn_initForm(this);};this.fn_init_dataset=function(){this.gfn_initCondDs(this,this.div_search);};this.fn_search=function(){this.File_UpDownManager.cancelAllFile();this.gfn_clearDataSet([this.ds_fileList]);this.fn_transaction("selectFileMastList");};this.fn_onFileSelected=function(_a,_b){if(_a==this.File_UpDownManager.TYPE_UPLOADER){var _c=this.comUtils.isArray(_b);if(_c){var _d=_b.length;for(var _h=0;_h<_d;_h++ ){var _e=this.ds_fileList.addRow();this.ds_fileList.setColumn(_e,"ORGINL_FILE_NM",_b[_h]);}}else{var _f=this.ds_singleFile.getRowCount();var _g= -1;if(_f>0){_g=this.ds_singleFile.rowposition;}else{_g=this.ds_singleFile.addRow();}this.ds_singleFile.setColumn(_g,"ORGINL_FILE_NM",_b);this.fn_setSingleFileView();}}};this.fn_addAtchFile=function(_a){var _b=null;var _c=_a;this.File_UpDownManager.addFiles(_b,_c);};this.fn_canceAtchlFile=function(_a,_b,_c){var _d=this.File_UpDownManager.cancelFiles(_a);if(_d){if(_c){this.gfn_deleteGridSelectedItem(_b);this.fn_setSingleFileView();}else{this.gfn_deleteGridSelectedItem(_b);this.fn_setSingleFileView();}}};this.fn_download=function(_a,_b,_c){var _d=_a.getColumn(_b,"FILE_EXTSN");var _e=_a.getColumn(_b,"FILE_SN");var _f=_a.getColumn(_b,"FILE_ORDR");var _g=_a.getColumn(_b,"ATCH_FILE");var _h=_a.getColumn(_b,"FILE_TY");if(_h.indexOf("image/")> -1){var _i={};_i["FILE_SN"]=_e;_i["FILE_ORDR"]=_f;_c.set_image("");var _j=application.gv_host+"hsco/cmm/download/viewImage.do";var _k="?FILE_SN="+_e+"&FILE_ORDR="+_f;_c.set_image(_j+_k);}else{this.File_UpDownManager.download(_e,_f,_g);}};this.fn_transaction=function(_a){var _b=true;var _c=null;var _d=null;var _e=null;var _f=null;switch(_a){case "selectFileMastList":_f={};_f["FILE_SN"]="";_c="hsco/cmm/file/selectAtchmnFileMastList.do";_d=_f;_e="ds_fileMast=output1";break;case "selectAtchmnFileList":_f=this.gfn_getGridSelectedItem(this.div_multiFile.grd_fileMast);_c="hsco/cmm/file/selectAtchmnFileList.do";_d=_f;_e="ds_fileList=output1";break;case "deleteFiles":var _c="hsco/cmm/file/deleteFile.do";var _g="input1=ds_fileList:U";var _e="ds_fileList=output1";break;case "selectSingleFileList":_f={};_f["FILE_SN"]=this.ds_singleFile.getColumn(0,"FILE_SN");_c="hsco/cmm/file/selectAtchmnFileMastList.do";_d="input1=ds_fileMastSingle";_e="ds_fileMastSingle=output1 ds_singleFile=output2";break;case "deleteFile":var _c="hsco/cmm/file/fileDelete.do";var _g="input1=ds_singleFile";var _e="ds_fileMastSingle=output1 ds_singleFile=output2";break;case "GetFileSn":var _c="hsco/cmm/file/getFileSn.do";var _g="";var _e="ds_fileSn=output_fsn";break;default:break;}if(_c==null){return;}var _h=typeof (_d);if(_d==null){Ex.core.tran(this,_a,_c,_g,_e);}else{if(_h=="object"){this.gfn_mapTran(_a,_c,_d,_e,null,null,false);}else{Ex.core.tran(this,_a,_c,_d,_e,null,null,null,_b);}}};this.fn_callBack=function(_a,_b,_c){var _d=_b==0?true:false;this.gfn_callback_message(_a,_b,_c);if(_b!=0){switch(_a){case "selectFileMastList":break;case "selectAtchmnFileList":break;case "selectSingleFileList":break;case "deleteFiles":break;case "deleteFile":break;case "GetFileSn":default:break;}}else{switch(_a){case "selectFileMastList":break;case "selectAtchmnFileList":break;case "selectSingleFileList":this.fn_setSingleFileView();break;case "deleteFiles":break;case "deleteFile":this.ds_fileMastSingle.clearData();this.ds_singleFile.clearData();this.fn_setSingleFileView();break;case "GetFileSn":this.alert("FILE_SN = "+this.ds_fileSn.getColumn(0,"FILE_SN"));break;default:break;}}};this.div_multiFile_btn_atchFiles_onclick=function(_a,_b){this.fn_addAtchFile(true);};this.div_multiFile_btn_delFiles_onclick=function(_a,_b){var _c={};_c["viewRow"]="expr:CHK == '1'";var _d="CHK==1";var _e=this.ds_fileList.findRowExpr(_d);if(_e== -1){this.gfn_message("comm.데이터.선택.없음");return;}if(this.gfn_message("confirm.선택파일.삭제여부","들")){this.gfn_delMultiDsRow(this.ds_fileList);this.fn_transaction("deleteFiles");}};this.div_multiFile_grd_fileMast_oncellclick=function(_a,_b){var _c=_a.name;var _d=_b.oldrow;var _e=_b.row;var _f=_b.col;var _g=_b.cell;if(_e> -1){this.ds_fileMastSingle.clearData();if(this.ds_fileMastSingle.getRowCount()==0){this.ds_fileMastSingle.addRow();}this.ds_fileMastSingle.setColumn(0,"FILE_SN",this.ds_fileMast.getColumn(_e,"FILE_SN"));}this.File_UpDownManager.cancelAllFile();this.fn_transaction("selectAtchmnFileList");};this.div_multiFile_btn_downFiles_onclick=function(_a,_b){var _c={};_c["viewRow"]="expr:CHK == '1'";var _d=this.gfn_datasetToObject(this.ds_fileList,_c,true);var _e=this.comUtils.isArray(_d);if(_e){var _f=_d==null?0:_d.length;if(_f==0){this.gfn_message("comm.데이터.선택.없음");return;}for(var _j=0;_j<_f;_j++ ){var _g=_d[_j].FILE_SN;var _h=_d[_j].FILE_ORDR;var _i=_d[_j].ORGINL_FILE_NM;this.File_UpDownManager.download(_g,_h,_i);}}else{var _g=_d.FILE_SN;var _h=_d.FILE_ORDR;var _i=_d.ORGINL_FILE_NM;this.File_UpDownManager.download(_g,_h,_i);}};this.div_multiFile_btn_uploadFiles_onclick=function(_a,_b){this.fn_uploadFiles();};this.fn_uploadFiles=function(){var _a=this.File_UpDownManager.hasFile();if(_a){var _b={};var _c;var _d=this.ds_fileMast.rowposition;if(_d> -1){_c=this.ds_fileMast.getColumn(_d,"FILE_SN");if(_c!=null&&_c!=undefined&&_c>0){this.File_UpDownManager.setFileSn(_c);}}var _e="hsco/cmm/file/fileUpload.do";var _f="";var _g="ds_fileList=fileList";this.File_UpDownManager.upload(_e,_f,_g);}else{this.gfn_message("err.파일.업로드.정보없음");}};this.div_multiFile_grd_fileList_oncellclick=function(_a,_b){var _c=_a.name;var _d=_b.oldrow;var _e=_b.row;var _f=_b.col;var _g=_b.cell;if(_f==0){_a.setCellProperty("Head",_g,"text","0");}else if(_f==5){var _h=this.ds_fileList.getColumn(_e,"STRE_FILE_NM");var _i=this.ds_fileList.getColumn(_e,"ORGINL_FILE_NM");if(this.comUtils.isNullEmpty(_h)){this.fn_canceAtchlFile(_i,_a,true);}else{if(this.gfn_message("confirm.선택파일.삭제여부",_i)){this.ds_fileList.deleteRow(_b.row);this.fn_transaction("deleteFiles");}}}else{this.fn_download(this.ds_fileList,_e,this.div_multiFile.iv_files);}};this.div_multiFile_grd_fileList_onheadclick=function(_a,_b){if(_b.col==0){this.gfn_setGridCheckAll(_a,_b);}};this.div_singleFile_btn_searchSingleFile_onclick=function(_a,_b){var _c=this.div_singleFile.edt_fileSn.value;if(_c==""||_c==undefined||_c==null){this.gfn_message("err.파일.다운로드.정보없음");}else{this.fn_transaction("selectSingleFileList");this.fn_setSingleFileView();}};this.fn_deleteAtchFile=function(){if(this.ds_singleFile.getRowCount()>0){if(this.gfn_message("confirm.파일삭제여부")){this.fn_transaction("deleteFile");}}else{this.gfn_message("info.파일정보.없음");}};this.div_singleFile_btn_delAtchFile_onclick=function(_a,_b){this.fn_deleteAtchFile();this.fn_search();};this.div_singleFile_btn_viewAtchFile_onclick=function(_a,_b){if(this.ds_singleFile.getRowCount()>0){this.fn_download(this.ds_singleFile,0,this.div_work.iv_files);}else{this.gfn_message("err.파일.다운로드.정보없음");}};this.div_singleFile_btn_cancelAtchFile_onclick=function(_a,_b){var _c=this.div_singleFile.grd_singleFile;var _d=this.gfn_getGridSelectedItem(_c);var _e=_d["STRE_FILE_NM"];var _f=_d["ORGINL_FILE_NM"];if(this.comUtils.isNullEmpty(_e)){this.fn_canceAtchlFile(_f,_c,false);}};this.div_singleFile_btn_uploadFile_onclick=function(_a,_b){this.fn_uploadFile();};this.fn_uploadFile=function(){var _a=this.File_UpDownManager.hasFile();if(_a){var _b={};var _c;_c=this.ds_fileMastSingle.getColumn(0,"FILE_SN");if(_c!=null&&_c!=undefined&&_c>0){this.File_UpDownManager.setFileSn(_c);}var _d="hsco/cmm/file/fileUpload.do";var _e="";var _f="ds_singleFile=fileList";this.File_UpDownManager.upload(_d,_e,_f);}else{this.gfn_message("err.파일.업로드.정보없음");}};this.fn_setSingleFileView=function(){var _a=false;var _b=false;if(this.ds_fileMastSingle.getColumn()>0){var _c=this.ds_fileMastSingle.getColumn(0,"FILE_SN");if(_c!=null&&_c!=undefined&&_c!=0){_a=true;}}if(this.ds_singleFile.getColumn()>0){var _d=this.ds_singleFile.getColumn(0,"ORGINL_FILE_NM");if(_d!=null&&_d!=undefined&&_d!=""){_b=true;}}this.div_singleFile.btn_atchFile.set_visible(_a);this.div_singleFile.btn_cancelAtchFile.set_visible(_b);this.div_singleFile.btn_cancelAtchFile.set_enable(_b);this.div_singleFile.btn_delAtchFile.set_visible(_b);this.div_singleFile.btn_viewAtchFile.set_visible(_b);this.div_singleFile.btn_downFile.set_visible(_b);};this.div_singleFile_btn_atchFile_onclick=function(_a,_b){this.fn_addAtchFile(false);};this.div_singleFile_btn_atchFile2_onclick=function(_a,_b){this.fn_addAtchFile(false);};this.div_singleFile_btn_downFile_onclick=function(_a,_b){if(this.ds_fileMastSingle.getColumn()>0){var _c=this.ds_fileMastSingle.getColumn(0,"FILE_SN");if(_c!=null&&_c!=undefined&&_c>0){var _d=this.ds_singleFile.getColumn(0,"FILE_ORDR");var _e=this.ds_singleFile.getColumn(0,"ORGINL_FILE_NM");this.File_UpDownManager.download(_c,_d,_e);}else{this.gfn_message("info.파일정보.없음");}}else{this.gfn_message("err.파일.다운로드.정보없음");}};this.div_singleFile_btn_init_onclick=function(_a,_b){this.ds_fileMastSingle.clearData();this.ds_singleFile.clearData();this.div_work.iv_files.set_image("");};this.div_multiFile_btn_popupFile_onclick=function(_a,_b){this.fn_popup_FileUpDownManager();};this.fn_popup_FileUpDownManager=function(_a){trace(this.ds_fileSn.saveXML());var _b=this.ds_fileMast.rowposition;if(this.ds_fileSn.getRowCount()==0){this.ds_fileSn.addRow();}if(_b> -1){this.ds_fileSn.setColumn(0,"FILE_SN",this.ds_fileMast.getColumn(_b,"FILE_SN"));this.ds_fileSn.setColumn(0,"SYS_SE_CODE",this.ds_fileMast.getColumn(_b,"SYS_SE_CODE"));this.ds_fileSn.setColumn(0,"JOB_SE",this.ds_fileMast.getColumn(_b,"JOB_SE_CODE"));}if(!this.fn_uploadPopUp_validate()){return;}var _c={arg_0:this,arg_1:this.ds_fileList,arg_2:this.ds_fileSn};if(_a==null||_a==undefined){this.gfn_popup("Popup_1",694,528,"업로드파일 선택 / 다운로드",_c,"com::COM010300_P01.xfdl","div_multiFile_btn_popupFile_callback");}else{var _d="com::COM010300_P11.xfdl";if(_a){_d="com::COM010300_P11.xfdl";}else{_d="com::COM010300_P01.xfdl";}this.gfn_popup("Popup_1",694,528,"업로드파일 선택 / 다운로드",_c,_d,"div_multiFile_btn_popupFile_callback",_a);}};this.div_multiFile_btn_popupFile_callback=function(_a,_b){if(_b!=null&&_b!=undefined){this.ds_fileList.loadXML(_b);trace("RETURN::::"+this.ds_fileList.saveXML());}};this.fn_uploadPopUp_validate=function(){var _a=true;trace(this.ds_fileSn.saveXML());if(this.ds_fileSn.getRowCount()>0){var _b=this.ds_fileSn.getColumn(0,"SYS_SE_CODE");var _c=this.ds_fileSn.getColumn(0,"JOB_SE");if(_b==""||_b==null||_b==undefined){_a=false;this.gfn_message("err.프로그램오류.항목누락","시스템코드");return;}if(_c==""||_c==null||_c==undefined){_a=false;this.gfn_message("err.프로그램오류.항목누락","업무코드");return;}}return _a;};this.div_multiFile_btn_fileUpload_onclick=function(_a,_b){this.fn_popupFileUploader();};this.fn_popupFileUploader=function(){if(this.ds_fileSn.getRowCount()==0){this.ds_fileSn.addRow();}var _a=this.ds_fileMast.rowposition;if(_a> -1){this.ds_fileSn.setColumn(0,"FILE_SN",this.ds_fileMast.getColumn(_a,"FILE_SN"));this.ds_fileSn.setColumn(0,"SYS_SE_CODE",this.ds_fileMast.getColumn(_a,"SYS_SE_CODE"));this.ds_fileSn.setColumn(0,"JOB_SE",this.ds_fileMast.getColumn(_a,"JOB_SE_CODE"));}if(!this.fn_uploadPopUp_validate()){return;}var _b={arg_0:this,arg_1:this.ds_fileList,arg_2:this.ds_fileSn};trace(this.ds_fileSn.saveXML());this.gfn_popup("Popup_2",694,528,"파일 업로드 관리자",_b,"com::COM010300_P02.xfdl","div_work_btn_popupFile_callback");};this.div_multiFile_btn_download_onclick=function(_a,_b){var _c=this.ds_fileMast.rowposition;if(_c> -1){if(this.ds_fileSn.getRowCount()==0){this.ds_fileSn.addRow();}var _d=this.ds_fileMast.getColumn(_c,"SYS_SE_CODE");var _e=this.ds_fileMast.getColumn(_c,"JOB_SE_CODE");this.ds_fileSn.setColumn(0,"FILE_SN",this.ds_fileMast.getColumn(_c,"FILE_SN"));this.ds_fileSn.setColumn(0,"SYS_SE_CODE",_d);this.ds_fileSn.setColumn(0,"JOB_SE",_e);this.fn_popupDownloader(this.ds_fileSn,_d,_e,this.ds_fileList);}else{this.gfn_message("err.프로그램오류.항목누락","파일일련번호");}};this.fn_popupDownloader=function(_a,_b,_c,_d){if(!this.fn_uploadPopUp_validate2()){return;}var _e={arg_0:this,arg_1:_d,arg_2:_a};trace(this.ds_fileSn.saveXML());this.gfn_popup("Popup_3",694,528,"파일다운로드 관리자",_e,"com::COM010300_P03.xfdl","div_work_btn_popupFile_callback");};this.fn_uploadPopUp_validate2=function(){var _a=true;if(this.ds_fileSn.getRowCount()==0){_a=false;this.gfn_message("err.프로그램오류.항목누락","파일 초기화 정보");return;}else{var _b=this.ds_fileSn.getColumn(0,"SYS_SE_CODE");var _c=this.ds_fileSn.getColumn(0,"JOB_SE");var _d=this.ds_fileSn.getColumn(0,"FILE_SN");if(_d<1||_d==null||_d==undefined){this.gfn_message("err.프로그램오류.항목누락","파일일련번호");}if(_b==""||_b==null||_b==undefined){_a=false;this.gfn_message("err.프로그램오류.항목누락","시스템코드");return;}if(_c==""||_c==null||_c==undefined){_a=false;this.gfn_message("err.프로그램오류.항목누락","업무코드");return;}}return _a;};this.div_work_btn_select01_onclick=function(_a,_b){this.fn_transaction("GetFileSn");};this.div_multiFile_btn_popupMovable_onclick=function(_a,_b){this.fn_popup_FileUpDownManager(true);};});this.on_initEvent=function(){this.addEventHandler("oninit",this.form_oninit,this);this.addEventHandler("onload",this.form_onload,this);this.div_multiFile.grd_fileMast.addEventHandler("oncellclick",this.div_multiFile_grd_fileMast_oncellclick,this);this.div_multiFile.grd_fileList.addEventHandler("oncellclick",this.div_multiFile_grd_fileList_oncellclick,this);this.div_multiFile.grd_fileList.addEventHandler("onheadclick",this.div_multiFile_grd_fileList_onheadclick,this);this.div_multiFile.btn_uploadFiles.addEventHandler("onclick",this.div_multiFile_btn_uploadFiles_onclick,this);this.div_multiFile.btn_delFiles.addEventHandler("onclick",this.div_multiFile_btn_delFiles_onclick,this);this.div_multiFile.btn_atchFiles.addEventHandler("onclick",this.div_multiFile_btn_atchFiles_onclick,this);this.div_multiFile.btn_downFiles.addEventHandler("onclick",this.div_multiFile_btn_downFiles_onclick,this);this.div_multiFile.btn_popupFile.addEventHandler("onclick",this.div_multiFile_btn_popupFile_onclick,this);this.div_multiFile.btn_fileUpload.addEventHandler("onclick",this.div_multiFile_btn_fileUpload_onclick,this);this.div_multiFile.btn_download.addEventHandler("onclick",this.div_multiFile_btn_download_onclick,this);this.div_multiFile.btn_select01.addEventHandler("onclick",this.div_work_btn_select01_onclick,this);this.div_multiFile.btn_popupMovable.addEventHandler("onclick",this.div_multiFile_btn_popupMovable_onclick,this);this.div_singleFile.btn_atchFile.addEventHandler("onclick",this.div_singleFile_btn_atchFile_onclick,this);this.div_singleFile.btn_cancelAtchFile.addEventHandler("onclick",this.div_singleFile_btn_cancelAtchFile_onclick,this);this.div_singleFile.btn_uploadFile.addEventHandler("onclick",this.div_singleFile_btn_uploadFile_onclick,this);this.div_singleFile.btn_viewAtchFile.addEventHandler("onclick",this.div_singleFile_btn_viewAtchFile_onclick,this);this.div_singleFile.btn_delAtchFile.addEventHandler("onclick",this.div_singleFile_btn_delAtchFile_onclick,this);this.div_singleFile.btn_searchSingleFile.addEventHandler("onclick",this.div_singleFile_btn_searchSingleFile_onclick,this);this.div_singleFile.btn_atchFile2.addEventHandler("onclick",this.div_singleFile_btn_atchFile2_onclick,this);this.div_singleFile.btn_downFile.addEventHandler("onclick",this.div_singleFile_btn_downFile_onclick,this);this.div_singleFile.btn_init.addEventHandler("onclick",this.div_singleFile_btn_init_onclick,this);};this.loadIncludeScript("SAM030100.xfdl");};})();