(function(){return function(){if(!this._is_form){return;}this.on_create=function(){var _a=null;if(Form==this.constructor){this.set_name("SYM090200_P12");this.set_classname("Pattern_03");this.set_titletext("내부결재(기안)");this._setFormPosition(0,0,1100,730);}_a=new Dataset("ds_JobSeCode",this);_a.set_firefirstcount("0");_a.getSetter("firenextcount").set("0");_a.set_useclientlayout("false");_a.set_updatecontrol("true");_a.set_enableevent("true");_a.set_loadkeymode("keep");_a.set_loadfiltermode("keep");_a.set_reversesubsum("false");_a._setContents("<ColumnInfo><Column id=\"CODE\" type=\"STRING\" size=\"256\"/><Column id=\"CODE_NM\" type=\"STRING\" size=\"256\"/></ColumnInfo>");this.addChild(_a.name,_a);_a=new Dataset("ds_innerSanctnMastr",this);_a.set_firefirstcount("0");_a.getSetter("firenextcount").set("0");_a.set_useclientlayout("true");_a.set_updatecontrol("true");_a.set_enableevent("true");_a.set_loadkeymode("keep");_a.set_loadfiltermode("keep");_a.set_reversesubsum("false");_a._setContents("<ColumnInfo><Column id=\"INNER_SANCTN_ID\" type=\"STRING\" size=\"256\"/><Column id=\"INNER_SANCTN_MDL_ID\" type=\"STRING\" size=\"256\"/><Column id=\"SYS_SE_CODE\" type=\"STRING\" size=\"256\"/><Column id=\"JOB_SE\" type=\"STRING\" size=\"256\"/><Column id=\"USER_ID\" type=\"STRING\" size=\"256\"/><Column id=\"DEPT_CODE\" type=\"STRING\" size=\"256\"/><Column id=\"SANCTN_SJ\" type=\"STRING\" size=\"256\"/><Column id=\"SANCTN_TY\" type=\"STRING\" size=\"256\"/><Column id=\"LAST_SANCTN_STEP\" type=\"STRING\" size=\"256\"/><Column id=\"LAST_SANCTN_STTUS\" type=\"STRING\" size=\"256\"/><Column id=\"LAST_SANCTNER_ID\" type=\"STRING\" size=\"256\"/><Column id=\"LAST_SANCTN_DT\" type=\"STRING\" size=\"256\"/><Column id=\"FILE_SN\" type=\"BIGDECIMAL\" size=\"20\"/><Column id=\"NEXT_SANCTN_STEP\" type=\"STRING\" size=\"256\"/><Column id=\"NEXT_SANCTNER_ID\" type=\"STRING\" size=\"256\"/><Column id=\"REGISTER_ID\" type=\"STRING\" size=\"256\"/><Column id=\"REGIST_DT\" type=\"STRING\" size=\"256\"/><Column id=\"UPDUSR_ID\" type=\"STRING\" size=\"256\"/><Column id=\"UPDT_DT\" type=\"STRING\" size=\"256\"/><Column id=\"JOB_KEY\" type=\"STRING\" size=\"256\"/><Column id=\"FILE_SN2\" type=\"BIGDECIMAL\" size=\"20\"/><Column id=\"SANCTN_INFO_AMT\" type=\"STRING\" size=\"256\"/><Column id=\"SANCTN_INFO_DATE\" type=\"STRING\" size=\"256\"/><Column id=\"SANCTN_INFO_CN1\" type=\"STRING\" size=\"256\"/><Column id=\"SANCTN_INFO_CN2\" type=\"STRING\" size=\"256\"/><Column id=\"SANCTN_INFO_CN3\" type=\"STRING\" size=\"256\"/></ColumnInfo>");this.addChild(_a.name,_a);_a=new Dataset("ds_innerSanctner",this);_a.set_firefirstcount("0");_a.getSetter("firenextcount").set("0");_a.set_useclientlayout("false");_a.set_updatecontrol("true");_a.set_enableevent("true");_a.set_loadkeymode("keep");_a.set_loadfiltermode("keep");_a.set_reversesubsum("false");_a._setContents("<ColumnInfo><Column id=\"SANCTN_SN\" type=\"INT\" size=\"3\"/><Column id=\"EMPNO\" type=\"STRING\" size=\"256\"/><Column id=\"EMPNM\" type=\"STRING\" size=\"256\"/><Column id=\"HR_CLSF_SE\" type=\"STRING\" size=\"256\"/><Column id=\"RSPOFC_SE\" type=\"STRING\" size=\"256\"/><Column id=\"SANCTN_STEP\" type=\"STRING\" size=\"256\"/><Column id=\"DEPT_CODE\" type=\"STRING\" size=\"256\"/><Column id=\"OFCPS_SE\" type=\"STRING\" size=\"256\"/></ColumnInfo>");this.addChild(_a.name,_a);_a=new Dataset("ds_innerSanctnMdl",this);_a.set_firefirstcount("0");_a.getSetter("firenextcount").set("0");_a.set_useclientlayout("false");_a.set_updatecontrol("true");_a.set_enableevent("true");_a.set_loadkeymode("keep");_a.set_loadfiltermode("keep");_a.set_reversesubsum("false");_a._setContents("<ColumnInfo><Column id=\"INNER_SANCTN_MDL_NM\" type=\"STRING\" size=\"256\"/><Column id=\"INNER_SANCTN_ID\" type=\"STRING\" size=\"256\"/><Column id=\"SANCTN_LINE_NUM\" type=\"STRING\" size=\"256\"/></ColumnInfo>");this.addChild(_a.name,_a);_a=new Dataset("ds_innerSanctnId",this);_a.set_firefirstcount("0");_a.getSetter("firenextcount").set("0");_a.set_useclientlayout("false");_a.set_updatecontrol("true");_a.set_enableevent("true");_a.set_loadkeymode("keep");_a.set_loadfiltermode("keep");_a.set_reversesubsum("false");_a._setContents("<ColumnInfo><Column id=\"INNER_SANCTN_ID\" type=\"STRING\" size=\"256\"/></ColumnInfo>");this.addChild(_a.name,_a);_a=new Dataset("ds_sanctionRptParam",this);_a.set_firefirstcount("0");_a.getSetter("firenextcount").set("0");_a.set_useclientlayout("false");_a.set_updatecontrol("true");_a.set_enableevent("true");_a.set_loadkeymode("keep");_a.set_loadfiltermode("keep");_a.set_reversesubsum("false");_a._setContents("<ColumnInfo><Column id=\"INNER_SANCTN_ID\" type=\"STRING\" size=\"256\"/><Column id=\"SN\" type=\"BIGDECIMAL\" size=\"256\"/><Column id=\"SVC_ID\" type=\"STRING\" size=\"256\"/><Column id=\"SVC_URL\" type=\"STRING\" size=\"512\"/><Column id=\"INPUT_DATA_SET\" type=\"STRING\" size=\"512\"/><Column id=\"OUTPUT_DATA_SET\" type=\"STRING\" size=\"512\"/><Column id=\"REPRT_URL\" type=\"STRING\" size=\"512\"/><Column id=\"REPRT_SJ\" type=\"STRING\" size=\"256\"/><Column id=\"STRE_FILE_NM\" type=\"STRING\" size=\"100\"/></ColumnInfo>");this.addChild(_a.name,_a);_a=new Dataset("ds_rptParamInfo",this);_a.set_firefirstcount("0");_a.getSetter("firenextcount").set("0");_a.set_useclientlayout("false");_a.set_updatecontrol("true");_a.set_enableevent("true");_a.set_loadkeymode("keep");_a.set_loadfiltermode("keep");_a.set_reversesubsum("false");_a._setContents("<ColumnInfo><Column id=\"INNER_SANCTN_ID\" type=\"STRING\" size=\"256\"/><Column id=\"SN\" type=\"BIGDECIMAL\" size=\"256\"/><Column id=\"SVC_ID\" type=\"STRING\" size=\"256\"/><Column id=\"SVC_URL\" type=\"STRING\" size=\"512\"/><Column id=\"DATA_SET_SE\" type=\"STRING\" size=\"256\"/><Column id=\"PARAMTR_ID\" type=\"STRING\" size=\"256\"/><Column id=\"DATA_SET_NM\" type=\"STRING\" size=\"256\"/><Column id=\"INPUT_DATA\" type=\"STRING\" size=\"4000\"/><Column id=\"OUTPUT_XML\" type=\"STRING\" size=\"4000\"/><Column id=\"ORDR\" type=\"BIGDECIMAL\" size=\"256\"/></ColumnInfo>");this.addChild(_a.name,_a);_a=new Dataset("ds_recomInfo",this);_a.set_useclientlayout("true");_a._setContents("<ColumnInfo><Column id=\"INNER_SANCTN_ID\" type=\"STRING\" size=\"16\"/><Column id=\"INNER_SANCTN_MDL_ID\" type=\"STRING\" size=\"10\"/><Column id=\"SYS_SE_CODE\" type=\"STRING\" size=\"256\"/><Column id=\"JOB_SE\" type=\"STRING\" size=\"256\"/><Column id=\"LAST_SANCTN_STEP\" type=\"STRING\" size=\"256\"/><Column id=\"LAST_SANCTN_STTUS\" type=\"STRING\" size=\"256\"/><Column id=\"LAST_SANCTNER_ID\" type=\"STRING\" size=\"256\"/><Column id=\"LAST_SANCTN_DT\" type=\"STRING\" size=\"256\"/><Column id=\"FILE_SN\" type=\"BIGDECIMAL\" size=\"20\"/><Column id=\"AGNCY_SANCTNER_ID\" type=\"STRING\" size=\"256\"/><Column id=\"ABSNCE_AT\" type=\"STRING\" size=\"256\"/><Column id=\"SANCTN_TITLE\" type=\"STRING\" size=\"256\"/><Column id=\"SANCTN_INFO_AMT\" type=\"STRING\" size=\"256\"/><Column id=\"SANCTN_INFO_DATE\" type=\"STRING\" size=\"256\"/><Column id=\"SANCTN_INFO_CN1\" type=\"STRING\" size=\"256\"/><Column id=\"SANCTN_INFO_CN2\" type=\"STRING\" size=\"256\"/><Column id=\"SANCTN_INFO_CN3\" type=\"STRING\" size=\"256\"/><Column id=\"SANCTN_INFO_FILESN\" type=\"STRING\" size=\"256\"/></ColumnInfo>");this.addChild(_a.name,_a);_a=new Dataset("ds_validation",this);_a.set_firefirstcount("0");_a.getSetter("firenextcount").set("0");_a.set_useclientlayout("false");_a.set_updatecontrol("true");_a.set_enableevent("true");_a.set_loadkeymode("keep");_a.set_loadfiltermode("keep");_a.set_reversesubsum("false");_a._setContents("<ColumnInfo><Column id=\"compId\" type=\"STRING\" size=\"256\"/><Column id=\"colId\" type=\"STRING\" size=\"256\"/><Column id=\"PK\" type=\"STRING\" size=\"256\"/><Column id=\"notNull\" type=\"STRING\" size=\"256\"/><Column id=\"type\" type=\"STRING\" size=\"256\"/><Column id=\"nlength\" type=\"STRING\" size=\"256\"/><Column id=\"from\" type=\"STRING\" size=\"256\"/><Column id=\"to\" type=\"STRING\" size=\"256\"/><Column id=\"lengthChkGb\" type=\"STRING\" size=\"256\"/><Column id=\"msgId\" type=\"STRING\" size=\"256\"/><Column id=\"expr\" type=\"STRING\" size=\"256\"/><Column id=\"func\" type=\"STRING\" size=\"256\"/></ColumnInfo><Rows><Row><Col id=\"compId\">ds_innerSanctnMastr</Col><Col id=\"colId\">INNER_SANCTN_MDL_ID</Col><Col id=\"notNull\">Y</Col><Col id=\"msgId\">결재모형</Col></Row><Row><Col id=\"compId\">ds_innerSanctnMastr</Col><Col id=\"colId\">SANCTN_SJ</Col><Col id=\"notNull\">Y</Col><Col id=\"msgId\">결재제목</Col></Row><Row><Col id=\"compId\">ds_recomInfo</Col><Col id=\"colId\">INNER_SANCTN_MDL_ID</Col><Col id=\"notNull\">Y</Col></Row><Row><Col id=\"compId\">ds_recomInfo</Col><Col id=\"colId\">SANCTN_SJ</Col><Col id=\"notNull\">Y</Col></Row></Rows>");this.addChild(_a.name,_a);_a=new Dataset("ds_fileList",this);_a.set_firefirstcount("0");_a.getSetter("firenextcount").set("0");_a.set_useclientlayout("true");_a.set_updatecontrol("true");_a.set_enableevent("true");_a.set_loadkeymode("keep");_a.set_loadfiltermode("keep");_a.set_reversesubsum("false");_a._setContents("<ColumnInfo><Column id=\"CHK\" type=\"STRING\" size=\"256\"/><Column id=\"FILE_SN\" type=\"BIGDECIMAL\" size=\"20\"/><Column id=\"FILE_ORDR\" type=\"INT\" size=\"3\"/><Column id=\"FILE_STRE_COURS\" type=\"STRING\" size=\"2000\"/><Column id=\"STRE_FILE_NM\" type=\"STRING\" size=\"255\"/><Column id=\"ORGINL_FILE_NM\" type=\"STRING\" size=\"255\"/><Column id=\"FILE_EXTSN\" type=\"STRING\" size=\"20\"/><Column id=\"FILE_CN\" type=\"STRING\" size=\"4000\"/><Column id=\"FILE_MG\" type=\"INT\" size=\"8\"/><Column id=\"USE_AT\" type=\"STRING\" size=\"1\"/><Column id=\"FILE_ID\" type=\"STRING\" size=\"256\"/><Column id=\"SN\" type=\"INT\" size=\"5\"/><Column id=\"SYS_SE_CODE\" type=\"STRING\" size=\"6\"/><Column id=\"JOB_SE\" type=\"STRING\" size=\"3\"/><Column id=\"FILE_TY\" type=\"STRING\" size=\"256\"/><Column id=\"FILE_IMAGE\" type=\"STRING\" size=\"256\"/><Column id=\"PROGRS\" type=\"INT\" size=\"5\"/><Column id=\"TRNSMIS_FILE_SIZE\" type=\"INT\" size=\"256\"/><Column id=\"DELETE_IMAGE\" type=\"STRING\" size=\"256\"/><Column id=\"STTUS\" type=\"STRING\" size=\"256\"/><Column id=\"DEL_CAN\" type=\"STRING\" size=\"1\"/></ColumnInfo>");this.addChild(_a.name,_a);_a=new Dataset("ds_fileSn2",this);_a.set_firefirstcount("0");_a.getSetter("firenextcount").set("0");_a.set_enableevent("true");_a.set_loadkeymode("keep");_a.set_loadfiltermode("keep");_a.set_reversesubsum("false");_a.set_useclientlayout("true");_a._setContents("<ColumnInfo><Column id=\"FILE_SN\" type=\"BIGDECIMAL\" size=\"20\"/><Column id=\"SYS_SE_CODE\" type=\"STRING\" size=\"6\"/><Column id=\"JOB_SE\" type=\"STRING\" size=\"3\"/></ColumnInfo>");this.addChild(_a.name,_a);_a=new Dataset("ds_apprline",this);_a.set_useclientlayout("true");_a._setContents("<ColumnInfo><Column id=\"APPRLINE_COL1\" type=\"STRING\" size=\"256\"/><Column id=\"APPRLINE_COL2\" type=\"STRING\" size=\"256\"/><Column id=\"APPRLINE_COL3\" type=\"STRING\" size=\"256\"/><Column id=\"SANCTNER_ID\" type=\"STRING\" size=\"256\"/></ColumnInfo>");this.addChild(_a.name,_a);_a=new Dataset("ds_OfcpsSe",this);_a.set_firefirstcount("0");_a.getSetter("firenextcount").set("0");_a.set_useclientlayout("false");_a.set_updatecontrol("true");_a.set_enableevent("true");_a.set_loadkeymode("keep");_a.set_loadfiltermode("keep");_a.set_reversesubsum("false");_a._setContents("<ColumnInfo><Column id=\"CODE\" type=\"STRING\" size=\"256\"/><Column id=\"CODE_NM\" type=\"STRING\" size=\"256\"/></ColumnInfo>");this.addChild(_a.name,_a);_a=new Dataset("ds_cond_fileSn",this);_a.set_firefirstcount("0");_a.getSetter("firenextcount").set("0");_a.set_useclientlayout("true");_a.set_updatecontrol("true");_a.set_enableevent("true");_a.set_loadkeymode("keep");_a.set_loadfiltermode("keep");_a.set_reversesubsum("false");_a._setContents("<ColumnInfo><Column id=\"FILE_SN\" type=\"STRING\" size=\"256\"/></ColumnInfo>");this.addChild(_a.name,_a);_a=new Static("Static03","absolute",null,"0","15","100%","0",null,this);_a.set_text("15");_a.set_visible("false");_a.style.set_background("#1b3cd23c");_a.style.set_align("center middle");this.addChild(_a.name,_a);_a=new Static("Static06","absolute","0","35","100%","15",null,null,this);_a.set_text("15");_a.set_visible("false");_a.style.set_background("#dc143c3c");_a.style.set_align("center middle");this.addChild(_a.name,_a);_a=new Static("Static02","absolute","0","0","100%","35",null,null,this);_a.set_text("내부결재관리");_a.set_cssclass("sta_WF_PopupTitle");this.addChild(_a.name,_a);_a=new Button("btn_exit","absolute",null,"0","50","35","5",null,this);_a.set_cssclass("btn_WF_PopupClose");this.addChild(_a.name,_a);_a=new Static("Static05","absolute","0","0","15","100%",null,null,this);_a.set_text("15");_a.set_visible("false");_a.style.set_background("#1b3cd23c");_a.style.set_align("center middle");this.addChild(_a.name,_a);_a=new Static("Static08","absolute","0","80","100%","5",null,null,this);_a.set_text("10");_a.set_visible("false");_a.style.set_background("#dc143c3c");_a.style.set_align("center middle");this.addChild(_a.name,_a);_a=new Div("div_work","absolute","0","50","100%","30",null,null,this);this.addChild(_a.name,_a);_a=new Static("Static33","absolute","15",null,"80","30",null,"0",this.div_work);_a.set_text("결재제목");_a.set_cssclass("sta_WF_Label");this.div_work.addChild(_a.name,_a);_a=new Static("Static01","absolute","95","0",null,"30","190",null,this.div_work);_a.set_cssclass("sta_WF_Labelbg");this.div_work.addChild(_a.name,_a);_a=new Edit("SANCTN_SJ","absolute","97","2",null,"26","192",null,this.div_work);_a.set_taborder("1");_a.set_cssclass("edt_WF_Essential");_a.set_imemode("hangul");this.div_work.addChild(_a.name,_a);_a=new Button("btn_save","absolute",null,"3","80","25","100",null,this.div_work);_a.set_text("결재선관리");_a.set_cssclass("btn_WF_CRUD");this.div_work.addChild(_a.name,_a);_a=new Button("btn_recomCancel","absolute",null,"3","80","25","15",null,this.div_work);_a.set_text("결재요청");_a.set_cssclass("btn_WF_CRUD");this.div_work.addChild(_a.name,_a);_a=new Div("div_ubiReport","absolute","13","90",null,"500","13",null,this);_a.set_async("false");_a.set_url("common::frmReport2.xfdl");this.addChild(_a.name,_a);_a=new Static("Static14","absolute","0","590",null,"5","0",null,this);_a.set_text("5");_a.set_visible("false");_a.style.set_background("#dc143c3c");_a.style.set_align("center middle");this.addChild(_a.name,_a);_a=new Static("Static10","absolute","15","595","150","25",null,null,this);_a.set_text("첨부파일");_a.set_cssclass("sta_WF_Title02");this.addChild(_a.name,_a);_a=new Grid("grd_fileList","absolute","15","620",null,"100","15",null,this);_a.set_binddataset("ds_fileList");_a.set_autosizingtype("none");_a._setContents("<Formats><Format id=\"default\"><Columns><Column size=\"30\"/><Column size=\"1025\"/></Columns><Rows><Row size=\"24\" band=\"head\"/><Row size=\"24\"/></Rows><Band id=\"head\"><Cell displaytype=\"checkbox\"/><Cell col=\"1\" text=\"파일명\"/></Band><Band id=\"body\"><Cell displaytype=\"checkbox\" edittype=\"checkbox\" text=\"bind:CHK\"/><Cell col=\"1\" style=\"align:left;\" text=\"bind:ORGINL_FILE_NM\"/></Band></Format></Formats>");this.addChild(_a.name,_a);_a=new Button("btn_filedown","absolute",null,"597","75","21","15",null,this);_a.set_text("파일다운");_a.set_cssclass("btn_WF_Process");_a.set_visible("false");this.addChild(_a.name,_a);_a=new Button("btn_fileUpload","absolute",null,"597","75","21","95",null,this);_a.set_text("파일추가");_a.set_cssclass("btn_WF_Gridadd");this.addChild(_a.name,_a);_a=new Button("btn_fileDelete","absolute",null,"597","75","21","15",null,this);_a.set_text("파일삭제");_a.set_cssclass("btn_WF_Griddel");this.addChild(_a.name,_a);_a=new Layout("default","",982,606,this.div_work,function(_b){});this.div_work.addLayout(_a.name,_a);_a=new Layout("default","",1100,730,this,function(_b){_b.set_classname("Pattern_03");_b.set_titletext("내부결재(기안)");});this.addLayout(_a.name,_a);_a=null;};this.loadPreloadList=function(){this._addPreloadList("fdl","common::frmReport2.xfdl");};this.addIncludeScript("SYM090200_P11.xfdl","lib::comInclude.xjs");this.addIncludeScript("SYM090200_P11.xfdl","lib::comInnerSanct.xjs");this.addIncludeScript("SYM090200_P11.xfdl","lib::comFile.xjs");this.addIncludeScript("SYM090200_P11.xfdl","lib::comUpDownUtils.xjs");this.registerScript("SYM090200_P11.xfdl",function(){this.fileSn;this.File_UpDownManager=null;this.saveFlag=true;this.SYM090200_P11_oninit=function(_a,_b){this.gfn_initForm(this);this.ds_innerSanctnMastr.clearData();this.ds_innerSanctnMastr.addRow();this.ds_sanctionRptParam.clearData();this.ds_rptParamInfo.clearData();};this.SYM090200_P11_onload=function(_a,_b){this.fv_objForm=this.parent.arg_0;var _c=this.parent.arg_3;this.ds_recomInfo.copyData(_c);var _d=function(){if(this.ds_JobSeCode.findRow("CODE",this.ds_recomInfo.getColumn(0,"JOB_SE"))<0){this.gfn_message("info.처리불가","유효하지 않은 업무구분입니다.","","",function(){this.close("");});}else{this.fn_search();}};var _e=[["ds_JobSeCode","COM025","1","D"],["ds_OfcpsSe","HRM021","1",""]];this.gfn_comboLoad(_e,_d);};this.fn_copyDataWith_ROWTYPE_INSERT=function(_a,_b){var _c=_a.getRowCount();var _d=_a.getColCount();for(var _f=0;_f<_c;_f++ ){var _e=_b.addRow();for(var _g=0;_g<_d;_g++ ){_b.setColumn(_e,_g,_a.getColumn(_f,_g));}}};this.fn_search=function(){this.fn_transaction("initInnerSanctn");};this.fn_transaction=function(_a){var _b="";var _c="fn_callBack";var _d=true;var _e=false;var _f="";var _g="";var _h="";switch(_a){case "initInnerSanctn":_f="hsco/com/sym/ism/SYM090200/initInnerSanctn.do";_g="input1=ds_recomInfo";_h="ds_innerSanctnMdl=innerSanctnMdl "+"ds_innerSanctner=sSanctnerRecentInfo";break;case "insInnerSanctn":_f="hsco/com/sym/ism/SYM090200/insInnerSanctn.do";_g="innerSanctnMastr=ds_innerSanctnMastr "+"innerSanctner=ds_innerSanctner "+"innerSanctnReprtInfo=ds_sanctionRptParam "+"innerSanctnReprtDataClob=ds_innerSanctnReprtDataClob ";_h="ds_innerSanctnId=innerSanctnId";this.fn_uploadFiles();break;case "GetFileSn":_f="hsco/cmm/file/getFileSn.do";_g="";_h="ds_fileSn2=output_fsn";break;case "selectAtchFile":this.btn_fileUpload.set_visible(false);this.btn_fileDelete.set_visible(false);this.btn_filedown.set_visible(true);this.ds_cond_fileSn.clearData();if(this.ds_cond_fileSn.rowcount==0){this.ds_cond_fileSn.addRow();}this.ds_cond_fileSn.setColumn(0,"FILE_SN",this.ds_recomInfo.getColumn(0,"SANCTN_INFO_FILESN"));this.ds_fileList.clearData();_f="hsco/cmm/file/selectAtchmnFileList.do";_g="input1=ds_cond_fileSn";_h="ds_fileList=output1";break;}Ex.core.tran(this,_a,_f,_g,_h,_b,_c,_d,_e);};this.fn_callBack=function(_a,_b,_c){if(_b!=0){switch(_a){case "initInnerSanctn":if("info.내부결재.등록된ID"==_c){var _d=function(){var _h="0000";this.close(_h);};this.gfn_message(_c,"","","",_d);}break;}this.gfn_callback_message(_a,_b,_c);}else{switch(_a){case "initInnerSanctn":if(this.ds_recomInfo.getColumn(0,"SANCTN_TITLE")!=undefined&&this.ds_recomInfo.getColumn(0,"SANCTN_TITLE")!=""){this.div_work.SANCTN_SJ.set_value(this.ds_recomInfo.getColumn(0,"SANCTN_TITLE"));}else{this.div_work.SANCTN_SJ.set_value(this.ds_innerSanctnMdl.getColumn(0,"INNER_SANCTN_MDL_NM"));}this.div_work.SANCTN_SJ.setFocus();var _e=this.parent.arg_1;var _f=this.parent.arg_2;var _g={useMultiUpload:true,onChange:this.fn_onFileSelected,onSuccess:this.fn_onFileSuccess};this.File_UpDownManager=new this.fileUpDownManager(this,this.ds_recomInfo.getColumn(0,"SYS_SE_CODE"),this.ds_recomInfo.getColumn(0,"JOB_SE"));this.File_UpDownManager.init(_g);this.File_UpDownManager.cancelAllFile();this.fn_copyDataWith_ROWTYPE_INSERT(_e,this.ds_sanctionRptParam);this.fn_copyDataWith_ROWTYPE_INSERT(_f,this.ds_rptParamInfo);this.gfn_makeRptDatasets(_f);this.gfn_selectReportDs(_e,_f);this.gfn_makeOutputDsToXml();this.fn_dynamic_showApprline();if(this.ds_recomInfo.getColumn(0,"SANCTN_INFO_FILESN")!=undefined&&this.ds_recomInfo.getColumn(0,"SANCTN_INFO_FILESN")!=""){this.fn_transaction("selectAtchFile");}break;case "insInnerSanctn":var _d=function(){var _h="0000";_h=_h+"^"+this.ds_innerSanctnId.getColumn(0,"INNER_SANCTN_ID");this.close(_h);};this.gfn_message("info.정상처리","정상처리되었습니다.","","",_d);break;case "GetFileSn":this.ds_innerSanctnMastr.setColumn(0,"FILE_SN",this.ds_fileSn2.getColumn(0,"FILE_SN"));break;}}};this.fn_selInnerSanctner=function(){var _a={arg_0:this,arg_1:this.ds_recomInfo.getColumn(0,"INNER_SANCTN_MDL_ID"),arg_2:this.ds_innerSanctner};var _b=function(_c,_d){var _e=new Dataset();var _f=_e.loadXML(_d);if(_f){this.ds_innerSanctner.copyData(_e);this.fn_dynamic_showApprline();}};this.gfn_popup("SYM090200_P90",770,330,"결재선선택",_a,"com_sym_ism::SYM090200_P90.xfdl",_b);};this.fn_uploadFiles=function(){var _a=this.File_UpDownManager.hasFile();if(_a){this.fn_transaction("GetFileSn");var _b;if(this.ds_innerSanctnMastr.rowcount>0){_b=this.ds_innerSanctnMastr.getColumn(0,"FILE_SN");if(_b!=null&&_b!=undefined&&_b>0){this.File_UpDownManager.setFileSn(_b);}var _c="hsco/com/sym/ism/SYM090200/innerSanctnFileUpload.do";var _d="";var _e="";this.File_UpDownManager.upload(_c,_d,_e);}}};this.btn_sanctnline_onclick=function(_a,_b){this.fn_selInnerSanctner();};this.btn_sanctn_onclick=function(_a,_b){this.ds_innerSanctnMastr.setColumn(0,"SANCTN_SJ",this.div_work.SANCTN_SJ.value);this.ds_innerSanctnMastr.setColumn(0,"INNER_SANCTN_MDL_ID",this.ds_recomInfo.getColumn(0,"INNER_SANCTN_MDL_ID"));this.ds_innerSanctnMastr.setColumn(0,"SYS_SE_CODE",this.ds_recomInfo.getColumn(0,"SYS_SE_CODE"));this.ds_innerSanctnMastr.setColumn(0,"JOB_SE",this.ds_recomInfo.getColumn(0,"JOB_SE"));this.ds_innerSanctnMastr.setColumn(0,"JOB_KEY",this.ds_recomInfo.getColumn(0,"JOB_KEY"));if(this.ds_recomInfo.getColumn(0,"SANCTN_INFO_AMT")!=undefined&&this.ds_recomInfo.getColumn(0,"SANCTN_INFO_AMT")!=""){this.ds_innerSanctnMastr.setColumn(0,"SANCTN_INFO_AMT",this.ds_recomInfo.getColumn(0,"SANCTN_INFO_AMT"));}else{this.ds_innerSanctnMastr.setColumn(0,"SANCTN_INFO_AMT","0");}if(this.ds_recomInfo.getColumn(0,"SANCTN_INFO_DATE")!=undefined&&this.ds_recomInfo.getColumn(0,"SANCTN_INFO_DATE")!=""){this.ds_innerSanctnMastr.setColumn(0,"SANCTN_INFO_DATE",this.ds_recomInfo.getColumn(0,"SANCTN_INFO_DATE"));}else{this.ds_innerSanctnMastr.setColumn(0,"SANCTN_INFO_DATE","");}if(this.ds_recomInfo.getColumn(0,"SANCTN_INFO_CN1")!=undefined&&this.ds_recomInfo.getColumn(0,"SANCTN_INFO_CN1")!=""){this.ds_innerSanctnMastr.setColumn(0,"SANCTN_INFO_CN1",this.ds_recomInfo.getColumn(0,"SANCTN_INFO_CN1"));}else{this.ds_innerSanctnMastr.setColumn(0,"SANCTN_INFO_CN1","");}if(this.ds_recomInfo.getColumn(0,"SANCTN_INFO_CN2")!=undefined&&this.ds_recomInfo.getColumn(0,"SANCTN_INFO_CN2")!=""){this.ds_innerSanctnMastr.setColumn(0,"SANCTN_INFO_CN2",this.ds_recomInfo.getColumn(0,"SANCTN_INFO_CN2"));}else{this.ds_innerSanctnMastr.setColumn(0,"SANCTN_INFO_CN2","");}if(this.ds_recomInfo.getColumn(0,"SANCTN_INFO_CN3")!=undefined&&this.ds_recomInfo.getColumn(0,"SANCTN_INFO_CN3")!=""){this.ds_innerSanctnMastr.setColumn(0,"SANCTN_INFO_CN3",this.ds_recomInfo.getColumn(0,"SANCTN_INFO_CN3"));}else{this.ds_innerSanctnMastr.setColumn(0,"SANCTN_INFO_CN3","");}if(this.ds_recomInfo.getColumn(0,"SANCTN_INFO_FILESN")!=undefined&&this.ds_recomInfo.getColumn(0,"SANCTN_INFO_FILESN")!=""){this.ds_innerSanctnMastr.setColumn(0,"FILE_SN",this.ds_recomInfo.getColumn(0,"SANCTN_INFO_FILESN"));}if(!this.gfn_checkValidation(this.ds_innerSanctnMastr,this.ds_validation)){return;}if(this.ds_innerSanctner.rowcount==0){this.gfn_message("info.처리불가","결재선정보가 없습니다.");return;}var _c=0;for(var _l=0;_l<this.ds_innerSanctner.rowcount;_l++ ){if("S2"==this.ds_innerSanctner.getColumn(_l,"SANCTN_STEP")){_c++ ;}}var _d=this.ds_innerSanctnMdl.getColumn(0,"SANCTN_LINE_NUM");if("0"!=_d){var _e=_d.split(",");if(_e.length==2){var _f=Number(_e[0]);var _g=Number(_e[1]);var _h=0;if(_f!=0){_h=_f-1;}if(_g!=0){_h=_h+_g-1;}if(_c!=_h){this.gfn_message("info.처리불가","해당양식 총 결재자는 "+_h+"명 입니다.\n결재자를 확인하여 주시기 바랍니다.");return;}}else if(_e.length==1){var _i=Number(_e[0]);if(_i==0){this.gfn_message("info.처리불가","결재양식 고정결재자 명수가 지정되지 않았습니다.");return;}else{if(_c!=(_i-1)){this.gfn_message("info.처리불가","해당양식 총 결재자는 "+(_i-1)+"명 입니다.\n결재자를 확인하여 주시기 바랍니다.");return;}}}else{this.gfn_message("info.처리불가","고정결재자 명수 확인시 오류가 발생했습니다.");return;}}var _j={arg_0:this,arg_1:this.ds_innerSanctner};var _k=function(_m,_n){switch(_n){case "U":this.fn_selInnerSanctner();break;case "S":this.fn_transaction("insInnerSanctn");break;}};this.gfn_popup("SYM090200_P91",342,310,"결재요청",_j,"com_sym_ism::SYM090200_P91.xfdl",_k);};this.btn_exit_onclick=function(_a,_b){this.close("");};this.btn_fileUpload_onclick=function(_a,_b){var _c=null;var _d=true;this.File_UpDownManager.addFiles(_c,_d);};this.fn_onFileSelected=function(_a,_b){if(_a==this.File_UpDownManager.TYPE_UPLOADER){var _c=this.comUtils.isArray(_b);if(_c){var _d=_b.length;for(var _g=0;_g<_d;_g++ ){var _e=this.ds_fileList.addRow();this.ds_fileList.setColumn(_e,"ORGINL_FILE_NM",_b[_g]);}}else{var _f=this.ds_fileList.addRow();this.ds_fileList.setColumn(_f,"ORGINL_FILE_NM",_b);}}};this.grd_fileList_onheadclick=function(_a,_b){if(_b.col==0){this.gfn_setGridCheckAll(_a,_b);}};this.btn_fileDelete_onclick=function(_a,_b){var _c="CHK==1";var _d=this.ds_fileList.findRowExpr(_c);if(_d== -1){this.gfn_message("comm.데이터.선택.없음");return;}if(this.gfn_message("confirm.선택파일.삭제여부","들")){var _e=this.gfn_getCheckData(this.grd_fileList,"CHK");var _f=[];for(var _g=0;_g<_e.rowcount;_g++ ){this.File_UpDownManager.cancelFiles(_e.getColumn(_g,"ORGINL_FILE_NM"));}this.gfn_delMultiDsRow(this.ds_fileList);}};this.btn_filedown_onclick=function(_a,_b){var _c={};_c["viewRow"]="expr:CHK == '1'";var _d=this.gfn_datasetToObject(this.ds_fileList,_c,true);var _e=this.comUtils.isArray(_d);if(_e){var _f=_d==null?0:_d.length;if(_f==0){this.gfn_message("comm.데이터.선택.없음");return;}for(var _j=0;_j<_f;_j++ ){var _g=_d[_j].FILE_SN;var _h=_d[_j].FILE_ORDR;var _i=_d[_j].ORGINL_FILE_NM;this.File_UpDownManager.download(_g,_h,_i);}}else{var _g=_d.FILE_SN;var _h=_d.FILE_ORDR;var _i=_d.ORGINL_FILE_NM;this.File_UpDownManager.download(_g,_h,_i);}};this.fn_dynamic_showApprline=function(){this.ds_apprline.clearData();this.ds_apprline.addRow();var _a=0;var _b=this.ds_OfcpsSe.findRow("CODE",application.gds_userInfo.getColumn(0,"OFCPS_SE"));this.ds_apprline.setColumn(_a,"APPRLINE_COL1",this.ds_OfcpsSe.getColumn(_b,"CODE_NM"));this.ds_apprline.setColumn(_a,"APPRLINE_COL2",application.gds_userInfo.getColumn(0,"USER_NM"));this.ds_apprline.setColumn(_a,"APPRLINE_COL3",this.dateUtils.format(this.gfn_today(),"mm/dd")+"(기안)");_a=_a+1;this.ds_innerSanctner.set_keystring("S:+SANCTN_SN");for(var _c=0;_c<this.ds_innerSanctner.rowcount;_c++ ){if("S2"!=this.ds_innerSanctner.getColumn(_c,"SANCTN_STEP")){continue;}this.ds_apprline.addRow();_b=this.ds_OfcpsSe.findRow("CODE",this.ds_innerSanctner.getColumn(_c,"OFCPS_SE"));this.ds_apprline.setColumn(_a,"APPRLINE_COL1",this.ds_OfcpsSe.getColumn(_b,"CODE_NM"));this.ds_apprline.setColumn(_a,"APPRLINE_COL2",this.ds_innerSanctner.getColumn(_c,"EMPNM"));this.ds_apprline.setColumn(_a,"APPRLINE_COL3","");_a=_a+1;}this.gfn_showApprLine(this.ds_apprline);};this.grd_fileList_oncelldblclick=function(_a,_b){var _c=this.ds_fileList.getColumn(this.ds_fileList.rowposition,"FILE_SN");var _d=this.ds_fileList.getColumn(this.ds_fileList.rowposition,"FILE_ORDR");var _e=this.ds_fileList.getColumn(this.ds_fileList.rowposition,"ORGINL_FILE_NM");this.File_UpDownManager.download(_c,_d,_e);};});this.on_initEvent=function(){this.addEventHandler("oninit",this.SYM090200_P11_oninit,this);this.addEventHandler("onload",this.SYM090200_P11_onload,this);this.btn_exit.addEventHandler("onclick",this.btn_exit_onclick,this);this.div_work.btn_save.addEventHandler("onclick",this.btn_sanctnline_onclick,this);this.div_work.btn_recomCancel.addEventHandler("onclick",this.btn_sanctn_onclick,this);this.grd_fileList.addEventHandler("onheadclick",this.grd_fileList_onheadclick,this);this.grd_fileList.addEventHandler("oncelldblclick",this.grd_fileList_oncelldblclick,this);this.btn_filedown.addEventHandler("onclick",this.btn_filedown_onclick,this);this.btn_fileUpload.addEventHandler("onclick",this.btn_fileUpload_onclick,this);this.btn_fileDelete.addEventHandler("onclick",this.btn_fileDelete_onclick,this);};this.loadIncludeScript("SYM090200_P11.xfdl");this.loadPreloadList();};})();