(function(){return function(){if(!this._is_form){return;}this.on_create=function(){var _a=null;if(Form==this.constructor){this.set_name("SYM090300_P01");this.set_classname("Pattern_03");this.set_titletext("내부결재 완료 첨부파일 다운로드");this._setFormPosition(0,0,999,618);}_a=new Dataset("ds_validation",this);_a.set_firefirstcount("0");_a.getSetter("firenextcount").set("0");_a.set_useclientlayout("false");_a.set_updatecontrol("true");_a.set_enableevent("true");_a.set_loadkeymode("keep");_a.set_loadfiltermode("keep");_a.set_reversesubsum("false");_a._setContents("<ColumnInfo><Column id=\"compId\" type=\"STRING\" size=\"256\"/><Column id=\"colId\" type=\"STRING\" size=\"256\"/><Column id=\"PK\" type=\"STRING\" size=\"256\"/><Column id=\"notNull\" type=\"STRING\" size=\"256\"/><Column id=\"type\" type=\"STRING\" size=\"256\"/><Column id=\"nlength\" type=\"STRING\" size=\"256\"/><Column id=\"from\" type=\"STRING\" size=\"256\"/><Column id=\"to\" type=\"STRING\" size=\"256\"/><Column id=\"lengthChkGb\" type=\"STRING\" size=\"256\"/><Column id=\"msgId\" type=\"STRING\" size=\"256\"/><Column id=\"expr\" type=\"STRING\" size=\"256\"/><Column id=\"func\" type=\"STRING\" size=\"256\"/></ColumnInfo><Rows><Row><Col id=\"compId\">ds_cond</Col><Col id=\"colId\">INNER_SANCTN_ID</Col><Col id=\"notNull\">Y</Col><Col id=\"to\"/><Col id=\"msgId\">결재ID</Col></Row></Rows>");this.addChild(_a.name,_a);_a=new Dataset("ds_fileList",this);_a.set_firefirstcount("0");_a.getSetter("firenextcount").set("0");_a.set_useclientlayout("true");_a.set_updatecontrol("true");_a.set_enableevent("true");_a.set_loadkeymode("keep");_a.set_loadfiltermode("keep");_a.set_reversesubsum("false");_a._setContents("<ColumnInfo><Column id=\"FILE_SN\" type=\"BIGDECIMAL\" size=\"20\"/><Column id=\"FILE_ORDR\" type=\"INT\" size=\"3\"/><Column id=\"ORGINL_FILE_NM\" type=\"STRING\" size=\"255\"/><Column id=\"FILE_EXTSN\" type=\"STRING\" size=\"20\"/><Column id=\"FILE_MG\" type=\"INT\" size=\"8\"/><Column id=\"SYS_SE_CODE\" type=\"STRING\" size=\"6\"/><Column id=\"JOB_SE\" type=\"STRING\" size=\"3\"/></ColumnInfo>");this.addChild(_a.name,_a);_a=new Dataset("ds_attachIni",this);_a.set_firefirstcount("0");_a.getSetter("firenextcount").set("0");_a.set_useclientlayout("true");_a.set_updatecontrol("true");_a.set_enableevent("true");_a.set_loadkeymode("keep");_a.set_loadfiltermode("keep");_a.set_reversesubsum("false");_a._setContents("<ColumnInfo><Column id=\"SANCTN_SJ\" type=\"STRING\" size=\"256\"/><Column id=\"ATCH_CN\" type=\"STRING\" size=\"1024\"/></ColumnInfo>");this.addChild(_a.name,_a);_a=new Dataset("ds_cond",this);_a.set_firefirstcount("0");_a.getSetter("firenextcount").set("0");_a.set_useclientlayout("true");_a.set_updatecontrol("true");_a.set_enableevent("true");_a.set_loadkeymode("keep");_a.set_loadfiltermode("keep");_a.set_reversesubsum("false");_a._setContents("<ColumnInfo><Column id=\"INNER_SANCTN_ID\" type=\"STRING\" size=\"256\"/></ColumnInfo>");this.addChild(_a.name,_a);_a=new Dataset("ds_rslt",this);_a.set_firefirstcount("0");_a.getSetter("firenextcount").set("0");_a.set_useclientlayout("true");_a.set_updatecontrol("true");_a.set_enableevent("true");_a.set_loadkeymode("keep");_a.set_loadfiltermode("keep");_a.set_reversesubsum("false");_a._setContents("<ColumnInfo><Column id=\"INNER_SANCTN_ID\" type=\"STRING\" size=\"256\"/><Column id=\"PRGS_AT\" type=\"STRING\" size=\"256\"/></ColumnInfo>");this.addChild(_a.name,_a);_a=new Dataset("ds_guide",this);_a.set_firefirstcount("0");_a.getSetter("firenextcount").set("0");_a.set_useclientlayout("true");_a.set_updatecontrol("true");_a.set_enableevent("true");_a.set_loadkeymode("keep");_a.set_loadfiltermode("keep");_a.set_reversesubsum("false");_a._setContents("<ColumnInfo><Column id=\"CN\" type=\"STRING\" size=\"3000\"/></ColumnInfo>");this.addChild(_a.name,_a);_a=new Static("Static00","absolute","0","0",null,null,"0","0",this);_a.set_taborder("57");_a.set_cssclass("sta_WF_PopupBg");this.addChild(_a.name,_a);_a=new Static("Static05","absolute","2","2","10",null,null,"0",this);_a.set_taborder("59");_a.set_text("15");_a.set_visible("false");_a.style.set_background("#1b3cd23c");_a.style.set_align("center middle");this.addChild(_a.name,_a);_a=new Static("Static03","absolute","984","2","15",null,null,"0",this);_a.set_taborder("61");_a.set_text("15");_a.set_visible("false");_a.style.set_background("#1b3cd23c");_a.style.set_align("center middle");this.addChild(_a.name,_a);_a=new Static("Static06","absolute","2","34","99.7%","15",null,null,this);_a.set_taborder("62");_a.set_text("15");_a.set_visible("false");_a.style.set_background("#dc143c3c");_a.style.set_align("center middle");this.addChild(_a.name,_a);_a=new Static("Static04","absolute","2",null,null,"15","0","0",this);_a.set_taborder("63");_a.set_text("15");_a.set_visible("false");_a.style.set_background("#dc143c3c");_a.style.set_align("center middle");this.addChild(_a.name,_a);_a=new Static("Static38","absolute","12","51","22.02%","21",null,null,this);_a.set_taborder("80");_a.set_text("내부결재 완료 첨부 다운로드");_a.set_cssclass("sta_WF_Title01");this.addChild(_a.name,_a);_a=new Button("btn_close","absolute","944","580","40","23",null,null,this);_a.set_taborder("85");_a.set_text("닫기");this.addChild(_a.name,_a);_a=new Static("Static08","absolute","3","74",null,"5","3",null,this);_a.set_taborder("86");_a.set_text("10");_a.set_visible("false");_a.style.set_background("#dc143c3c");_a.style.set_align("center middle");this.addChild(_a.name,_a);_a=new Div("div_work","absolute","0.3%","80",null,"482","1.4%",null,this);_a.set_taborder("98");this.addChild(_a.name,_a);_a=new Static("Static01","absolute","0.92%","26",null,"5","3",null,this.div_work);_a.set_taborder("33");_a.set_text("5");_a.set_visible("false");_a.style.set_background("#dc143c3c");_a.style.set_align("center middle");this.div_work.addChild(_a.name,_a);_a=new Static("Static00","absolute","8.55%","-1",null,"27","48.98%",null,this.div_work);_a.set_taborder("34");_a.set_cssclass("sta_WF_Labelbg");this.div_work.addChild(_a.name,_a);_a=new Edit("edt_sj","absolute","8.86%","2",null,"21","49.59%",null,this.div_work);_a.set_taborder("35");_a.set_cssclass("edt_WF_Essential");this.div_work.addChild(_a.name,_a);_a=new Static("Static33","absolute","0.92%","-1",null,"27","91.34%",null,this.div_work);_a.set_taborder("36");_a.set_text("결재제목");_a.set_cssclass("sta_WF_Label");this.div_work.addChild(_a.name,_a);_a=new Static("Static46","absolute","51.02%","31",null,"222","47.96%",null,this.div_work);_a.set_taborder("37");_a.set_text("10");_a.set_visible("false");_a.style.set_background("#1b3cd23c");_a.style.set_align("center middle");this.div_work.addChild(_a.name,_a);_a=new Static("Static10","absolute","52.04%","29",null,"21","29.63%",null,this.div_work);_a.set_taborder("40");_a.set_text("Attach.ini");_a.set_cssclass("sta_WF_Title02");this.div_work.addChild(_a.name,_a);_a=new Static("Static02","absolute","1.32%","29",null,"21","89.82%",null,this.div_work);_a.set_taborder("41");_a.set_text("첨부파일");_a.set_cssclass("sta_WF_Title02");this.div_work.addChild(_a.name,_a);_a=new Static("Static03","absolute","0.92%","45",null,"5","3",null,this.div_work);_a.set_taborder("42");_a.set_text("5");_a.set_visible("false");_a.style.set_background("#dc143c3c");_a.style.set_align("center middle");this.div_work.addChild(_a.name,_a);_a=new TextArea("txt_opinion","absolute","52.04%","50",null,"198","0",null,this.div_work);_a.set_taborder("43");_a.set_readonly("true");_a.set_enable("true");this.div_work.addChild(_a.name,_a);_a=new Grid("grd_fileList","absolute","9","50",null,"198","48.98%",null,this.div_work);_a.set_taborder("44");_a.set_binddataset("ds_fileList");_a._setContents("<Formats><Format id=\"default\"><Columns><Column size=\"378\"/><Column size=\"85\"/></Columns><Rows><Row size=\"24\" band=\"head\"/><Row size=\"24\"/></Rows><Band id=\"head\"><Cell text=\"파일명\"/><Cell col=\"1\" text=\"용량\"/></Band><Band id=\"body\"><Cell text=\"bind:ORGINL_FILE_NM\"/><Cell col=\"1\" text=\"bind:FILE_MG\"/></Band></Format></Formats>");this.div_work.addChild(_a.name,_a);_a=new Static("Static04","absolute","0.92%","248",null,"5","3",null,this.div_work);_a.set_taborder("45");_a.set_text("5");_a.set_visible("false");_a.style.set_background("#dc143c3c");_a.style.set_align("center middle");this.div_work.addChild(_a.name,_a);_a=new Static("sta_comment","absolute","9","253","972","228",null,null,this.div_work);_a.set_taborder("47");_a.set_cssclass("sta_WF_Data");this.div_work.addChild(_a.name,_a);_a=new Button("btn_fileDownload","absolute",null,"49","58","25","15",null,this);_a.set_taborder("111");_a.set_text("다운로드");_a.set_cssclass("btn_WF_Process");this.addChild(_a.name,_a);_a=new Static("Static09","absolute","0.3%",null,null,"10","0.8%","38",this);_a.set_taborder("112");_a.set_text("10");_a.set_visible("false");_a.style.set_background("#dc143c3c");_a.style.set_align("center middle");this.addChild(_a.name,_a);_a=new Static("Static02","absolute","2","2",null,"34","0",null,this);_a.set_taborder("114");_a.set_text("연계서비스 현황");_a.set_cssclass("sta_WF_PopupTitle");this.addChild(_a.name,_a);_a=new Button("btn_destroy","absolute",null,"8","20","20","13",null,this);_a.set_taborder("115");_a.set_cssclass("btn_WF_PopupClose");this.addChild(_a.name,_a);_a=new Layout("default","",982,606,this.div_work,function(_b){_b.set_taborder("98");});this.div_work.addLayout(_a.name,_a);_a=new Layout("default","",999,618,this,function(_b){_b.set_classname("Pattern_03");_b.set_titletext("내부결재 완료 첨부파일 다운로드");});this.addLayout(_a.name,_a);_a=new BindItem("item0","div_work.edt_sj","value","ds_attachIni","SANCTN_SJ");this.addChild(_a.name,_a);_a.bind();_a=new BindItem("item1","div_work.txt_opinion","value","ds_attachIni","ATCH_CN");this.addChild(_a.name,_a);_a.bind();_a=new BindItem("item3","div_work.sta_comment","text","ds_guide","CN");this.addChild(_a.name,_a);_a.bind();_a=null;};this.addIncludeScript("SYM090300_P01.xfdl","lib::comInclude.xjs");this.addIncludeScript("SYM090300_P01.xfdl","lib::comFile.xjs");this.addIncludeScript("SYM090300_P01.xfdl","lib::comUpDownUtils.xjs");this.registerScript("SYM090300_P01.xfdl",function(){this.fileSn;this.sysSe="SYS";this.jobSe="ISM";this.fv_objForm;this.fv_param="";this.File_UpDownManager=null;this.File_UpDownManager2=null;this.File_UpDownManager3=null;this.downloadUrl2="hsco/cmm/download/downloadElectricSanctnAttachIni.do";this.SYM090300_P01_oninit=function(_a,_b){this.fn_init_form();this.fn_init_dataset();};this.SYM090300_P01_onload=function(_a,_b){this.fn_setGuide();var _c={onSuccess:this.fn_onFileSuccess};this.File_UpDownManager=new this.fileUpDownManager(this,"SYS","ISM");this.File_UpDownManager.init(_c);var _d={downloadUrl:this.downloadUrl2,onSuccess:this.fn_onFileSuccess};this.File_UpDownManager2=new this.fileUpDownManager(this,"SYS","ISM");this.File_UpDownManager2.setDownloadUrl(this.downloadUrl2);this.File_UpDownManager2.init(_d);this.fv_objForm=this.parent.arg_0;var _e=this.parent.arg_1;this.ds_cond.clearData();if(this.ds_cond.getRowCount()==0){this.ds_cond.addRow();}if(_e==""||_e==null||_e==undefined){this.gfn_message("info.내부결재.ID없음");}else{this.ds_cond.setColumn(0,"INNER_SANCTN_ID",_e);this.fn_search();}};this.fn_setGuide=function(){var _a="1. 화면 설명 :\r\n  i.  내부결재 완료 문서를 전자결재 기안 시, 첨부하기 위해 필수 파일을 다운로드 합니다.\r\n";_a+="2. 파일저장경로 : C:\\HandySoft\\HANDYGroupware8\\bin\r\n";_a+="3. 첨부파일명\r\n  i. 첨부파일은 목록에 표시된 파일명과 동일한 이름으로 반드시 C:\\HandySoft\\HANDYGroupware8\\bin 디렉토리에 저장되어야 합니다.\r\n";_a+="* 동일한 파일명이 존재할 경우, 기존 파일을 다른 위치로 이동하거나 삭제 후 다운로드하시기 바랍니다. 동일한 파일명이 존재할 경우, 덮어쓰기를 해야 합니다.\r\n";_a+="4.다운로드 파일 대상\r\n   다운로드 대상 파일은 첨부된 파일들과 전자결재 첨부에 필요한 Attach.ini 파일입니다.";this.ds_guide.clearData();this.ds_guide.addRow();this.ds_guide.setColumn(0,"CN",_a);};this.fn_init_form=function(){this.gfn_initForm(this);};this.fn_init_dataset=function(){if(this.ds_cond.rowcount==0){this.ds_cond.addRow();}};this.fn_search=function(){if(!this.gfn_checkValidation(this.ds_cond,this.ds_validation)){return;}this.fn_transaction("CompletedSanctnFileList");};this.fn_onFileSuccess=function(_a,_b){if(_a==this.File_UpDownManager.TYPE_DOWNLOADER){this.gfn_message("success.파일.다운로드.성공");}};this.btn_fileDownload_onclick=function(_a,_b){this.File_UpDownManager2.dataFileDownload(this.downloadUrl2,"input1=ds_cond","attach.ini");if(this.ds_fileList.getRowCount()>0){for(var _f=0;_f<this.ds_fileList.getRowCount();_f++ ){var _c=this.ds_fileList.getColumn(_f,"FILE_SN");var _d=this.ds_fileList.getColumn(_f,"FILE_ORDR");var _e=this.ds_fileList.getColumn(_f,"ORGINL_FILE_NM");this.File_UpDownManager.download(_c,_d,_e);}}else{this.gfn_message("err.파일.다운로드.정보없음");}};this.fn_transaction=function(_a){var _b="";var _c="fn_callBack";var _d=true;var _e=true;switch(_a){case "CompletedSanctnFileList":var _f="hsco/com/sym/ism/SYM090300/SYM090300List.do";var _g="input1=ds_cond";var _h="ds_fileList=output1 ds_attachIni=output2";break;}Ex.core.tran(this,_a,_f,_g,_h);};this.fn_callBack=function(_a,_b,_c){this.gfn_callback_message(_a,_b,_c);if(_b!=0){}else{}};this.btn_exit_onclick=function(_a,_b){this.fn_closePopup();};this.btn_close_onclick=function(_a,_b){this.fn_closePopup();};this.btn_destroy_onclick=function(_a,_b){this.fn_closePopup();};this.fn_closePopup=function(){this.ds_rslt.clearData();this.ds_rslt.addRow();this.ds_rslt.copyData(this.ds_cond);if(this.gfn_message("comm.행위여부","전자결재 기안작업을 계속")){this.ds_rslt.setColumn(0,"PRGS_AT","1");}else{this.ds_rslt.setColumn(0,"PRGS_AT","0");}this.close(this.ds_rslt.saveXML());};});this.on_initEvent=function(){this.addEventHandler("oninit",this.SYM090300_P01_oninit,this);this.addEventHandler("onload",this.SYM090300_P01_onload,this);this.btn_close.addEventHandler("onclick",this.btn_close_onclick,this);this.btn_fileDownload.addEventHandler("onclick",this.btn_fileDownload_onclick,this);this.btn_destroy.addEventHandler("onclick",this.btn_destroy_onclick,this);};this.loadIncludeScript("SYM090300_P01.xfdl");};})();