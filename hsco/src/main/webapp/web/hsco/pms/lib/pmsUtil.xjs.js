(function(){return function(_a){var _b;this.registerScript(_a,function(){this.pmsUtil={WORK_FORM:this,USE_DUMP:true,PROMPT_SELECT:"SELECT",PROMPT_ALL:"ALL",PROMPT_SELECT_TEXT:"선택",PROMPT_ALL_TEXT:"전체",NULL_TEXT_NO_LIST:"-",TOMAP_LIST_NAME:"RESULT_LIST",PARAM_DS_NAME:"ds_condTemp",DATE_FORMAT_TOKEN:"-",CHECK_CHANGE_MESSAGE:"confirm.변경.취소.여부",clearDataSet:function(_c){var _d=this.isArray(_c);if(_d){var _e=_c.length;for(var _h=0;_h<_e;_h++ ){var _f=_c[_h];this._clearDataSet(_f);}}else{var _g=_c.toString();if(_g=="[object Dataset]"){this._clearDataSet(_c);}}},_clearDataSet:function(_c){_c.reset();_c.clearData();if(_c.name.substr(0,7).toLowerCase()=="ds_cond"){if(_c.rowcount==0){_c.addRow();}}},isDsUpdated:function(_c,_d){var _e=this.WORK_FORM.comUtils.isNullEmpty(_d)?false:_d;if(_e&&_c.getDeletedRowCount()>0){return true;}if(_c.findRowExpr("dataset.getRowType(rowidx)==4||dataset.getRowType(rowidx)==2")> -1){return true;}return false;},getPromptText:function(_c){var _d="";switch(_c){case "PROMPT_SELECT":_d=this.PROMPT_SELECT_TEXT;break;case "PROMPT_ALL":_d=this.PROMPT_ALL_TEXT;break;}return _d;},setComboPrompt:function(_c,_d,_e){var _f=_c.toString();var _g=null;var _h=false;if(_f=="[object Dataset]"){_g=_c;if(!_d.codecolumn||!_d.datacolumn){alert("Dataset을 대상으로 할 경우에는 컬럼정보를 지정하여야 합니다.");return;}_h=true;}else{_g=_c.getInnerDataset();_h=false;}var _i=_d&&_d.type?_d.type.toUpperCase():this.PROMPT_SELECT;var _j=_d&&_d.codecolumn?_d.codecolumn:(_c.codecolumn?_c.codecolumn:"CODE");var _k=_d&&_d.datacolumn?_d.datacolumn:(_c.datacolumn?_c.datacolumn:"CODE_NM");var _l=_d&&_d.promptText?_d.promptText:null;var _m=_d&&_d.promptValue?_d.promptValue:"";var _n=_d&&_d.defaultIndex?_d.defaultIndex:(_p? -1:0);var _o=_d&&_d.noNullText?_d.noNullText:null;var _p=_e?_e:false;var _q="";if(_l==null){switch(_i){case this.PROMPT_ALL:_q=this.PROMPT_ALL_TEXT;break;case this.PROMPT_SELECT:default:_q=this.PROMPT_SELECT_TEXT;break;}}else{_q=_l;}if(!_h&&_p){if(_o==null){_c.set_displaynulltext(_q);}else{this.setComboNullText(_c,_q,_o);}}var _r=_g.getRowCount();if(_r>0){var _s={};_s[_k]=_q;_s[_j]=(_k==_j?_q:_m);this.addMapToDataset(_g,_s,0);}else{_n= -1;}if(_h){_g.set_rowposition(_n);}else{_c.set_index(_n);}},setComboNullText:function(_c,_d,_e){var _f=_c.getInnerDataset();var _g=_f.getRowCount();if(_g>0){var _h=_d==this.PROMPT_SELECT?this.PROMPT_SELECT_TEXT:(_d==this.PROMPT_ALL?this.PROMPT_ALL_TEXT:_d);_c.set_displaynulltext(_h);}else{var _i=_e?_e:this.NULL_TEXT_NO_LIST;_c.set_displaynulltext(_i);}},addComboHeader:function(_c,_d,_e,_f,_g){var _h=_d.getInnerDataset();if(_f==null){_f=_d.codecolumn?_d.codecolumn:"CODE";}if(_g==null){_g=_d.datacolumn?_d.datacolumn:"DATA";}var _i={};_i[_g]=_e;_i[_f]="";this.addMapToDataset(comboDs,_i,0);_d.set_index(0);},getComboSelectedItem:function(_c,_d){var _e=null;var _f=_c.getInnerDataset();var _g=_c.index;_e=this._getDatasetSelectedItem(_f,_g,_d);return _e;},getGridItem:function(_c,_d,_e){var _f=null;var _g=this.WORK_FORM[_c.binddataset];_f=this._getDatasetSelectedItem(_g,_d,_e);return _f;},getGridItems:function(_c,_d,_e){var _f=null;var _g=this.WORK_FORM[_c.binddataset];_f=this._getDatasetSelectedItem(_g,_d,_e);return _f;},getGridSelectedItem:function(_c,_d){var _e=null;var _f=this.WORK_FORM[_c.binddataset];var _g=_f.rowposition;_e=this._getDatasetSelectedItem(_f,_g,_d);return _e;},getGridSelectedRowType:function(_c,_d){var _e=null;var _f=this.WORK_FORM[_c.binddataset];var _g=this.WORK_FORM.comUtils.isNullEmpty(_d)?_f.rowposition:_d;if(_g> -1){_e=_f.getRowType(_g);}return _e;},setGridSelectedItemValue:function(_c,_d,_e){var _f=null;var _g=this.WORK_FORM[_c.binddataset];var _h=_g.rowposition;var _f=_g.setColumn(_h,_d,_e);return _f;},getGridSelectedItems:function(_c,_d){var _e=null;var _f=this.WORK_FORM[_c.binddataset];var _g=_c.getSelectedDatasetRows();_e=this._getDatasetSelectedItem(_f,_g,_d);return _e;},deleteGridSelectedItem:function(_c){var _d=null;var _e=this.WORK_FORM[_c.binddataset];var _f=_c.getSelectedDatasetRows();_d=_e.deleteRow(_f);return _d;},getGridUpdatedItems:function(_c,_d){var _e=null;var _d=this.WORK_FORM.comUtils.isNullEmpty(_d)?false:_d;var _f=this.WORK_FORM[_c.binddataset];var _g=this.WORK_FORM.comUtils.isDatasetUpdated(_f);if(_g){var _h=[];var _i=_f.getRowCount();for(var _n=0;_n<_i;_n++ ){var _j=_f.getRowType(_n);if(_j==Dataset.ROWTYPE_INSERT||_j==Dataset.ROWTYPE_UPDATE){_h.push(_n);}if(_d&&_j==Dataset.ROWTYPE_DELETE){_h.push(_n);}}var _k={viewRow:_h};var _l=this.datasetToObject(_f,_k,true);if(_l==null){_e=_l;}else{var _m=this.isArray(_l);_e=_m?_l:[_l];}}return _e;},getGridInsertItems:function(_c){var _d=null;var _e=this.WORK_FORM[_c.binddataset];var _f=this.WORK_FORM.comUtils.isDatasetUpdated(_e);if(_f){var _g=[];var _h=_e.getRowCount();for(var _m=0;_m<_h;_m++ ){var _i=_e.getRowType(_m);if(_i==Dataset.ROWTYPE_INSERT){_g.push(_m);}}var _j={viewRow:_g};var _k=this.datasetToObject(_e,_j,true);if(_k==null){_d=_k;}else{var _l=this.isArray(_k);_d=_l?_k:[_k];}}return _d;},getGridModifyItems:function(_c){var _d=null;var _e=this.WORK_FORM[_c.binddataset];var _f=this.WORK_FORM.comUtils.isDatasetUpdated(_e);if(_f){var _g=[];var _h=_e.getRowCount();for(var _m=0;_m<_h;_m++ ){var _i=_e.getRowType(_m);if(_i==Dataset.ROWTYPE_UPDATE){_g.push(_m);}}var _j={viewRow:_g};var _k=this.datasetToObject(_e,_j,true);if(_k==null){_d=_k;}else{var _l=this.isArray(_k);_d=_l?_k:[_k];}}return _d;},getGridDeleteItems:function(_c){var _d=null;var _e=this.WORK_FORM[_c.binddataset];var _f=this.WORK_FORM.comUtils.isDatasetUpdated(_e);if(_f){var _g=[];var _h=_e.getRowCount();for(var _k=0;_k<_h;_k++ ){var _i=_e.getRowType(_k);if(_i==Dataset.ROWTYPE_DELETE){_g.push(_k);}}var _j={viewRow:_g};_d=this.datasetToObject(_e,_j,true);}return _d;},getDatasetItem:function(_c,_d,_e){return this._getDatasetSelectedItem(_c,_d,_e);},_getDatasetSelectedItem:function(_c,_d,_e){var _f=null;var _g=this.WORK_FORM.comUtils.isNullEmpty(_d);var _h=this.WORK_FORM.comUtils.isNullEmpty(_e);var _i=_g?_c.rowposition:_d;var _j=this.isArray(_i);var _k=_h?true:this.isArray(_e);if(_j||_k){var _l={};if(_h){_l["viewRow"]=_j?_d:[_i];}else{_l["viewRow"]=_j?_d:[_i];_l["viewCol"]=_e;}_f=this.datasetToObject(_c,_l,true);}else{_f=_c.getColumn(_d,_e);}return _f;},addListToDataset:function(_c,_d,_e){var _f=typeof (_c)=="string"?true:false;var _g=_f?this.WORK_FORM[_c]:_c;var _h=this.isArray(_d);if(!_h){alert("Array형의 데이터만 허용됩니다.");return;}var _i;var _j=this.WORK_FORM.comUtils.isNullEmpty(_e);_i=_j?_g.getRowCount():addIndex;var _k=_d.length;for(var _m=0;_m<_k;_m++ ){var _l=_d[_m];this.addMapToDataset(_g,_l,_i);_i++ ;}},putListToDataset:function(_c,_d,_e){var _f=typeof (_c)=="string"?true:false;var _g=_f?this.WORK_FORM[_c]:_c;var _h=this.isArray(_d);if(!_h){alert("Array형의 데이터만 허용됩니다.");return;}var _i;var _j=_g.getRowCount()-1;var _k=this.WORK_FORM.comUtils.isNullEmpty(_e);_i=_k?0:addIndex;var _l=_d.length;for(var _n=0;_n<_l;_n++ ){var _m=_d[_n];if(_i>_j){this.addMapToDataset(_g,_m,_i);}else{this.putMapToDataset(_g,_m,_i);}_i++ ;}},addMapToDataset:function(_c,_d,_e){var _f=typeof (_c)=="string"?true:false;var _g=_f?this.WORK_FORM[_c]:_c;var _h=this.WORK_FORM.comUtils.isNullEmpty(_e);var _i=_h?_g.getRowCount():_e;var _j=_g.insertRow(_i);for(var _l in _d){var _k=_d[_l];_g.setColumn(_j,_l,_k);}},putMapToDataset:function(_c,_d,_e){var _f=typeof (_c)=="string"?true:false;var _g=_f?this.WORK_FORM[_c]:_c;var _h=this.WORK_FORM.comUtils.isNullEmpty(_e);var _i=_h?0:_e;var _j=_g.getRowCount()>0?true:false;if(!_j){_i=_g.insertRow();}for(var _l in _d){var _k=_d[_l];_g.setColumn(_i,_l,_k);}},setFocusGridBindComp:function(_c,_d,_e){var _f=this.WORK_FORM[_c.binddataset];var _g=_c.getBindCellIndex("body",_e);_f.set_rowposition(_d);var _h=this.WORK_FORM.gfn_getBindComponent(_f,_e);if(typeof _h!="boolean"){_h.setFocus();_f.filter("");return false;}if(_g== -1){_f.filter("");return false;}_f.set_rowposition(_d);_c.setFocus();_c.setCellPos(_g);_f.filter("");},getDatasetStatus:function(_c){var _d=typeof (_c)=="string"?true:false;var _e=_d?this.WORK_FORM[_c]:_c;var _f="";var _g=0;var _h=0;var _i=0;_i=_e.getDeletedRowCount();var _j=_e.getRowCount();for(var _l=0;_l<_j;_l++ ){var _k=_e.getRowType(_l);switch(_k){case Dataset.ROWTYPE_INSERT:_g++ ;break;case Dataset.ROWTYPE_UPDATE:_h++ ;break;default:break;}}_f+="총  : "+_j+"건 중\n";_f+=_g>0?"추가 : "+_g+"건":"";_f+=_g>0?"\n":"";_f+=_h>0?"수정 : "+_h+"건":"";_f+=_h>0?"\n":"";_f+=_i>0?"삭제 : "+_i+"건":"";return _f;},isArray:function(_c){var _d="[object Array]";var _e=Object.prototype.toString.call(_c);return _e===_d;},commitGridView:function(_c){_c.set_visible(false);_c.set_visible(true);},SLS_TRAN_COMMON_CODE:"hsco/pms/com/COM000000/selectComCodeList.do",SLS_TRAN_HOUSE_CODE:"hsco/pms/sls/com/SLS000000/selectHouseCodeList.do",SLS_TRAN_HOUSE_DONG:"hsco/pms/sls/com/SLS000000/selectHouseDongList.do",SLS_TRAN_HOUSE_HO:"hsco/pms/sls/com/SLS000000/selectHouseHoList.do",SLS_TRAN_HOUSE_DONGHO:"hsco/pms/sls/com/SLS000000/selectHouseDongHoList.do",SLS_TRAN_HOUSE_AEA:"hsco/pms/sls/com/SLS000000/selectHouseAeaList.do",SLS_TRAN_HOUSE_TYAEA:"hsco/pms/sls/com/SLS000000/selectHouseTyAeaList.do",SLS_TRAN_HCNTRCTR:"hsco/pms/sls/com/SLS000000/selectHcntrctrList.do",SLS_TRAN_LAD_CODE:"hsco/pms/sls/com/SLS000000/selectLadCodeList.do",SLS_TRAN_LAD_DETAIL:"hsco/pms/sls/com/SLS000000/selectLadDetailList.do",SLS_TRAN_LCNTRCTR:"hsco/pms/sls/com/SLS000000/selectLcntrctrList.do",SLS_TRAN_BSNS_CODE:"hsco/pms/sls/com/SLS000000/selectBsnsCodeList.do",getCommonCode:function(_c,_d,_e){var _f=this.SLS_TRAN_COMMON_CODE;var _g=this._setDynamicInDataset(_d,true);var _h="";var _i=this.PARAM_DS_NAME+"00";if(_g){_h="input1="+_i;}var _j=this._getCommonCodeOutputName(_d);this.pmsComTran(_c,_f,_h,_j,null,_e,false);},_getCommonCodeOutputName:function(_c){var _d=_c.length;var _e="";for(var _i=0;_i<_d;_i++ ){var _f=_c[_i];var _g=_f["OUT_PUT"];var _h=_f["GRP_CODE"];_e+=(_g+"="+_h+"Code");if(_i!=_d-1){_e+=" ";}}return _e;},getHouseCode:function(_c,_d,_e){var _f=_d.split("_");var _g=_f[1];var _h=this.SLS_TRAN_HOUSE_CODE;var _i=_d+"=houseCode";this.pmsComTran(_g,_h,_c,_i,null,_e,false);},getHouseDong:function(_c,_d,_e){var _f=_d.split("_");var _g=_f[1];var _h=this.SLS_TRAN_HOUSE_DONG;var _i=_d+"=dongCode";this.pmsComTran(_g,_h,_c,_i,null,_e,false);},getHouseHo:function(_c,_d,_e){var _f=_d.split("_");var _g=_f[1];var _h=this.SLS_TRAN_HOUSE_HO;var _i=_d+"=hoCode";this.pmsComTran(_g,_h,_c,_i,null,_e,false);},getHouseDongHo:function(_c,_d,_e){var _f=_d.split("_");var _g=_f[1];var _h=this.SLS_TRAN_HOUSE_DONGHO;var _i=_d+"=dongHoCode";this.pmsComTran(_g,_h,_c,_i,null,_e,false);},getHouseAea:function(_c,_d,_e){var _f=_d.split("_");var _g=_f[1];var _h=this.SLS_TRAN_HOUSE_AEA;var _i=_d+"=aeaCode";this.pmsComTran(_g,_h,_c,_i,null,_e,false);},getHouseTyAea:function(_c,_d,_e){var _f=_d.split("_");var _g=_f[1];var _h=this.SLS_TRAN_HOUSE_TYAEA;var _i=_d+"=tyAeaCode";this.pmsComTran(_g,_h,_c,_i,null,_e,false);},getHouseDongHoAea:function(_c,_d,_e,_f){this.getHouseDongHo(_c,_d,_f);this.getHouseAea(_c,_e,_f);},getHcntrctrList:function(_c,_d,_e){var _f=_d.split("_");var _g=_f[1];var _h=this.SLS_TRAN_HCNTRCTR;var _i=_d+"=hcntrctrList";this.pmsComTran(_g,_h,_c,_i,null,_e,true);},getLadCodeList:function(_c,_d,_e){var _f=_d.split("_");var _g=_f[1];var _h=this.SLS_TRAN_LAD_CODE;var _i=_d+"=ladCode";this.pmsComTran(_g,_h,_c,_i,null,_e,true);},getLadDetailList:function(_c,_d,_e){var _f=_d.split("_");var _g=_f[1];var _h=this.SLS_TRAN_LAD_DETAIL;var _i=_d+"=ladDetail";this.pmsComTran(_g,_h,_c,_i,null,_e,true);},getLcntrctrList:function(_c,_d,_e){var _f=_d.split("_");var _g=_f[1];var _h=this.SLS_TRAN_LCNTRCTR;var _i=_d+"=lcntrctrList";this.pmsComTran(_g,_h,_c,_i,null,_e,true);},getBsnsCodeList:function(_c,_d,_e){var _f=_d.split("_");var _g=_f[1];var _h=this.SLS_TRAN_BSNS_CODE;var _i=_d+"=bsnsCode";this.pmsComTran(_g,_h,_c,_i,null,_e,true);},pmsComTran:function(_c,_d,_e,_f,_g,_h,_i){var _j=this.WORK_FORM.comUtils.isNullEmpty(_c);var _k=this.WORK_FORM.comUtils.isNullEmpty(_d);var _l=this.WORK_FORM.comUtils.isNullEmpty(_f);if(_j||_k){var _m=_j?"Service ID":(_k?"Transaction 요청 경로":"요청");_m+=" 정보가 없습니다.";alert(_m);return false;}var _n=typeof (_e);var _o=null;var _p="";if(_n=="object"){_p=this._setDynamicInDataset(_e);}else{if(_e.indexOf("=")== -1){var _q=_e.split(" ");var _r=_q.length;if(_r>1){for(var _s=0;_s<_r;_s++ ){_p+="input"+(_s+1)+"="+_q[_s];if(_s!=(_s-1)){_p+=" ";}}}else{_p="input1="+_e;}}else{_p=_e;}}Ex.core.tran(this.WORK_FORM,_c,_d,_p,_f,_g,_h,_i);},_setDynamicInDataset:function(_c,_d){var _e=this.isArray(_c);var _f=this.WORK_FORM.comUtils.isNullEmpty(_d)?false:_d;var _g=null;var _h=null;var _i=null;if(_e&&!_f){var _j=_c.length;for(var _l=0;_l<_j;_l++ ){var _k=_c[_l];_g=this.PARAM_DS_NAME+(_l<9?"0"+_l:_l);_i=this._createMapToDataset(_k,_g);if(_i){if(_h==null){_h="input";}else{_h+=" input";}_h+=(_l+1)+"="+_g;}}}else{_g=this.PARAM_DS_NAME+"00";_i=this._createMapToDataset(_c,_g);if(_i){_h="input1="+_g;}}return _h;},_createMapToDataset:function(_c,_d){try{var _e=this.WORK_FORM.objects[_d];var _f=this.WORK_FORM.comUtils.isNull(_e);if(_f){_e=new Dataset;_e.set_name(_d);}else{_e.clear();}var _g=this.isArray(_c);if(_g){var _h=_c.length;var _i=_h>0?_c[0]:null;if(_i==null){return false;}else{for(var _k in _i){_e.addColumn(_k,"string");}}for(var _l=0;_l<_h;_l++ ){_e.addRow();var _j=_c[_l];for(var _k in _j){_e.setColumn(_l,_k,_j[_k]);}}}else{for(var _k in _c){_e.addColumn(_k,"string");}_e.addRow();for(var _k in _c){_e.setColumn(0,_k,_c[_k]);}}if(_f){this.WORK_FORM.addChild(_d,_e);}return true;}catch(ex){return false;}},addCharToStr:function(_c,_d){var _e=this.WORK_FORM.comUtils.isNullEmpty(_d)?" ":_d;var _f="";var _g=_c.length;for(var _i=0;_i<_g;_i++ ){var _h=_c[_i];if(typeof (_h)=="string"){_f+=_i<(_g-1)?_h+_e:_h;}}return _f;},popupReportView:function(_c,_d){var _e=_d&&_d.path?_d.path:null;var _f=_d&&_d.title?_d.title:null;var _g=_d&&_d.filename?_d.filename:null;var _h=_d&&_d.dataset?_d.dataset:null;var _i=_d&&_d.callback?_d.callback:"report_callback";var _j=_d&&_d.ismultireport?_d.ismultireport:false;var _k=_d&&_d.multicount?_d.multicount:null;var _l=_d&&_d.arguments?_d.arguments:null;if(_e==null){alert("출력 Report의 경로가 지정되지 않았습니다.");return;}var _m=application.gds_userInfo.getColumn(0,"USER_NM");if(_g==null){_g=_f;}var _n=_c.cf_Opts;var _o=new _n();_o.setToolbar(false);_o.setScale(100);_o.setReportPath(_e);_o.setSaveFilename(_g);_o.setIsMultiReport(_j);_o.setMultiCount(_k);_o.setArgs("title",_f);_o.setArgs("user",_m);if(_l!=null){for(var _t in _l){_o.setArgs(_t,_l[_t]);}}var _p=_h==null?0:_h.length;if(_p>0){var _q=this.isArray(_h[0]);if(_q){for(var _u=0;_u<_p;_u++ ){var _r=_h[_u];_o.setLocalDs(_r);}}else{_o.setLocalDs(_h);}}var _s={arg_0:_c,opts:_o};_c.gfn_popup("Popup_Report",884,735,_f,_s,"common::frmReportPopup.xfdl",_i);},popupZipCode:function(_c,_d,_e){var _f=this.WORK_FORM.comUtils.isNullEmpty(_e)?false:_e;var _g=_d&&_d.zipField?_d.zipField:null;var _h=_d&&_d.roadBaseField?_d.roadBaseField:null;var _i=_d&&_d.roadDetField?_d.roadDetField:null;var _j=_d&&_d.jibunField?_d.jibunField:null;var _k=_d&&_d.jibunBaseField?_d.jibunBaseField:null;var _l=_d&&_d.jibunDetField?_d.jibunDetField:null;var _m=_d&&_d.schWord?_d.schWord:null;var _n=_d&&_d.callback?_d.callback:null;var _o=this.WORK_FORM.comUtils.isNullEmpty(_c);if(_o&&_n==null){this.WORK_FORM.alert("대상 DataSet 또는 CallBack Function을 지정하지 않았습니다.");return;}if(_f&&_n==null){this.WORK_FORM.alert("결과 데이터를 반환할 CallBack Function을 지정하지 않았습니다.");return;}if(!_f&&_g==null){this.WORK_FORM.alert("대상 Field를 지정하지 않았습니다.");return;}var _p={};var _q=function(_r,_s){if(Eco.isEmpty(_s)){return;}var _t=new Dataset();nRowCnt=_t.loadXML(_s);if(nRowCnt<1){return;}var _u={};var _v="";var _w=null;if(_f){_w=_g==null?"ZIP":_g;_u[_w]=_t.getColumn(0,"ZIPNO");}else{if(_g!=null){_v+=_g+"=ZIPNO,";_u[_g]=_t.getColumn(0,"ZIPNO");}}if(_f){_w=_h==null?"ROAD_BASE":_h;_u[_w]=_t.getColumn(0,"ROADADDRPART1");}else{if(_h!=null){_v+=_h+"=ROADADDRPART1,";_u[_h]=_t.getColumn(0,"ROADADDRPART1");}}if(_f){_w=_i==null?"ROAD_DETAIL":_i;_u[_w]=_t.getColumn(0,"ROADADDRPART2");}else{if(_i!=null){_v+=_i+"=ROADADDRPART2,";_u[_i]=_t.getColumn(0,"ROADADDRPART2");}}if(_f){_w=_j==null?"JIBUN_ALL":_j;_u[_w]=_t.getColumn(0,"JIBUNADDR");}else{if(_j!=null){_v+=_j+"=JIBUNADDR,";_u[_j]=_t.getColumn(0,"JIBUNADDR");}}var _x=_t.getColumn(0,"JIBUNADDR");var _y=_x.split("   ");var _z=_y.length;var _aa=null;var _ab=null;if(_z>0){_aa=_y[0];_ab=_z>1?_y[1]:"";}else{_aa=_x;_ab="";}if(_f){_w=_k==null?"JIBUN_BASE":_k;_u[_w]=_aa;_w=_l==null?"JIBUN_DETAIL":_l;_u[_w]=_ab;}else{var _ac=null;if(!_o){var _ac=_c;_ac.copyRow(_ac.rowposition,_t,0,_v);}if(_k!=null){if(!_o){_ac.setColumn(_ac.rowposition,_k,_aa);}_u[_k]=_aa;if(_l!=null){if(!_o){_ac.setColumn(_ac.rowposition,_l,_ab);}_u[_l]=_ab;}}}if(_n!=null){if(typeof _n=="function"){_n.call(this,_u);}else{this[_n](_u);}}};_p["arg_addr"]=_m==null?"":_m;this.WORK_FORM.gfn_popup('zipPopup',500,500,'',_p,"common::frmZipAddressPopup.xfdl",_q);},formatZip:function(_c){var _d="";var _e=this.WORK_FORM.comUtils.isNullEmpty(_c);if(_e){return _d;}var _f=_c.replace(/[^0-9]/g,'');_e=this.WORK_FORM.comUtils.isNullEmpty(_f);if(_e){return _d;}var _g=null;var _h=new switchSymbolFormatter();var _i=_f.length;if(_i==6){_g="###-###";}else{return _f;}return _h.formatValue(_g,_f);},formatDate:function(_c,_d){var _e="";var _f=this.WORK_FORM.comUtils.isNullEmpty(_c);if(_f){return _e;}var _g=String(_c);var _h=_e;_f=this.WORK_FORM.comUtils.isNullEmpty(_g);if(_f){return _e;}var _i=_d?_d:null;var _j="";var _k=new switchSymbolFormatter();var _l=this.DATE_FORMAT_TOKEN;if(_g.length==17){_j=_i==null?"####"+_l+"##"+_l+"## ##:##:##:###":_i;}else if(_g.length==16){_j=_i==null?"####"+_l+"##"+_l+"## ##:##:##:##":_i;}else if(_g.length==15){_j=_i==null?"####"+_l+"##"+_l+"## ##:##:##:#":_i;}else if(_g.length==14){_j=_i==null?"####"+_l+"##"+_l+"## ##:##:##":_i;}else if(_g.length==12){_j=_i==null?"####"+_l+"##"+_l+"## ##:##":_i;}else if(_g.length==8){_j=_i==null?"####"+_l+"##"+_l+"##":_i;}else if(_g.length==6){_j=_i==null?"####"+_l+"##":_i;}else{if(_i==null){return _g;}else{_j=_i;}}return _k.formatValue(_j,_g);},formatPhone:function(_c,_d){var _e="";var _f=this.WORK_FORM.comUtils.isNullEmpty(_c);if(_f){return _e;}var _g=_d?_d:false;var _h=_c.replace(/[^0-9]/g,'');_f=this.WORK_FORM.comUtils.isNullEmpty(_h);if(_f){return _e;}var _i=null;var _j=new switchSymbolFormatter();var _k=_h.length;if(_k==11){_i=_g?"###-****-####":"###-####-####";_h=_g?_h.substring(0,3)+_h.substring(7,11):_h;}else if(_k==10){if(_h.substring(0,2)=="02"){_i=_g?"##-****-####":"##-####-####";_h=_g?_h.substring(0,2)+_h.substring(6,10):_h;}else{_i=_g?"###-***-####":"###-###-####";_h=_g?_h.substring(0,3)+_h.substring(6,10):_h;}}else if(_k==9){if(_h.substring(0,2)=="02"){_i=_g?"##-***-####":"##-###-####";_h=_g?_h.substring(0,2)+_h.substring(5,9):_h;}else{return _h;}}else if(_k==8){_i="####-####";}else if(_k==7){_i="###-####";}else{return _h;}return _j.formatValue(_i,_h);},formatIhidnum:function(_c,_d){var _e="";var _f=this.WORK_FORM.comUtils.isNullEmpty(_c);if(_f){return _e;}var _g=_d?_d:false;var _h=_c.replace(/-/g,'');_f=this.WORK_FORM.comUtils.isNullEmpty(_h);if(_f){return _e;}var _i=null;var _j=new switchSymbolFormatter();var _k=_h.length;if(_k>12){_i=_g?"######-#******":"######-#######";}else{return _h;}return _j.formatValue(_i,_h);},setListSizeStatus:function(_c,_d,_e,_f,_g){var _h="";var _i=_d?_d:null;var _j=_f?_f:"";var _k=_e?_e:"총 # 건이 조회되었습니다.";var _l=_g?_g:"조회 결과가 없습니다.";var _m=_c.getRowCount();var _n=RegExp("#","gi");var _o=RegExp("@","gi");_h=_m>0?(_k.replace(_n,_m)).replace(_o,_j):_l;if(_i==null){return _h;}else{_i.set_text(_h);}},fn_setFormatData:function(_c,_d,_e){try{var _f=this.datasetToObject(_c);if(_f==null){return true;}var _g=this.isArray(_f);var _h=_g?_f:[_f];var _i=function(_t){var _u=null;var _v=_d==null?0:_d.length;for(var _aa=0;_aa<_v;_aa++ ){var _w=_d[_aa];var _x=_w["FIELD"];var _y=_w["TYPE"];var _z=_w.hasOwnProperty("OPTION")?_w["OPTION"]:null;if(_x==_t){if(_z==null){_u=_y;}else{_u=[_y,_z];}break;}}return _u;};var _j=_h==null?0:_h.length;for(var _t=0;_t<_j;_t++ ){var _k=_h[_t];for(var _u in _k){var _l=_i(_u);if(_l==null){continue;}else{var _m=_k[_u];var _n="";var _o=this.isArray(_l);var _p="";var _q=null;if(_o){_p=_l[0];_q=_l[1];}else{_p=_l;}switch(_p){case "ZIP":_n=this.formatZip(_m);break;case "PHONE":_n=_q==null?this.formatPhone(_m):this.formatPhone(_m,_q);break;case "DATE":_n=_q==null?this.formatDate(_m):this.formatDate(_m,_q);break;case "IHIDNUM":_n=_q==null?this.formatIhidnum(_m):this.formatIhidnum(_m,_q);break;default:break;}_k[_u]=_n;}}}var _r=_e?true:false;var _s=_r?_e:_c;this.clearDataSet([_s]);this.putListToDataset(_s,_h);return true;}catch(ex){return false;}},getBltSumInfo:function(_c){var _d={};var _e=this.WORK_FORM;var _f=_e.comUtils.isNullEmpty(_c["BLCK_FM"])?"":_c["BLCK_FM"];var _g=_e.comUtils.isNullEmpty(_c["LOT_FM"])?"":_c["LOT_FM"];var _h=_e.comUtils.isNullEmpty(_c["LOT_TY_FM"])?"":_c["LOT_TY_FM"];var _i=_e.comUtils.isNullEmpty(_c["BLCK_TO"])?"":_c["BLCK_TO"];var _j=_e.comUtils.isNullEmpty(_c["LOT_TO"])?"":_c["LOT_TO"];var _k=_e.comUtils.isNullEmpty(_c["LOT_TY_TO"])?"":_c["LOT_TY_TO"];var _l=_f.padLeft(3,"0")+_g.padLeft(3,"0")+_h.padLeft(2,"0");var _m=_i.padLeft(3,"0")+_j.padLeft(3,"0")+_k.padLeft(2,"0");var _n=null;var _o=null;if(_l=="00000000"&&_m=="00000000"){_n="";_o="";}else{_n=_l;_o=_m;}_d["BLT_FM"]=_n;_d["BLT_TO"]=_o;return _d;},getInputMap:function(_c){var _d=null;var _e=_c.components.length;for(var _k=0;_k<_e;_k++ ){var _f=_c.components.get_item(_k);var _g=_f.toString();var _h=null;var _i=null;switch(_g){case "[object Edit]":case "[object MaskEdit]":case "[object TextArea]":case "[object Spin]":case "[object Calendar]":case "[object Radio]":case "[object CheckBox]":case "[object ListBox]":case "[object Combo]":case "[object Div]":var _j=_c.id+"."+_f.id;_i=this._getBindItemName(_j);if(_i==null){continue;}if(_g=="[object Div]"){_h=_f.fn_get_value();}else{_h=_f.value;}break;default:break;}if(_i!=null){if(_d==null){_d={};}_d[_i]=_h;}}return _d;},_getBindItemName:function(_c){var _d=null;var _e=this.WORK_FORM.binds.length;for(var _g=0;_g<_e;_g++ ){var _f=this.WORK_FORM.binds[_g];if(_f.compid==_c){_d=_f.columnid;break;}}return _d;},dumper:function(_c,_d,_e,_f){var _g=application.gv_host;var _h=_g.indexOf("local")> -1?true:false;if(!this.USE_DUMP){return false;}else{if(!_h){}}var _i=null;var _j=typeof (_c)=="string"?true:false;var _k=_e?_e:false;var _l=_f?_f:false;if(_j){_k?alert(_c):trace(_c);_i=_l?_c:null;}else{var _m=_c.toString();switch(_m){case "[object Dataset]":var _n="\n[BEGIN] Dump - "+_c.name+"\n";var _o=this.datasetToObject(_c,_d,false);_n+=_o==null?"null\n":_o;_n+="[ END ] Dump";_k?alert(_n):trace(_n);_i=_l?_n:null;break;default:break;}}if(_l){return _i;}},datasetToObject:function(_c,_d,_e){var _f=null;var _g=null;var _h=null;var _i=null;var _j=this.WORK_FORM.comUtils.isNullEmpty(_e);if(_j){_e=true;}var _k=_d?_d.viewRow||null:null;var _l=_d?_d.viewCol||null:null;var _m=_d?(_k?false:true):true;var _n=_d?(_l?false:true):true;var _o=_m?false:(this.isArray(_k)?true:false);var _p=_n?false:(this.isArray(_l)?true:false);var _q=null;var _r=null;var _s=null;if(!_m&&!_o){if(_k.indexOf("expr")== -1){_m=true;}else{_q=_k.replace(/expr:/gi,"");var _t=_q.split("=");_r=_t[0];_s=_t[1];}}if(!_n&&!_p){_n=true;}var _u=_c.getRowCount();var _v=_c.getColCount();if(_u>0){_f="";var _w=false;if(_e){_g={};_w=_o?(_k.length>1?true:false):(_u>1?true:false);if(_w){_h=[];}}for(var _ai=0;_ai<_u;_ai++ ){if(_o){var _x=false;var _y=_k.length;for(var _aj=0;_aj<_y;_aj++ ){if(_ai==_k[_aj]){_x=true;break;}}if(!_x){continue;}}if(_q!=null){var _z=_c.findRowExpr(_q,_ai,_ai+1);if(_z<0||_z!=_ai){continue;}}if(_e){if(_w){_i={};_i["DS_ROW"]=_ai;}else{_g["DS_ROW"]=_ai;}}else{_f+="ROW "+_ai+" : ";}for(var _ak=0;_ak<_v;_ak++ ){var _aa=_c.getColID(_ak);var _ab=_c.getColumn(_ai,_aa);var _ac=false;if(_n){if(_e){if(_w){_i[_aa]=_ab;}else{_g[_aa]=_ab;}}else{_f+=_aa+"="+_ab;}_ac=true;}else{var _ad=_l.length;for(var _al=0;_al<_ad;_al++ ){var _ae=_l[_al];if(_aa==_ae){if(_e){if(_w){_i[_aa]=_ab;}else{_g[_aa]=_ab;}}else{_f+=_aa+"="+_ab;}_ac=true;break;}}}if(!_e){if(_ak!=_v-1){_f+=_ac?", ":"";}else{var _af=_c.getRowType(_ai);var _ag=this._getDsRowTypeName(_af);_f+=" rowType="+_af+"("+_ag+")\n";}}else{if(_ak==_v-1){var _af=_c.getRowType(_ai);var _ah=this._getDsRowTypeName(_af);if(_w){_i["DS_ROW_TYPE"]=_af;_i["DS_ROW_TYPE_NM"]=_ah;}else{_g["DS_ROW_TYPE"]=_af;_g["DS_ROW_TYPE_NM"]=_ah;}}}}if(_e&&_w){_h.push(_i);}}}return _e?(_w?_h:_g):_f;},_getDsRowTypeName:function(_c){var _d="";switch(_c){case Dataset.ROWTYPE_EMPTY:_d="없음";break;case Dataset.ROWTYPE_NORMAL:_d="초기";break;case Dataset.ROWTYPE_INSERT:_d="추가";break;case Dataset.ROWTYPE_UPDATE:_d="수정";break;case Dataset.ROWTYPE_DELETE:_d="삭제";break;case Dataset.ROWTYPE_GROUP:_d="그룹";break;default:break;}return _d;}};function switchSymbolFormatter(_c){this.SWITCH_SYMBOL=_c?_c:"#";this.isValid=true;this.formatValue=function(_d,_e){var _f="";var _g=0;var _h=_d.length;for(var _j=0;_j<_h;_j++ ){var _i=_d.charAt(_j);if(_i==this.SWITCH_SYMBOL){_f+=String(_e).charAt(_g++ );}else{_f+=_d.charAt(_j);}}return _f;};}this.fileManager=function(_c,_d,_e){this.DEBUG=true;this.MODE_TEST=false;this.TYPE_UPLOADER="ExtFileUpload";this.TYPE_DOWNLOADER="ExtFileDownload";this.DEF_UPLOAD_URL="hsco/cmm/file/uploadFile.do";this.DEF_DOWNLOAD_URL="hsco/cmm/download/fileDownload.do";this.DEF_ALLOW_TYPE=["jpg","jpeg","gif","png","bmp","txt","zip","7z","gzip","doc","docx","ppt","pptx","xls","xlsx","pdf","hwp","hwt",""];this.DATASET_NAME_UP_BASE="ds_upBase";this.DATASET_NAME_UP="ds_upFiles";this.DATASET_NAME_DOWN="ds_downFiles";this.DATASET_COLUMN_UP=["FILE_SN","FILE_ORDR","FILE_STRE_COURS","STRE_FILE_NM","ORGINL_FILE_NM","FILE_EXTSN","FILE_CN","FILE_MG","USE_AT","FILE_ID","FILE_TY","SN","SYS_SE_CODE","JOB_SE","FILE_IMAGE","PROGRS","TRNSMIS_FILE_SIZE","DELETE_IMAGE","STTUS"];this.DATASET_COLUMN_DOWN=["FILE_SN","FILE_ORDR"];this.DATASET_COLUMN_UP_BASE=["SINGLE_FILE_SN","MODE_TEST"];this.USE_ADD_FILE_SN=false,this.ADD_FILE_SN=null,this.ADD_FILE_SN_SINGLE=false,this.maxCount=10;this.maxSize="30MB";this.maxTotalSize="200MB";this._form=_c;this._sysSe=_d;this._jobSe=_e;this._uploader=null;this._downloader=null;this._host=null;this._uploadUrl=null;this._downloadUrl=null;this._allowTypes=null;this._useMultiSelect=false;this._transferType="all";this._userOnChange=null;this._userOnSuccess=null;this._userOnError=null;this._userOnProgress=null;this._userOnReadyStateChange=null;this._userOnCancelFile=null;this._ds_upFile=null;this._ds_downFile=null;this._ds_upBase=null;this._useMultiUpload=false;this._fileSn=null;this._responseGrid=null;this._responseArea=null;this.init=function(_f){if(this._sysSe==null||this._jobSe==null){alert("파일업/다운로드 : 시스템구분 또는 업무구분 값이 없습니다.");return;}var _g=this._createFileDataset("UP_BASE",this.DATASET_NAME_UP_BASE,this.DATASET_COLUMN_UP_BASE);if(!_g){alert("파일 업로드 기본 데이터셋 생성 실패");return;}var _h=this._createFileDataset(this.TYPE_UPLOADER,this.DATASET_NAME_UP,this.DATASET_COLUMN_UP);if(!_h){alert("파일 업로드 데이터셋 생성 실패");return;}var _i=this._createFileDataset(this.TYPE_DOWNLOADER,this.DATASET_NAME_DOWN,this.DATASET_COLUMN_DOWN);if(!_i){alert("파일 다운로드 데이터셋 생성 실패");return;}var _j=Eco.getUniqueId("extUpload_");this._uploader=new nexacro.ExtFileUpload(_j,this._form);this._form.addChild(_j,this._uploader);var _k=Eco.getUniqueId("extDownload_");this._downloader=new nexacro.ExtFileDownload(_k,this._form);this._form.addChild(_k,this._downloader);this._setConfig(_f);};this._setConfig=function(_f){this._host=_f&&_f["host"]?_f["host"]:application.gv_host;this._uploadUrl=_f&&_f["uploadUrl"]?_f["uploadUrl"]:this.DEF_UPLOAD_URL;this._downloadUrl=_f&&_f["downloadUrl"]?_f["downloadUrl"]:this.DEF_DOWNLOAD_URL;this._allowTypes=_f&&_f["allowTypes"]?_f["allowTypes"]:this.DEF_ALLOW_TYPE;this._useMultiSelect=_f&&_f["useMultiSelect"]?_f["useMultiSelect"]:false;this._useMultiUpload=_f&&_f["useMultiUpload"]?_f["useMultiUpload"]:false;this._responseGrid=_f&&_f["responseGrid"]?_f["responseGrid"]:null;this._responseArea=_f&&_f["responseArea"]?_f["responseArea"]:null;this._userOnChange=_f&&_f["onChange"]?_f["onChange"]:null;this._userOnSuccess=_f&&_f["onSuccess"]?_f["onSuccess"]:null;this._userOnError=_f&&_f["onError"]?_f["onError"]:null;this._userOnProgress=_f&&_f["onProgress"]?_f["onProgress"]:null;this._userOnReadyStateChange=_f&&_f["onReadyStateChange"]?_f["onReadyStateChange"]:null;this._userOnCancelFile=_f&&_f["onCancel"]?_f["onCancel"]:null;this._uploader.set_multiselect(this._useMultiSelect);if(this._uploader.support.FileAPI){if(this._responseArea!=null&&this._responseGrid!=null){this._uploader.setResponseZone(this._form,this._responseArea,this._responseGrid);}}else{this._responseArea.set_visible(false);}if(this._host.indexOf("local")> -1){this.DEBUG=true;}this._uploader.addEventHandler("onchange",this.onChangeHandler,this);this._uploader.addEventHandler("onsuccess",this.onSuccessHandler,this);this._uploader.addEventHandler("onerror",this.onErrorHandler,this);this._uploader.addEventHandler("onprogress",this.onProgressHandler,this);this._uploader.addEventHandler("onreadystatechange",this.onReadystateChangeHandler,this);this._uploader.show();this._downloader.addEventHandler("onsuccess",this.onSuccessHandler,this);this._downloader.addEventHandler("onerror",this.onErrorHandler,this);this._downloader.addEventHandler("onprogress",this.onProgressHandler,this);this._downloader.show();this.debug("PMS fileManager Ready!!");};this.getfileCount=function(){return this._ds_upFile.getRowCount();};this.hasFile=function(){return this._ds_upFile.getRowCount()>0?true:false;};this.setFileSn=function(_f){this._fileSn=_f;};this.reset=function(){var _f=this.cancelAllFile();if(_f){this.USE_ADD_FILE_SN=false;this.ADD_FILE_SN=null;}return _f;};this.addFiles=function(_f,_g,_h){this.debug("[BEGIN] fileManager.addFiles ==========");this.USE_ADD_FILE_SN=false;this._allowTypes=_f?_f:this.DEF_ALLOW_TYPE;var _i=_h?_h:this._useMultiSelect;var _j=_g?_g:this._useMultiUpload;if(!_j){this.cancelAllFile();}this._uploader.set_multiselect(_i);this._uploader.addFiles();this.debug("[ END ] fileManager.addFiles ==========");};this.addFilesWithSn=function(_f,_g,_h,_i,_j){this.debug("[BEGIN] fileManager.addFilesWithSn ==========");this._allowTypes=_j?_j:this.DEF_ALLOW_TYPE;var _k=_i?_i:this._useMultiSelect;var _l=_g?_g:this._useMultiUpload;var _m=_h?_h:this.ADD_FILE_SN_SINGLE;this.USE_ADD_FILE_SN=true;this.ADD_FILE_SN=_f;this.ADD_FILE_SN_SINGLE=_m;if(!_l){this.cancelAllFile();}else{this._uploader._resetInputFile();}this._uploader.set_multiselect(_k);this.debug(JSON.stringify(this._uploader._addedfiles));this._uploader.addFiles();this.debug("[ END ] fileManager.addFilesWithSn ==========");};this.cancelFiles=function(_f){this.debug("[BEGIN] fileManager.cancelFiles ==========");var _g=false;var _h=this.USE_ADD_FILE_SN;var _i=_h?"FILE_SN":"ORGINL_FILE_NM";var _j= -1;var _k=null;if(this.isArray(_f)){var _l=_f.length;for(var _n=0;_n<_l;_n++ ){_j=this._ds_upFile.findRow(_i,_f);_k=this._ds_upFile.getColumn(_j,"FILE_ID");_g=this._cancelFile(_k,_j);if(!_g){break;}}if(!_g){var _m="선택파일 취소(삭제) 중 오류가 발생하였습니다.\n전체 파일을 취소(삭제)하시겟습니까?";if(confirm(_m)){this.cancelAllFile();}}}else{_j=this._ds_upFile.findRow(_i,_f);_k=this._ds_upFile.getColumn(_j,"FILE_ID");_g=this._cancelFile(_k,_j);}this.debug("[ END ] fileManager.cancelFiles ==========");return _g;};this._cancelFile=function(_f,_g){var _h=this._ds_upFile.deleteRow(_g);if(_h){this._uploader.removeFile(_f);}else{this._ds_upFile.reset();}return _h;};this.cancelAllFile=function(){var _f=false;this._uploader.removeAll();this._ds_upFile.clearData();var _g=this._uploader.getAddedFileLength();var _h=this._ds_upFile.getRowCount();if(_g==0&&_g==_h){_f=true;}return _f;};this.onChangeHandler=function(_b,_f){this.debug("[BEGIN] fileManager.onChangeHandler ==========");var _g=_b._type_name;var _h=_f.index;var _i=_f.index;var _j=_f.files;var _k=_j.length;var _l=(this._uploader.support.XHR2&&this._uploader.support.FileAPI);var _m=this._checkAllowFileList(_j,this.ADD_FILE_SN);var _n=null;var _o=null;var _p=[];var _q=_m["allow"];var _r=_q==null?0:_q.length;for(var _ab=0;_ab<_r;_ab++ ){_n=_q[_ab];if(this.USE_ADD_FILE_SN){_n["FILE_SN"]=this.ADD_FILE_SN;}_o=this._putFileInfoToDs(_n);_p.push(_o);}this.ADD_FILE_SN=null;var _s=_m["reject"];var _t=_s==null?0:_s.length;if(_t>0){var _u="";var _v="";for(var _ac=0;_ac<_t;_ac++ ){var _w=_s[_ac];_v+=(_ac+1)+". "+_w["FILE_NAME"];_v+=" : ";_v+=_w["COUSE"];_v+="\n";}this._uploader.removeFile(_w["FILE_ID"]);this._form.gfn_message(null,"선택 파일중 아래의 사유로 제외된 파일이 있습니다.",_v);}if(this._userOnChange!=null){this.debug("Call User onChange Event Handler");var _x=this._uploader.multiselect;var _y=null;var _z=null;if(_x){_y=[];for(var _ad=0;_ad<_r;_ad++ ){_z=_q[_ad];var _aa=_z["name"];_y.push(_aa);}}else{_z=_q[0];_y=_z==null?false:_z["name"];}if(this._userOnChange!=null){if(typeof this._userOnChange=="function"){this._userOnChange.call(this._form,_g,_y);}else{this._form[this._userOnChange](_g,_y);}}}this.debug("[ END ] fileManager.onChangeHandler ==========");};this._checkAllowFileList=function(_f,_g){var _h={};var _i=[];var _j=[];var _k=this.sizeToByte(this.maxSize);var _l=this.sizeToByte(this.maxTotalSize);var _m=0;var _n=_f==null?0:_f.length;var _o=0;for(_o=0;_o<_n;_o++ ){var _p=_f[_o];var _q=_p["id"];var _r=_p["name"];var _s=_p["size"];var _t=_p["type"];var _u=_r.substring(0,_r.lastIndexOf('.'));var _v="";if(_r.lastIndexOf('.')> -1){_v=_r.substring(_r.lastIndexOf('.')+1,_r.length);}var _w=this._isAllowType(_v);var _x="";if(!_w){_x="허용확장자("+this._allowTypes+") 아님";_i.push({FILE_ID:_q,FILE_NAME:_r,COUSE:_x});continue;}var _y=_s<=_k?true:false;if(!_y){_x="허용용량("+_k+") 초과";_i.push({FILE_ID:_q,FILE_NAME:_r,COUSE:_x});continue;}var _z=this.USE_ADD_FILE_SN;var _aa= -1;if(_z&&_g!=null){_aa=this._ds_upFile.findRow("ORGINL_FILE_NM",_r);if(_aa> -1){_x="중복파일명("+_r+")";_i.push({FILE_ID:_q,FILE_NAME:_r,COUSE:_x});continue;}}else{_aa=this._ds_upFile.findRow("ORGINL_FILE_NM",_r);if(_aa> -1){_x="중복파일명("+_r+")";_i.push({FILE_ID:_q,FILE_NAME:_r,COUSE:_x});continue;}}_m+=_s;if(_m>_l){_i.push(_q);continue;}_j.push(_p);}var _ab=_i==null?0:_i.length;for(_o=0;_o<_ab;_o++ ){var _ac=_i[_o];this._uploader.removeFile(_ac);}_h["allow"]=_j;_h["reject"]=_i;return _h;};this._isAllowType=function(_f){var _g=false;var _h=this._allowTypes.length;_f=_f||'';for(var _j=0;_j<_h;_j++ ){var _i=this._allowTypes[_j];if(_f.toLowerCase()==_i){_g=true;break;}}return _g;};this.onSuccessHandler=function(_b,_f){this.debug("[BEGIN] fileManager.onSuccessHandler ==========");this._fileSn=null;var _g=_f.errorcode;var _h=_f.errormsg;var _i=_b._type_name;switch(_i){case this.TYPE_UPLOADER:this.debug("	"+this.TYPE_UPLOADER+" onSuccess!");if(_g<0){this._form.gfn_callBackMsg("fileUpload",_g,_h);}var _j=this._uploader.getAddedFileLength();var _k=this._ds_upFile.getRowCount();if(_j==0&&_j!=_k){this.debug("	데이터 초기화 > _ds_upBase, _ds_upFile");this._ds_upBase.clearData();this._ds_upFile.clearData();}break;case this.TYPE_DOWNLOADER:this.debug("	"+this.TYPE_DOWNLOADER+" onSuccess!");break;default:break;}if(_g<0){if(this._userOnError!=null){this.debug("Call User onError Event Handler");if(typeof this._userOnError=="function"){this._userOnError.call(this._form,_i,_f);}else{this._form[this._userOnError](_i,_f);}}}else{if(this._userOnSuccess!=null){this.debug("Call User onSuccess Event Handler");if(typeof this._userOnSuccess=="function"){this._userOnSuccess.call(this._form,_i,_f);}else{this._form[this._userOnSuccess](_i,_f);}}}this.debug("[ END ] fileManager.onSuccessHandler ==========");};this.onErrorHandler=function(_b,_f){this.debug("[BEGIN] fileManager.onErrorHandler ==========");var _g=_b._type_name;var _h=_f.errorcode;var _i=_f.errormsg;if(_h<0||_h=="404"){if(this._userOnError!=null){this.debug("Call User onError Event Handler");if(typeof this._userOnError=="function"){this._userOnError.call(this._form,_g,_f);}else{this._form[this._userOnError](_g,_f);}}else{switch(_g){case this.TYPE_UPLOADER:this.debug("	"+this.TYPE_UPLOADER+" onError!");break;case this.TYPE_DOWNLOADER:this.debug("	"+this.TYPE_DOWNLOADER+" onError!");if(_h<0){this._form.gfn_callBackMsg("fileDownload",_h,_i);}if(_h=="404"){this._form.gfn_message("err.파일.없음",_i);}break;default:break;}}}this.debug("[ END ] fileManager.onErrorHandler ==========");};this.onProgressHandler=function(_b,_f){this.debug("[BEGIN] fileManager.onProgressHandler ==========");var _g=_b._type_name;switch(_g){case this.TYPE_UPLOADER:this.debug("	"+this.TYPE_UPLOADER+" onProgress!");if(this._userOnProgress!=null){this.debug("Call User onProgress Event Handler");if(typeof this._userOnProgress=="function"){this._userOnProgress.call(this._form,_g,_f);}else{this._form[this._userOnProgress](_g,_f);}}break;case this.TYPE_DOWNLOADER:this.debug("	"+this.TYPE_DOWNLOADER+" onProgress!");break;default:break;}this.debug("[ END ] fileManager.onProgressHandler ==========");};this.onReadystateChangeHandler=function(_b,_f){this.debug("[BEGIN] fileManager.onReadystateChangeHandler ==========");var _g=_b._type_name;if(this._userOnReadyStateChange!=null){this.debug("Call User onReadyStateChange Event Handler");if(typeof this._userOnReadyStateChange=="function"){this._userOnReadyStateChange.call(this._form,_g,_f.readyState,_f.status,_f);}else{this._form[this._userOnReadyStateChange](_g,_f.readyState,_f.status,_f);}}this.debug("[ END ] fileManager.onReadystateChangeHandler ==========");};this.upload=function(_f,_g,_h){this.debug("[BEGIN] fileManager.upload ==========");this.debug("	sCtrl = "+_f);this.debug("	sInDs = "+_g);this.debug("	sOutDs = "+_h);if(this.USE_ADD_FILE_SN==false&&this._fileSn!=null){this._setUpFileSn();}var _i=this._ds_upBase.getRowCount();if(_i>0){this._ds_upBase.clearData();}var _j=this._ds_upBase.addRow();var _k=this.ADD_FILE_SN_SINGLE==true?"Y":"N";var _l=this.MODE_TEST==true?"Y":"N";this._ds_upBase.setColumn(_j,"SINGLE_FILE_SN",_k);this._ds_upBase.setColumn(_j,"MODE_TEST",_l);var _m=this._host+(_f?_f:this._uploadUrl);var _n="inputFile="+this._ds_upFile.name+" inputFileBase="+this._ds_upBase.name;if(_g){_n+=" "+_g;}var _o=Ex.core.setTranBaseInfo(this._form,"fileUpload",_f,_n,_h);var _p=_o["strInDatasets"]+_n;var _q=_h?_h:"";var _r=this._transferType;this._uploader.upload(_m,_p,_q,_r,0);this.debug("[ END ] fileManager.upload ==========");};this.download=function(_f,_g,_h){this.debug("[BEGIN] fileManager.download ==========");this.debug("	fileSn = "+_f);this.debug("	fileOrder = "+_g);this.debug("	fileName = "+_h);this._ds_downFile.clearData();var _i=this._ds_downFile.addRow();this._ds_downFile.setColumn(_i,"FILE_SN",_f);this._ds_downFile.setColumn(_i,"FILE_ORDR",_g);var _j=this._host+this._downloadUrl;var _k="input1="+this._ds_downFile.name;var _l=Ex.core.setTranBaseInfo(this._form,"fileDownload",this._downloadUrl,_k,"");var _m=_l["strInDatasets"]+_k;this._downloader.download(_j,_h,_m);this.debug("[ END ] fileManager.download ==========");};this.dataFileDownload=function(_f,_g,_h){this.debug("[BEGIN] fileManager.dataFiledownload ==========");var _i=this._host+_f;var _j=Ex.core.setTranBaseInfo(this._form,"fileDownload",this._downloadUrl,_g,"");var _k=_j["strInDatasets"]+_g;this._downloader.download(_i,_h,_k);this.debug("[ END ] fileManager.dataFiledownload ==========");};this._putFileInfoToDs=function(_f){this.debug("[BEGIN] fileManager._putFileInfoToDs ==========");var _g=_f["id"];var _h=_f["name"];var _i=_f["size"];var _j=_f["type"];var _k=_h.substring(0,_h.lastIndexOf('.'));var _l=_h.substring(_h.lastIndexOf('.')+1,_h.length);var _m=this._ds_upFile.addRow();this._ds_upFile.setColumn(_m,"ORGINL_FILE_NM",_h);if(_i>0){this._ds_upFile.setColumn(_m,"FILE_MG",_i);}this._ds_upFile.setColumn(_m,"FILE_EXTSN",_l);this._ds_upFile.setColumn(_m,"USE_AT",'1');this._ds_upFile.setColumn(_m,"FILE_ID",_g);this._ds_upFile.setColumn(_m,"FILE_TY",_j);this._ds_upFile.setColumn(_m,"PROGRS",0);this._ds_upFile.setColumn(_m,"SYS_SE_CODE",this._sysSe);this._ds_upFile.setColumn(_m,"JOB_SE",this._jobSe);if(this.USE_ADD_FILE_SN){var _n=_j=_f["FILE_SN"];this._ds_upFile.setColumn(_m,"FILE_SN",_n);}this.debug("[ END ] fileManager._putFileInfoToDs ==========");return _m;};this._createFileDataset=function(_f,_g,_h){this.debug("[BEGIN] fileManager._createFileDataset ==========");try{var _i=this._form.objects[_g];var _j=_i?false:true;this.debug("	"+_f+" 파일 정보 Dataset 없음? = "+_j);if(_j){this.debug("	"+_f+" 파일 정보 Dataset 생성");_i=new Dataset;_i.set_name(_g);var _k=_h.length;for(var _l=0;_l<_k;_l++ ){_i.addColumn(_h[_l],"string");}}else{this.debug("	"+_f+" 파일 정보 Dataset 초기화(clearData)");_i.clearData();}if(_j){this._form.addChild(_g,_i);}if(_f==this.TYPE_UPLOADER){this._ds_upFile=_i;}else if(_f==this.TYPE_DOWNLOADER){this._ds_downFile=_i;}else if(_f=="UP_BASE"){this._ds_upBase=_i;}this.debug("[ END ] fileManager._createFileDataset ==========");return true;}catch(ex){this.debug("	"+_f+" 파일 정보 Dataset 생성/초기화 실패");trace(ex.message+"\n"+ex.description);this.debug("[ END ] fileManager._createFileDataset ==========");return false;}};this._setUpFileSn=function(){if(this._fileSn==null){return;}var _f=this._ds_upFile.getRowCount();for(var _g=0;_g<_f;_g++ ){this._ds_upFile.setColumn(_g,"FILE_SN",this._fileSn);}};this.isArray=function(_f){var _g="[object Array]";var _h=Object.prototype.toString.call(_f);return _h===_g;};this.sizeToByte=function(_f){var _g=_f.match(/[^\d]+/g);var _h=_f.match(/\d+/);_g=_g?_g[0].toLowerCase():"";_h=_h?_h[0]:_f;if(_g=="mb"){return _h*1024*1024;}else if(_g=="gb"){return _h*1024*1024*1024;}else if(_g=="tb"){return _h*1024*1024*1024*1024;}else if(_g==""){return _h;}else{return _f;}};this.debug=function(_f){if(this.DEBUG){trace(_f);}};};this.dumper=function(_c,_d,_e,_f){this.pmsUtil.dumper(_c,_d,_e,_f);};});this.loadIncludeScript(_a);_b=null;};})();