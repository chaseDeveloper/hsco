(function(){return function(){if(!this._is_form){return;}this.on_create=function(){var _a=null;if(Form==this.constructor){this.set_name("GridFilterPop");this.set_classname("GridFilterPop");this.set_titletext("New Form");this._setFormPosition(0,0,150,150);}_a=new Dataset("ds_codeLogic",this);_a.set_firefirstcount("0");_a.getSetter("firenextcount").set("0");_a.set_useclientlayout("false");_a.set_updatecontrol("true");_a.set_enableevent("true");_a.set_loadkeymode("keep");_a.set_loadfiltermode("keep");_a.set_reversesubsum("false");_a._setContents("<ColumnInfo><Column id=\"cd\" type=\"STRING\" size=\"256\"/><Column id=\"nm\" type=\"STRING\" size=\"256\"/></ColumnInfo><Rows><Row><Col id=\"cd\">and</Col><Col id=\"nm\">그리고</Col></Row><Row><Col id=\"cd\">or</Col><Col id=\"nm\">또는</Col></Row></Rows>");this.addChild(_a.name,_a);_a=new Dataset("ds_combo",this);_a.set_firefirstcount("0");_a.getSetter("firenextcount").set("0");_a.set_useclientlayout("false");_a.set_updatecontrol("true");_a.set_enableevent("true");_a.set_loadkeymode("keep");_a.set_loadfiltermode("keep");_a.set_reversesubsum("false");_a._setContents("<ColumnInfo><Column id=\"chk\" type=\"INT\" size=\"256\"/><Column id=\"val\" type=\"STRING\" size=\"256\"/><Column id=\"text\" type=\"STRING\" size=\"256\"/></ColumnInfo>");this.addChild(_a.name,_a);_a=new Dataset("ds_default",this);_a.set_firefirstcount("0");_a.getSetter("firenextcount").set("0");_a.set_useclientlayout("false");_a.set_updatecontrol("true");_a.set_enableevent("true");_a.set_loadkeymode("keep");_a.set_loadfiltermode("keep");_a.set_reversesubsum("false");_a._setContents("<ColumnInfo><Column id=\"logic\" type=\"STRING\" size=\"256\"/><Column id=\"operator\" type=\"STRING\" size=\"256\"/><Column id=\"value\" type=\"STRING\" size=\"256\"/></ColumnInfo>");this.addChild(_a.name,_a);_a=new Dataset("ds_codeOperator",this);_a.set_firefirstcount("0");_a.getSetter("firenextcount").set("0");_a.set_useclientlayout("false");_a.set_updatecontrol("true");_a.set_enableevent("true");_a.set_loadkeymode("keep");_a.set_loadfiltermode("keep");_a.set_reversesubsum("false");_a._setContents("<ColumnInfo><Column id=\"cd\" type=\"STRING\" size=\"256\"/><Column id=\"nm\" type=\"STRING\" size=\"256\"/><Column id=\"group\" type=\"STRING\" size=\"256\"/></ColumnInfo><Rows><Row><Col id=\"cd\"/><Col id=\"nm\">없음</Col><Col id=\"group\">All</Col></Row><Row><Col id=\"cd\">equal</Col><Col id=\"nm\">=</Col><Col id=\"group\">All</Col></Row><Row><Col id=\"cd\">notEqual</Col><Col id=\"nm\">&lt;&gt;</Col><Col id=\"group\">All</Col></Row><Row><Col id=\"cd\">greaterThan</Col><Col id=\"nm\">&gt;</Col><Col id=\"group\">All</Col></Row><Row><Col id=\"cd\">greaterThanOrEqual</Col><Col id=\"nm\">&gt;=</Col><Col id=\"group\">All</Col></Row><Row><Col id=\"cd\">lessThan</Col><Col id=\"nm\">&lt;</Col><Col id=\"group\">All</Col></Row><Row><Col id=\"cd\">lessThanOrEqual</Col><Col id=\"nm\">&lt;=</Col><Col id=\"group\">All</Col></Row><Row><Col id=\"cd\">startWith</Col><Col id=\"nm\">시작문자</Col><Col id=\"group\">String</Col></Row><Row><Col id=\"cd\">endWith</Col><Col id=\"nm\">종료문자</Col><Col id=\"group\">String</Col></Row><Row><Col id=\"cd\">contains</Col><Col id=\"nm\">포함</Col><Col id=\"group\">String</Col></Row></Rows>");this.addChild(_a.name,_a);_a=new Grid("grd_filterItem","absolute","4","5",null,"139","5",null,this);_a.set_taborder("0");_a.set_binddataset("ds_combo");_a.set_autoenter("select");_a.set_autoupdatetype("itemselect");_a.set_selecttype("cell");_a.set_autofittype("col");_a._setContents("<Formats><Format id=\"default\"><Columns><Column size=\"60\"/><Column size=\"70\"/><Column size=\"100\"/></Columns><Rows><Row size=\"24\" band=\"head\"/><Row size=\"24\"/></Rows><Band id=\"head\"><Cell displaytype=\"normal\" edittype=\"none\" style=\"cursor: ;\"/><Cell col=\"1\" text=\"조건\"/><Cell col=\"2\" text=\"값\"/></Band><Band id=\"body\"><Cell displaytype=\"expr:currow == 0 ? 'normal' : 'combo'\" edittype=\"expr:currow == 0 ?  'none' : 'combo'\" style=\"align:left middle;\" text=\"bind:logic\" combodataset=\"ds_codeLogic\" combocodecol=\"cd\" combodatacol=\"nm\" combodisplay=\"expr:currow == 0 ?  'edit' : 'display'\"/><Cell col=\"1\" displaytype=\"combo\" edittype=\"combo\" style=\"align:left middle;\" text=\"bind:operator\" combodataset=\"ds_codeOperator\" combocodecol=\"cd\" combodatacol=\"nm\" combodisplayrowcount=\"10\" combodisplay=\"display\"/><Cell col=\"2\" displaytype=\"normal\" edittype=\"normal\" style=\"align:left middle;\" text=\"bind:value\" editautoselect=\"true\" editdisplay=\"display\"/></Band></Format><Format id=\"combo\"><Columns><Column size=\"30\"/><Column size=\"110\"/></Columns><Rows><Row size=\"24\"/></Rows><Band id=\"body\"><Cell displaytype=\"checkbox\" edittype=\"checkbox\" text=\"bind:chk\"/><Cell col=\"1\" style=\"align:left middle;\" text=\"bind:text\"/></Band></Format><Format id=\"date\"><Columns><Column size=\"60\"/><Column size=\"70\"/><Column size=\"100\"/></Columns><Rows><Row size=\"24\" band=\"head\"/><Row size=\"24\"/></Rows><Band id=\"head\"><Cell style=\"cursor: ;\"/><Cell col=\"1\" text=\"조건\"/><Cell col=\"2\" text=\"값\"/></Band><Band id=\"body\"><Cell displaytype=\"expr:currow == 0 ? 'normal' : 'combo'\" edittype=\"expr:currow == 0 ?  'none' : 'combo'\" text=\"bind:logic\" combodataset=\"ds_codeLogic\" combocodecol=\"cd\" combodatacol=\"nm\" combodisplay=\"expr:currow == 0 ?  'edit' : 'display'\"/><Cell col=\"1\" displaytype=\"combo\" edittype=\"combo\" text=\"bind:operator\" combodataset=\"ds_codeOperator\" combocodecol=\"cd\" combodatacol=\"nm\" combodisplayrowcount=\"10\" combodisplay=\"display\"/><Cell col=\"2\" displaytype=\"date\" edittype=\"date\" text=\"bind:value\" editautoselect=\"true\" editdisplay=\"edit\" calendardisplay=\"display\" calendardisplaynulltype=\"nulltext\"/></Band></Format></Formats>");this.addChild(_a.name,_a);_a=new Button("btn_add","absolute","31","74","40","20",null,null,this);_a.set_taborder("1");_a.set_text("추가");_a.set_visible("false");this.addChild(_a.name,_a);_a=new Button("btn_delete","absolute","75","74","40","20",null,null,this);_a.set_taborder("2");_a.set_text("삭제");_a.set_visible("false");this.addChild(_a.name,_a);_a=new Layout("default","",150,150,this,function(_b){_b.set_classname("GridFilterPop");_b.set_titletext("New Form");});this.addLayout(_a.name,_a);_a=null;};this.registerScript("GridFilterPop.xfdl",function(){this.setFilterInfo=function(_a,_b){this.ds_codeOperator.filter("");var _c,_d;if(_a=="combo"){var _e=Eco.XComp.getUserProperty(this,"grid");var _f=Eco.XComp.getUserProperty(this,"filterHeadCellIndex");var _g=this.parent.getBodyCellIndex(_e,_f);var _h=_e.getCellProperty("body",_g,"combodataset");var _i=Eco.XComp.lookup(_e.parent,_h);var _j=_e.getCellProperty("body",_g,"combocodecol");var _k=_e.getCellProperty("body",_g,"combodatacol");this.ds_combo.set_enableevent(false);this.ds_combo.deleteAll();for(var _l=0,_m=_i.rowcount;_l<_m;_l++ ){this.ds_combo.addRow();this.ds_combo.setColumn(_l,"chk",0);this.ds_combo.setColumn(_l,"text",_i.getColumn(_l,_k));this.ds_combo.setColumn(_l,"val",_i.getColumn(_l,_j));}this.ds_combo.set_rowposition( -1);if(!Eco.isEmpty(_b)){for(var _l=0,_m=_b.length;_l<_m;_l++ ){_c=_b[_l];_d=this.ds_combo.findRow("val",_c.value);if(_d> -1){this.ds_combo.setColumn(_d,"chk",1);}}}this.ds_combo.set_enableevent(true);this.grd_filterItem.set_formatid("combo");this.grd_filterItem.set_binddataset("ds_combo");this.btn_add.set_visible(false);this.btn_delete.set_visible(false);}else{if(_a=="date"||_a=="number"){this.ds_codeOperator.filter("group != 'String'");}this.ds_default.set_enableevent(false);this.ds_default.deleteAll();if(Eco.isEmpty(_b)){_d=this.ds_default.addRow();this.ds_default.setColumn(_d,"logic","");this.ds_default.setColumn(_d,"operator","equal");this.ds_default.setColumn(_d,"value","");}else{for(var _l=0,_m=_b.length;_l<_m;_l++ ){_c=_b[_l];_d=this.ds_default.addRow();this.ds_default.setColumn(_d,"logic",_c.logic);this.ds_default.setColumn(_d,"operator",_c.operator);this.ds_default.setColumn(_d,"value",_c.value);}}this.ds_default.set_enableevent(true);if(_a=="date"){this.grd_filterItem.set_formatid("date");}else{this.grd_filterItem.set_formatid("default");}this.grd_filterItem.set_binddataset("ds_default");this.btn_add.move(191,146);this.btn_delete.move(235,146);this.btn_add.set_visible(true);this.btn_delete.set_visible(true);this.grd_filterItem.setCellPos(1);}};this.ds_combo_oncolumnchanged=function(_a,_b){this.applyComboFilter(_a);};this.ds_default_oncolumnchanged=function(_a,_b){this.applyNormalFilter(_a);};this.btn_add_onclick=function(_a,_b){if(_a.formatid!="combo"){var _c=this.objects[this.grd_filterItem.binddataset];_c.set_enableevent(false);var _d=_c.addRow();if(_d==0){_c.setColumn(_d,"logic","");}else{_c.setColumn(_d,"logic","and");}_c.setColumn(_d,"operator","equal");_c.setColumn(_d,"value","");_c.set_enableevent(true);}};this.btn_delete_onclick=function(_a,_b){if(_a.formatid!="combo"){var _c=this.objects[this.grd_filterItem.binddataset];if(_c.rowposition==0){return;}_c.set_enableevent(false);_c.deleteRow(_c.rowposition);_c.set_enableevent(true);this.applyNormalFilter(_c);}};this.applyComboFilter=function(_a){var _b=Eco.XComp.getUserProperty(this,"grid");var _c=Eco.XComp.getUserProperty(this,"filterColumnName");var _d=_a.getCaseCount("chk==1");if(_d==0||_a.rowcount==_d){this.parent.removeFilterInfo(_b,_c);}else{var _e;var _f=[];for(var _g=0,_h=_a.rowcount;_g<_h;_g++ ){if(_a.getColumn(_g,"chk")==1){_e={};if(_f.length==0){_e.logic="";}else{_e.logic="or";}_e.operator="equal";_e.value=_a.getColumn(_g,"val");_f.push(_e);}}this.parent.setFilterInfo(_b,_c,_f);}this.parent.executeFilter(_b);};this.applyNormalFilter=function(_a){var _b=Eco.XComp.getUserProperty(this,"grid");var _c=Eco.XComp.getUserProperty(this,"filterColumnName");var _d;var _e=[];var _f,_g,_h;for(var _i=0,_j=_a.rowcount;_i<_j;_i++ ){_f=_a.getColumn(_i,"logic");_g=_a.getColumn(_i,"operator");_h=_a.getColumn(_i,"value");if(_i>0&&Eco.isEmpty(_f)){continue;}if(Eco.isEmpty(_g)||Eco.isEmpty(_h)){continue;}_d={'logic':_f,'operator':_g,'value':_h};_e.push(_d);}if(_e.length==0){this.parent.removeFilterInfo(_b,_c);}else{this.parent.setFilterInfo(_b,_c,_e);}this.parent.executeFilter(_b);};});this.on_initEvent=function(){this.ds_combo.addEventHandler("oncolumnchanged",this.ds_combo_oncolumnchanged,this);this.ds_default.addEventHandler("oncolumnchanged",this.ds_default_oncolumnchanged,this);this.grd_filterItem.addEventHandler("onheadclick",this.grd_filterItem_onheadclick,this);this.btn_add.addEventHandler("onclick",this.btn_add_onclick,this);this.btn_delete.addEventHandler("onclick",this.btn_delete_onclick,this);};this.loadIncludeScript("GridFilterPop.xfdl");};})();