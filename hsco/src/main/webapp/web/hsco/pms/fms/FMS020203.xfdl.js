(function(){return function(){if(!this._is_form){return;}this.on_create=function(){var _a=null;if(Form==this.constructor){this.set_name("FMS010101");this.set_classname("form");this.set_titletext("사고이력관리");this._setFormPosition(0,0,1059,794);}_a=new Dataset("DS_FMS_INCIDENT_TABLE",this);_a._setContents("<ColumnInfo><Column id=\"SN\" type=\"STRING\" size=\"256\"/><Column id=\"Incident_Date\" type=\"STRING\" size=\"256\"/><Column id=\"Incident_Place\" type=\"STRING\" size=\"256\"/><Column id=\"Incident_Victim\" type=\"STRING\" size=\"256\"/><Column id=\"Incident_Drafter\" type=\"STRING\" size=\"256\"/><Column id=\"Incident_ResultDay\" type=\"STRING\" size=\"256\"/></ColumnInfo><Rows><Row><Col id=\"SN\">1</Col><Col id=\"Incident_Date\">2016.08.21 12:06</Col><Col id=\"Incident_Place\">해상계류장 C-30 보조잔교</Col><Col id=\"Incident_Victim\"/><Col id=\"Incident_ResultDay\"/><Col id=\"Incident_Drafter\">안기영</Col></Row><Row><Col id=\"SN\">2</Col><Col id=\"Incident_Date\">2016.04.04 18:00</Col><Col id=\"Incident_Place\">수처리 기계실</Col><Col id=\"Incident_Victim\"/><Col id=\"Incident_Drafter\">이국재</Col><Col id=\"Incident_ResultDay\">2016.08.26</Col></Row><Row><Col id=\"SN\">3</Col><Col id=\"Incident_Date\">2014.02.24 14:20</Col><Col id=\"Incident_Place\">동탄보행자도로2경</Col><Col id=\"Incident_Victim\">김**(1977년생)</Col><Col id=\"Incident_Drafter\">이호진</Col><Col id=\"Incident_ResultDay\"/></Row></Rows>");this.addChild(_a.name,_a);_a=new Dataset("DS_FMS_ACTION_TABLE",this);_a._setContents("<ColumnInfo><Column id=\"Action_Section\" type=\"STRING\" size=\"256\"/><Column id=\"Action_Title\" type=\"STRING\" size=\"256\"/><Column id=\"Action_Plan\" type=\"STRING\" size=\"256\"/></ColumnInfo><Rows><Row><Col id=\"Action_Section\">소화설비</Col><Col id=\"Action_Title\">저수조 T/S 작동불량</Col><Col id=\"Action_Plan\">현장조치(교체) 완료</Col></Row><Row><Col id=\"Action_Section\">경보설비</Col><Col id=\"Action_Title\">정온식 감지기 작동불량</Col><Col id=\"Action_Plan\">현장조치 완료</Col></Row><Row><Col id=\"Action_Section\">피난설비</Col><Col id=\"Action_Title\">피난구 유도등 점등불량</Col><Col id=\"Action_Plan\">현장조치 완료</Col></Row></Rows>");this.addChild(_a.name,_a);_a=new Div("div_search","absolute","0","0",null,"33","28",null,this);_a.set_taborder("0");_a.set_cssclass("div_WFSA_Box");this.addChild(_a.name,_a);_a=new Grid("grd_ACNT_CODE","absolute","0","67",null,"717","396",null,this);_a.set_taborder("6");_a.set_binddataset("DS_FMS_INCIDENT_TABLE");_a.set_cellsizingtype("col");_a.set_autoenter("select");_a.set_treeinitstatus("expand,all");_a.set_treeusecheckbox("false");_a.set_treeuseexpandkey("true");_a.set_treeuseimage("false");_a.set_treeuseline("true");_a.set_autofittype("col");_a._setContents("<Formats><Format id=\"default\"><Columns><Column size=\"31\" band=\"left\"/><Column size=\"114\" band=\"left\"/><Column size=\"194\"/><Column size=\"125\"/><Column size=\"97\"/><Column size=\"110\"/></Columns><Rows><Row size=\"24\" band=\"head\"/><Row size=\"24\"/></Rows><Band id=\"head\"><Cell text=\"No\"/><Cell col=\"1\" text=\"일시\"/><Cell col=\"2\" text=\"장소\"/><Cell col=\"3\" text=\"인명피해\"/><Cell col=\"4\" text=\"등록자명\"/><Cell col=\"5\" text=\"조치결과작성일자\"/></Band><Band id=\"body\"><Cell edittype=\"none\" style=\"background2: ;\" text=\"bind:SN\" autosizerow=\"default\"/><Cell col=\"1\" displaytype=\"normal\" style=\"align: ;\" text=\"bind:Incident_Date\"/><Cell col=\"2\" displaytype=\"normal\" style=\"background2: ;\" text=\"bind:Incident_Place\" expandshow=\"hide\" treelevel=\"bind:ACNT_LEVEL\" calendardisplay=\"display\"/><Cell col=\"3\" style=\"background2: ;\" text=\"bind:Incident_Victim\"/><Cell col=\"4\" text=\"bind:Incident_Drafter\"/><Cell col=\"5\" text=\"bind:Incident_ResultDay\"/></Band></Format></Formats>");this.addChild(_a.name,_a);_a=new Static("sta_acntCode","absolute","0","43",null,"19","940",null,this);_a.set_taborder("3");_a.set_text("사고관리");_a.set_cssclass("sta_WF_Title02");this.addChild(_a.name,_a);_a=new Static("Static00","absolute","0","33",null,"10","28",null,this);_a.set_taborder("2");_a.set_text("10");_a.set_visible("false");_a.style.set_background("#dc143c3c");_a.style.set_align("center middle");this.addChild(_a.name,_a);_a=new Static("Static08","absolute","0","62",null,"5","28",null,this);_a.set_taborder("5");_a.set_text("5");_a.set_visible("false");_a.style.set_background("#dc143c3c");_a.style.set_align("center middle");this.addChild(_a.name,_a);_a=new Static("Static42","absolute","664","43","9","751",null,null,this);_a.set_taborder("4");_a.set_text("10");_a.set_visible("false");_a.style.set_background("#1b3cd23c");_a.style.set_align("center middle");this.addChild(_a.name,_a);_a=new Static("Static04","absolute","1031","0","15","794",null,null,this);_a.set_taborder("37");_a.set_text("15");_a.set_visible("false");_a.style.set_background("#1b3cd23c");_a.style.set_align("center middle");this.addChild(_a.name,_a);_a=new Static("Static05","absolute",null,"0","13","794","0",null,this);_a.set_taborder("38");_a.set_text("스\r\n크\r\n롤\r\n13");_a.set_visible("false");_a.style.set_background("#d07b173c");_a.style.set_align("center middle");this.addChild(_a.name,_a);_a=new Tab("tab","absolute","673","67",null,null,"31","-3",this);_a.set_taborder("41");_a.set_tabindex("0");_a.set_scrollbars("autoboth");_a.style.set_buttonpadding("8 20 8 20");_a.style.set_showextrabutton("false");this.addChild(_a.name,_a);_a=new Tabpage("tp1",this.tab);_a.set_text("사고등록");this.tab.addChild(_a.name,_a);_a=new Static("Static01","absolute","0","3","351","27",null,null,this.tab.tp1);_a.set_taborder("16");_a.set_cssclass("sta_WF_Labelbg");this.tab.tp1.addChild(_a.name,_a);_a=new Static("Static00","absolute","0","55","351","54",null,null,this.tab.tp1);_a.set_taborder("17");_a.set_cssclass("sta_WF_Labelbg");this.tab.tp1.addChild(_a.name,_a);_a=new Static("Static03","absolute","0","134","351","59",null,null,this.tab.tp1);_a.set_taborder("19");_a.set_cssclass("sta_WF_Labelbg");this.tab.tp1.addChild(_a.name,_a);_a=new Static("sta_BSNS_SE","absolute","0","3","120","27",null,null,this.tab.tp1);_a.set_taborder("0");_a.set_text("제목");_a.set_wordwrap("char");_a.set_cssclass("sta_WF_Label");this.tab.tp1.addChild(_a.name,_a);_a=new Static("sta_UPPER_ACNT_CODE","absolute","0","55","120","54",null,null,this.tab.tp1);_a.set_taborder("1");_a.set_text("장소");_a.set_wordwrap("char");_a.set_cssclass("sta_WF_Label");this.tab.tp1.addChild(_a.name,_a);_a=new Static("sta_ACNT_LEVEL","absolute","0","134","120","59",null,null,this.tab.tp1);_a.set_taborder("3");_a.set_text("사고내용");_a.set_wordwrap("char");_a.set_cssclass("sta_WF_Label");this.tab.tp1.addChild(_a.name,_a);_a=new Static("Static08","absolute","0","482","351","27",null,null,this.tab.tp1);_a.set_taborder("62");_a.set_cssclass("sta_WF_Labelbg");this.tab.tp1.addChild(_a.name,_a);_a=new Static("sta_ACNT_LEVEL01","absolute","0","482","120","27",null,null,this.tab.tp1);_a.set_taborder("65");_a.set_text("작성자명");_a.set_wordwrap("char");_a.set_cssclass("sta_WF_Label");this.tab.tp1.addChild(_a.name,_a);_a=new Static("Static09","absolute","0","508","351","27",null,null,this.tab.tp1);_a.set_taborder("67");_a.set_cssclass("sta_WF_Labelbg");this.tab.tp1.addChild(_a.name,_a);_a=new Static("sta_UPPER_ACNT_CODE01","absolute","0","508","120","27",null,null,this.tab.tp1);_a.set_taborder("69");_a.set_text("작성일자");_a.set_wordwrap("char");_a.set_cssclass("sta_WF_Label");this.tab.tp1.addChild(_a.name,_a);_a=new Edit("Edit00","absolute","127","5","216","21",null,null,this.tab.tp1);_a.set_taborder("129");_a.set_value("전곡항마리나 해상계류장 파일 전도");this.tab.tp1.addChild(_a.name,_a);_a=new Static("Static16","absolute","0","29","351","27",null,null,this.tab.tp1);_a.set_taborder("137");_a.set_cssclass("sta_WF_Labelbg");this.tab.tp1.addChild(_a.name,_a);_a=new Static("sta_BSNS_SE00","absolute","0","29","120","27",null,null,this.tab.tp1);_a.set_taborder("138");_a.set_text("일시");_a.set_wordwrap("char");_a.set_cssclass("sta_WF_Label");this.tab.tp1.addChild(_a.name,_a);_a=new Edit("Edit05","absolute","228","32","31","21",null,null,this.tab.tp1);_a.set_taborder("139");_a.set_value("12");this.tab.tp1.addChild(_a.name,_a);_a=new Grid("grd_cmmnAtchmnfl","absolute","0","559",null,"120","0",null,this.tab.tp1);_a.set_taborder("144");_a.set_binddataset("ds_fileList");_a.set_autoenter("select");_a.set_cellsizingtype("col");_a.set_autofittype("col");_a._setContents("<Formats><Format id=\"default\"><Columns><Column size=\"40\"/><Column size=\"108\"/><Column size=\"252\"/><Column size=\"80\"/><Column size=\"80\"/></Columns><Rows><Row size=\"24\" band=\"head\"/><Row size=\"40\"/></Rows><Band id=\"head\"><Cell displaytype=\"checkbox\" edittype=\"checkbox\"/><Cell col=\"1\" text=\"파일형식\"/><Cell col=\"2\" celltype=\"head\" text=\"파일명\"/><Cell col=\"3\" text=\"확장자\"/><Cell col=\"4\" text=\"사이즈\"/></Band><Band id=\"body\"><Cell displaytype=\"checkbox\" edittype=\"checkbox\" text=\"bind:CHK\"/><Cell col=\"1\" displaytype=\"image\" text=\"bind:FILE_IMAGE\" autosizerow=\"limitmin\" autosizecol=\"limitmin\"/><Cell col=\"2\" displaytype=\"normal\" style=\"align:left middle;\" text=\"bind:ORGINL_FILE_NM\"/><Cell col=\"3\" text=\"bind:FILE_EXTSN\"/><Cell col=\"4\" text=\"bind:FILE_MG\"/></Band></Format></Formats>");this.tab.tp1.addChild(_a.name,_a);_a=new Edit("edt_ofcpsNm04","absolute","127","485","146","21",null,null,this.tab.tp1);_a.set_taborder("145");_a.set_value("안기영");_a.set_readonly("true");_a.set_cssclass("edt_WF_Readonly");_a.style.setStyleValue("align","disabled","center middle");this.tab.tp1.addChild(_a.name,_a);_a=new Edit("edt_ofcpsNm00","absolute","127","511","146","21",null,null,this.tab.tp1);_a.set_taborder("146");_a.set_value("2016-09-01");_a.set_readonly("true");_a.set_cssclass("edt_WF_Readonly");_a.style.setStyleValue("align","disabled","center middle");this.tab.tp1.addChild(_a.name,_a);_a=new Button("btn_delFiles","absolute",null,"541","67","19","157",null,this.tab.tp1);_a.set_taborder("148");_a.set_text("선택삭제");_a.set_cssclass("btn_WF_Process");this.tab.tp1.addChild(_a.name,_a);_a=new Button("btn_uploadFiles","absolute",null,"541","68","19","85",null,this.tab.tp1);_a.set_taborder("149");_a.set_text("파일업로드");_a.set_cssclass("btn_WF_Process");this.tab.tp1.addChild(_a.name,_a);_a=new Button("btn_downFiles","absolute",null,"541","85","19","-3",null,this.tab.tp1);_a.set_taborder("150");_a.set_text("선택다운로드");_a.set_cssclass("btn_WF_Process");this.tab.tp1.addChild(_a.name,_a);_a=new Static("sta_title","absolute","3","541","120","19",null,null,this.tab.tp1);_a.set_taborder("151");_a.set_text("파일첨부");_a.set_cssclass("sta_WF_Title03");this.tab.tp1.addChild(_a.name,_a);_a=new Calendar("Calendar01","absolute","127","32","97","21",null,null,this.tab.tp1);this.tab.tp1.addChild(_a.name,_a);_a.set_taborder("153");_a.set_value("20160821");_a.set_dateformat("yyyy-MM-dd");_a=new Static("Static10","absolute","259","31","11","21",null,null,this.tab.tp1);_a.set_taborder("154");_a.set_text(":");this.tab.tp1.addChild(_a.name,_a);_a=new Edit("Edit09","absolute","266","32","31","21",null,null,this.tab.tp1);_a.set_taborder("155");_a.set_value("06");this.tab.tp1.addChild(_a.name,_a);_a=new Edit("Edit10","absolute","127","58","216","21",null,null,this.tab.tp1);_a.set_taborder("156");_a.set_value("해상계류장 C-30 보조잔교");this.tab.tp1.addChild(_a.name,_a);_a=new Edit("Edit11","absolute","127","85","216","21",null,null,this.tab.tp1);_a.set_taborder("157");this.tab.tp1.addChild(_a.name,_a);_a=new TextArea("TextArea00","absolute","127","137","215","52",null,null,this.tab.tp1);_a.set_taborder("158");_a.set_value("청루1호(한만홍) 물이 새고,\r\n출입문, 라이프라인, 윈치 파손");this.tab.tp1.addChild(_a.name,_a);_a=new Static("Static02","absolute","0","192","351","59",null,null,this.tab.tp1);_a.set_taborder("159");_a.set_cssclass("sta_WF_Labelbg");this.tab.tp1.addChild(_a.name,_a);_a=new Static("sta_ACNT_LEVEL02","absolute","0","192","120","59",null,null,this.tab.tp1);_a.set_taborder("160");_a.set_text("인명피해내용");_a.set_wordwrap("char");_a.set_cssclass("sta_WF_Label");this.tab.tp1.addChild(_a.name,_a);_a=new TextArea("TextArea01","absolute","127","195","215","52",null,null,this.tab.tp1);_a.set_taborder("161");this.tab.tp1.addChild(_a.name,_a);_a=new Static("Static04","absolute","0","108","351","27",null,null,this.tab.tp1);_a.set_taborder("162");_a.set_cssclass("sta_WF_Labelbg");this.tab.tp1.addChild(_a.name,_a);_a=new Static("sta_BSNS_SE01","absolute","0","108","120","27",null,null,this.tab.tp1);_a.set_taborder("163");_a.set_text("인명피해");_a.set_wordwrap("char");_a.set_cssclass("sta_WF_Label");this.tab.tp1.addChild(_a.name,_a);_a=new Edit("Edit01","absolute","127","110","216","21",null,null,this.tab.tp1);_a.set_taborder("164");this.tab.tp1.addChild(_a.name,_a);_a=new Static("Static05","absolute","0","250","351","59",null,null,this.tab.tp1);_a.set_taborder("165");_a.set_cssclass("sta_WF_Labelbg");this.tab.tp1.addChild(_a.name,_a);_a=new Static("sta_ACNT_LEVEL03","absolute","0","250","120","59",null,null,this.tab.tp1);_a.set_taborder("166");_a.set_text("현장조치");_a.set_wordwrap("char");_a.set_cssclass("sta_WF_Label");this.tab.tp1.addChild(_a.name,_a);_a=new TextArea("TextArea02","absolute","127","253","215","52",null,null,this.tab.tp1);_a.set_taborder("167");this.tab.tp1.addChild(_a.name,_a);_a=new Static("Static06","absolute","0","308","351","59",null,null,this.tab.tp1);_a.set_taborder("168");_a.set_cssclass("sta_WF_Labelbg");this.tab.tp1.addChild(_a.name,_a);_a=new Static("sta_ACNT_LEVEL00","absolute","0","308","120","59",null,null,this.tab.tp1);_a.set_taborder("169");_a.set_text("피해자요구사항");_a.set_wordwrap("char");_a.set_cssclass("sta_WF_Label");this.tab.tp1.addChild(_a.name,_a);_a=new TextArea("TextArea03","absolute","127","311","215","52",null,null,this.tab.tp1);_a.set_taborder("170");this.tab.tp1.addChild(_a.name,_a);_a=new Static("Static07","absolute","0","366","351","59",null,null,this.tab.tp1);_a.set_taborder("171");_a.set_cssclass("sta_WF_Labelbg");this.tab.tp1.addChild(_a.name,_a);_a=new Static("sta_ACNT_LEVEL04","absolute","0","366","120","59",null,null,this.tab.tp1);_a.set_taborder("172");_a.set_text("조치내용");_a.set_wordwrap("char");_a.set_cssclass("sta_WF_Label");this.tab.tp1.addChild(_a.name,_a);_a=new TextArea("TextArea04","absolute","127","369","215","52",null,null,this.tab.tp1);_a.set_taborder("173");_a.set_value("- 당일 12:06분 : 신고전화 접수\r\n- 당일 12:06분 : 현장출동\r\n- 당일 12:06~12:40분 : 2차피해 방지를 위해서 C-30, C-31 계류 선박 2대 및 고무보트 이동 조치");this.tab.tp1.addChild(_a.name,_a);_a=new Static("Static11","absolute","0","424","351","59",null,null,this.tab.tp1);_a.set_taborder("174");_a.set_cssclass("sta_WF_Labelbg");this.tab.tp1.addChild(_a.name,_a);_a=new Static("sta_ACNT_LEVEL05","absolute","0","424","120","59",null,null,this.tab.tp1);_a.set_taborder("175");_a.set_text("향후계획");_a.set_wordwrap("char");_a.set_cssclass("sta_WF_Label");this.tab.tp1.addChild(_a.name,_a);_a=new TextArea("TextArea05","absolute","127","427","215","52",null,null,this.tab.tp1);_a.set_taborder("176");_a.set_value("파일 전도 원인 파악 및 보수공사 우선 추진(시 예산사업)\r\n - 공사금액 : 약 7,000만원\r\n - 공사기간 : 08.29~09.03 예정");this.tab.tp1.addChild(_a.name,_a);_a=new Tabpage("tabpage2",this.tab);_a.set_text("조치결과");this.tab.addChild(_a.name,_a);_a=new Static("Static01","absolute","0","784",null,"10","28",null,this);_a.set_taborder("42");_a.set_text("10");_a.set_visible("false");_a.style.set_background("#dc143c3c");_a.style.set_align("center middle");this.addChild(_a.name,_a);_a=new Edit("edt_ASSETS_CL_CODE00","absolute","341","5","110","21",null,null,this);_a.set_taborder("43");this.addChild(_a.name,_a);_a=new Static("Static02","absolute","285","5","137","21",null,null,this);_a.set_taborder("44");_a.set_text("검색어");_a.set_cssclass("sta_WFSA_Label");this.addChild(_a.name,_a);_a=new Static("Static03","absolute","26.06%","-1",null,"33","72.52%",null,this);_a.set_taborder("45");_a.set_text("15");_a.set_visible("false");_a.style.set_background("#00ffff66");this.addChild(_a.name,_a);_a=new CheckBox("chk_return","absolute","216","7","54","21",null,null,this);_a.set_taborder("46");_a.set_text("전체");_a.set_value("0");_a.set_truevalue("1");_a.set_falsevalue("0");this.addChild(_a.name,_a);_a=new Static("Static06","absolute","19.45%","0",null,"33","79.13%",null,this);_a.set_taborder("47");_a.set_text("15");_a.set_visible("false");_a.style.set_background("#00ffff66");this.addChild(_a.name,_a);_a=new Spin("Spin00","absolute","80","6","119","21",null,null,this);_a.set_taborder("48");_a.set_value("0");_a.set_displaynulltext("2017");_a.set_max("2999");_a.set_min("2010");this.addChild(_a.name,_a);_a=new Static("sta_acqsDe","absolute","15","5","64","21",null,null,this);_a.set_taborder("49");_a.set_text("기준년도");_a.set_cssclass("sta_WFSA_Label");this.addChild(_a.name,_a);_a=new Static("Static07","absolute","0","0","15","33",null,null,this);_a.set_taborder("50");_a.set_text("15");_a.set_visible("false");_a.style.set_background("#00ffff66");this.addChild(_a.name,_a);_a=new Layout("default","",0,33,this.div_search,function(_b){_b.set_taborder("0");_b.set_cssclass("div_WFSA_Box");});this.div_search.addLayout(_a.name,_a);_a=new Layout("default","",1031,351,this.tab.tp1,function(_b){_b.set_text("사고등록");});this.tab.tp1.addLayout(_a.name,_a);_a=new Layout("default","",0,0,this.tab.tabpage2,function(_b){_b.set_text("조치결과");});this.tab.tabpage2.addLayout(_a.name,_a);_a=new Layout("default","",1059,794,this,function(_b){_b.set_classname("form");_b.set_titletext("사고이력관리");});this.addLayout(_a.name,_a);_a=new BindItem("item2","tab.tp1.edt_ofcpsNm04","value","ds_bodMaster","BOD_MANAGE_NO");this.addChild(_a.name,_a);_a.bind();_a=new BindItem("item0","tab.tp1.edt_ofcpsNm00","value","ds_bodMaster","BOD_MANAGE_NO");this.addChild(_a.name,_a);_a.bind();_a=new BindItem("item6","edt_ASSETS_CL_CODE00","value","ds_cond","ASSETS_CL_CODE");this.addChild(_a.name,_a);_a.bind();_a=new BindItem("item7","chk_return","value","ds_cond","RETURN");this.addChild(_a.name,_a);_a.bind();_a=null;};this.addIncludeScript("FMS020203.xfdl","lib::comInclude.xjs");this.addIncludeScript("FMS020203.xfdl","mis_lib::misUtil.xjs");this.registerScript("FMS020203.xfdl",function(){this.checkDs=[this.ds_acntCode,this.ds_atmcJrnlzTy];var _a= -1;this.fv_cX;this.fv_cY;this.BDG010102_oninit=function(_b,_c){this.fn_init_form();this.fn_init_dataset();};this.BDG010102_onload=function(_b,_c){};this.fn_init_form=function(){this.gfn_initForm(this);this.fn_misFormInit(this);this.ds_cond.clearData();var _b=this.ds_cond.addRow();this.ds_cond.setColumn(_b,"YEAR",this.comUtils.getClientDate("YYYY"));var _c=[["ds_bdg001","BDG001","Y","D","B"],["ds_bdg002","BDG002","Y","D","B"],["ds_bdg005","BDG005","Y","D","B"]];var _d=function(_e,_f,_g){this.ds_cond.setColumn(_b,"BSNS_SE","1");this.ds_cond.setColumn(_b,"BALC_SE","2");this.fn_search();};this.gfn_comboLoad(_c,_d);};this.fn_init_dataset=function(){};this.fn_search=function(){if(!this.gfn_checkValidation_NoUpdChk(this.ds_cond,this.ds_validation)){return;}this.ds_acntCode.clearData();this.fn_transaction("selectBudgetAcntCode");};this.fn_search_sub=function(){this.ds_atmcJrnlzTy.clearData();if(this.ds_acntCode.getRowCount()>0){this.fn_transaction("selectAtmcJrnlzTy");}};this.fn_save=function(){if(!this.comUtils.isDatasetUpdated(this.ds_acntCode)&&!this.comUtils.isDatasetUpdated(this.ds_atmcJrnlzTy)){this.gfn_message("comm.데이터.변경.없음");return false;}if(!this.gfn_checkValidation_NoUpdChk(this.ds_acntCode,this.ds_validation)){return;}var _b=0;var _c=0;var _d=0;var _e=0;var _f="";for(var _i=0;_i<this.ds_atmcJrnlzTy.rowcount;_i++ ){(null==this.ds_atmcJrnlzTy.getColumn(_i,"GNRL_DEBTOR_ACNT_CODE"))?_b=0:_b=this.ds_atmcJrnlzTy.getColumn(_i,"GNRL_DEBTOR_ACNT_CODE").length;(null==this.ds_atmcJrnlzTy.getColumn(_i,"GNRL_CRDIT_ACNT_CODE"))?_c=0:_c=this.ds_atmcJrnlzTy.getColumn(_i,"GNRL_CRDIT_ACNT_CODE").length;(null==this.ds_atmcJrnlzTy.getColumn(_i,"SETOFF_DEBTOR_ACNT_CODE"))?_d=0:_d=this.ds_atmcJrnlzTy.getColumn(_i,"SETOFF_DEBTOR_ACNT_CODE").length;(null==this.ds_atmcJrnlzTy.getColumn(_i,"SETOFF_CRDIT_ACNT_CODE"))?_e=0:_e=this.ds_atmcJrnlzTy.getColumn(_i,"SETOFF_CRDIT_ACNT_CODE").length;trace("상 차 : "+_b);trace("상 대 : "+_c);trace("하 차 : "+_d);trace("하 대 : "+_e);trace("=======================");if(_b!=_c){(_b>_c)?_f="[일반대변]회계계정코드":_f="[일반차변]회계계정코드";this.gfn_message("comm.항목.입력.을",_f);return;}if(_d!=_e){(_d>_e)?_f="[상계대변]회계계정코드":_f="[상계차변]회계계정코드";this.gfn_message("comm.항목.입력.을",_f);return;}}for(var _j=0;_j<this.ds_acntCode.getRowCount();_j++ ){var _g=this.ds_acntCode.getColumn(_j,"BUDGET_ACNT_CODE");var _h=this.ds_acntCode.getColumn(_j,"BUDGET_ACNT_NM");if(this.ds_acntCode.getRowType(_j)!=Dataset.ROWTYPE_NORMAL){if(_g.indexOf(" ")> -1){this.gfn_message("errors.항목.타입.숫자형","예산계정코드");return false;}}}if(this.gfn_message("confirm.저장.여부")){_a=this.ds_acntCode.rowposition;this.fn_transaction("saveBudgetAcntCode");}};this.fn_transaction=function(_b){switch(_b){case "selectBudgetAcntCode":var _c="/hsco/mis/bdg/BDG010102/selectBudgetAcntCode.do";var _d="input1=ds_cond";var _e="ds_acntCode=output1";break;case "selectAtmcJrnlzTy":var _f=this.ds_acntCode.rowposition;var _g=this.ds_acntCode.getColumn(_f,"YEAR");var _h=this.ds_acntCode.getColumn(_f,"BSNS_SE");var _i=this.ds_acntCode.getColumn(_f,"BALC_SE");var _j=this.ds_acntCode.getColumn(_f,"BUDGET_ACNT_CODE");this.ds_condSub.clearData();var _k=this.ds_condSub.addRow();this.ds_condSub.setColumn(_k,"YEAR",_g);this.ds_condSub.setColumn(_k,"BSNS_SE",_h);this.ds_condSub.setColumn(_k,"BALC_SE",_i);this.ds_condSub.setColumn(_k,"BUDGET_ACNT_CODE",_j);var _c="/hsco/mis/bdg/BDG010102/selectAtmcJrnlzTy.do";var _d="input1=ds_condSub";var _e="ds_atmcJrnlzTy=output1";break;case "saveBudgetAcntCode":var _c="hsco/mis/bdg/BDG010102/saveBudgetAcntCode.do";var _d="input1=ds_acntCode:U input2=ds_atmcJrnlzTy:U";var _e="";break;case "saveCopyPrvYear":var _c="hsco/mis/bdg/BDG010102/saveCopyPrvYear.do";var _d="input1=ds_cond";var _e="";break;case "saveCopyPrvYearJrnlzTy":var _c="hsco/mis/bdg/BDG010102/saveCopyPrvYearJrnlzTy.do";var _d="input1=ds_cond";var _e="";break;case "selectUseAcntCnt":var _f=this.ds_acntCode.rowposition;var _g=this.ds_acntCode.getColumn(_f,"YEAR");var _h=this.ds_acntCode.getColumn(_f,"BSNS_SE");var _i=this.ds_acntCode.getColumn(_f,"BALC_SE");var _j=this.ds_acntCode.getColumn(_f,"BUDGET_ACNT_CODE");this.ds_condSub.clearData();var _k=this.ds_condSub.addRow();this.ds_condSub.setColumn(_k,"YEAR",_g);this.ds_condSub.setColumn(_k,"BSNS_SE",_h);this.ds_condSub.setColumn(_k,"BALC_SE",_i);this.ds_condSub.setColumn(_k,"BUDGET_ACNT_CODE",_j);var _c="/hsco/mis/bdg/BDG010102/selectUseAcntCnt.do";var _d="input1=ds_condSub";var _e="ds_useAcntCnt=output1";break;case "selectUseYearCnt":var _f=this.ds_acntCode.rowposition;var _g=this.ds_acntCode.getColumn(_f,"YEAR");this.ds_condSub.clearData();var _k=this.ds_condSub.addRow();this.ds_condSub.setColumn(_k,"YEAR",_g);var _c="/hsco/mis/bdg/BDG010102/selectUseYearCnt.do";var _d="input1=ds_condSub";var _e="ds_useAcntCnt=output1";break;}Ex.core.tran(this,_b,_c,_d,_e);};this.fn_callBack=function(_b,_c,_d){if(_c!='0'){this.gfn_callback_message(_b,_c,_d);}if(_c=='0'){switch(_b){case "selectBudgetAcntCode":this.ds_uppAcntCode.clearData();this.ds_uppAcntCode.set_enableevent(false);for(var _k=0;_k<this.ds_acntCode.getRowCount();_k++ ){var _e=this.ds_acntCode.getColumn(_k,"BUDGET_ACNT_CODE");var _f=this.ds_acntCode.getColumn(_k,"BUDGET_ACNT_NM");var _g=this.ds_acntCode.getColumn(_k,"BUDGET_ACNT_CODE_NM");var _h=this.ds_uppAcntCode.addRow();this.ds_uppAcntCode.setColumn(_h,"BUDGET_ACNT_CODE",_e);this.ds_uppAcntCode.setColumn(_h,"BUDGET_ACNT_NM",_f);this.ds_uppAcntCode.setColumn(_h,"BUDGET_ACNT_CODE_NM",_g);}this.ds_uppAcntCode.set_enableevent(true);if(_a> -1){this.ds_acntCode.set_rowposition(_a);_a= -1;}break;case "saveBudgetAcntCode":this.fn_search();break;case "saveCopyPrvYear":this.fn_search();break;case "selectUseAcntCnt":var _i=this.ds_useAcntCnt.getColumn(0,"RTN_MSG");var _j=nexacro.toNumber(this.ds_useAcntCnt.getColumn(0,"TOT_CNT"));if(_j>0){alert("현 계정을 사용하는 <"+_i+">를 삭제하신 후에 삭제 진행 가능합니다.");return false;}if(!this.gfn_message("confirm.삭제여부")){return false;}this.ds_acntCode.deleteRow(this.ds_acntCode.rowposition);break;case "selectUseYearCnt":var _i=this.ds_useAcntCnt.getColumn(0,"RTN_MSG");var _j=nexacro.toNumber(this.ds_useAcntCnt.getColumn(0,"TOT_CNT"));if(_j>0){alert("현 계정을 사용하는 <"+_i+">를 삭제하신 후에 전년도복사 진행 가능합니다.");return false;}if(this.gfn_message("confirm.복사.여부","(자동저장) 전년 예산계정|당해 예산계정으")){this.fn_transaction("saveCopyPrvYear");}break;case "saveCopyPrvYearJrnlzTy":alert("전년도 자동분개유형이 복사 되었습니다.");break;}}};this.fn_popupCallBack=function(_b,_c){if(_b=="GNRL_DEBTOR_ACNT_CODE"||_b=="GNRL_CRDIT_ACNT_CODE"||_b=="SETOFF_DEBTOR_ACNT_CODE"||_b=="SETOFF_CRDIT_ACNT_CODE"){var _d=new Dataset();nRowCnt=_d.loadXML(_c);if(nRowCnt){var _e=_d.getColumn(0,"ACCNUT_ACNT_CODE");var _f=_d.getColumn(0,"ACCNUT_ACNT_NM");var _g=this.ds_atmcJrnlzTy.rowposition;switch(_b){case "GNRL_DEBTOR_ACNT_CODE":this.ds_atmcJrnlzTy.setColumn(_g,"GNRL_DEBTOR_ACNT_CODE",_e);this.ds_atmcJrnlzTy.setColumn(_g,"GNRL_DEBTOR_ACNT_NM",_f);break;case "GNRL_CRDIT_ACNT_CODE":this.ds_atmcJrnlzTy.setColumn(_g,"GNRL_CRDIT_ACNT_CODE",_e);this.ds_atmcJrnlzTy.setColumn(_g,"GNRL_CRDIT_ACNT_NM",_f);break;case "SETOFF_DEBTOR_ACNT_CODE":this.ds_atmcJrnlzTy.setColumn(_g,"SETOFF_DEBTOR_ACNT_CODE",_e);this.ds_atmcJrnlzTy.setColumn(_g,"SETOFF_DEBTOR_ACNT_NM",_f);break;case "SETOFF_CRDIT_ACNT_CODE":this.ds_atmcJrnlzTy.setColumn(_g,"SETOFF_CRDIT_ACNT_CODE",_e);this.ds_atmcJrnlzTy.setColumn(_g,"SETOFF_CRDIT_ACNT_NM",_f);break;default:break;}}}};this.ds_cond_oncolumnchanged=function(_b,_c){if(_c.columnid=="BUDGET_ACNT_CODE"){if(!this.comUtils.isNull(_c.newvalue)){var _d=this.ds_acntCode.findRow(_c.columnid,_c.newvalue);if(_d> -1){this.ds_acntCode.set_rowposition(_d);}}}};this.ds_acntCode_canrowposchange=function(_b,_c){if(Ex.util.isUpdated(this.ds_atmcJrnlzTy)){if(!this.gfn_message("confirm.변경.취소.여부")){return false;}}};this.ds_acntCode_onrowposchanged=function(_b,_c){this.div_pop.set_visible(false);if(_b.getRowType(_c.newrow)==Dataset.ROWTYPE_INSERT){this.msk_BUDGET_ACNT_CODE.set_readonly(false);this.msk_BUDGET_ACNT_CODE.style.set_cursor("text");}else{this.msk_BUDGET_ACNT_CODE.set_readonly(true);this.msk_BUDGET_ACNT_CODE.style.set_cursor("default");}this.ds_cond.set_enableevent(false);var _d=this.ds_acntCode.rowposition;var _e=this.ds_acntCode.getColumn(_d,"BUDGET_ACNT_CODE");this.ds_cond.setColumn(0,"BUDGET_ACNT_CODE",_e);this.ds_cond.set_enableevent(true);this.btn_Add.set_enable(false);this.btn_Delete.set_enable(false);this.btn_Cancel.set_enable(false);var _f=_b.getColumn(_c.newrow,"YEAR");var _g=_b.getColumn(_c.newrow,"ACNT_LEVEL");if((_f>='2016'&&_g==5)||(_f<'2016'&&_g==4)){this.btn_Add.set_enable(true);this.btn_Delete.set_enable(true);this.btn_Cancel.set_enable(true);}this.fn_search_sub();};this.ds_acntCode_cancolumnchange=function(_b,_c){if(_c.columnid=="ELPD_EXCUT_AT"){if(_c.newvalue!="1"){this.ds_acntCode.setColumn(_c.row,"ELPD_EXCUT_RT","");}}if(_c.columnid=="ELPD_EXCUT_RT"){if(_c.newvalue>100){this.gfn_message("errors.항목.입력값.이하","조기집행율|100%");return false;}}if(_c.columnid=="BUDGET_ACNT_CODE"){var _d=_b.findRowExpr("BUDGET_ACNT_CODE=='"+_c.newvalue+"'",0,_c.row);var _e=_b.findRowExpr("BUDGET_ACNT_CODE=='"+_c.newvalue+"'",_c.row+1,_b.rowcount);if(_d> -1||_e> -1){this.gfn_message("info.항목.중복","예산계정코드");_b.set_updatecontrol(false);_b.setColumn(_c.row,_c.columnid,_c.oldvalue);_b.set_updatecontrol(true);return false;}}};this.ds_acntCode_oncolumnchanged=function(_b,_c){if(_c.columnid=="BUDGET_ACNT_CODE"){if(!this.comUtils.isNull(_c.newvalue)){if(_c.newvalue.indexOf(" ")> -1){this.gfn_message("errors.항목.타입.숫자형","예산계정코드");_b.setColumn(_c.row,_c.columnid,_c.oldvalue);}}}};this.btn_copy_onclick=function(_b,_c){this.fn_transaction("selectUseYearCnt");};this.btn_copyAtmcJrnlzTy_onclick=function(_b,_c){if(this.gfn_message("confirm.복사.여부","(자동저장) 전년 자동분개유형|당해 자동분개유형")){this.fn_transaction("saveCopyPrvYearJrnlzTy");}};this.btn_Add_onclick=function(_b,_c){var _d=this.ds_acntCode.rowposition;var _e=this.ds_acntCode.getColumn(_d,"YEAR");var _f=this.ds_acntCode.getColumn(_d,"BSNS_SE");var _g=this.ds_acntCode.getColumn(_d,"BALC_SE");var _h=this.ds_acntCode.getColumn(_d,"BUDGET_ACNT_CODE");var _i=this.ds_atmcJrnlzTy.addRow();this.ds_atmcJrnlzTy.setColumn(_i,"BUDGET_YEAR",_e);this.ds_atmcJrnlzTy.setColumn(_i,"BSNS_SE",_f);this.ds_atmcJrnlzTy.setColumn(_i,"BALC_SE",_g);this.ds_atmcJrnlzTy.setColumn(_i,"BUDGET_ACNT_CODE",_h);};this.btn_Delete_onclick=function(_b,_c){if(!this.gfn_message("confirm.삭제여부")){return false;}this.ds_atmcJrnlzTy.deleteRow(this.ds_atmcJrnlzTy.rowposition);};this.btn_Cancel_onclick=function(_b,_c){if(Ex.util.isUpdated(this.ds_atmcJrnlzTy)){if(!this.gfn_message("confirm.변경.취소.여부")){return false;}}this.ds_atmcJrnlzTy.reset();};this.grd_atmcJrnlzTy_onexpandup=function(_b,_c){var _d="";switch(_c.cell){case 3:_d="GNRL_DEBTOR_ACNT_CODE";break;case 6:_d="GNRL_CRDIT_ACNT_CODE";break;case 10:_d="SETOFF_DEBTOR_ACNT_CODE";break;case 13:_d="SETOFF_CRDIT_ACNT_CODE";break;default:break;}if(_d!=""){var _e=this.ds_cond.getColumn(0,"YEAR");var _f=system.clientToScreenX(this,0);var _g=system.clientToScreenY(this,0);var _h=new ChildFrame;_h.init(_d,"absolute",_f,_g,465,510,null,null,"mis_acc::ACC010103_P01.xfdl");_h.set_openalign("center middle");_h.set_dragmovetype("all");_h.showModal(this.getOwnerFrame(),{year:_e},this,"fn_popupCallBack");}};this.fn_insert=function(){var _b=this.ds_cond.getColumn(0,"YEAR");var _c=this.ds_cond.getColumn(0,"BSNS_SE");var _d=this.ds_cond.getColumn(0,"BALC_SE");var _e=this.ds_acntCode.rowposition;var _f=this.ds_acntCode.getColumn(_e,"YEAR");var _g=this.ds_acntCode.getColumn(_e,"BSNS_SE");var _h=this.ds_acntCode.getColumn(_e,"BALC_SE");var _i=this.ds_acntCode.getColumn(_e,"BUDGET_ACNT_CODE");var _j=nexacro.toNumber(this.ds_acntCode.getColumn(_e,"ACNT_LEVEL"),0);var _k=_j>=1?this.ds_acntCode.getColumn(_e,"GWAN"):'';var _l=_j>=2?this.ds_acntCode.getColumn(_e,"HANG"):'';var _m=_j>=3?this.ds_acntCode.getColumn(_e,"SEHANG"):'';var _n=this.comUtils.isNull(_i)?null:_i.substr(0,3);_f=this.comUtils.isNull(_f)?_b:_f;_g=this.comUtils.isNull(_g)?_c:_g;_h=this.comUtils.isNull(_h)?_d:_h;if(_j+1>(_f>=2016?5:4)){this.gfn_message("info.항목.사용불가","동작("+(_f>=2016?"세목":"목")+"의 하위레벨은 추가할 수 없습니다)");return false;}var _o=this.ds_acntCode.getRowCount();for(var _s=_e+1;_s<this.ds_acntCode.getRowCount();_s++ ){var _p=nexacro.toNumber(this.ds_acntCode.getColumn(_s,"ACNT_LEVEL"));var _q=nexacro.toNumber(this.ds_acntCode.getColumn(_s,"BUDGET_ACNT_NM"));if(_p<=_j){_o=_s;break;}}var _r=this.ds_acntCode.insertRow(_o);this.ds_acntCode.setColumn(_r,"YEAR",_f);this.ds_acntCode.setColumn(_r,"BSNS_SE",_g);this.ds_acntCode.setColumn(_r,"BALC_SE",_h);this.ds_acntCode.setColumn(_r,"UPPER_ACNT_CODE",_i);this.ds_acntCode.setColumn(_r,"BUDGET_ACNT_CODE",_n);this.ds_acntCode.setColumn(_r,"ACNT_LEVEL",_j+1);this.ds_acntCode.setColumn(_r,"GWAN",_k);this.ds_acntCode.setColumn(_r,"HANG",_l);this.ds_acntCode.setColumn(_r,"SEHANG",_m);};this.fn_delete=function(){var _b=this.ds_acntCode.rowposition;var _c=this.ds_acntCode.getColumn(_b,"ACNT_LEVEL");var _d=this.ds_acntCode.getColumn(_b+1,"ACNT_LEVEL");if(_c<_d){this.gfn_message("fail.삭제.불가","하위계정이 존재하는 예산계정과목은");return false;}this.fn_transaction("selectUseAcntCnt");};this.fn_cancel=function(){if(Ex.util.isUpdated(this.ds_acntCode)){if(!this.gfn_message("confirm.변경.취소.여부")){return false;}this.ds_acntCode.reset();}};this.div_pop_grd_ACNT_CODE_oncelldblclick=function(_b,_c){var _d=this.ds_acntCode.rowposition;var _e=nexacro.toNumber(this.ds_acntCode.getColumn(_d,"ACNT_LEVEL"),0);var _f=this.ds_acntCodePop.rowposition;var _g=this.ds_acntCodePop.getColumn(_f,"YEAR");var _h=this.ds_acntCodePop.getColumn(_f,"BUDGET_ACNT_CODE");var _i=nexacro.toNumber(this.ds_acntCodePop.getColumn(_f,"ACNT_LEVEL"),0);if(_i+1>(_g>=2016?5:4)){alert((_g>=2016?"세목":"목")+"은 상위레벨이 될 수 없습니다.)");return false;}if(_i!=_e-1){alert("현재의 상위계정과 동일한 레벨의 계정을 선택하여 주시기 바랍니다.");return false;}this.div_pop.set_visible(false);this.ds_acntCode.setColumn(_d,"UPPER_ACNT_CODE",_h);};this.btn_pop_onclick=function(_b,_c){this.ds_acntCodePop.clearData();this.ds_acntCodePop.copyData(this.ds_acntCode);this.div_pop.set_top(50);this.div_pop.set_visible(true);};this.div_pop_sta_title_onlbuttondown=function(_b,_c){this.fv_cX=_c.screenX;this.fv_cY=_c.screenY;};this.div_pop_sta_title_onmousemove=function(_b,_c){if(_c.button=="none"){return;}var _d=_c.screenX;var _e=_c.screenY;this.div_pop.set_left(parseInt(this.div_pop.left)-(this.fv_cX-_d));this.div_pop.set_top(parseInt(this.div_pop.top)-(this.fv_cY-_e));this.fv_cX=_c.screenX;this.fv_cY=_c.screenY;};this.div_pop_btn_destroy_onclick=function(_b,_c){this.div_pop.set_visible(false);};this.tab_tp1_Static00_onclick=function(_b,_c){};this.tab_tp1_sta_BUDGET_ACNT_CODE_onclick=function(_b,_c){};this.tab_tp1_sta_BSNS_SE_onclick=function(_b,_c){};this.tab_tp1_rad_ACNT_LEVEL_onitemclick=function(_b,_c){};this.tab_tp1_msk_YEAR_oneditclick=function(_b,_c){};this.tab_tp1_msk_BUDGET_ACNT_CODE_oneditclick=function(_b,_c){};this.tab_tp1_Edit02_oneditclick=function(_b,_c){};this.tab_tp1_sta_title_onclick=function(_b,_c){};});this.on_initEvent=function(){this.addEventHandler("onload",this.BDG010102_onload,this);this.addEventHandler("oninit",this.BDG010102_oninit,this);this.tab.tp1.Static00.addEventHandler("onclick",this.tab_tp1_Static00_onclick,this);this.tab.tp1.sta_BSNS_SE.addEventHandler("onclick",this.tab_tp1_sta_BSNS_SE_onclick,this);this.tab.tp1.Static09.addEventHandler("onclick",this.tab_tp1_Static00_onclick,this);this.tab.tp1.sta_BSNS_SE00.addEventHandler("onclick",this.tab_tp1_sta_BSNS_SE_onclick,this);this.tab.tp1.grd_cmmnAtchmnfl.addEventHandler("onheadclick",this.grd_cmmnAtchmnfl_onheadclick,this);this.tab.tp1.btn_delFiles.addEventHandler("onclick",this.btn_delFiles_onclick,this);this.tab.tp1.btn_uploadFiles.addEventHandler("onclick",this.btn_uploadFiles_onclick,this);this.tab.tp1.btn_downFiles.addEventHandler("onclick",this.btn_downFiles_onclick,this);this.tab.tp1.sta_title.addEventHandler("onclick",this.tab_tp1_sta_title_onclick,this);this.tab.tp1.sta_BSNS_SE01.addEventHandler("onclick",this.tab_tp1_sta_BSNS_SE_onclick,this);this.Static02.addEventHandler("onclick",this.div_search_Static01_onclick,this);};this.loadIncludeScript("FMS020203.xfdl");};})();