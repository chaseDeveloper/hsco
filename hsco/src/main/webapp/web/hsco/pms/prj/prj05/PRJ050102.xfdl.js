(function(){return function(){if(!this._is_form){return;}this.on_create=function(){var _a=null;if(Form==this.constructor){this.set_name("PRJ050102");this.set_classname("PRJ050102");this.set_titletext("PRJ050102_시공단계업무추진관리");this._setFormPosition(0,0,1059,735);}_a=new Dataset("ds_job",this);_a.set_useclientlayout("1");_a._setContents("<ColumnInfo><Column id=\"BSNS_CODE\" type=\"STRING\" size=\"5\"/><Column id=\"BSNS_STEP\" type=\"STRING\" size=\"3\"/><Column id=\"JOB_CODE\" type=\"STRING\" size=\"6\"/><Column id=\"CL_SE\" type=\"STRING\" size=\"3\"/><Column id=\"LCLAS_NM\" type=\"STRING\" size=\"100\"/><Column id=\"MLSFC_NM\" type=\"STRING\" size=\"100\"/><Column id=\"SCLAS_NM\" type=\"STRING\" size=\"100\"/><Column id=\"DEPT_CODE\" type=\"STRING\" size=\"6\"/><Column id=\"JOB_SE\" type=\"STRING\" size=\"3\"/><Column id=\"RM\" type=\"STRING\" size=\"200\"/></ColumnInfo>");this.addChild(_a.name,_a);_a=new Dataset("ds_1",this);_a.set_useclientlayout("1");_a._setContents("<ColumnInfo><Column id=\"BSNS_CODE\" type=\"STRING\" size=\"5\"/><Column id=\"BSNS_STEP\" type=\"STRING\" size=\"3\"/><Column id=\"SN\" type=\"BIGDECIMAL\" size=\"11\"/><Column id=\"PRTN_DTLS\" type=\"STRING\" size=\"200\"/><Column id=\"BGNDE_PLAN\" type=\"STRING\" size=\"8\"/><Column id=\"COMPT_DE_PLAN\" type=\"STRING\" size=\"8\"/><Column id=\"BGNDE_ACMSLT\" type=\"STRING\" size=\"8\"/><Column id=\"COMPT_DE_ACMSLT\" type=\"STRING\" size=\"8\"/><Column id=\"DELAY_PRVONSH\" type=\"STRING\" size=\"4000\"/><Column id=\"USER_ID\" type=\"STRING\" size=\"8\"/><Column id=\"USER_NM\" type=\"STRING\" size=\"30\"/><Column id=\"DEPT_CODE\" type=\"STRING\" size=\"6\"/><Column id=\"DEPT_NM\" type=\"STRING\" size=\"30\"/><Column id=\"FILE_SN\" type=\"STRING\" size=\"256\"/></ColumnInfo>");this.addChild(_a.name,_a);_a=new Dataset("ds_validation",this);_a._setContents("<ColumnInfo><Column id=\"compId\" type=\"STRING\" size=\"256\"/><Column id=\"colId\" type=\"STRING\" size=\"256\"/><Column id=\"PK\" type=\"STRING\" size=\"256\"/><Column id=\"notNull\" type=\"STRING\" size=\"256\"/><Column id=\"type\" type=\"STRING\" size=\"256\"/><Column id=\"nlength\" type=\"STRING\" size=\"256\"/><Column id=\"from\" type=\"STRING\" size=\"256\"/><Column id=\"to\" type=\"STRING\" size=\"256\"/><Column id=\"lengthChkGb\" type=\"STRING\" size=\"256\"/><Column id=\"msgId\" type=\"STRING\" size=\"256\"/><Column id=\"expr\" type=\"STRING\" size=\"256\"/><Column id=\"func\" type=\"STRING\" size=\"256\"/></ColumnInfo><Rows><Row><Col id=\"compId\">ds_1</Col><Col id=\"colId\">PRTN_DTLS</Col><Col id=\"msgId\">추진내역</Col><Col id=\"to\"/><Col id=\"notNull\">Y</Col><Col id=\"nlength\"/></Row><Row><Col id=\"compId\">ds_1</Col><Col id=\"colId\">BGNDE_PLAN</Col><Col id=\"msgId\">계획시작일자</Col><Col id=\"to\">COMPT_DE_PLAN</Col><Col id=\"notNull\">Y</Col><Col id=\"expr\"/></Row><Row><Col id=\"compId\">ds_1</Col><Col id=\"colId\">COMPT_DE_PLAN</Col><Col id=\"notNull\">Y</Col><Col id=\"msgId\">계획완료일자</Col><Col id=\"from\">BGNDE_PLAN</Col><Col id=\"expr\"/></Row><Row><Col id=\"compId\">ds_1</Col><Col id=\"colId\">BGNDE_ACMSLT</Col><Col id=\"notNull\">Y</Col><Col id=\"msgId\">실적시작일자</Col><Col id=\"to\">COMPT_DE_ACMSLT</Col></Row><Row><Col id=\"colId\">COMPT_DE_ACMSLT</Col><Col id=\"compId\">ds_1</Col><Col id=\"notNull\">Y</Col><Col id=\"msgId\">실적완료일자</Col><Col id=\"from\">BGNDE_ACMSLT</Col></Row></Rows>");this.addChild(_a.name,_a);_a=new Dataset("ds_cond1",this);_a._setContents("<ColumnInfo><Column id=\"BSNS_CODE\" type=\"STRING\" size=\"5\"/><Column id=\"BSNS_STEP\" type=\"STRING\" size=\"3\"/><Column id=\"JOB_CODE\" type=\"STRING\" size=\"6\"/><Column id=\"SN\" type=\"BIGDECIMAL\" size=\"11\"/><Column id=\"USER_ID\" type=\"STRING\" size=\"8\"/><Column id=\"USER_NM\" type=\"STRING\" size=\"30\"/><Column id=\"DEPT_CODE\" type=\"STRING\" size=\"6\"/><Column id=\"DEPT_NM\" type=\"STRING\" size=\"30\"/><Column id=\"ADMIN_YN\" type=\"STRING\" size=\"1\"/></ColumnInfo>");this.addChild(_a.name,_a);_a=new Dataset("ds_PRJ010",this);_a._setContents("");this.addChild(_a.name,_a);_a=new Dataset("ds_PRJ014",this);_a._setContents("");this.addChild(_a.name,_a);_a=new Dataset("ds_PRJ018",this);_a._setContents("");this.addChild(_a.name,_a);_a=new Dataset("ds_BSNS",this);_a.set_useclientlayout("0");_a._setContents("<ColumnInfo><Column id=\"BSNS_CODE\" type=\"string\" size=\"5\"/><Column id=\"BSNS_NM\" type=\"string\" size=\"100\"/><Column id=\"BSNS_ALL_NM\" type=\"string\" size=\"100\"/><Column id=\"BSNS_TY\" type=\"string\" size=\"3\"/><Column id=\"RM\" type=\"string\" size=\"200\"/><Column id=\"STRWRK_DE\" type=\"string\" size=\"8\"/><Column id=\"COMPET_DE\" type=\"string\" size=\"8\"/><Column id=\"BSNS_CONFM_DE\" type=\"string\" size=\"8\"/><Column id=\"MVN_DE\" type=\"string\" size=\"8\"/><Column id=\"RN\" type=\"string\" size=\"8\"/></ColumnInfo>");this.addChild(_a.name,_a);_a=new Dataset("ds_fileList",this);_a.set_firefirstcount("0");_a.getSetter("firenextcount").set("0");_a.set_useclientlayout("true");_a.set_updatecontrol("false");_a.set_enableevent("true");_a.set_loadkeymode("keep");_a.set_loadfiltermode("keep");_a.set_reversesubsum("false");_a._setContents("<ColumnInfo><Column id=\"CHK\" type=\"STRING\" size=\"256\"/><Column id=\"PROGRS\" type=\"BIGDECIMAL\" size=\"16\"/><Column id=\"ORGINL_FILE_NM\" type=\"string\" size=\"32\"/><Column id=\"FILE_EXTSN\" type=\"string\" size=\"32\"/><Column id=\"FILE_STRE_COURS\" type=\"string\" size=\"32\"/><Column id=\"FILE_ID\" type=\"string\" size=\"32\"/><Column id=\"SN\" type=\"bigdecimal\" size=\"16\"/><Column id=\"SYS_SE_CODE\" type=\"string\" size=\"32\"/><Column id=\"FILE_IMAGE\" type=\"string\" size=\"32\"/><Column id=\"FILE_TY\" type=\"string\" size=\"32\"/><Column id=\"JOB_SE\" type=\"string\" size=\"32\"/><Column id=\"DELETE_IMAGE\" type=\"string\" size=\"32\"/><Column id=\"STRE_FILE_NM\" type=\"string\" size=\"32\"/><Column id=\"FILE_MG\" type=\"bigdecimal\" size=\"16\"/><Column id=\"FILE_CN\" type=\"string\" size=\"32\"/><Column id=\"FILE_ORDR\" type=\"bigdecimal\" size=\"16\"/><Column id=\"TRNSMIS_FILE_SIZE\" type=\"string\" size=\"32\"/><Column id=\"USE_AT\" type=\"string\" size=\"32\"/><Column id=\"STTUS\" type=\"string\" size=\"32\"/><Column id=\"FILE_SN\" type=\"bigdecimal\" size=\"16\"/></ColumnInfo>");this.addChild(_a.name,_a);_a=new Static("sta_gud_v01","absolute",null,"0","28",null,"0","0",this);_a.set_text("28");_a.set_visible("0");_a.style.set_background("#1b3cd23c");_a.style.set_align("center");this.addChild(_a.name,_a);_a=new Div("div_work","absolute","0","33",null,null,"28","0",this);_a.set_taborder("3");this.addChild(_a.name,_a);_a=new Div("div_2","absolute","0","0",null,"414","270",null,this.div_work);_a.set_taborder("6");this.div_work.addChild(_a.name,_a);_a=new Static("sta_gud_h02","absolute","0","29",null,"5","0",null,this.div_work.div_2);_a.set_taborder("5");_a.set_text("5");_a.set_visible("false");_a.style.set_background("#dc143c3c");this.div_work.div_2.addChild(_a.name,_a);_a=new Grid("grd_1","absolute","0","34",null,null,"124","0",this.div_work.div_2);_a.set_taborder("6");_a.set_binddataset("ds_1");_a.set_autofittype("col");_a._setContents("<Formats><Format id=\"default\"><Columns><Column size=\"30\"/><Column size=\"250\"/><Column size=\"115\" band=\"right\"/><Column size=\"115\" band=\"right\"/><Column size=\"115\" band=\"right\"/><Column size=\"115\" band=\"right\"/></Columns><Rows><Row size=\"18\" band=\"head\"/><Row size=\"18\" band=\"head\"/><Row size=\"25\"/></Rows><Band id=\"head\"><Cell rowspan=\"2\" cssclass=\"Cellgrd_WF_HeadEssential\" text=\"순번\"/><Cell col=\"1\" rowspan=\"2\" text=\"추진내역\"/><Cell col=\"2\" colspan=\"2\" text=\"계획일정\"/><Cell col=\"4\" colspan=\"2\" text=\"실적일정\"/><Cell row=\"1\" col=\"2\" text=\"시작일자\"/><Cell row=\"1\" col=\"3\" text=\"완료일자\"/><Cell row=\"1\" col=\"4\" text=\"시작일자\"/><Cell row=\"1\" col=\"5\" text=\"완료일자\"/></Band><Band id=\"body\"><Cell expr=\"currow+1\"/><Cell col=\"1\" displaytype=\"normal\" edittype=\"text\" style=\"align:left;padding:0 5 0 5;\" text=\"bind:PRTN_DTLS\" editlimit=\"200\" editimemode=\"hangul\" editautoselect=\"1\" editdisplay=\"expr:dataset.getRowType(currow)==2 ? 'display' : 'edit'\" editlengthunit=\"utf8\"/><Cell col=\"2\" displaytype=\"date\" edittype=\"date\" cssclass=\"cal_WF_Essential\" text=\"bind:BGNDE_PLAN\" calendardisplay=\"edit\" calendardisplaynulltype=\"none\"/><Cell col=\"3\" displaytype=\"date\" edittype=\"date\" text=\"bind:COMPT_DE_PLAN\" calendardisplay=\"edit\" calendardisplaynulltype=\"none\"/><Cell col=\"4\" displaytype=\"date\" edittype=\"date\" text=\"bind:BGNDE_ACMSLT\" calendardisplay=\"edit\" calendardisplaynulltype=\"none\"/><Cell col=\"5\" displaytype=\"date\" edittype=\"date\" text=\"bind:COMPT_DE_ACMSLT\" calendardisplay=\"edit\" calendardisplaynulltype=\"none\"/></Band></Format></Formats>");this.div_work.div_2.addChild(_a.name,_a);_a=new Static("sta_gud_h01","absolute","0","0",null,"10","0",null,this.div_work.div_2);_a.set_taborder("10");_a.set_text("10");_a.set_visible("false");_a.style.set_background("#dc143c3c");_a.style.set_align("center");this.div_work.div_2.addChild(_a.name,_a);_a=new Static("sta_1","absolute","0","12","70","19",null,null,this.div_work.div_2);_a.set_taborder("11");_a.set_text("시공일정");_a.set_cssclass("sta_WF_Title02");_a.style.set_background("transparent URL('theme://images/sta_WF_Title02.png') left middle");_a.getSetter("visible2").set("0");this.div_work.div_2.addChild(_a.name,_a);_a=new Div("div_03","absolute",null,"0","381","414","0",null,this.div_work);_a.set_taborder("7");this.div_work.addChild(_a.name,_a);_a=new Static("sta_1","absolute","0","12","70","19",null,null,this.div_work.div_03);_a.set_taborder("57");_a.set_text("첨부파일");_a.set_cssclass("sta_WF_Title02");_a.style.set_background("transparent URL('theme://images/sta_WF_Title02.png') left middle");_a.getSetter("visible2").set("0");this.div_work.div_03.addChild(_a.name,_a);_a=new Static("sta_gud_h01","absolute","0","0",null,"10","0",null,this.div_work.div_03);_a.set_taborder("58");_a.set_text("10");_a.set_visible("false");_a.style.set_background("#dc143c3c");_a.style.set_align("center");this.div_work.div_03.addChild(_a.name,_a);_a=new Static("sta_gud_h02","absolute","0","29",null,"5","0",null,this.div_work.div_03);_a.set_taborder("59");_a.set_text("5");_a.set_visible("false");_a.style.set_background("#dc143c3c");_a.style.set_align("center");this.div_work.div_03.addChild(_a.name,_a);_a=new Grid("grd_Files","absolute","0","34",null,null,"0","0",this.div_work.div_03);_a.set_taborder("60");_a.set_binddataset("ds_fileList");_a.set_autofittype("col");_a.getSetter("autofittype2").set("col");_a.set_autosizingtype("none");_a._setContents("<Formats><Format id=\"default\"><Columns><Column size=\"40\"/><Column size=\"68\"/><Column size=\"270\"/></Columns><Rows><Row size=\"24\" band=\"head\"/><Row size=\"48\"/></Rows><Band id=\"head\"><Cell displaytype=\"checkbox\" edittype=\"checkbox\"/><Cell col=\"1\" text=\"파일형식\"/><Cell col=\"2\" text=\"파일명\"/></Band><Band id=\"body\"><Cell displaytype=\"checkbox\" edittype=\"checkbox\" text=\"bind:CHK\"/><Cell col=\"1\" displaytype=\"image\" style=\"padding: ;\" text=\"bind:FILE_IMAGE\" autosizerow=\"limitmin\" autosizecol=\"limitmin\"/><Cell col=\"2\" style=\"align:left middle;padding:0 0 0 5;cursor:hand;\" text=\"bind:ORGINL_FILE_NM\" autosizecol=\"default\"/></Band></Format></Formats>");this.div_work.div_03.addChild(_a.name,_a);_a=new Button("btn_del","absolute",null,"10","58","19","0",null,this.div_work.div_03);_a.set_taborder("61");_a.set_text("선택삭제");_a.set_cssclass("btn_WF_Process");this.div_work.div_03.addChild(_a.name,_a);_a=new Button("btn_down","absolute",null,"10","78","19","63",null,this.div_work.div_03);_a.set_taborder("62");_a.set_text("선택다운로드");_a.set_cssclass("btn_WF_Process");this.div_work.div_03.addChild(_a.name,_a);_a=new Button("btn_up","absolute",null,"10","68","19","147",null,this.div_work.div_03);_a.set_taborder("63");_a.set_text("파일업로드");_a.set_cssclass("btn_WF_Process");this.div_work.div_03.addChild(_a.name,_a);_a=new Static("sta_gud_v01","absolute","636","0","10",null,null,"288",this.div_work);_a.set_taborder("8");_a.set_text("10");_a.set_visible("false");_a.style.set_background("#1b3cd23c");_a.style.set_align("center");this.div_work.addChild(_a.name,_a);_a=new Div("div_3","absolute","0","414",null,null,"0","0",this.div_work);_a.set_taborder("9");this.div_work.addChild(_a.name,_a);_a=new Static("sta_gud_h02","absolute","0","29",null,"5","0",null,this.div_work.div_3);_a.set_taborder("12");_a.set_text("5");_a.set_visible("false");_a.style.set_background("#dc143c3c");this.div_work.div_3.addChild(_a.name,_a);_a=new Static("sta_gud_h01","absolute","0","0",null,"10","0",null,this.div_work.div_3);_a.set_taborder("16");_a.set_text("10");_a.set_visible("false");_a.style.set_background("#dc143c3c");_a.style.set_align("center");this.div_work.div_3.addChild(_a.name,_a);_a=new Static("sta_1","absolute","0","12","286","19",null,null,this.div_work.div_3);_a.set_taborder("17");_a.set_text("비망사항정리 및 일정지연사유");_a.set_cssclass("sta_WF_Title02");_a.style.set_background("transparent URL('theme://images/sta_WF_Title02.png') left middle");_a.getSetter("visible2").set("0");this.div_work.div_3.addChild(_a.name,_a);_a=new TextArea("edt_DELAY_PRVONSH","absolute","0","34",null,null,"0","0",this.div_work.div_3);_a.set_taborder("18");_a.set_imemode("hangul");_a.set_maxlength("4000");_a.style.set_padding("5 5 5 5");_a.style.set_align("left top");_a.set_value(" ");_a.set_lengthunit("utf8");_a.set_scrollbars("autoboth");_a.set_wordwrap("char");this.div_work.div_3.addChild(_a.name,_a);_a=new Div("div_search","absolute","0","0",null,"33","28",null,this);_a.set_taborder("4");_a.set_cssclass("div_WFSA_Box");this.addChild(_a.name,_a);_a=new Combo("cmb_bsns_code","absolute","79","5","350","21",null,null,this.div_search);this.div_search.addChild(_a.name,_a);_a.set_taborder("8");_a.set_innerdataset("ds_BSNS");_a.set_codecolumn("BSNS_CODE");_a.set_datacolumn("BSNS_ALL_NM");_a.set_displayrowcount("15");_a.set_cssclass("cmb_WF_Essential");_a=new Static("sta_CL_SE","absolute","15","6","59","20",null,null,this.div_search);_a.set_taborder("9");_a.set_text("사업코드");_a.set_cssclass("sta_WFSA_Label");this.div_search.addChild(_a.name,_a);_a=new Layout("default","",761,414,this.div_work.div_2,function(_b){_b.set_taborder("6");});this.div_work.div_2.addLayout(_a.name,_a);_a=new Layout("default","",381,414,this.div_work.div_03,function(_b){_b.set_taborder("7");});this.div_work.div_03.addLayout(_a.name,_a);_a=new Layout("default","",0,0,this.div_work.div_3,function(_b){_b.set_taborder("9");});this.div_work.div_3.addLayout(_a.name,_a);_a=new Layout("default","",0,0,this.div_work,function(_b){_b.set_taborder("3");});this.div_work.addLayout(_a.name,_a);_a=new Layout("default","",0,33,this.div_search,function(_b){_b.set_taborder("4");_b.set_cssclass("div_WFSA_Box");});this.div_search.addLayout(_a.name,_a);_a=new Layout("default","",1059,735,this,function(_b){_b.set_classname("PRJ050102");_b.set_titletext("PRJ050102_시공단계업무추진관리");});this.addLayout(_a.name,_a);_a=new BindItem("item11","div_work.div_00.edt_DELAY_PRVONSH","value","ds_1","DELAY_PRVONSH");this.addChild(_a.name,_a);_a.bind();_a=null;};this.addIncludeScript("PRJ050102.xfdl","lib::comInclude.xjs");this.addIncludeScript("PRJ050102.xfdl","pms_lib::pmsUtilInclude.xjs");this.addIncludeScript("PRJ050102.xfdl","mis_lib::misUtil.xjs");this.addIncludeScript("PRJ050102.xfdl","lib::comUpDownUtils.xjs");this.registerScript("PRJ050102.xfdl",function(){var _a=3;var _b;var _c;this.g_row1;this.File_UpDownManager=null;var _d= -1;this.PRJ050102_oninit=function(_e,_f){this.fn_init();this.fn_init_dataset();var _g={useMultiUpload:true,onChange:this.fn_onFileSelected,onSuccess:this.fn_onFileSuccess};this.File_UpDownManager=new this.fileUpDownManager(this,"PMS","PRJ");this.File_UpDownManager.init(_g);};this.fn_onFileSuccess=function(_e,_f){this.fn_transaction("mList");};this.PRJ050102_onload=function(_e,_f){var _g=application.gds_userInfo;if(_g.rowcount>0){var _h=this.ds_cond1;var _i=_h.rowposition;_h.setColumn(_i,"USER_ID",_g.getColumn(0,"USER_ID"));_h.setColumn(_i,"DEPT_CODE",_g.getColumn(0,"DEPT_CODE"));}this.fn_loadCombo();};this.fn_init_dataset=function(){this.gfn_initCondDs(this,this.div_search);this.checkDs.push(this.ds_1);};this.fn_loadCombo=function(){var _e=[['ds_PRJ010','PRJ010',1,''],['ds_PRJ014','PRJ014',1,''],['ds_PRJ018','PRJ018',1,'']];var _f=null;this.gfn_comboLoad(_e,_f);this.fn_fill_combo(this.div_search.cmb_bsns_code,"hsco/pms/prj/bsnsCdList.do","선택",null);};this.fn_search=function(){var _e=this.ds_BSNS.getColumn(this.ds_BSNS.rowposition,"BSNS_CODE")||'';if(_e==''){this.alert("사업코드를 선택하세요.");return;}this.ds_cond1.setColumn(0,"BSNS_CODE",_e);this.ds_cond1.setColumn(0,"BSNS_STEP","3");this.ds_1.clearData();this.ds_fileList.clearData();this.edt_DELAY_PRVONSH="";this.fn_transaction("mList");};this.fn_save=function(){this.ds_1.setColumn(this.ds_1.rowposition,'DELAY_PRVONSH',this.div_work.div_3.edt_DELAY_PRVONSH.text);if(!this.gfn_checkValidation(this.ds_1,this.ds_validation)){return;}if(this.gfn_message("confirm.저장.여부")){this.fn_transaction("save");}};this.fn_insert=function(_e){var _f=this.ds_BSNS.getColumn(this.ds_BSNS.rowposition,"BSNS_CODE")||'';if(_f==''){return;}var _g=this.ds_1.addRow();this.ds_1.setColumn(_g,"BSNS_CODE",_f);this.ds_1.setColumn(_g,"BSNS_STEP",'3');};this.fn_delete=function(_e){this.ds_1.deleteRow(this.ds_1.rowposition);};this.fn_transaction=function(_e){if(this.ds_cond1.rowcount<1){return;}var _f;var _g;var _h="hsco/pms/prj/PRJ050102/"+_e+".do";var _i="input1=ds_cond1";var _j="";switch(_e){case "jobList":_h="hsco/pms/prj/jobList.do";this.ds_cond1.setColumn(0,'BSNS_CODE',this.div_PRJ.getCode());this.ds_cond1.setColumn(0,'BSNS_STEP',"3");_j="ds_job=output1";break;case "mList":_f=this.ds_job;_g="BSNS_CODE=BSNS_CODE,BSNS_STEP=BSNS_STEP,";_j="ds_1=output1";break;case "selectAtchFile":this.ds_fileList.clearData();this.ds_fileList.addRow();this.ds_fileList.setColumn(0,"FILE_SN",this.ds_1.getColumn(this.ds_1.rowposition,"FILE_SN"));var _h="/hsco/cmm/file/selectAtchmnFileList.do";var _i="input1=ds_fileList";var _j="ds_fileList=output1";break;case "save":this.bSave=1;this.g_row1=this.ds_1.rowposition;_i="input1=ds_1:U";break;}if(_g){this.ds_cond1.copyRow(0,_f,_f.rowposition,_g);}switch(_e){case "jobList":this.ds_job.clearData();case "mList":this.ds_1.clearData();break;}Ex.core.tran(this,_e,_h,_i,_j);this.bSave=0;};this.fn_callBack=function(_e,_f,_g){if(_f!=0){return this.gfn_callback_message(_e,_f,_g);}switch(_e){case "mList":if(this.g_row1){this.ds_1.set_rowposition(this.g_row1);this.g_row1=null;}if(_d>0){this.ds_1.set_rowposition(_d);_d= -1;}break;case "rList":break;case "save":ds_job.applyChange();ds_1.applyChange();break;case "deleteFile":return this.fn_transaction("mList");}};this.ds_canrowposchange=function(_e,_f){if(this.bSave){return 1;}if(this.fn_checkUpdated(1)){return false;}};this.ds_onrowposchanged=function(_e,_f){if(_e.rowcount<1){return;}switch(_e){case this.ds_job:return this.fn_transaction("mList");case this.ds_1:return this.fn_transaction("rList");}};this.ds_cancolumnchange=function(_e,_f){var _g;var _h=_f.newvalue;switch(_f.columnid){case 'SN':_g=_f.columnid;break;default:return;}var _i=_e.findRowExpr(_g+" == '"+_h+"'");if( -1<_i){alert('중복 오류 : '+_h);return false;}};this.fn_insertDS=function(_e){var _f;var _g;var _h=_e.addRow();switch(_e){case this.ds_1:_f=this.ds_job;_g="BSNS_CODE=BSNS_CODE,"+"BSNS_STEP=BSNS_STEP,"+"JOB_CODE=JOB_CODE,";var _i=this.gfn_today();_e.setColumn(_h,'BGNDE_PLAN',_i);_e.setColumn(_h,'COMPT_DE_PLAN',_i);_e.setColumn(_h,'BGNDE_ACMSLT',_i);_e.setColumn(_h,'COMPT_DE_ACMSLT',_i);var _j=(_h<1)?'1':''+(1+parseInt(_e.getColumn(_h-1,'SN')));_e.setColumn(_h,'SN',_j);break;}_e.copyRow(_h,_f,_f.rowposition,_g);};this.fn_bsnsChanged=function(_e,_f){var _g=_e.index||0;if(this.ds_BSNS.rowcount==0){return false;}this.ds_BSNS.set_rowposition(_g);};this.div_work_div_03_btn_up_onclick=function(_e,_f){_d=this.ds_1.rowposition;this.fn_autoFileSn("PMS","PRJ",this.File_UpDownManager,this.ds_fileList,this.ds_1,"TBPRJ_JOB_PRTN","FILE_SN",["BSNS_CODE","BSNS_STEP","SN"]);};this.ds_1_onrowposchanged=function(_e,_f){this.fn_transaction("selectAtchFile");this.div_work.div_3.edt_DELAY_PRVONSH.deleteText(0);this.div_work.div_3.edt_DELAY_PRVONSH.insertText(this.ds_1.getColumn(this.ds_1.rowposition,"DELAY_PRVONSH"));};this.div_work_div_03_btn_down_onclick=function(_e,_f){var _g=this.ds_fileList.findRow("CHK","1");if(_g<0){this.gfn_message("comm.데이터.선택.없음");return;}for(var _l=0;_l<this.ds_fileList.getRowCount();_l++ ){var _h=this.ds_fileList.getColumn(_l,"FILE_SN");var _i=this.ds_fileList.getColumn(_l,"FILE_ORDR");var _j=this.ds_fileList.getColumn(_l,"ORGINL_FILE_NM");var _k=this.ds_fileList.getColumn(_l,"CHK");if(_k=='1'){this.File_UpDownManager.download(_h,_i,_j);}}};this.div_work_div_03_btn_del_onclick=function(_e,_f){var _g=this.ds_fileList.findRow("CHK","1");if(_g<0){this.gfn_message("comm.데이터.선택.없음");return;}if(!this.gfn_message("confirm.선택파일.삭제여부","들")){return false;}for(var _m=this.ds_fileList.getRowCount()-1;_m>=0;_m-- ){var _h=this.ds_fileList.getColumn(_m,"CHK");if(_h=='1'){this.ds_fileList.setRowType(_m,Dataset.ROWTYPE_DELETE);}else{this.ds_fileList.setRowType(_m,Dataset.ROWTYPE_NORMAL);}}var _i="deleteFile";var _j="hsco/cmm/file/deleteFile.do";var _k="input1=ds_fileList:U";var _l="ds_fileList=output1";Ex.core.tran(this,_i,_j,_k,_l);};this.div_work_div_03_grd_Files_oncellclick=function(_e,_f){if('2'==_e.currentcell){var _g=this.ds_fileList.getColumn(_e.currentrow,"FILE_SN");var _h=this.ds_fileList.getColumn(_e.currentrow,"FILE_ORDR");var _i=this.ds_fileList.getColumn(_e.currentrow,"ORGINL_FILE_NM");this.File_UpDownManager.download(_g,_h,_i);}};});this.on_initEvent=function(){this.ds_1.addEventHandler("onrowposchanged",this.ds_1_onrowposchanged,this);this.addEventHandler("onload",this.PRJ050102_onload,this);this.addEventHandler("oninit",this.PRJ050102_oninit,this);this.div_work.div_03.grd_Files.addEventHandler("oncellclick",this.div_work_div_03_grd_Files_oncellclick,this);this.div_work.div_03.btn_del.addEventHandler("onclick",this.div_work_div_03_btn_del_onclick,this);this.div_work.div_03.btn_down.addEventHandler("onclick",this.div_work_div_03_btn_down_onclick,this);this.div_work.div_03.btn_up.addEventHandler("onclick",this.div_work_div_03_btn_up_onclick,this);this.div_work.div_3.edt_DELAY_PRVONSH.addEventHandler("oneditclick",this.div_work_div_3_edt_DELAY_PRVONSH_oneditclick,this);this.div_search.cmb_bsns_code.addEventHandler("onitemchanged",this.fn_bsnsChanged,this);};this.loadIncludeScript("PRJ050102.xfdl");};})();