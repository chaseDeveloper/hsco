(function(){return function(){if(!this._is_form){return;}this.on_create=function(){var _a=null;if(Form==this.constructor){this.set_name("PRJ010112");this.set_classname("PRJ010112");this.set_titletext("시공계획서 등록/변경");this._setFormPosition(0,0,1059,735);}_a=new Dataset("ds_cond",this);_a.set_firefirstcount("0");_a.getSetter("firenextcount").set("0");_a.set_useclientlayout("true");_a.set_updatecontrol("true");_a.set_enableevent("true");_a.set_loadkeymode("keep");_a.set_loadfiltermode("keep");_a.set_reversesubsum("false");_a._setContents("<ColumnInfo><Column id=\"CNTRCT_YEAR\" type=\"STRING\" size=\"4\"/><Column id=\"CNTRCT_NO\" type=\"STRING\" size=\"11\"/><Column id=\"CNTRCT_NM\" type=\"STRING\" size=\"100\"/><Column id=\"BSNS_CODE\" type=\"STRING\" size=\"256\"/><Column id=\"BSNS_NM\" type=\"STRING\" size=\"256\"/><Column id=\"INFRML_CNTRCT_AT\" type=\"STRING\" size=\"256\"/><Column id=\"APV_AT\" type=\"STRING\" size=\"256\"/></ColumnInfo>");this.addChild(_a.name,_a);_a=new Dataset("ds_bfExePln",this);_a.set_firefirstcount("0");_a.getSetter("firenextcount").set("0");_a.set_useclientlayout("true");_a.set_updatecontrol("true");_a.set_enableevent("true");_a.set_loadkeymode("keep");_a.set_loadfiltermode("keep");_a.set_reversesubsum("false");_a._setContents("<ColumnInfo><Column id=\"EXE_PLN_SN\" type=\"STRING\" size=\"256\"/><Column id=\"CNTRCT_NO\" type=\"STRING\" size=\"256\"/><Column id=\"CNTRCT_NM\" type=\"STRING\" size=\"256\"/><Column id=\"SBC_BCNC_CODE\" type=\"STRING\" size=\"256\"/><Column id=\"SBC_SEQ\" type=\"STRING\" size=\"256\"/><Column id=\"DOC_CTS\" type=\"STRING\" size=\"256\"/><Column id=\"KEYWORD\" type=\"STRING\" size=\"256\"/><Column id=\"ACTV_CS_SN\" type=\"STRING\" size=\"256\"/><Column id=\"DOC_SN\" type=\"STRING\" size=\"256\"/><Column id=\"RQS_DT\" type=\"STRING\" size=\"256\"/><Column id=\"APV_DT\" type=\"STRING\" size=\"256\"/><Column id=\"CHG_TO\" type=\"STRING\" size=\"256\"/><Column id=\"ENTRPS_BCNC_NM\" type=\"STRING\" size=\"256\"/><Column id=\"SUBCNTR_ENTRPS_CODE\" type=\"STRING\" size=\"256\"/><Column id=\"SUBCNTR_ENTRPS_NM\" type=\"STRING\" size=\"256\"/><Column id=\"SUBCNTR_CNST\" type=\"STRING\" size=\"256\"/><Column id=\"CNTRCT_PD\" type=\"STRING\" size=\"256\"/><Column id=\"BSNS_CODE\" type=\"STRING\" size=\"256\"/><Column id=\"BSNS_NM\" type=\"STRING\" size=\"256\"/><Column id=\"CNTRCT_ST\" type=\"STRING\" size=\"256\"/><Column id=\"CNTRCT_ED\" type=\"STRING\" size=\"256\"/><Column id=\"APV_AT\" type=\"STRING\" size=\"256\"/><Column id=\"BCNC_CODE\" type=\"STRING\" size=\"256\"/><Column id=\"APV\" type=\"STRING\" size=\"256\"/><Column id=\"REGISTER_NM\" type=\"STRING\" size=\"256\"/><Column id=\"UPDUSR_NM\" type=\"STRING\" size=\"256\"/><Column id=\"CON_ST_DT\" type=\"STRING\" size=\"256\"/><Column id=\"CON_ED_DT\" type=\"STRING\" size=\"256\"/><Column id=\"PRCS_NM\" type=\"STRING\" size=\"256\"/><Column id=\"EXE_TO\" type=\"STRING\" size=\"256\"/><Column id=\"Column4\" type=\"STRING\" size=\"256\"/></ColumnInfo>");this.addChild(_a.name,_a);_a=new Dataset("ds_wtnessInsptr",this);_a.set_firefirstcount("0");_a.getSetter("firenextcount").set("0");_a.set_useclientlayout("true");_a.set_updatecontrol("true");_a.set_enableevent("true");_a.set_loadkeymode("keep");_a.set_loadfiltermode("keep");_a.set_reversesubsum("false");_a._setContents("<ColumnInfo><Column id=\"CNTRCT_NO\" type=\"STRING\" size=\"10\"/><Column id=\"WTNESS_SN\" type=\"BIGDECIMAL\" size=\"3\"/><Column id=\"INSPTR_SN\" type=\"BIGDECIMAL\" size=\"3\"/><Column id=\"ROLE_SE\" type=\"STRING\" size=\"3\"/><Column id=\"EMPNO\" type=\"STRING\" size=\"8\"/><Column id=\"EMPNM\" type=\"STRING\" size=\"256\"/></ColumnInfo>");this.addChild(_a.name,_a);_a=new Dataset("ds_condSub",this);_a.set_firefirstcount("0");_a.getSetter("firenextcount").set("0");_a.set_useclientlayout("true");_a.set_updatecontrol("true");_a.set_enableevent("true");_a.set_loadkeymode("keep");_a.set_loadfiltermode("keep");_a.set_reversesubsum("false");_a._setContents("<ColumnInfo><Column id=\"CNTRCT_NO\" type=\"STRING\" size=\"256\"/><Column id=\"BZ_PCP_SN\" type=\"STRING\" size=\"256\"/><Column id=\"DOC_SN\" type=\"STRING\" size=\"256\"/></ColumnInfo>");this.addChild(_a.name,_a);_a=new Dataset("ds_validation",this);_a.set_firefirstcount("0");_a.getSetter("firenextcount").set("0");_a.set_useclientlayout("false");_a.set_updatecontrol("true");_a.set_enableevent("true");_a.set_loadkeymode("keep");_a.set_loadfiltermode("keep");_a.set_reversesubsum("false");_a._setContents("<ColumnInfo><Column id=\"compId\" type=\"STRING\" size=\"256\"/><Column id=\"colId\" type=\"STRING\" size=\"256\"/><Column id=\"msgId\" type=\"STRING\" size=\"256\"/><Column id=\"PK\" type=\"STRING\" size=\"256\"/><Column id=\"notNull\" type=\"STRING\" size=\"256\"/><Column id=\"nlength\" type=\"STRING\" size=\"256\"/><Column id=\"lengthChkGb\" type=\"STRING\" size=\"256\"/><Column id=\"type\" type=\"STRING\" size=\"256\"/><Column id=\"from\" type=\"STRING\" size=\"256\"/><Column id=\"to\" type=\"STRING\" size=\"256\"/><Column id=\"expr\" type=\"STRING\" size=\"256\"/><Column id=\"func\" type=\"STRING\" size=\"256\"/></ColumnInfo><Rows><Row><Col id=\"compId\">ds_cond</Col><Col id=\"colId\">CNTRCT_NO</Col><Col id=\"msgId\">[검색조건] 계약번호</Col><Col id=\"notNull\">Y</Col></Row><Row><Col id=\"compId\">ds_bfExePln</Col><Col id=\"colId\">SBC_BCNC_CODE</Col><Col id=\"msgId\">하도급업체</Col><Col id=\"notNull\">Y</Col><Col id=\"PK\"/></Row><Row><Col id=\"colId\">SBC_SEQ</Col><Col id=\"compId\">ds_bfExePln</Col><Col id=\"PK\"/></Row></Rows>");this.addChild(_a.name,_a);_a=new Dataset("ds_condSub2",this);_a.set_firefirstcount("0");_a.getSetter("firenextcount").set("0");_a.set_useclientlayout("true");_a.set_updatecontrol("true");_a.set_enableevent("true");_a.set_loadkeymode("keep");_a.set_loadfiltermode("keep");_a.set_reversesubsum("false");_a._setContents("<ColumnInfo><Column id=\"CNTRCT_NO\" type=\"STRING\" size=\"256\"/><Column id=\"CNTRCT_YEAR\" type=\"STRING\" size=\"256\"/><Column id=\"BZ_PCP_SN\" type=\"STRING\" size=\"256\"/><Column id=\"DOC_SN\" type=\"STRING\" size=\"256\"/></ColumnInfo>");this.addChild(_a.name,_a);_a=new Dataset("ds_fileList",this);_a.getSetter("firenextcount").set("0");_a.set_useclientlayout("true");_a._setContents("<ColumnInfo><Column id=\"FILE_SN\" type=\"BIGDECIMAL\" size=\"20\"/><Column id=\"FILE_ORDR\" type=\"INT\" size=\"3\"/><Column id=\"FILE_STRE_COURS\" type=\"STRING\" size=\"2000\"/><Column id=\"STRE_FILE_NM\" type=\"STRING\" size=\"255\"/><Column id=\"ORGINL_FILE_NM\" type=\"STRING\" size=\"255\"/><Column id=\"FILE_EXTSN\" type=\"STRING\" size=\"20\"/><Column id=\"FILE_CN\" type=\"STRING\" size=\"4000\"/><Column id=\"FILE_MG\" type=\"INT\" size=\"8\"/><Column id=\"USE_AT\" type=\"STRING\" size=\"1\"/><Column id=\"FILE_ID\" type=\"STRING\" size=\"256\"/><Column id=\"SN\" type=\"INT\" size=\"5\"/><Column id=\"SYS_SE_CODE\" type=\"STRING\" size=\"6\"/><Column id=\"JOB_SE\" type=\"STRING\" size=\"3\"/><Column id=\"FILE_TY\" type=\"STRING\" size=\"256\"/><Column id=\"FILE_IMAGE\" type=\"STRING\" size=\"256\"/><Column id=\"PROGRS\" type=\"INT\" size=\"5\"/><Column id=\"TRNSMIS_FILE_SIZE\" type=\"INT\" size=\"256\"/><Column id=\"DELETE_IMAGE\" type=\"STRING\" size=\"256\"/><Column id=\"STTUS\" type=\"STRING\" size=\"256\"/><Column id=\"FILE_KEY\" type=\"STRING\" size=\"256\"/></ColumnInfo>");this.addChild(_a.name,_a);_a=new Dataset("ds_condSub1",this);_a.getSetter("firenextcount").set("0");_a.set_useclientlayout("true");_a._setContents("<ColumnInfo><Column id=\"CNTRCT_NO\" type=\"STRING\" size=\"256\"/><Column id=\"BZ_PCP_SN\" type=\"STRING\" size=\"256\"/><Column id=\"DOC_SN\" type=\"STRING\" size=\"256\"/></ColumnInfo>");this.addChild(_a.name,_a);_a=new Dataset("ds_ctgry_file",this);_a.getSetter("firenextcount").set("0");_a.set_useclientlayout("true");_a._setContents("<ColumnInfo><Column id=\"DOC_CS_SN\" type=\"STRING\" size=\"256\"/><Column id=\"DOC_CS_NM\" type=\"STRING\" size=\"256\"/><Column id=\"CTGRY_ID\" type=\"STRING\" size=\"256\"/><Column id=\"ESN_YN\" type=\"STRING\" size=\"256\"/><Column id=\"DPL_RGS_YN\" type=\"STRING\" size=\"256\"/><Column id=\"ACTV_CS_SN\" type=\"STRING\" size=\"256\"/><Column id=\"DOC_SN\" type=\"STRING\" size=\"256\"/><Column id=\"CTGRY_FILE_ID\" type=\"STRING\" size=\"256\"/><Column id=\"FILE_SN\" type=\"STRING\" size=\"256\"/><Column id=\"FILE_ORDR\" type=\"STRING\" size=\"256\"/><Column id=\"ORGINL_FILE_NM\" type=\"STRING\" size=\"256\"/><Column id=\"CNTRCT_NO\" type=\"STRING\" size=\"256\"/><Column id=\"BZ_PCP_SN\" type=\"STRING\" size=\"256\"/></ColumnInfo>");this.addChild(_a.name,_a);_a=new Dataset("ds_cond_file",this);_a.getSetter("firenextcount").set("0");_a.set_useclientlayout("true");_a._setContents("<ColumnInfo><Column id=\"FILE_SN\" type=\"STRING\" size=\"256\"/></ColumnInfo>");this.addChild(_a.name,_a);_a=new Dataset("ds_hrm048",this);_a._setContents("<ColumnInfo><Column id=\"ETC1\" type=\"string\" size=\"32\"/><Column id=\"VAL2\" type=\"string\" size=\"32\"/><Column id=\"CODE_CN\" type=\"string\" size=\"32\"/><Column id=\"VAL1\" type=\"string\" size=\"32\"/><Column id=\"USE_YN\" type=\"string\" size=\"32\"/><Column id=\"ETC3\" type=\"string\" size=\"32\"/><Column id=\"VAL4\" type=\"string\" size=\"32\"/><Column id=\"ETC2\" type=\"string\" size=\"32\"/><Column id=\"VAL3\" type=\"string\" size=\"32\"/><Column id=\"CODE_ORDR\" type=\"bigdecimal\" size=\"16\"/><Column id=\"MSTK_VAL\" type=\"string\" size=\"32\"/><Column id=\"ALL_CODE_NM\" type=\"string\" size=\"32\"/><Column id=\"CODE_NM\" type=\"string\" size=\"32\"/><Column id=\"INT_VAL\" type=\"string\" size=\"32\"/><Column id=\"GRP_CODE\" type=\"string\" size=\"32\"/><Column id=\"CODE\" type=\"string\" size=\"32\"/><Column id=\"VAL0\" type=\"string\" size=\"32\"/></ColumnInfo>");this.addChild(_a.name,_a);_a=new Button("btn_cancel","absolute",null,"43","64","19","28",null,this);_a.set_taborder("0");_a.set_text("취소");_a.set_cssclass("btn_WF_Gridcnl");this.addChild(_a.name,_a);_a=new Button("btn_Del01","absolute",null,"43","64","19","95",null,this);_a.set_taborder("1");_a.set_text("행삭제");_a.set_cssclass("btn_WF_Griddel");this.addChild(_a.name,_a);_a=new Button("btn_Add01","absolute",null,"43","64","19","162",null,this);_a.set_taborder("2");_a.set_text("행추가");_a.set_cssclass("btn_WF_Gridadd");this.addChild(_a.name,_a);_a=new Grid("grd_ctgry_file","absolute","0",null,null,"235","28","0",this);_a.set_taborder("3");_a.set_binddataset("ds_ctgry_file");_a.set_autoenter("select");_a.set_cellsizingtype("col");_a.set_autofittype("col");_a._setContents("<Formats><Format id=\"default\"><Columns><Column size=\"40\"/><Column size=\"250\"/><Column size=\"70\"/><Column size=\"90\"/><Column size=\"250\"/><Column size=\"60\"/><Column size=\"40\"/><Column size=\"70\"/></Columns><Rows><Row size=\"24\" band=\"head\"/><Row size=\"24\"/></Rows><Band id=\"head\"><Cell text=\"No\"/><Cell col=\"1\" text=\"표준문서\"/><Cell col=\"2\" text=\"필수여부\"/><Cell col=\"3\" text=\"복수등록허용\"/><Cell col=\"4\" colspan=\"4\" text=\"파일명\"/></Band><Band id=\"body\"><Cell text=\"expr:currow+1\"/><Cell col=\"1\" text=\"bind:DOC_CS_NM\"/><Cell col=\"2\" displaytype=\"checkbox\" text=\"bind:ESN_YN\"/><Cell col=\"3\" displaytype=\"checkbox\" text=\"bind:DPL_RGS_YN\"/><Cell col=\"4\" style=\"align:left;\" text=\"bind:ORGINL_FILE_NM\"/><Cell col=\"5\" displaytype=\"button\" text=\"업로드\"/><Cell col=\"6\" displaytype=\"button\" text=\"삭제\"/><Cell col=\"7\" displaytype=\"button\" text=\"다운로드\"/></Band></Format></Formats>");this.addChild(_a.name,_a);_a=new Grid("grd_bfExePln","absolute","0","67",null,null,"28","268",this);_a.set_taborder("8");_a.set_binddataset("ds_bfExePln");_a.set_autoenter("select");_a.set_cellsizingtype("col");_a._setContents("<Formats><Format id=\"default\"><Columns><Column size=\"40\" band=\"left\"/><Column size=\"60\" band=\"left\"/><Column size=\"120\" band=\"left\"/><Column size=\"300\" band=\"left\"/><Column size=\"80\"/><Column size=\"20\"/><Column size=\"80\"/><Column size=\"100\"/><Column size=\"80\"/><Column size=\"60\"/><Column size=\"100\"/><Column size=\"80\"/></Columns><Rows><Row size=\"24\" band=\"head\"/><Row size=\"24\"/></Rows><Band id=\"head\"><Cell text=\"순번\"/><Cell col=\"1\" colspan=\"2\" cssclass=\"Cellgrd_WF_HeadEssential\" text=\"하도급업체명\"/><Cell col=\"3\" text=\"공종명\"/><Cell col=\"4\" colspan=\"3\" text=\"공사기간\"/><Cell col=\"7\" text=\"요청일\"/><Cell col=\"8\" text=\"요청자\"/><Cell col=\"9\" text=\"승인여부\"/><Cell col=\"10\" text=\"승인일\"/><Cell col=\"11\" text=\"승인자\"/></Band><Band id=\"body\"><Cell text=\"expr:currow+1\"/><Cell col=\"1\" text=\"bind:BCNC_CODE\"/><Cell col=\"2\" edittype=\"expand\" style=\"align:left;\" text=\"bind:ENTRPS_BCNC_NM\" expandshow=\"expr:dataset.getColumn(currow, &quot;APV_AT&quot;) == &quot;1&quot; ? 'hide':'show'\"/><Cell col=\"3\" displaytype=\"normal\" edittype=\"none\" style=\"align:left;\" text=\"bind:SUBCNTR_CNST\" editlimit=\"100\" editlengthunit=\"utf8\"/><Cell col=\"4\" displaytype=\"date\" style=\"align: ;\" text=\"bind:CNTRCT_ST\" mask=\"yyyy-MM-dd\" calendardisplaynulltype=\"nulltext\"/><Cell col=\"5\" text=\"~\"/><Cell col=\"6\" displaytype=\"date\" style=\"align: ;\" text=\"bind:CNTRCT_ED\" mask=\"yyyy-MM-dd\" calendardisplaynulltype=\"nulltext\"/><Cell col=\"7\" displaytype=\"date\" style=\"align: ;\" text=\"bind:RQS_DT\" mask=\"yyyy-MM-dd\" calendardisplaynulltype=\"nulltext\"/><Cell col=\"8\" text=\"bind:REGISTER_NM\"/><Cell col=\"9\" displaytype=\"checkbox\" edittype=\"expr:comp.parent.isAdmin == true ? 'checkbox' : 'none'\" text=\"bind:APV_AT\"/><Cell col=\"10\" displaytype=\"date\" style=\"align: ;\" text=\"bind:APV_DT\" mask=\"yyyy-MM-dd\" calendardisplaynulltype=\"nulltext\"/><Cell col=\"11\" text=\"bind:UPDUSR_NM\"/></Band></Format></Formats>");this.addChild(_a.name,_a);_a=new Static("Static08","absolute","0","62",null,"5","28",null,this);_a.set_taborder("9");_a.set_text("5");_a.set_visible("false");_a.style.set_background("#dc143c3c");_a.style.set_align("center middle");this.addChild(_a.name,_a);_a=new Div("div_search","absolute","0","0",null,"33","28",null,this);_a.set_taborder("10");_a.set_cssclass("div_WFSA_Box");this.addChild(_a.name,_a);_a=new MaskEdit("msk_CNTRCT_NO","absolute","80","5","115","21",null,null,this.div_search);_a.set_taborder("20");_a.set_readonly("true");_a.set_type("string");_a.set_mask("####-#-#####");_a.set_maskchar(" ");_a.set_cssclass("msk_WF_Essential");_a.style.set_align("left middle");this.div_search.addChild(_a.name,_a);_a=new Static("sta_CNTRCT_NO","absolute","16","5","64","21",null,null,this.div_search);_a.set_taborder("21");_a.set_text("계약번호");_a.set_wordwrap("char");_a.set_cssclass("sta_WFSA_Label");this.div_search.addChild(_a.name,_a);_a=new Static("Static36","absolute","350","0","38","5",null,null,this.div_search);_a.set_taborder("22");_a.set_text("5");_a.set_visible("false");_a.style.set_background("#fa794f66");_a.style.set_align("center middle");this.div_search.addChild(_a.name,_a);_a=new Static("Static37","absolute","358","8","38","5",null,null,this.div_search);_a.set_taborder("23");_a.set_text("5");_a.set_visible("false");_a.style.set_background("#fa794f66");_a.style.set_align("center middle");this.div_search.addChild(_a.name,_a);_a=new Edit("edt_CNTRCT_NM","absolute","197","5","280","21",null,null,this.div_search);_a.set_taborder("25");_a.set_readonly("true");this.div_search.addChild(_a.name,_a);_a=new Button("searchCtrt","absolute","174","5","21","21",null,null,this.div_search);_a.set_taborder("26");_a.set_cssclass("btn_WF_Search");this.div_search.addChild(_a.name,_a);_a=new Static("Static04","absolute","0","5","15",null,null,"5",this.div_search);_a.set_taborder("31");_a.set_text("15");_a.set_visible("false");_a.style.set_background("#00ffff66");this.div_search.addChild(_a.name,_a);_a=new Static("Static00","absolute","477","5","15",null,null,"5",this.div_search);_a.set_taborder("32");_a.set_text("15");_a.set_visible("false");_a.style.set_background("#00ffff66");this.div_search.addChild(_a.name,_a);_a=new Static("sta_CNTRCT_NO00","absolute","493","5","64","21",null,null,this.div_search);_a.set_taborder("33");_a.set_text("승인여부");_a.set_wordwrap("char");_a.set_cssclass("sta_WFSA_Label");this.div_search.addChild(_a.name,_a);_a=new Combo("cbo_hrm048","absolute","555","5","110","21",null,null,this.div_search);this.div_search.addChild(_a.name,_a);_a.set_taborder("34");_a.set_innerdataset("ds_hrm048");_a.set_codecolumn("CODE");_a.set_datacolumn("CODE_NM");_a=new Static("Static05","absolute",null,"0","13","735","0",null,this);_a.set_taborder("11");_a.set_text("스\r\n크\r\n롤\r\n13");_a.set_visible("false");_a.style.set_background("#d07b173c");_a.style.set_align("center middle");this.addChild(_a.name,_a);_a=new Static("Static04","absolute","1031","0","15","735",null,null,this);_a.set_taborder("12");_a.set_text("15");_a.set_visible("false");_a.style.set_background("#1b3cd23c");_a.style.set_align("center middle");this.addChild(_a.name,_a);_a=new Static("sta_top","absolute","0","33",null,"10","28",null,this);_a.set_taborder("13");_a.set_text("10");_a.set_visible("false");_a.style.set_background("#dc143c3c");_a.style.set_align("center middle");this.addChild(_a.name,_a);_a=new Static("sta_cntrctList","absolute","0","43",null,"19","908",null,this);_a.set_taborder("14");_a.set_text("시공계획서");_a.set_cssclass("sta_WF_Title02");this.addChild(_a.name,_a);_a=new Static("Static00","absolute","0",null,null,"5","28","234",this);_a.set_taborder("15");_a.set_text("5");_a.set_visible("false");_a.style.set_background("#dc143c3c");_a.style.set_align("center middle");this.addChild(_a.name,_a);_a=new Static("Static01","absolute","0",null,null,"10","28","258",this);_a.set_taborder("16");_a.set_text("10");_a.set_visible("false");_a.style.set_background("#dc143c3c");_a.style.set_align("center middle");this.addChild(_a.name,_a);_a=new Static("sta_gnfdList03","absolute","0",null,"100","19",null,"239",this);_a.set_taborder("17");_a.set_text("첨부파일");_a.set_cssclass("sta_WF_Title02");_a.style.set_align("left middle");this.addChild(_a.name,_a);_a=new Static("sta_title00","absolute","86","43","430","19",null,null,this);_a.set_taborder("18");_a.set_text("※ 계약시스템의 하도급관리에서 등록된 하도급내역이 조회됩니다.");_a.style.set_color("red");_a.style.set_padding("0 0 0 0");_a.style.set_align("left middle");_a.style.set_font("bold 9 Gulim");this.addChild(_a.name,_a);_a=new Layout("default","",0,33,this.div_search,function(_b){_b.set_taborder("10");_b.set_cssclass("div_WFSA_Box");});this.div_search.addLayout(_a.name,_a);_a=new Layout("default","",1059,735,this,function(_b){_b.set_classname("PRJ010112");_b.set_titletext("시공계획서 등록/변경");});this.addLayout(_a.name,_a);_a=new BindItem("item1","div_search.msk_CNTRCT_NO","value","ds_cond","CNTRCT_NO");this.addChild(_a.name,_a);_a.bind();_a=new BindItem("item43","div_search.edt_CNTRCT_NM","value","ds_cond","CNTRCT_NM");this.addChild(_a.name,_a);_a.bind();_a=new BindItem("item10","div_search.cbo_hrm048","value","ds_cond","APV_AT");this.addChild(_a.name,_a);_a.bind();_a=null;};this.addIncludeScript("PRJ010112.xfdl","lib::comInclude.xjs");this.addIncludeScript("PRJ010112.xfdl","mis_lib::misUtil.xjs");this.addIncludeScript("PRJ010112.xfdl","lib::comUpDownUtils.xjs");this.registerScript("PRJ010112.xfdl",function(){this.File_UpDownManager=null;this.isAdmin=false;var _a= -1;this.PRJ010112_oninit=function(_b,_c){};this.PRJ010112_onload=function(_b,_c){this.fn_init_form();this.fn_init_dataset();};this.fn_init_form=function(){this.gfn_initForm(this);this.fn_misFormInit(this);this.ds_cond.clearData();var _b=this.ds_cond.addRow();var _c=[["ds_hrm048","HRM048","Y","A","B"]];var _d=function(_e,_f,_g){if(this.gfn_authGrpId("PRJ_ADMIN")!= -1||this.gfn_authGrpId("CTR_ADMIN")!= -1){this.isAdmin=true;}};this.gfn_comboLoad(_c,_d);};this.fn_init_dataset=function(){var _b={useMultiUpload:true,onChange:this.fn_onFileSelected,onSuccess:this.fn_onFileSuccess};this.File_UpDownManager=new this.fileUpDownManager(this,"PMS","PRJ");this.File_UpDownManager.init(_b);};this.fn_search=function(){if(!this.gfn_checkValidation_NoUpdChk(this.ds_cond,this.ds_validation)){return;}this.ds_bfExePln.clearData();this.ds_fileList.clearData();this.fn_transaction("selectDsMain");};this.fn_save=function(){if(!this.comUtils.isDatasetUpdated(this.ds_bfExePln)){this.gfn_message("comm.데이터.변경.없음");return false;}if(!this.gfn_checkValidation(this.ds_bfExePln,this.ds_validation)){return;}if(this.gfn_message("confirm.저장.여부")){_a=this.ds_bfExePln.rowposition;this.fn_transaction("saveDsMain");}};this.fn_transaction=function(_b){switch(_b){case "selectDsMain":var _c="hsco/pms/prj/PRJ010112/selectDsMain.do";var _d="input1=ds_cond";var _e="ds_bfExePln=output1";break;case "saveDsMain":var _c="hsco/pms/prj/PRJ010112/saveDsMain.do";var _d="input1=ds_bfExePln:U";var _e="";break;case "selectBzPcpFile":var _c="hsco/pms/prj/PRJ010112/selectBzPcpFile.do";var _d="input1=ds_condSub";var _e="this.ds_fileList=output1";break;case "selectCtgryFile":var _c="/hsco/pms/prj/PRJ010112/selectCtgryFile.do";var _d="input1=ds_condSub1";var _e="ds_ctgry_file=output1";break;case "saveCtgryFile":var _c="/hsco/pms/prj/PRJ010112/saveCtgryFile.do";var _d="input1=ds_ctgry_file:A";var _e="ds_ctgry_file=output1";break;case "selectAtchFile":var _c="/hsco/cmm/file/selectAtchmnFileList.do";var _d="input1=ds_cond_file";var _e="ds_fileList=output1";break;case "deleteFile":var _c="hsco/cmm/file/deleteFile.do";var _d="input1=ds_fileList:U";var _e="ds_fileList=output1";break;}Ex.core.tran(this,_b,_c,_d,_e);};this.fn_callBack=function(_b,_c,_d){if(_c!=0){this.gfn_callback_message(_b,_c,_d);}if(_c!=0){}else{switch(_b){case "selectDsMain":if(_a> -1){this.ds_bfExePln.set_useclientlayout(false);this.ds_bfExePln.set_rowposition(_a);this.ds_bfExePln.set_useclientlayout(true);_a= -1;}break;case "saveDsMain":this.gfn_message("success.처리.성공");this.fn_search();break;case "selectBzPcpFile":this.ds_fileList.filter("USE_AT == '1'");this.fn_transaction("selectDsSub");break;case "selectAtchFile":if(this.ds_fileList.getRowCount()>0){var _e=this.ds_fileList.rowposition;var _f=this.ds_fileList.getColumn(_e,"FILE_SN");var _g=this.ds_fileList.getColumn(_e,"ORGINL_FILE_NM");var _h=this.ds_fileList.getColumn(_e,"FILE_ORDR");var _i=this.ds_ctgry_file.rowposition;this.ds_ctgry_file.setColumn(_i,"FILE_SN",_f);this.ds_ctgry_file.setColumn(_i,"ORGINL_FILE_NM",_g);this.ds_ctgry_file.setColumn(_i,"FILE_ORDR",_h);var _j=this.ds_ctgry_file.getColumn(_i,"DOC_SN");var _k=this.ds_ctgry_file.getColumn(_i,"CTGRY_FILE_ID");if(this.comUtils.isNull(_j)||this.comUtils.isNull(_k)){this.fn_transaction("saveCtgryFile");}}break;case "deleteFile":this.fn_transaction("selectCtgryFile");break;case "saveCtgryFile":var _l=this.ds_ctgry_file.rowposition;var _j=this.ds_ctgry_file.getColumn(_l,"DOC_SN");this.ds_bfExePln.set_enableevent(false);this.ds_bfExePln.set_updatecontrol(false);var _e=this.ds_bfExePln.rowposition;this.ds_bfExePln.setColumn(_e,"DOC_SN",_j);this.ds_bfExePln.set_updatecontrol(true);this.ds_bfExePln.set_enableevent(true);break;}}};this.fn_popupCallBack=function(_b,_c){var _d=new Dataset();var _e=_d.loadXML(_c);if(!_e){return false;}var _d=new Dataset();var _e=_d.loadXML(_c);switch(_b){case "CTR030100_P08":if(_e){var _f=_d.getColumn(0,"CNTRCT_NO");var _g=_d.getColumn(0,"CNTRCT_NM");var _h=_f.substr(0,4);this.ds_cond.set_enableevent(false);this.ds_cond.setColumn(0,"CNTRCT_YEAR",_h);this.ds_cond.setColumn(0,"CNTRCT_NO",_f);this.ds_cond.setColumn(0,"CNTRCT_NM",_g);this.ds_cond.setColumn(0,"BSNS_CODE",_d.getColumn(0,"BSNS_CODE"));this.ds_cond.setColumn(0,"BSNS_NM",_d.getColumn(0,"BSNS_NM"));this.ds_cond.set_enableevent(true);this.fn_search();}break;case "CTR030100_P10":if(_e){var _i=_d.getColumn(0,"BCNC_CODE");var _j=_d.getColumn(0,"BCNC_NM");var _k=_d.getColumn(0,"SEQ");var _l=this.ds_bfExePln.rowposition;var _m=this.ds_bfExePln.getColumn(_l,"SUBCNTR_ENTRPS_CODE");var _n=this.ds_bfExePln.getColumn(_l,"SUBCNTR_ENTRPS");this.ds_bfExePln.setColumn(_l,"SBC_BCNC_CODE",_d.getColumn(0,"BCNC_CODE"));this.ds_bfExePln.setColumn(_l,"SBC_SEQ",_d.getColumn(0,"SEQ"));this.ds_bfExePln.setColumn(_l,"ENTRPS_BCNC_NM",_d.getColumn(0,"SUBCNTR_ENTRPS"));this.ds_bfExePln.setColumn(_l,"SUBCNTR_CNST",_d.getColumn(0,"SUBCNTR_CNST"));this.ds_bfExePln.setColumn(_l,"CNTRCT_ST",_d.getColumn(0,"CNTRCT_PD_1"));this.ds_bfExePln.setColumn(_l,"CNTRCT_ED",_d.getColumn(0,"CNTRCT_PD_2"));break;}}};this.fn_cancel=function(){if(Ex.util.isUpdated(this.ds_bfExePln)){if(!this.gfn_message("confirm.변경.취소.여부")){return false;}this.ds_bfExePln.reset();this.ds_bfExePln.applyChange();}};this.div_search_searchCtrt_onclick=function(_b,_c){var _d={arg_0:this,cntrctYear:this.ds_cond.getColumn(0,"CNTRCT_YEAR"),infrmlCntrctAt:0};this.gfn_popup("CTR030100_P08",800,530,"계약번호 선택",_d,"mis_ctr::CTR030100_P08.xfdl","fn_popupCallBack",true);};this.btn_Add_onclick=function(_b,_c){if(!this.gfn_checkValidation_NoUpdChk(this.ds_cond,this.ds_validation)){return;}var _d=this.ds_bfExePln.addRow();this.ds_fileList.clearData();this.ds_bfExePln.setColumn(_d,"CNTRCT_YEAR",this.ds_cond.getColumn(0,"CNTRCT_YEAR"));this.ds_bfExePln.setColumn(_d,"CNTRCT_NO",this.ds_cond.getColumn(0,"CNTRCT_NO"));this.ds_bfExePln.setColumn(_d,"CNTRCT_NM",this.ds_cond.getColumn(0,"CNTRCT_NM"));this.ds_bfExePln.setColumn(_d,"BSNS_CODE",this.ds_cond.getColumn(0,"BSNS_CODE"));this.ds_bfExePln.setColumn(_d,"BSNS_NM",this.ds_cond.getColumn(0,"BSNS_NM"));this.ds_bfExePln.setColumn(_d,"RQS_DT",this.comUtils.getClientDate("YYYYMMDD"));this.ds_bfExePln.setColumn(_d,"REGISTER_NM",this.fn_getEmpnm());};this.btn_Delete_onclick=function(_b,_c){if(!this.gfn_checkValidation_NoUpdChk(this.ds_cond,this.ds_validation)){return;}this.ds_bfExePln.deleteRow(this.ds_bfExePln.rowposition);};this.ds_bfExePln_onrowposchanged=function(_b,_c){if(_c.newrow> -1&&_b.getRowType(_c.newrow)!=Dataset.ROWTYPE_INSERT){this.ds_condSub1.clearData();var _d=this.ds_condSub1.addRow();this.ds_condSub1.setColumn(_d,"CNTRCT_NO",_b.getColumn(_c.newrow,"CNTRCT_NO"));this.ds_condSub1.setColumn(_d,"BZ_PCP_SN",_b.getColumn(_c.newrow,"BZ_PCP_SN"));this.ds_condSub1.setColumn(_d,"DOC_SN",_b.getColumn(_c.newrow,"DOC_SN"));if(_b.getColumn(_c.newrow,"APV_AT")=="1"){this.btn_Del01.set_enable(false);}else{this.btn_Del01.set_enable(true);}this.fn_search_ctgryFile();}else{this.ds_fileList.clearData();}};this.ds_bfExePln_cancolumnchange=function(_b,_c){if(_c.columnid=="APV_AT"){if(this.gfn_authGrpId("PRJ_ADMIN")== -1&&this.gfn_authGrpId("CTR_ADMIN")== -1){return false;}}};this.ds_bfExePln_oncolumnchanged=function(_b,_c){if(_c.columnid=="APV_AT"){switch(_c.newvalue){case "1":_b.setColumn(_c.row,"APV_DT",this.comUtils.getClientDate("YYYYMMDD"));_b.setColumn(_c.row,"UPDUSR_NM",this.fn_getEmpnm());this.btn_Del01.set_enable(false);break;default:_b.setColumn(_c.row,"APV_DT","");this.ds_bfExePln.setColumn(_c.row,"UPDUSR_NM","");this.btn_Del01.set_enable(true);break;}}};this.ds_cond_oncolumnchanged=function(_b,_c){if(_c.columnid=="CNTRCT_NO"||_c.columnid=="APV_AT"){if(_c.oldvalue!=undefined){this.fn_search();}}};this.grd_bfExePln_onexpanddown=function(_b,_c){var _d={arg_0:this,popMode:"하도급",bsnsCode:this.ds_bfExePln.getColumn(_c.row,"BSNS_CODE"),bsnsNm:this.ds_bfExePln.getColumn(_c.row,"BSNS_NM"),cntrctNo:this.ds_bfExePln.getColumn(_c.row,"CNTRCT_NO"),cntrctNm:this.ds_bfExePln.getColumn(_c.row,"CNTRCT_NM")};this.gfn_popup("CTR030100_P10",800,530,"계약업체 선택",_d,"mis_ctr::CTR030100_P10.xfdl","fn_popupCallBack",true);};this.grd_ctgry_file_oncellclick=function(_b,_c){if(_c.cell=='5'){if(this.ds_bfExePln.getColumn(this.ds_bfExePln.rowposition,"APV_AT")=="1"){this.gfn_message("errors.값확인.요청","미승인건이|승인여부를");return false;}if(this.ds_fileList.getRowCount()>0){this.gfn_message("info.파일.업로드.허용건수초과","1");return false;}this.fn_autoFileSn("PMS","PRJ",this.File_UpDownManager,this.ds_fileList,this.ds_ctgry_file,"TBBH_CTGRY_FILE","FILE_SN",["CTGRY_FILE_ID"]);}if(_c.cell=='6'){if(this.ds_bfExePln.getColumn(this.ds_bfExePln.rowposition,"APV_AT")=="1"){this.gfn_message("errors.값확인.요청","미승인건이|승인여부를");return false;}if(this.ds_fileList.getRowCount==0){this.gfn_message("info.파일정보.없음");return false;}if(!this.gfn_message("confirm.선택파일.삭제여부","들")){return false;}this.ds_fileList.deleteAll();this.ds_cond_file.clearData();this.fn_transaction("deleteFile");var _d=this.ds_ctgry_file.rowposition;this.ds_ctgry_file.set_enableevent(false);this.ds_ctgry_file.deleteRow(_d);this.ds_ctgry_file.set_enableevent(true);this.fn_transaction("saveCtgryFile");}if(_c.cell=='7'){if(this.ds_fileList.getRowCount()==0){this.gfn_message("err.파일.다운로드.정보없음");return false;}for(var _h=0;_h<this.ds_fileList.getRowCount();_h++ ){var _e=this.ds_fileList.getColumn(_h,"FILE_SN");var _f=this.ds_fileList.getColumn(_h,"FILE_ORDR");var _g=this.ds_fileList.getColumn(_h,"ORGINL_FILE_NM");this.File_UpDownManager.download(_e,_f,_g);}}};this.fn_search_ctgryFile=function(){this.ds_ctgry_file.set_enableevent(false);this.ds_ctgry_file.clearData();this.ds_ctgry_file.set_enableevent(true);if(this.ds_bfExePln.getRowCount()>0){this.fn_transaction("selectCtgryFile");}};this.ds_ctgry_file_onrowposchanged=function(_b,_c){this.ds_fileList.clearData();if(_c.newrow> -1){var _d=_b.getColumn(_c.newrow,"FILE_SN");this.ds_cond_file.clearData();var _e=this.ds_cond_file.addRow();this.ds_cond_file.setColumn(_e,"FILE_SN",_d);this.fn_transaction("selectAtchFile");}};});this.on_initEvent=function(){this.ds_cond.addEventHandler("oncolumnchanged",this.ds_cond_oncolumnchanged,this);this.ds_bfExePln.addEventHandler("onrowposchanged",this.ds_bfExePln_onrowposchanged,this);this.ds_bfExePln.addEventHandler("oncolumnchanged",this.ds_bfExePln_oncolumnchanged,this);this.ds_bfExePln.addEventHandler("cancolumnchange",this.ds_bfExePln_cancolumnchange,this);this.ds_ctgry_file.addEventHandler("onrowposchanged",this.ds_ctgry_file_onrowposchanged,this);this.addEventHandler("onload",this.PRJ010112_onload,this);this.addEventHandler("oninit",this.PRJ010112_oninit,this);this.btn_cancel.addEventHandler("onclick",this.fn_cancel,this);this.btn_Del01.addEventHandler("onclick",this.btn_Delete_onclick,this);this.btn_Add01.addEventHandler("onclick",this.btn_Add_onclick,this);this.grd_ctgry_file.addEventHandler("oncellclick",this.grd_ctgry_file_oncellclick,this);this.grd_bfExePln.addEventHandler("onexpanddown",this.grd_bfExePln_onexpanddown,this);this.div_search.searchCtrt.addEventHandler("onclick",this.div_search_searchCtrt_onclick,this);};this.loadIncludeScript("PRJ010112.xfdl");};})();