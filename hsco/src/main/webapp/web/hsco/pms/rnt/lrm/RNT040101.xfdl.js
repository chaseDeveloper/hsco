(function(){return function(){if(!this._is_form){return;}this.on_create=function(){var _a=null;if(Form==this.constructor){this.set_name("RNT040101");this.set_classname("RNT040101");this.set_titletext("공종코드등록");this._setFormPosition(0,0,1059,735);}_a=new Dataset("ds_cmmn_m",this);_a.set_useclientlayout("true");_a._setContents("<ColumnInfo><Column id=\"CODE\" type=\"STRING\" size=\"255\"/><Column id=\"CODE_NM\" type=\"STRING\" size=\"255\"/><Column id=\"GRP_CODE\" type=\"STRING\" size=\"255\"/><Column id=\"CODE_ORDR\" type=\"STRING\" size=\"255\"/><Column id=\"VAL0\" type=\"STRING\" size=\"255\"/><Column id=\"INT_VAL\" type=\"BIGDECIMAL\" size=\"10\"/><Column id=\"REGISTER_ID\" type=\"STRING\" size=\"255\"/><Column id=\"REGIST_DT\" type=\"STRING\" size=\"255\"/><Column id=\"UPDUSR_ID\" type=\"STRING\" size=\"255\"/><Column id=\"UPDT_DT\" type=\"STRING\" size=\"255\"/><Column id=\"GRP_CODE_SN\" type=\"STRING\" size=\"256\"/><Column id=\"USE_AT\" type=\"STRING\" size=\"256\"/></ColumnInfo>");this.addChild(_a.name,_a);_a=new Dataset("ds_cmmn_d",this);_a.set_useclientlayout("true");_a._setContents("<ColumnInfo><Column id=\"CODE\" type=\"STRING\" size=\"255\"/><Column id=\"CODE_NM\" type=\"STRING\" size=\"255\"/><Column id=\"GRP_CODE\" type=\"STRING\" size=\"255\"/><Column id=\"CODE_ORDR\" type=\"STRING\" size=\"255\"/><Column id=\"VAL0\" type=\"STRING\" size=\"255\"/><Column id=\"INT_VAL\" type=\"BIGDECIMAL\" size=\"10\"/><Column id=\"REGISTER_ID\" type=\"STRING\" size=\"255\"/><Column id=\"REGIST_DT\" type=\"STRING\" size=\"255\"/><Column id=\"UPDUSR_ID\" type=\"STRING\" size=\"255\"/><Column id=\"UPDT_DT\" type=\"STRING\" size=\"255\"/><Column id=\"USE_AT\" type=\"STRING\" size=\"255\"/><Column id=\"GRP_CODE_SN\" type=\"STRING\" size=\"256\"/><Column id=\"FILE_ORDR\" type=\"STRING\" size=\"256\"/><Column id=\"FILE_SN\" type=\"STRING\" size=\"256\"/><Column id=\"FILE_EXTSN\" type=\"STRING\" size=\"256\"/><Column id=\"FILE_NM\" type=\"STRING\" size=\"256\"/><Column id=\"BTN\" type=\"STRING\" size=\"256\"/></ColumnInfo>");this.addChild(_a.name,_a);_a=new Dataset("ds_cond00",this);_a.set_firefirstcount("0");_a.getSetter("firenextcount").set("0");_a.set_useclientlayout("true");_a.set_updatecontrol("true");_a.set_enableevent("true");_a.set_loadkeymode("keep");_a.set_loadfiltermode("keep");_a.set_reversesubsum("false");_a._setContents("<ColumnInfo><Column id=\"VAL0\" type=\"STRING\" size=\"256\"/></ColumnInfo>");this.addChild(_a.name,_a);_a=new Dataset("ds_validation",this);_a.set_firefirstcount("0");_a.getSetter("firenextcount").set("0");_a.set_useclientlayout("false");_a.set_updatecontrol("true");_a.set_enableevent("true");_a.set_loadkeymode("keep");_a.set_loadfiltermode("keep");_a.set_reversesubsum("false");_a._setContents("<ColumnInfo><Column id=\"compId\" type=\"STRING\" size=\"256\"/><Column id=\"colId\" type=\"STRING\" size=\"256\"/><Column id=\"PK\" type=\"STRING\" size=\"256\"/><Column id=\"notNull\" type=\"STRING\" size=\"256\"/><Column id=\"type\" type=\"STRING\" size=\"256\"/><Column id=\"nlength\" type=\"STRING\" size=\"256\"/><Column id=\"from\" type=\"STRING\" size=\"256\"/><Column id=\"to\" type=\"STRING\" size=\"256\"/><Column id=\"lengthChkGb\" type=\"STRING\" size=\"256\"/><Column id=\"msgId\" type=\"STRING\" size=\"256\"/><Column id=\"expr\" type=\"STRING\" size=\"256\"/><Column id=\"func\" type=\"STRING\" size=\"256\"/></ColumnInfo><Rows><Row><Col id=\"colId\">CODE_NM</Col><Col id=\"notNull\">Y</Col><Col id=\"compId\">Grid00</Col><Col id=\"msgId\">코드명</Col><Col id=\"from\"/><Col id=\"to\"/></Row><Row><Col id=\"colId\">INT_VAL</Col><Col id=\"compId\">Grid00</Col><Col id=\"notNull\">Y</Col><Col id=\"msgId\">교체주기</Col></Row><Row><Col id=\"compId\">Grid04</Col><Col id=\"colId\">CODE_NM</Col><Col id=\"notNull\">Y</Col><Col id=\"msgId\">코드명</Col></Row></Rows>");this.addChild(_a.name,_a);_a=new Dataset("ds_cnt",this);_a.set_firefirstcount("0");_a.getSetter("firenextcount").set("0");_a.set_useclientlayout("false");_a.set_updatecontrol("true");_a.set_enableevent("true");_a.set_loadkeymode("keep");_a.set_loadfiltermode("keep");_a.set_reversesubsum("false");_a._setContents("<ColumnInfo><Column id=\"cnt\" type=\"STRING\" size=\"256\"/></ColumnInfo>");this.addChild(_a.name,_a);_a=new Dataset("ds_cond01",this);_a.set_firefirstcount("0");_a.getSetter("firenextcount").set("0");_a.set_useclientlayout("true");_a.set_updatecontrol("true");_a.set_enableevent("true");_a.set_loadkeymode("keep");_a.set_loadfiltermode("keep");_a.set_reversesubsum("false");_a._setContents("<ColumnInfo><Column id=\"THNG_CODE\" type=\"STRING\" size=\"256\"/></ColumnInfo>");this.addChild(_a.name,_a);_a=new Dataset("ds_cond05",this);_a.set_firefirstcount("0");_a.getSetter("firenextcount").set("0");_a.set_useclientlayout("true");_a.set_updatecontrol("true");_a.set_enableevent("true");_a.set_loadkeymode("keep");_a.set_loadfiltermode("keep");_a.set_reversesubsum("false");_a._setContents("<ColumnInfo><Column id=\"CODE\" type=\"STRING\" size=\"256\"/><Column id=\"CODE_NM\" type=\"STRING\" size=\"256\"/><Column id=\"USE_AT\" type=\"STRING\" size=\"256\"/></ColumnInfo>");this.addChild(_a.name,_a);_a=new Static("Static06","absolute","333","10","10","692",null,null,this);_a.set_taborder("55");_a.set_text("10");_a.set_visible("false");_a.style.set_background("#1b3cd23c");_a.style.set_align("center middle");this.addChild(_a.name,_a);_a=new Grid("Grid04","absolute","0","34","333",null,null,"0",this);_a.set_taborder("56");_a.set_autofittype("col");_a.set_binddataset("ds_cmmn_m");_a._setContents("<Formats><Format id=\"default\"><Columns><Column size=\"128\"/><Column size=\"213\"/></Columns><Rows><Row size=\"25\" band=\"head\"/><Row size=\"24\"/></Rows><Band id=\"head\"><Cell style=\"font:9 돋움;\" text=\"코드\"/><Cell col=\"1\" style=\"font:9 돋움;\" text=\"코드명\"/></Band><Band id=\"body\"><Cell text=\"bind:CODE\"/><Cell col=\"1\" edittype=\"normal\" text=\"bind:CODE_NM\"/></Band></Format></Formats>");this.addChild(_a.name,_a);_a=new Grid("Grid00","absolute","343","34",null,null,"28","0",this);_a.set_taborder("65");_a.set_autofittype("col");_a.set_binddataset("ds_cmmn_d");_a._setContents("<Formats><Format id=\"default\"><Columns><Column size=\"40\"/><Column size=\"100\"/><Column size=\"80\"/><Column size=\"100\"/><Column size=\"20\"/></Columns><Rows><Row size=\"24\" band=\"head\"/><Row size=\"24\"/></Rows><Band id=\"head\"><Cell style=\"font:9 돋움;\" text=\"코드\"/><Cell col=\"1\" style=\"font:9 돋움;\" text=\"코드명\"/><Cell col=\"2\" style=\"font:9 돋움;\" text=\"교체주기\"/><Cell col=\"3\" colspan=\"2\" style=\"font:9 돋움;\" text=\"첨부파일\"/></Band><Band id=\"body\"><Cell text=\"bind:CODE\"/><Cell col=\"1\" edittype=\"normal\" text=\"bind:CODE_NM\"/><Cell col=\"2\" edittype=\"normal\" text=\"bind:INT_VAL\"/><Cell col=\"3\" text=\"bind:FILE_NM\"/><Cell col=\"4\" displaytype=\"normal\" text=\"bind:BTN\" expandshow=\"show\"/></Band></Format></Formats>");this.addChild(_a.name,_a);_a=new Static("Static01","absolute",null,"0","13","735","0",null,this);_a.set_taborder("71");_a.set_text("스\r\n크\r\n롤\r\n13");_a.set_visible("false");_a.style.set_background("#d07b173c");_a.style.set_align("center middle");this.addChild(_a.name,_a);_a=new Static("Static00","absolute","1031","0","15","735",null,null,this);_a.set_taborder("72");_a.set_text("15");_a.set_visible("false");_a.style.set_background("#1b3cd23c");_a.style.set_align("center middle");this.addChild(_a.name,_a);_a=new Static("Static02","absolute","0%","29",null,"5","2.64%",null,this);_a.set_taborder("76");_a.set_text("5");_a.set_visible("false");_a.style.set_background("#dc143c3c");_a.style.set_align("center middle");this.addChild(_a.name,_a);_a=new Static("Static08","absolute","0","0",null,"10","28",null,this);_a.set_taborder("79");_a.set_text("10");_a.set_visible("false");_a.style.set_background("#dc143c3c");_a.style.set_align("center middle");this.addChild(_a.name,_a);_a=new Button("Button08","absolute",null,"10","64","19","28",null,this);_a.set_taborder("80");_a.set_text("행삭제");_a.set_cssclass("btn_WF_Griddel");_a.set_visible("true");this.addChild(_a.name,_a);_a=new Button("Button05","absolute",null,"10","64","19","95",null,this);_a.set_taborder("81");_a.set_text("행추가");_a.set_cssclass("btn_WF_Gridadd");_a.set_visible("true");this.addChild(_a.name,_a);_a=new Static("Static03","absolute","343","10","169","19",null,null,this);_a.set_taborder("83");_a.set_text("공정코드");_a.set_cssclass("sta_WF_Title02");this.addChild(_a.name,_a);_a=new Static("Static04","absolute","0","10","168","19",null,null,this);_a.set_taborder("84");_a.set_text("공종구분");_a.set_cssclass("sta_WF_Title02");this.addChild(_a.name,_a);_a=new Layout("default","",1059,735,this,function(_b){_b.set_classname("RNT040101");_b.set_titletext("공종코드등록");});this.addLayout(_a.name,_a);_a=null;};this.addIncludeScript("RNT040101.xfdl","pms_lib::pmsUtilInclude.xjs");this.registerScript("RNT040101.xfdl",function(){this.FILE_MANAGER=null;this.RNT040101_oninit=function(_a,_b){this.fn_init();this.fn_init_form();this.fn_init_dataset();};this.RNT040101_onload=function(_a,_b){this.fn_search();var _c={onChange:this.fn_onFileSelected,onSuccess:this.fn_onFileSuccess};this.FILE_MANAGER=new this.fileManager(this,"PMS","RPA");this.FILE_MANAGER.init(_c);};this.fn_init_form=function(){this.gfn_initForm(this);};this.fn_init_dataset=function(){this.checkDs.push(this.ds_cmmn_m);this.checkDs.push(this.ds_cmmn_d);};this.fn_search=function(){this.fn_transaction("selectSlaryList");};this.fn_save=function(){if(this.ds_cmmn_m.getRowType(this.ds_cmmn_m.rowposition)>1){if(!this.gfn_checkValidation(this.Grid04,this.ds_validation)){return;}}if(this.ds_cmmn_d.getRowType(this.ds_cmmn_d.rowposition)>1){if(!this.gfn_checkValidation(this.Grid00,this.ds_validation)){return;}}if(this.gfn_message("confirm.저장.여부")){this.fn_transaction("saveSlaryList");}};this.fn_save2=function(){var _a=this.FILE_MANAGER.hasFile();if(_a){var _b=this.FILE_MANAGER.getfileCount();var _c="hsco/pms/rnt/rnt040101/atchCUD.do";var _d="input1=ds_cond05";var _e="ds_failList=failList";this.FILE_MANAGER.upload(_c,_d,_e);}else{this.fn_transaction("saveSlaryList2");}};this.fn_transaction=function(_a){switch(_a){case "selectSlaryList":var _b="hsco/pms/rnt/rnt040101/getList.do";var _c="";var _d="ds_cmmn_m=output1";break;case "selectSlaryList1":this.ds_cond00.clearData();var _e=this.ds_cond00.addRow();if(this.ds_cmmn_m.getRowType(this.ds_cmmn_m.rowposition)=='2'){this.ds_cond00.setColumn(_e,"VAL0","0");}else{this.ds_cond00.setColumn(_e,"VAL0",this.ds_cmmn_m.getColumn(this.ds_cmmn_m.rowposition,"CODE"));}var _b="hsco/pms/rnt/rnt040101/getList1.do";var _c="input1=ds_cond00";var _d="ds_cmmn_d=output1";break;case "Cnt":this.ds_cond01.clearData();this.ds_cnt.clearData();var _e=this.ds_cond01.addRow();this.ds_cond01.setColumn(_e,"THNG_CODE",this.ds_cmmn_d.getColumn(this.ds_cmmn_d.rowposition,"CODE"));var _b="hsco/pms/rnt/rnt040101/cnt.do";var _c="input1=ds_cond01";var _d="ds_cnt=output1";break;case "saveSlaryList":var _b="hsco/pms/rnt/rnt040101/listCUD.do";var _f="input1=ds_cmmn_d:U"+" input2=ds_cmmn_m:U";var _c=_f;var _d="";break;case "saveSlaryList2":var _b="hsco/pms/rnt/rnt040101/atchCUD.do";var _c="input1=ds_cond05";var _d="";break;}Ex.core.tran(this,_a,_b,_c,_d);};this.fn_callBack=function(_a,_b,_c){if(_a=="saveSlaryList"){if(this.gfn_message("success.처리.성공")){}this.fn_transaction("selectSlaryList1");this.gfn_callback_message(_a,_b,_c);}if(_b==0){return;}this.gfn_callback_message(_a,_b,_c);};this.ds_cmmn_m_onrowposchanged=function(_a,_b){this.fn_transaction("selectSlaryList1");};this.ds_cmmn_m_canrowposchange=function(_a,_b){for(var _d=1;_d<this.checkDs.length;_d++ ){if(this.comUtils.isDatasetUpdated(this.checkDs[_d])){var _c=this.gfn_message("confirm.변경.취소.여부");if(_c){this.checkDs[_d].reset();this.ds_cmmn_m_onrowposchanged();}return _c;}}};this.Button05_onclick=function(_a,_b){if(this.comUtils.isDatasetUpdated(this.ds_cmmn_m)==true){alert("공종구분을 선택하세요.");return;}var _c=this.ds_cmmn_d.addRow();this.ds_cmmn_d.setColumn(_c,"USE_AT",'1');this.ds_cmmn_d.setColumn(_c,"VAL0",this.ds_cmmn_m.getColumn(this.ds_cmmn_m.rowposition,"CODE"));this.ds_cmmn_d.setColumn(_c,"GRP_CODE_SN",this.ds_cmmn_m.getColumn(this.ds_cmmn_m.rowposition,"GRP_CODE_SN"));};this.Button08_onclick=function(_a,_b){if(this.gfn_message("confirm.삭제여부")){if(this.ds_cnt.getColumn(0,"CNT")>0){alert("사용중인 코드입니다.");return;}var _c=this.ds_cmmn_d.rowposition;var _d=this.ds_cmmn_d.getRowType(_c);this.ds_cmmn_d.deleteRow(_c);}};this.fn_insert=function(_a,_b){if(this.comUtils.isDatasetUpdated(this.ds_cmmn_d)==true){return;}var _c=this.ds_cmmn_m.addRow();this.ds_cmmn_m.setColumn(_c,"VAL0",'M');this.ds_cmmn_m.setColumn(_c,"GRP_CODE_SN",this.ds_cmmn_m.getColumn(this.ds_cmmn_m.rowposition-1,"GRP_CODE_SN"));this.ds_cmmn_m.setColumn(_c,"USE_AT",'1');};this.fn_delete=function(_a,_b){if(this.gfn_message("confirm.삭제여부")){if(this.ds_cmmn_d.rowcount>0){alert("사용중인 코드입니다.");return;}var _c=this.ds_cmmn_m.rowposition;var _d=this.ds_cmmn_m.getRowType(_c);this.ds_cmmn_m.deleteRow(_c);}};this.fn_cancel=function(){for(var _b=0;_b<this.checkDs.length;_b++ ){if(this.comUtils.isDatasetUpdated(this.checkDs[_b])){var _a=this.gfn_message("confirm.변경.취소.여부");if(_a){this.checkDs[_b].reset();}return _a;}}};this.ds_cmmn_d_onrowposchanged=function(_a,_b){this.fn_transaction("Cnt");};this.Grid00_oncellclick=function(_a,_b){if(_b.cell==_a.getBindCellIndex("body","FILE_NM")){if(!this.ds_cmmn_d.getColumn(_b.row,'FILE_SN')){return;}if(this.confirm("선택한 파일을 다운로드 하시겠습니까?")){this.fn_downloadAtchFile();}return;}else if(_b.cell==_a.getBindCellIndex("body","BTN")){if(this.ds_cmmn_d.getRowType(this.ds_cmmn_d.rowposition)!=Dataset.ROWTYPE_NORMAL){return;}this.fn_addAtchFile();}};this.fn_addAtchFile=function(){this.FILE_MANAGER.addFiles();};this.fn_onFileSelected=function(_a,_b){if(_a==this.FILE_MANAGER.TYPE_UPLOADER){var _c=this.pmsUtil.isArray(_b);if(_c){}else{this.ds_cond05.clearData();var _d=this.ds_cond05.addRow();this.ds_cond05.setColumn(_d,"CODE",this.ds_cmmn_d.getColumn(this.ds_cmmn_d.rowposition,"CODE"));this.ds_cond05.setColumn(_d,"CODE_NM",this.ds_cmmn_d.getColumn(this.ds_cmmn_d.rowposition,"CODE"));this.ds_cond05.setColumn(_d,"USE_AT",this.ds_cmmn_d.getColumn(this.ds_cmmn_d.rowposition,"USE_AT"));this.fn_save2();}}};this.fn_downloadAtchFile=function(){var _a=this.ds_cmmn_d.getColumn(this.ds_cmmn_d.rowposition,"FILE_SN");var _b=this.ds_cmmn_d.getColumn(this.ds_cmmn_d.rowposition,"FILE_ORDR");var _c=this.ds_cmmn_d.getColumn(this.ds_cmmn_d.rowposition,"FILE_NM");this.FILE_MANAGER.download(_a,_b,_c);};this.fn_onFileSuccess=function(_a,_b){if(_a==this.FILE_MANAGER.TYPE_UPLOADER){this.fn_transaction("selectSlaryList1");}if(_a==this.FILE_MANAGER.TYPE_DOWNLOADER){this.gfn_message("success.파일.다운로드.성공");}};});this.on_initEvent=function(){this.ds_cmmn_m.addEventHandler("onrowposchanged",this.ds_cmmn_m_onrowposchanged,this);this.ds_cmmn_m.addEventHandler("canrowposchange",this.ds_cmmn_m_canrowposchange,this);this.ds_cmmn_d.addEventHandler("onrowposchanged",this.ds_cmmn_d_onrowposchanged,this);this.addEventHandler("oninit",this.RNT040101_oninit,this);this.addEventHandler("onload",this.RNT040101_onload,this);this.Static06.addEventHandler("onclick",this.Static47_onclick,this);this.Grid00.addEventHandler("oncellclick",this.Grid00_oncellclick,this);this.Button08.addEventHandler("onclick",this.Button08_onclick,this);this.Button05.addEventHandler("onclick",this.Button05_onclick,this);};this.loadIncludeScript("RNT040101.xfdl");};})();