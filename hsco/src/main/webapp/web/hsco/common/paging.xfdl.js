(function(){return function(){if(!this._is_form){return;}this.on_create=function(){var _a=null;if(Form==this.constructor){this.set_name("Paging");this.set_classname("Paging");this.set_titletext("Paging Form");this._setFormPosition(0,0,400,20);}_a=new Layout("default","",400,20,this,function(_b){_b.set_classname("Paging");_b.set_titletext("Paging Form");});this.addLayout(_a.name,_a);_a=null;};this.registerScript("paging.xfdl",function(){this.DEFAULT_PAGE_BUTTON_SIZE=[18,18];this.MIN_PAGE_BUTTON_SIZE=[16,16];this.PAGE_BUTTON_GAP=2;this.USE_INPUT_PAGE=true;this.Paging_onload=function(_a,_b){};this.initPaging=function(_a,_b,_c,_d){Eco.XComp.setUserProperty(this,"listCount",_a);Eco.XComp.setUserProperty(this,"pageCount",_b);Eco.XComp.setUserProperty(this,"currentPage",1);Eco.XComp.setUserProperty(this,"pageChangeNotify",_c);Eco.XComp.setUserProperty(this,"scope",_d);var _e={x:0,y:0};var _f=[],_g;_g=new Button();_g.init("firstPage","absolute",0,0,1,1);_g.set_cssclass("btn_WF_GridPrev2");_g.set_visible(false);_g.addEventHandler("onclick",this.pagingOnClickHandler,this);this.addChild(_g.name,_g);_g.show();_f.push(_g);_g=new Button();_g.init("prevPageBlock","absolute",0,0,1,1);_g.set_cssclass("btn_WF_GridPrev");_g.set_visible(false);_g.addEventHandler("onclick",this.pagingOnClickHandler,this);this.addChild(_g.name,_g);_g.show();_f.push(_g);var _h;for(var _i=0;_i<_b;_i++ ){_h=(_i+1).toString();_g=new Button();_g.init("page_"+_h,"absolute",0,0,1,1);_g.set_cssclass("btn_WF_GridNumber");_g.set_visible(false);_g.addEventHandler("onclick",this.pagingOnClickHandler,this);this.addChild(_g.name,_g);_g.show();_f.push(_g);}_g=new Button();_g.init("nextPageBlock","absolute",0,0,1,1);_g.set_cssclass("btn_WF_GridNext");_g.set_visible(false);_g.addEventHandler("onclick",this.pagingOnClickHandler,this);this.addChild(_g.name,_g);_g.show();_f.push(_g);_g=new Button();_g.init("lastPage","absolute",0,0,1,1);_g.set_cssclass("btn_WF_GridNext2");_g.set_visible(false);_g.addEventHandler("onclick",this.pagingOnClickHandler,this);this.addChild(_g.name,_g);_g.show();_f.push(_g);Eco.XComp.setUserProperty(this,"pageComps",_f);if(this.USE_INPUT_PAGE){_g=new Edit();_g.init("inputPage","absolute",0,0,1,1);_g.set_autoselect(true);_g.set_inputtype("number");_g.set_visible(false);_g.style.set_align("right middle");this.addChild(_g.name,_g);_g.addEventHandler("onkeydown",this.pagingOnKeyDownHandler,this);_g.show();_g=new Static();_g.init("totalPage","absolute",0,0,1,1);_g.set_visible(false);_g.set_wordwrap(false);_g.style.set_align("center middle");this.addChild(_g.name,_g);_g.show();}};this.pagingOnClickHandler=function(_a,_b){var _c=_a.parent;var _d=Eco.XComp.getUserProperty(_a,"pageNumber");Eco.XComp.setUserProperty(this,"currentPage",_d);this.callPageChangeNotify(_d);};this.pagingOnKeyDownHandler=function(_a,_b){if(_b.keycode==13){var _c=Eco.XComp.getUserProperty(_a,"totalPage");var _d=_a.value;if(!Eco.isEmpty(_d)){_d=parseInt(_d);if(_c<_d){_a.set_value(Eco.XComp.getUserProperty(this,"currentPage"));}else{Eco.XComp.setUserProperty(this,"currentPage",_d);this.callPageChangeNotify(_d);}}}};this.callPageChangeNotify=function(_a){var _b=Eco.XComp.getUserProperty(this,"pageChangeNotify");var _c=Eco.XComp.getUserProperty(this,"scope");if(Eco.isEmpty(_c)){_c=this.parent;}if(_b){_b.call(_c,_a);}};this.setPage=function(_a){Eco.XComp.setUserProperty(this,"totalCount",_a);var _b=Eco.XComp.getUserProperty(this,"listCount");var _c=Eco.XComp.getUserProperty(this,"pageCount");var _d=Eco.XComp.getUserProperty(this,"currentPage");var _e;var _f=Eco.XComp.getUserProperty(this,"pageComps");for(var _w=0,_o=_f.length;_w<_o;_w++ ){_e=_f[_w];_e._used=false;_e.set_visible(false);}var _g=Math.floor(_a/_b)+(Math.floor(_a%_b)>0?1:0);var _h=(Math.floor((_d-1)/_c)*_c)+1;var _i=_h+_c;var _j=0;var _k={w:0,h:0};var _l=this.DEFAULT_PAGE_BUTTON_SIZE;var _m=(_h>_c?true:false);if(_m){this.setPagingComponent(_j,1,_m,_l[0],_k);}_j++ ;_m=(_h>_c?true:false);if(_m){this.setPagingComponent(_j,(_h-1),_m,_l[0],_k);}_j++ ;for(var _w=_h;_w<_i;_w++ ){if(_w<=_g){_m=(_w==_d?false:true);this.setPagingComponent(_j,_w,_m,null,_k,_w.toString());}_j++ ;}_m=(_i<=_g?true:false);if(_m){this.setPagingComponent(_j,_i,_m,_l[0],_k);}_j++ ;_m=(_i<_g?true:false);if(_m){this.setPagingComponent(_j,_g,_m,_l[0],_k);}var _n=this.PAGE_BUTTON_GAP;var _o=_f.length;var _p=Math.floor((this.getOffsetWidth()-(_k.w+_n*(_o-1)))/2);var _q=Math.floor((this.getOffsetHeight()-_k.h)/2);for(var _w=0;_w<_o;_w++ ){_e=_f[_w];if(_e._used){_e.move(_p,_q);_e.set_visible(true);_p=_p+_e.getOffsetWidth()+_n;}}if(this.USE_INPUT_PAGE){var _r=this.components["inputPage"];var _s=this.components["totalPage"];_r.set_value(_d.toString());Eco.XComp.setUserProperty(_r,"totalPage",_g);_s.set_text("of "+_g);var _t=Eco.XComp.PositionSize.getContentSize(_s);var _u=_t[0]+2;var _v=_t[1]+2;_q=Math.floor((this.getOffsetHeight()-_v)/2);_p=this.getOffsetWidth()-((_u+_n)*2);_r.move(_p,_q,_u,_v);_p=_p+_u+_n;_s.move(_p,_q,_u,_v);_r.set_visible(true);_s.set_visible(true);}};this.setPagingComponent=function(_a,_b,_c,_d,_e,_f){var _g=Eco.XComp.getUserProperty(this,"pageComps");var _h=_g[_a];_h.style.set_cursor((_c?"hand":"default"));_h.set_enable(_c);Eco.XComp.setUserProperty(_h,"pageNumber",_b);var _i=height=0;if(!Eco.isNull(_d)){if(Eco.isArray(_d)){_i=_d[0];height=_d[1];}else{_i=height=_d;}}if(!Eco.isEmpty(_f)){_h.set_text(_f);var _j=Eco.XComp.PositionSize.getTextSize(_h,_f,false);_i=_j[0]+2;height=_j[1]+2;}var _k=this.MIN_PAGE_BUTTON_SIZE;_i=Math.max(_k[0],_i);height=Math.max(_k[1],height);_h.resize(_i,height);_e.w=_e.w+_i;_e.h=height;_h._used=true;};this.setCurrentPage=function(_a){return Eco.XComp.setUserProperty(this,"currentPage",_a);};this.getCurrentPage=function(){return Eco.XComp.getUserProperty(this,"currentPage");};});this.on_initEvent=function(){this.addEventHandler("onload",this.Paging_onload,this);};this.loadIncludeScript("paging.xfdl");};})();