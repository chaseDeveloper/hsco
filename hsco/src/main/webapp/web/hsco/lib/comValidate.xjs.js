(function(){return function(_a){var _b;this.registerScript(_a,function(){this.gfn_checkValidation=function(_b,_c,_d,_e){if(this.comUtils.isNullEmpty(_d)){_d=true;}if(_b instanceof Grid){return this.gfn_checkValidGrid(_b,_c,_d,_e);}else if(_b instanceof Div||_b instanceof Form){return this.gfn_checkValidDiv(_b,_c,_d,_e);}else if(_b instanceof Dataset){return this.gfn_checkValidDs(_b,_c,_d,_e);}};this.gfn_checkValidation_NoUpdChk=function(_b,_c,_d){if(_b instanceof Grid){var _e=this.objects[_b.binddataset];if(!this.comUtils.isDatasetUpdated(_e)){return true;}return this.gfn_checkValidGrid(_b,_c,true,_d);}else if(_b instanceof Div||_b instanceof Form){return this.gfn_checkValidDiv(_b,_c,true,_d);}else if(_b instanceof Dataset){if(!this.comUtils.isDatasetUpdated(_b)){return true;}return this.gfn_checkValidDs(_b,_c,true,_d);}};this.gfn_checkValidGrid=function(_c,_d,_e,_f){var _g=this.objects[_c.binddataset];var _h=this.comUtils.isNullEmpty(_f)?_c.name:_f;if(!this.comUtils.isDatasetUpdated(_g)){if(_e){this.gfn_message("comm.데이터.변경.없음");}return false;}_d.filter("compId=='"+_h+"'");if(_d.getRowCount()==0){_d.filter("");return true;}if(!this.comUtils.isDatasetUpdated(_g)){_d.filter("");return false;}var _i=new Array();var _j="";var _k=_d.findRow("PK","Y");var _l=0;if(_k!= -1){_i[_l]=_d.getColumn(_k,"colId");_j="String("+_i[_l]+")";for(var _ah=_k+1;_ah<_d.getRowCount();_ah++ ){if(_d.getColumn(_ah,"PK")=='Y'){_l++ ;_i[_l]=_d.getColumn(_ah,"colId");_j+="+String("+_i[_l]+")";}}}for(var _ah=0;_ah<_d.getRowCount();_ah++ ){if(_d.getColumn(_ah,"notNull")=='Y'){var _m=_d.getColumn(_ah,"colId");var _n=_g.findRowExpr("dataset.parent.comUtils.isNullEmpty("+_m+") && (dataset.getRowType(rowidx)==Dataset.ROWTYPE_INSERT || dataset.getRowType(rowidx)==Dataset.ROWTYPE_UPDATE)");if(_n> -1){var _o=_d.getColumn(_ah,"msgId");this.gfn_message("comm.항목.입력.을",_o);var _p=_c.getBindCellIndex("body",_m);_g.set_rowposition(_n);var _q=this.gfn_getBindComponent(_g,_m);if(typeof _q!="boolean"){_q.setFocus();_d.filter("");return false;}if(_p== -1){_d.filter("");return false;}_g.set_rowposition(_n);_c.setFocus();_c.setCellPos(_p);_d.filter("");return false;}}if(!this.comUtils.isNullEmpty(_d.getColumn(_ah,"nlength"))){var _r=_d.getColumn(_ah,"nlength");var _m=_d.getColumn(_ah,"colId");var _s=_d.getColumn(_ah,"lengthChkGb");var _t=this._getOperator(_s);var _u=_g.findRowExpr("(dataset.getRowType(rowidx)==Dataset.ROWTYPE_INSERT || dataset.getRowType(rowidx)==Dataset.ROWTYPE_UPDATE) && String("+_m+").length"+_t+_r+"&& String("+_m+") != 'undefined'");if(_u!= -1){var _v=_d.getColumn(_ah,"msgId");var _w=this._getMessage(_s,_v,_r);alert(_w);_g.set_rowposition(_u);_c.setFocus();_d.filter("");return false;}}if(!this.comUtils.isNullEmpty(_d.getColumn(_ah,"from"))){var _x=_d.getColumn(_ah,"from");var _m=_d.getColumn(_ah,"colId");var _y=_g.findRowExpr("(dataset.getRowType(rowidx)==Dataset.ROWTYPE_INSERT || dataset.getRowType(rowidx)==Dataset.ROWTYPE_UPDATE) && String("+_m+")<"+_x);if(_y!= -1){var _o=_d.getColumn(_ah,"msgId");if(_o.indexOf("^")> -1){var _z=_o.split('^');this.gfn_message("errors.항목값.범위.이상",_z[0]+"|"+_z[1]);}else{this.gfn_message("errors.항목값.범위.이상",_o+" 상한값|"+_o+" 시작값");}_g.set_rowposition(_y);_c.setFocus();_d.filter("");return false;}}if(!this.comUtils.isNullEmpty(_d.getColumn(_ah,"to"))){var _aa=_d.getColumn(_ah,"to");var _m=_d.getColumn(_ah,"colId");var _ab=_g.findRowExpr("(dataset.getRowType(rowidx)==Dataset.ROWTYPE_INSERT || dataset.getRowType(rowidx)==Dataset.ROWTYPE_UPDATE) && String("+_m+")>"+_aa);if(_ab!= -1){var _o=_d.getColumn(_ah,"msgId");if(_o.indexOf("^")> -1){var _z=_o.split('^');this.gfn_message("errors.항목값.범위.이하",_z[0]+"|"+_z[1]);}else{this.gfn_message("errors.항목값.범위.이하",_o+" 시작값|"+_o+" 상한값");}_g.set_rowposition(_ab);_c.setFocus();_d.filter("");return false;}}if(!this.comUtils.isNullEmpty(_d.getColumn(_ah,"expr"))){var _ac=_g.findRowExpr(_d.getColumn(_ah,"expr"));if(_ac!= -1){var _o=_d.getColumn(_ah,"msgId");this.gfn_message("comm.항목.입력.을",_o);_g.set_rowposition(_ac);_c.setFocus();_d.filter("");return false;}}var _ad=_d.getColumn(_ah,"func");if(!this.comUtils.isNullEmpty(_ad)){objCollFunc=this.lookupFunc(_ad);if(objCollFunc!=null){var _ae=objCollFunc.call();}}}if(_j!=""){for(var _ah=0;_ah<_g.getRowCount();_ah++ ){if(_g.getRowType(_ah)==Dataset.ROWTYPE_INSERT||_g.getRowType(_ah)==Dataset.ROWTYPE_UPDATE){var _af="";for(var _ai=0;_ai<_i.length;_ai++ ){_af+=_g.getColumn(_ah,_i[_ai]);}var _ag=_g.findRowExpr("rowidx!="+_ah+" && "+_j+"=='"+(_af)+"'");if(_ag!= -1){this.gfn_message("info.그리드.데이터.중복",(_ah+1)+"|"+(_ag+1));_g.set_rowposition(_ah);_d.filter("");return false;}}}}_d.filter("");return true;};this.gfn_checkValidDs=function(_c,_d,_e,_f){var _g=this.comUtils.isNullEmpty(_f)?_c.name:_f;if(!this.comUtils.isDatasetUpdated(_c)){if(_e){this.gfn_message("comm.데이터.변경.없음");}return false;}_d.filter("compId=='"+_g+"'");if(_d.getRowCount()==0){_d.filter("");return true;}if(!this.comUtils.isDatasetUpdated(_c)){_d.filter("");return false;}var _h=new Array();var _i="";var _j=_d.findRow("PK","Y");var _k=0;if(_j!= -1){_h[_k]=_d.getColumn(_j,"colId");_i="String("+_h[_k]+")";for(var _af=_j+1;_af<_d.getRowCount();_af++ ){if(_d.getColumn(_af,"PK")=='Y'){_k++ ;_h[_k]=_d.getColumn(_af,"colId");_i+="+String("+_h[_k]+")";}}}for(var _af=0;_af<_d.getRowCount();_af++ ){if(_d.getColumn(_af,"notNull")=='Y'){var _l=_d.getColumn(_af,"colId");var _m=_c.findRowExpr("dataset.parent.comUtils.isNullEmpty("+_l+") && (dataset.getRowType(rowidx)==Dataset.ROWTYPE_INSERT || dataset.getRowType(rowidx)==Dataset.ROWTYPE_UPDATE)");if(_m> -1){var _n=_d.getColumn(_af,"msgId");if(_c.rowcount>1){this.gfn_message("comm.항목.입력.을","["+(_m+1)+"행] "+_n);}else{this.gfn_message("comm.항목.입력.을",_n);}_c.set_rowposition(_m);var _o=this.gfn_getBindComponent(_c,_l);if(typeof _o!="boolean"){_o.setFocus();_d.filter("");return false;}_c.set_rowposition(_m);_d.filter("");return false;}}if(!this.comUtils.isNullEmpty(_d.getColumn(_af,"nlength"))){var _p=_d.getColumn(_af,"nlength");var _l=_d.getColumn(_af,"colId");var _q=_d.getColumn(_af,"lengthChkGb");var _r=this._getOperator(_q);var _s=_c.findRowExpr("(dataset.getRowType(rowidx)==Dataset.ROWTYPE_INSERT || dataset.getRowType(rowidx)==Dataset.ROWTYPE_UPDATE) && String("+_l+").length"+_r+_p+"&& String("+_l+") != 'undefined'");if(_s!= -1){var _t=_d.getColumn(_af,"msgId");var _u=this._getMessage(_q,_t,_p);alert(_u);_c.set_rowposition(_s);_d.filter("");return false;}}if(!this.comUtils.isNullEmpty(_d.getColumn(_af,"from"))){var _v=_d.getColumn(_af,"from");var _l=_d.getColumn(_af,"colId");var _w=_c.findRowExpr("(dataset.getRowType(rowidx)==Dataset.ROWTYPE_INSERT || dataset.getRowType(rowidx)==Dataset.ROWTYPE_UPDATE) && String("+_l+")<"+_v);if(_w!= -1){var _n=_d.getColumn(_af,"msgId");if(_n.indexOf("^")> -1){var _x=_n.split('^');this.gfn_message("errors.항목값.범위.이상",_x[0]+"|"+_x[1]);}else{this.gfn_message("errors.항목값.범위.이상",_n+" 상한값|"+_n+" 시작값");}_c.set_rowposition(_w);_d.filter("");return false;}}if(!this.comUtils.isNullEmpty(_d.getColumn(_af,"to"))){var _y=_d.getColumn(_af,"to");var _l=_d.getColumn(_af,"colId");var _z=_c.findRowExpr("(dataset.getRowType(rowidx)==Dataset.ROWTYPE_INSERT || dataset.getRowType(rowidx)==Dataset.ROWTYPE_UPDATE) && String("+_l+")>"+_y);if(_z!= -1){var _n=_d.getColumn(_af,"msgId");if(_n.indexOf("^")> -1){var _x=_n.split('^');this.gfn_message("errors.항목값.범위.이하",_x[0]+"|"+_x[1]);}else{this.gfn_message("errors.항목값.범위.이하",_n+" 시작값|"+_n+" 상한값");}_c.set_rowposition(_z);_d.filter("");return false;}}if(!this.comUtils.isNullEmpty(_d.getColumn(_af,"expr"))){var _aa=_c.findRowExpr(_d.getColumn(_af,"expr"));if(_aa!= -1){var _n=_d.getColumn(_af,"msgId");this.gfn_message("info.표현식.검색결과.없음",_n);_c.set_rowposition(_aa);_d.filter("");return false;}}var _ab=_d.getColumn(_af,"func");if(!this.comUtils.isNullEmpty(_ab)){objCollFunc=this.lookupFunc(_ab);if(objCollFunc!=null){var _ac=objCollFunc.call();if(!_ac){return;}}}}if(_i!=""){for(var _af=0;_af<_c.getRowCount();_af++ ){if(_c.getRowType(_af)==Dataset.ROWTYPE_INSERT||_c.getRowType(_af)==Dataset.ROWTYPE_UPDATE){var _ad="";for(var _ag=0;_ag<_h.length;_ag++ ){_ad+=_c.getColumn(_af,_h[_ag]);}var _ae=_c.findRowExpr("rowidx!="+_af+" && "+_i+"=='"+(_ad)+"'");if(_ae!= -1){this.gfn_message("info.그리드.데이터.중복",(_af+1)+"|"+(_ae+1));_c.set_rowposition(_af);_d.filter("");return false;}}}}_d.filter("");return true;};this.gfn_checkValidDiv=function(_c,_d,_e,_f){if(this.comUtils.isNullEmpty(_d)){_d=this.objects["DS_VALIDATION"];}var _g=this.comUtils.isNull(_f)?_c.name:_f;_d.filter("compId=='"+_g+"'");var _h=true;var _i="";for(var _s=0;_s<_d.getRowCount();_s++ ){objTarget=_c.components[_d.getColumn(_s,"colId")];if(objTarget==null){trace("component 확인 :::: "+_d.getColumn(_s,"colId"));continue;}if(_d.getColumn(_s,"notNull")=="Y"){if(objTarget instanceof ListBox){_h=_componentCheck.listBoxChk("notNull");if(!_h){_i=_d.getColumn(_s,"msgId");this.gfn_message("comm.항목.선택.요청",_i);break;}}else{_h=_componentCheck.commonChk(objTarget,"notNull");if(!_h){_i=_d.getColumn(_s,"msgId");this.gfn_message("comm.항목.입력.을",_i);break;}}}if(!this.comUtils.isNullEmpty(_d.getColumn(_s,"nlength"))){if(objTarget.text.trim().length!=parseInt(_d.getColumn(_s,"nlength"))){_h=false;if(!_h){_i=_d.getColumn(_s,"msgId")+"의 길이가 맞지 않습니다. 다시 입력하여 주십시요.";break;}}}if(objTarget instanceof Calendar){var _j=null;var _k=null;var _l=_d.getColumn(_s,"lengthChkGb");var _m=_d.getColumn(_s,"nlength");if(!this.comUtils.isNullEmpty(_d.getColumn(_s,"from"))){_j=_c.components[_d.getColumn(_s,"from")];_k=objTarget;}else if(!this.comUtils.isNullEmpty(_d.getColumn(_s,"to"))){_k=_c.components[_d.getColumn(_s,"to")];_j=objTarget;}else{_j=objTarget;}if(_j==null||_k==null){if(this.comUtils.isNullEmpty(_l)||this.comUtils.isNullEmpty(_m)){continue;}}var _n=_componentCheck.calendarChk(_j,_k,_l,_m);_h=_n[0];if(!_h){_i=_d.getColumn(_s,"msgId")+_n[1];break;}}else if(objTarget instanceof MaskEdit){if(_d.getColumn(_s,"type")=="HH:mm"){}}else if(objTarget instanceof Spin){if(!this.comUtils.isNullEmpty(_d.getColumn(_s,"from"))){var _o=_d.getColumn(_s,"from");if(parseInt(objTarget.value)<parseInt(_o)){var _p=_d.getColumn(_s,"msgId");if(_p.indexOf("^")> -1){var _q=_p.split('^');this.gfn_message("errors.항목값.범위.이상",_q[0]+"|"+_q[1]);}else{this.gfn_message("errors.항목값.범위.이상",_p+" 상한값|"+_p+" 시작값");}objTarget.setFocus();_d.filter("");return false;}}if(!this.comUtils.isNullEmpty(_d.getColumn(_s,"to"))){var _r=_d.getColumn(_s,"to");if(parseInt(objTarget.value)>parseInt(_r)){var _p=_d.getColumn(_s,"msgId");if(_p.indexOf("^")> -1){var _q=_p.split('^');this.gfn_message("errors.항목값.범위.이하",_q[0]+"|"+_q[1]);}else{this.gfn_message("errors.항목값.범위.이하",_p+" 시작값|"+_p+" 상한값");}objTarget.setFocus();_d.filter("");return false;}}}}_d.filter("");if(!_h){objTarget.setFocus();return false;}return true;};_componentCheck={objForm:this,commonChk:function(_b,_c){return this.objForm.comUtils.isNullEmpty(_b.value)?false:true;},listBoxChk:function(_c){var _d=objTarget.getSelectedCount();if(_d==0){return false;}return true;},editChk:function(_c){return true;},maskEditChk:function(_c){return true;},calendarChk:function(_c,_d,_e,_f){if(_c instanceof Calendar&&_d instanceof Calendar){if(_c.value>_d.value){return [false,"시작일이 종료일보다 큽니다."];}if(!this.objForm.comUtils.isNullEmpty(_e)){var _g=this.objForm.gfn_AddDate(_c.value,_f,_e);if(_g<_d.value){return [false,"기간은 "+_f+this.objForm.comUtils.decode(_e,"Y","년","M","개월","D","일")+"이내 이어야 합니다."];}}}else{if(!this.objForm.comUtils.isNullEmpty(_e)){var _h=this.objForm.gfn_Today("YYYYMMDD");var _i=_e.substr(1,1);var _j=this.objForm.gfn_AddDate(_h,_f,_i);switch(_e.substr(0,1)){case "B":if(_j>_c.value){return [false,"기간은 "+_j+"보다 커야 합니다."];}break;case "A":if(_j<_c.value){return [false,"기간은 "+_j+"보다 작아야 합니다."];}break;case "D":var _k=this.objForm.gfn_AddDate(_h, -1*_f,_i);var _l=this.objForm.gfn_AddDate(_h,_f,_i);if(this.objForm.gfn_AddDate(_h, -1*_f,_i)<this.objForm.gfn_AddDate(_h,_f,_i)){_k=this.objForm.gfn_AddDate(_h, -1*_f,_i);_l=this.objForm.gfn_AddDate(_h,_f,_i);}else{_k=this.objForm.gfn_AddDate(_h,_f,_i);_l=this.objForm.gfn_AddDate(_h, -1*_f,_i);}if(_k>_c.value||_l<_c.value){return [false,"기간은 "+_k+"보다 크고 "+_l+"보다 작아야 합니다."];}break;}}}return [true];},comboChk:function(_c){return true;},textAreaChk:function(_c){return true;}};this._getOperator=function(_c){if(this.comUtils.isNullEmpty(_c)){_c="EQ";}var _d;switch(_c){case "GT":_d="<=";break;case "GE":_d="<";break;case "LT":_d=">=";break;case "LE":_d=">";break;case "EQ":_d="!=";break;case "NE":_d="==";break;}return _d;};this._getMessage=function(_c,_d,_e){if(this.comUtils.isNullEmpty(_c)){_c="EQ";}var _f;switch(_c){case "GT":_f=_d+"의 길이는 "+_e+" 보다 길어야 합니다.";break;case "GE":_f=_d+"의 길이는 "+_e+" 보다 길거나 같아야 합니다.";break;case "LT":_f=_d+"의 길이는 "+_e+" 보다 짧아야 합니다.";break;case "LE":_f=_d+"의 길이는 "+_e+" 보다 짧거나 같아야 합니다.";break;case "EQ":_f=_d+"의 길이는 "+_e+" 이어야 합니다.";break;case "NE":_f=_d+"의 길이는 "+_e+" 가 아니어야 합니다.";break;}return _f;};this.gfn_getBindComponent=function(_c,_d){var _e=_c.name;for(var _i=0;_i<this.binds.length;_i++ ){var _f=this.binds[_i];if(_f.datasetid==_e&&_f.columnid==_d&&_f.propid=="value"){var _g=_f.compid.split(".");var _h=this;for(var _j=0;_j<_g.length;_j++ ){_h=_h.components[_g[_j]];if(_h==null){return false;}}return _h;}}return false;};});this.loadIncludeScript(_a);_b=null;};})();