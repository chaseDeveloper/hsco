<?xml version="1.0" encoding="utf-8"?>
<FDL version="1.5">
  <TypeDefinition url="..\..\default_typedef.xml"/>
  <Form id="HPM070101_T01" classname="HPM070101_P01" left="0" top="0" width="336" height="475" titletext="신청정보" onload="HPM070101_T01_onload">
    <Layouts>
      <Layout>
        <Tab id="tab_detailInfo" taborder="0" left="0" top="0" right="0" bottom="0" tabindex="0" scrollbars="autoboth" style="showextrabutton:false;" preload="true">
          <Tabpages>
            <Tabpage id="tpg_reqstInfo" text="신청정보">
              <Layouts>
                <Layout width="336" height="445">
                  <Static id="sta_back01" taborder="46" cssclass="sta_WF_Labelbg" left="81" top="78" right="0" height="82"/>
                  <Static id="sta_back00" taborder="47" cssclass="sta_WF_Labelbg" left="81" top="52" right="0" height="27" onclick="tab_detailInfo_tpg_reqstInfo_sta_back00_onclick"/>
                  <Static id="sta_back4" taborder="48" cssclass="sta_WF_Labelbg" left="81" top="0" right="0" height="27" onclick="tab_detailInfo_tpg_reqstInfo_sta_back4_onclick"/>
                  <Combo id="cmb_fcltsSn" taborder="0" autoselect="true" innerdataset="ds_rentFcltsManageList" codecolumn="FCLTS_SN" datacolumn="FCLTS_NM" cssclass="cmb_WF_Essential" visible="true" left="87" top="3" right="3" height="21"/>
                  <Calendar id="cal_useDe" taborder="1" readonly="true" dateformat="yyyy-MM-dd" cssclass="cal_WF_Readonly" left="87" top="55" width="100" height="21"/>
                  <Static id="sta_useDe" taborder="54" text="사용일자" cssclass="sta_WF_Label" left="0" top="52" width="85" height="27" style="align:right middle;"/>
                  <Static id="sta_fcltyNm" taborder="55" text="시설명" cssclass="sta_WF_Label" left="0" top="0" width="85" height="27" style="align:right middle;"/>
                  <Static id="sta_useTime" taborder="63" text="사용시간" cssclass="sta_WF_Label" left="0" top="78" width="85" height="82" style="align:right middle;"/>
                  <Static id="sta_back02" taborder="65" cssclass="sta_WF_Labelbg" left="81" top="315" right="0" height="27"/>
                  <Static id="sta_back12" taborder="66" onclick="tab_detailInfo_tpg_reqstInfo_sta_back12_onclick" cssclass="sta_WF_Labelbg" left="81" top="341" right="0" height="27"/>
                  <Static id="sta_back10" taborder="67" cssclass="sta_WF_Labelbg" left="81" top="289" right="0" height="27"/>
                  <Static id="sta_back09" taborder="68" cssclass="sta_WF_Labelbg" left="81" top="263" right="0" height="27"/>
                  <Static id="sta_back08" taborder="69" cssclass="sta_WF_Labelbg" top="26" right="0" width="258" height="27" onclick="tab_detailInfo_tpg_reqstInfo_sta_back08_onclick"/>
                  <Static id="sta_back07" taborder="70" cssclass="sta_WF_Labelbg" left="81" top="237" right="0" height="27"/>
                  <Static id="sta_back06" taborder="71" cssclass="sta_WF_Labelbg" left="81" top="237" right="0" height="27"/>
                  <Static id="sta_back05" taborder="72" cssclass="sta_WF_Labelbg" left="81" top="211" right="0" height="27"/>
                  <Static id="sta_back03" taborder="73" cssclass="sta_WF_Labelbg" left="81" top="185" right="0" height="27"/>
                  <Static id="Static05" taborder="76" text="원" left="193" top="319" right="125" height="21"/>
                  <Static id="Static10" taborder="77" text="명" left="193" top="292" width="15" height="21"/>
                  <Edit id="edt_useCn" taborder="11" lengthunit="ascii" maxlength="500" left="87" top="266" right="3" height="21"/>
                  <Edit id="edt_mbtlnum" taborder="9" lengthunit="utf8" maxlength="30" left="87" top="240" right="3" height="21" inputtype="number"/>
                  <Edit id="edt_grpNm" taborder="7" lengthunit="ascii" maxlength="100" cssclass="edt_WF_Essential" left="87" top="214" right="3" height="21"/>
                  <Edit id="edt_mberNm" taborder="5" lengthunit="ascii" maxlength="30" cssclass="edt_WF_Essential" left="87" top="188" right="3" height="21"/>
                  <Static id="sta_rm" taborder="84" text="비고" cssclass="sta_WF_Label" left="0" top="341" width="85" height="27" style="align:right middle;"/>
                  <Static id="sta_useNmpr" taborder="85" text="사용인원" cssclass="sta_WF_Label" left="0" top="289" width="85" height="27" style="align:right middle;"/>
                  <Static id="sta_useCn" taborder="86" text="행사내용" cssclass="sta_WF_Label" left="0" top="263" width="85" height="27" style="align:right middle;"/>
                  <Static id="sta_usePrposSe" taborder="87" text="사용용도" cssclass="sta_WF_Label" left="0" top="26" width="85" height="27" style="align:right middle;"/>
                  <Static id="sta_mbtlnum" taborder="89" text="휴대폰번호" cssclass="sta_WF_Label" left="0" top="237" width="85" height="27" style="align:right middle;"/>
                  <Static id="sta_grpNm" taborder="91" text="단체명" cssclass="sta_WF_Label" left="0" top="211" width="85" height="27" style="align:right middle;"/>
                  <Static id="sta_mberNm" taborder="92" text="이름" cssclass="sta_WF_Label" left="0" top="185" width="85" height="27" style="align:right middle;"/>
                  <Button id="btn_setleInfoCancel" taborder="19" text="결제정보취소" onclick="btn_setleInfoCancel_onclick" cssclass="btn_WF_Process" visible="false" top="423" width="92" height="19" left="191"/>
                  <Edit id="edt_rm" taborder="14" lengthunit="ascii" maxlength="500" left="87" top="344" right="3" height="21"/>
                  <MaskEdit id="msk_useNmpr" taborder="12" mask="!#,###" limitbymask="both" left="87" top="292" width="100" height="21"/>
                  <Static id="sta_back13" taborder="97" onclick="tab_detailInfo_tpg_reqstInfo_sta_back12_onclick" cssclass="sta_WF_Labelbg" left="81" top="367" right="0" height="27"/>
                  <Static id="sta_setleAm00" taborder="98" text="사용금액" cssclass="sta_WF_Label" left="0" top="315" width="85" height="27" style="align:right middle;"/>
                  <MaskEdit id="msk_setleAm" taborder="13" mask="!###,###,###,###,###" limitbymask="both" cssclass="msk_WF_Essential" left="86" top="317" width="100" height="21"/>
                  <Static id="sta_rm01" taborder="100" text="진행상태" cssclass="sta_WF_Label" left="0" top="367" width="85" height="27" style="align:right middle;"/>
                  <Combo id="cmb_setleSttusSe" taborder="15" innerdataset="ds_setleSttusSe" codecolumn="CODE" datacolumn="CODE_NM" cssclass="cmb_WF_Essential" left="87" top="370" width="100" height="21"/>
                  <Button id="btn_reqstCancl" taborder="16" text="대관취소" onclick="tab_detailInfo_tpg_reqstInfo_btn_reqstCancl_onclick" top="370" right="3" width="70" height="21"/>
                  <Button id="btn_useRpmsnReqst" taborder="17" text="사용허가신청서" onclick="tab_detailInfo_tpg_reqstInfo_btn_useRpmsnReqst_onclick" cssclass="btn_WF_Process" top="423" width="92" height="19" left="3"/>
                  <Button id="btn_useRpmsn" taborder="18" text="사용허가서" cssclass="btn_WF_Process" top="423" width="92" height="19" onclick="tab_detailInfo_tpg_reqstInfo_btn_useRpmsn_onclick" left="97"/>
                  <Radio id="rdo_usePrposSe" taborder="2" codecolumn="codecolumn" datacolumn="datacolumn" direction="vertical" cssclass="rdo_WF_Essential" left="132" top="30" right="27" height="21" style="align:left;">
                    <Dataset id="innerdataset">
                      <ColumnInfo>
                        <Column id="codecolumn" size="256"/>
                        <Column id="datacolumn" size="256"/>
                      </ColumnInfo>
                      <Rows>
                        <Row>
                          <Col id="codecolumn">0</Col>
                          <Col id="datacolumn">체육</Col>
                        </Row>
                        <Row>
                          <Col id="codecolumn">1</Col>
                          <Col id="datacolumn">일반</Col>
                        </Row>
                      </Rows>
                    </Dataset>
                  </Radio>
                  <TextArea id="txt_useTimeFom" taborder="61" left="87" top="81" height="76" cssclass="txt_WF_Readonly" readonly="true" right="3" scrollbars="autoboth"/>
                  <Div id="div_useTime" taborder="4" left="88" top="81" right="3" height="76" style="background:transparent;">
                    <Layouts>
                      <Layout width="245" height="47"/>
                    </Layouts>
                  </Div>
                  <Static id="sta_notice" taborder="62" text="예약 가능한 시간이 없습니다." left="91" top="83" width="178" height="21" visible="false"/>
                  <Static id="sta_back14" taborder="101" cssclass="sta_WF_Labelbg" left="81" top="159" right="0" height="27"/>
                  <Edit id="edt_id" taborder="102" lengthunit="ascii" maxlength="30" cssclass="edt_WF_Readonly" left="87" top="162" right="3" height="21" visible="true" readonly="true"/>
                  <Static id="sta_mberNm00" taborder="103" text="회원ID" cssclass="sta_WF_Label" left="0" top="159" width="85" height="27" style="align:right middle;"/>
                  <Button id="div_mberSearch" taborder="104" onclick="div_mberSearch_onclick" cssclass="btn_WF_Search" top="161" right="4" width="21" height="22" style="background:transparent;"/>
                  <Static id="sta_back11" taborder="105" onclick="tab_detailInfo_tpg_reqstInfo_sta_back12_onclick" cssclass="sta_WF_Labelbg" left="81" top="393" right="0" height="27"/>
                  <Static id="sta_setleTmlmtDe" taborder="106" text="결제기한&#13;&#10;일자" cssclass="sta_WF_Label" left="0" top="393" width="85" height="27" style="align:right middle;"/>
                  <Calendar id="cal_setleTmlmtDe" taborder="107" dateformat="yyyy-MM-dd" left="87" top="396" width="100" height="21"/>
                  <Button id="btn_useTimeChk" taborder="3" text="사용가능시간확인" visible="false" top="55" right="3" width="105" height="21" onclick="btn_useTimeChk_onclick"/>
                  <CheckBox id="chk_rdcxpt" taborder="108" text="감면율적용" top="319" width="108" height="21" right="0" visible="false"/>
                </Layout>
              </Layouts>
            </Tabpage>
          </Tabpages>
        </Tab>
      </Layout>
    </Layouts>
    <Bind>
      <BindItem id="item0" compid="tab_detailInfo1.tpg_reqstInfo.edt_fcltyNm" propid="value" datasetid="ds_rentReqstManageList" columnid="FCLTS_NM"/>
      <BindItem id="item4" compid="tab_detailInfo1.tpg_reqstInfo.cal_useDe" propid="value" datasetid="ds_rentReqstManageList" columnid="USE_DE"/>
      <BindItem id="item7" compid="tab_detailInfo1.tpg_reqstInfo.edt_useTime" propid="value" datasetid="ds_rentReqstManageList" columnid="USE_TIME"/>
      <BindItem id="item8" compid="tab_detailInfo1.tpg_reqstInfo.edt_mberNm" propid="value" datasetid="ds_rentReqstManageList" columnid="MBER_NM"/>
      <BindItem id="item22" compid="tab_detailInfo1.tpg_reqstInfo.edt_grpNm" propid="value" datasetid="ds_rentReqstManageList" columnid="GRP_NM"/>
      <BindItem id="item24" compid="tab_detailInfo1.tpg_reqstInfo.edt_telNo" propid="value" datasetid="ds_rentReqstManageList" columnid="TELNO"/>
      <BindItem id="item25" compid="tab_detailInfo1.tpg_reqstInfo.edt_mbtlnum" propid="value" datasetid="ds_rentReqstManageList" columnid="MBTLNUM"/>
      <BindItem id="item26" compid="tab_detailInfo1.tpg_reqstInfo.edt_adres" propid="value" datasetid="ds_rentReqstManageList" columnid="ADRES"/>
      <BindItem id="item27" compid="tab_detailInfo1.tpg_reqstInfo.rdo_usePrposSe" propid="value" datasetid="ds_rentReqstManageList" columnid="USE_PRPOS_SE"/>
      <BindItem id="item28" compid="tab_detailInfo1.tpg_reqstInfo.edt_useCn" propid="value" datasetid="ds_rentReqstManageList" columnid="USE_CN"/>
      <BindItem id="item29" compid="tab_detailInfo1.tpg_reqstInfo.edt_useNmpr" propid="value" datasetid="ds_rentReqstManageList" columnid="USE_NMPR"/>
      <BindItem id="item30" compid="tab_detailInfo1.tpg_reqstInfo.msk_setleAm" propid="value" datasetid="ds_rentReqstManageList" columnid="USE_AM"/>
      <BindItem id="item31" compid="tab_detailInfo1.tpg_reqstInfo.edt_rm" propid="value" datasetid="ds_rentReqstManageList" columnid="RM"/>
      <BindItem id="item34" compid="Div00.msk_1" propid="value" datasetid="ds_rentReqstManageList" columnid="MBER_NM"/>
      <BindItem id="item35" compid="Div00.msk_2" propid="value" datasetid="ds_rentReqstManageList" columnid="MBER_NM"/>
      <BindItem id="item1" compid="Div00.msk_setleAm" propid="value" datasetid="ds_rentReqstManageList" columnid="SETLE_AM"/>
      <BindItem id="item21" compid="Div00.rdo_usePrposSe" propid="value" datasetid="ds_rentReqstManageList" columnid="USE_PRPOS_SE"/>
      <BindItem id="item19" compid="Div00.edt_rm" propid="value" datasetid="ds_rentReqstManageList" columnid="RM"/>
      <BindItem id="item13" compid="Div00.edt_useNmpr" propid="value" datasetid="ds_rentReqstManageList" columnid="USE_NMPR"/>
      <BindItem id="item12" compid="Div00.edt_useCn" propid="value" datasetid="ds_rentReqstManageList" columnid="USE_CN"/>
      <BindItem id="item11" compid="Div00.edt_adres" propid="value" datasetid="ds_rentReqstManageList" columnid="ADRES"/>
      <BindItem id="item10" compid="Div00.edt_mbtlnum" propid="value" datasetid="ds_rentReqstManageList" columnid="MBTLNUM"/>
      <BindItem id="item9" compid="Div00.edt_telNo" propid="value" datasetid="ds_rentReqstManageList" columnid="TELNO"/>
      <BindItem id="item5" compid="Div00.edt_grpNm" propid="value" datasetid="ds_rentReqstManageList" columnid="GRP_NM"/>
      <BindItem id="item6" compid="Div00.edt_mberNm" propid="value" datasetid="ds_rentReqstManageList" columnid="MBER_NM"/>
      <BindItem id="item20" compid="tab_detailInfo.tpg_reqstInfo.cmb_fcltsSn" propid="value" datasetid="ds_rentReqstManageList" columnid="FCLTS_SN"/>
      <BindItem id="item14" compid="tab_detailInfo.tpg_reqstInfo.cal_useDe" propid="value" datasetid="ds_rentReqstManageList" columnid="USE_DE"/>
      <BindItem id="item15" compid="tab_detailInfo.tpg_refndInfo.edt_refndAcuntno" propid="value" datasetid="ds_rentReqstManageList" columnid="REFND_ACNUTNO"/>
      <BindItem id="item16" compid="tab_detailInfo.tpg_refndInfo.edt_refndDpstr" propid="value" datasetid="ds_rentReqstManageList" columnid="REFND_DPSTR"/>
      <BindItem id="item17" compid="tab_detailInfo.tpg_refndInfo.edt_setleSe" propid="value" datasetid="ds_rentReqstManageList" columnid="SETLE_SE"/>
      <BindItem id="item18" compid="tab_detailInfo.tpg_refndInfo.edt_refndBackNm" propid="value" datasetid="ds_rentReqstManageList" columnid="REFND_BANK_NM"/>
      <BindItem id="item23" compid="tab_detailInfo.tpg_refndInfo.edt_rcpmnyer" propid="value" datasetid="ds_rentReqstManageList" columnid="RCPMNYER"/>
      <BindItem id="item32" compid="tab_detailInfo.tpg_refndInfo.cmb_setleSe" propid="value" datasetid="ds_rentReqstManageList" columnid="SETLE_SE"/>
      <BindItem id="item2" compid="tab_detailInfo.tpg_reqstInfo.edt_mberNm" propid="value" datasetid="ds_rentReqstManageList" columnid="MBER_NM"/>
      <BindItem id="item3" compid="tab_detailInfo.tpg_reqstInfo.edt_grpNm" propid="value" datasetid="ds_rentReqstManageList" columnid="GRP_NM"/>
      <BindItem id="item36" compid="tab_detailInfo.tpg_reqstInfo.edt_mbtlnum" propid="value" datasetid="ds_rentReqstManageList" columnid="MBTLNUM"/>
      <BindItem id="item38" compid="tab_detailInfo.tpg_reqstInfo.edt_useCn" propid="value" datasetid="ds_rentReqstManageList" columnid="USE_CN"/>
      <BindItem id="item39" compid="tab_detailInfo.tpg_reqstInfo.msk_useNmpr" propid="value" datasetid="ds_rentReqstManageList" columnid="USE_NMPR"/>
      <BindItem id="item40" compid="tab_detailInfo.tpg_reqstInfo.msk_setleAm" propid="value" datasetid="ds_rentReqstManageList" columnid="SETLE_AM"/>
      <BindItem id="item41" compid="tab_detailInfo.tpg_reqstInfo.edt_rm" propid="value" datasetid="ds_rentReqstManageList" columnid="RM"/>
      <BindItem id="item42" compid="tab_detailInfo.tpg_reqstInfo.cmb_setleSttusSe" propid="value" datasetid="ds_rentReqstManageList" columnid="SETLE_STTUS"/>
      <BindItem id="item43" compid="tab_detailInfo.tpg_reqstInfo.rdo_usePrposSe" propid="value" datasetid="ds_rentReqstManageList" columnid="USE_PRPOS_SE"/>
      <BindItem id="item44" compid="tab_detailInfo.tpg_reqstInfo.txt_useTimeFom" propid="value" datasetid="ds_rentReqstManageList" columnid="USE_TIME_FOM"/>
      <BindItem id="item45" compid="tab_detailInfo.tpg_reqstInfo.edt_id" propid="value" datasetid="ds_rentReqstManageList" columnid="MBER_ID"/>
      <BindItem id="item33" compid="tab_detailInfo.tpg_reqstInfo.cal_setleTmlmtDe" propid="value" datasetid="ds_rentReqstManageList" columnid="SETLE_TMLMT_DE"/>
    </Bind>
    <Objects>
      <Dataset id="ds_cond" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="FCLTS_SN" type="STRING" size="256"/>
          <Column id="USE_DE" type="STRING" size="256"/>
          <Column id="DEPT_CODE" type="STRING" size="256"/>
          <Column id="USE_PRPOS_SE" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_rentReqstManage" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false" onrowposchanged="ds_rentReqstManageList_onrowposchanged" canrowposchange="ds_rentReqstManageList_canrowposchange">
        <ColumnInfo>
          <Column id="DEPT_CODE" type="STRING" size="256"/>
          <Column id="MBER_ID" type="STRING" size="256"/>
          <Column id="FCLTS_NM" type="STRING" size="256"/>
          <Column id="FCLTS_SN" type="STRING" size="256"/>
          <Column id="REQST_SN" type="STRING" size="256"/>
          <Column id="RCPMNY_DTLS_SN" type="STRING" size="256"/>
          <Column id="USE_DE" type="STRING" size="256"/>
          <Column id="BEGIN_TIME" type="STRING" size="256"/>
          <Column id="END_TIME" type="STRING" size="256"/>
          <Column id="USE_TIME" type="STRING" size="256"/>
          <Column id="USE_PRPOS_SE" type="STRING" size="256"/>
          <Column id="USE_CN" type="STRING" size="256"/>
          <Column id="USE_NMPR" type="STRING" size="256"/>
          <Column id="USE_AM" type="BIGDECIMAL" size="256"/>
          <Column id="RM" type="STRING" size="256"/>
          <Column id="SETLE_SE" type="STRING" size="256"/>
          <Column id="CODE_NM" type="STRING" size="256"/>
          <Column id="SETLE_AM" type="BIGDECIMAL" size="256"/>
          <Column id="SETLE_STTUS" type="STRING" size="256"/>
          <Column id="SETLE_STTUS2" type="STRING" size="256"/>
          <Column id="REQST_DE" type="STRING" size="256"/>
          <Column id="JDGMN_COMPT_DE" type="STRING" size="256"/>
          <Column id="SETLE_COMPT_DE" type="STRING" size="256"/>
          <Column id="REFND_BANK_CODE" type="STRING" size="256"/>
          <Column id="REFND_BANK_NM" type="STRING" size="256"/>
          <Column id="REFND_ACNUTNO" type="STRING" size="256"/>
          <Column id="REFND_DPSTR" type="STRING" size="256"/>
          <Column id="RCPMNY_BANK_CODE" type="STRING" size="256"/>
          <Column id="RCPMNY_BANK_NM" type="STRING" size="256"/>
          <Column id="RCPMNY_ACNUTNO" type="STRING" size="256"/>
          <Column id="RCPMNYER" type="STRING" size="256"/>
          <Column id="MBER_NM" type="STRING" size="256"/>
          <Column id="GRP_NM" type="STRING" size="256"/>
          <Column id="ADRES" type="STRING" size="256"/>
          <Column id="TELNO" type="STRING" size="256"/>
          <Column id="MBTLNUM" type="STRING" size="256"/>
          <Column id="SETLE_AT" type="STRING" size="256"/>
          <Column id="DELETE_AT" type="STRING" size="256"/>
          <Column id="ORDER_NO" type="STRING" size="256"/>
          <Column id="REQST_DT" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_resveTimeList" useclientlayout="true">
        <ColumnInfo>
          <Column id="BEGIN_TIME" type="STRING" size="256"/>
          <Column id="USE_TIME_FOM" type="STRING" size="256"/>
          <Column id="USE_CHRGE" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_cond2" useclientlayout="true">
        <ColumnInfo>
          <Column id="REQST_SN" type="STRING" size="256"/>
          <Column id="BUNDLE_AT" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
    </Objects>
    <Script type="xscript5.0"><![CDATA[include "lib::comInclude.xjs";

this.HPM070101_T01_onload = function(obj:Form, e:nexacro.LoadEventInfo)
{
}

/**********************************************************************
* call Transaction 영역
***********************************************************************/

/*
 * 함수명      : fn_transaction
 * 설명         : Transaction 요청 처리 함수
 * params          : strSvcId : 서비스요청 ID
 * return Type     : None
 * 사용법        : this.fn_transaction("SELECT");
 */
this.fn_transaction = function(strSvcId)
{
    switch (strSvcId) {
        //  결제정보취소
        case "cancelRcpmnyDtlsMapping":
            var sController       = "hsco/hpm/ctm/HPM070101/cancelRcpmnyDtlsMapping.do";
            var sInDatasets       = "input1=ds_rentReqstManage:U";
            var sOutDatasets      = "";
            break;
      //  예약가능시간 조회
        case "selectResvePosblTime":
            var sController       = "hsco/hpm/ctm/HPM070101/selectResvePosblTime.do";
            var sInDatasets       = "input1=ds_cond";
            var sOutDatasets      = "ds_resveTimeList=output1";
            break;
    }

    Ex.core.tran(this, strSvcId, sController, sInDatasets, sOutDatasets);
}


/**********************************************************************
 * Transaction Callback 영역
 ***********************************************************************/
 /*
 * 함수명      : fn_callBack
 * 설명         : Transaction Callback 처리
 * params          : strSvcId    : 서비스요청 ID
 *                nErrorCode  : 오류 메시지 코드 ([예] 0 : Success, 그밖의 경우, error)
 *                strErrorMsg : 오류 메시지([예]  success.insert|정상적으로 등록되었습니다.)
 * return Type     : None
 * 사용법        :
 */
this.fn_callBack = function (strSvcId, nErrorCode, strErrorMsg)
{
    if(nErrorCode != '0') {
        this.gfn_callback_message(strSvcId, nErrorCode, strErrorMsg);
    }

    if (nErrorCode == '0'){
    switch (strSvcId) {
        //  결제정보취소
         case "cancelRcpmnyDtlsMapping":
          this.parent.fn_search();
          this.gfn_message("success.처리.성공"); 
          break;
        //  예약가능시간 조회
         case "selectResvePosblTime":
          this.fn_getDynamicCheckbox();
         break;
      }
    }
}


/*
 * 함수명     : div_mberSearch_onclick
 * 설명       : 회원조회 팝업 호출
 * params        : None
 * return Type    : None
 * 사용법      : this.div_mberSearch_onclick
 */
this.div_mberSearch_onclick = function(obj:Button,  e:nexacro.ClickEventInfo)
{
   var parm = {
      arg_0      : this
     ,deptCode   : this.parent.ds_cond.getColumn(0, "DEPT_CODE")
     ,deptNm     : this.parent.ds_cond.getColumn(0, "DEPT_NM")
     ,bizplcCode : this.parent.ds_cond.getColumn(0, "BIZPLC_CODE")
   };
      
   this.gfn_popup("popMberInfo", 500, 465, "", parm, "hpm_ctm::HPM070101_P01.xfdl", "fn_popMberInfoCallBack", true);
}


/*
 * 함수명  	: fn_callback2
 * 설명    		: 회원조회 팝업 호출
 * params  		: None
 * return Type  : None
 * 사용법      : this.fn_callback2
 */
this.fn_popMberInfoCallBack = function(sPopupId, sReturn)
{
	if(sPopupId == "popMberInfo")
	{
	  var dsTemp = new Dataset();
	  var loadCnt = dsTemp.loadXML(sReturn);
		if(loadCnt) {
		 var cRow = this.parent.ds_rentReqstManageList.rowposition;
		 this.parent.ds_rentReqstManageList.setColumn(cRow, "MBER_ID", dsTemp.getColumn(0, "MBER_ID"));
		 this.parent.ds_rentReqstManageList.setColumn(cRow, "MBER_NM", dsTemp.getColumn(0, "MBER_NM"));
		 this.parent.ds_rentReqstManageList.setColumn(cRow, "GRP_NM" , dsTemp.getColumn(0, "GRP_NM"));
		 this.parent.ds_rentReqstManageList.setColumn(cRow, "ADRES"  , dsTemp.getColumn(0, "ADRES"));
		 this.parent.ds_rentReqstManageList.setColumn(cRow, "TELNO"  , dsTemp.getColumn(0, "TELNO"));
		 this.parent.ds_rentReqstManageList.setColumn(cRow, "MBTLNUM", dsTemp.getColumn(0, "MBTLNUM"));
		}
	}
}


/*
 * 함수명  	: fn_changeObjectProperty
 * 설명    		: 컴포넌트 제어
 * params  		: None
 * return Type  : None
 * 사용법      : this.fn_changeObjectProperty
 */
this.fn_changeObjectProperty = function() {
   
    var cRow         = this.parent.ds_rentReqstManageList.rowposition;
	var rowType      = this.parent.ds_rentReqstManageList.getRowType(cRow);
	var setleSttus   = this.parent.ds_rentReqstManageList.getOrgColumn(cRow, "SETLE_STTUS");
	var setleComptDe = this.parent.ds_rentReqstManageList.getOrgColumn(cRow, "SETLE_COMPT_DE");
	var useTime      = this.parent.ds_rentReqstManageList.getColumn(cRow, "USE_TIME");
	var setleAt      = this.parent.ds_rentReqstManageList.getColumn(cRow, "SETLE_AT");
	var rentCanclAt  = this.parent.ds_rentReqstManageList.getColumn(cRow, "RENT_CANCL_AT");
	var deleteAt     = this.parent.ds_rentReqstManageList.getColumn(cRow, "DELETE_AT");
	var reqstSn      = this.parent.ds_rentReqstManageList.getColumn(cRow, "REQST_SN");
	var nowSetleSttus   = this.parent.ds_rentReqstManageList.getColumn(cRow, "SETLE_STTUS");
	var lguplusSetleAt = this.parent.ds_rentReqstManageList.getColumn(cRow, "LGUPLUS_SETLE_AT");
	var mngrRegistAt = this.parent.ds_rentReqstManageList.getColumn(cRow, "MNGR_REGIST_AT");
	
	var check  = (rowType == "2" ? true : false );
	var css   = (check == true ? "WF_Essential" : "WF_Readonly");

	// 신청순번이 없는 신청정보(경기타운 경기장 등)
	if(rowType != "2" && this.comUtils.isNull(reqstSn)) {
		
		// visible
		this.tab_detailInfo.tpg_reqstInfo.btn_useRpmsnReqst.set_visible(false);
		this.tab_detailInfo.tpg_reqstInfo.btn_useRpmsn.set_visible(false);
		this.tab_detailInfo.tpg_reqstInfo.btn_setleInfoCancel.set_visible(false);
		this.tab_detailInfo.tpg_reqstInfo.btn_useTimeChk.set_visible(false);
		this.tab_detailInfo.tpg_reqstInfo.div_mberSearch.set_visible(false);
		this.tab_detailInfo.tpg_reqstInfo.btn_reqstCancl.set_visible(false);
		this.tab_detailInfo.tpg_reqstInfo.txt_useTimeFom.set_visible(true);
		
		// readonly
		this.tab_detailInfo.tpg_reqstInfo.cmb_fcltsSn.set_readonly(true);				 
		this.tab_detailInfo.tpg_reqstInfo.cal_useDe.set_readonly(true);	
		this.tab_detailInfo.tpg_reqstInfo.edt_mberNm.set_readonly(true);
		this.tab_detailInfo.tpg_reqstInfo.edt_grpNm.set_readonly(true);
		this.tab_detailInfo.tpg_reqstInfo.edt_mbtlnum.set_readonly(true);
		this.tab_detailInfo.tpg_reqstInfo.edt_useCn.set_readonly(true);
		this.tab_detailInfo.tpg_reqstInfo.msk_useNmpr.set_readonly(true);
		this.tab_detailInfo.tpg_reqstInfo.msk_setleAm.set_readonly(true);
		this.tab_detailInfo.tpg_reqstInfo.edt_rm.set_readonly(true);
		this.tab_detailInfo.tpg_reqstInfo.cmb_setleSttusSe.set_readonly(true);
		this.tab_detailInfo.tpg_reqstInfo.rdo_usePrposSe.set_readonly(true);
		
		// cssclass
		this.tab_detailInfo.tpg_reqstInfo.cmb_fcltsSn.set_cssclass("cmb_WF_Readonly");	
		this.tab_detailInfo.tpg_reqstInfo.cal_useDe.set_cssclass("cal_WF_Readonly");	
		this.tab_detailInfo.tpg_reqstInfo.edt_mberNm.set_cssclass("edt_WF_Readonly");
		this.tab_detailInfo.tpg_reqstInfo.edt_grpNm.set_cssclass("edt_WF_Readonly");
		this.tab_detailInfo.tpg_reqstInfo.edt_mbtlnum.set_cssclass("edt_WF_Readonly");
		this.tab_detailInfo.tpg_reqstInfo.edt_useCn.set_cssclass("edt_WF_Readonly");
		this.tab_detailInfo.tpg_reqstInfo.msk_useNmpr.set_cssclass("msk_WF_Readonly");
		this.tab_detailInfo.tpg_reqstInfo.msk_setleAm.set_cssclass("msk_WF_Readonly");
		this.tab_detailInfo.tpg_reqstInfo.edt_rm.set_cssclass("edt_WF_Readonly");
		this.tab_detailInfo.tpg_reqstInfo.cmb_setleSttusSe.set_cssclass("cmb_WF_Readonly");
		this.tab_detailInfo.tpg_reqstInfo.rdo_usePrposSe.set_cssclass("rdo_WF_Readonly");
	
	}
	
	switch(setleSttus) {
		case "001" :
				// readonly
				this.tab_detailInfo.tpg_reqstInfo.cmb_fcltsSn.set_readonly(true);					  // 시설명(combo)
				this.tab_detailInfo.tpg_reqstInfo.cal_useDe.set_readonly(true);					  // 사용일자
				this.tab_detailInfo.tpg_reqstInfo.edt_mberNm.set_readonly(false);
				this.tab_detailInfo.tpg_reqstInfo.edt_grpNm.set_readonly(false);
				this.tab_detailInfo.tpg_reqstInfo.edt_mbtlnum.set_readonly(false);
				this.tab_detailInfo.tpg_reqstInfo.edt_useCn.set_readonly(false);
				this.tab_detailInfo.tpg_reqstInfo.msk_useNmpr.set_readonly(false);
				this.tab_detailInfo.tpg_reqstInfo.msk_setleAm.set_readonly(false);
				this.tab_detailInfo.tpg_reqstInfo.edt_rm.set_readonly(false);
				this.tab_detailInfo.tpg_reqstInfo.cmb_setleSttusSe.set_readonly(false);
				this.tab_detailInfo.tpg_reqstInfo.rdo_usePrposSe.set_readonly(true);
				
				//visible
				this.tab_detailInfo.tpg_reqstInfo.btn_useTimeChk.set_visible(false);				  // 시간확인 버튼
				this.tab_detailInfo.tpg_reqstInfo.txt_useTimeFom.set_visible(true);				  // 사용시간
				this.tab_detailInfo.tpg_reqstInfo.sta_notice.set_visible(false);
				this.tab_detailInfo.tpg_reqstInfo.div_mberSearch.set_visible(false);
				
				//cssclass
				this.tab_detailInfo.tpg_reqstInfo.cmb_fcltsSn.set_cssclass("cmb_WF_Readonly");			      // 시설명(combo)
				this.tab_detailInfo.tpg_reqstInfo.cal_useDe.set_cssclass("cal_WF_Readonly");				  // 사용일자
				this.tab_detailInfo.tpg_reqstInfo.rdo_usePrposSe.set_cssclass("rdo_WF_Readonly");
				this.tab_detailInfo.tpg_reqstInfo.edt_mberNm.set_cssclass("edt_WF_Essential");
				this.tab_detailInfo.tpg_reqstInfo.edt_grpNm.set_cssclass("edt_WF_Essential");
				this.tab_detailInfo.tpg_reqstInfo.msk_setleAm.set_cssclass("msk_WF_Essential");
				this.tab_detailInfo.tpg_reqstInfo.msk_useNmpr.set_cssclass("msk_WF_Essential");
				this.tab_detailInfo.tpg_reqstInfo.cmb_setleSttusSe.set_cssclass("cmb_WF_Essential");
				
				this.tab_detailInfo.tpg_reqstInfo.btn_useRpmsnReqst.set_visible(true);		// 사용허가 신청서
				this.tab_detailInfo.tpg_reqstInfo.btn_useRpmsn.set_visible(false);			// 사용허가서
				
				// 결제기한일자
				// 수정가능한 조건   - 1. 심사완료
				// (현재 진행상태)   - 2. 입금대기 & LGU+결제모듈을 이용한 입금대기는 안됨(LGU+에 결제기한일자 넘어간 후)
				//				       - 3. 심사중
				this.tab_detailInfo.tpg_reqstInfo.cal_setleTmlmtDe.set_cssclass("");
				this.tab_detailInfo.tpg_reqstInfo.cal_setleTmlmtDe.set_readonly(false);	
				break;
		case "002" :
				// readonly
				this.tab_detailInfo.tpg_reqstInfo.cmb_fcltsSn.set_readonly(true);					  // 시설명(combo)
				this.tab_detailInfo.tpg_reqstInfo.cal_useDe.set_readonly(true);					  // 사용일자
				this.tab_detailInfo.tpg_reqstInfo.edt_mberNm.set_readonly(false);
				this.tab_detailInfo.tpg_reqstInfo.edt_grpNm.set_readonly(false);
				this.tab_detailInfo.tpg_reqstInfo.edt_mbtlnum.set_readonly(false);
				this.tab_detailInfo.tpg_reqstInfo.edt_useCn.set_readonly(true);
				this.tab_detailInfo.tpg_reqstInfo.msk_useNmpr.set_readonly(false);
				this.tab_detailInfo.tpg_reqstInfo.msk_setleAm.set_readonly(false);
				this.tab_detailInfo.tpg_reqstInfo.edt_rm.set_readonly(false);
				this.tab_detailInfo.tpg_reqstInfo.cmb_setleSttusSe.set_readonly(false);
				this.tab_detailInfo.tpg_reqstInfo.rdo_usePrposSe.set_readonly(true);
				
				//visible
				this.tab_detailInfo.tpg_reqstInfo.btn_useTimeChk.set_visible(false);				  // 시간확인 버튼
				this.tab_detailInfo.tpg_reqstInfo.txt_useTimeFom.set_visible(true);				  // 사용시간
				this.tab_detailInfo.tpg_reqstInfo.sta_notice.set_visible(false);
				this.tab_detailInfo.tpg_reqstInfo.div_mberSearch.set_visible(false);
				
				//cssclass
				this.tab_detailInfo.tpg_reqstInfo.cmb_fcltsSn.set_cssclass("cmb_WF_Readonly");			      // 시설명(combo)
				this.tab_detailInfo.tpg_reqstInfo.cal_useDe.set_cssclass("cal_WF_Readonly");				  // 사용일자
				this.tab_detailInfo.tpg_reqstInfo.rdo_usePrposSe.set_cssclass("rdo_WF_Readonly");
				this.tab_detailInfo.tpg_reqstInfo.edt_mberNm.set_cssclass("edt_WF_Essential");
				this.tab_detailInfo.tpg_reqstInfo.edt_grpNm.set_cssclass("edt_WF_Essential");
				this.tab_detailInfo.tpg_reqstInfo.msk_setleAm.set_cssclass("msk_WF_Essential");
				this.tab_detailInfo.tpg_reqstInfo.msk_useNmpr.set_cssclass("msk_WF_Essential");
				this.tab_detailInfo.tpg_reqstInfo.cmb_setleSttusSe.set_cssclass("cmb_WF_Essential");
				
				this.tab_detailInfo.tpg_reqstInfo.btn_setleInfoCancel.set_visible(false);	// 결제정보취소 버튼 
				this.tab_detailInfo.tpg_reqstInfo.btn_useRpmsnReqst.set_visible(true);		// 사용허가 신청서
				this.tab_detailInfo.tpg_reqstInfo.btn_useRpmsn.set_visible(false);			// 사용허가서
				
				// 결제기한일자
				// 수정가능한 조건   - 1. 심사완료
				// (현재 진행상태)   - 2. 입금대기 & LGU+결제모듈을 이용한 입금대기는 안됨(LGU+에 결제기한일자 넘어간 후)
				//				       - 3. 심사중
				this.tab_detailInfo.tpg_reqstInfo.cal_setleTmlmtDe.set_cssclass("");
				this.tab_detailInfo.tpg_reqstInfo.cal_setleTmlmtDe.set_readonly(false);	
				break;
		case "003" :
			
			if(rowType == "2") {
				// readonly
				this.tab_detailInfo.tpg_reqstInfo.cmb_fcltsSn.set_readonly(false);					  // 시설명(combo)
				this.tab_detailInfo.tpg_reqstInfo.cal_useDe.set_readonly(false);					  // 사용일자
				this.tab_detailInfo.tpg_reqstInfo.edt_mberNm.set_readonly(false);
				this.tab_detailInfo.tpg_reqstInfo.edt_grpNm.set_readonly(false);
				this.tab_detailInfo.tpg_reqstInfo.edt_mbtlnum.set_readonly(false);
				this.tab_detailInfo.tpg_reqstInfo.edt_useCn.set_readonly(false);
				this.tab_detailInfo.tpg_reqstInfo.msk_useNmpr.set_readonly(false);
				this.tab_detailInfo.tpg_reqstInfo.msk_setleAm.set_readonly(false);
				this.tab_detailInfo.tpg_reqstInfo.edt_rm.set_readonly(false);
				this.tab_detailInfo.tpg_reqstInfo.cmb_setleSttusSe.set_readonly(false);
				this.tab_detailInfo.tpg_reqstInfo.rdo_usePrposSe.set_readonly(false);
				
				//visible
				this.tab_detailInfo.tpg_reqstInfo.btn_useTimeChk.set_visible(true);				     // 시간확인 버튼
				this.tab_detailInfo.tpg_reqstInfo.txt_useTimeFom.set_visible(false);				  // 사용시간
				this.tab_detailInfo.tpg_reqstInfo.sta_notice.set_visible(false);
				this.tab_detailInfo.tpg_reqstInfo.div_mberSearch.set_visible(true);
				
				//cssclass
				this.tab_detailInfo.tpg_reqstInfo.cmb_fcltsSn.set_cssclass("cmb_WF_Essential");			      // 시설명(combo)
				this.tab_detailInfo.tpg_reqstInfo.cal_useDe.set_cssclass("cal_WF_Essential");				  // 사용일자
				this.tab_detailInfo.tpg_reqstInfo.rdo_usePrposSe.set_cssclass("rdo_WF_Essential");
				this.tab_detailInfo.tpg_reqstInfo.edt_mberNm.set_cssclass("edt_WF_Essential");
				this.tab_detailInfo.tpg_reqstInfo.edt_grpNm.set_cssclass("edt_WF_Essential");
				this.tab_detailInfo.tpg_reqstInfo.msk_setleAm.set_cssclass("msk_WF_Essential");
				this.tab_detailInfo.tpg_reqstInfo.msk_useNmpr.set_cssclass("msk_WF_Essential");
				this.tab_detailInfo.tpg_reqstInfo.cmb_setleSttusSe.set_cssclass("cmb_WF_Essential");
				
				// 결제기한일자
				// 수정가능한 조건   - 1. 심사완료
				// (현재 진행상태)   - 2. 입금대기 & LGU+결제모듈을 이용한 입금대기는 안됨(LGU+에 결제기한일자 넘어간 후)
				//				       - 3. 심사중
				this.tab_detailInfo.tpg_reqstInfo.cal_setleTmlmtDe.set_cssclass("");
				this.tab_detailInfo.tpg_reqstInfo.cal_setleTmlmtDe.set_readonly(false);	
				
				this.tab_detailInfo.tpg_reqstInfo.btn_setleInfoCancel.set_visible(false);	// 결제정보취소 버튼 
				this.tab_detailInfo.tpg_reqstInfo.btn_useRpmsnReqst.set_visible(false);		// 사용허가 신청서
				this.tab_detailInfo.tpg_reqstInfo.btn_useRpmsn.set_visible(false);			// 사용허가서
			}else {
				// readonly
				this.tab_detailInfo.tpg_reqstInfo.cmb_fcltsSn.set_readonly(true);					  // 시설명(combo)
				this.tab_detailInfo.tpg_reqstInfo.cal_useDe.set_readonly(true);					  // 사용일자
				this.tab_detailInfo.tpg_reqstInfo.edt_mberNm.set_readonly(false);
				this.tab_detailInfo.tpg_reqstInfo.edt_grpNm.set_readonly(false);
				this.tab_detailInfo.tpg_reqstInfo.edt_mbtlnum.set_readonly(false);
				this.tab_detailInfo.tpg_reqstInfo.edt_useCn.set_readonly(false);
				this.tab_detailInfo.tpg_reqstInfo.msk_useNmpr.set_readonly(false);
				this.tab_detailInfo.tpg_reqstInfo.msk_setleAm.set_readonly(false);
				this.tab_detailInfo.tpg_reqstInfo.edt_rm.set_readonly(false);
				this.tab_detailInfo.tpg_reqstInfo.cmb_setleSttusSe.set_readonly(false);
				this.tab_detailInfo.tpg_reqstInfo.rdo_usePrposSe.set_readonly(true);
				
				//visible
				this.tab_detailInfo.tpg_reqstInfo.btn_useTimeChk.set_visible(false);				  // 시간확인 버튼
				this.tab_detailInfo.tpg_reqstInfo.txt_useTimeFom.set_visible(true);				  // 사용시간
				this.tab_detailInfo.tpg_reqstInfo.sta_notice.set_visible(false);
				this.tab_detailInfo.tpg_reqstInfo.div_mberSearch.set_visible(false);
				
				//cssclass
				this.tab_detailInfo.tpg_reqstInfo.cmb_fcltsSn.set_cssclass("cmb_WF_Readonly");			      // 시설명(combo)
				this.tab_detailInfo.tpg_reqstInfo.cal_useDe.set_cssclass("cal_WF_Readonly");				  // 사용일자
				this.tab_detailInfo.tpg_reqstInfo.rdo_usePrposSe.set_cssclass("rdo_WF_Readonly");
				this.tab_detailInfo.tpg_reqstInfo.edt_mberNm.set_cssclass("edt_WF_Essential");
				this.tab_detailInfo.tpg_reqstInfo.edt_grpNm.set_cssclass("edt_WF_Essential");
				this.tab_detailInfo.tpg_reqstInfo.msk_setleAm.set_cssclass("msk_WF_Essential");
				this.tab_detailInfo.tpg_reqstInfo.msk_useNmpr.set_cssclass("msk_WF_Essential");
				this.tab_detailInfo.tpg_reqstInfo.cmb_setleSttusSe.set_cssclass("cmb_WF_Essential");
				
				this.tab_detailInfo.tpg_reqstInfo.btn_useRpmsnReqst.set_visible(true);		// 사용허가 신청서
				
							
				// 결제기한일자
				// 수정가능한 조건   - 1. 심사완료
				// (현재 진행상태)   - 2. 입금대기 & LGU+결제모듈을 이용한 입금대기는 안됨(LGU+에 결제기한일자 넘어간 후)
				//				       - 3. 심사중
				this.tab_detailInfo.tpg_reqstInfo.cal_setleTmlmtDe.set_cssclass("");
				this.tab_detailInfo.tpg_reqstInfo.cal_setleTmlmtDe.set_readonly(false);		
				
				this.tab_detailInfo.tpg_reqstInfo.btn_setleInfoCancel.set_visible(false);	// 결제정보취소 버튼 
				
				this.tab_detailInfo.tpg_reqstInfo.btn_useRpmsn.set_visible(true);			// 사용허가서
			}
			
			break;
		case "004" :
			// readonly
			this.tab_detailInfo.tpg_reqstInfo.cmb_fcltsSn.set_readonly(true);					  // 시설명(combo)
			this.tab_detailInfo.tpg_reqstInfo.cal_useDe.set_readonly(true);					  // 사용일자
			this.tab_detailInfo.tpg_reqstInfo.edt_mberNm.set_readonly(false);
			this.tab_detailInfo.tpg_reqstInfo.edt_grpNm.set_readonly(false);
			this.tab_detailInfo.tpg_reqstInfo.edt_mbtlnum.set_readonly(false);
			this.tab_detailInfo.tpg_reqstInfo.edt_useCn.set_readonly(true);
			this.tab_detailInfo.tpg_reqstInfo.msk_useNmpr.set_readonly(false);
			this.tab_detailInfo.tpg_reqstInfo.edt_rm.set_readonly(false);
			this.tab_detailInfo.tpg_reqstInfo.cmb_setleSttusSe.set_readonly(false);
			this.tab_detailInfo.tpg_reqstInfo.rdo_usePrposSe.set_readonly(true);
			
			//visible
			this.tab_detailInfo.tpg_reqstInfo.btn_useTimeChk.set_visible(false);				  // 시간확인 버튼
			this.tab_detailInfo.tpg_reqstInfo.txt_useTimeFom.set_visible(true);				  // 사용시간
			this.tab_detailInfo.tpg_reqstInfo.sta_notice.set_visible(false);
			this.tab_detailInfo.tpg_reqstInfo.div_mberSearch.set_visible(false);
			
			//cssclass
			this.tab_detailInfo.tpg_reqstInfo.cmb_fcltsSn.set_cssclass("cmb_WF_Readonly");			      // 시설명(combo)
			this.tab_detailInfo.tpg_reqstInfo.cal_useDe.set_cssclass("cal_WF_Readonly");				  // 사용일자
			this.tab_detailInfo.tpg_reqstInfo.rdo_usePrposSe.set_cssclass("rdo_WF_Readonly");
			this.tab_detailInfo.tpg_reqstInfo.edt_mberNm.set_cssclass("edt_WF_Essential");
			this.tab_detailInfo.tpg_reqstInfo.edt_grpNm.set_cssclass("edt_WF_Essential");
			this.tab_detailInfo.tpg_reqstInfo.msk_useNmpr.set_cssclass("msk_WF_Essential");
			this.tab_detailInfo.tpg_reqstInfo.cmb_setleSttusSe.set_cssclass("cmb_WF_Essential");
	
			
			// LG유플러스 결제 모듈을 통해 입금대기 된 상태가 아닌 경우는 금액 수정 가능
			// LGU+결제모듈을 이용한 입금대기는 안됨(LGU+에 결제기한일자 넘어간 후)
			if(lguplusSetleAt == "0") {
				this.tab_detailInfo.tpg_reqstInfo.msk_setleAm.set_readonly(false);
				this.tab_detailInfo.tpg_reqstInfo.cal_setleTmlmtDe.set_readonly(false);	
				this.tab_detailInfo.tpg_reqstInfo.msk_setleAm.set_cssclass("msk_WF_Readonly");
				this.tab_detailInfo.tpg_reqstInfo.cal_setleTmlmtDe.set_cssclass("");

			}else {
				this.tab_detailInfo.tpg_reqstInfo.msk_setleAm.set_readonly(true);
				this.tab_detailInfo.tpg_reqstInfo.cal_setleTmlmtDe.set_readonly(true);	
				this.tab_detailInfo.tpg_reqstInfo.msk_setleAm.set_cssclass("msk_WF_Essential");	
				this.tab_detailInfo.tpg_reqstInfo.cal_setleTmlmtDe.set_cssclass("cal_WF_Readonly");
			}
			
			this.tab_detailInfo.tpg_reqstInfo.btn_setleInfoCancel.set_visible(false);	// 결제정보취소 버튼 
			
			this.tab_detailInfo.tpg_reqstInfo.btn_useRpmsnReqst.set_visible(true);		// 사용허가 신청서
			this.tab_detailInfo.tpg_reqstInfo.btn_useRpmsn.set_visible(true);			// 사용허가서
			break;
		case "005" :
			// readonly
			this.tab_detailInfo.tpg_reqstInfo.cmb_fcltsSn.set_readonly(true);					  // 시설명(combo)
			this.tab_detailInfo.tpg_reqstInfo.cal_useDe.set_readonly(true);					      // 사용일자
			this.tab_detailInfo.tpg_reqstInfo.edt_mberNm.set_readonly(false);
			this.tab_detailInfo.tpg_reqstInfo.edt_grpNm.set_readonly(false);
			this.tab_detailInfo.tpg_reqstInfo.edt_mbtlnum.set_readonly(false);
			this.tab_detailInfo.tpg_reqstInfo.edt_useCn.set_readonly(false);
			this.tab_detailInfo.tpg_reqstInfo.msk_useNmpr.set_readonly(true);
			this.tab_detailInfo.tpg_reqstInfo.msk_setleAm.set_readonly(true);
			this.tab_detailInfo.tpg_reqstInfo.edt_rm.set_readonly(false);
			this.tab_detailInfo.tpg_reqstInfo.cmb_setleSttusSe.set_readonly(false);
			this.tab_detailInfo.tpg_reqstInfo.rdo_usePrposSe.set_readonly(true);
			
			//visible
			this.tab_detailInfo.tpg_reqstInfo.btn_useTimeChk.set_visible(false);				  // 시간확인 버튼
			this.tab_detailInfo.tpg_reqstInfo.txt_useTimeFom.set_visible(true);				  // 사용시간
			this.tab_detailInfo.tpg_reqstInfo.sta_notice.set_visible(false);
			this.tab_detailInfo.tpg_reqstInfo.div_mberSearch.set_visible(false);
			
			//cssclass
			this.tab_detailInfo.tpg_reqstInfo.cmb_fcltsSn.set_cssclass("cmb_WF_Readonly");			      // 시설명(combo)
			this.tab_detailInfo.tpg_reqstInfo.cal_useDe.set_cssclass("cal_WF_Readonly");				  // 사용일자
			this.tab_detailInfo.tpg_reqstInfo.rdo_usePrposSe.set_cssclass("rdo_WF_Readonly");
			this.tab_detailInfo.tpg_reqstInfo.edt_mberNm.set_cssclass("edt_WF_Essential");
			this.tab_detailInfo.tpg_reqstInfo.edt_grpNm.set_cssclass("edt_WF_Essential");
			this.tab_detailInfo.tpg_reqstInfo.msk_setleAm.set_cssclass("msk_WF_Readonly");
			this.tab_detailInfo.tpg_reqstInfo.msk_useNmpr.set_cssclass("msk_WF_Readonly");
			this.tab_detailInfo.tpg_reqstInfo.cmb_setleSttusSe.set_cssclass("cmb_WF_Essential");
			
			this.tab_detailInfo.tpg_reqstInfo.cal_setleTmlmtDe.set_cssclass("cal_WF_Readonly");
			this.tab_detailInfo.tpg_reqstInfo.cal_setleTmlmtDe.set_readonly(true);
			
			
			// 결제정보취소 버튼 
			// 조건 -	01. 결제상태      : 결제완료
			//       	02. 결제매핑여부 : 1
			if(setleAt == "1") {
			  this.tab_detailInfo.tpg_reqstInfo.btn_setleInfoCancel.set_visible(true);		// 결제정보취소 버튼 
			}
			
			this.tab_detailInfo.tpg_reqstInfo.btn_useRpmsnReqst.set_visible(true);		// 사용허가 신청서
			this.tab_detailInfo.tpg_reqstInfo.btn_useRpmsn.set_visible(true);			// 사용허가서
			break;
	}
	
	// 대관취소, 삭제 일 때는 대관취소 버튼이 보이지 않음!!
	if(rentCanclAt == '1' || deleteAt == '1') {
		this.tab_detailInfo.tpg_reqstInfo.btn_reqstCancl.set_visible(false);
	}else {
		this.tab_detailInfo.tpg_reqstInfo.btn_reqstCancl.set_visible(true);
	}

	// 사용시간 표현할 div 리셋
	if(typeof this.tab_detailInfo.tpg_reqstInfo.div_useTime == 'object') {
	  this.tab_detailInfo.tpg_reqstInfo.div_useTime.destroy();
	  var div_useTime = new Div("div_useTime", "absolute", 88, 80, null, 47, 3, null);
	  this.tab_detailInfo.tpg_reqstInfo.addChild("div_useTime", div_useTime);
	  div_useTime.show();
	  this.tab_detailInfo.tpg_reqstInfo.txt_useTimeFom.bringToFront();
	  this.tab_detailInfo.tpg_reqstInfo.sta_notice.bringToFront();
	}

	// 선택했던 예약시간확인 체크  
	if(rowType == "2") {
		this.tab_detailInfo.tpg_reqstInfo.cmb_fcltsSn.set_innerdataset("ds_rentFcltsManageList");
		if(!this.comUtils.isNull(useTime)) {
		 this.fn_reserveTimeChk();
		}
	}else {
		this.tab_detailInfo.tpg_reqstInfo.cmb_fcltsSn.set_innerdataset("ds_rentFcltsManageList_s");
	}
	
	// 감면율
// 		var rdcxptAt   = this.parent.ds_rentReqstManageList.getColumn(cRow, "RDCXPT_AT");
// 		var rdcxptRate = this.parent.ds_rentReqstManageList.getColumn(cRow, "RDCXPT_RATE");
// 		
// 		if((setleSttus == "001" || setleSttus == "004" || setleSttus == "005") && rdcxptAt == '1') {
// 		
// 		}else {
// 		
// 		
// 		}
	
}


/*
 * 함수명       : btn_useTimeChk_onclick
 * 설명         : 시간확인 버튼 이벤트 처리
 * params      : None
 * return Type    : None
 * 사용법       : this.btn_useTimeChk_onclick();
 */
this.btn_useTimeChk_onclick= function(obj:Button,  e:nexacro.ClickEventInfo)
{
   this.fn_reserveTimeChk();
}


/*
 * 함수명       : fn_reserveTimeChk
 * 설명         : 예약가능한 시간 구하기
 * params      : None
 * return Type    : None
 * 사용법       : this.fn_reserveTimeChk();
 */
this.fn_reserveTimeChk = function()
{
	var rentRow = this.parent.ds_rentReqstManageList.rowposition;
	var fcltsSn = this.parent.ds_rentReqstManageList.getColumn(rentRow, "FCLTS_SN");
	var fcltsRow = this.parent.ds_rentFcltsManageList.findRow("FCLTS_SN", fcltsSn);
	var deptCode = this.parent.ds_rentFcltsManageList.getColumn(fcltsRow, "DEPT_CODE");
	var useDe = this.parent.ds_rentReqstManageList.getColumn(rentRow, "USE_DE");
	var usePrposSe = this.parent.ds_rentReqstManageList.getColumn(rentRow, "USE_PRPOS_SE");
	
	if(this.comUtils.isNull(fcltsSn) || this.comUtils.isNull(useDe) || this.comUtils.isNull(usePrposSe)) {
		alert("시설, 사용일자, 사용용도를 입력하신 후 사용가능시간확인버튼을 클릭해주십시오.");
		return false;
	}

	this.ds_cond.clearData();
	this.ds_cond.addRow();

	this.ds_cond.setColumn(0, "DEPT_CODE", deptCode);
	this.ds_cond.setColumn(0, "FCLTS_SN", fcltsSn);
	this.ds_cond.setColumn(0, "USE_PRPOS_SE", usePrposSe);
	this.ds_cond.setColumn(0, "USE_DE", useDe);

	this.fn_transaction("selectResvePosblTime");
}
 
/*
* 함수명       : btn_setleInfoCancel_onclick
* 설명        : 결제정보취소 이벤트 처리
* params         : None
* return Type   : None
* 사용법      : this.btn_setleInfoCancel_onclick();
*/
this.btn_setleInfoCancel_onclick= function(obj:Button,  e:nexacro.ClickEventInfo)
{
	if(application.confirm("결제정보를 취소 처리하시겠습니까?")) {

	  var cRow = this.parent.ds_rentReqstManageList.rowposition;
	  var mngrRegistAt = this.parent.ds_rentReqstManageList.getColumn(cRow, "MNGR_REGIST_AT");
	  
	  // 신청정보
	  this.ds_rentReqstManage.clearData();
	  this.ds_rentReqstManage.addRow();
	  this.ds_rentReqstManage.copyRow(0, this.parent.ds_rentReqstManageList, cRow);
 
	 
// 	 // 진행상태 변경
// 	 if(mngrRegistAt == '0') {
// 		 //결제완료 -> 입금대기
// 		 this.ds_rentReqstManage.setColumn(0, "SETLE_STTUS", "004");
// 	  }else {
// 		 //결제완료 -> 심사완료
// 		 this.ds_rentReqstManage.setColumn(0, "SETLE_STTUS", "003");
// 		 // 무통장입금으로 다시 변경
// 		 this.ds_rentReqstManage.setColumn(0, "SETLE_SE", "");
// 	  }
	  this.ds_rentReqstManage.setColumn(0, "SETLE_STTUS", "004");
	  // 결제완료일자 비움
	  this.ds_rentReqstManage.setColumn(0, "SETLE_COMPT_DE", "");
	  
	  this.fn_transaction("cancelRcpmnyDtlsMapping");
	}
}


/*
 * 함수명       : fn_getDynamicCheckbox
 * 설명         : 동적으로 체크박스 셋팅
 * params      : None
 * return Type    : None
 * 사용법       : this.fn_getDynamicCheckbox();
 */
this.fn_getDynamicCheckbox = function() {
   
	// div 재설정
	this.tab_detailInfo.tpg_reqstInfo.div_useTime.destroy();
	var div_useTime = new Div("div_useTime", "absolute", 88, 80, null, 76, 3, null);
	this.tab_detailInfo.tpg_reqstInfo.addChild("div_useTime", div_useTime);
	div_useTime.show();

	var cRow = this.parent.ds_rentReqstManageList.rowposition;
	var useTime = this.parent.ds_rentReqstManageList.getColumn(cRow, "USE_TIME");

	var sta_height = 27;
	var div_height = 21;
	var chk_height = 21;
	var odd = 0;
	var even = 120;

	if(this.ds_resveTimeList.getRowCount() == 0) {
		//예약가능한 시간이 없습니다.
		this.tab_detailInfo.tpg_reqstInfo.sta_notice.set_visible(true);

	}else {
		this.tab_detailInfo.tpg_reqstInfo.div_useTime.style.set_border("1 solid red");
		for(var i = 0; i < this.ds_resveTimeList.getRowCount(); i++) {
			this.tab_detailInfo.tpg_reqstInfo.sta_notice.set_visible(false);
 			
 			
 			even = 120;
 			
 			// left
 			if(i == 0) {
 				var chkbox = new CheckBox("chkbox_all", "absolute", 7, 0, 100, 21, null , null);
				chkbox.set_text("전체");
 				chkbox.set_truevalue("ALL");
 				chkbox.set_falsevalue("0");
 				this.tab_detailInfo.tpg_reqstInfo.div_useTime.addChild("chkbox_all", chkbox);
 				chkbox.show(); 
				eval("this.tab_detailInfo.tpg_reqstInfo.div_useTime.chkbox_all.addEventHandler('onchanged', this.chkbox_onchanged, this)");
 			
 			}
  			
 			if(i%2 != 0) {
 				even = 7;
 				odd = odd+1;
 			}
 			
			var chkbox = new CheckBox("chkbox_"+i, "absolute", even, chk_height*odd, 100, chk_height, null , null);
			chkbox.set_text(this.ds_resveTimeList.getColumn(i, "USE_TIME_FOM"));
			chkbox.set_truevalue(this.ds_resveTimeList.getColumn(i, "BEGIN_TIME"));
			chkbox.set_falsevalue("0");
			this.tab_detailInfo.tpg_reqstInfo.div_useTime.addChild("chkbox_"+i, chkbox);
			chkbox.show(); 

			// 기존에 값이 있었다면(저장 전) 셋팅
			if(!this.comUtils.isNull(useTime)) {
				if(useTime.indexOf(this.ds_resveTimeList.getColumn(i, "BEGIN_TIME")) > -1) {   
					chkbox.set_value(this.ds_resveTimeList.getColumn(i, "BEGIN_TIME"));
				}
			}
			// 동적으로 오브젝트 생성
			eval("this.tab_detailInfo.tpg_reqstInfo.div_useTime.chkbox_"+i+".addEventHandler('onchanged', this.chkbox_onchanged, this)");
		}
	}

	// div 스크롤바 갱신
	this.tab_detailInfo.tpg_reqstInfo.div_useTime.resetScroll();
}
 
 
 /*
 * 함수명       : chkbox_onchanged
 * 설명         : 동적으로 체크박스 셋팅
 * params        : None
 * return Type   : None
 * 사용법       : this.chkbox_onchanged();
 */
this.chkbox_onchanged = function(obj:CheckBox, e:nexacro.CheckBoxChangeEventInfo)
{
	// 전체 체크박스를 선택했을 떄
	if(obj.truevalue == "ALL") {
		if(obj.value == obj.truevalue) {		// 체크
			trace(this.ds_resveTimeList.rowcount);
			for(var i=0; i<this.ds_resveTimeList.rowcount; i++) {
				var beginTime = this.ds_resveTimeList.getColumn(i, "BEGIN_TIME");
				trace("beginTime : "+beginTime);
				eval("this.tab_detailInfo.tpg_reqstInfo.div_useTime.chkbox_"+i+".set_value("+beginTime+")");	// 체크박스 선택되게
				this.chkbox_onchanged2(beginTime, beginTime);	// 체크박스 액션
			}
		}else if(obj.value == obj.falsevalue) {	// 체크해제
			for(var i=0; i<this.ds_resveTimeList.rowcount; i++) {
				var beginTime = this.ds_resveTimeList.getColumn(i, "BEGIN_TIME");
				eval("this.tab_detailInfo.tpg_reqstInfo.div_useTime.chkbox_"+i+".set_value('0')");
				this.chkbox_onchanged2("0", beginTime);
			}
		}
	}else {
		this.chkbox_onchanged2(obj.value, obj.truevalue);
	}
   
};

 /*
 * 함수명       : chkbox_onchanged2
 * 설명         : 체크박스 값
 * params        : None
 * return Type    : None
 * 사용법       : this.chkbox_onchanged2();
 */
this.chkbox_onchanged2 = function(value, truevalue)
{
	var cRow    = this.parent.ds_rentReqstManageList.rowposition;
	var fcltsSn = this.parent.ds_rentReqstManageList.getColumn(cRow, "FCLTS_SN");
	var fctlsRow      = this.parent.ds_rentFcltsManageList.findRow("FCLTS_SN", fcltsSn);
	// 선택된 사용시간 (ex: 1000)
	var useTime = !this.comUtils.isNull(this.parent.ds_rentReqstManageList.getColumn(cRow, "USE_TIME")) ? this.parent.ds_rentReqstManageList.getColumn(cRow, "USE_TIME") : "";
	// 최소예약시간	(ex: 0200)
	var mummResveTime = this.parent.ds_rentFcltsManageList.getColumn(fctlsRow, "MUMM_RESVE_TIME");
	// 사용시간 배열 (ex: [1000, 1200, 1400])
	var useTimeArr = useTime != "" ? useTime.split("-") : [] ;
	// 선택된 시간의 금액 (ex : 20000)
	var useAm = nexacro.toNumber(this.ds_resveTimeList.getColumn(this.ds_resveTimeList.findRow("BEGIN_TIME", truevalue), "USE_CHRGE"));
	// 총 사용금액
	var tot_useAm = !this.comUtils.isNull(this.parent.ds_rentReqstManageList.getColumn(cRow, "SETLE_AM")) ? this.parent.ds_rentReqstManageList.getColumn(cRow, "SETLE_AM") : 0;
	
	// 체크 되었을 때
	if(value != "0") {
		if(useTime.indexOf(truevalue) == -1) {
			useTimeArr.push(truevalue);
			useTimeArr.sort();
			tot_useAm += useAm;
		}

	// 체크 풀었을 때
	}else { 
	  for(var i = 0; i < useTimeArr.length; i++) {
		 if(useTimeArr[i] == truevalue) {
			useTimeArr.splice(i, 1);
			tot_useAm -= useAm;
			break;
		 }
	   }
	}
	
	var new_useTime = (useTimeArr.toString()).replace(/[,]/g, "-");
	var beginTime = useTimeArr[0];
	var endTime = ((nexacro.toNumber(useTimeArr[useTimeArr.length-1])+nexacro.toNumber(mummResveTime)).toString()).padLeft(4, '0');

	// 변경된 사용시간 반영
	this.parent.ds_rentReqstManageList.setColumn(cRow, "USE_TIME"  , new_useTime);   // 사용시간
	this.parent.ds_rentReqstManageList.setColumn(cRow, "SETLE_AM"  , tot_useAm);	 // 결제금액
	this.parent.ds_rentReqstManageList.setColumn(cRow, "BEGIN_TIME", beginTime); 	 // 시작시간
	this.parent.ds_rentReqstManageList.setColumn(cRow, "END_TIME"  , endTime);       // 종료시간
   
};





/*
* 함수명 		: tab_detailInfo_tpg_reqstInfo_btn_reqstCancl_onclick
* 설명  		: 대관취소
* params   		: obj, e
* return Type   : None
* 사용법   	: this.tab_detailInfo_tpg_reqstInfo_btn_reqstCancl_onclick(obj:Button,  e:nexacro.ClickEventInfo)
*/

this.tab_detailInfo_tpg_reqstInfo_btn_reqstCancl_onclick = function(obj:Button,  e:nexacro.ClickEventInfo)
{
	// 데이터셋 변경 체크
    if(Ex.util.isUpdated(this.parent.ds_rentReqstManageList)) {
        if(!this.gfn_message("confirm.변경.취소.여부")) {
            return false;
        }
    }
    
	if(application.confirm("대관을 취소하시겠습니까?")) {
		var cRow = this.parent.ds_rentReqstManageList.rowposition;
		this.parent.ds_rentReqstManageList.setColumn(cRow, "RENT_CANCL_AT", 1);
		this.parent.fn_transaction("saveRentReqstManageList");
	}
}

/*
* 함수명 		: fn_onrowsetchanged
* 설명  		: 데이터셋 row수에 따라서 버튼 enable 변경
* params   		: None
* return Type   : None
* 사용법   	: this.fn_o
nrowsetchanged()
*/
// this.fn_onrowsetchanged = function() {
//  	
//  	var rowCount = this.parent.ds_rentReqstManageList.getRowCount();
//  	var result = (rowCount > 0 ? true : false);
//   
//  	this.tab_detailInfo.tpg_reqstInfo.btn_useTimeChk.set_enable(result);
//  	this.tab_detailInfo.tpg_reqstInfo.div_mberSearch.set_enable(result);
//   	this.tab_detailInfo.tpg_reqstInfo.btn_reqstCancl.set_enable(result);
//  	this.tab_detailInfo.tpg_reqstInfo.btn_useRpmsn.set_enable(result);
//  	this.tab_detailInfo.tpg_reqstInfo.btn_useRpmsnReqst.set_enable(result);
//   	this.tab_detailInfo.tpg_reqstInfo.btn_setleInfoCancel.set_enable(result);
// }


/*
 * 함수명  	: tab_detailInfo_tpg_reqstInfo_btn_useRpmsn_onclick
 * 설명 		: 사용허가서 보고서 출력(조건 - 심사완료 후)
 * params  		: None
 * return Type 	: None
 * 사용법		: this.tab_detailInfo_tpg_reqstInfo_btn_useRpmsn_onclick();
 */
this.tab_detailInfo_tpg_reqstInfo_btn_useRpmsn_onclick = function(obj:Button,  e:nexacro.ClickEventInfo)
{
	var cRow = this.parent.ds_rentReqstManageList.rowposition;
	var reqstSn = this.parent.ds_rentReqstManageList.getColumn(cRow, "REQST_SN");
	var setleSttus = this.parent.ds_rentReqstManageList.getColumn(cRow, "SETLE_STTUS");
	
	this.ds_cond2.clearData();
	this.ds_cond2.addRow();
	this.ds_cond2.setColumn(0, "REQST_SN", reqstSn);
	this.ds_cond2.setColumn(0, "BUNDLE_AT",	"0");

	if(!this.comUtils.isNull(setleSttus) && (setleSttus != "001" || setleSttus != "002")) {
		this.gfn_ReportPopup(this, "HPM/HPM070101_R01.crf", this.ds_cond2);
	}
}

/*
 * 함수명  	: tab_detailInfo_tpg_reqstInfo_btn_report2_onclick
 * 설명 		: 사용허가신청서 보고서 출력
 * params  		: None
 * return Type 	: None
 * 사용법		: this.tab_detailInfo_tpg_reqstInfo_btn_report2_onclick();
 */
this.tab_detailInfo_tpg_reqstInfo_btn_useRpmsnReqst_onclick = function(obj:Button,  e:nexacro.ClickEventInfo)
{
	var cRow = this.parent.ds_rentReqstManageList.rowposition;
	var reqstSn = this.parent.ds_rentReqstManageList.getColumn(cRow, "REQST_SN");
	var setleSttus = this.parent.ds_rentReqstManageList.getColumn(cRow, "SETLE_STTUS");
	var deptCode = this.parent.ds_rentReqstManageList.getColumn(cRow, "DEPT_CODE");
	
	this.ds_cond2.clearData();
	this.ds_cond2.addRow();
	this.ds_cond2.setColumn(0, "REQST_SN", reqstSn);
	this.ds_cond2.setColumn(0, "REPORT_SE", "001");
	this.ds_cond2.setColumn(0, "DEPT_CODE", deptCode);
	this.ds_cond2.setColumn(0, "BUNDLE_AT",	"0");
	
	if(!this.comUtils.isNull(setleSttus) && (setleSttus != "001" || setleSttus != "002")) {
		this.gfn_ReportPopup(this, "HPM/HPM070101_R02.crf", this.ds_cond2);
	}
}
]]></Script>
  </Form>
</FDL>
