<?xml version="1.0" encoding="utf-8"?>
<FDL version="1.5">
  <TypeDefinition url="..\..\default_typedef.xml"/>
  <Form id="HPM060107" classname="UI_HPM060107" left="0" top="0" width="1059" height="735" titletext="프로그램관리" onload="HPM060107_onload" oninit="HPM060107_oninit">
    <Layouts>
      <Layout>
        <Static id="Static00" taborder="16" text="15" visible="false" left="1031" top="0" width="15" height="735" style="background:#1b3cd23c;align:center middle;"/>
        <Static id="Static01" taborder="17" text="스&#13;&#10;크&#13;&#10;롤&#13;&#10;13" visible="false" top="0" right="0" width="13" height="735" style="background:#d07b173c;align:center middle;"/>
        <Tab id="tab" taborder="21" left="0" top="0" tabindex="0" scrollbars="autoboth" bottom="0" style="showextrabutton:false;" right="28">
          <Tabpages>
            <Tabpage id="tabpage1" text="프로그램관리" taborder="0">
              <Layouts>
                <Layout>
                  <Grid id="grd_progrmManageList" taborder="3" useinputpanel="false" left="0" top="72" right="0" bottom="0" binddataset="ds_progrmManageList" autofittype="none" autosizingtype="none" extendsizetype="row" autoenter="select" onexpanddown="tab_tabpage1_grd_onexpanddown">
                    <Formats>
                      <Format id="default">
                        <Columns>
                          <Column size="150"/>
                          <Column size="150"/>
                          <Column size="150"/>
                          <Column size="150"/>
                          <Column size="150"/>
                          <Column size="150"/>
                          <Column size="80"/>
                        </Columns>
                        <Rows>
                          <Row size="24" band="head"/>
                          <Row size="24"/>
                        </Rows>
                        <Band id="head">
                          <Cell text="담당부서"/>
                          <Cell col="1" cssclass="Cellgrd_WF_HeadEssential" text="프로그램코드"/>
                          <Cell col="2" cssclass="Cellgrd_WF_HeadEssential" text="시설"/>
                          <Cell col="3" cssclass="Cellgrd_WF_HeadEssential" text="종목"/>
                          <Cell col="4" cssclass="Cellgrd_WF_HeadEssential" text="반"/>
                          <Cell col="5" text="등급"/>
                          <Cell col="6" text="사용여부"/>
                        </Band>
                        <Band id="body">
                          <Cell text="bind:DEPT_NM"/>
                          <Cell col="1" text="bind:PROGRM_CODE"/>
                          <Cell col="2" displaytype="combo" edittype="expr:dataset.getRowType(currow) == &quot;2&quot; ? 'combo' : 'none'" text="bind:FCLTY" combodataset="ds_fcltySe" combocodecol="CODE" combodatacol="CODE_NM" combodisplay="expr:dataset.getRowType(currow) == &quot;2&quot; ? 'combo' : 'none'"/>
                          <Cell col="3" displaytype="combo" edittype="expr:dataset.getRowType(currow) == &quot;2&quot; ? 'combo' : 'none'" text="bind:ITEM" combodataset="ds_itemTyList" combocodecol="CODE" combodatacol="CODE_NM"/>
                          <Cell col="4" displaytype="combo" edittype="expr:dataset.getRowType(currow) == &quot;2&quot; ? 'combo' : 'none'" text="bind:BAN" combodataset="ds_banTyList" combocodecol="CODE" combodatacol="CODE_NM" combodisplay="expr:dataset.getRowType(currow) == &quot;2&quot; ? 'combo' : 'none'"/>
                          <Cell col="5" displaytype="combo" edittype="expr:dataset.getRowType(currow) == &quot;2&quot; ? 'combo' : 'none'" text="bind:GRAD" combodataset="ds_gradTyList" combocodecol="CODE" combodatacol="CODE_NM" combodisplay="expr:dataset.getRowType(currow) == &quot;2&quot; ? 'combo' : 'none'"/>
                          <Cell col="6" displaytype="checkbox" edittype="checkbox" text="bind:USE_AT"/>
                        </Band>
                      </Format>
                    </Formats>
                  </Grid>
                  <Div id="div_SEARCH" taborder="4" text="Div00" left="0" top="5" right="0" height="33" cssclass="div_WFSA_Box">
                    <Layouts>
                      <Layout>
                        <Static id="sta_EMPL_SE" taborder="1" text="담당부서" cssclass="sta_WFSA_Label" left="5" top="5" width="64" height="21"/>
                        <Div id="div_dept" taborder="5" url="com::deptCode.xfdl" left="69" top="5" width="195" height="21" enable="false" async="false"/>
                        <Combo id="cmb_gradTyList" taborder="6" innerdataset="@ds_gradTyList_s" codecolumn="GRAD" datacolumn="GRAD_NM" left="832" top="5" width="100" height="21"/>
                        <Static id="sta_mberId02" taborder="7" text="등급" cssclass="sta_WFSA_Label" left="787" top="6" width="46" height="21" style="align:left middle;font:bold 9 Gulim;"/>
                        <Static id="Static02" taborder="8" text="15" visible="false" left="773" top="0" width="15" height="31" style="background:#00ffff66;"/>
                        <Combo id="cmb_banTyList" taborder="9" innerdataset="@ds_banTyList_s" codecolumn="BAN" datacolumn="BAN_NM" left="624" top="4" width="149" height="21"/>
                        <Static id="sta_mberId01" taborder="10" text="반" cssclass="sta_WFSA_Label" left="596" top="5" width="46" height="21" style="align:left middle;font:bold 9 Gulim;"/>
                        <Static id="Static01" taborder="11" text="15" visible="false" left="582" top="-1" width="15" height="31" style="background:#00ffff66;"/>
                        <Combo id="cmb_itemTyList" taborder="12" innerdataset="@ds_itemTyList_s" codecolumn="ITEM" datacolumn="ITEM_NM" left="482" top="5" width="100" height="21"/>
                        <Static id="sta_mberId00" taborder="13" text="종목" cssclass="sta_WFSA_Label" left="437" top="5" width="45" height="21" style="align:left middle;font:bold 9 Gulim;"/>
                        <Static id="Static00" taborder="14" text="15" visible="false" left="423" top="0" width="15" height="31" style="background:#00ffff66;"/>
                        <Combo id="cmb_fcltyList_s" taborder="15" innerdataset="@ds_fcltyTyList_s" codecolumn="FCLTY" datacolumn="FCLTY_NM" left="323" top="5" width="100" height="21"/>
                        <Static id="sta_mberId" taborder="16" text="시설" cssclass="sta_WFSA_Label" left="278" top="5" width="45" height="21" style="align:left middle;font:bold 9 Gulim;"/>
                        <Static id="Static03" taborder="17" text="15" visible="false" left="264" top="0" width="15" height="31" style="background:#00ffff66;"/>
                      </Layout>
                    </Layouts>
                  </Div>
                  <Static id="Static36" taborder="5" text="10" visible="false" left="0" top="38" width="1031" height="10" style="background:#dc143c3c;align:center middle;"/>
                  <Static id="sta_title01" taborder="6" text="프로그램 목록" cssclass="sta_WF_Title02" left="0" top="48" width="132" height="19" style="align:left middle;"/>
                  <Static id="Static51" taborder="7" text="5" visible="false" left="0" top="67" width="1031" height="5" style="background:#dc143c3c;align:center middle;"/>
                  <Button id="btn_excelDn" taborder="8" onclick="btn_onclick" cssclass="btn_WF_Gridexceldn" top="48" right="0" height="19" width="25"/>
                </Layout>
              </Layouts>
            </Tabpage>
            <Tabpage id="tabpage2" text="프로그램유형관리" taborder="0">
              <Layouts>
                <Layout>
                  <Static id="Static36" taborder="4" text="5" visible="false" left="0" top="0" width="1031" height="5" style="background:#dc143c3c;align:center middle;"/>
                  <Static id="Static51" taborder="6" text="5" visible="false" left="0" top="24" width="1031" height="5" style="background:#dc143c3c;align:center middle;"/>
                  <Div id="Div00" taborder="18" text="Div00" left="0" top="0" width="32.2%" bottom="0">
                    <Layouts>
                      <Layout>
                        <Static id="sta_title01" taborder="3" text="종목유형" cssclass="sta_WF_Title02" left="0" top="5" width="72" height="19" style="align:left middle;"/>
                        <Button id="btn_itemAdd" taborder="0" text="행추가" onclick="btn_onclick" cssclass="btn_WF_Gridadd" top="5" width="64" height="19" right="67"/>
                        <Button id="btn_itemDel" taborder="1" text="행삭제" onclick="btn_onclick" cssclass="btn_WF_Griddel" top="5" width="64" height="19" right="1"/>
                        <Grid id="Grid00" taborder="4" binddataset="ds_itemTyList" autoenter="select" useinputpanel="false" extendsizetype="row" autofittype="col" autosizingtype="row" left="0" top="29" right="0" bottom="0">
                          <Formats>
                            <Format id="default">
                              <Columns>
                                <Column size="40"/>
                                <Column size="50"/>
                                <Column size="140"/>
                                <Column size="40"/>
                                <Column size="40"/>
                              </Columns>
                              <Rows>
                                <Row size="30" band="head"/>
                                <Row size="24"/>
                              </Rows>
                              <Band id="head">
                                <Cell text="순번"/>
                                <Cell col="1" cssclass="Cellgrd_WF_HeadEssential" text="코드"/>
                                <Cell col="2" cssclass="Cellgrd_WF_HeadEssential" text="코드명"/>
                                <Cell col="3" text="사용&#13;&#10;여부"/>
                                <Cell col="4" text="정렬&#13;&#10;순서"/>
                              </Band>
                              <Band id="body">
                                <Cell text="expr:currow + 1"/>
                                <Cell col="1" edittype="none" text="bind:CODE"/>
                                <Cell col="2" edittype="text" style="align:left;" text="bind:CODE_NM" wordwrap="char" editlimit="150" editdisplay="display" editlengthunit="ascii" autosizerow="limitmin"/>
                                <Cell col="3" displaytype="checkbox" edittype="checkbox" text="bind:USE_AT"/>
                                <Cell col="4" edittype="normal" editfilter="integer" text="bind:SORT_ORDR" editlimit="3" editdisplay="display"/>
                              </Band>
                            </Format>
                          </Formats>
                        </Grid>
                      </Layout>
                    </Layouts>
                  </Div>
                  <Div id="Div02" taborder="20" text="Div02" left="33.85%" top="0" width="32.2%" bottom="0">
                    <Layouts>
                      <Layout>
                        <Static id="sta_title02" taborder="3" text="반유형" cssclass="sta_WF_Title02" left="0" top="5" width="72" height="19" style="align:left middle;"/>
                        <Button id="btn_banAdd" taborder="0" text="행추가" cssclass="btn_WF_Gridadd" top="5" width="64" height="19" right="67" onclick="btn_onclick"/>
                        <Button id="btn_banDel" taborder="1" text="행삭제" cssclass="btn_WF_Griddel" top="5" width="64" height="19" right="0" onclick="btn_onclick"/>
                        <Grid id="Grid00" taborder="4" binddataset="ds_banTyList" autoenter="select" useinputpanel="false" extendsizetype="row" autofittype="col" autosizingtype="row" left="0" top="29" right="0" bottom="0">
                          <Formats>
                            <Format id="default">
                              <Columns>
                                <Column size="40"/>
                                <Column size="50"/>
                                <Column size="140"/>
                                <Column size="40"/>
                                <Column size="40"/>
                              </Columns>
                              <Rows>
                                <Row size="30" band="head"/>
                                <Row size="24"/>
                              </Rows>
                              <Band id="head">
                                <Cell text="순번"/>
                                <Cell col="1" cssclass="Cellgrd_WF_HeadEssential" text="코드"/>
                                <Cell col="2" cssclass="Cellgrd_WF_HeadEssential" text="코드명"/>
                                <Cell col="3" text="사용&#13;&#10;여부"/>
                                <Cell col="4" text="정렬&#13;&#10;순서"/>
                              </Band>
                              <Band id="body">
                                <Cell text="expr:currow + 1"/>
                                <Cell col="1" edittype="none" text="bind:CODE"/>
                                <Cell col="2" edittype="text" style="align:left;" text="bind:CODE_NM" wordwrap="char" editlimit="150" editdisplay="display" editlengthunit="ascii" autosizerow="limitmin"/>
                                <Cell col="3" displaytype="checkbox" edittype="checkbox" text="bind:USE_AT"/>
                                <Cell col="4" edittype="normal" editfilter="number" text="bind:SORT_ORDR" editlimit="3" editdisplay="display"/>
                              </Band>
                            </Format>
                          </Formats>
                        </Grid>
                      </Layout>
                    </Layouts>
                  </Div>
                  <Div id="Div03" taborder="21" text="Div03" left="67.7%" top="0" width="32.2%" bottom="0">
                    <Layouts>
                      <Layout width="264" height="563">
                        <Static id="sta_title03" taborder="3" text="등급유형" cssclass="sta_WF_Title02" left="0" top="5" width="72" height="19" style="align:left middle;"/>
                        <Button id="btn_gradAdd" taborder="0" text="행추가" cssclass="btn_WF_Gridadd" top="5" width="64" height="19" right="67" onclick="btn_onclick"/>
                        <Button id="btn_gradDel" taborder="1" text="행삭제" cssclass="btn_WF_Griddel" top="5" width="64" height="19" right="0" onclick="btn_onclick"/>
                        <Grid id="Grid00" taborder="4" binddataset="ds_gradTyList" autoenter="select" useinputpanel="false" extendsizetype="row" autofittype="col" autosizingtype="row" left="0" top="29" right="0" bottom="0">
                          <Formats>
                            <Format id="default">
                              <Columns>
                                <Column size="40"/>
                                <Column size="50"/>
                                <Column size="140"/>
                                <Column size="40"/>
                                <Column size="40"/>
                              </Columns>
                              <Rows>
                                <Row size="30" band="head"/>
                                <Row size="24"/>
                              </Rows>
                              <Band id="head">
                                <Cell text="순번"/>
                                <Cell col="1" cssclass="Cellgrd_WF_HeadEssential" text="코드"/>
                                <Cell col="2" cssclass="Cellgrd_WF_HeadEssential" text="코드명"/>
                                <Cell col="3" text="사용&#13;&#10;여부"/>
                                <Cell col="4" text="정렬&#13;&#10;순서"/>
                              </Band>
                              <Band id="body">
                                <Cell text="expr:currow + 1"/>
                                <Cell col="1" edittype="none" text="bind:CODE"/>
                                <Cell col="2" edittype="text" style="align:left;" text="bind:CODE_NM" wordwrap="char" editlimit="150" editdisplay="display" editlengthunit="ascii" autosizerow="limitmin"/>
                                <Cell col="3" displaytype="checkbox" edittype="checkbox" text="bind:USE_AT"/>
                                <Cell col="4" edittype="normal" editfilter="number" text="bind:SORT_ORDR" editlimit="3" editdisplay="display"/>
                              </Band>
                            </Format>
                          </Formats>
                        </Grid>
                      </Layout>
                    </Layouts>
                  </Div>
                </Layout>
              </Layouts>
            </Tabpage>
          </Tabpages>
        </Tab>
      </Layout>
    </Layouts>
    <Objects>
      <Dataset id="ds_cond" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false" cancolumnchange="ds_cond_cancolumnchange" oncolumnchanged="ds_cond_oncolumnchanged">
        <ColumnInfo>
          <Column id="DEPT_CODE" type="STRING" size="256"/>
          <Column id="DEPT_NM" type="STRING" size="256"/>
          <Column id="USE_AT" type="STRING" size="256"/>
          <Column id="FCLTY" type="STRING" size="256"/>
          <Column id="ITEM" type="STRING" size="256"/>
          <Column id="BAN" type="STRING" size="256"/>
          <Column id="GRAD" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_validation" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="compId" type="STRING" size="256"/>
          <Column id="colId" type="STRING" size="256"/>
          <Column id="PK" type="STRING" size="256"/>
          <Column id="notNull" type="STRING" size="256"/>
          <Column id="type" type="STRING" size="256"/>
          <Column id="nlength" type="STRING" size="256"/>
          <Column id="from" type="STRING" size="256"/>
          <Column id="to" type="STRING" size="256"/>
          <Column id="lengthChkGb" type="STRING" size="256"/>
          <Column id="msgId" type="STRING" size="256"/>
          <Column id="expr" type="STRING" size="256"/>
          <Column id="func" type="STRING" size="256"/>
        </ColumnInfo>
        <Rows>
          <Row>
            <Col id="compId">ds_cond</Col>
            <Col id="colId">DEPT_CODE</Col>
            <Col id="notNull">Y</Col>
            <Col id="msgId">담당부서</Col>
          </Row>
          <Row>
            <Col id="colId">PROGRM_CODE</Col>
            <Col id="compId">ds_progrmManageList</Col>
            <Col id="notNull">Y</Col>
            <Col id="msgId">프로그램코드</Col>
            <Col id="PK">Y</Col>
          </Row>
          <Row>
            <Col id="compId">ds_progrmManageList</Col>
            <Col id="colId">FCLTY</Col>
            <Col id="notNull">Y</Col>
            <Col id="msgId">시설</Col>
          </Row>
          <Row>
            <Col id="compId">ds_progrmManageList</Col>
            <Col id="colId">ITEM</Col>
            <Col id="notNull">Y</Col>
            <Col id="msgId">종목</Col>
          </Row>
          <Row>
            <Col id="compId">ds_progrmManageList</Col>
            <Col id="colId">BAN</Col>
            <Col id="notNull">Y</Col>
            <Col id="msgId">반</Col>
          </Row>
          <Row>
            <Col id="colId">CODE</Col>
            <Col id="compId">ds_itemTyList</Col>
            <Col id="msgId">종목유형 코드</Col>
            <Col id="notNull">Y</Col>
            <Col id="PK">Y</Col>
            <Col id="nlength"/>
            <Col id="lengthChkGb"/>
          </Row>
          <Row>
            <Col id="compId">ds_itemTyList</Col>
            <Col id="colId">CODE_NM</Col>
            <Col id="notNull"/>
            <Col id="nlength"/>
            <Col id="lengthChkGb"/>
            <Col id="msgId">종목유형 코드명</Col>
            <Col id="PK">Y</Col>
          </Row>
          <Row>
            <Col id="compId">ds_banTyList</Col>
            <Col id="colId">CODE</Col>
            <Col id="notNull">Y</Col>
            <Col id="msgId">반유형 코드</Col>
            <Col id="PK">Y</Col>
            <Col id="lengthChkGb"/>
            <Col id="type">[Undefined]</Col>
            <Col id="nlength"/>
            <Col id="from">[Undefined]</Col>
            <Col id="to">[Undefined]</Col>
          </Row>
          <Row>
            <Col id="compId">ds_banTyList</Col>
            <Col id="colId">CODE_NM</Col>
            <Col id="notNull"/>
            <Col id="msgId">반유형 코드명</Col>
            <Col id="nlength"/>
            <Col id="lengthChkGb"/>
            <Col id="PK">Y</Col>
            <Col id="type">[Undefined]</Col>
            <Col id="from">[Undefined]</Col>
            <Col id="to">[Undefined]</Col>
          </Row>
          <Row>
            <Col id="compId">ds_gradTyList</Col>
            <Col id="colId">CODE</Col>
            <Col id="notNull">Y</Col>
            <Col id="msgId">등급유형 코드</Col>
            <Col id="nlength"/>
            <Col id="lengthChkGb"/>
            <Col id="PK">Y</Col>
            <Col id="type">[Undefined]</Col>
            <Col id="from">[Undefined]</Col>
            <Col id="to">[Undefined]</Col>
          </Row>
          <Row>
            <Col id="compId">ds_gradTyList</Col>
            <Col id="colId">CODE_NM</Col>
            <Col id="notNull"/>
            <Col id="msgId">등급유형 코드명</Col>
            <Col id="nlength"/>
            <Col id="lengthChkGb"/>
            <Col id="PK">Y</Col>
            <Col id="type">[Undefined]</Col>
            <Col id="from">[Undefined]</Col>
            <Col id="to">[Undefined]</Col>
          </Row>
        </Rows>
      </Dataset>
      <Dataset id="ds_progrmManageList" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false" oncolumnchanged="ds_progrmManageList_oncolumnchanged">
        <ColumnInfo>
          <Column id="PROGRM_CODE" type="STRING" size="256"/>
          <Column id="DEPT_CODE" type="STRING" size="256"/>
          <Column id="FCLTY" type="STRING" size="256"/>
          <Column id="ITEM" type="STRING" size="256"/>
          <Column id="BAN" type="STRING" size="256"/>
          <Column id="GRAD" type="STRING" size="256"/>
          <Column id="USE_AT" type="STRING" size="256"/>
          <Column id="RENT_PROGRM_CNT" type="STRING" size="256"/>
          <Column id="DEPT_NM" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_itemTyList" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="DEPT_CODE" type="string" size="256"/>
          <Column id="TY_CODE" type="string" size="256"/>
          <Column id="CODE_NM" type="string" size="256"/>
          <Column id="CODE" type="string" size="256"/>
          <Column id="USE_AT" type="STRING" size="256"/>
          <Column id="SORT_ORDR" type="STRING" size="256"/>
          <Column id="RENT_PROGRM_CNT" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_banTyList" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="DEPT_CODE" type="string" size="256"/>
          <Column id="TY_CODE" type="string" size="256"/>
          <Column id="CODE_NM" type="string" size="256"/>
          <Column id="CODE" type="string" size="256"/>
          <Column id="USE_AT" type="STRING" size="256"/>
          <Column id="SORT_ORDR" type="STRING" size="256"/>
          <Column id="RENT_PROGRM_CNT" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_gradTyList" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="DEPT_CODE" type="string" size="256"/>
          <Column id="TY_CODE" type="string" size="256"/>
          <Column id="CODE_NM" type="string" size="256"/>
          <Column id="CODE" type="string" size="256"/>
          <Column id="USE_AT" type="STRING" size="256"/>
          <Column id="SORT_ORDR" type="STRING" size="256"/>
          <Column id="RENT_PROGRM_CNT" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_fcltySe">
        <ColumnInfo>
          <Column id="CODE" type="STRING" size="256"/>
          <Column id="CODE_NM" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_fcltyTyList_s" useclientlayout="true">
        <ColumnInfo>
          <Column id="FCLTY" type="STRING" size="256"/>
          <Column id="FCLTY_NM" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_itemTyList_s" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="FCLTY" type="string" size="256"/>
          <Column id="ITEM" type="string" size="256"/>
          <Column id="ITEM_NM" type="string" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_banTyList_s" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="FCLTY" type="string" size="256"/>
          <Column id="ITEM" type="string" size="256"/>
          <Column id="BAN" type="STRING" size="256"/>
          <Column id="BAN_NM" type="string" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_gradTyList_s" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="FCLTY" type="string" size="256"/>
          <Column id="ITEM" type="string" size="256"/>
          <Column id="BAN" type="string" size="256"/>
          <Column id="GRAD" type="STRING" size="256"/>
          <Column id="GRAD_NM" type="string" size="256"/>
        </ColumnInfo>
      </Dataset>
    </Objects>
    <Bind>
      <BindItem id="item3" compid="tab.tabpage1.div_SEARCH.cmb_gradTyList" propid="value" datasetid="ds_cond" columnid="GRAD"/>
      <BindItem id="item2" compid="tab.tabpage1.div_SEARCH.cmb_banTyList" propid="value" datasetid="ds_cond" columnid="BAN"/>
      <BindItem id="item0" compid="tab.tabpage1.div_SEARCH.cmb_itemTyList" propid="value" datasetid="ds_cond" columnid="ITEM"/>
      <BindItem id="item1" compid="tab.tabpage1.div_SEARCH.cmb_fcltyList_s" propid="value" datasetid="ds_cond" columnid="FCLTY"/>
    </Bind>
    <Script type="xscript5.0"><![CDATA[/***********************************************************************
 * 화면ID   : HPM060107
 * 화면명   : 프로그램관리
 * 화면설명 : 프로그램를 관리한다.
 * 작성일   : 2017.10.13
 * 작성자   : 정 민
 * 수정이력 : 
 ***********************************************************************
 *     수정일     수정자   내용
 ***********************************************************************
 *    	
 ***********************************************************************
 */


/***********************************************************************
 * Script Include 
 ************************************************************************/
// 시스템 공통 라이브러리 Include
include "lib::comInclude.xjs";
include "mis_lib::misUtil.xjs";

// 업무에 필요한 공통 라이브러리 파일을 추가할 수 있다.
// TODO


/***********************************************************************
 * 화면 변수 선언부
 ***********************************************************************/
 
 
 /***********************************************************************
 * onInit / onLoad 영역
 ***********************************************************************/
this.HPM060107_oninit = function(obj:Form, e:nexacro.InitEventInfo)
{
	// Form 초기화
	this.fn_init_form();
	this.fn_misFormInit(this);

	// DataSet 초기화
	this.fn_init_dataset();
}

this.HPM060107_onload = function(obj:Form, e:nexacro.LoadEventInfo)
{
	this.tab.tabpage1.div_SEARCH.div_dept.fn_setBind("ds_cond", "DEPT_CODE", "DEPT_NM");
}

/***********************************************************************
 * Form/Dataset 오브젝트 초기화
 ***********************************************************************/
 
/*
 * 함수명  	: initForm
 * 설명 		: Form을 초기화한다.
 * params  		: None
 * return Type 	: None
 * 사용법		: this.initForm();
 */
this.fn_init_form = function()
{
	// 시스템 공통으로 Form을 Initialize 한다.
	this.gfn_initForm(this);
	
	this.ds_cond.clearData();
	this.ds_cond.addRow();
// 	this.ds_cond.setColumn(0, "DEPT_CODE"  , "000000");
// 	this.ds_cond.setColumn(0, "DEPT_NM"    , "화성도시공사");
	this.ds_cond.setColumn(0, "USE_AT"    , "");
	this.ds_cond.setColumn(0, "DEPT_CODE",     this.gfn_getDeptId());
	this.ds_cond.setColumn(0, "DEPT_NM"    ,     this.gfn_getDeptName());
    
    // 공통코드
    var comboParams = [
						   ["ds_fcltySe", "HPM018", "1", ""]      		// 프로그램시설구분
                      ];
    var callback = function (svcId, errorCode, errorMsg) {       
        
        // 공통코드와 연계된 초기검색조건 설정
		// 수정가능여부를 판별하기위해 권한그룹 체크
		if(this.gfn_authGrpId("DEV_GRP") != -1) {			// 개발자
			this.chargerAt = true;
		}
		if(this.gfn_authGrpId("HPM_ADMIN") != -1) {			// 대관관리자
			this.chargerAt = true;
		}
		if(this.gfn_authGrpId("ALL_ADMIN") != -1) {			// 전체권한
			this.chargerAt = true;
		}
		if(this.gfn_authGrpId("HSCO_ADMIN") != -1) {		// 루트권한자
			this.chargerAt = true;
		}
		
		// 수정가능한 경우 부서변경 가능
		if(this.chargerAt){
			this.tab.tabpage1.div_SEARCH.div_dept.set_enable(true);
		}
    };
    
	this.gfn_comboLoad (comboParams, callback);
}

/*
 * 함수명  	: initDataset
 * 설명 		: Dataset을 초기화한다.
 *                주로, 조건 Dataset들(ds_cond, ds_cond_00, ds_cond_01, ...) 을 초기화한다.
 * params  		: None
 * return Type 	: None
 * 사용법		: this.initDataset();
 */
this.fn_init_dataset = function()
{
	//this.gfn_initCondDs(this, this.div_search);
	
	// 조건 Dataset 외에 초기화가 필요한 Dataset에 대한 초기화 코드를 추가한다.
	// TODO
}

/***********************************************************************
 * Transaction 관련 이벤트 핸들러 
 **********************************************************************/
/*
 * 함수명  	: fn_search
 * 설명 		: 조회 이벤트 처리
 * params  		: None
 * return Type 	: None
 * 사용법		: this.fn_search();
 */
this.fn_search = function()
{	
	// validation 체크
	if(!this.gfn_checkValidation_NoUpdChk(this.ds_cond, this.ds_validation)) {
		return false;
	}
	this.ds_itemTyList.clearData();
	this.ds_banTyList.clearData();
	this.ds_gradTyList.clearData();
	this.fn_transaction("selectProgrmTyCode");
	
	this.ds_progrmManageList.clearData();
	this.fn_transaction("selectProgrmManageList");

}

/*
 * 함수명  	: fn_save
 * 설명 		: 계정과목 저장
 * params  		: None
 * return Type 	: None
 * 사용법		: this.fn_save();
 */
this.fn_save= function()
{	
 	if(!this.gfn_checkValidation_NoUpdChk(this.ds_progrmManageList, this.ds_validation)    ||
 	   !this.gfn_checkValidation_NoUpdChk(this.ds_itemTyList, this.ds_validation) ||
 	   !this.gfn_checkValidation_NoUpdChk(this.ds_banTyList, this.ds_validation)  ||
 	   !this.gfn_checkValidation_NoUpdChk(this.ds_gradTyList, this.ds_validation)) {
 		return;
 	}
 	
 	this.fn_transaction("saveProgrmCUD");
}

/**********************************************************************
 * CALL TRANSACTION 영역
 **********************************************************************/
 
/*
 * 함수명  	: fn_transaction
 * 설명 		: Transaction 요청 처리 함수
 * params  		: strSvcId : 서비스요청 ID
 * return Type 	: None
 * 사용법		: this.fn_transaction("SELECT");
 */
this.fn_transaction = function(strSvcId)
{
	switch (strSvcId) {
		case "selectProgrmManageList":	// 프로그램 목록
			var sController   	= "hsco/hpm/ctm/HPM060107/selectProgrmManageList.do";
			var sInDatasets   	= "input1=ds_cond";
			var sOutDatasets  	= "ds_progrmManageList=output1 ds_itemTyList=output2 ds_banTyList=output3 ds_gradTyList=output4";
			break;
		case "saveProgrmCUD": 		// 프로그램 저장
			var sController   	= "hsco/hpm/ctm/HPM060107/selectProgrmCUD.do";
			var sInDatasets   	= "input1=ds_itemTyList:U input2=ds_banTyList:U input3=ds_gradTyList:U input4=ds_progrmManageList:U";
			var sOutDatasets  	= "";
			break;
 		case "selectProgrmTyCode": 	// 프로그램유형 코드 (검색조건)
 			var sController   	= "hsco/hpm/ctm/HPM060107/selectProgrmTyCode.do";
 			var sInDatasets   	= "input1=ds_cond";
 			var sOutDatasets  	= "ds_itemTyList_s=output1 ds_banTyList_s=output2 ds_gradTyList_s=output3 ds_fcltyTyList_s=output4";
 			break;

	}

	Ex.core.tran(this, strSvcId, sController, sInDatasets, sOutDatasets); 
}

/**********************************************************************
 * Transaction Callback 영역
 ***********************************************************************/

 /*
 * 함수명  	: fn_callBack
 * 설명 		: Transaction Callback 처리
 * params  		: strSvcId    : 서비스요청 ID
 *                nErrorCode  : 오류 메시지 코드 ([예] 0 : Success, 그밖의 경우, error)
 *                strErrorMsg : 오류 메시지([예]  success.insert|정상적으로 등록되었습니다.)
 * return Type 	: None
 * 사용법		: 
 */
this.fn_callBack = function (strSvcId, nErrorCode, strErrorMsg)
{

	if (nErrorCode != 0) {
		// 오류 메시지를 보여주는 동작 외에 처리할 내용이 있으면 아래에 기술.
		// 처리할 내용이 없다면, switch 문은 생략합니다.
		this.gfn_callback_message(strSvcId, nErrorCode, strErrorMsg);
	} else {
		// 성공 메시지를 보여주는 동작 외에 처리할 내용이 있으면 아래에 기술.
		// 처리할 내용이 없다면, switch 문은 생략합니다.
		switch(strSvcId) {
			case "selectProgrmManageList":	// 프로그램 목록
				break;
			case "saveProgrmCUD": 		// 프로그램 저장
				break;
			case "selectProgrmTyCode": 		// 프로그램 코드
				this.ds_fcltyTyList_s.insertRow(0);
				this.ds_fcltyTyList_s.setColumn(0, "FCLTY"   , "");
				this.ds_fcltyTyList_s.setColumn(0, "FCLTY_NM", "전체");
				
				this.ds_itemTyList_s.insertRow(0);
				this.ds_itemTyList_s.setColumn(0, "ITEM"   , "");
				this.ds_itemTyList_s.setColumn(0, "ITEM_NM", "전체");
				
				this.ds_banTyList_s.insertRow(0);
				this.ds_banTyList_s.setColumn(0, "BAN"   , "");
				this.ds_banTyList_s.setColumn(0, "BAN_NM", "전체");
				
				this.ds_gradTyList_s.insertRow(0);
				this.ds_gradTyList_s.setColumn(0, "GRAD"   , "");
				this.ds_gradTyList_s.setColumn(0, "GRAD_NM", "전체");
								
				this.ds_cond.setColumn(0, "FCLTY"     ,  "");
				break;
		}
	}
		
}

/***********************************************************************
 * non-Transaction 관련 컴포넌트 이벤트 처리 함수
 ***********************************************************************/
/*
 * 함수명  	: fn_insert
 * 설명 		: 신규 버튼
 * params  		: None
 * return Type 	: None
 * 사용법		: this.fn_insert();
 */
this.fn_insert = function()
{
	if(this.tab.tabindex==0){
		
		var deptCode = this.ds_cond.getColumn(0, "DEPT_CODE");
		var deptNm   = this.ds_cond.getColumn(0, "DEPT_NM");

		var nRow = this.ds_progrmManageList.addRow();
		this.ds_progrmManageList.setColumn(nRow, "DEPT_CODE", deptCode);
		this.ds_progrmManageList.setColumn(nRow, "DEPT_NM"  , deptNm);
		this.ds_progrmManageList.setColumn(nRow, "USE_AT"   , "1");
	}
}


/*
 * 함수명  	: fn_delete
 * 설명 		: 삭제 버튼
 * params  		: None
 * return Type 	: None
 * 사용법		: this.fn_delete();
 */
this.fn_delete= function()
{	
	if(this.tab.tabindex == 0){
		var cRow = this.ds_progrmManageList.rowposition;
		var rentProgrmCnt = this.ds_progrmManageList.getColumn(cRow, "RENT_PROGRM_CNT");
		
		if(rentProgrmCnt > 0) {
			alert("해당 프로그램에 대한 강좌가 존재합니다.\n강좌를 먼저 삭제하신 후 프로그램 삭제를 진행해주세요.");
		} else {
			this.ds_progrmManageList.deleteRow(this.ds_progrmManageList.rowposition);
		}
	}
}

/*
 * 함수명  	: fn_cancel
 * 설명 		: 취소 버튼 이벤트 처리(Dataset 변경 내역 Reset)
 * params  		: None
 * return Type 	: None
 * 사용법		: this.fn_cancel();
 */
this.fn_cancel= function()
{
	if(this.gfn_message("confirm.취소여부") ){
		switch(this.tab.tabindex) {
			case 0:
				this.ds_progrmManageList.reset();
				this.ds_progrmManageList.applyChange();
				break;
			case 1:
				this.ds_itemTyList.reset();
				this.ds_banTyList.reset();
				this.ds_gradTyList.reset();
				this.ds_itemTyList.applyChange();
				this.ds_banTyList.applyChange();
				this.ds_gradTyList.applyChange();
				break;
		}
		
	}	
}

/*
/*
 * 함수명  	: btn_onclick
 * 설명 		: 버튼 클릭 이벤트 처리
 * params  		: 
 * return Type 	: None
 * 사용법		: btn_onclick();
 */
this.btn_onclick = function(obj:Button,  e:nexacro.ClickEventInfo)
{
	var deptCode = this.ds_cond.getColumn(0, "DEPT_CODE");

	switch(obj.name) {
	
		// ===== 종목유형 버튼 =====
		case "btn_itemAdd":	// 종목유형 추가
			var nRow = this.ds_itemTyList.addRow();
			this.ds_itemTyList.setColumn(nRow, "DEPT_CODE", deptCode);
			this.ds_itemTyList.setColumn(nRow, "TY_CODE"  , "1");
			this.ds_itemTyList.setColumn(nRow, "CODE"     , this.fn_getValueByTy("item", "code"));
			this.ds_itemTyList.setColumn(nRow, "USE_AT"   , 1);
			//this.ds_itemTyList.setColumn(nRow, "SORT_ORDR", this.fn_getValueByTy("item", "sortOrdr"));
			break;
		case "btn_itemDel":	// 종목유형 삭제
			var cRow = this.ds_itemTyList.rowposition;
			var progrmCnt = this.ds_itemTyList.getColumn(cRow, "RENT_PROGRM_CNT");
			if(progrmCnt > 0) {
				alert("해당 유형에 대한 프로그램이 존재합니다.\n프로그램을 먼저 삭제하신 후 유형 삭제를 진행해주세요.");
			} else {
				this.ds_itemTyList.deleteRow(cRow);
			}
			break;
		// ===== 반유형 버튼 =====
		case "btn_banAdd":		// 반유형 추가
			var nRow = this.ds_banTyList.addRow();
			this.ds_banTyList.setColumn(nRow, "DEPT_CODE", deptCode);
			this.ds_banTyList.setColumn(nRow, "TY_CODE"  , "2");
			this.ds_banTyList.setColumn(nRow, "CODE"     , this.fn_getValueByTy("ban", "code"));
			this.ds_banTyList.setColumn(nRow, "USE_AT"   , 1);
			//this.ds_banTyList.setColumn(nRow, "SORT_ORDR", this.fn_getValueByTy("ban", "sortOrdr"));
			break;
		case "btn_banDel":		// 반유형 삭제
			var cRow = this.ds_banTyList.rowposition;
			var progrmCnt = this.ds_banTyList.getColumn(cRow, "RENT_PROGRM_CNT");
			if(progrmCnt > 0) {
				alert("해당 유형에 대한 프로그램이 존재합니다.\n프로그램을 먼저 삭제하신 후 유형 삭제를 진행해주세요.");
			} else {
				this.ds_banTyList.deleteRow(cRow);
			}
			break;
		// ===== 등급유형 버튼 =====
		case "btn_gradAdd":		// 등급유형 추가
			var nRow = this.ds_gradTyList.addRow();
			this.ds_gradTyList.setColumn(nRow, "DEPT_CODE", deptCode);
			this.ds_gradTyList.setColumn(nRow, "TY_CODE"  , "3");
			this.ds_gradTyList.setColumn(nRow, "CODE"     , this.fn_getValueByTy("grad", "code"));
			this.ds_gradTyList.setColumn(nRow, "USE_AT"   , 1);
			//this.ds_gradTyList.setColumn(nRow, "SORT_ORDR", this.fn_getValueByTy("grad", "sortOrdr"));
			break;
		case "btn_gradDel":		// 등급유형 삭제
			var cRow = this.ds_gradTyList.rowposition;
			var progrmCnt = this.ds_gradTyList.getColumn(cRow, "RENT_PROGRM_CNT");
			if(progrmCnt > 0) {
				alert("해당 유형에 대한 프로그램이 존재합니다.\n프로그램을 먼저 삭제하신 후 유형 삭제를 진행해주세요.");
			} else {
				this.ds_gradTyList.deleteRow(cRow);
			}
			break;
	}
}



/*****************************************************************************************
 * 유형 별 코드 생성
******************************************************************************************/
this.fn_getValueByTy = function(s_ty, s_kind)
{
	/**
	* 코드 자릿수
	* 종목	: 2자리
	* 반	: 3자리
	* 등급	: 2자리
	**/
	
	var ty = s_ty;
	var kind = s_kind;
	var resultCode 
	
	var code = 0;
	var ordr = 0;
	var length = 2;
	
	var ds = new Dataset();
			
	if(ty == "item") {
		ds = this.ds_itemTyList;
		length = 2;
	}else if(ty == "ban") {
		ds = this.ds_banTyList;
		length = 3;
	}else if(ty == "grad") {
		ds = this.ds_gradTyList;
		length = 2;
	}
	
		
	// 코드
	if(kind == "code") {

		if(ds.rowcount > 1) {
			code = nexacro.toNumber(ds.getCaseMax("CODE != null", "CODE"));
		}
			
		var nCode = nexacro.toNumber(code + 1);
		resultValue = (nCode.toString()).padLeft(length, "0");
	
	// 정렬순서
	}else {
		
		trace("ty : "+ty+", kind : ");
	
		if(ds.rowcount > 1) {
			ordr = nexacro.toNumber(ds.getCaseMax("SORT_ORDR != null", "SORT_ORDR"));
		}
			
		var nOrdr = nexacro.toNumber(ordr + 1);
		resultValue = nOrdr;
	}
	
	return resultValue;
	
}


/*****************************************************************************************
 * 유형 별 코드 생성
******************************************************************************************/
this.ds_progrmManageList_oncolumnchanged = function(obj:Dataset, e:nexacro.DSColChangeEventInfo)
{
	if(e.columnid == "FCLTY") {
		obj.setColumn(e.row, "PROGRM_CODE", this.fn_setProgrmCode());
	}
	
	if(e.columnid == "ITEM") {
		obj.setColumn(e.row, "PROGRM_CODE", this.fn_setProgrmCode());
	}
	
	if(e.columnid == "BAN") {
		obj.setColumn(e.row, "PROGRM_CODE", this.fn_setProgrmCode());
	}
	
	if(e.columnid == "GRAD") {
		obj.setColumn(e.row, "PROGRM_CODE", this.fn_setProgrmCode());
	}
}


/*****************************************************************************************
 * 프로그램 코드값 생성
******************************************************************************************/
this.fn_setProgrmCode = function() {
	 
	var cRow = this.ds_progrmManageList.rowposition;
	
	var fclty = !this.comUtils.isNull(this.ds_progrmManageList.getColumn(cRow, "FCLTY")) ? this.ds_progrmManageList.getColumn(cRow, "FCLTY") : "";
	var item  = !this.comUtils.isNull(this.ds_progrmManageList.getColumn(cRow, "ITEM"))  ? this.ds_progrmManageList.getColumn(cRow, "ITEM")  : "";
	var ban   = !this.comUtils.isNull(this.ds_progrmManageList.getColumn(cRow, "BAN"))   ? this.ds_progrmManageList.getColumn(cRow, "BAN")   : "";
	var grad  = !this.comUtils.isNull(this.ds_progrmManageList.getColumn(cRow, "GRAD"))  ? this.ds_progrmManageList.getColumn(cRow, "GRAD")  : "";
	
	var progrmCode = fclty + item + ban + grad;
	
	return progrmCode;
}


this.ds_cond_cancolumnchange = function(obj:Dataset, e:nexacro.DSColChangeEventInfo)
{
	if(e.columnid == "FCLTY") {
		var fclty = e.newvalue;
		this.ds_itemTyList_s.filter("ITEM == '' || FCLTY == "+fclty);
		this.ds_banTyList_s.filter("BAN == '' ||FCLTY == "+fclty);
		this.ds_gradTyList_s.filter("GRAD == '' ||FCLTY == "+fclty);
		
		// '전체' 표시
		this.ds_cond.setColumn(0, "ITEM", "");
		this.ds_cond.setColumn(0, "BAN" , "");
		this.ds_cond.setColumn(0, "GRAD", "");
	}
	if(e.columnid == "ITEM") {
		var fclty = obj.getColumn(0, "FCLTY");
		
		if(this.comUtils.isNull(fclty)) {
			alert("시설을 먼저 선택해주세요.");
			return false;
		}
		
		var item = e.newvalue;
		this.ds_banTyList_s.filter("BAN == '' ||FCLTY == "+fclty+" && ITEM == "+item);
		this.ds_gradTyList_s.filter("GRAD == '' ||FCLTY == "+fclty+" && ITEM == "+item);
		
		// '전체' 표시
		this.ds_cond.setColumn(0, "BAN" , "");
		this.ds_cond.setColumn(0, "GRAD", "");
	}
	if(e.columnid == "BAN") {
		var fclty = obj.getColumn(0, "FCLTY");
		var item  = obj.getColumn(0, "ITEM");
		
		if(this.comUtils.isNull(fclty)) {
			alert("시설을 먼저 선택해주세요.");
			return false;
		}else if(this.comUtils.isNull(item)) {
			alert("종목을 먼저 선택해주세요.");
			return false;		
		}
		
		var ban = e.newvalue;
		this.ds_gradTyList_s.filter("GRAD == '' ||FCLTY == "+fclty+" && ITEM == "+item+" && BAN == "+ban);	
		
		// '전체' 표시
		this.ds_cond.setColumn(0, "GRAD", "");
	}
	if(e.columnid == "GRAD") {
		var fclty = obj.getColumn(0, "FCLTY");
		var item  = obj.getColumn(0, "ITEM");
		var ban  = obj.getColumn(0, "BAN");
		
		if(this.comUtils.isNull(fclty)) {
			alert("시설을 먼저 선택해주세요.");
			return false;
		}else if(this.comUtils.isNull(item)) {
			alert("종목을 먼저 선택해주세요.");
			return false;		
		}else if(this.comUtils.isNull(ban)) {
			alert("반을 먼저 선택해주세요.");
			return false;		
		}
	}
}

this.ds_cond_oncolumnchanged = function(obj:Dataset, e:nexacro.DSColChangeEventInfo)
{
	if(e.columnid == "DEPT_CODE") {
		this.fn_transaction("selectProgrmTyCode");
	}
}
]]></Script>
  </Form>
</FDL>
