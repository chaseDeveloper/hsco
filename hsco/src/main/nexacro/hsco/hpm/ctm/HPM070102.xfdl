<?xml version="1.0" encoding="utf-8"?>
<FDL version="1.5">
  <TypeDefinition url="..\..\default_typedef.xml"/>
  <Form id="HPM070102" classname="HPM070102" left="0" top="0" width="1059" height="735" titletext="대관(프로그램)신청관리" oninit="HPM070102_oninit" onload="HPM070102_onload">
    <Layouts>
      <Layout>
        <Div id="div_search" taborder="0" left="0" right="28" cssclass="div_WFSA_Box" height="59" top="0">
          <Layouts>
            <Layout width="1031" height="59">
              <Static id="Static06" taborder="37" text="15" visible="false" left="0" top="0" bottom="0" width="15" style="background:#00ffff66;"/>
              <Static id="Static51" taborder="38" text="5" visible="false" left="0" top="0" right="0" height="5" style="background:#dc143c3c;align:center middle;"/>
              <Static id="Static04" taborder="39" text="5" visible="false" left="0" top="82" right="0" height="5" style="background:#dc143c3c;align:center middle;"/>
              <Static id="sta_manageNo" taborder="41" text="프로그램" cssclass="sta_WFSA_Label" left="295" top="31" width="91" height="21"/>
              <Static id="Static00" taborder="43" text="15" visible="false" left="279" top="0" width="15" style="background:#00ffff66;" bottom="0"/>
              <Static id="Static02" taborder="47" text="5" visible="false" left="0" top="26" right="0" height="5" style="background:#dc143c3c;align:center middle;" onclick="div_search_Static02_onclick"/>
              <Static id="sta_searchDe04" taborder="58" text="담당부서" cssclass="sta_WFSA_Label" left="15" top="5" width="64" height="21"/>
              <Static id="sta_searchCnd" taborder="60" text="조회일자" cssclass="sta_WFSA_Label" left="294" top="5" width="64" height="21"/>
              <Static id="sta_" taborder="65" text="진행상태" cssclass="sta_WFSA_Label" left="702" top="5" width="64" height="21" visible="true"/>
              <Combo id="cmb_setleSttusSe" taborder="66" innerdataset="@ds_setleSttusSe_s" codecolumn="CODE" datacolumn="CODE_NM" left="770" top="5" width="103" height="21" onitemchanged="div_search_cmb_setleSttusSe_onitemchanged" visible="true"/>
              <Static id="sta_searchCnd2" taborder="69" text="검색조건" cssclass="sta_WFSA_Label" left="14" top="31" width="64" height="21"/>
              <Combo id="cmb_searchCnd2" taborder="70" codecolumn="codecolumn" datacolumn="datacolumn" left="84" top="31" width="76" height="21">
                <Dataset id="innerdataset">
                  <ColumnInfo>
                    <Column id="codecolumn" size="256"/>
                    <Column id="datacolumn" size="256"/>
                  </ColumnInfo>
                  <Rows>
                    <Row>
                      <Col id="codecolumn"/>
                      <Col id="datacolumn">전체</Col>
                    </Row>
                    <Row>
                      <Col id="codecolumn">001</Col>
                      <Col id="datacolumn">회원ID</Col>
                    </Row>
                    <Row>
                      <Col id="codecolumn">002</Col>
                      <Col id="datacolumn">입금자</Col>
                    </Row>
                  </Rows>
                </Dataset>
              </Combo>
              <Edit id="edt_searchVal" taborder="71" left="162" top="31" width="117" height="21"/>
              <Div id="div_dept" taborder="75" url="com::deptCode.xfdl" left="84" top="5" width="195" height="21" enable="false" async="false"/>
              <Static id="Static01" taborder="76" text="15" visible="false" left="873" top="5" bottom="-5" width="15" style="background:#00ffff66;"/>
              <CheckBox id="chk_deleteAt" taborder="77" text="삭제내역 조회" value="0" truevalue="1" falsevalue="0" left="888" top="5" width="125" height="21"/>
              <CheckBox id="chk_reqstCanclAt" taborder="78" text="신청취소내역 조회" value="0" truevalue="1" falsevalue="0" onclick="div_search_CheckBox00_onclick" left="888" top="31" width="125" height="21"/>
              <Static id="Static07" taborder="79" text="15" visible="false" left="687" top="-1" bottom="1" width="15" style="background:#00ffff66;"/>
              <Combo id="cmb_searchCnd" taborder="80" codecolumn="codecolumn" datacolumn="datacolumn" left="370" top="5" width="97" height="21" value="001" text="강습년월" onitemchanged="div_search_cmb_searchCnd_onitemchanged">
                <Dataset id="innerdataset">
                  <ColumnInfo>
                    <Column id="codecolumn" size="256"/>
                    <Column id="datacolumn" size="256"/>
                  </ColumnInfo>
                  <Rows>
                    <Row>
                      <Col id="codecolumn">001</Col>
                      <Col id="datacolumn">강습년월</Col>
                    </Row>
                    <Row>
                      <Col id="codecolumn">002</Col>
                      <Col id="datacolumn">신청일자</Col>
                    </Row>
                  </Rows>
                </Dataset>
              </Combo>
              <Div id="div_ym" taborder="83" text="Div00" left="468" top="5" width="194" height="21">
                <Layouts>
                  <Layout width="194" height="21">
                    <Div id="div_beginYm" taborder="3" url="common::frmMonCal.xfdl" left="0" top="0" width="85" height="21" async="false"/>
                    <Static id="sta_csv" taborder="4" text="~" onclick="Div00_sta_csv_onclick" left="87" top="0" width="10" height="21"/>
                    <Div id="div_endYm" taborder="5" url="common::frmMonCal.xfdl" left="101" top="0" width="85" height="21" async="false"/>
                  </Layout>
                </Layouts>
              </Div>
              <Div id="div_reqstDe" taborder="84" text="Div00" left="469" top="5" width="218" height="21" visible="false">
                <Layouts>
                  <Layout width="194" height="21">
                    <Static id="sta_csv" taborder="13" text="~" onclick="Div00_sta_csv_onclick" left="103" top="0" width="10" height="21"/>
                    <Calendar id="cal_bgnDe" taborder="14" dateformat="yyyy-MM-dd" cssclass="cal_WF_Essential" left="0" top="0" width="100" height="21"/>
                    <Calendar id="cal_endDe" taborder="15" dateformat="yyyy-MM-dd" cssclass="cal_WF_Essential" left="116" top="0" width="102" height="21"/>
                  </Layout>
                </Layouts>
              </Div>
              <Edit id="edt_progrmCode_s" taborder="85" left="371" top="31" width="97" height="21"/>
              <Button id="btn_progrmSearch" taborder="86" onclick="btn_progrmSearch_onclick" cssclass="btn_WF_Search" left="445" top="33" width="22" height="15"/>
              <Edit id="edt_progrmNm" taborder="87" cssclass="edt_WF_Readonly" left="470" top="31" width="217" height="21"/>
              <Static id="Static03" taborder="88" text="5" onclick="div_search_Static02_onclick" visible="false" left="0" top="52" right="0" height="5" style="background:#dc143c3c;align:center middle;"/>
            </Layout>
          </Layouts>
        </Div>
        <Static id="Static36" taborder="2" text="10" visible="false" left="0" top="59" width="1031" height="10" style="background:#dc143c3c;align:center middle;"/>
        <Static id="sta_gnfdList" taborder="3" text="강좌 신청목록" cssclass="sta_WF_Title02" top="69" width="178" height="19" style="align:left middle;" left="0"/>
        <Static id="Static02" taborder="4" text="5" visible="false" left="0" top="88" right="28" height="5" style="background:#dc143c3c;align:center middle;"/>
        <Static id="Static00" taborder="5" text="15" visible="false" left="1031" top="0" width="15" height="735" style="background:#1b3cd23c;align:center middle;"/>
        <Static id="Static01" taborder="6" text="스&#13;&#10;크&#13;&#10;롤&#13;&#10;13" visible="false" top="0" right="0" width="13" height="735" style="background:#d07b173c;align:center middle;"/>
        <Grid id="grd_rentProgrmReqstManageList" taborder="7" useinputpanel="false" left="0" top="93" right="373" binddataset="ds_rentProgrmReqstManageList" cellsizingtype="col" height="450" oncellclick="grd_rentProgrmReqstManageList_oncellclick" onheadclick="grd_rentProgrmReqstManageList_onheadclick" autofittype="none" autosizingtype="none" autosizebandtype="body" extendsizetype="none">
          <Formats>
            <Format id="default">
              <Columns>
                <Column size="40"/>
                <Column size="100"/>
                <Column size="80"/>
                <Column size="100"/>
                <Column size="200"/>
                <Column size="105"/>
                <Column size="80"/>
                <Column size="60"/>
                <Column size="80"/>
                <Column size="100"/>
                <Column size="100"/>
                <Column size="100"/>
                <Column size="150"/>
                <Column size="150"/>
              </Columns>
              <Rows>
                <Row size="30" band="head"/>
                <Row size="24"/>
              </Rows>
              <Band id="head">
                <Cell text="순번"/>
                <Cell col="1" text="담당부서"/>
                <Cell col="2" text="강습년월"/>
                <Cell col="3" text="회원ID"/>
                <Cell col="4" text="프로그램명"/>
                <Cell col="5" text="결제구분"/>
                <Cell col="6" text="결제금액"/>
                <Cell col="7" text="결제&#13;&#10;매핑완료"/>
                <Cell col="8" text="진행상태"/>
                <Cell col="9" text="신청일자"/>
                <Cell col="10" text="심사완료일자"/>
                <Cell col="11" text="납부완료일자"/>
                <Cell col="12" text="주문번호"/>
                <Cell col="13" text="비고"/>
              </Band>
              <Band id="body">
                <Cell text="expr:currow+1"/>
                <Cell col="1" text="bind:DEPT_NM"/>
                <Cell col="2" text="bind:YM" mask="####-##" maskchar=" "/>
                <Cell col="3" style="align:left;" text="bind:MBER_ID"/>
                <Cell col="4" displaytype="combo" style="align:left;" text="bind:PROGRM_SN" combodataset="ds_rentProgrmManageList_s" combocodecol="PROGRM_SN" combodatacol="PROGRM_NM"/>
                <Cell col="5" displaytype="combo" edittype="none" text="bind:SETLE_SE" combodataset="ds_setleSe" combocodecol="CODE" combodatacol="CODE_NM"/>
                <Cell col="6" displaytype="number" style="align:right;" text="bind:SETLE_AM"/>
                <Cell col="7" displaytype="checkbox" text="bind:SETLE_AT"/>
                <Cell col="8" displaytype="image" edittype="none" text="bind:SETLE_STTUS" expr="expr:comp.parent.fn_get_imgUrl(SETLE_STTUS)" combodataset="expr:currow == dataset.rowposition ? &quot;ds_setleSttusSe&quot; : &quot;ds_setleSttusSe_s&quot;" combocodecol="CODE" combodatacol="CODE_NM" combodisplay="display"/>
                <Cell col="9" displaytype="date" text="bind:REQST_DE" calendardisplaynulltype="none"/>
                <Cell col="10" displaytype="date" text="bind:JDGMN_COMPT_DE" calendardisplaynulltype="none"/>
                <Cell col="11" displaytype="date" text="bind:SETLE_COMPT_DE" calendardisplaynulltype="none"/>
                <Cell col="12" style="align:left;" text="bind:ORDER_NO"/>
                <Cell col="13" style="align:left;" text="bind:RM"/>
              </Band>
            </Format>
          </Formats>
        </Grid>
        <Static id="Static03" taborder="8" text="10" visible="false" left="0" width="1031" height="10" style="background:#dc143c3c;align:center middle;" top="543"/>
        <Static id="Static04" taborder="10" text="5" visible="false" left="0" right="28" style="background:#dc143c3c;align:center middle;" height="3" top="572"/>
        <Button id="btn_rcpmnyDtlsMapping" taborder="12" text="입금내역매핑" onclick="btn_rcpmnyDtlsMapping_onclick" cssclass="btn_WF_Process" right="28" width="92" height="19" top="553"/>
        <Static id="sta_gnfdList01" taborder="31" text="상세정보" cssclass="sta_WF_Title02" top="69" width="120" height="19" style="align:left middle;" right="245"/>
        <Static id="Static07" taborder="33" text="10" visible="false" left="686" bottom="187" width="10" style="background:#00ffff66;" height="480"/>
        <Div id="div_tab01" taborder="34" top="93" width="335" height="451" right="28" url="hpm_ctm::HPM070102_T01.xfdl"/>
        <Div id="div_tab02" taborder="35" url="hpm_ctm::HPM070102_T02.xfdl" top="93" right="-322" width="335" height="451" visible="false"/>
        <Static id="sta_gnfdList00" taborder="36" text="대사관리(입금내역)" cssclass="sta_WF_Title02" left="0" top="553" width="140" height="19" style="align:left middle;"/>
        <Grid id="grd_rcpmnyDtlsList" taborder="37" binddataset="ds_rcpmnyDtlsList" useinputpanel="false" left="0" top="575" right="28" bottom="0">
          <Formats>
            <Format id="default">
              <Columns>
                <Column size="40"/>
                <Column size="100"/>
                <Column size="150"/>
                <Column size="100"/>
                <Column size="100"/>
                <Column size="100"/>
                <Column size="250"/>
                <Column size="250"/>
              </Columns>
              <Rows>
                <Row size="24" band="head"/>
                <Row size="24"/>
              </Rows>
              <Band id="head">
                <Cell text="순번"/>
                <Cell col="1" text="금융기관명"/>
                <Cell col="2" text="계좌번호"/>
                <Cell col="3" text="거래일시"/>
                <Cell col="4" text="거래금액"/>
                <Cell col="5" text="잔액"/>
                <Cell col="6" text="적요1"/>
                <Cell col="7" text="적요2"/>
              </Band>
              <Band id="body">
                <Cell text="expr:currow+1"/>
                <Cell col="1" celltype="none" text="bind:BANK_NM"/>
                <Cell col="2" text="bind:ACCT_NO"/>
                <Cell col="3" displaytype="date" text="bind:ACCT_TXDAY"/>
                <Cell col="4" style="align:right;" text="bind:TX_AMT"/>
                <Cell col="5" style="align:right;" text="bind:TX_CUR_BAL"/>
                <Cell col="6" style="align:left;" text="bind:REMARK1"/>
                <Cell col="7" style="align:left;" text="bind:REMARK2"/>
              </Band>
            </Format>
          </Formats>
        </Grid>
      </Layout>
    </Layouts>
    <Bind>
      <BindItem id="item6" compid="div_search.cmb_setleSttusSe" propid="value" datasetid="ds_cond" columnid="SETLE_STTUS"/>
      <BindItem id="item16" compid="div_search.cmb_searchCnd2" propid="value" datasetid="ds_cond" columnid="SEARCH_CND2"/>
      <BindItem id="item17" compid="div_search.edt_searchVal" propid="value" datasetid="ds_cond" columnid="SEARCH_VAL"/>
      <BindItem id="item5" compid="div_search.chk_deleteAt" propid="value" datasetid="ds_cond" columnid="DELETE_AT"/>
      <BindItem id="item4" compid="div_search.chk_reqstCanclAt" propid="value" datasetid="ds_cond" columnid="REQST_CANCL_AT"/>
      <BindItem id="item2" compid="div_search.cmb_searchCnd" propid="value" datasetid="ds_cond" columnid="SEARCH_CND"/>
      <BindItem id="item7" compid="Div02.cal_bgnDe" propid="value" datasetid="ds_cond" columnid="BGNDE"/>
      <BindItem id="item8" compid="Div02.cal_endDe" propid="value" datasetid="ds_cond" columnid="ENDDE"/>
      <BindItem id="item0" compid="div_search.div_reqstDe.cal_bgnDe" propid="value" datasetid="ds_cond" columnid="BGNDE"/>
      <BindItem id="item1" compid="div_search.div_reqstDe.cal_endDe" propid="value" datasetid="ds_cond" columnid="ENDDE"/>
      <BindItem id="item19" compid="div_search.edt_progrmCode_s" propid="value" datasetid="ds_cond" columnid="PROGRM_CODE"/>
      <BindItem id="item3" compid="div_search.edt_progrmNm" propid="value" datasetid="ds_cond" columnid="PROGRM_CODE_NM"/>
    </Bind>
    <Objects>
      <Dataset id="ds_cond" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false" oncolumnchanged="ds_cond_oncolumnchanged">
        <ColumnInfo>
          <Column id="DEPT_CODE" type="STRING" size="256"/>
          <Column id="DEPT_NM" type="STRING" size="256"/>
          <Column id="SETLE_SE" type="STRING" size="256"/>
          <Column id="AM_SE" type="STRING" size="256"/>
          <Column id="SETLE_STTUS" type="STRING" size="256"/>
          <Column id="BGNDE" type="STRING" size="256"/>
          <Column id="ENDDE" type="STRING" size="256"/>
          <Column id="SEARCH_CND" type="STRING" size="256"/>
          <Column id="SEARCH_CND2" type="STRING" size="256"/>
          <Column id="SEARCH_VAL" type="STRING" size="256"/>
          <Column id="PROGRM_SN" type="STRING" size="256"/>
          <Column id="DELETE_AT" type="STRING" size="256"/>
          <Column id="REQST_CANCL_AT" type="STRING" size="256"/>
          <Column id="ITEM" type="STRING" size="256"/>
          <Column id="PROGRM_CODE" type="STRING" size="256"/>
          <Column id="PROGRM_CODE_NM" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_rentProgrmReqstManageList" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false" onrowposchanged="ds_rentProgrmReqstManageList_onrowposchanged" cancolumnchange="ds_rentProgrmReqstManageList_cancolumnchange" oncolumnchanged="ds_rentProgrmReqstManageList_oncolumnchanged" onrowsetchanged="ds_rentProgrmReqstManageList_onrowsetchanged">
        <ColumnInfo>
          <Column id="REQST_SN" type="STRING" size="256"/>
          <Column id="DEPT_CODE" type="STRING" size="256"/>
          <Column id="DEPT_NM" type="STRING" size="256"/>
          <Column id="PROGRM_SN" type="STRING" size="256"/>
          <Column id="PROGRM_NM" type="STRING" size="256"/>
          <Column id="TNCRS_DAYWEK" type="STRING" size="256"/>
          <Column id="BEGIN_TIME" type="STRING" size="256"/>
          <Column id="END_TIME" type="STRING" size="256"/>
          <Column id="YM" type="STRING" size="256"/>
          <Column id="MBER_ID" type="STRING" size="256"/>
          <Column id="SETLE_SE" type="STRING" size="256"/>
          <Column id="SETLE_AM" type="INT" size="256"/>
          <Column id="SETLE_STTUS" type="STRING" size="256"/>
          <Column id="REQST_DE" type="STRING" size="256"/>
          <Column id="JDGMN_COMPT_DE" type="STRING" size="256"/>
          <Column id="SETLE_COMPT_DE" type="STRING" size="256"/>
          <Column id="ORDER_NO" type="STRING" size="256"/>
          <Column id="REFND_REQST_DE" type="STRING" size="256"/>
          <Column id="REFND_BANK_CODE" type="STRING" size="256"/>
          <Column id="REFND_BANK_NM" type="STRING" size="256"/>
          <Column id="REFND_ACNUTNO" type="STRING" size="256"/>
          <Column id="REFND_DPSTR" type="STRING" size="256"/>
          <Column id="RCPMNY_BANK_CODE" type="STRING" size="256"/>
          <Column id="RCPMNY_BANK_NM" type="STRING" size="256"/>
          <Column id="RCPMNY_ACNUTNO" type="STRING" size="256"/>
          <Column id="RCPMNYER" type="STRING" size="256"/>
          <Column id="DELETE_AT" type="STRING" size="256"/>
          <Column id="RM" type="STRING" size="256"/>
          <Column id="NEW_RCEPT_AT" type="STRING" size="256"/>
          <Column id="TNCRS_DAYWEK_NM" type="STRING" size="256"/>
          <Column id="MBER_NM" type="STRING" size="256"/>
          <Column id="ADRES" type="STRING" size="256"/>
          <Column id="TELNO" type="STRING" size="256"/>
          <Column id="MBTLNUM" type="STRING" size="256"/>
          <Column id="MANAGE_CODE" type="STRING" size="256"/>
          <Column id="TRGET_SN" type="STRING" size="256"/>
          <Column id="SETLE_AT" type="STRING" size="256"/>
          <Column id="REQST_DT" type="STRING" size="256"/>
          <Column id="RCPMNY_DTLS_SN" type="STRING" size="256"/>
          <Column id="REQST_CANCL_AT" type="STRING" size="256"/>
          <Column id="TRGET_NM" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_setleSe" useclientlayout="true">
        <ColumnInfo>
          <Column id="CODE" type="STRING" size="256"/>
          <Column id="CODE_NM" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_validation" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="compId" type="STRING" size="256"/>
          <Column id="colId" type="STRING" size="256"/>
          <Column id="PK" type="STRING" size="256"/>
          <Column id="notNull" type="STRING" size="256"/>
          <Column id="type" type="STRING" size="256"/>
          <Column id="nlength" type="STRING" size="256"/>
          <Column id="from" type="STRING" size="256"/>
          <Column id="to" type="STRING" size="256"/>
          <Column id="lengthChkGb" type="STRING" size="256"/>
          <Column id="msgId" type="STRING" size="256"/>
          <Column id="expr" type="STRING" size="256"/>
          <Column id="func" type="STRING" size="256"/>
        </ColumnInfo>
        <Rows>
          <Row>
            <Col id="compId">ds_rentProgrmReqstManageList</Col>
            <Col id="colId">PROGRM_SN</Col>
            <Col id="msgId">프로그램명</Col>
            <Col id="notNull">Y</Col>
          </Row>
          <Row>
            <Col id="compId">ds_rentProgrmReqstManageList</Col>
            <Col id="colId">MBER_ID</Col>
            <Col id="msgId">회원ID</Col>
            <Col id="notNull">Y</Col>
          </Row>
          <Row>
            <Col id="compId">ds_rentProgrmReqstManageList</Col>
            <Col id="colId">SETLE_AM</Col>
            <Col id="msgId">결제금액</Col>
            <Col id="notNull">Y</Col>
          </Row>
          <Row>
            <Col id="colId">NEW_RCEPT_AT</Col>
            <Col id="compId">ds_rentProgrmReqstManageList</Col>
            <Col id="notNull">Y</Col>
            <Col id="msgId">신규접수여부</Col>
          </Row>
          <Row>
            <Col id="compId">ds_rentProgrmReqstManageList</Col>
            <Col id="colId">TRGET_SE</Col>
            <Col id="notNull">Y</Col>
            <Col id="msgId">수강대상</Col>
          </Row>
          <Row>
            <Col id="compId">ds_rentProgrmReqstManageList</Col>
            <Col id="colId">SETLE_STTUS</Col>
            <Col id="notNull">Y</Col>
            <Col id="msgId">진행상태</Col>
          </Row>
        </Rows>
      </Dataset>
      <Dataset id="ds_setleSttusSe" canrowposchange="ds_setleSttusSe_canrowposchange">
        <ColumnInfo>
          <Column id="CODE" type="STRING" size="256"/>
          <Column id="CODE_NM" type="STRING" size="256"/>
          <Column id="VAL0" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_rentProgrmManageList" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false" onrowposchanged="ds_rentProgrmManageList_onrowposchanged" oncolumnchanged="ds_rentProgrmManageList_oncolumnchanged" canrowposchange="ds_rentProgrmManageList_canrowposchange">
        <ColumnInfo>
          <Column id="DEPT_CODE" type="STRING" size="256"/>
          <Column id="PROGRM_SN" type="STRING" size="256"/>
          <Column id="PROGRM_NM" type="STRING" size="256"/>
          <Column id="ITEM" type="STRING" size="256"/>
          <Column id="ABL_AT" type="STRING" size="256"/>
          <Column id="GRAD" type="STRING" size="256"/>
          <Column id="TNCRS_DAYWEK" type="STRING" size="256"/>
          <Column id="BEGIN_TIME" type="STRING" size="256"/>
          <Column id="END_TIME" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_setleSttusSe_s">
        <ColumnInfo>
          <Column id="CODE" type="STRING" size="256"/>
          <Column id="CODE_NM" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_rcpmnyDtlsList">
        <ColumnInfo>
          <Column id="BANK_CD" type="STRING" size="256"/>
          <Column id="BANK_NM" type="STRING" size="256"/>
          <Column id="ACCT_NO" type="STRING" size="256"/>
          <Column id="CURR_UNIT" type="STRING" size="256"/>
          <Column id="INQNO" type="STRING" size="256"/>
          <Column id="ACCT_TXDAY_SEQ" type="STRING" size="256"/>
          <Column id="ACCT_TXDAY" type="STRING" size="256"/>
          <Column id="INOUT_GUBUN" type="STRING" size="256"/>
          <Column id="TX_AMT" type="STRING" size="256"/>
          <Column id="TX_CUR_BAL" type="STRING" size="256"/>
          <Column id="REMARK1" type="STRING" size="256"/>
          <Column id="REMARK2" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_cond2" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="DEPT_CODE" type="STRING" size="256"/>
          <Column id="SETLE_AM" type="STRING" size="256"/>
          <Column id="REQST_DE" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_rcpmnyDtlsManageList">
        <ColumnInfo>
          <Column id="RCPMNY_DTLS_SN" type="STRING" size="256"/>
          <Column id="RCPMNY_DTLS_NO" type="STRING" size="256"/>
          <Column id="STORE_ID" type="STRING" size="256"/>
          <Column id="SELNG_DE" type="STRING" size="256"/>
          <Column id="PYMNT_DE" type="STRING" size="256"/>
          <Column id="SETLE_SE" type="STRING" size="256"/>
          <Column id="PROCESS_STTUS" type="STRING" size="256"/>
          <Column id="SETLE_INSTT" type="STRING" size="256"/>
          <Column id="ORDER_NO" type="STRING" size="256"/>
          <Column id="SETLE_DE" type="STRING" size="256"/>
          <Column id="CONFM_NO" type="STRING" size="256"/>
          <Column id="AMOUNT" type="STRING" size="256"/>
          <Column id="SETLE_NO" type="STRING" size="256"/>
          <Column id="EXCCLC_AM" type="STRING" size="256"/>
          <Column id="PURCHSR" type="STRING" size="256"/>
          <Column id="RETRN_RESN" type="STRING" size="256"/>
          <Column id="PUCHAS_CANCL_REQUST_DE" type="STRING" size="256"/>
          <Column id="GOODS_INFO" type="STRING" size="256"/>
          <Column id="DELNG_NO" type="STRING" size="256"/>
          <Column id="RM" type="STRING" size="256"/>
          <Column id="DEPT_CODE" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_rentProgrmReqstManage" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false" onrowposchanged="ds_rentProgrmReqstManageList_onrowposchanged" canrowposchange="ds_rentProgrmReqstManageList_canrowposchange">
        <ColumnInfo>
          <Column id="REQST_SN" type="STRING" size="256"/>
          <Column id="DEPT_CODE" type="STRING" size="256"/>
          <Column id="DEPT_NM" type="STRING" size="256"/>
          <Column id="PROGRM_SN" type="STRING" size="256"/>
          <Column id="PROGRM_NM" type="STRING" size="256"/>
          <Column id="TNCRS_DAYWEK" type="STRING" size="256"/>
          <Column id="BEGIN_TIME" type="STRING" size="256"/>
          <Column id="END_TIME" type="STRING" size="256"/>
          <Column id="YM" type="STRING" size="256"/>
          <Column id="MBER_ID" type="STRING" size="256"/>
          <Column id="SETLE_SE" type="STRING" size="256"/>
          <Column id="SETLE_AM" type="BIGDECIMAL" size="256"/>
          <Column id="SETLE_STTUS" type="STRING" size="256"/>
          <Column id="REQST_DE" type="STRING" size="256"/>
          <Column id="JDGMN_COMPT_DE" type="STRING" size="256"/>
          <Column id="SETLE_COMPT_DE" type="STRING" size="256"/>
          <Column id="ORDER_NO" type="STRING" size="256"/>
          <Column id="REFND_REQST_DE" type="STRING" size="256"/>
          <Column id="REFND_BANK_CODE" type="STRING" size="256"/>
          <Column id="REFND_BANK_NM" type="STRING" size="256"/>
          <Column id="REFND_ACNUTNO" type="STRING" size="256"/>
          <Column id="REFND_DPSTR" type="STRING" size="256"/>
          <Column id="RCPMNY_BANK_CODE" type="STRING" size="256"/>
          <Column id="RCPMNY_BANK_NM" type="STRING" size="256"/>
          <Column id="RCPMNY_ACNUTNO" type="STRING" size="256"/>
          <Column id="RCPMNYER" type="STRING" size="256"/>
          <Column id="DELETE_AT" type="STRING" size="256"/>
          <Column id="RM" type="STRING" size="256"/>
          <Column id="NEW_RCEPT_AT" type="STRING" size="256"/>
          <Column id="TNCRS_DAYWEK_NM" type="STRING" size="256"/>
          <Column id="MBER_NM" type="STRING" size="256"/>
          <Column id="ADRES" type="STRING" size="256"/>
          <Column id="TELNO" type="STRING" size="256"/>
          <Column id="MBTLNUM" type="STRING" size="256"/>
          <Column id="MANAGE_CODE" type="STRING" size="256"/>
          <Column id="TRGET_SE" type="STRING" size="256"/>
          <Column id="SETLE_AT" type="STRING" size="256"/>
          <Column id="REQST_DT" type="STRING" size="256"/>
          <Column id="RCPMNY_DTLS_SN" type="STRING" size="256"/>
          <Column id="REQST_CANCL_AT" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_cond3" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="PROGRM_SN" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_resveTimeList" useclientlayout="true">
        <ColumnInfo>
          <Column id="BEGIN_TIME" type="STRING" size="256"/>
          <Column id="USE_TIME_FOM" type="STRING" size="256"/>
          <Column id="USE_CHRGE" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_useChrgeManageList" useclientlayout="true">
        <ColumnInfo>
          <Column id="SN" type="STRING" size="256"/>
          <Column id="CHRGE" type="BIGDECIMAL" size="256"/>
          <Column id="DEPT_CODE" type="STRING" size="256"/>
          <Column id="PROGRM_SN" type="STRING" size="256"/>
          <Column id="TRGET_NM" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_rentProgrmManageList_s" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false" onrowposchanged="ds_rentProgrmManageList_onrowposchanged" oncolumnchanged="ds_rentProgrmManageList_oncolumnchanged">
        <ColumnInfo>
          <Column id="DEPT_CODE" type="STRING" size="256"/>
          <Column id="PROGRM_SN" type="STRING" size="256"/>
          <Column id="ITEM" type="STRING" size="256"/>
          <Column id="PROGRM_NM" type="STRING" size="256"/>
          <Column id="ABL_AT" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_mberInfo" useclientlayout="true">
        <ColumnInfo>
          <Column id="MBER_NM" type="STRING" size="256"/>
          <Column id="TELNO" type="STRING" size="256"/>
          <Column id="MBTLNUM" type="STRING" size="256"/>
          <Column id="ADRES" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_cond4" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="MBER_ID" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_itemSe_s">
        <ColumnInfo>
          <Column id="CODE" type="STRING" size="256"/>
          <Column id="CODE_NM" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
    </Objects>
    <Script type="xscript5.0"><![CDATA[/***********************************************************************
 * 화면ID		: HPM070102
 * 화면명		: 대관(프로그램)신청관리
 * 화면설명	: 대관(프로그램)신청을 관리한다.
 * 작성일		: 2017.08.11
 * 작성자		: 정 민 
 * 수정이력	: 
 ***********************************************************************
 *     수정일     수정자   내용
 ***********************************************************************
 */
 
 
/***********************************************************************
 * Script Include
 ************************************************************************/
// 시스템 공통 라이브러리 Include
include "lib::comInclude.xjs";
include "mis_lib::misUtil.xjs";

/**********************************************************************
* 화면 변수 선언부
***********************************************************************/
this.saveRow = -1;

/***********************************************************************
 * onInit / onLoad 영역
 ***********************************************************************/

this.HPM070102_oninit = function(obj:Form, e:nexacro.InitEventInfo)
{
    this.fn_init_form();
    this.fn_init_dataset();

}

this.HPM070102_onload = function(obj:Form, e:nexacro.LoadEventInfo)
{ 
	this.div_search.div_ym.div_beginYm.fn_setBind("ds_cond","BGNDE");
	this.div_search.div_ym.div_endYm.fn_setBind("ds_cond"  ,"ENDDE");
	
	this.div_search.div_dept.fn_setBind("ds_cond"   , "DEPT_CODE", "DEPT_NM");
}

/**********************************************************************
* Form/Dataset 오브젝트 초기화
***********************************************************************/

/*
 * 함수명      : initForm
 * 설명         : Form을 초기화한다.
 * params          : None
 * return Type     : None
 * 사용법        : this.initForm();
 */
this.fn_init_form = function()
{
	this.gfn_initForm(this);
	
	this.ds_cond.clearData();
	this.ds_cond.addRow();
	this.ds_cond.setColumn(0, "SEARCH_CND" , "001");
	this.ds_cond.setColumn(0, "SEARCH_VAL" , "");
	this.ds_cond.setColumn(0, "SEARCH_CND2", "");
	this.ds_cond.setColumn(0, "SETLE_STTUS", "");
	this.ds_cond.setColumn(0, "AM_SE"      , "");
	this.ds_cond.setColumn(0, "SETLE_SE"   , "");
	this.ds_cond.setColumn(0, "PROGRM_SN"  , "");
// 	this.ds_cond.setColumn(0, "DEPT_CODE"  , "000000");
// 	this.ds_cond.setColumn(0, "DEPT_NM"    , "화성도시공사");
	this.ds_cond.setColumn(0, "DEPT_CODE"  , this.gfn_getDeptId());
	this.ds_cond.setColumn(0, "DEPT_NM"    , this.gfn_getDeptName());
    this.ds_cond.setColumn(0, "BGNDE"      , this.dateUtils.format(this.gfn_today(),"yyyymm"));
 	this.ds_cond.setColumn(0, "ENDDE"      , this.dateUtils.format(this.gfn_today(),"yyyymm"));
 	this.ds_cond.setColumn(0, "REQST_CANCL_AT",     "0");
 	this.ds_cond.setColumn(0, "DELETE_AT"    ,     "0");

	// 상세정보 위치에 탭 두개를 위치 시킨다.
	this.div_tab02.set_top(this.div_tab01.top);
	this.div_tab02.set_right(this.div_tab01.right);

	// 공통코드
	var comboParams = [
						  ["ds_itemSe_s"      , "HPM014", "1", "전체"]			    // 종목구분
						 ,["ds_setleSttusSe_s", "HPM008", "1", "전체"]      		// 신청상태구분(검색조건)
						 ,["ds_setleSttusSe"  , "HPM008", "1", ""]        			// 신청상태구분
						 ,["ds_setleSe"       , "HPM009", "1", ""]       			// 결제구분
					  ];
	var callback = function (svcId, errorCode, errorMsg) {       
		
		// 공통코드와 연계된 초기검색조건 설정
		// 수정가능여부를 판별하기위해 권한그룹 체크
		if(this.gfn_authGrpId("DEV_GRP") != -1) {			// 개발자
			this.chargerAt = true;
		}
		if(this.gfn_authGrpId("HPM_ADMIN") != -1) {			// 대관관리자
			this.chargerAt = true;
		}
		if(this.gfn_authGrpId("ALL_ADMIN") != -1) {			// 전체권한
			this.chargerAt = true;
		}
		if(this.gfn_authGrpId("HSCO_ADMIN") != -1) {		// 루트권한자
			this.chargerAt = true;
		}
		
		// 수정가능한 경우 부서변경 가능
		if(this.chargerAt){
			this.div_search.div_dept.set_enable(true);
		}
      
		this.fn_search();  
	};

	this.gfn_comboLoad (comboParams, callback);

}


/*
 * 함수명      : initDataset
 * 설명         : Dataset을 초기화한다
 * params          : None
 * return Type     : None
 * 사용법        : this.initDataset();
 */
this.fn_init_dataset = function()
{
    this.gfn_initCondDs(this, this.div_search);   
}


/**********************************************************************
* Transaction 영역 시작
***********************************************************************
*
* 1. Transaction 관련 이벤트 핸들러
* 2. call Transaction 영역
* 3. callback 영역(Transaction, Popup)
*
***********************************************************************/



/**********************************************************************
* Transaction 관련 이벤트 핸들러
***********************************************************************/

/*
 * 함수명     : fn_search
 * 설명       : 조회 버튼 클릭시 이벤트 발생
 * params        : None
 * return Type    : None
 * 사용법      : this.fn_search();
 */
this.fn_search = function()
{

	if(Ex.util.isUpdated(this.ds_rentProgrmReqstManageList)) {
		if(!this.gfn_message("confirm.변경.취소.여부")) {
			return false;
		}
	}
		
   // dataset 초기화
   this.ds_rentProgrmReqstManageList.clearData();
   
   //validation 체크
    if(!this.gfn_checkValidation_NoUpdChk(this.ds_cond, this.ds_validation)) {
        return;
    }

   this.fn_transaction("selectRentProgrmReqstManageList");
}


/*
 * 함수명     : fn_save
 * 설명       : 저장 버튼 클릭시 이벤트 발생
 * params        : None
 * return Type    : None
 * 사용법      : this.fn_save();
 */
this.fn_save = function()
{
    // 데이터셋 미변경 체크
    if (!this.comUtils.isDatasetUpdated(this.ds_rentProgrmReqstManageList)) {
        this.gfn_message("comm.데이터.변경.없음")
        return false;
    }
    
    //validation 체크
     if(!this.gfn_checkValidation_NoUpdChk(this.ds_rentProgrmReqstManageList, this.ds_validation)) {
         return;
     }

    if(this.gfn_message("confirm.저장.여부")) {
        this.saveRow = this.ds_rentProgrmReqstManageList.rowposition;
      this.fn_transaction("saveRentProgrmReqstManageList");  
    }
}


/*
 * 함수명     : fn_insert
 * 설명       : 신규 버튼 클릭시 이벤트 발생
 * params        : None
 * return Type    : None
 * 사용법      : this.fn_insert();
 */
this.fn_insert = function() {

	var deptCode = this.ds_cond.getColumn(0, "DEPT_CODE");
		
	var nRow = this.ds_rentProgrmReqstManageList.addRow();   
	
	this.ds_rentProgrmReqstManageList.setColumn(nRow, "DEPT_CODE"     , deptCode);             // 부서코드
	this.ds_rentProgrmReqstManageList.setColumn(nRow, "JDGMN_COMPT_DE", this.dateUtils.format(this.gfn_today(),"yyyymmdd"));   // 심사완료일
	this.ds_rentProgrmReqstManageList.setColumn(nRow, "SETLE_COMPT_DE", this.dateUtils.format(this.gfn_today(),"yyyymmdd"));   // 납부완료일
	this.ds_rentProgrmReqstManageList.setColumn(nRow, "MNGR_REGIST_AT", "1");                  // 관리자등록여부
	this.ds_rentProgrmReqstManageList.setColumn(nRow, "REQST_CANCL_AT", "0");                   // 대관취소여부
	this.ds_rentProgrmReqstManageList.setColumn(nRow, "DELETE_AT"     , "0");                  // 삭제여부
}


/*
 * 함수명     : fn_delete
 * 설명       : 삭제 버튼 클릭시 이벤트 발생
 * params        : None
 * return Type    : None
 * 사용법      : this.fn_delete();
 */
this.fn_delete = function() {

    if (this.gfn_message("confirm.삭제여부")) {
        if(this.ds_rentProgrmReqstManageList.getRowCount() > 0) {
          var cRow = this.ds_rentProgrmReqstManageList.rowposition;
          this.ds_rentProgrmReqstManageList.deleteRow(cRow);

         }
     }
}


/*
 * 함수명     : fn_cancel
 * 설명       : 취소 버튼 클릭시 이벤트 발생
 * params        : None
 * return Type    : None
 * 사용법      : this.fn_cancel();
 */
this.fn_cancel = function() {

     // 데이터셋 변경 체크
    if(Ex.util.isUpdated(this.ds_rentProgrmReqstManageList)) {
        if(!this.gfn_message("confirm.변경.취소.여부")) {
            return false;
        }
    }

    if (this.gfn_message("confirm.취소여부")) {
        this.ds_rentProgrmReqstManageList.reset();
        this.ds_rentProgrmReqstManageList.applyChange();
    }

}
/**********************************************************************
* call Transaction 영역
***********************************************************************/

/*
 * 함수명      : fn_transaction
 * 설명         : Transaction 요청 처리 함수
 * params          : strSvcId : 서비스요청 ID
 * return Type     : None
 * 사용법        : this.fn_transaction("SELECT");
 */
this.fn_transaction = function(strSvcId)
{
    switch (strSvcId) {
        //  대관(프로그램) 목록 조회(콤보리스트)
        case "selectRentProgrmManageList":
            var sController       = "hsco/hpm/ctm/HPM060103/selectRentProgrmManageList.do";
            var sInDatasets       = "input1=ds_cond";
            var sOutDatasets      = "ds_rentProgrmManageList=output1";
            break;
        // 대관(프로그램)신청 목록 조회
        case "selectRentProgrmReqstManageList":
            var sController       = "hsco/hpm/ctm/HPM070102/selectRentProgrmReqstManageList.do";
            var sInDatasets       = "input1=ds_cond";
            var sOutDatasets      = "ds_rentProgrmReqstManageList=output1";
            break;
        //  대관(프로그램)신청 목록 저장
        case "saveRentProgrmReqstManageList":
            var sController       = "hsco/hpm/ctm/HPM070102/saveRentProgrmReqstManageList.do";
            var sInDatasets       = "input1=ds_rentProgrmReqstManageList:U";
            var sOutDatasets      = "";
            break;
        //  대사관리(입금내역) 목록 조회
        case "selectRcpmnyDtlsList":
            var sController       = "hsco/hpm/ctm/HPM070102/selectRcpmnyDtlsList.do";
            var sInDatasets       = "input1=ds_cond2";
            var sOutDatasets      = "ds_rcpmnyDtlsList=output1";
            break;
        //  수강대상 및 요금 조회
        case "selectUseChrgeList":
            var sController       = "hsco/hpm/ctm/HPM070102/selectUseChrgeList.do";
            var sInDatasets       = "input1=ds_cond3";
            var sOutDatasets      = "ds_useChrgeManageList=output1";
            break;
        //  회원 정보 조회
        case "selectMberInfo":
            var sController       = "hsco/hpm/ctm/HPM070102/selectMberInfo.do";
            var sInDatasets       = "input1=ds_cond4";
            var sOutDatasets      = "ds_mberInfo=output1";
            break;
		//  입금내역매핑처리
        case "rcpmnyDtlsMapping":
            var sController       = "hsco/hpm/ctm/HPM070102/rcpmnyDtlsMapping.do";
            var sInDatasets       = "input1=ds_rcpmnyDtlsManageList:U input2=ds_rentProgrmReqstManage:U";
            var sOutDatasets      = "";
            break;
    }

    Ex.core.tran(this, strSvcId, sController, sInDatasets, sOutDatasets);
}


/**********************************************************************
 * Transaction Callback 영역
 ***********************************************************************/
 /*
 * 함수명      : fn_callBack
 * 설명         : Transaction Callback 처리
 * params          : strSvcId    : 서비스요청 ID
 *                nErrorCode  : 오류 메시지 코드 ([예] 0 : Success, 그밖의 경우, error)
 *                strErrorMsg : 오류 메시지([예]  success.insert|정상적으로 등록되었습니다.)
 * return Type     : None
 * 사용법        :
 */
this.fn_callBack = function (strSvcId, nErrorCode, strErrorMsg)
{
    if(nErrorCode != '0') {
        this.gfn_callback_message(strSvcId, nErrorCode, strErrorMsg);
    }

    if (nErrorCode == '0'){
	switch (strSvcId) {
        // 대관(프로그램) 목록 조회
		case "selectRentProgrmManageList":
			this.ds_rentProgrmManageList_s.copyData(this.ds_rentProgrmManageList);
		
			this.ds_rentProgrmManageList.set_filterstr("ABL_AT == '0'");
			this.ds_rentProgrmManageList_s.insertRow(0);
			this.ds_rentProgrmManageList_s.setColumn(0, "PROGRM_SN", "");
			this.ds_rentProgrmManageList_s.setColumn(0, "PROGRM_NM", "전체");
			break;
        // 대관(프로그램)신청 목록 조회
        case "selectRentProgrmReqstManageList":
			if(this.saveRow != -1) {
				this.ds_rentProgrmReqstManageList.set_rowposition(this.saveRow);
				this.saveRow = -1;
			}

			// 버튼 제어
			this.div_tab01.fn_onrowsetchanged();
			this.div_tab02.fn_onrowsetchanged();
			break;
			 
		//  대관(프로그램)신청 목록 저장
		case "saveRentProgrmReqstManageList":
			this.fn_search();
			break;
		//  대관(프로그램)신청 이관
		case "trnsferReqstInfoList":
			this.gfn_message("success.처리.성공"); 
			this.fn_search();
			break;
		//  대사관리(입금내역) 목록 조회
		case "selectRcpmnyDtlsList":
			break;
		//  수강대상 및 사용요금 목록 조회
		case "selectUseChrgeList":
			break;
		//  회원정보 조회
		case "selectMberInfo":
			var mberNm  = this.ds_mberInfo.getColumn(0, "MBER_NM");
			var telNo   = this.ds_mberInfo.getColumn(0, "TELNO");
			var mbtlnum = this.ds_mberInfo.getColumn(0, "MBTLNUM");
			var adres   = this.ds_mberInfo.getColumn(0, "ADRES");

			var reqstRow = this.ds_rentProgrmReqstManageList.rowposition;
			this.ds_rentProgrmReqstManageList.set_updatecontrol(false);
			this.ds_rentProgrmReqstManageList.setColumn(reqstRow, "MBER_NM", mberNm);
			this.ds_rentProgrmReqstManageList.setColumn(reqstRow, "TELNO"  , telNo);
			this.ds_rentProgrmReqstManageList.setColumn(reqstRow, "MBTLNUM", mbtlnum);
			this.ds_rentProgrmReqstManageList.setColumn(reqstRow, "ADRES"  , adres);
			this.ds_rentProgrmReqstManageList.set_updatecontrol(true);
			break;
		//  입금내역매핑처리
		case "rcpmnyDtlsMapping":
			this.fn_search();
			this.gfn_message("success.처리.성공"); 
		}
    }
}

/**********************************************************************
* Transaction 영역 끝
***********************************************************************/

/**********************************************************************
* non-Transaction 관련 컴포넌트 이벤트 처리 함수
***********************************************************************
*
* 1. Dataset 관련 이벤트 처리
* 2. Button 관련 이벤트 처리
* 3. Grid 관련 이벤트 처리
* 4. 공통함수 처리
* 5. Object 관련 이벤트 처리
*
***********************************************************************/


/**********************************************************************
* Dataset 관련 이벤트 처리
***********************************************************************/

/*
 * 함수명		: ds_rentProgrmReqstManageList_oncolumnchanged
 * 설명			: 신청관리목록 데이터셋 값 변경후 발생
 * params		: None
 * return Type	: None
 * 사용법		: this.ds_rentProgrmReqstManageList_oncolumnchanged
 */
this.ds_rentProgrmReqstManageList_oncolumnchanged = function(obj:Dataset, e:nexacro.DSColChangeEventInfo)
{
   var cRow = obj.rowposition;
   
	// 프로그램
	if(e.columnid == "PROGRM_SN") {

		var progrmSn = this.ds_rentProgrmManageList.getColumn(e.row, "PROGRM_SN");

		// 사용요금 가져오기
		this.ds_cond3.clearData();
		this.ds_cond3.addRow();
		this.ds_cond3.setColumn(0, "PROGRM_SN", e.newvalue);	
		
		this.fn_transaction("selectUseChrgeList");
	}

	// 수강대상
	if(e.columnid == "TRGET_SN") {
		var chrgeRow = this.ds_useChrgeManageList.findRow("SN", e.newvalue);
		var trgetNm = this.ds_useChrgeManageList.getColumn(chrgeRow, "TRGET_NM")
		var chrge = this.ds_useChrgeManageList.getColumn(chrgeRow, "CHRGE");
		obj.setColumn(cRow, "SETLE_AM", chrge);
	}
}

/*
 * 함수명		: ds_rentProgrmReqstManageList_cancolumnchange
 * 설명			: 신청관리목록 데이터셋 값 변경전 발생
 * params		: obj, e
 * return Type	: None
 * 사용법		: this.ds_rentProgrmReqstManageList_cancolumnchange(obj:Dataset, e:nexacro.DSColChangeEventInfo)
 */
this.ds_rentProgrmReqstManageList_cancolumnchange = function(obj:Dataset, e:nexacro.DSColChangeEventInfo)
{   
   var cRow = obj.rowposition;
   
	// 진행상태 변경시 발생되는 작업
   if(e.columnid == "SETLE_STTUS") {
      
      switch(e.newvalue) {
         case "002" :    // 반려
            bj.setColumn(cRow, "JDGMN_COMPT_DE", null);
         case "003" :    // 심사완료
            var jdgmnComptDe = obj.getOrgColumn(cRow, "JDGMN_COMPT_DE");
            var de = !this.comUtils.isNull(jdgmnComptDe) ? jdgmnComptDe : this.dateUtils.format(this.gfn_today(),"yyyymmdd");
            obj.setColumn(cRow, "JDGMN_COMPT_DE", de);
            obj.setColumn(cRow, "SETLE_COMPT_DE", null);
            break;
         case "005" :   // 결제완료
            break;
      }
   }
}


/*
 * 함수명		: ds_rentProgrmReqstManageList_onrowposchanged
 * 설명			: 신청관리목록 데이터셋 행 변경후 발생
 * params		: None
 * return Type 	: None
 * 사용법		: this.ds_rentProgrmReqstManageList_onrowposchanged("SELECT");
 */
this.ds_rentProgrmReqstManageList_onrowposchanged = function(obj:Dataset, e:nexacro.DSRowPosChangeEventInfo)
{
	// 진행상태 콤보값을 셋팅시키기 위해서
	// (fn_insert 에서 셋팅 시키기 전에 이 메서드를 먼저 탐
	if(obj.getRowType(e.newrow) == "2") {
		obj.setColumn(e.newrow, "SETLE_STTUS"   , "005");                // 진행상태(결제완료)
	}
	
	if(e.newrow > -1) {
		this.ds_useChrgeManageList.clearData();
		this.ds_rcpmnyDtlsList.clearData();
		var cRow = obj.rowposition;
		var setleSttus = obj.getOrgColumn(cRow, "SETLE_STTUS");
		var setleComptDe = obj.getOrgColumn(cRow, "SETLE_COMPT_DE");
		var setleSe = obj.getColumn(cRow, "SETLE_SE");
		var setleAm = obj.getColumn(cRow, "SETLE_AM");
		var setleAt = obj.getColumn(cRow, "SETLE_AT");
		var progrmSn = obj.getColumn(cRow, "PROGRM_SN");
		var deptCode = obj.getColumn(cRow, "DEPT_CODE");
		var useDe = obj.getColumn(cRow, "USE_DE");
		var useTime = obj.getColumn(cRow, "USE_TIME");
		var mngrRegistAt = obj.getColumn(cRow, "MNGR_REGIST_AT");
		var transDaywek = obj.getColumn(cRow, "TNCRS_DAYWEK");
		var mberId = obj.getColumn(cRow, "MBER_ID");
		var reqstDe = obj.getColumn(cRow, "REQST_DE");
		var rowType = obj.getRowType(cRow);
		
		// 진행상태가 환불요청, 환불완료, 심사완료(결제완료일자 존재)일 경우 우측 상세정보 탭 변경
		this.parent.parent.set_enableevent(false);
		if((setleSttus == "003" && !this.comUtils.isNull(setleComptDe)) || setleSttus == "006" || setleSttus == "007") {
			this.div_tab01.set_visible(false);
			this.div_tab02.set_visible(true);
			
		}else {
			this.div_tab01.set_visible(true);
			this.div_tab02.set_visible(false);
			
		}
		this.parent.parent.set_enableevent(true);
		

		// 현 진행상태에 따른 콤보 아이템 필터링
		this.ds_setleSttusSe.set_filterstr("String(VAL0).indexOf("+setleSttus+") > -1");
		
		// 탭 오브젝트 셋팅
		var div_testTrget = this.div_tab01.visible == true ? this.div_tab01 : this.div_tab02;
		div_testTrget.fn_changeObjectProperty(cRow);
		
		// 수강대상 및 요금 가져오기
		this.ds_cond3.clearData();
		this.ds_cond3.addRow();
		this.ds_cond3.setColumn(0, "DEPT_CODE", deptCode);
		this.ds_cond3.setColumn(0, "PROGRM_SN", progrmSn);	
		
		this.fn_transaction("selectUseChrgeList");
		
		if(rowType != "2") {
			this.ds_cond4.clearData()
			this.ds_cond4.addRow();
			this.ds_cond4.setColumn(0, "MBER_ID", mberId);
			this.fn_transaction("selectMberInfo");
		}
		
		// 매핑조건 - 1. 결제구분	: 무통장입금, 매핑여부 : 미매핑, 진행상태 : 입금대기
		if((setleSe == "002" && setleAt == "0" && setleSttus == "004")) { 
			this.ds_cond2.clearData();
			this.ds_cond2.addRow();
			this.ds_cond2.setColumn(0, "DEPT_CODE", deptCode); 						    // 부서코드
			this.ds_cond2.setColumn(0, "SETLE_AM", obj.getColumn(cRow, "SETLE_AM"));   // 결제금액
			this.ds_cond2.setColumn(0, "REQST_DE", obj.getColumn(cRow, "REQST_DE"));   // 신청일자

			this.btn_rcpmnyDtlsMapping.set_visible(true);
			// 대사관리(입금내역) 조회
			this.fn_transaction("selectRcpmnyDtlsList");
		}else {
			this.btn_rcpmnyDtlsMapping.set_visible(false);
		}
	}
}

/*
 * 함수명		: ds_cond_oncolumnchanged
 * 설명			: 검색 데이터셋 데이터 변경시 발생
 * params 		: None
 * return Type	: None
 * 사용법   	: this.ds_cond_oncolumnchanged();
 */
this.ds_cond_oncolumnchanged = function(obj:Dataset, e:nexacro.DSColChangeEventInfo)
{
	if(e.columnid == "DEPT_CODE") {
		// 대관프로그램 목록 조회
		this.fn_transaction("selectRentProgrmManageList");
	}
	
	if(e.columnid == "PROGRM_CODE") {
		// 프로그램 선택 팝업에 코드값이 없으면 코드네임칸도 비워줌
		if(this.comUtils.isNull(e.newvalue)) {
			obj.setColumn(0, "PROGRM_CODE_NM", "");
		}
	}
	
	if(e.columnid == "SEARCH_CND") {
		if(e.newvalue == "002") {
			var endde = obj.getColumn(0, "ENDDE");
			var nLastDay  = this.dateUtils.getLastDay(endde).getDate();	//마지막날짜 구하기
			var nextDe = endde.substring(0, 6)+nLastDay;
			obj.setColumn(e.row, "ENDDE", nextDe);
		}
	}
}
/**********************************************************************
* Button 관련 이벤트 처리
***********************************************************************/


/*
 * 함수명      : btn_rcpmnyDtlsMapping_onclick
 * 설명         : 입금내역매핑처리
 * params      : None
 * return Type   : None
 * 사용법      : this.btn_rcpmnyDtlsMapping_onclick();
 */
this.btn_rcpmnyDtlsMapping_onclick = function(obj:Button,  e:nexacro.ClickEventInfo)
{
	var cRow = this.ds_rentProgrmReqstManageList.rowposition;
	var setleAt = this.ds_rentProgrmReqstManageList.getColumn(cRow, "SETLE_AT");
	var setleSttus = this.ds_rentProgrmReqstManageList.getOrgColumn(cRow, "SETLE_STTUS");
	var deptCode = this.ds_cond.getColumn(0, "DEPT_CODE");

	if(setleAt == "1") {
		alert("해당 신청내역은 이미 매핑처리가 되었습니다.");
		return false;
	}

	if(setleSttus == "001" || setleSttus == "002" ||setleSttus == "005") {
		alert("해당 진행상태에서는 입금내역을 매핑처리 할 수 없습니다.");
		return false;
	}

	if(application.confirm("해당 입금내역을 매핑처리 하시겠습니까?")) {
		var rcpmnyDtlsListRow = this.ds_rcpmnyDtlsList.rowposition;
		var csv = "-";

		var bankCd       = !this.comUtils.isNull(this.ds_rcpmnyDtlsList.getColumn(rcpmnyDtlsListRow, "BANK_CD")) ? this.ds_rcpmnyDtlsList.getColumn(rcpmnyDtlsListRow, "BANK_CD") : '';
		var acctNo       = !this.comUtils.isNull(this.ds_rcpmnyDtlsList.getColumn(rcpmnyDtlsListRow, "ACCT_NO")) ? this.ds_rcpmnyDtlsList.getColumn(rcpmnyDtlsListRow, "ACCT_NO") : '';
		var cuprUnit     = !this.comUtils.isNull(this.ds_rcpmnyDtlsList.getColumn(rcpmnyDtlsListRow, "CURR_UNIT")) ? this.ds_rcpmnyDtlsList.getColumn(rcpmnyDtlsListRow, "CURR_UNIT") : '';
		var inqno        = !this.comUtils.isNull(this.ds_rcpmnyDtlsList.getColumn(rcpmnyDtlsListRow, "INQNO")) ? this.ds_rcpmnyDtlsList.getColumn(rcpmnyDtlsListRow, "INQNO") : '';
		var acctTxday    = !this.comUtils.isNull(this.ds_rcpmnyDtlsList.getColumn(rcpmnyDtlsListRow, "ACCT_TXDAY")) ? this.ds_rcpmnyDtlsList.getColumn(rcpmnyDtlsListRow, "ACCT_TXDAY") : '';
		var acctTxdaySeq = !this.comUtils.isNull(this.ds_rcpmnyDtlsList.getColumn(rcpmnyDtlsListRow, "ACCT_TXDAY_SEQ")) ? this.ds_rcpmnyDtlsList.getColumn(rcpmnyDtlsListRow, "ACCT_TXDAY_SEQ") : '' ;
		var orderNo		 = this.ds_rentProgrmReqstManageList.getColumn(cRow, "ORDER_NO");
		var setleSe      = this.ds_rentProgrmReqstManageList.getColumn(cRow, "SETLE_SE");
		var amount       = this.ds_rentProgrmReqstManageList.getColumn(cRow, "SETLE_AM");
		var mberId 	     = this.ds_rentProgrmReqstManageList.getColumn(cRow, "MBER_ID");
		var progrmSn     = this.ds_rentProgrmReqstManageList.getColumn(cRow, "PROGRM_SN");
		var progrmNm     = this.ds_rentProgrmReqstManageList.getColumn(cRow, "PROGRM_NM");
		var ym           = this.ds_rentProgrmReqstManageList.getColumn(cRow, "YM");
		var deptCode     = this.ds_rentProgrmReqstManageList.getColumn(cRow, "DEPT_CODE");
		var goodsInfo = progrmNm+" / "+ym;

		// 입금내역 
		this.ds_rcpmnyDtlsManageList.clearData();
		this.ds_rcpmnyDtlsManageList.addRow();
		var rcpmnyDtlsNo = bankCd + csv + acctNo + csv + cuprUnit + csv + inqno + csv + acctTxday + csv + acctTxdaySeq;   // PK들을 묶어 RCPMNY_DTLS_NO에 저장
		this.ds_rcpmnyDtlsManageList.setColumn(0, "RCPMNY_DTLS_NO"   , rcpmnyDtlsNo);
		this.ds_rcpmnyDtlsManageList.setColumn(0, "ORDER_NO"         , orderNo);		// 주문번호
		this.ds_rcpmnyDtlsManageList.setColumn(0, "SETLE_SE"         , setleSe);		// 결제수단
		this.ds_rcpmnyDtlsManageList.setColumn(0, "PROCESS_STTUS"    , "002");  		// 처리상태(무통장입금)
		this.ds_rcpmnyDtlsManageList.setColumn(0, "AMOUNT"           , amount);			// 금액
		this.ds_rcpmnyDtlsManageList.setColumn(0, "SETLE_INSTT"      , bankCd);			// 결제기관
		this.ds_rcpmnyDtlsManageList.setColumn(0, "EXCCLC_AM"        , amount);			// 정산금액
		this.ds_rcpmnyDtlsManageList.setColumn(0, "PURCHSR"          , mberId);			// 구매자
		this.ds_rcpmnyDtlsManageList.setColumn(0, "GOODS_INFO"       , goodsInfo);		// 상품정보(프로그램명, 사용년월)
		this.ds_rcpmnyDtlsManageList.setColumn(0, "DEPT_CODE"        , deptCode);		// 부서코드
		this.ds_rcpmnyDtlsManageList.setColumn(0, "SETLE_DE"         , acctTxday);		// 결제일자
				
		// 신청정보
		this.ds_rentProgrmReqstManage.clearData();
		this.ds_rentProgrmReqstManage.addRow();
		this.ds_rentProgrmReqstManage.copyRow(0, this.ds_rentProgrmReqstManageList, cRow);

		// 진행상태 변경(결제완료)
		this.ds_rentProgrmReqstManage.setColumn(0, "SETLE_COMPT_DE", acctTxday);
		this.ds_rentProgrmReqstManage.setColumn(0, "SETLE_STTUS"   , "005");

		this.fn_transaction("rcpmnyDtlsMapping");   
	}
}
/**********************************************************************
* Grid 관련 이벤트 처리
***********************************************************************/

/**********************************************************************
* 공통함수 처리
***********************************************************************/

/**********************************************************************
* Tab 관련 이벤트 처리
***********************************************************************/

/**********************************************************************
* Popup 관련 이벤트 처리
***********************************************************************/

/**********************************************************************
* 사용자 정의 함수
***********************************************************************/
/*
 * 함수명  	: fn_get_imgUrl
 * 설명 		: 진행상태 이미지
 * params  		: 
 * return Type 	: 
 * 사용법		: this.fn_get_imgUrl(s_reqstSttus)
 */
this.fn_get_imgUrl = function(s_reqstSttus)
{	
	var imgTitle = "";
	var reqstSttus = s_reqstSttus.substring(3, 2);
	
	imgTitle= "ico_reqstSttus"+reqstSttus;
	
	return 'theme://images/'+imgTitle+'.png';
}


/*
 * 함수명  	: fn_getTransDaywek
 * 설명 		: 강습요일코드를 한글로 얻기
 * params  		: s_tncrsDaywek
 * return Type 	: tncrsDaywek
 * 사용법		: this.fn_getTransDaywek(s_tncrsDaywek)
 */
this.fn_getTransDaywek = function(s_tncrsDaywek) {

	var daywek = ['일', '월', '화', '수', '목', '금', '토'];
	
	if(!this.comUtils.isNull(s_tncrsDaywek)) {
		var tncrsDaywekArr = s_tncrsDaywek.split("-");
		var new_tncrsDaywek = "";
	
		for(var j = 0; j < tncrsDaywekArr.length; j++) {

			if(j > 0) {
				new_tncrsDaywek += ", "
			}	
			
			new_tncrsDaywek += daywek[(tncrsDaywekArr[j]-1)];
		}
		return new_tncrsDaywek;
	}
}

/*
 * 함수명  	: div_search_cmb_searchCnd_onitemchanged
 * 설명 		: 조회일자 콤보 변경시 콤보에 맞춰 날짜 포맷 변경
 * params  		: obj, e
 * return Type 	: None
 * 사용법		: this.div_search_cmb_searchCnd_onitemchanged(obj:Combo, e:nexacro.ItemChangeEventInfo)
 */

this.div_search_cmb_searchCnd_onitemchanged = function(obj:Combo, e:nexacro.ItemChangeEventInfo)
{
	var bool = (obj.value == "001" ? true : false)
	
	this.div_search.div_ym.set_visible(bool);
	this.div_search.div_reqstDe.set_visible(!bool);
}


this.ds_rentProgrmReqstManageList_onrowsetchanged = function(obj:Dataset, e:nexacro.DSRowsetChangeEventInfo)
{
	// 탭 오브젝트 셋팅
	var div_testTrget = this.div_tab01.visible == true ? this.div_tab01 : this.div_tab02;
	div_testTrget.fn_onrowsetchanged();
}


this.btn_progrmSearch_onclick = function(obj:Button,  e:nexacro.ClickEventInfo)
{
	var deptCode = this.ds_cond.getColumn(0, "DEPT_CODE");
	
	if(this.comUtils.isNull(deptCode)) {
		alert("담당부서를 먼저 선택해주세요.");
	}

	var parm = {
	    arg_0      : this
	   ,deptCode   : deptCode
	};
	
	this.gfn_popup("popProgrmSearch", 500, 465, "프로그램선택", parm, "hpm_ctm::HPM060103_P02.xfdl", "fn_popCallBack", true);
}

/*
 * 함수명  	: fn_popInstrctrInfoCallBack
 * 설명 		: 강사조회 팝업 콜백 처리
 * params  		: sPopupId, sReturn
 * return Type 	: None
 * 사용법		: this.fn_popInstrctrInfoCallBack(sPopupId, sReturn)
 */
this.fn_popCallBack = function(sPopupId, sReturn)
{
	
	if(sPopupId == "popProgrmSearch")
	{
		var dsTemp = new Dataset();
		var loadCnt = dsTemp.loadXML(sReturn);
        if(loadCnt) {
			this.ds_cond.setColumn(0, "PROGRM_CODE"    , dsTemp.getColumn(0, "PROGRM_CODE"));
			this.ds_cond.setColumn(0, "PROGRM_CODE_NM" , dsTemp.getColumn(0, "PROGRM_CODE_NM"));
        }
	}
}

]]></Script>
  </Form>
</FDL>
