<?xml version="1.0" encoding="utf-8"?>
<FDL version="1.5">
  <TypeDefinition url="..\..\..\default_typedef.xml"/>
  <Form id="SYM090200_P02" classname="Pattern_03" left="0" top="0" width="999" height="733" titletext="내부결재 상세" oninit="SYM090200_P02_oninit" onload="SYM090200_P02_onload">
    <Layouts>
      <Layout>
        <Static id="Static00" taborder="57" cssclass="sta_WF_PopupBg" left="0" top="0" right="0" bottom="0"/>
        <Static id="Static02" taborder="58" text="내부결재관리" cssclass="sta_WF_PopupTitle" left="2" top="2" width="98.4%" height="34"/>
        <Static id="Static05" taborder="59" text="15" visible="false" left="2" top="2" width="10" height="731" style="background:#1b3cd23c;align:center middle;"/>
        <Button id="btn_exit" taborder="60" cssclass="btn_WF_PopupClose" left="957" top="8" width="2.9%" height="20" onclick="btn_exit_onclick"/>
        <Static id="Static03" taborder="61" text="15" visible="false" left="984" top="2" width="15" height="733" style="background:#1b3cd23c;align:center middle;"/>
        <Static id="Static06" taborder="62" text="15" visible="false" left="2" top="36" width="99.72%" height="15" style="background:#dc143c3c;align:center middle;"/>
        <Static id="Static04" taborder="63" text="15" visible="false" left="2" top="720" height="15" style="background:#dc143c3c;align:center middle;" right="0"/>
        <Static id="Static07" taborder="66" text="10" visible="false" left="2" top="687" height="10" style="background:#dc143c3c;align:center middle;" right="0"/>
        <Static id="Static38" taborder="80" text="내부결재 상세" cssclass="sta_WF_Title01" left="12" top="53" width="18.32%" height="21"/>
        <Button id="btn_confirm" taborder="84" text="확인" left="901" top="697" width="40" height="23" onclick="btn_confirm_onclick"/>
        <Button id="btn_cancel" taborder="85" text="취소" left="944" top="697" width="40" height="23" onclick="btn_cancel_onclick"/>
        <Static id="Static08" taborder="86" text="10" visible="false" left="3" top="76" right="3" height="5" style="background:#dc143c3c;align:center middle;"/>
        <Button id="btn_return" taborder="87" text="반려" cssclass="btn_WF_CRUD" top="51" right="68" width="49" height="25" onclick="btn_return_onclick"/>
        <Button id="btn_resrve" taborder="88" text="보류" cssclass="btn_WF_CRUD" top="51" right="15" width="49" height="25" onclick="btn_resrve_onclick"/>
        <Button id="btn_confn" taborder="90" text="승인" cssclass="btn_WF_CRUD" top="51" right="174" width="49" height="25" onclick="btn_confn_onclick"/>
        <Button id="btn_rcept" taborder="93" text="접수" cssclass="btn_WF_CRUD" left="82.98%" top="51" right="12.11%" height="25" onclick="btn_rcept_onclick"/>
        <Button id="btn_save" taborder="94" text="저장" onclick="btn_save_onclick" cssclass="btn_WF_CRUD" left="61.76%" top="51" right="33.33%" height="25"/>
        <Button id="btn_recomCancel" taborder="95" text="취소" cssclass="btn_WF_CRUD" left="67.07%" top="51" right="28.03%" height="25" onclick="btn_recomCancel_onclick"/>
        <Button id="btn_recom" taborder="96" text="상신" cssclass="btn_WF_CRUD" left="72.37%" top="51" right="22.72%" height="25" onclick="btn_recom_onclick"/>
        <Div id="div_ubiReport" taborder="97" url="common::frmReport2.xfdl" left="1%" top="313" right="30.33%" bottom="99" async="false"/>
        <Div id="div_work" taborder="98" left="0.3%" top="81" right="1.4%" height="238">
          <Layouts>
            <Layout width="982" height="606">
              <Grid id="grd_innerSanctnList" taborder="23" binddataset="ds_innerSanctnDtls" useinputpanel="false" left="0.92%" top="32" right="42.06%" height="201">
                <Formats>
                  <Format id="default">
                    <Columns>
                      <Column size="34"/>
                      <Column size="73"/>
                      <Column size="100"/>
                      <Column size="108"/>
                      <Column size="115"/>
                      <Column size="127"/>
                    </Columns>
                    <Rows>
                      <Row size="24" band="head"/>
                      <Row size="24"/>
                    </Rows>
                    <Band id="head">
                      <Cell/>
                      <Cell col="1" text="상태"/>
                      <Cell col="2" text="결재단계"/>
                      <Cell col="3" text="기안자/결재자"/>
                      <Cell col="4" displaytype="normal" text="부서"/>
                      <Cell col="5" text="기안일시/결재일시"/>
                    </Band>
                    <Band id="body">
                      <Cell displaytype="image" text="bind:SANCTN_IMG"/>
                      <Cell col="1" displaytype="combo" text="bind:SANCTN_STTUS" combodataset="ds_sanctnSttusCode" combocodecol="CODE" combodatacol="CODE_NM"/>
                      <Cell col="2" displaytype="combo" text="bind:SANCTN_STEP" combodataset="ds_sanctnStepCode" combocodecol="CODE" combodatacol="CODE_NM"/>
                      <Cell col="3" displaytype="normal" edittype="none" text="expr:(ABSNCE_AT == '1') ? AGNCY_EMPNM+'(대)' : EMPNM" combodataset="ds_plCode" combocodecol="EMPNM" combodatacol="EMP_DEPT_NM"/>
                      <Cell col="4" displaytype="combo" text="bind:SANCTNER_DEPT_CD" combodataset="ds_deptCode" combocodecol="DEPT_CODE" combodatacol="DEPT_CODE_NM"/>
                      <Cell col="5" displaytype="normal" edittype="none" text="bind:SANCTN_DT" mask="####-##-## ##:##:##" maskchar="_"/>
                    </Band>
                  </Format>
                </Formats>
              </Grid>
              <Static id="Static86" taborder="24" text="단계별 의견" wordwrap="char" cssclass="sta_WF_Label" left="58.96%" top="166" right="35.13%" height="67"/>
              <Static id="Static46" taborder="25" text="10" visible="false" left="57.94%" top="0" right="41.04%" height="222" style="background:#1b3cd23c;align:center middle;"/>
              <Static id="Static33" taborder="26" text="결재제목" cssclass="sta_WF_Label" left="0.92%" top="0" right="91.34%" height="27"/>
              <Grid id="grd_innerSanctnList00" taborder="27" binddataset="ds_innerSanctner" useinputpanel="false" oncellclick="div_work_grd_innerSanctnList_oncellclick" left="58.96%" top="32" right="0.1%" height="129" autosizingtype="none">
                <Formats>
                  <Format id="default">
                    <Columns>
                      <Column size="40"/>
                      <Column size="85"/>
                      <Column size="146"/>
                      <Column size="126"/>
                    </Columns>
                    <Rows>
                      <Row size="24" band="head"/>
                      <Row size="24"/>
                    </Rows>
                    <Band id="head">
                      <Cell text="순번"/>
                      <Cell col="1" text="결재단계"/>
                      <Cell col="2" text="결재자명"/>
                      <Cell col="3" displaytype="normal" text="부서"/>
                    </Band>
                    <Band id="body">
                      <Cell text="bind:SANCTN_SN"/>
                      <Cell col="1" displaytype="combo" text="bind:SANCTN_STEP" combodataset="ds_sanctnStepCode" combocodecol="CODE" combodatacol="CODE_NM"/>
                      <Cell col="2" displaytype="expr:(SANCTN_APPN_SE == 'T2') ? 'combo' :  ((SANCTN_APPN_SE == 'T3') ? 'combo' : 'normal')" edittype="expr:(SANCTN_APPN_SE == 'T2') ? 'combo' :  ((SANCTN_APPN_SE == 'T3') ? 'combo' : 'normal')" text="bind:EMPNM" combodataset="ds_plCode" combocodecol="EMPNM" combodatacol="EMP_DEPT_NM"/>
                      <Cell col="3" displaytype="combo" text="bind:SANCTNER_DEPT_CD" combodataset="ds_deptCode" combocodecol="DEPT_CODE" combodatacol="DEPT_CODE_NM"/>
                    </Band>
                  </Format>
                </Formats>
              </Grid>
              <Static id="Static00" taborder="28" cssclass="sta_WF_Labelbg" left="64.77%" top="166" right="0.1%" height="67"/>
              <TextArea id="txt_opinion" taborder="29" readonly="true" left="65.07%" top="168" right="0.41%" height="63"/>
              <Static id="Static01" taborder="30" cssclass="sta_WF_Labelbg" left="8.55%" top="0" right="42.06%" height="27"/>
              <Edit id="edt_sj" taborder="31" cssclass="edt_WF_Essential" left="8.86%" top="3" right="42.46%" height="21"/>
              <Static id="Static09" taborder="32" text="5" visible="false" left="0.92%" right="0.2%" bottom="0" height="5" style="background:#dc143c3c;align:center middle;"/>
              <Static id="Static10" taborder="33" text="내부결재선" cssclass="sta_WF_Title02" left="58.96%" top="3" right="22.71%" height="21"/>
            </Layout>
          </Layouts>
        </Div>
        <Static id="Static01" taborder="99" text="5" visible="false" left="1.2%" top="108" right="42.74%" height="5" style="background:#dc143c3c;align:center middle;"/>
        <Static id="Static11" taborder="100" text="5" visible="false" left="58.16%" top="108" right="1.5%" height="5" style="background:#dc143c3c;align:center middle;"/>
        <Static id="Static13" taborder="101" cssclass="sta_WF_Labelbg" left="8.61%" top="638" right="1.5%" height="49"/>
        <TextArea id="txt_opinion" taborder="102" left="11.41%" top="640" right="1.8%" height="45" onchanged="txt_opinion_onchanged"/>
        <Static id="Static12" taborder="103" text="결재/반려 의견" cssclass="sta_WF_Label" left="1.2%" top="638" right="88.79%" height="49"/>
        <Static id="Static14" taborder="104" text="5" visible="false" left="1.2%" top="633" right="1.4%" height="5" style="background:#dc143c3c;align:center middle;"/>
        <Static id="Static09" taborder="105" text="5" visible="false" left="58.16%" top="242" right="1.5%" height="5" style="background:#dc143c3c;align:center middle;"/>
        <Static id="Static10" taborder="106" text="첨부파일" cssclass="sta_WF_Title02" left="70.37%" top="318" right="14.61%" height="21"/>
        <Grid id="grd_fileList" taborder="110" binddataset="ds_fileList" useinputpanel="false" autosizingtype="none" onheadclick="grd_fileList_onheadclick" left="69.97%" top="344" right="1.4%" height="286">
          <Formats>
            <Format id="default">
              <Columns>
                <Column size="31"/>
                <Column size="162"/>
                <Column size="85"/>
              </Columns>
              <Rows>
                <Row size="24" band="head"/>
                <Row size="24"/>
              </Rows>
              <Band id="head">
                <Cell displaytype="checkbox"/>
                <Cell col="1" text="파일명"/>
                <Cell col="2" text="용량"/>
              </Band>
              <Band id="body">
                <Cell displaytype="checkbox" edittype="checkbox" text="bind:CHK"/>
                <Cell col="1" text="bind:ORGINL_FILE_NM"/>
                <Cell col="2" text="bind:FILE_MG"/>
              </Band>
            </Format>
          </Formats>
        </Grid>
        <Button id="btn_fileDownload" taborder="111" text="다운로드" onclick="btn_fileDownload_onclick" cssclass="btn_WF_Process" top="319" right="13" height="21" width="58"/>
        <Button id="btn_fileDelete" taborder="112" text="붙임삭제" onclick="btn_fileDelete_onclick" top="319" right="72" height="21" width="58" cssclass="btn_WF_Process"/>
        <Button id="btn_fileUpload" taborder="113" text="붙임선택" onclick="btn_fileUpload_onclick" top="319" right="131" height="21" width="61" cssclass="btn_WF_Process"/>
      </Layout>
    </Layouts>
    <Objects>
      <Dataset id="ds_innerSanctnDtls" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false" oncolumnchanged="ds_innerSanctnDtls_oncolumnchanged">
        <ColumnInfo>
          <Column id="INNER_SANCTN_SN" type="BIGDECIMAL" size="256"/>
          <Column id="INNER_SANCTN_ID" type="STRING" size="256"/>
          <Column id="SANCTN_STEP" type="STRING" size="256"/>
          <Column id="SANCTN_STTUS" type="STRING" size="256"/>
          <Column id="SANCTNER_ID" type="STRING" size="256"/>
          <Column id="EMP_DEPT_NM" type="STRING" size="256"/>
          <Column id="EMPNM" type="STRING" size="256"/>
          <Column id="SANCTNER_DEPT_CD" type="STRING" size="256"/>
          <Column id="DEPT_NM" type="STRING" size="256"/>
          <Column id="AGNCY_SANCTNER_ID" type="STRING" size="256"/>
          <Column id="SANCTN_DT" type="STRING" size="256"/>
          <Column id="OPINION" type="STRING" size="256"/>
          <Column id="ABSNCE_AT" type="STRING" size="256"/>
          <Column id="FILE_SN" type="STRING" size="256"/>
          <Column id="INNER_SANCTN_MDL_ID" type="STRING" size="256"/>
          <Column id="SYS_SE_CODE" type="STRING" size="256"/>
          <Column id="JOB_SE" type="STRING" size="256"/>
          <Column id="SANCTN_APPN_SE" type="STRING" size="256"/>
          <Column id="SANCTN_SN" type="BIGDECIMAL" size="256"/>
          <Column id="RECOM_DEPT" type="STRING" size="256"/>
          <Column id="RECOM_EMPNO" type="STRING" size="256"/>
          <Column id="SANCTN_IMG" type="STRING" size="256"/>
          <Column id="REGISTER_ID" type="STRING" size="256"/>
          <Column id="REGIST_DT" type="STRING" size="256"/>
          <Column id="UPDUSR_ID" type="STRING" size="256"/>
          <Column id="UPDT_DT" type="STRING" size="256"/>
          <Column id="AGNCY_EMPNM" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_innerSanctnMastr" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="INNER_SANCTN_ID" type="STRING" size="256"/>
          <Column id="INNER_SANCTN_MDL_ID" type="STRING" size="256"/>
          <Column id="SYS_SE_CODE" type="STRING" size="256"/>
          <Column id="JOB_SE" type="STRING" size="256"/>
          <Column id="USER_ID" type="STRING" size="256"/>
          <Column id="DEPT_CODE" type="STRING" size="256"/>
          <Column id="SANCTN_SJ" type="STRING" size="256"/>
          <Column id="SANCTN_TY" type="STRING" size="256"/>
          <Column id="LAST_SANCTN_STEP" type="STRING" size="256"/>
          <Column id="LAST_SANCTN_STTUS" type="STRING" size="256"/>
          <Column id="LAST_SANCTNER_ID" type="STRING" size="256"/>
          <Column id="LAST_SANCTN_DT" type="STRING" size="256"/>
          <Column id="FILE_SN" type="BIGDECIMAL" size="20"/>
          <Column id="NEXT_SANCTN_STEP" type="STRING" size="256"/>
          <Column id="NEXT_SANCTNER_ID" type="STRING" size="256"/>
          <Column id="REGISTER_ID" type="STRING" size="256"/>
          <Column id="REGIST_DT" type="STRING" size="256"/>
          <Column id="UPDUSR_ID" type="STRING" size="256"/>
          <Column id="UPDT_DT" type="STRING" size="256"/>
          <Column id="JOB_KEY" type="STRING" size="256"/>
          <Column id="FILE_SN2" type="BIGDECIMAL" size="20"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_rptParamInfo2" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="INNER_SANCTN_NO" type="STRING" size="256"/>
          <Column id="SN" type="BIGDECIMAL" size="256"/>
          <Column id="SVC_URL" type="STRING" size="512"/>
          <Column id="DS_SE" type="STRING" size="256"/>
          <Column id="PARAM_ID" type="STRING" size="256"/>
          <Column id="DS_NM" type="STRING" size="256"/>
          <Column id="INPUT_DATA" type="STRING" size="4000"/>
          <Column id="OUT_XML" type="STRING" size="4000"/>
        </ColumnInfo>
        <Rows>
          <Row>
            <Col id="INNER_SANCTN_NO">A</Col>
            <Col id="SN">1</Col>
            <Col id="SVC_URL">hsco/com/sym/esm/SYM080100/SYM080100List.do</Col>
            <Col id="INPUT_DATA">&lt;Dataset id="ds_cond00"&gt;
	&lt;ColumnInfo&gt;
		&lt;Column id="SANCTN_NO" type="BIGDECIMAL" size="17"  /&gt;
		&lt;Column id="SANCTN_KND" type="STRING" size="2"  /&gt;
		&lt;Column id="SANCTN_STTS" type="STRING" size="10"  /&gt;
		&lt;Column id="BGNDT" type="STRING" size="8"  /&gt;
		&lt;Column id="ENDDT" type="STRING" size="8"  /&gt;
		&lt;Column id="EMPNO" type="STRING" size="8"  /&gt;
		&lt;Column id="USER_NM" type="STRING" size="30"  /&gt;
		&lt;Column id="DEPT_CODE" type="STRING" size="6"  /&gt;
		&lt;Column id="SANCTNER_EMPNO" type="STRING" size="8"  /&gt;
		&lt;Column id="SANCTNER_EMPNM" type="STRING" size="30"  /&gt;
		&lt;Column id="SANCTNER_DEPT_CODE" type="STRING" size="6"  /&gt;
		&lt;Column id="INTRLCK_IDNTFR" type="STRING" size="64"  /&gt;
	&lt;/ColumnInfo&gt;
	&lt;Rows&gt;
		&lt;Row&gt;
			&lt;Col id="BGNDT"&gt;20150701&lt;/Col&gt;
			&lt;Col id="ENDDT"&gt;20151022&lt;/Col&gt;
		&lt;/Row&gt;
	&lt;/Rows&gt;
&lt;/Dataset&gt;</Col>
            <Col id="PARAM_ID">input1</Col>
            <Col id="DS_NM">ds_cond00</Col>
            <Col id="DS_SE">I</Col>
          </Row>
          <Row>
            <Col id="INNER_SANCTN_NO">A</Col>
            <Col id="SN">2</Col>
            <Col id="SVC_URL">hsco/com/sym/esm/SYM080100/SYM080100SanctnHist.do</Col>
            <Col id="PARAM_ID">output_fsn</Col>
            <Col id="INPUT_DATA">&lt;Dataset id="ds_cond01"&gt;
	&lt;ColumnInfo&gt;
		&lt;Column id="SANCTN_NO" type="BIGDECIMAL" size="17"  /&gt;
	&lt;/ColumnInfo&gt;
	&lt;Rows&gt;
		&lt;Row&gt;
			&lt;Col id="SANCTN_NO"&gt;2015000132&lt;/Col&gt;
		&lt;/Row&gt;
	&lt;/Rows&gt;
&lt;/Dataset&gt;</Col>
            <Col id="DS_NM">ds_cond01</Col>
            <Col id="DS_SE">I</Col>
          </Row>
          <Row>
            <Col id="INNER_SANCTN_NO">A</Col>
            <Col id="SN">1</Col>
            <Col id="SVC_URL">hsco/com/sym/esm/SYM080100/SYM080100List.do</Col>
            <Col id="PARAM_ID">output1</Col>
            <Col id="INPUT_DATA"/>
            <Col id="DS_SE">O</Col>
            <Col id="DS_NM">ds_elctrnSanctnMastr</Col>
            <Col id="OUT_XML">&lt;ColumnInfo&gt;&lt;/ColumnInfo&gt;</Col>
          </Row>
          <Row>
            <Col id="INNER_SANCTN_NO">A</Col>
            <Col id="SN">2</Col>
            <Col id="SVC_URL">hsco/com/sym/esm/SYM080100/SYM080100SanctnHist.do</Col>
            <Col id="DS_SE">O</Col>
            <Col id="PARAM_ID">output_fsn</Col>
            <Col id="DS_NM">ds_sanctnHist</Col>
            <Col id="OUT_XML">&lt;ColumnInfo&gt;&lt;/ColumnInfo&gt;</Col>
            <Col id="INPUT_DATA"/>
          </Row>
        </Rows>
      </Dataset>
      <Dataset id="ds_sanctionRptParam" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="INNER_SANCTN_ID" type="STRING" size="256"/>
          <Column id="SN" type="BIGDECIMAL" size="256"/>
          <Column id="SVC_ID" type="STRING" size="256"/>
          <Column id="SVC_URL" type="STRING" size="512"/>
          <Column id="INPUT_DATA_SET" type="STRING" size="512"/>
          <Column id="OUTPUT_DATA_SET" type="STRING" size="512"/>
          <Column id="REPRT_URL" type="STRING" size="512"/>
          <Column id="REPRT_SJ" type="STRING" size="256"/>
          <Column id="STRE_FILE_NM" type="STRING" size="100"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_rptParamInfo" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="INNER_SANCTN_ID" type="STRING" size="256"/>
          <Column id="SN" type="BIGDECIMAL" size="256"/>
          <Column id="SVC_ID" type="STRING" size="256"/>
          <Column id="SVC_URL" type="STRING" size="512"/>
          <Column id="DATA_SET_SE" type="STRING" size="256"/>
          <Column id="PARAMTR_ID" type="STRING" size="256"/>
          <Column id="DATA_SET_NM" type="STRING" size="256"/>
          <Column id="INPUT_DATA" type="STRING" size="4000"/>
          <Column id="OUTPUT_XML" type="STRING" size="4000"/>
          <Column id="ORDR" type="BIGDECIMAL" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_deptCode" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="DEPT_CODE" type="STRING" size="6"/>
          <Column id="DEPT_NM" type="STRING" size="50"/>
          <Column id="DEPT_CODE_NM" type="STRING" size="256"/>
          <Column id="DEPT_SE" type="STRING" size="3"/>
          <Column id="DEPT_LEVEL" type="BIGDECIMAL" size="22"/>
          <Column id="UPPER_DEPT_CODE" type="STRING" size="6"/>
          <Column id="BEFORE_DEPT_CODE" type="STRING" size="6"/>
          <Column id="BPLC_SE" type="STRING" size="3"/>
          <Column id="USE_AT" type="STRING" size="1"/>
          <Column id="USE_BGNDE" type="STRING" size="8"/>
          <Column id="USE_ENDDE" type="STRING" size="8"/>
          <Column id="OUTPT_ORDR" type="BIGDECIMAL" size="22"/>
          <Column id="RM" type="STRING" size="200"/>
          <Column id="REGISTER_ID" type="STRING" size="12"/>
          <Column id="REGIST_DT" type="DATE" size="7"/>
          <Column id="UPDUSR_ID" type="STRING" size="12"/>
          <Column id="UPDT_DT" type="DATE" size="7"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_searchDept" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="DEPT_CODE" type="STRING" size="256"/>
          <Column id="DEPT_NM" type="STRING" size="256"/>
          <Column id="USE_AT" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_sanctnSttusCode" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="CODE" type="STRING" size="256"/>
          <Column id="CODE_NM" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_sanctnKndCode" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="CODE" type="STRING" size="256"/>
          <Column id="CODE_NM" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_managerCode" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="EMPNO" type="STRING" size="256"/>
          <Column id="EMP_DEPT_NM" type="STRING" size="256"/>
          <Column id="EMPNM" type="STRING" size="256"/>
          <Column id="DEPT_CODE" type="STRING" size="6"/>
          <Column id="DEPT_NM" type="STRING" size="50"/>
          <Column id="SANCTN_APPN_SE" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_plCode" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="EMPNO" type="STRING" size="256"/>
          <Column id="EMP_DEPT_NM" type="STRING" size="256"/>
          <Column id="EMPNM" type="STRING" size="256"/>
          <Column id="DEPT_CODE" type="STRING" size="6"/>
          <Column id="DEPT_NM" type="STRING" size="50"/>
          <Column id="SANCTN_APPN_SE" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_searchManager" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="SANCTN_APPN_SE" type="STRING" size="256"/>
        </ColumnInfo>
        <Rows>
          <Row/>
        </Rows>
      </Dataset>
      <Dataset id="ds_sanctnStepCode" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="CODE" type="STRING" size="256"/>
          <Column id="CODE_NM" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_sanctnAppnSeCode" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="CODE" type="STRING" size="256"/>
          <Column id="CODE_NM" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_recomInfo" useclientlayout="true">
        <ColumnInfo>
          <Column id="INNER_SANCTN_ID" type="STRING" size="16"/>
          <Column id="INNER_SANCTN_MDL_ID" type="STRING" size="10"/>
          <Column id="SYS_SE_CODE" type="STRING" size="256"/>
          <Column id="JOB_SE" type="STRING" size="256"/>
          <Column id="LAST_SANCTN_STEP" type="STRING" size="256"/>
          <Column id="LAST_SANCTN_STTUS" type="STRING" size="256"/>
          <Column id="LAST_SANCTNER_ID" type="STRING" size="256"/>
          <Column id="LAST_SANCTN_DT" type="STRING" size="256"/>
          <Column id="FILE_SN" type="BIGDECIMAL" size="20"/>
          <Column id="AGNCY_SANCTNER_ID" type="STRING" size="256"/>
          <Column id="ABSNCE_AT" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_buttons" useclientlayout="true">
        <ColumnInfo>
          <Column id="INNER_SANCTN_ID" type="STRING" size="256"/>
          <Column id="INNER_SANCTN_SN" type="STRING" size="1"/>
          <Column id="SANCTN_STEP" type="STRING" size="1"/>
          <Column id="SANCTN_STTUS" type="STRING" size="1"/>
          <Column id="BTN_SAVE" type="STRING" size="256"/>
          <Column id="BTN_SANCTN_CALCEL" type="STRING" size="1"/>
          <Column id="BTN_RECOM" type="STRING" size="1"/>
          <Column id="BTN_RERECOM" type="STRING" size="1"/>
          <Column id="BTN_CONFRM" type="STRING" size="1"/>
          <Column id="BTN_RCEPT" type="STRING" size="1"/>
          <Column id="BTN_RETURN" type="STRING" size="1"/>
          <Column id="BTN_RESRVE" type="STRING" size="1"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_innerSanctnDtl" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false" oncolumnchanged="ds_innerSanctnDtls_oncolumnchanged">
        <ColumnInfo>
          <Column id="INNER_SANCTN_SN" type="BIGDECIMAL" size="256"/>
          <Column id="INNER_SANCTN_ID" type="STRING" size="256"/>
          <Column id="SANCTN_STEP" type="STRING" size="256"/>
          <Column id="SANCTN_STTUS" type="STRING" size="256"/>
          <Column id="SANCTNER_ID" type="STRING" size="256"/>
          <Column id="EMP_DEPT_NM" type="STRING" size="256"/>
          <Column id="EMPNM" type="STRING" size="256"/>
          <Column id="SANCTNER_DEPT_CD" type="STRING" size="256"/>
          <Column id="DEPT_NM" type="STRING" size="256"/>
          <Column id="AGNCY_SANCTNER_ID" type="STRING" size="256"/>
          <Column id="SANCTN_DT" type="STRING" size="256"/>
          <Column id="OPINION" type="STRING" size="256"/>
          <Column id="ABSNCE_AT" type="STRING" size="256"/>
          <Column id="FILE_SN" type="STRING" size="256"/>
          <Column id="INNER_SANCTN_MDL_ID" type="STRING" size="256"/>
          <Column id="SYS_SE_CODE" type="STRING" size="256"/>
          <Column id="JOB_SE" type="STRING" size="256"/>
          <Column id="SANCTN_APPN_SE" type="STRING" size="256"/>
          <Column id="SANCTN_SN" type="BIGDECIMAL" size="256"/>
          <Column id="RECOM_DEPT" type="STRING" size="256"/>
          <Column id="RECOM_EMPNO" type="STRING" size="256"/>
          <Column id="SANCTN_IMG" type="STRING" size="256"/>
          <Column id="REGISTER_ID" type="STRING" size="256"/>
          <Column id="REGIST_DT" type="STRING" size="256"/>
          <Column id="UPDUSR_ID" type="STRING" size="256"/>
          <Column id="UPDT_DT" type="STRING" size="256"/>
          <Column id="AGNCY_EMPNM" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_innerSanctner" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false" oncolumnchanged="ds_innerSanctnDtls_oncolumnchanged">
        <ColumnInfo>
          <Column id="INNER_SANCTN_ID" type="STRING" size="16"/>
          <Column id="SANCTN_SN" type="BIGDECIMAL" size="4"/>
          <Column id="SANCTN_STEP" type="STRING" size="3"/>
          <Column id="SANCTNER_DEPT_CD" type="STRING" size="6"/>
          <Column id="DEPT_NM" type="STRING" size="256"/>
          <Column id="SANCTNER_ID" type="STRING" size="12"/>
          <Column id="EMPNM" type="STRING" size="256"/>
          <Column id="EMP_DEPT_NM" type="STRING" size="256"/>
          <Column id="REGISTER_ID" type="STRING" size="12"/>
          <Column id="REGIST_DT" type="STRING" size="22"/>
          <Column id="UPDUSR_ID" type="STRING" size="12"/>
          <Column id="UPDT_DT" type="STRING" size="22"/>
          <Column id="INNER_SANCTN_MDL_ID" type="STRING" size="256"/>
          <Column id="SANCTN_APPN_SE" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_innerSanctnDtl_tmp" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="INNER_SANCTN_SN" type="BIGDECIMAL" size="256"/>
          <Column id="INNER_SANCTN_ID" type="STRING" size="256"/>
          <Column id="SANCTN_STEP" type="STRING" size="256"/>
          <Column id="SANCTN_STTUS" type="STRING" size="256"/>
          <Column id="SANCTNER_ID" type="STRING" size="256"/>
          <Column id="EMP_DEPT_NM" type="STRING" size="256"/>
          <Column id="EMPNM" type="STRING" size="256"/>
          <Column id="SANCTNER_DEPT_CD" type="STRING" size="256"/>
          <Column id="DEPT_NM" type="STRING" size="256"/>
          <Column id="AGNCY_SANCTNER_ID" type="STRING" size="256"/>
          <Column id="SANCTN_DT" type="STRING" size="256"/>
          <Column id="OPINION" type="STRING" size="256"/>
          <Column id="ABSNCE_AT" type="STRING" size="256"/>
          <Column id="FILE_SN" type="STRING" size="256"/>
          <Column id="INNER_SANCTN_MDL_ID" type="STRING" size="256"/>
          <Column id="SYS_SE_CODE" type="STRING" size="256"/>
          <Column id="JOB_SE" type="STRING" size="256"/>
          <Column id="SANCTN_APPN_SE" type="STRING" size="256"/>
          <Column id="SANCTN_SN" type="BIGDECIMAL" size="256"/>
          <Column id="RECOM_DEPT" type="STRING" size="256"/>
          <Column id="RECOM_EMPNO" type="STRING" size="256"/>
          <Column id="SANCTN_IMG" type="STRING" size="256"/>
          <Column id="REGISTER_ID" type="STRING" size="256"/>
          <Column id="REGIST_DT" type="STRING" size="256"/>
          <Column id="UPDUSR_ID" type="STRING" size="256"/>
          <Column id="UPDT_DT" type="STRING" size="256"/>
          <Column id="AGNCY_EMPNM" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_validation" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="compId" type="STRING" size="256"/>
          <Column id="colId" type="STRING" size="256"/>
          <Column id="PK" type="STRING" size="256"/>
          <Column id="notNull" type="STRING" size="256"/>
          <Column id="type" type="STRING" size="256"/>
          <Column id="nlength" type="STRING" size="256"/>
          <Column id="from" type="STRING" size="256"/>
          <Column id="to" type="STRING" size="256"/>
          <Column id="lengthChkGb" type="STRING" size="256"/>
          <Column id="msgId" type="STRING" size="256"/>
          <Column id="expr" type="STRING" size="256"/>
          <Column id="func" type="STRING" size="256"/>
        </ColumnInfo>
        <Rows>
          <Row>
            <Col id="compId">ds_innerSanctnMastr</Col>
            <Col id="colId">INNER_SANCTN_ID</Col>
            <Col id="notNull">Y</Col>
            <Col id="to"/>
            <Col id="msgId">결재ID</Col>
          </Row>
          <Row>
            <Col id="compId">ds_innerSanctnMastr</Col>
            <Col id="colId">INNER_SANCTN_MDL_ID</Col>
            <Col id="notNull">Y</Col>
            <Col id="msgId">결재모형</Col>
          </Row>
          <Row>
            <Col id="colId">SANCTN_SJ</Col>
            <Col id="notNull">Y</Col>
            <Col id="compId">ds_innerSanctnMastr</Col>
            <Col id="msgId">결재제목</Col>
          </Row>
          <Row>
            <Col id="compId">ds_recomInfo</Col>
            <Col id="colId">INNER_SANCTN_MDL_ID</Col>
            <Col id="notNull">Y</Col>
          </Row>
          <Row>
            <Col id="compId">ds_recomInfo</Col>
            <Col id="colId">SANCTN_SJ</Col>
            <Col id="notNull">Y</Col>
          </Row>
        </Rows>
      </Dataset>
      <Dataset id="ds_nextSanctner" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false" oncolumnchanged="ds_innerSanctnDtls_oncolumnchanged">
        <ColumnInfo>
          <Column id="INNER_SANCTN_ID" type="STRING" size="16"/>
          <Column id="SANCTN_SN" type="BIGDECIMAL" size="4"/>
          <Column id="SANCTN_STEP" type="STRING" size="3"/>
          <Column id="SANCTNER_DEPT_CD" type="STRING" size="6"/>
          <Column id="SANCTNER_ID" type="STRING" size="12"/>
          <Column id="SANCTN_SN2" type="BIGDECIMAL" size="4"/>
          <Column id="SANCTN_STEP2" type="STRING" size="3"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_fileList" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="CHK" type="STRING" size="256"/>
          <Column id="FILE_SN" type="BIGDECIMAL" size="20"/>
          <Column id="FILE_ORDR" type="INT" size="3"/>
          <Column id="FILE_STRE_COURS" type="STRING" size="2000"/>
          <Column id="STRE_FILE_NM" type="STRING" size="255"/>
          <Column id="ORGINL_FILE_NM" type="STRING" size="255"/>
          <Column id="FILE_EXTSN" type="STRING" size="20"/>
          <Column id="FILE_CN" type="STRING" size="4000"/>
          <Column id="FILE_MG" type="INT" size="8"/>
          <Column id="USE_AT" type="STRING" size="1"/>
          <Column id="FILE_ID" type="STRING" size="256"/>
          <Column id="SN" type="INT" size="5"/>
          <Column id="SYS_SE_CODE" type="STRING" size="6"/>
          <Column id="JOB_SE" type="STRING" size="3"/>
          <Column id="FILE_TY" type="STRING" size="256"/>
          <Column id="FILE_IMAGE" type="STRING" size="256"/>
          <Column id="PROGRS" type="INT" size="5"/>
          <Column id="TRNSMIS_FILE_SIZE" type="INT" size="256"/>
          <Column id="DELETE_IMAGE" type="STRING" size="256"/>
          <Column id="STTUS" type="STRING" size="256"/>
          <Column id="DEL_CAN" type="STRING" size="1"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_fileSn" firefirstcount="0" firenextcount="0" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false" useclientlayout="true">
        <ColumnInfo>
          <Column id="FILE_SN" type="BIGDECIMAL" size="20"/>
          <Column id="SYS_SE_CODE" type="STRING" size="6"/>
          <Column id="JOB_SE" type="STRING" size="3"/>
          <Column id="FILE_SN2" type="BIGDECIMAL" size="20"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_fileSn2" firefirstcount="0" firenextcount="0" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false" useclientlayout="true">
        <ColumnInfo>
          <Column id="FILE_SN" type="BIGDECIMAL" size="20"/>
          <Column id="SYS_SE_CODE" type="STRING" size="6"/>
          <Column id="JOB_SE" type="STRING" size="3"/>
        </ColumnInfo>
      </Dataset>
    </Objects>
    <Bind>
      <BindItem id="item0" compid="div_work.edt_sj" propid="value" datasetid="ds_innerSanctnMastr" columnid="SANCTN_SJ"/>
      <BindItem id="item1" compid="div_work.txt_opinion" propid="value" datasetid="ds_innerSanctnDtls" columnid="OPINION"/>
    </Bind>
    <Script type="xscript5.0"><![CDATA[/***********************************************************************
 * 화면ID   : SYM090200_P02
 * 화면명   : 내부결재 관리
 * 화면설명 : 내부결재함을 관리한다.
 * 작성일   : 2015.09.08
 * 작성자   : 정윤원
 * 수정이력 : 
 ***********************************************************************
 *     수정일     수정자   내용
 ***********************************************************************
 *
 ***********************************************************************
 */
  
/***********************************************************************
 * Script Include 
 ***********************************************************************/
// 시스템 공통 라이브러리 Include
include "lib::comInclude.xjs";
include "lib::comInnerSanct.xjs";
include "lib::comFile.xjs";
include "lib::comUpDownUtils.xjs";	// 메인화면 파일 업로드/다운로드 라이브러리

/***********************************************************************
 * 화면 변수 선언부
 ***********************************************************************/
this.fileSn;         // 파일첨부용
this.sysSe = "SYS";  // 시스템
this.jobSe = "ISM";  // 업무
this.fv_objForm;     // 
this.fv_param = "";
this.File_UpDownManager = null;
this.saveFlag = true;				//내부결재 저장여부 확인
 /***********************************************************************
 * onInit / onLoad 영역
 ***********************************************************************/
this.SYM090200_P02_oninit = function(obj:Form, e:nexacro.InitEventInfo)
{
	// Form 초기화
	this.fn_init_form();
	// DataSet 초기화
	this.fn_init_dataset();
	
	
}


this.SYM090200_P02_onload = function(obj:Form, e:nexacro.LoadEventInfo)
{
	this.fn_loadCombo();
	
	// 파일 메니저 설정
	var fileConfig = {
		useMultiUpload : true,
		onChange: this.fn_onFileSelected,	// 파일 선택 이벤트 핸들러
		onSuccess : this.fn_onFileSuccess	// 전송 성공 이벤트 핸들러
		//responseGrid : this.div_multiFile.grd_fileList,
		//responseArea : this.div_multiFile.sta_helpMessage
	};
	this.File_UpDownManager = new this.fileUpDownManager(this, "SYS", "ISM");
	this.File_UpDownManager.init(fileConfig);
	// 파일 업로드 초기화
	this.File_UpDownManager.cancelAllFile();
	
	this.fv_objForm = this.parent.arg_0;
    var v_dsSaction = this.parent.arg_1;
	// Main Form에서 넘겨준 Argument를 얻음
	this.ds_recomInfo.clearData();
	this.ds_recomInfo.copyData(v_dsSaction);
    this.fn_transaction("SANCTION_INFO");
    
    //첨부파일 버튼 설정
    this.fn_setAtchFileView();
    
    //첨부파일 조회
    this.fn_getFileList();
}



/***********************************************************************
 * Form/Dataset 오브젝트 초기화
 ***********************************************************************/
/*
 * 함수명  	: initForm
 * 설명 		: Form을 초기화한다.
 * params  		: None
 * return Type 	: None
 * 사용법		: this.initForm();
 */
this.fn_init_form = function()
{
	// 시스템 공통으로 Form을 Initialize 한다.
	this.gfn_initForm(this);
}

/*
 * 함수명  	: fn_init_dataset
 * 설명 		: Dataset을 초기화한다.
 *                주로, 조건 Dataset들(ds_cond, ds_cond_00, ds_cond_01, ...) 을 초기화한다.
 * params  		: None
 * return Type 	: None
 * 사용법		: this.fn_init_dataset();
 */
this.fn_init_dataset = function()
{
	// 조건에 사용되는 Dataset 초기화
	//this.gfn_initCondDs(this, this.div_search);
	//if(this.ds_cond00.rowcount == 0) this.ds_cond00.addRow();
}


/*
 * 함수명  	: fn_loadCombo
 * 설명 		: 화면의 Combo 에 데이터를 불러온다.
 * params  		: None
 * return Type 	: None
 * 사용법		: this.fn_loadCombo();
 */
this.fn_loadCombo = function ()
{
/*
params  		: 1. param_1    : 반환받을 DATASET 명 			(예: ds_comCode00)
                  2. param_2	: 그룹코드						(예 : COM007)
                  3. param_3	: 사용여부		    			(예 : 1(사용), ""(사용안함))
                  4. param_4	: 콤보박스INDEX(0) 표시		(예 : "전체", "선택", " "(공백), ""(첫번째데이터부터시작) )
*/
	var comboParams = [
		    ["ds_sanctnSttusCode", "COM032", "1", "전체"]   // 결재상태
		  , ["ds_sanctnStepCode", "COM028", "1", "전체"]   // 결재단계
		  , ["ds_sanctnAppnSeCode", "COM029", "1", "전체"]   // 내부결재지정구분
		];
	this.gfn_comboLoad(comboParams, this.fn_callbackAfter);
	this.fn_loadDeptCombo();	
}

/*
       * 함수명  	: fn_loadComboNonCodeTbl
       * 설명 		: 화면의 Combo 에 데이터를 불러온다.
       * params  		: strDs - Data를 담아올 dataset 명
       *                obj - Click된 Combo Component
       *                ※ 위 Argument가 사용되면 함수는 해당되는 건만 찾아서 데이터를 가져온다.
       *                   전체 Combo의 데이터를 가져오려고 한다면, 생략하면 된다. 예 : this.fn_loadComboNonCodeTbl();
       * return Type 	: None
       * 사용법		: this.fn_loadComboNonCodeTbl();
       */
this.fn_loadDeptCombo = function (strDs, obj)
{
      /*
      params  		: 1. param_1    : 반환받을 DATASET 명 			(예 : ds_comCode00)
                        2. param_2	: 조건 Dataset	명				(예 : "ds_condCombo00")
                        3. param_3	: 사용여부		    			(예 : 1(사용), ""(사용안함))
                        4. param_4	: 콤보박스INDEX(0) 표시		(예 : "전체", "선택", " "(공백), ""(첫번째데이터부터시작) )
                        5. param_5	: Service URL (Controller)
                        6. param_6	: Combo Level (Combo 간 계층구조가 있을 경우, 해당 레벨을 표시한다.)
      */
        if(this.ds_searchDept.getRowCount() == 0) this.ds_searchDept.addRow();
        this.ds_searchDept.setColumn(0, "USE_AT", "1");
      	var comboParams = [
      			["ds_deptCode", "ds_searchDept", "", "전체", "hsco/com/sym/cdm/deptCode/selectDeptCode.do", 1],
      			["ds_managerCode", "ds_searchManager", "", "전체", "hsco/com/sym/ism/SYM090200/DeptManagerList.do", 1],
      			["ds_plCode", "ds_searchManager", "", "전체", "hsco/com/sym/ism/SYM090200/PlList.do", 1]
      		];
      
      	this.gfn_comboLoadNonCodeTbl(comboParams, this.fn_callbackAfter, strDs, obj);
}



/***********************************************************************
* Transaction 영역 시작
************************************************************************/

/***********************************************************************
 * Transaction 관련 이벤트 핸들러 
 **********************************************************************/


/*
 * 함수명  	: btn_save_onclick
 * 설명 		: 화면의 Combo 에 데이터를 불러온다.
 * params  		: None
 * return Type 	: None
 * 사용법		: this.btn_save_onclick();
 */
this.btn_save_onclick = function(obj:Button,  e:nexacro.ClickEventInfo)
{
    if (!this.checkTerm()) return;
    //this.checkTerm();
    
	var step = "S1";
	var sttus = "S01";
	var strFilter = "SANCTN_STEP=='" + step +"'";
	
	var fRow = this.ds_innerSanctner.findRowExpr(strFilter);
	var sanctnerId = "";
	if(fRow > -1){
	    sanctnerId = this.ds_innerSanctner.getColumn(fRow, "SANCTNER_ID");
	    this.ds_innerSanctnMastr.setColumn(0, "DEPT_CODE", this.ds_innerSanctner.getColumn(fRow, "SANCTNER_DEPT_CD"));
	}
	if(sanctnerId != application.gv_empno){
	    // 기안 권한이 업습니다.
	    return;
	}
	this.ds_innerSanctnDtl.setColumn(0, "SANCTN_STTUS", sttus);
	this.ds_innerSanctnMastr.setColumn(0, "LAST_SANCTN_STTUS", sttus);
	this.ds_innerSanctnMastr.setColumn(0, "NEXT_SANCTN_STEP", "S2");
	this.ds_innerSanctnMastr.setColumn(0, "UPDT_DT", "1111");
	this.ds_innerSanctnMastr.setRowType(0, 'U');


    //첨부파일
    //FileSN 생성
    this.fn_getSanctnFileSn();
    //첨부파일 업로드
    this.fn_uploadFiles();
    //첨부파일 종료
    
	this.fn_transaction("DTFT");
	
}

this.fn_setSanctionDtlUpdated = function(strFilter, step, sttus){
    var fRow = this.ds_innerSanctnDtls.findRowExpr(strFilter);
	if(fRow > -1) {
	    if(this.ds_innerSanctnDtl.getRowCount() == 0){
	        this.ds_innerSanctnDtl.addRow();
	        this.ds_innerSanctnDtl.applyChange();
	    }
	    this.ds_innerSanctnDtl.setColumn(0, "INNER_SANCTN_SN", this.ds_innerSanctnDtls.getColumn(fRow, "INNER_SANCTN_SN"));
	    this.ds_innerSanctnDtl.setColumn(0, "INNER_SANCTN_ID", this.ds_innerSanctnDtls.getColumn(fRow, "INNER_SANCTN_ID"));
	    this.ds_innerSanctnDtl.setColumn(0, "SANCTN_SN", this.ds_innerSanctnDtls.getColumn(fRow, "SANCTN_SN"));
	    this.ds_innerSanctnDtl.setColumn(0, "SANCTN_STEP", step);
	    this.ds_innerSanctnDtl.setColumn(0, "SANCTN_STTUS", sttus);
	    this.ds_innerSanctnDtl.setColumn(0, "SANCTNER_ID", this.ds_innerSanctnDtls.getColumn(fRow, "SANCTNER_ID"));
	    this.ds_innerSanctnDtl.setColumn(0, "AGNCY_SANCTNER_ID", this.ds_innerSanctnDtls.getColumn(fRow, "AGNCY_SANCTNER_ID"));
	    this.ds_innerSanctnDtl.setColumn(0, "SANCTN_DT", this.ds_innerSanctnDtls.getColumn(fRow, "SANCTN_DT"));
	    this.ds_innerSanctnDtl.setColumn(0, "OPINION", this.txt_opinion.value);
	    this.ds_innerSanctnDtl.setColumn(0, "ABSNCE_AT", this.ds_innerSanctnDtls.getColumn(fRow, "ABSNCE_AT"));
	    this.ds_innerSanctnDtl.setColumn(0, "REGISTER_ID", this.ds_innerSanctnDtls.getColumn(fRow, "REGISTER_ID"));
	    this.ds_innerSanctnDtl.setColumn(0, "REGIST_DT", this.ds_innerSanctnDtls.getColumn(fRow, "REGIST_DT"));
	    this.ds_innerSanctnDtl.setColumn(0, "UPDUSR_ID", this.ds_innerSanctnDtls.getColumn(fRow, "UPDUSR_ID"));
	    this.ds_innerSanctnDtl.setColumn(0, "UPDT_DT", this.ds_innerSanctnDtls.getColumn(fRow, "UPDT_DT"));
	    
	}
}



this.fn_changeDtlSttus = function(sttus){
	this.ds_innerSanctnDtl.setColumn(0, "SANCTN_STTUS", sttus);
	this.ds_innerSanctnDtl.setColumn(0, "OPINION", this.txt_opinion.value);
}

    
this.fn_SanctionDtlAdding = function(nxtSanctnSn, step, sttus, nxtStep, nxtSttus, clearYn){
	    
        this.ds_innerSanctnMastr.setColumn(0, "LAST_SANCTN_STEP", nxtStep);
        this.ds_innerSanctnMastr.setColumn(0, "LAST_SANCTN_STTUS", nxtSttus);
        var nextStep = this.ds_nextSanctner.getColumn(0, "SANCTN_STEP");
        var nextId = this.ds_nextSanctner.getColumn(0, "SANCTNER_ID");
        if(nxtSttus == "T12" || nxtSttus == "T16" || nxtSttus == "S02" || nxtSttus == "T07" || nxtSttus == "T11" || nxtSttus == "T15") {
            this.ds_innerSanctnMastr.setColumn(0, "NEXT_SANCTN_STEP", "");
            this.ds_innerSanctnMastr.setColumn(0, "NEXT_SANCTNER_ID", "");
        } else {
            this.ds_innerSanctnMastr.setColumn(0, "NEXT_SANCTNER_ID", nextId);
            this.ds_innerSanctnMastr.setColumn(0, "NEXT_SANCTN_STEP", nextStep);
        }
        
	    this.ds_innerSanctnMastr.setRowType(0, 'U');
	    
	    

	    
	    if(clearYn == "Y") this.ds_innerSanctnDtl.clearData();
	    var nRow = this.ds_innerSanctnDtl.addRow();
	        
	        //var nRow = this.fn_copyRowWith_ROWTYPE_INSERT(this.ds_innerSanctnDtl_tmp, fRow, this.ds_innerSanctnDtl);
	    var sanctnId = this.ds_innerSanctnMastr.getColumn(0, "INNER_SANCTN_ID");
	    this.ds_innerSanctnDtl.setColumn(nRow, "INNER_SANCTN_ID", sanctnId);
	    this.ds_innerSanctnDtl.setColumn(nRow, "SANCTN_STEP", step);
	    this.ds_innerSanctnDtl.setColumn(nRow, "SANCTN_STTUS", sttus);

	    
	    //현재 결재자로직(부재자 로직 없음)
	    //this.ds_innerSanctnDtl.setColumn(nRow, "SANCTNER_ID", application.gv_userId);
	    //부재자 로직
	    var absnceAt = this.ds_recomInfo.getColumn(0, "ABSNCE_AT");
	    var agencyId = this.ds_recomInfo.getColumn(0, "AGCNY_SANCTNER_ID");
	    
	    if (!this.comUtils.isNullEmpty(absnceAt) && (absnceAt == '1') && !this.comUtils.isNullEmpty(agencyId) && (application.gv_userId == agencyId)) {
			this.ds_innerSanctnDtl.setColumn(nRow, "AGCNY_SANCTNER_ID", application.gv_userId);
			this.ds_innerSanctnDtl.setColumn(nRow, "SANCTNER_ID", this.ds_nextSanctner.getColumn(0, "SANCTNER_ID"));
			this.ds_innerSanctnDtl.setColumn(nRow, "ABSNCE_AT", "1");
		} else {
			this.ds_innerSanctnDtl.setColumn(nRow, "SANCTNER_ID", application.gv_userId);
			this.ds_innerSanctnDtl.setColumn(nRow, "ABSNCE_AT", "0");
		}
	    
		

	    this.ds_innerSanctnDtl.setColumn(nRow, "OPINION", this.txt_opinion.value);
	    //var strFilter = "SANCTN_STEP='" + step + "'";
	    var strFilter = "SANCTN_STEP=='" + step + "'" + " && SANCTN_SN=='" +nxtSanctnSn + "'";
	    var fRow = this.ds_innerSanctner.findRowExpr(strFilter);
	    if(fRow > -1) {
	        nxtSanctnSn = this.ds_nextSanctner.getColumn(0, "SANCTN_SN"); 
	        this.ds_innerSanctnDtl.setColumn(nRow, "SANCTN_SN", nxtSanctnSn);
	    }
	    this.fn_transaction("SAVE");
}




// 취소처리
this.btn_recomCancel_onclick = function(obj:Button,  e:nexacro.ClickEventInfo)
{
	this.fn_recomCancel();
}

// 취소처리
this.fn_recomCancel = function(){
//     if(!this.gfn_checkValidation(this.ds_innerSanctnMastr, this.ds_validation)) {
// 		return;
// 	}
    var currStep = this.ds_innerSanctnMastr.getColumn(0, "LAST_SANCTN_STEP");
    var currSttus = this.ds_innerSanctnMastr.getColumn(0, "LAST_SANCTN_STTUS");  // 최종 결재 상태
    var nextSanctnSn = this.ds_nextSanctner.getColumn(0, "SANCTN_SN"); // 다음결재순번
    if(currStep == "S1" && currSttus == "S01") {  // 기안 취소할 경우[기안(S1), 기안작업중(T01)]
	    var nxtSttus = "S02";
	    this.fn_setCancelDrft(currStep, nxtSttus); // S2 S02
	    
    } else if(currStep == "S2" && (currSttus == "T03" || currSttus == "T04")) {  // 상신취소할 경우
	    var nxtSttus = "T05"; // 상신취소
	    var strFilter = "SANCTN_STEP=='" + currSttus +"'";	    
	    this.fn_SanctionDtlAdding(nextSanctnSn, currStep, nxtSttus, currStep, nxtSttus, "Y");  // S2  T05
    } else if(currStep == "S7" && currSttus == "T13") {  // 통보 취소할 경우
	    var nxtSttus = "T14";
	    var strFilter = "SANCTN_STEP=='" + currSttus +"'";
	    this.fn_SanctionDtlAdding(nextSanctnSn, currStep, nxtSttus, currStep, nxtSttus,"Y"); // S7 T14
    } else {
       trace("취소 케이스 없음");
    }
}

this.fn_setCancelDrft = function(step, sttus){
    this.ds_innerSanctnMastr.setColumn(0, "LAST_SANCTN_STEP", step);
    this.ds_innerSanctnMastr.setColumn(0, "LAST_SANCTN_STTUS", sttus);
	this.ds_innerSanctnMastr.setRowType(0, 'U');
	this.ds_innerSanctnDtl.setColumn(0, "SANCTN_STEP", step);
	this.ds_innerSanctnDtl.setColumn(0, "SANCTN_STTUS", sttus);
	this.ds_innerSanctnDtl.setColumn(0, "OPINION", this.txt_opinion.value);
	this.ds_innerSanctnDtl.setRowType(0, 'U');
	this.fn_transaction("SAVE");
}
// 상신처리
this.btn_recom_onclick = function(obj:Button,  e:nexacro.ClickEventInfo)
{
	this.fn_recom();
}
// 상신처리
this.fn_recom = function(){
    if (!this.checkTerm()) return;
    //this.checkTerm();
    
    var currStep = this.ds_innerSanctnMastr.getColumn(0, "LAST_SANCTN_STEP");
    var currSttus = this.ds_innerSanctnMastr.getColumn(0, "LAST_SANCTN_STTUS");  // 최종 결재 상태
    var nxtStep = this.ds_nextSanctner.getColumn(0, "SANCTN_STEP"); // 다음 결재 단계
    var nextSanctionerId = this.ds_nextSanctner.getColumn(0, "SANCTNER_ID"); // 다음 결재 결재자id
    var nextSanctnSn = this.ds_nextSanctner.getColumn(0, "SANCTN_SN"); // 다음결재순번
    
    if(currStep == "" || currStep == null || currStep == undefined){
        // 기안 저장 후 상신하십시오.
    } else if((currStep == "S1" || currStep == "S2") && currSttus == "S01") {
        //상신 가능
	    var nxtSttus = "T04";
	    if(currStep == "S2") nxtStep = "S2";
	    if(nxtStep == "S5" || nxtStep == "S6") nxtSttus = "T09";
	    if(nxtStep == "S7") nxtSttus = "T13";  // 접수대기
	    var strFilter = "SANCTN_STEP=='" + nxtStep +"'";
	
	    this.fn_changeDtlSttus("S03"); //기안완료
	    
	    //첨부파일
		//FileSN 생성
		this.fn_getSanctnFileSn();
		//첨부파일 업로드
		this.fn_uploadFiles();
		//첨부파일 종료
		
	    this.fn_SanctionDtlAdding(nextSanctnSn, nxtStep, "T04", nxtStep, nxtSttus, "");  // S2 S7 T03 T04
	    
//         this.ds_innerSanctnMastr.setColumn(0, "LAST_SANCTN_STEP", step);
//         this.ds_innerSanctnMastr.setColumn(0, "LAST_SANCTN_STTUS", "T04");
// 	    this.ds_innerSanctnMastr.setRowType(0, 'U');
// 	    var strFilter = "SANCTN_STEP=='" + step + "'";
// 	    var fRow = this.ds_innerSanctnDtls.findRowExpr(strFilter);
// 	    if(fRow > -1) {
// 	        this.fn_copyRowWith_ROWTYPE_INSERT(this.ds_innerSanctnDtls, fRow, this.ds_innerSanctnDtl);
// 	        this.ds_innerSanctnDtl.setColumn(0, "SANCTN_STTUS", sttus);
// 	        this.fn_transaction("SAVE");
// 	    }
	    
    } else {
        // info 상신불가

    }
}
// 재상신
this.btn_reRecom_onclick = function(obj:Button,  e:nexacro.ClickEventInfo)
{
	//this.reRecom();  // 기능 추가는 보류중.
}

this.reRecom = function(){
    var currStep = this.ds_innerSanctnMastr.getColumn(0, "LAST_SANCTN_STEP");
    var currSttus = this.ds_innerSanctnMastr.getColumn(0, "LAST_SANCTN_STTUS");  // 최종 결재 상태
    var nextStep = "S2";
    
    
} 


// 승인처리
this.btn_confn_onclick = function(obj:Button,  e:nexacro.ClickEventInfo)
{
	this.fn_confn();
}

this.fn_confn = function(){
    /*
    this.checkTerm();
    
    var currStep = this.ds_innerSanctnMastr.getColumn(0, "LAST_SANCTN_STEP");
    var currSttus = this.ds_innerSanctnMastr.getColumn(0, "LAST_SANCTN_STTUS");  // 최종 결재 상태
    var nxtStep = this.ds_nextSanctner.getColumn(0, "SANCTN_STEP"); // 다음 결재 단계
    var nextSanctionerId = this.ds_nextSanctner.getColumn(0, "SANCTNER_ID"); // 다음 결재 결재자id
    var nextSanctnSn = this.ds_nextSanctner.getColumn(0, "SANCTN_SN"); // 다음결재순번
   
    this.ds_innerSanctnMastr.setColumn(0, "NEXT_SANCTNER_ID", nextSanctionerId);
    if(currStep == "S2" && currSttus == "T04") {  // 중결재 대기 상태
        //중결 승인 가능
	    var nxtSttus = "T09"; // 전결 대기
	    var dtlSttus = "T08";
	    if(nxtStep == "S5" || nxtStep == "S6")  nxtSttus = "T12";
	    if(nxtStep == "S5" || nxtStep == "S6") dtlSttus = "T12";
	    var strFilter = "SANCTN_STEP=='" + nxtStep +"'";     
	    
	    this.fn_SanctionDtlAdding(nextSanctnSn, nxtStep, dtlSttus, nxtStep, nxtSttus, "Y");  // T08 중결 완료  S3 S4 T08 T09
    } else if((currStep == "S3" || currStep == "S4")&& currSttus == "T06") {  // 중결 보류 상태 
        //중결 승인 가능
	    var nxtSttus = "T09";
	    var strFilter = "SANCTN_STEP=='" + nxtStep +"'";
	    
	    this.fn_SanctionDtlAdding(nextSanctnSn, currStep, "T08", currStep, nxtSttus, "Y");  //S3 S4  T08 T09
    } else if((currStep == "S3" || currStep == "S4") && currSttus == "T09") {  // 전결 대기 상태 
        //전결 승인 가능
	    var nxtSttus = "T12";
	    var strFilter = "SANCTN_STEP=='" + nxtStep +"'";
	    this.fn_SanctionDtlAdding(nextSanctnSn, nxtStep, nxtSttus, nxtStep, nxtSttus, "Y");  // S5 S6 T12  
    } else if((currStep == "S5" || currStep == "S6")&& currSttus == "T10") {  // 전결 보류 상태
        //전결 승인 가능
	    var nxtSttus = "T12";  // 전결 완료
	    var strFilter = "SANCTN_STEP=='" + currStep +"'"; 
	    
	    this.fn_changeDtlSttus(nxtSttus);  // S5 S6 T12
	    
	    this.ds_innerSanctnMastr.setColumn(0, "LAST_SANCTN_STEP", currStep);
        this.ds_innerSanctnMastr.setColumn(0, "LAST_SANCTN_STTUS", nxtSttus);
        this.ds_innerSanctnMastr.setColumn(0, "NEXT_SANCTN_STEP", "");
	    this.ds_innerSanctnMastr.setRowType(0, 'U');
	    this.fn_transaction("SAVE");
	    
    } else {
        // 승인처리 대상 아님.
    }
    */	//중결이 1번되는 것을 수정함
    
    //if (!this.checkTerm()) return;
    //this.checkTerm();
    
    var currStep = this.ds_innerSanctnMastr.getColumn(0, "LAST_SANCTN_STEP");
    var currSttus = this.ds_innerSanctnMastr.getColumn(0, "LAST_SANCTN_STTUS");  // 최종 결재 상태
    var nxtStep = this.ds_nextSanctner.getColumn(0, "SANCTN_STEP"); // 다음 결재 단계
    var nextSanctionerId = this.ds_nextSanctner.getColumn(0, "SANCTNER_ID"); // 다음 결재 결재자id
    var nextSanctnSn = this.ds_nextSanctner.getColumn(0, "SANCTN_SN"); 	// 다음결재순번
    var nxtStep2 = this.ds_nextSanctner.getColumn(0, "SANCTN_STEP2");	//다음다음 결재단계 (중결 확인용)
    var nextSanctnSn2 = this.ds_nextSanctner.getColumn(0, "SANCTN_SN2"); //다음다음 결재순번 (중결 확인용)
     
   
    this.ds_innerSanctnMastr.setColumn(0, "NEXT_SANCTNER_ID", nextSanctionerId);
    if((currStep == "S2" || currStep == "S4") && currSttus == "T04") {  // 중결재 대기 상태
        //중결 승인 가능
	    var nxtSttus;
	    var dtlSttus;
	    
	    //다음다음결재단계 확인
	    if (nxtStep2 == "S4") {		//다음다음결재단계(현재처리할단계의 다음)이 중결재이면 상태는 중결대기, 내역은 중결완료
			nxtSttus = "T04";
			dtlSttus = "T08"; // 중결재완료
	    } else {
			nxtSttus = "T09"; // 전결 대기
			dtlSttus = "T08"; // 중결재완료
		}
	    if(nxtStep == "S5" || nxtStep == "S6")  nxtSttus = "T12";
	    if(nxtStep == "S5" || nxtStep == "S6") dtlSttus = "T12";
	    var strFilter = "SANCTN_STEP=='" + nxtStep +"'";     
	    
	    this.fn_SanctionDtlAdding(nextSanctnSn, nxtStep, dtlSttus, nxtStep, nxtSttus, "Y");  // T08 중결 완료  S3 S4 T08 T09
    } else if((currStep == "S3" || currStep == "S4")&& currSttus == "T06") {  // 중결 보류 상태 
        //중결 승인 가능
	    var nxtSttus = "T09";
	    var strFilter = "SANCTN_STEP=='" + nxtStep +"'";
	    
	    this.fn_SanctionDtlAdding(nextSanctnSn, currStep, "T08", currStep, nxtSttus, "Y");  //S3 S4  T08 T09
    } else if((currStep == "S3" || currStep == "S4") && currSttus == "T09") {  // 전결 대기 상태 
        //전결 승인 가능
	    var nxtSttus = "T12";
	    var strFilter = "SANCTN_STEP=='" + nxtStep +"'";
	    this.fn_SanctionDtlAdding(nextSanctnSn, nxtStep, nxtSttus, nxtStep, nxtSttus, "Y");  // S5 S6 T12  
    } else if((currStep == "S5" || currStep == "S6")&& currSttus == "T10") {  // 전결 보류 상태
        //전결 승인 가능
	    var nxtSttus = "T12";  // 전결 완료
	    var strFilter = "SANCTN_STEP=='" + currStep +"'"; 
	    
	    this.fn_changeDtlSttus(nxtSttus);  // S5 S6 T12
	    
	    this.ds_innerSanctnMastr.setColumn(0, "LAST_SANCTN_STEP", currStep);
        this.ds_innerSanctnMastr.setColumn(0, "LAST_SANCTN_STTUS", nxtSttus);
        this.ds_innerSanctnMastr.setColumn(0, "NEXT_SANCTN_STEP", "");
	    this.ds_innerSanctnMastr.setRowType(0, 'U');
	    this.fn_transaction("SAVE");
	    
    } else {
        // 승인처리 대상 아님.
    }
}



// 접수처리
this.btn_rcept_onclick = function(obj:Button,  e:nexacro.ClickEventInfo)
{
	this.fn_rcept();
}

this.fn_rcept = function(){
//     if(!this.gfn_checkValidation(this.ds_innerSanctnMastr, this.ds_validation)) {
// 		return;
// 	}
    var currStep = this.ds_innerSanctnMastr.getColumn(0, "LAST_SANCTN_STEP");
    var currSttus = this.ds_innerSanctnMastr.getColumn(0, "LAST_SANCTN_STTUS");  // 최종 결재 상태
    var nxtStep = this.ds_nextSanctner.getColumn(0, "SANCTN_STEP"); // 다음 결재 단계
    var nextSanctionerId = this.ds_nextSanctner.getColumn(0, "SANCTNER_ID"); // 다음 결재 결재자id
    var nextSanctnSn = this.ds_nextSanctner.getColumn(0, "SANCTN_SN"); // 다음결재순번
    if(currStep == "S7" && currSttus == "T13") {
	    var sttus = "T16";
	    var strFilter = "SANCTN_STEP=='" + step +"'";
	    this.fn_changeDtlSttus(sttus); //접수완료
	    this.ds_innerSanctnDtl.setColumn(0, "SANCTNER_ID", nextSanctionerId);
	    
	    this.ds_innerSanctnMastr.setColumn(0, "LAST_SANCTN_STEP", currStep);
        this.ds_innerSanctnMastr.setColumn(0, "LAST_SANCTN_STTUS", sttus);
        this.ds_innerSanctnMastr.setColumn(0, "NEXT_SANCTN_STEP", "");
        this.ds_innerSanctnMastr.setColumn(0, "NEXT_SANCTNER_ID", "");
	    this.ds_innerSanctnMastr.setRowType(0, 'U');
	    this.fn_transaction("SAVE");
    }
    
}

this.btn_return_onclick = function(obj:Button,  e:nexacro.ClickEventInfo)
{
	this.fn_return();
}




this.fn_return = function(){
//     if(!this.gfn_checkValidation(this.ds_innerSanctnMastr, this.ds_validation)) {
// 		return;
// 	}
    var currStep = this.ds_innerSanctnMastr.getColumn(0, "LAST_SANCTN_STEP");
    var currSttus = this.ds_innerSanctnMastr.getColumn(0, "LAST_SANCTN_STTUS");  // 최종 결재 상태
    var nxtStep = this.ds_nextSanctner.getColumn(0, "SANCTN_STEP"); // 다음 결재 단계
    var nextSanctionerId = this.ds_nextSanctner.getColumn(0, "SANCTNER_ID"); // 다음 결재 결재자id
    this.ds_innerSanctnMastr.setColumn(0, "NEXT_SANCTNER_ID", nextSanctionerId);
    var nextSanctnSn = this.ds_nextSanctner.getColumn(0, "SANCTN_SN"); // 다음결재순번
    
    if(currStep == "S2" && currSttus == "T04") {  // 중결대기
        // 반려 가능(상신 반려)
	    var nxtSttus = "T07"; // 중결재 반려
	    var strFilter = "SANCTN_STEP=='" + nxtStep +"'";
	    
	    this.fn_SanctionDtlAdding(nextSanctnSn, nxtStep, nxtSttus, nxtStep, nxtSttus, "Y"); 
	    
    } else if((currStep == "S3" || currStep == "S4") && currSttus == "T06") { // 중결재 보류 상태
        //반려 가능(중결단계)

	    var nxtSttus = "T07"; // 중결재 반려
	    var strFilter = "SANCTN_STEP=='" + currStep +"'";
	    
	    this.fn_changeDtlSttus(nxtSttus);  // S5 S6 T07
	    
	    this.ds_innerSanctnMastr.setColumn(0, "LAST_SANCTN_STEP", currStep);
        this.ds_innerSanctnMastr.setColumn(0, "LAST_SANCTN_STTUS", nxtSttus);
        this.ds_innerSanctnMastr.setColumn(0, "NEXT_SANCTN_STEP", "");
	    this.ds_innerSanctnMastr.setRowType(0, 'U');
	    this.fn_transaction("SAVE");

    } else if((currStep == "S3" || currStep == "S4") && currSttus == "T09") { // 전결대기
	    var nxtSttus = "T11";  // 전결 반려
	    var strFilter = "SANCTN_STEP=='" + nxtStep +"'";
	
        this.fn_SanctionDtlAdding(nextSanctnSn, nxtStep, nxtSttus, nxtStep, nxtSttus, "Y"); 
	    
    } else if((currStep == "S5" || currStep == "S6") && currSttus == "T10") { // 전결 보류 상태
	    var nxtSttus = "T11";  // 전결 반려
	    var strFilter = "SANCTN_STEP=='" + currStep +"'";
	
	    this.fn_changeDtlSttus(nxtSttus);  // S5 S6 T07
	    
	    this.ds_innerSanctnMastr.setColumn(0, "LAST_SANCTN_STEP", currStep);
        this.ds_innerSanctnMastr.setColumn(0, "LAST_SANCTN_STTUS", nxtSttus);
        this.ds_innerSanctnMastr.setColumn(0, "NEXT_SANCTN_STEP", "");
	    this.ds_innerSanctnMastr.setRowType(0, 'U');
	    this.fn_transaction("SAVE");
        
	    
    } else {
        // 반려 불가
    }
}


// 보류 처리
this.btn_resrve_onclick = function(obj:Button,  e:nexacro.ClickEventInfo)
{
	this.fn_resrve();
}

this.fn_resrve = function(){
//     if(!this.gfn_checkValidation(this.ds_innerSanctnMastr, this.ds_validation)) {
// 		return;
// 	}
    var currStep = this.ds_innerSanctnMastr.getColumn(0, "LAST_SANCTN_STEP");
    var currSttus = this.ds_innerSanctnMastr.getColumn(0, "LAST_SANCTN_STTUS");  // 최종 결재 상태
    var nxtStep = this.ds_nextSanctner.getColumn(0, "SANCTN_STEP"); // 다음 결재 단계
    var nextSanctionerId = this.ds_nextSanctner.getColumn(0, "SANCTNER_ID"); // 다음 결재 결재자id
    var nextSanctnSn = this.ds_nextSanctner.getColumn(0, "SANCTN_SN"); // 다음결재순번
    this.ds_innerSanctnMastr.setColumn(0, "NEXT_SANCTNER_ID", nextSanctionerId);
    if(currStep == "S2" && currSttus == "T04") { // 중결재 대기
        // 보류 가능(중결 보류)
	    var nxtSttus = "T06";
	    var strFilter = "SANCTN_STEP=='" + nxtStep +"'";    
	    this.fn_SanctionDtlAdding(nextSanctnSn, nxtStep, nxtSttus, nxtStep, nxtSttus, "Y"); 
	    
    } else if((currStep == "S3" || currStep == "S4") && currSttus == "T09") {
        // 전결보류
	    var nxtSttus = "T10";
	    var strFilter = "SANCTN_STEP=='" + nxtStep +"'";
        this.fn_SanctionDtlAdding(nextSanctnSn, nxtStep, nxtSttus, nxtStep, nxtSttus, "Y"); 
    }
}

/*
 * 함수명  	: fn_search
 * 설명 		: 전자결재현황 조회 이벤트 처리
 * params  		: None
 * return Type 	: None
 * 사용법		: this.fn_search();
 */
this.fn_search = function()
{
 	// Validation 체크
// 	if(!this.gfn_checkValidation(this.div_work, this.ds_validation)) {
// 		return;
// 	}
	// Clear Datasets
	//this.ds_innerSanctnMastr.clearData();
	
	this.fn_transaction("InnerSanctionDrft");
}
 




/*
 * 함수명  	: fn_transaction
 * 설명 		: Transaction 요청 처리 함수
 * params  		: strSvcId : 서비스요청 ID
 * return Type 	: None
 * 사용법		: this.fn_transaction("SELECT");
 */
this.fn_transaction = function(strSvcId)
{
	var argument     = "";
	var callbackFunc = "fn_callBack";
	var showProgress = true;
	var bAsync       = true;
	
	switch (strSvcId) {
	    case "SANCTION_INFO":
	        var sController   	= "hsco/com/sym/ism/SYM090200/InnerSanctionInfo.do";	
			var sInDatasets   	= "input1=ds_recomInfo";
			var sOutDatasets  	= "ds_buttons=output1 ds_innerSanctnMastr=output2 ds_innerSanctnDtls=output3 ds_sanctionRptParam=output4 ds_rptParamInfo=output5 ds_innerSanctnDtl=output6 ds_innerSanctner=output7 ds_nextSanctner=output8";
			bAsync = false;
	        break;
		case "DTFT":	// 기안(최초 저장)
		    this.ds_innerSanctnMastr.setColumn(0, "JOB_KEY", this.ds_recomInfo.getColumn(0, "JOB_KEY"));
		    var sController   	= "hsco/com/sym/ism/SYM090200/saveDrft.do";
			var sInDatasets   	= "";
			if(this.ds_innerSanctnDtls.getRowCount() < 2 && this.ds_innerSanctnDtls.getColumn(0,"SANCTN_STTUS") == "S00"){
			    sInDatasets = "input1=ds_innerSanctnMastr:U input2=ds_innerSanctner input3=ds_innerSanctnDtl:U input4=ds_sanctionRptParam input5=ds_rptParamInfo:U";
			} else {
			    sInDatasets = "input1=ds_innerSanctnMastr:U input2=ds_innerSanctner:U input3=ds_innerSanctnDtl:U input4=ds_sanctionRptParam input5=ds_rptParamInfo:U";
			}
			var sOutDatasets  	= "ds_buttons=output1 ds_innerSanctnMastr=output2 ds_innerSanctnDtls=output3 ds_sanctionRptParam=output4 ds_rptParamInfo=output5 ds_innerSanctnDtl=output6 ds_innerSanctner=output7 ds_nextSanctner=output8";
		    break;

		case "SAVE":	// 상신,승인
		    this.ds_innerSanctnMastr.setColumn(0, "JOB_KEY", this.ds_recomInfo.getColumn(0, "JOB_KEY"));
			var sController   	= "hsco/com/sym/ism/SYM090200/saveDrft.do";
			var sInDatasets   	= "input1=ds_innerSanctnMastr:U input2=ds_innerSanctner:U input3=ds_innerSanctnDtl:U input4=ds_sanctionRptParam input5=ds_rptParamInfo:U";
			var sOutDatasets  	= "ds_buttons=output1 ds_innerSanctnMastr=output2 ds_innerSanctnDtls=output3 ds_sanctionRptParam=output4 ds_rptParamInfo=output5 ds_innerSanctnDtl=output6 ds_innerSanctner=output7 ds_nextSanctner=output8";
			break;
			
		//첨부파일 관련 Transaction
		case "GetFileSn": // 파일일련번호 조회
			var sController   	= "hsco/cmm/file/getFileSn.do";
			var sInDatasets   	= "";
			var sOutDatasets  	= "ds_fileSn2=output_fsn";
			bAsync = false;
			break;
		case "deleteFiles" :  // 다건 선택 파일 삭제
		    var sController   	= "hsco/cmm/file/deleteFile.do";	
			var sInDatasets   	= "input1=ds_fileList:U";
			var sOutDatasets  	= "ds_fileList=output1";
		    break;
		case "sancSelectAtchmnFileList" :	// 다건 첨부파일 목록 조회
			//qParam = {};
			var sController = "hsco/com/sym/ism/SYM090200/sancSelectAtchmnFileList.do";
			var sInDatasets = "input1=ds_fileSn";
			var sOutDatasets = "ds_fileList=output1";
			break;
			
	}
	//Ex.core.tran(this, strSvcId, sController, sInDatasets, sOutDatasets); 
	Ex.core.tran(this, strSvcId, sController, sInDatasets, sOutDatasets, argument, callbackFunc, showProgress, bAsync);
}

 /**********************************************************************
 * Transaction Callback 영역
 ***********************************************************************/
 /*
 * 함수명  	: fn_callbackAfter
 * 설명 		: callback 처리 후에 더 필요한 작업이 있을 경우, 작성
 * params  		: None
 * return Type 	: None
 * 사용법		: this.gfn_comboLoad(comboParams, this.fn_callbackAfter);
 */
this.fn_callbackAfter = function ()
{
}
 /*
 * 함수명  	: fn_callBack
 * 설명 		: Transaction Callback 처리
 * params  		: strSvcId    : 서비스요청 ID
 *                nErrorCode  : 오류 메시지 코드 ([예] 0 : Success, 그밖의 경우, error)
 *                strErrorMsg : 오류 메시지([예]  success.insert|정상적으로 등록되었습니다.)
 * return Type 	: None
 * 사용법		: 
 */
this.fn_callBack = function (strSvcId, nErrorCode, strErrorMsg)
{

	// 오류 및 성공 메시지를 화면에 보여준다.
	this.gfn_callback_message(strSvcId, nErrorCode, strErrorMsg);
    if (nErrorCode != 0){

		switch (strSvcId) {
		    case "SANCTION_INFO":
		        break;
			case "InnerSanctionDrft": // 
				break;
		    case "SAVE":
								
		        break;
		        
		}
	} else {	
		switch (strSvcId) {
			case "SANCTION_INFO":

			    this.fn_setButtons();
			    this.fn_copyDtl();
			    if(this.ds_sanctionRptParam.getRowCount() > 0 && this.ds_rptParamInfo.getRowCount() > 0) {
	                // report용 메타 데이터셋 초기화
	                this.gfn_makeRptDatasets(this.ds_rptParamInfo);
	                // report용 데이터 조회
	                this.gfn_selectReportDs(this.ds_sanctionRptParam, this.ds_rptParamInfo);
			    }
		        break;
			case "InnerSanctionDrft": //
		       this.fn_setButtons();
		       this.fn_copyDtl();
		       this.gfn_selectReportDs(this.ds_sanctionRptParam, this.ds_rptParamInfo);
	           break;
	       case "SAVE":	// 기안(최초 저장)
	           this.fn_setButtons();
	           this.fn_copyDtl();
	           if(this.ds_sanctionRptParam.getRowCount() > 0 && this.ds_rptParamInfo.getRowCount() > 0){
	               //this.gfn_selectReportDs(this.ds_sanctionRptParam, this.ds_rptParamInfo);
	           }
	           this.fn_setAtchFileView();
	           this.fn_getFileList();
	           break;
	       	case "GetFileSn": // 파일일련번호 조회
		        //this.alert("FILE_SN = " + this.ds_fileSn.getColumn(0, "FILE_SN"));
			    break;
	    }
	}
}



/**********************************************************************
 * Transaction Callback 영역 끝
 ***********************************************************************/
this.btn_exit_onclick = function(obj:Button,  e:nexacro.ClickEventInfo)
{
	if (this.saveFlag) {
		this.close(this.ds_recomInfo.saveXML());
	} else {
		this.close(null);
	}
}

this.btn_confirm_onclick = function(obj:Button,  e:nexacro.ClickEventInfo)
{
	if (this.saveFlag) {
		this.close(this.ds_recomInfo.saveXML());
	} else {
		this.close(null);
	}
}

this.btn_cancel_onclick = function(obj:Button,  e:nexacro.ClickEventInfo)
{
	if (this.saveFlag) {
		this.close(this.ds_recomInfo.saveXML());
	} else {
		this.close(null);
	}
}








this.ds_innerSanctnDtls_oncolumnchanged = function(obj:Dataset, e:nexacro.DSColChangeEventInfo)
{
	
	
	if(e.columnid == "EMPNM"){
	    var appnSe = obj.getColumn(e.row, "SANCTN_APPN_SE");
	    if(appnSe == "T2" || appnSe == "T3"){
	       
	        var empnm = obj.getColumn(e.row, "EMPNM");
	        var filterStr = "EMPNM=='" + empnm + "'";
	        var nRow = this.ds_plCode.findRowExpr(filterStr);
	    
	        var empno = this.ds_plCode.getColumn(nRow, "EMPNO");
	        var deptCode = this.ds_plCode.getColumn(nRow, "DEPT_CODE");
	        obj.setColumn(e.row, "SANCTNER_ID", empno);
	        obj.setColumn(e.row, "SANCTNER_DEPT_CD", deptCode);
	    } 
	}
	
}




this.div_work_grd_innerSanctnList_oncellclick = function(obj:Grid, e:nexacro.GridClickEventInfo)
{
    var step = this.ds_innerSanctnMastr.getColumn(0, "NEXT_SANCTN_STEP");
    if(this.ds_innerSanctnDtls.getColumn(e.row, "SANCTN_STEP") == step){
        this.div_work.txt_opinion.set_enable(true);
    } else if(this.ds_innerSanctnDtls.getColumn(e.row, "SANCTN_STEP") == "S2"){
        if(this.ds_innerSanctnMastr.getColumn(0, "LAST_SANCTN_STTUS") == "T1"){
            this.div_work.txt_opinion.set_enable(true);
        }
    } else if(this.ds_innerSanctnDtls.getColumn(e.row, "SANCTN_STEP") == "S1"){
        if(this.ds_innerSanctnMastr.getColumn(0, "LAST_SANCTN_STTUS") == ""){
            this.div_work.txt_opinion.set_enable(true);
        }
    }else {
        this.div_work.txt_opinion.set_enable(false);
    }
}

 /*
 * 함수명  	: fn_setButtons
 * 설명 		: 내부결재 버튼 Enable/Disable 처리
 * params  		: 
 * return Type 	: None
 * 사용법		: this.fn_setButtons()
 */
this.fn_setButtons = function(){
    if(this.ds_buttons.getColumn(0, "BTN_SAVE")=='1'){
	    this.btn_save.set_enable(true);
    } else {
	    this.btn_save.set_enable(false);
    }
    if(this.ds_buttons.getColumn(0, "BTN_SANCTN_CALCEL")=='1'){
        this.btn_recomCancel.set_enable(true);
    } else {
        this.btn_recomCancel.set_enable(false);
    }
    if(this.ds_buttons.getColumn(0, "BTN_RECOM")=='1'){
        this.btn_recom.set_enable(true);
    } else {
        this.btn_recom.set_enable(false);
    }
    if(this.ds_buttons.getColumn(0, "BTN_RERECOM")=='1'){
        this.btn_reRecom.set_enable(true);
    } else {
        this.btn_reRecom.set_enable(false);
    }
    if(this.ds_buttons.getColumn(0, "BTN_CONFRM")=='1'){
        this.btn_confn.set_enable(true);
    } else {
        this.btn_confn.set_enable(false);
    }
    if(this.ds_buttons.getColumn(0, "BTN_RCEPT")=='1'){
        this.btn_rcept.set_enable(true);
    } else {
        this.btn_rcept.set_enable(false);
    }
    if(this.ds_buttons.getColumn(0, "BTN_RETURN")=='1'){
        this.btn_return.set_enable(true);
    } else {
        this.btn_return.set_enable(false);
    }
    if(this.ds_buttons.getColumn(0, "BTN_RESRVE")=='1'){
        this.btn_resrve.set_enable(true);
    } else {
        this.btn_resrve.set_enable(false);
    } 
}

this.fn_copyDataWith_ROWTYPE_INSERT = function(dsSrc, dsDest){
    var cnt = dsSrc.getRowCount();
    var colCnt = dsSrc.getColCount();
    dsDest.clearData();
    for(var i=0; i<cnt;i++){
        var cRow = dsDest.addRow();
        for(var j=0; j<colCnt; j++){
            dsDest.setColumn(cRow, j, dsSrc.getColumn(i,j));
        }
    }
}

this.fn_copyRowWith_ROWTYPE_INSERT = function(dsSrc, rowSrc, dsDest){
    var cnt = dsSrc.getRowCount();
    var colCnt = dsSrc.getColCount();
    var cRow = dsDest.addRow();
    for(var j=0; j<colCnt; j++){
        dsDest.setColumn(cRow, j, dsSrc.getColumn(rowSrc,j));
    }
    return cRow;
}

this.txt_opinion_onchanged = function(obj:TextArea, e:nexacro.ChangeEventInfo)
{
	if(this.ds_innerSanctnDtl.getRowCount() > 0){
	    this.ds_innerSanctnDtl.setColumn(0, "OPINION", obj.value);
	}
}



this.fn_copyDtl = function() {
    this.ds_innerSanctnDtl_tmp.clearData();
	this.ds_innerSanctnDtl_tmp.copyData(this.ds_innerSanctnDtl);
}

this.checkMandatary = function(ds, colId, term){
    var boolCheck = true;
    for(var i=0; i<ds.getRowCount(); i++){
        var val = ds.getColumn(i, colId);
        if(val == "" || val == null || val == undefined){
            this.gfn_message("comm.항목.입력.을", term);
            boolCheck = false;
        } 
    }
    return boolCheck;
}

this.checkTerm = function(){
    if(!this.checkMandatary(this.ds_innerSanctnMastr, "SANCTN_SJ", "결재제목")){
        return false;
    }
    if(!this.checkMandatary(this.ds_innerSanctner, "SANCTNER_ID", "결재자")){
        return false;
    }
    return true;
}


/**
 * 함수명  		: fn_onFileSuccess 파일 업로드 성공 이벤트 핸들러
 * 설명 		: 파일 업로드 성공
 * params  		: type 실행구분(ExtFileUpload/ExtFileDownload), e 발생이벤트
 * return Type 	: None
 * 사용법		: this.fn_onFileSuccess();
 */
this.fn_onFileSuccess = function(type, e){
	if(type == this.File_UpDownManager.TYPE_DOWNLOADER){
		this.gfn_message("success.파일.다운로드.성공");
	} else if (type == this.File_UpDownManager.TYPE_UPLOADER){

	}
}

/*
 * 함수명  	: fn_uploadFiles
 * 설명 		: 파일업로드 처리
 * params  		: None
 * return Type 	: None
 * 사용법		: this.fn_uploadFiles();
 */
this.fn_uploadFiles = function()
{
	// 파일 업로드 처리
	// 파일 첨부여부 확인
	var hasAttFile = this.File_UpDownManager.hasFile();
	if(hasAttFile){
	    var fileSn;
	    if (this.ds_innerSanctnMastr.rowcount > 0) {
			fileSn = this.ds_innerSanctnMastr.getColumn(0, "FILE_SN2");
			if(fileSn != null && fileSn != undefined && fileSn > 0){
				this.File_UpDownManager.setFileSn(fileSn);
			} 
			
			
			//fileUpload.do
			//var sController = "hsco/cmm/file/fileUpload.do";
			var sController = "hsco/com/sym/ism/SYM090200/fileUpload.do";
			var oInDatasets = "";
			var sOutDatasets = "ds_fileList=fileList";
			
			//uploadFile.do
// 			var sController = "hsco/cmm/file/uploadFile.do";
// 			var oInDatasets = "ds_fileList=ds_input";
// 			var sOutDatasets = "";
			
			
			this.File_UpDownManager.upload(sController, oInDatasets, sOutDatasets);
		}
	}
}


/*
 * 함수명  	: fn_addAtchFile
 * 설명 		: 업로드 파일선택
 * params  		: isMulti   true(다건), false(단건)
 * return Type 	: None
 * 사용법		: this.fn_addAtchFile();
 */
this.fn_addAtchFile = function(isMulti){
	var allowFile = null;//["txt"];	// 선택 허용 파일유형 - Confilg에서 설정이 가능하나 선택시에도 처리가능하게
	var useMultiSelect = isMulti;
	this.File_UpDownManager.addFiles(allowFile, useMultiSelect);
}

// 첨부파일 선택
this.btn_fileUpload_onclick = function(obj:Button,  e:nexacro.ClickEventInfo)
{
	//파일첨부, 삭제 가능한 상태인지 확인 필요(상신전에만 가능)
	if (this.fn_isFileControl()) {
		this.fn_addAtchFile(true);
	}
}

//첨부파일 삭제
this.btn_fileDelete_onclick = function(obj:Button,  e:nexacro.ClickEventInfo)
{
	//파일첨부, 삭제 가능한 상태인지 확인 필요(상신전에만 가능)
	if (this.fn_isFileControl()) {
		this.fn_fileDelete();
	}
}

//파일이 첨부 및 삭제 가능한 상태인지 체크
this.fn_isFileControl = function()
{
	var currStep = this.ds_innerSanctnMastr.getColumn(0, "LAST_SANCTN_STEP");	 // 결재 단계
    var currSttus = this.ds_innerSanctnMastr.getColumn(0, "LAST_SANCTN_STTUS");  // 최종 결재 상태
    if(currStep == "" || currStep == null || currStep == "undefined"){
        // 결재 저장전 상태임
        return true;
    } else if((currStep == "S1" || currStep == "S2") && currSttus == "S01") {
        // 저장 상태임
        return true;
    } else  {
		return false;
    }
}

//첨부파일 삭제
this.fn_fileDelete = function()
{
	// 선택 삭제
	var exprStr = "CHK==1";
	var exprStr2 = "CHK==1 && DEL_CAN==0";
	var fRow = this.ds_fileList.findRowExpr(exprStr);
	var fRow2 = this.ds_fileList.findRowExpr(exprStr2);		//삭제 불가능한자료 선택여부
	
	// 선택자료 여부 체크
	if ( fRow == -1 ) {
		this.gfn_message("comm.데이터.선택.없음");
		return;
	}
	
	if ( fRow2 > -1) {
		this.gfn_message("fail.삭제.불가", "업무에서 첨부한 파일은");
		return;
	}
	
	// ds_condTemp00 데이터셋이 동적으로 생성된다.
	if(this.gfn_message("confirm.선택파일.삭제여부", "들")){
		this.gfn_delMultiDsRow(this.ds_fileList);
		this.fn_transaction("deleteFiles");
	}
}

//첨부파일 다운로드
this.btn_fileDownload_onclick = function(obj:Button,  e:nexacro.ClickEventInfo)
{
	var option = {};
	option["viewRow"] = "expr:CHK == '1'";
	var checkDownList = this.gfn_datasetToObject(this.ds_fileList, option, true);
	var isArray = this.comUtils.isArray(checkDownList);
	
	if(isArray){
		var checkDownLeng = checkDownList == null ? 0 : checkDownList.length;
		
		// 선택자료 여부 체크
		if ( checkDownLeng == 0 ) {
			this.gfn_message("comm.데이터.선택.없음");
			return;
		}
		
		for(var i = 0; i < checkDownLeng; i++){
			var fileSn = checkDownList[i].FILE_SN;
			var fileOrder = checkDownList[i].FILE_ORDR;
			var fileName = checkDownList[i].ORGINL_FILE_NM;
			
			this.File_UpDownManager.download(fileSn, fileOrder, fileName);
		}
	}else{
		var fileSn = checkDownList.FILE_SN;
		var fileOrder = checkDownList.FILE_ORDR;
		var fileName = checkDownList.ORGINL_FILE_NM;
		
		this.File_UpDownManager.download(fileSn, fileOrder, fileName);
	}
}

/**
 * 파일업로드 파일 선택 이벤트 핸들러
 * @param fileFullName 선택 전체 파일명
 * @param type 실행구분(ExtFileUpload/ExtFileDownload)
 * @param fileFullName 선택 파일명
 * @return void
 */
this.fn_onFileSelected = function(type, fileFullName){

	if(type == this.File_UpDownManager.TYPE_UPLOADER){
		var isNmArray = this.comUtils.isArray(fileFullName);
		if(isNmArray){
			// 다건처리
			//trace("다건처리");
			var selFileLeng = fileFullName.length;
			for(var i = 0; i < selFileLeng; i++){
				var newRowIdx = this.ds_fileList.addRow();
				this.ds_fileList.setColumn(newRowIdx, "ORGINL_FILE_NM", fileFullName[i]);	// 실제파일명
				this.ds_fileList.setColumn(newRowIdx, "DEL_CAN", "1");						// 삭제가능여부
			}
		}else{
			var rowPos = this.ds_fileList.addRow();
			this.ds_fileList.setColumn(rowPos, "ORGINL_FILE_NM", fileFullName);	// 첨부된 파일 데이터 셋 입력 처리
			this.ds_fileList.setColumn(rowPos, "DEL_CAN", "1");					// 삭제가능여부
		}
	}
}


//FILE_SN 생성
this.fn_getSanctnFileSn = function() {
	if (this.ds_innerSanctnMastr.rowcount > 0) {
		var nCurFileSn = this.ds_innerSanctnMastr.getColumn(0, "FILE_SN2");
		// 파일 첨부여부 확인
		var hasAttFile = this.File_UpDownManager.hasFile();
		if(hasAttFile){
			if (this.comUtils.isNullEmpty(nCurFileSn)) {
				this.fn_transaction("GetFileSn");
				this.ds_innerSanctnMastr.setColumn(0, "FILE_SN2", this.ds_fileSn2.getColumn(0, "FILE_SN"));
			}
		}
	}
}
//파일 첨부 및 삭제 버튼 활성/비활성
this.fn_setAtchFileView = function()
{
	var isControl = this.fn_isFileControl();
	//첨부
	this.btn_fileUpload.set_enable(isControl);
	this.btn_fileUpload.set_visible(isControl);
	//삭제
	this.btn_fileDelete.set_enable(isControl);
	this.btn_fileDelete.set_visible(isControl);
	//다운로드
	//btn_fileDownload
}

this.fn_getFileList = function()
{
	if (this.ds_innerSanctnMastr.rowcount > 0) {
		var nCurFileSn = this.ds_innerSanctnMastr.getColumn(0, "FILE_SN");
		var nCurFileSn2 = this.ds_innerSanctnMastr.getColumn(0, "FILE_SN2");
		if (!this.comUtils.isNullEmpty(nCurFileSn) || !this.comUtils.isNullEmpty(nCurFileSn2)) {
			if (this.ds_fileSn.rowcount == 0) this.ds_fileSn.addRow();
			this.ds_fileSn.setColumn(0, "FILE_SN", nCurFileSn);
			this.ds_fileSn.setColumn(0, "FILE_SN2", nCurFileSn2);
			this.fn_transaction("sancSelectAtchmnFileList");
		}
	}
}

this.grd_fileList_onheadclick = function(obj:Grid, e:nexacro.GridClickEventInfo)
{
	if(e.col == 0) {
		this.gfn_setGridCheckAll(obj, e);
	}
}
]]></Script>
  </Form>
</FDL>
