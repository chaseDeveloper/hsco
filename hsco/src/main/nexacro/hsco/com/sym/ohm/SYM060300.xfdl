<?xml version="1.0" encoding="utf-8"?>
<FDL version="1.5">
  <TypeDefinition url="..\..\..\default_typedef.xml"/>
  <Form id="SYM060300" classname="Pattern_03" left="0" top="0" width="1059" height="735" titletext="Q&amp;A" onload="SYM060300_onload" oninit="SYM060300_oninit">
    <Layouts>
      <Layout>
        <Div id="div_search" taborder="3" left="0" top="0" height="33" cssclass="div_WFSA_Box" right="28">
          <Layouts>
            <Layout>
              <Static id="Static16" taborder="0" text="회면ID" cssclass="sta_WFSA_Label" left="15" top="5" width="56" height="21"/>
              <Static id="Static01" taborder="3" text="15" visible="false" left="1014" top="0" height="31" style="background:#00ffff66;" width="15" onclick="div_search_Static01_onclick"/>
              <Static id="Static02" taborder="5" text="15" visible="false" left="229" top="0" width="15" height="31" style="background:#00ffff66;"/>
              <Static id="Static05" taborder="8" text="5" visible="false" left="308" top="0" right="713" height="31" style="background:#00ffff66;"/>
              <Static id="Static08" taborder="11" text="15" visible="false" left="0" top="0" width="15" height="31" style="background:#00ffff66;"/>
              <Static id="Static00" taborder="12" text="5" visible="false" left="75" top="0" right="946" height="31" style="background:#00ffff66;"/>
              <Static id="Static04" taborder="13" text="화면명" cssclass="sta_WFSA_Label" left="242" top="5" width="64" height="21" onclick="div_search_Static04_onclick"/>
              <Edit id="edt_pageId" taborder="14" maxlength="14" left="83" top="5" cssclass="edt_WF_Essential" width="145" height="21" readonly="true"/>
              <Edit id="edt_pageNm" taborder="16" maxlength="0" left="316" top="5" cssclass="edt_WF_Essential" readonly="true" width="145" height="21"/>
              <Button id="btn_popupPage" taborder="19" cssclass="btn_WF_Search" onclick="div_search_btn_popupPage_onclick" left="206" top="5" width="22" height="21"/>
              <Edit id="edt_qnaSj" taborder="20" readonly="false" left="531" top="5" height="21" width="108" onkeyup="div_search_edt_onkeyup" autoselect="true"/>
              <Static id="Static03" taborder="21" text="15" visible="false" left="460" top="0" right="552" height="31" style="background:#00ffff66;"/>
              <Static id="Static06" taborder="22" text="제목" cssclass="sta_WFSA_Label" left="475" top="5" height="21" width="50"/>
              <Static id="Static07" taborder="23" text="5" visible="false" left="523" top="0" right="497" height="31" style="background:#00ffff66;"/>
              <Static id="Static09" taborder="24" text="15" visible="false" left="639" top="0" right="374" height="31" style="background:#00ffff66;"/>
              <Static id="Static10" taborder="25" text="내용" cssclass="sta_WFSA_Label" left="653" top="5" height="21" width="50"/>
              <Edit id="edt_qnaCn" taborder="26" readonly="false" left="716" top="5" height="21" width="108" onkeyup="div_search_edt_onkeyup" autoselect="true"/>
              <Static id="Static11" taborder="27" text="5" visible="false" left="707" top="0" right="313" height="31" style="background:#00ffff66;"/>
              <Static id="Static12" taborder="28" text="작성자" cssclass="sta_WFSA_Label" left="836" top="5" right="132" height="21"/>
              <Static id="Static13" taborder="29" text="15" visible="false" left="824" top="0" right="190" height="31" style="background:#00ffff66;"/>
              <Static id="Static14" taborder="30" text="5" visible="false" left="898" top="0" right="122" height="31" style="background:#00ffff66;"/>
              <Edit id="edt_qnaRegister" taborder="31" readonly="false" left="905" top="5" height="21" width="108" onkeyup="div_search_edt_onkeyup" autoselect="true"/>
              <Button id="btn_popupPage02" taborder="32" cssclass="btn_WF_Search" left="438" top="5" height="21" width="23" onclick="div_search_btn_popupPage02_onclick"/>
            </Layout>
          </Layouts>
        </Div>
        <Static id="Static01" taborder="56" text="15" visible="false" top="0" width="15" height="735" style="background:#1b3cd23c;align:center middle;" right="13"/>
        <Static id="Static13" taborder="57" text="스&#13;&#10;크&#13;&#10;롤&#13;&#10;13" visible="false" top="0" width="13" height="735" style="background:#d07b173c;align:center middle;" right="0"/>
        <Div id="div_work" taborder="69" left="0%" top="32" right="0%" bottom="17" style="padding:0 0 0 0;" scrollbars="none">
          <Layouts>
            <Layout>
              <Static id="Static21" taborder="193" text="10" visible="false" left="0%" top="1" right="2.64%" height="10" style="background:#dc143c3c;align:center middle;"/>
              <Static id="Static04" taborder="194" text="Q&amp;A 목록" cssclass="sta_WF_Title01" left="0%" top="10" right="87.63%" height="21"/>
              <Static id="Static10" taborder="195" text="5" visible="false" left="0%" top="30" right="2.64%" height="5" style="background:#dc143c3c;align:center middle;"/>
              <Static id="Static46" taborder="199" text="10" visible="false" left="45.99%" top="35" height="644" style="background:#1b3cd23c;align:center middle;" right="53.07%"/>
              <Static id="Static22" taborder="200" text="상세내역" cssclass="sta_WF_Title02" left="496" top="10" height="21" width="159"/>
              <Static id="Static38" taborder="212" text="10" visible="false" left="84.14%" top="-53" right="14.92%" height="19" style="background:#00ffff66;"/>
              <Static id="Static47" taborder="213" text="10" visible="false" left="0%" top="676" right="2.74%" height="10" style="background:#dc143c3c;align:center middle;"/>
              <Static id="Static05" taborder="227" cssclass="sta_WF_Labelbg" left="587" top="35" height="27" right="27"/>
              <Static id="Static00" taborder="228" cssclass="sta_WF_Labelbg" left="587" top="61" height="27" right="27"/>
              <Static id="Static02" taborder="229" cssclass="sta_WF_Labelbg" left="587" top="113" height="27" right="27"/>
              <Static id="sta_pageNm" taborder="230" text="화면명" cssclass="sta_WF_Label" left="496" top="35" height="27" width="101"/>
              <Edit id="edt_pageNm" taborder="231" cssclass="edt_WF_Essential" left="598" top="38" height="21" width="428" readonly="true"/>
              <Static id="sta_pageId" taborder="232" text="화면 ID" cssclass="sta_WF_Label" left="496" top="61" height="27" width="101"/>
              <Edit id="edt_pageId" taborder="233" left="598" top="64" height="21" width="428" readonly="true" cssclass="edt_WF_Essential" onchanged="div_work_edt_pageId_onchanged"/>
              <Static id="sta_qnaSj" taborder="234" text="제목" cssclass="sta_WF_Label" left="496" top="113" height="27" width="101"/>
              <Edit id="edt_qnaSj" taborder="235" left="598" top="116" height="21" width="428"/>
              <Static id="Static07" taborder="240" cssclass="sta_WF_Labelbg" left="587" top="139" height="477" right="27"/>
              <Static id="sta_qnaCn" taborder="243" text="내용" cssclass="sta_WF_Label" left="496" top="139" height="477" width="101"/>
              <Static id="Static11" taborder="247" cssclass="sta_WF_Labelbg" left="587" top="615" height="27" width="209"/>
              <Static id="Static12" taborder="248" cssclass="sta_WF_Labelbg" left="886" top="615" height="27" right="27"/>
              <TextArea id="txa_qnaCn" taborder="249" left="598" top="144" height="469" width="428"/>
              <Static id="sta_qnaRegister" taborder="251" text="작성자" cssclass="sta_WF_Label" left="496" top="615" height="27" width="101"/>
              <Edit id="edt_qnaRegister" taborder="252" left="598" top="618" height="21" width="194" readonly="true"/>
              <Static id="sta_qnaRegistDt" taborder="253" text="등록일자" cssclass="sta_WF_Label" left="795" top="615" height="27" width="101"/>
              <Calendar id="cal_qnaRegistDt" taborder="254" dateformat="yyyy-MM-dd" left="898" top="618" height="21" width="128" readonly="true"/>
              <Grid id="grd_qnaList" taborder="255" binddataset="ds_hpcmQna" useinputpanel="false" autofittype="col" treeinitstatus="expand,all" treeuseexpandkey="true" left="0" top="35" height="607" width="488" treeuseimage="false" treeusecheckbox="false" treeusebutton="use">
                <Formats>
                  <Format id="default">
                    <Columns>
                      <Column size="318"/>
                      <Column size="50"/>
                      <Column size="81"/>
                      <Column size="79"/>
                    </Columns>
                    <Rows>
                      <Row size="24" band="head"/>
                      <Row size="24"/>
                    </Rows>
                    <Band id="head">
                      <Cell text="제목"/>
                      <Cell col="1" displaytype="normal" text="구분"/>
                      <Cell col="2" text="작성자"/>
                      <Cell col="3" text="작성일자"/>
                    </Band>
                    <Band id="body">
                      <Cell displaytype="tree" edittype="tree" treestartlevel="0" treelevel="bind:QNA_LEVEL"/>
                      <Cell col="1" displaytype="combo" text="bind:QNA_SE_CODE" combodataset="ds_qnaSeCd" combocodecol="CODE" combodatacol="CODE_NM"/>
                      <Cell col="2" displaytype="normal" text="bind:REGISTER_NM"/>
                      <Cell col="3" displaytype="date" edittype="none" text="bind:REGIST_DT" treecheck="bind:INTRCP_AT"/>
                    </Band>
                  </Format>
                </Formats>
              </Grid>
              <Static id="Static01" taborder="256" cssclass="sta_WF_Labelbg" left="595" top="87" right="283" height="27"/>
              <Static id="sta_qnaSeCd" taborder="257" text="Q&amp;A구분" cssclass="sta_WF_Label" left="496" top="87" height="27" width="101"/>
              <Combo id="cbo_qnaSeCd" taborder="259" innerdataset="ds_qnaSeCd" codecolumn="CODE" datacolumn="CODE_NM" left="598" top="90" height="21" width="170"/>
              <Static id="Static03" taborder="260" cssclass="sta_WF_Labelbg" left="869" top="87" right="27" height="27"/>
              <Static id="sta_verSn" taborder="261" text="도움말 버전" cssclass="sta_WF_Label" left="770" top="87" height="27" width="102"/>
              <Edit id="edt_verSn" taborder="262" left="873" top="90" height="21" width="153" readonly="true"/>
              <Button id="btn_popupPageSearch" taborder="263" onclick="div_work_btn_popupPageSearch_onclick" cssclass="btn_WF_Search" left="1004" top="64" height="21" width="22" visible="false" enableevent="false"/>
              <Button id="btn_insert" taborder="264" text="답변추가" top="11" height="19" domainId="nexa.add" width="66" right="163" onclick="div_work_btn_insert_onclick"/>
              <Button id="btn_cancel" taborder="265" text="취소" top="11" height="19" domainId="nexa.cancel" width="41" right="71" onclick="div_work_btn_cancel_onclick"/>
              <Button id="btn_save" taborder="266" text="저장" cssclass="btn_WF_Process" top="11" height="19" domainId="nexa.save" width="40" right="27" onclick="div_work_btn_save_onclick"/>
              <Button id="btn_newInsert" taborder="267" text="신규질문" top="11" right="234" height="19" domainId="nexa.add" onclick="div_work_btn_newInsert_onclick" width="66"/>
              <Button id="btn_delete" taborder="268" text="삭제" top="11" height="19" domainId="nexa.add" width="42" right="116" onclick="div_work_btn_delete_onclick"/>
            </Layout>
          </Layouts>
          <InitValue/>
        </Div>
      </Layout>
    </Layouts>
    <Objects>
      <Dataset id="ds_validation" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="compId" type="STRING" size="256"/>
          <Column id="colId" type="STRING" size="256"/>
          <Column id="PK" type="STRING" size="256"/>
          <Column id="notNull" type="STRING" size="256"/>
          <Column id="type" type="STRING" size="256"/>
          <Column id="nlength" type="STRING" size="256"/>
          <Column id="from" type="STRING" size="256"/>
          <Column id="to" type="STRING" size="256"/>
          <Column id="lengthChkGb" type="STRING" size="256"/>
          <Column id="msgId" type="STRING" size="256"/>
          <Column id="expr" type="STRING" size="256"/>
          <Column id="func" type="STRING" size="256"/>
        </ColumnInfo>
        <Rows>
          <Row>
            <Col id="compId">ds_cond</Col>
            <Col id="colId">PAGE_ID</Col>
            <Col id="notNull">Y</Col>
            <Col id="msgId">[Q&amp;A]화면ID</Col>
          </Row>
          <Row>
            <Col id="compId">ds_cond</Col>
            <Col id="colId">PAGE_NM</Col>
            <Col id="PK">[Undefined]</Col>
            <Col id="notNull">Y</Col>
            <Col id="type">[Undefined]</Col>
            <Col id="nlength">[Undefined]</Col>
            <Col id="from">[Undefined]</Col>
            <Col id="to">[Undefined]</Col>
            <Col id="lengthChkGb">[Undefined]</Col>
            <Col id="msgId">[Q&amp;A]화면명</Col>
            <Col id="expr">[Undefined]</Col>
            <Col id="func">[Undefined]</Col>
          </Row>
          <Row>
            <Col id="compId">ds_hpcmQna</Col>
            <Col id="colId">PAGE_ID</Col>
            <Col id="PK">[Undefined]</Col>
            <Col id="notNull">Y</Col>
            <Col id="type">[Undefined]</Col>
            <Col id="nlength">[Undefined]</Col>
            <Col id="from">[Undefined]</Col>
            <Col id="to">[Undefined]</Col>
            <Col id="lengthChkGb">[Undefined]</Col>
            <Col id="msgId">[Q&amp;A]화면ID</Col>
            <Col id="expr">[Undefined]</Col>
            <Col id="func">[Undefined]</Col>
          </Row>
          <Row>
            <Col id="compId">ds_hpcmQna</Col>
            <Col id="colId">QNA_SJ</Col>
            <Col id="PK">[Undefined]</Col>
            <Col id="notNull">Y</Col>
            <Col id="type">[Undefined]</Col>
            <Col id="nlength">[Undefined]</Col>
            <Col id="from">[Undefined]</Col>
            <Col id="to">[Undefined]</Col>
            <Col id="lengthChkGb">[Undefined]</Col>
            <Col id="msgId">[Q&amp;A]제목</Col>
            <Col id="expr">[Undefined]</Col>
            <Col id="func">[Undefined]</Col>
          </Row>
          <Row>
            <Col id="compId">ds_hpcmQna</Col>
            <Col id="colId">QNA_CN</Col>
            <Col id="PK">[Undefined]</Col>
            <Col id="notNull">Y</Col>
            <Col id="type">[Undefined]</Col>
            <Col id="nlength">[Undefined]</Col>
            <Col id="from">[Undefined]</Col>
            <Col id="to">[Undefined]</Col>
            <Col id="lengthChkGb">[Undefined]</Col>
            <Col id="msgId">[Q&amp;A]내용</Col>
            <Col id="expr">[Undefined]</Col>
            <Col id="func">[Undefined]</Col>
          </Row>
          <Row>
            <Col id="compId">ds_hpcmQna</Col>
            <Col id="colId">QNA_SE_CODE</Col>
            <Col id="PK">[Undefined]</Col>
            <Col id="notNull">Y</Col>
            <Col id="type">[Undefined]</Col>
            <Col id="nlength">[Undefined]</Col>
            <Col id="from">[Undefined]</Col>
            <Col id="to">[Undefined]</Col>
            <Col id="lengthChkGb">[Undefined]</Col>
            <Col id="msgId">[Q&amp;A]Q&amp;A구분</Col>
            <Col id="expr">[Undefined]</Col>
            <Col id="func">[Undefined]</Col>
          </Row>
        </Rows>
      </Dataset>
      <Dataset id="ds_hpcmQna" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false" onrowposchanged="ds_hpcmQna_onrowposchanged">
        <ColumnInfo>
          <Column id="QNA_SN" type="BIGDECIMAL" size="18"/>
          <Column id="REFRN_QNA_SN" type="BIGDECIMAL" size="18"/>
          <Column id="VER_SN" type="STRING" size="7"/>
          <Column id="PAGE_ID" type="STRING" size="40"/>
          <Column id="MENU_ID" type="BIGDECIMAL" size="11"/>
          <Column id="HPCM_ID" type="STRING" size="15"/>
          <Column id="QNA_SJ" type="STRING" size="100"/>
          <Column id="QNA_CN" type="STRING" size="4000"/>
          <Column id="QNA_SE_CODE" type="STRING" size="2"/>
          <Column id="USE_AT" type="STRING" size="1"/>
          <Column id="REGISTER_ID" type="STRING" size="12"/>
          <Column id="REGIST_DT" type="STRING" size="255"/>
          <Column id="UPDUSR_ID" type="STRING" size="12"/>
          <Column id="UPDT_DT" type="STRING" size="255"/>
          <Column id="QNA_LEVEL" type="INT" size="3"/>
          <Column id="PAGE_NM" type="STRING" size="100"/>
          <Column id="REGISTER_NM" type="STRING" size="256"/>
        </ColumnInfo>
        <Rows/>
      </Dataset>
      <Dataset id="ds_cond" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="PAGE_ID" type="STRING" size="40"/>
          <Column id="PAGE_NM" type="STRING" size="256"/>
          <Column id="PAGE_URL" type="STRING" size="256"/>
          <Column id="QNA_SJ" type="STRING" size="256"/>
          <Column id="QNA_CN" type="STRING" size="256"/>
          <Column id="REGISTER_ID" type="STRING" size="256"/>
        </ColumnInfo>
        <Rows/>
      </Dataset>
      <Dataset id="ds_qnaSeCd" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="CODE" type="STRING" size="256"/>
          <Column id="CODE_NM" type="STRING" size="256"/>
          <Column id="CODE_CN" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_hpcmCnt" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="CNT" type="STRING" size="256"/>
        </ColumnInfo>
        <Rows/>
      </Dataset>
      <Dataset id="ds_cond01" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="QNA_SN" type="BIGDECIMAL" size="18"/>
        </ColumnInfo>
        <Rows/>
      </Dataset>
    </Objects>
    <Bind>
      <BindItem id="item1" compid="div_search.edt_pageId" propid="value" datasetid="ds_cond" columnid="PAGE_ID"/>
      <BindItem id="item2" compid="div_search.edt_pageNm" propid="value" datasetid="ds_cond" columnid="PAGE_NM"/>
      <BindItem id="item6" compid="div_search.edt_qnaSj" propid="value" datasetid="ds_cond" columnid="QNA_SJ"/>
      <BindItem id="item11" compid="div_search.edt_qnaCn" propid="value" datasetid="ds_cond" columnid="QNA_CN"/>
      <BindItem id="item12" compid="div_search.edt_qnaRegister" propid="value" datasetid="ds_cond" columnid="REGISTER_ID"/>
      <BindItem id="item0" compid="div_work.edt_pageNm" propid="value" datasetid="ds_hpcmQna" columnid="PAGE_NM"/>
      <BindItem id="item14" compid="div_work.edt_pageId" propid="value" datasetid="ds_hpcmQna" columnid="PAGE_ID"/>
      <BindItem id="item15" compid="div_work.edt_qnaSj" propid="value" datasetid="ds_hpcmQna" columnid="QNA_SJ"/>
      <BindItem id="item18" compid="div_work.txa_qnaCn" propid="value" datasetid="ds_hpcmQna" columnid="QNA_CN"/>
      <BindItem id="item22" compid="div_work.edt_qnaRegister" propid="value" datasetid="ds_hpcmQna" columnid="REGISTER_NM"/>
      <BindItem id="item23" compid="div_work.cal_qnaRegistDt" propid="value" datasetid="ds_hpcmQna" columnid="REGIST_DT"/>
      <BindItem id="item3" compid="div_work.edt_verSn" propid="value" datasetid="ds_hpcmQna" columnid="VER_SN"/>
      <BindItem id="item4" compid="div_work.cbo_qnaSeCd" propid="value" datasetid="ds_hpcmQna" columnid="QNA_SE_CODE"/>
    </Bind>
    <Script type="xscript5.0"><![CDATA[/***********************************************************************
 * 화면ID   : SYM060300
 * 화면명   : Q&A 관리
 * 화면설명 : Q&A를 관리한다.
 * 작성일   : 2016. 1. 04.
 * 작성자   : 고진호
 * 수정이력 :
 ***********************************************************************
 *     수정일     수정자   내용
 ***********************************************************************
 *
 ***********************************************************************
 */

/***********************************************************************
 * Script Include
 ***********************************************************************/
include "lib::comInclude.xjs";

 /***********************************************************************
 * onInit / onLoad 영역
 ***********************************************************************/
this.SYM060300_oninit = function(obj:Form, e:nexacro.InitEventInfo)
{
	// Form 초기화
	this.fn_init_form();

	// DataSet 초기화
	this.fn_init_dataset();
}

this.SYM060300_onload = function(obj:Form, e:nexacro.LoadEventInfo)
{
	this.fn_loadCombo();
	this.fn_getLinkParam();
}


/***********************************************************************
 * Form/Dataset 오브젝트 초기화
 ***********************************************************************/
/*
 * 함수명  	: initForm
 * 설명 		: Form을 초기화한다.
 * params  		: None
 * return Type 	: None
 * 사용법		: this.initForm();
 */
this.fn_init_form = function()
{
	// 시스템 공통으로 Form을 Initialize 한다.
	this.gfn_initForm(this);
}

/*
 * 함수명  	: fn_init_dataset
 * 설명 		: Dataset을 초기화한다.
 *                주로, 조건 Dataset들(ds_cond, ds_cond_00, ds_cond_01, ...) 을 초기화한다.
 * params  		: None
 * return Type 	: None
 * 사용법		: this.fn_init_dataset();
 */
this.fn_init_dataset = function()
{
	// 조건에 사용되는 Dataset 초기화
	this.gfn_initCondDs(this, this.div_search);

	if(this.ds_cond.rowcount == 0) this.ds_cond.addRow();
}

this.fn_loadCombo = function()
{
      /*
      params  		: 1. param_1    : 반환받을 DATASET 명 			(예: ds_comCode00)
                        2. param_2	: 그룹코드						(예 : COM007)
                        3. param_3	: 사용여부		    			(예 : 1(사용), ""(사용안함))
                        4. param_4	: 콤보박스INDEX(0) 표시		(예 : "전체", "선택", " "(공백), ""(첫번째데이터부터시작) )
      */
	var comboParams = [
			["ds_qnaSeCd","COM040", "1", " " ]
		];

	this.gfn_comboLoad(comboParams, this.fn_callbackAfter);
}

//링크를 통해 들어온 정보를 가져오기
this.fn_getLinkParam = function()
{
	var pageUrl = "com_sym_ohm::SYM060300.xfdl";
	this.fn_setParam(this.gfn_getLinkParam(pageUrl));
	
	//pageUrl 데이터 삭제
	var strExpr1 = "PAGE_URL=='" + pageUrl + "'";
	var findRow1 = application.gds_mdiParam.findRowExpr(strExpr1);
	application.gds_mdiParam.deleteRow(findRow1);
}

//링크를 통해 들어온 정보를 저장
this.fn_setParam = function (sXml)
{
	if (this.comUtils.isNull(sXml)) {
		return;
	}
	var dsTemp = new Dataset();
	var loadCnt = dsTemp.loadXML(sXml);
	if (loadCnt > 0) {
		if (!this.comUtils.isNullEmpty(dsTemp.getColumn(0, "PAGE_ID"))) {
			if (this.ds_cond.rowcount == 0) this.ds_cond.addRow();
			this.ds_cond.setColumn(0, "PAGE_ID", dsTemp.getColumn(0, "PAGE_ID"));		//화면ID
			this.ds_cond.setColumn(0, "PAGE_NM", dsTemp.getColumn(0, "PAGE_NM"));		//화면명
			this.ds_cond.setColumn(0, "PAGE_URL", dsTemp.getColumn(0, "PAGE_URL"));		//화면 경로
			this.fn_search();
		}
	}
}


this.fn_callbackAfter = function ()
{
	var strExpr = "";
	if (this.ds_qnaSeCd.rowcount == 2) {
		var cQuest = this.ds_qnaSeCd.getColumn(0, "CODE");
		var cAns = this.ds_qnaSeCd.getColumn(1, "CODE");
		var strQuest = this.ds_qnaSeCd.getColumn(0, "CODE_NM");
		var strAns = this.ds_qnaSeCd.getColumn(1, "CODE_NM");
		//EXPR(QNA_SE_CODE=='Q' ?  'Q : ' + QNA_SJ : (QNA_SE_CODE=='A' ? 'A : ' + QNA_SJ : '기타 : ' + QNA_SJ)   )
		strExpr = "EXPR(QNA_SE_CODE=='" + cQuest + "' ? '" + strQuest + " : ' + QNA_SJ : (QNA_SE_CODE=='" + cAns + "' ? '" + strAns + " : ' + QNA_SJ : '기타 : ' + QNA_SJ))";
		this.div_work.grd_qnaList.setCellProperty("Body", 0, "text", strExpr);
	}
}


/***********************************************************************
* Transaction 영역 시작
************************************************************************/

/***********************************************************************
 * Transaction 관련 이벤트 핸들러
 **********************************************************************/
/*
 * 함수명  		: fn_search
 * 설명 		: Q&A 목록 조회
 * params  		: None
 * return Type 	: None
 * 사용법		: this.fn_search();
 */
this.fn_search = function()
{
	this.ds_hpcmQna.clearData();
	//화면ID값을 기준으로 검색

	if (this.ds_cond.rowcount < 1) {
		this.ds_cond.addRow();
	}
	
 	if (this.comUtils.isNullEmpty(this.ds_cond.getColumn(0, "PAGE_ID"))) {
 		this.gfn_message("comm.항목.입력.을", "화면ID");
        return;
    }
	this.fn_transaction("SYM060300List");
	
}

/*
 * 함수명  	: fn_saveQna
 * 설명 		: Qna 저장
 * params  		: None
 * return Type 	: None
 * 사용법		: this.fn_saveQna();
 */
this.fn_saveQna = function()
{
	if(!this.comUtils.isDatasetUpdated(this.ds_hpcmQna)) {
        this.gfn_message("comm.데이터.변경.없음");
        return;
    } else {
		if(this.comUtils.isDatasetUpdated(this.ds_hpcmQna)){
			if(!this.gfn_checkValidation(this.ds_hpcmQna, this.ds_validation)) {
				return;
			}
		}
	} 
	
	if(this.gfn_message("comm.행위여부", "저장")){
		this.fn_transaction("SYM060300CUD");
	}
}


/**********************************************************************
 * CALL TRANSACTION 영역
 **********************************************************************/


/*
 * 함수명  	: fn_transaction
 * 설명 		: Transaction 요청 처리 함수
 * params  		: strSvcId : 서비스요청 ID
 * return Type 	: None
 * 사용법		: this.fn_transaction("SELECT");
 */
this.fn_transaction = function(strSvcId)
{
	var argument     = "";
	var callbackFunc = "fn_callBack";
	var showProgress = true;
	var bAsync       = true;
	
	switch (strSvcId) {
		case "SYM060300List": 	// Q&A 목록 조회
			var sController   	= "hsco/com/sym/ohm/SYM060300/SYM060300List.do";
			var sInDatasets   	= "input1=ds_cond";
			var sOutDatasets  	= "ds_hpcmQna=output1";
			break;
		case "SYM060300CUD":	// Q&A 저장
			var sController   	= "hsco/com/sym/ohm/SYM060300/SYM060300CUD.do";
			var sInDatasets   	= "input1=ds_hpcmQna:U";
			var sOutDatasets  	= "";
			break;
		case "HpcmQnaCnt":	// Q&A 갯수
			var sController   	= "hsco/com/sym/ohm/SYM060300/HpcmQnaCnt.do";
			var sInDatasets   	= "input1=ds_cond01";
			var sOutDatasets  	= "ds_hpcmCnt=output1";
			bAsync = false;
			break;
		
	}
	Ex.core.tran(this, strSvcId, sController, sInDatasets, sOutDatasets, argument, callbackFunc, showProgress, bAsync);
}


 /**********************************************************************
 * Transaction Callback 영역
 ***********************************************************************/
 /*
 * 함수명  	: fn_callBack
 * 설명 		: Transaction Callback 처리
 * params  		: strSvcId    : 서비스요청 ID
 *                nErrorCode  : 오류 메시지 코드 ([예] 0 : Success, 그밖의 경우, error)
 *                strErrorMsg : 오류 메시지([예]  success.insert|정상적으로 등록되었습니다.)
 * return Type 	: None
 * 사용법		:
 */
this.fn_callBack = function (strSvcId, nErrorCode, strErrorMsg)
{
	// 오류 및 성공 메시지를 화면에 보여준다.
	this.gfn_callback_message(strSvcId, nErrorCode, strErrorMsg);

	if (nErrorCode != 0){
		// 오류 메시지를 보여주는 동작 외에 처리할 내용이 있으면 아래에 기술.
		// 처리할 내용이 없다면, switch 문은 생략합니다.
		switch (strSvcId) {
			case "SYM060300List": 	// Q&A 목록 조회
			    break;
		    case "SYM060300CUD":	// Q&A 정보 목록 저장
			    break;
		}
	} else {
		// 성공 메시지를 보여주는 동작 외에 처리할 내용이 있으면 아래에 기술.
		// 처리할 내용이 없다면, switch 문은 생략합니다.

		switch (strSvcId) {
			case "SYM060300List": 	// Q&A 목록 조회
				//this.ds_cond.setColumn(0, "QNA_SJ", "");
				//this.ds_cond.setColumn(0, "QNA_CN", "");
				//this.ds_cond.setColumn(0, "REGISTER_ID", "");
				break;
			case "SYM060300CUD":	// Q&A 저장
			    this.fn_search();
			    break;
			case "HpcmQnaCnt" :
				//Number(this.ds_hpcmCnt.getColumn(0, "CNT"))
				break;
		}
	}
}


/**********************************************************************
* Popup Callback 영역
***********************************************************************/

 /*
 * 함수명  		: fn_popupCallBack
 * 설명 		: Popup Callback 처리
 * params  		: sPopupId    : 팝업 ID
 *                sReturn  : 팝업 처리 결과(dataset.saveXML())
 * return Type 	: None
 * 사용법		:
 */
this.fn_popupCallBack = function(sPopupId, sReturn)
{
	switch(sPopupId) {
		case "pagePopup":	// 화면목록 팝업 콜백
			if(sReturn != null && sReturn.length > 0) {
				var dsTemp = new Dataset();
				dsTemp.loadXML(sReturn);
				if (this.ds_cond.rowcount == 0) this.ds_cond.addRow();
				this.ds_cond.setColumn(0, "PAGE_ID", dsTemp.getColumn(0, "PAGE_ID"));		//화면ID
				this.ds_cond.setColumn(0, "MENU_ID", dsTemp.getColumn(0, "MENU_ID"));		//화면ID
				this.ds_cond.setColumn(0, "PAGE_NM", dsTemp.getColumn(0, "PAGE_NM"));		//화면명
				this.fn_search();
			}
			break;
		case "pagePopupRegist":	// 등록을 위한 화면목록 팝업 콜백
			if(sReturn != null && sReturn.length > 0) {
				var dsTemp = new Dataset();
				var nCurRow = this.ds_hpcmQna.rowposition;
				dsTemp.loadXML(sReturn);
				if (this.fn_canModifyCheck()) {
					this.ds_hpcmQna.setColumn(nCurRow, "PAGE_ID", dsTemp.getColumn(0, "PAGE_ID"));		//화면ID
					this.ds_hpcmQna.setColumn(nCurRow, "MENU_ID", dsTemp.getColumn(0, "MENU_ID"));		//화면ID
					this.ds_hpcmQna.setColumn(nCurRow, "PAGE_NM", dsTemp.getColumn(0, "PAGE_NM"));		//화면명
				} else {
					this.gfn_message("fail.수정.불가", "사용자가 등록한 것이 아닌것은")
				}		
			}
			break;
	}
}


/***********************************************************************
* Transaction 영역 끝
************************************************************************/
/***********************************************************************
 * non-Transaction 관련 컴포넌트 이벤트 처리 함수
 ***********************************************************************/
//저장 버튼 이벤트
this.div_work_btn_save_onclick = function(obj:Button,  e:nexacro.ClickEventInfo)
{
	this.fn_saveQna();
}

//취소 버튼 이벤트
this.div_work_btn_cancel_onclick = function(obj:Button,  e:nexacro.ClickEventInfo)
{
	this.fn_resetQna();
}

//추가 버튼 이벤트
this.div_work_btn_insert_onclick = function(obj:Button,  e:nexacro.ClickEventInfo)
{
	this.fn_qnaAddRow();
}

//신규 버튼 이벤트
this.div_work_btn_newInsert_onclick = function(obj:Button,  e:nexacro.ClickEventInfo)
{
	this.fn_qnaNewRow();
}

//Q&A 데이터셋 리셋
this.fn_resetQna = function()
{
	if(this.comUtils.isDatasetUpdated(this.ds_hpcmQna)) {
		if (this.gfn_message("confirm.취소여부")) {
			this.ds_hpcmQna.reset();
		}
	}
}


//삭제버튼 이벤트
this.div_work_btn_delete_onclick = function(obj:Button,  e:nexacro.ClickEventInfo)
{
	this.fn_deleteRow();
}

//현재 선택 로우를 삭제
this.fn_deleteRow = function()
{
	var nRow = this.ds_hpcmQna.rowposition;
	if (nRow < 0 ) return;
	var nQnaSn = this.ds_hpcmQna.getColumn(nRow, "QNA_SN");
	
	
	this.fn_qnaCntCheck(nQnaSn);		//삭제건수 구함(동기)
	
	if (this.fn_canDelCheck() && Number(this.ds_hpcmCnt.getColumn(0, "CNT")) == 0) {
		if (this.fn_authCheck()) {
			if(this.gfn_message("confirm.미사용.삭제여부")) {
				this.ds_hpcmQna.deleteRow(nRow);
			}
		} else {
			this.gfn_message("fail.삭제.불가", "다른 사용자가 등록한 Q&A는")
		}
	} else {
		this.gfn_message("fail.삭제.불가", "답변이 등록된 Q&A는");
	}
}

// 현재 트리에 답변을 추가
this.fn_qnaAddRow = function()
{
	var nCurRow = this.ds_hpcmQna.rowposition;
	var nLastRow = this.fn_getTreeLastRow(nCurRow, this.div_work.grd_qnaList);
	var userId = application.gv_userId;
	if (nLastRow == -1) nLastRow = 0;

	var nRow;
	
	var qna_lvl = this.ds_hpcmQna.getColumn(nCurRow, "QNA_LEVEL");
	if( qna_lvl == null || qna_lvl == "undefined") {
		qna_lvl = 0;
	}
	//기본값 설정
	if (nCurRow != -1) {
		//선택한것이 있으면 기본값 설정
		if (this.comUtils.isNullEmpty(this.ds_hpcmQna.getColumn(nCurRow, "QNA_SN"))) {
			this.gfn_message("comm.정보.저장.요청", "상위 Q&A");	//{0} 정보를 저장하시기 바랍니다.
			return;
		}
		nRow = this.ds_hpcmQna.insertRow(nLastRow + 1);
		this.ds_hpcmQna.setColumn(nRow, "QNA_LEVEL", qna_lvl + 1);
		var nPageId = this.ds_hpcmQna.getColumn(nCurRow, "PAGE_ID");
		var nPageNm = this.ds_hpcmQna.getColumn(nCurRow, "PAGE_NM");
		var nQnaSn  = this.ds_hpcmQna.getColumn(nCurRow, "QNA_SN");
		var nVerSn  = this.ds_hpcmQna.getColumn(nCurRow, "VER_SN");
		var nMenuId = this.ds_hpcmQna.getColumn(nCurRow, "MENU_ID");
		var nHpcmId = this.ds_hpcmQna.getColumn(nCurRow, "HPCM_ID");
		
		
		this.ds_hpcmQna.setColumn(nRow, "PAGE_ID"		, nPageId);
		this.ds_hpcmQna.setColumn(nRow, "PAGE_NM"		, nPageNm);
		this.ds_hpcmQna.setColumn(nRow, "REFRN_QNA_SN" 	, nQnaSn);
		this.ds_hpcmQna.setColumn(nRow, "VER_SN" 		, nVerSn);
		this.ds_hpcmQna.setColumn(nRow, "MENU_ID"		, nMenuId);
		this.ds_hpcmQna.setColumn(nRow, "HPCM_ID"		, nHpcmId);
		this.div_work.cbo_qnaSeCd.set_index(1);
	} else {
		nRow = this.ds_hpcmQna.insertRow(nLastRow + 1);
		this.ds_hpcmQna.setColumn(nRow, "QNA_LEVEL", 0);
		this.div_work.cbo_qnaSeCd.set_index(0);
	}
	this.ds_hpcmQna.setColumn(nRow, "QNA_SJ"		, "");
	this.ds_hpcmQna.setColumn(nRow, "REGISTER_ID"	, userId);
	this.ds_hpcmQna.setColumn(nRow, "REGISTER_NM",	this.gfn_getUserName());
	
	this.fn_popupPageActive();
	this.fn_detailEnable();
}

//추가시 현재 선택 트리의 마지막 부분에 추가
this.fn_getTreeLastRow = function(nRow, grdList)
{
	var nLastRow = grdList.getTreeChildRow(nRow, -1);
	if (nLastRow != -1) {
		nLastRow = this.fn_getTreeLastRow(nLastRow, grdList);
	} else {
		return nRow;
	}
	return nLastRow;
}


//신규 Q&A 작성
this.fn_qnaNewRow = function()
{
	var nCnt = this.ds_hpcmQna.rowcount;
	var nRow = this.ds_hpcmQna.addRow();
	var userId = application.gv_userId;
	if (nCnt > 0) {
		var nPageId = this.ds_hpcmQna.getColumn(0, "PAGE_ID");
		var nPageNm = this.ds_hpcmQna.getColumn(0, "PAGE_NM");
		var nMenuId = this.ds_hpcmQna.getColumn(0, "MENU_ID");
		var nHpcmId = this.ds_hpcmQna.getColumn(0, "HPCM_ID");
		
		this.ds_hpcmQna.setColumn(nRow, "PAGE_ID"		, nPageId);
		this.ds_hpcmQna.setColumn(nRow, "PAGE_NM"		, nPageNm);
		this.ds_hpcmQna.setColumn(nRow, "MENU_ID"		, nMenuId);
		this.ds_hpcmQna.setColumn(nRow, "HPCM_ID"		, nHpcmId);
		
	}
	
	this.div_work.cbo_qnaSeCd.set_index(0);
	this.ds_hpcmQna.setColumn(nRow, "QNA_SJ"		, "");
	this.ds_hpcmQna.setColumn(nRow, "QNA_LEVEL", 0);
	this.ds_hpcmQna.setColumn(nRow, "REGISTER_ID"	, userId);
	this.ds_hpcmQna.setColumn(nRow, "REGISTER_NM",	this.gfn_getUserName());
	this.fn_popupPageActive();
	this.fn_detailEnable();
}

//페이지화면 검색버튼 활성/비활성화
this.fn_setPopupPageSearch = function(isActive) {
	if (this.ds_hpcmQna.rowposition == -1) return;
	
	if (this.comUtils.isNullEmpty(isActive)) {
		isActive = this.ds_hpcmQna.rowcount > 0 ? false: true;
	}
	this.div_work.btn_popupPageSearch.set_visible(isActive);
	this.div_work.btn_popupPageSearch.set_enable(isActive);
	this.div_work.btn_popupPageSearch.set_enableevent(isActive);
	
}


//페이지화면 검색버튼 활성/비활성
this.fn_popupPageActive = function () {
	if (this.ds_hpcmQna.rowcount == 1 && this.ds_hpcmQna.getRowType(0) == Dataset.ROWTYPE_INSERT)  {
		this.fn_setPopupPageSearch(true);
	} else {
		this.fn_setPopupPageSearch(false);
	}
}

/***********************************************************************
 * 설명: 팝업버튼 이벤트
 ************************************************************************/
 
//메뉴화면 팝업
this.div_search_btn_popupPage_onclick = function(obj:Button,  e:nexacro.ClickEventInfo)
{
	var param = {
		arg_0 : this,  //==> 필수, 팝업을 호출하는 form을 참조할 수 있도록 팝업에 Argument로 넘겨준다. (반드시 기술해야 함.)
		arg_1 : "1",   // 0->명칭, 1->코드
		arg_2 : null,
		arg_3 : null
	};
	this.gfn_popup("pagePopup", 710, 580, "화면목록 조회", param, "com::COM010600_P01.xfdl", "fn_popupCallBack", true);
}


//화면검색 팝업
this.div_work_btn_popupPageSearch_onclick = function(obj:Button,  e:nexacro.ClickEventInfo)
{
		var param = {
		arg_0 : this,  //==> 필수, 팝업을 호출하는 form을 참조할 수 있도록 팝업에 Argument로 넘겨준다. (반드시 기술해야 함.)
		arg_1 : "0",   // 0->명칭, 1->코드
		arg_2 : null,
		arg_3 : null
	};
	this.gfn_popup("pagePopupRegist", 710, 580, "화면목록 조회", param, "com::COM010600_P01.xfdl", "fn_popupCallBack", true);
}


this.div_search_btn_popupPage02_onclick = function(obj:Button,  e:nexacro.ClickEventInfo)
{
	var param = {
		arg_0 : this,  //==> 필수, 팝업을 호출하는 form을 참조할 수 있도록 팝업에 Argument로 넘겨준다. (반드시 기술해야 함.)
		arg_1 : "0",   // 0->명칭, 1->코드
		arg_2 : null,
		arg_3 : null
	};
	this.gfn_popup("pagePopup", 710, 580, "화면목록 조회", param, "com::COM010600_P01.xfdl", "fn_popupCallBack", true);
}


/***********************************************************************
* 사용자 정의 함수
************************************************************************/

//페이지화면 검색버튼 활성/비활성화
this.fn_setPopupPageSearch = function(isActive) {
	if (this.comUtils.isNullEmpty(isActive)) {
		isActive = this.ds_hpcmQna.rowcount > 0 ? false: true;
	}
	this.div_work.btn_popupPageSearch.set_visible(isActive);
	this.div_work.btn_popupPageSearch.set_enable(isActive);
	this.div_work.btn_popupPageSearch.set_enableevent(isActive);
	
}

//페이지화면 ID 정보 변경시
this.div_work_edt_pageId_onchanged = function(obj:Edit, e:nexacro.ChangeEventInfo)
{
	this.fn_popupPageActive();
}

//페이지화면 검색버튼 활성/비활성
this.fn_popupPageActive = function () {
	if (this.ds_hpcmQna.rowcount == 1 && this.ds_hpcmQna.getRowType(0) == Dataset.ROWTYPE_INSERT)  {
		this.fn_setPopupPageSearch(true);
	} else {
		this.fn_setPopupPageSearch(false);
	}
}

//수정가능 변경
this.fn_detailEnable = function ()
{
	
	var bEnable = this.fn_canModifyCheck();
	var nRow = this.ds_hpcmQna.rowposition;
	this.div_work.edt_qnaSj.set_readonly(!bEnable);
	this.div_work.txa_qnaCn.set_readonly(!bEnable);
	this.div_work.cbo_qnaSeCd.set_readonly(!bEnable);
	
	
	if (!this.div_work.cbo_qnaSeCd.readonly)  {
		var cQnaLvl = this.ds_hpcmQna.getColumn(nRow, "QNA_LEVEL");
		if (cQnaLvl == 0) this.div_work.cbo_qnaSeCd.set_readonly(true);
	}
}

//수정가능한지 체크
this.fn_canModifyCheck = function() {
	return this.fn_authCheck();
}

//기본적으로 삭제가 가능한지
this.fn_canDelCheck = function() {
	var curRow = this.ds_hpcmQna.rowposition;
	var nChildCount = this.div_work.grd_qnaList.getTreeChildCount(curRow);
	
	return  (nChildCount == 0)
}

//권한이 있는지 체크
this.fn_authCheck = function() {
	var userId = application.gv_userId;
	var userGrp = application.gv_userAuth;
	var curRow = this.ds_hpcmQna.rowposition;
	var curUserId = this.ds_hpcmQna.getColumn(curRow, "REGISTER_ID");
	
	return ((userId == curUserId) || (userGrp == "SA"))
}
//데이터셋 행변경
this.ds_hpcmQna_onrowposchanged = function(obj:Dataset, e:nexacro.DSRowPosChangeEventInfo)
{
	this.fn_detailEnable();
	this.fn_popupPageActive();
}

//삭제할 대상을 참조하는 Q&A 건수 조회
this.fn_qnaCntCheck = function(qnaSn)
{
	if (this.ds_cond01.rowcount == 0) this.ds_cond01.addRow();
	this.ds_cond01.setColumn(0, "QNA_SN", qnaSn);
	this.fn_transaction("HpcmQnaCnt");
}

/***********************************************************************
 * 설명: 신규처리
 ************************************************************************/
this.fn_insert= function()
{
	//초기화
	if (this.gfn_message("comm.행위여부", "초기화")) {
		this.ds_hpcmQna.clearData();
		this.ds_cond.clearData();
	}
}


/***********************************************************************
 * 설명: 취소처리
 ************************************************************************/
this.fn_cancel= function()
{
	this.fn_resetQna();
}

/***********************************************************************
 * 설명: 종료처리
 ************************************************************************/
this.fn_close = function(){
	this.close();
}


/***********************************************************************
 * 설명: 저장처리
 ************************************************************************/
this.fn_save = function(){
	this.fn_saveQna();
}

/***********************************************************************
 * 설명: 삭제처리
 ************************************************************************/
this.fn_delete =  function()
{
	this.fn_deleteRow();
}


//검색창의 엔터키 이벤트
this.div_search_edt_onkeyup = function(obj:Edit, e:nexacro.KeyEventInfo)
{
	if (e.keycode == 13) {
	// 엔터키 이벤트 : 자동 조회
		this.fn_search();
	}
}


]]></Script>
  </Form>
</FDL>
