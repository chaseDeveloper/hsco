<?xml version="1.0" encoding="utf-8"?>
<FDL version="1.5">
  <TypeDefinition url="..\..\default_typedef.xml"/>
  <Form id="FUN040304" classname="FUN040304" left="0" top="0" width="1059" height="735" titletext="자금집행계획등록" onload="FUN040304_onload" oninit="FUN040304_oninit">
    <Layouts>
      <Layout>
        <Grid id="grd_mnthngCptalPlan" taborder="7" useinputpanel="false" left="0" top="99" right="28" cellsizingtype="col" autofittype="none" autoenter="select" bottom="10" treeinitstatus="expand,all" treeuseimage="false" treeuseexpandkey="true" treeusecheckbox="false" binddataset="ds_mnthngCptalPlan">
          <Formats>
            <Format id="default">
              <Columns>
                <Column size="40"/>
                <Column size="80"/>
                <Column size="70"/>
                <Column size="130"/>
                <Column size="70"/>
                <Column size="150"/>
                <Column size="70"/>
                <Column size="130"/>
                <Column size="150"/>
                <Column size="150"/>
                <Column size="150"/>
                <Column size="150"/>
                <Column size="150"/>
                <Column size="150"/>
                <Column size="150"/>
                <Column size="150"/>
                <Column size="150"/>
                <Column size="150"/>
                <Column size="150"/>
                <Column size="150"/>
                <Column size="150"/>
                <Column size="150"/>
                <Column size="150"/>
              </Columns>
              <Rows>
                <Row size="24" band="head"/>
                <Row size="24" band="head"/>
                <Row size="24"/>
                <Row size="24" band="summ"/>
              </Rows>
              <Band id="head">
                <Cell rowspan="2" text="승인&#13;&#10;여부"/>
                <Cell col="1" rowspan="2" text="부서"/>
                <Cell col="2" colspan="8" text="예산과목"/>
                <Cell col="10" colspan="13" text="집행계획"/>
                <Cell row="1" col="2" colspan="2" text="예산계정"/>
                <Cell row="1" col="4" colspan="2" text="사업지구"/>
                <Cell row="1" col="6" colspan="2" text="지출단위"/>
                <Cell row="1" col="8" text="이월예산"/>
                <Cell row="1" col="9" text="예산총액"/>
                <Cell row="1" col="10" text="계획합계"/>
                <Cell row="1" col="11" text="1월"/>
                <Cell row="1" col="12" text="2월"/>
                <Cell row="1" col="13" text="3월"/>
                <Cell row="1" col="14" text="4월"/>
                <Cell row="1" col="15" text="5월"/>
                <Cell row="1" col="16" text="6월"/>
                <Cell row="1" col="17" text="7월"/>
                <Cell row="1" col="18" text="8월"/>
                <Cell row="1" col="19" text="9월"/>
                <Cell row="1" col="20" text="10월"/>
                <Cell row="1" col="21" text="11월"/>
                <Cell row="1" col="22" text="12월"/>
              </Band>
              <Band id="body">
                <Cell displaytype="checkbox" edittype="checkbox" text="bind:CHK"/>
                <Cell col="1" style="align:left;" text="bind:DEPT_NM"/>
                <Cell col="2" text="bind:BUDGET_ACNT_CODE"/>
                <Cell col="3" style="align:left;" text="bind:BUDGET_ACNT_NM"/>
                <Cell col="4" text="bind:DETAIL_BSNS_CODE"/>
                <Cell col="5" style="align:left;" text="bind:BSNS_NM"/>
                <Cell col="6" text="bind:EXPNDTR_UNIT_CODE"/>
                <Cell col="7" style="align:left;" text="bind:EXPNDTR_UNIT_NM"/>
                <Cell col="8" displaytype="number" style="align:right;" text="bind:CYFD_BUDGET" mask="9,999"/>
                <Cell col="9" displaytype="number" style="align:right;" text="bind:TOT_BUDGET_AM" mask="9,999"/>
                <Cell col="10" displaytype="number" style="align:right;" text="expr:PLAN_AMOUNT_01 + PLAN_AMOUNT_02  + PLAN_AMOUNT_03 + PLAN_AMOUNT_04 + PLAN_AMOUNT_05 + PLAN_AMOUNT_06 + PLAN_AMOUNT_07 + PLAN_AMOUNT_08 + PLAN_AMOUNT_09 + PLAN_AMOUNT_10 + PLAN_AMOUNT_11 + PLAN_AMOUNT_12" mask="9,999"/>
                <Cell col="11" displaytype="number" edittype="expr:(CONFM_AT == '1')?'none':'masknumber'" style="align:right;" text="bind:PLAN_AMOUNT_01" mask="9,999" editdisplay="expr:(CONFM_AT == '1')?'':'display'"/>
                <Cell col="12" displaytype="number" edittype="expr:(CONFM_AT == '1')?'none':'masknumber'" style="align:right;" text="bind:PLAN_AMOUNT_02" mask="9,999" editdisplay="expr:(CONFM_AT == '1')?'':'display'"/>
                <Cell col="13" displaytype="number" edittype="expr:(CONFM_AT == '1')?'none':'masknumber'" style="align:right;" text="bind:PLAN_AMOUNT_03" mask="9,999" editdisplay="expr:(CONFM_AT == '1')?'':'display'"/>
                <Cell col="14" displaytype="number" edittype="expr:(CONFM_AT == '1')?'none':'masknumber'" style="align:right;" text="bind:PLAN_AMOUNT_04" mask="9,999" editdisplay="expr:(CONFM_AT == '1')?'':'display'"/>
                <Cell col="15" displaytype="number" edittype="expr:(CONFM_AT == '1')?'none':'masknumber'" style="align:right;" text="bind:PLAN_AMOUNT_05" mask="9,999" editdisplay="expr:(CONFM_AT == '1')?'':'display'"/>
                <Cell col="16" displaytype="number" edittype="expr:(CONFM_AT == '1')?'none':'masknumber'" style="align:right;" text="bind:PLAN_AMOUNT_06" mask="9,999" editdisplay="expr:(CONFM_AT == '1')?'':'display'"/>
                <Cell col="17" displaytype="number" edittype="expr:(CONFM_AT == '1')?'none':'masknumber'" style="align:right;" text="bind:PLAN_AMOUNT_07" mask="9,999" editdisplay="expr:(CONFM_AT == '1')?'':'display'"/>
                <Cell col="18" displaytype="number" edittype="expr:(CONFM_AT == '1')?'none':'masknumber'" style="align:right;" text="bind:PLAN_AMOUNT_08" mask="9,999" editdisplay="expr:(CONFM_AT == '1')?'':'display'"/>
                <Cell col="19" displaytype="number" edittype="expr:(CONFM_AT == '1')?'none':'masknumber'" style="align:right;" text="bind:PLAN_AMOUNT_09" mask="9,999" editdisplay="expr:(CONFM_AT == '1')?'':'display'"/>
                <Cell col="20" displaytype="number" edittype="expr:(CONFM_AT == '1')?'none':'masknumber'" style="align:right;" text="bind:PLAN_AMOUNT_10" mask="9,999" editdisplay="expr:(CONFM_AT == '1')?'':'display'"/>
                <Cell col="21" displaytype="number" edittype="expr:(CONFM_AT == '1')?'none':'masknumber'" style="align:right;" text="bind:PLAN_AMOUNT_11" mask="9,999" editdisplay="expr:(CONFM_AT == '1')?'':'display'"/>
                <Cell col="22" displaytype="number" edittype="expr:(CONFM_AT == '1')?'none':'masknumber'" style="align:right;" text="bind:PLAN_AMOUNT_12" mask="9,999" editdisplay="expr:(CONFM_AT == '1')?'':'display'"/>
              </Band>
              <Band id="summary">
                <Cell/>
                <Cell col="1" displaytype="number" style="align:center;" text="expr:dataset.rowcount"/>
                <Cell col="2"/>
                <Cell col="3"/>
                <Cell col="4"/>
                <Cell col="5"/>
                <Cell col="6"/>
                <Cell col="7"/>
                <Cell col="8" displaytype="number" text="expr:dataset.getSum(&quot;CYFD_BUDGET&quot;)"/>
                <Cell col="9" displaytype="number" text="expr:dataset.getSum(&quot;TOT_BUDGET_AM&quot;)"/>
                <Cell col="10" displaytype="number" text="expr:dataset.getSum(&quot;PLAN_AMOUNT_01&quot;) + dataset.getSum(&quot;PLAN_AMOUNT_02&quot;)  +  dataset.getSum(&quot;PLAN_AMOUNT_03&quot;) + dataset.getSum(&quot;PLAN_AMOUNT_04&quot;) +dataset.getSum(&quot; PLAN_AMOUNT_05&quot;) +dataset.getSum(&quot;PLAN_AMOUNT_06&quot;) + dataset.getSum(&quot;PLAN_AMOUNT_07&quot;) + dataset.getSum(&quot;PLAN_AMOUNT_08&quot;) + dataset.getSum(&quot;PLAN_AMOUNT_09&quot;) + dataset.getSum(&quot;PLAN_AMOUNT_10&quot;) + dataset.getSum(&quot;PLAN_AMOUNT_11&quot;) + dataset.getSum(&quot;PLAN_AMOUNT_12&quot;)"/>
                <Cell col="11" displaytype="number" text="expr:dataset.getSum(&quot;PLAN_AMOUNT_01&quot;)"/>
                <Cell col="12" displaytype="number" text="expr:dataset.getSum(&quot;PLAN_AMOUNT_02&quot;)"/>
                <Cell col="13" displaytype="number" text="expr:dataset.getSum(&quot;PLAN_AMOUNT_03&quot;)"/>
                <Cell col="14" displaytype="number" text="expr:dataset.getSum(&quot;PLAN_AMOUNT_04&quot;)"/>
                <Cell col="15" displaytype="number" text="expr:dataset.getSum(&quot;PLAN_AMOUNT_05&quot;)"/>
                <Cell col="16" displaytype="number" text="expr:dataset.getSum(&quot;PLAN_AMOUNT_06&quot;)"/>
                <Cell col="17" displaytype="number" text="expr:dataset.getSum(&quot;PLAN_AMOUNT_07&quot;)"/>
                <Cell col="18" displaytype="number" text="expr:dataset.getSum(&quot;PLAN_AMOUNT_08&quot;)"/>
                <Cell col="19" displaytype="number" text="expr:dataset.getSum(&quot;PLAN_AMOUNT_09&quot;)"/>
                <Cell col="20" displaytype="number" text="expr:dataset.getSum(&quot;PLAN_AMOUNT_10&quot;)"/>
                <Cell col="21" displaytype="number" text="expr:dataset.getSum(&quot;PLAN_AMOUNT_12&quot;)"/>
                <Cell col="22" displaytype="number" text="expr:dataset.getSum(&quot;PLAN_AMOUNT_12&quot;)"/>
              </Band>
            </Format>
          </Formats>
        </Grid>
        <Static id="sta_acntCode" taborder="2" text="자금집행계획등록 리스트" cssclass="sta_WF_Title02" left="0" top="75" height="19" width="187"/>
        <Div id="div_search" taborder="0" left="0" top="0" height="65" cssclass="div_WFSA_Box" right="28">
          <Layouts>
            <Layout>
              <Static id="sta_YEAR" taborder="1" text="예산년도" wordwrap="char" left="15" top="5" width="64" height="21" cssclass="sta_WFSA_Label"/>
              <Static id="sta_BSNS_SE" taborder="7" text="예산구분" wordwrap="char" left="155" top="5" width="64" height="21" cssclass="sta_WFSA_Label"/>
              <Combo id="cbo_BSNS_SE" taborder="8" innerdataset="@ds_bdg001" codecolumn="CODE" datacolumn="CODE_NM" left="219" top="5" width="100" height="21"/>
              <Radio id="rdo_BALC_SE" taborder="11" innerdataset="@ds_bdg002" codecolumn="CODE" datacolumn="CODE_NM" direction="vertical" left="411" top="5" width="150" height="21"/>
              <Static id="sta_BALC_SE" taborder="10" text="수/지구분" wordwrap="char" left="334" top="5" width="77" height="21" cssclass="sta_WFSA_Label"/>
              <Static id="Static37" taborder="16" text="5" visible="false" left="488" bottom="0" width="38" height="5" style="background:#fa794f66;align:center middle;"/>
              <Static id="Static36" taborder="15" text="5" visible="false" left="512" top="0" width="38" height="5" style="background:#fa794f66;align:center middle;"/>
              <Static id="Static04" taborder="0" text="15" visible="false" left="0" top="5" bottom="5" width="15" style="background:#00ffff66;"/>
              <Static id="Static01" taborder="6" text="15" visible="false" left="139" top="5" bottom="5" width="15" style="background:#00ffff66;"/>
              <Static id="Static02" taborder="9" text="15" visible="false" left="318" top="5" bottom="5" width="15" style="background:#00ffff66;"/>
              <Static id="Static03" taborder="12" text="15" visible="false" left="560" top="5" bottom="5" width="15" style="background:#00ffff66;"/>
              <Spin id="spn_YEAR" taborder="2" value="0" left="79" top="5" width="60" height="21" style="buttonsize:15;" max="9999" min="1900" cssclass="spn_WF_Essential"/>
              <Static id="sta_DEPT_CODE" taborder="4" text="부서" wordwrap="char" left="14" top="37" width="38" height="21" cssclass="sta_WFSA_Label"/>
              <Div id="div_srchDept" taborder="5" url="com::deptCode.xfdl" left="79" top="37" height="21" async="false" width="195"/>
              <Edit id="edt_bsnsAreaCode" taborder="17" imemode="alpha" inputmode="upper" inputtype="number,english,alpha" lengthunit="utf8" maxlength="7" left="409" top="37" width="104" height="21" readonly="false" onchanged="div_search_edt_bsnsAreaCode_onchanged"/>
              <Static id="sta_BUDGET_SE00" taborder="19" text="사업지구" wordwrap="char" cssclass="sta_WFSA_Label" left="338" top="37" width="64" height="21"/>
              <Button id="btn_bsnsCode" taborder="20" onclick="div_detail_tab_rewardBsnsDstrc_tabpage1_btn_bsnsCode_onclick" cssclass="btn_WF_Search" left="490" top="36" width="21" height="21"/>
              <Edit id="edt_BSNS_NM" taborder="21" readonly="true" onkeyup="edt_BSNS_NM_onkeyup" cssclass="edt_WF_Readonly" left="515" top="37" width="250" height="21"/>
              <CheckBox id="chk_PLAN_REGIST_AT" taborder="22" text="계획등록여부" value="0" truevalue="1" falsevalue="0" top="37" width="100" height="21" left="854"/>
              <CheckBox id="chk_FIRST_PLAN_AT" taborder="23" text="최초계획여부" value="0" truevalue="1" falsevalue="0" left="854" top="5" width="100" height="21"/>
              <Radio id="rdo_APPR_SE" taborder="24" codecolumn="codecolumn" datacolumn="datacolumn" direction="vertical" left="653" top="5" width="181" height="21" onitemclick="div_search_rdo_APPR_SE_onitemclick">
                <Dataset id="innerdataset">
                  <ColumnInfo>
                    <Column id="codecolumn" size="256"/>
                    <Column id="datacolumn" size="256"/>
                  </ColumnInfo>
                  <Rows>
                    <Row>
                      <Col id="codecolumn">A</Col>
                      <Col id="datacolumn">전체</Col>
                    </Row>
                    <Row>
                      <Col id="codecolumn">1</Col>
                      <Col id="datacolumn">승인</Col>
                    </Row>
                    <Row>
                      <Col id="codecolumn">0</Col>
                      <Col id="datacolumn">미승인</Col>
                    </Row>
                  </Rows>
                </Dataset>
              </Radio>
              <Static id="sta_APPR_SE" taborder="25" text="승인구분" wordwrap="char" cssclass="sta_WFSA_Label" left="576" top="5" width="77" height="21"/>
            </Layout>
          </Layouts>
        </Div>
        <Static id="Static00" taborder="1" text="10" visible="false" left="0" top="65" right="28" height="10" style="background:#dc143c3c;align:center middle;"/>
        <Static id="Static04" taborder="6" text="5" visible="false" left="0" top="94" right="28" height="5" style="background:#dc143c3c;align:center middle;"/>
        <Button id="btn_Confirm" taborder="5" text="승인" cssclass="btn_WF_Process" top="74" right="82" width="52" height="21" onclick="btn_Confirm_onclick"/>
        <Static id="Static02" taborder="8" text="10" visible="false" left="0" right="28" height="10" style="background:#dc143c3c;align:center middle;" bottom="0"/>
        <Static id="Static06" taborder="24" text="15" visible="false" left="1031" top="0" width="15" height="735" style="background:#1b3cd23c;align:center middle;"/>
        <Static id="Static07" taborder="25" text="스&#13;&#10;크&#13;&#10;롤&#13;&#10;13" visible="false" top="0" right="0" width="13" height="735" style="background:#d07b173c;align:center middle;"/>
        <Grid id="grd_excel" taborder="26" binddataset="ds_export" autoenter="select" useinputpanel="false" cellsizingtype="col" treeusecheckbox="false" treeuseimage="false" treeinitstatus="expand,all" treeuseexpandkey="true" visible="false" left="72" top="198" right="457" bottom="271">
          <Formats>
            <Format id="default">
              <Columns>
                <Column size="120"/>
                <Column size="80"/>
                <Column size="150"/>
                <Column size="100"/>
                <Column size="150"/>
                <Column size="80"/>
                <Column size="170"/>
                <Column size="150"/>
                <Column size="150"/>
                <Column size="150"/>
                <Column size="150"/>
                <Column size="150"/>
                <Column size="150"/>
                <Column size="150"/>
                <Column size="150"/>
                <Column size="150"/>
                <Column size="150"/>
                <Column size="150"/>
                <Column size="150"/>
                <Column size="150"/>
                <Column size="150"/>
              </Columns>
              <Rows>
                <Row size="24" band="head"/>
                <Row size="24" band="head"/>
                <Row size="24"/>
              </Rows>
              <Band id="head">
                <Cell rowspan="2" text="부서"/>
                <Cell col="1" colspan="7" text="예산과목"/>
                <Cell col="8" colspan="13" text="집행계획"/>
                <Cell row="1" col="1" colspan="2" text="예산계정"/>
                <Cell row="1" col="3" colspan="2" text="사업지구"/>
                <Cell row="1" col="5" colspan="2" text="지출단위"/>
                <Cell row="1" col="7" text="예산총액"/>
                <Cell row="1" col="8" text="계획합계"/>
                <Cell row="1" col="9" text="1월"/>
                <Cell row="1" col="10" text="2월"/>
                <Cell row="1" col="11" text="3월"/>
                <Cell row="1" col="12" text="4월"/>
                <Cell row="1" col="13" text="5월"/>
                <Cell row="1" col="14" text="6월"/>
                <Cell row="1" col="15" text="7월"/>
                <Cell row="1" col="16" text="8월"/>
                <Cell row="1" col="17" text="9월"/>
                <Cell row="1" col="18" text="10월"/>
                <Cell row="1" col="19" text="11월"/>
                <Cell row="1" col="20" text="12월"/>
              </Band>
              <Band id="body">
                <Cell style="align:left;" text="bind:DEPT_NM"/>
                <Cell col="1" text="bind:BUDGET_ACNT_CODE"/>
                <Cell col="2" style="align:left;" text="bind:BUDGET_ACNT_NM"/>
                <Cell col="3" text="bind:DETAIL_BSNS_CODE"/>
                <Cell col="4" style="align:left;" text="bind:BSNS_NM"/>
                <Cell col="5" text="bind:EXPNDTR_UNIT_CODE"/>
                <Cell col="6" style="align:left;" text="bind:EXPNDTR_UNIT_NM"/>
                <Cell col="7" displaytype="number" style="align:right;" text="bind:BUDGET_AM" mask="9,999"/>
                <Cell col="8" displaytype="number" style="align:right;" text="expr:PLAN_AMOUNT_01 + PLAN_AMOUNT_02  + PLAN_AMOUNT_03 + PLAN_AMOUNT_04 + PLAN_AMOUNT_05 + PLAN_AMOUNT_06 + PLAN_AMOUNT_07 + PLAN_AMOUNT_08 + PLAN_AMOUNT_09 + PLAN_AMOUNT_10 + PLAN_AMOUNT_11 + PLAN_AMOUNT_12" mask="9,999"/>
                <Cell col="9" displaytype="number" edittype="expr:(CONFM_AT == '1')?'none':'masknumber'" style="align:right;" text="bind:PLAN_AMOUNT_01" mask="9,999"/>
                <Cell col="10" displaytype="number" edittype="expr:(CONFM_AT == '1')?'none':'masknumber'" style="align:right;" text="bind:PLAN_AMOUNT_02" mask="9,999"/>
                <Cell col="11" displaytype="number" edittype="expr:(CONFM_AT == '1')?'none':'masknumber'" style="align:right;" text="bind:PLAN_AMOUNT_03" mask="9,999"/>
                <Cell col="12" displaytype="number" edittype="expr:(CONFM_AT == '1')?'none':'masknumber'" style="align:right;" text="bind:PLAN_AMOUNT_04" mask="9,999"/>
                <Cell col="13" displaytype="number" edittype="expr:(CONFM_AT == '1')?'none':'masknumber'" style="align:right;" text="bind:PLAN_AMOUNT_05" mask="9,999"/>
                <Cell col="14" displaytype="number" edittype="expr:(CONFM_AT == '1')?'none':'masknumber'" style="align:right;" text="bind:PLAN_AMOUNT_06" mask="9,999"/>
                <Cell col="15" displaytype="number" edittype="expr:(CONFM_AT == '1')?'none':'masknumber'" style="align:right;" text="bind:PLAN_AMOUNT_07" mask="9,999"/>
                <Cell col="16" displaytype="number" edittype="expr:(CONFM_AT == '1')?'none':'masknumber'" style="align:right;" text="bind:PLAN_AMOUNT_08" mask="9,999"/>
                <Cell col="17" displaytype="number" edittype="expr:(CONFM_AT == '1')?'none':'masknumber'" style="align:right;" text="bind:PLAN_AMOUNT_09" mask="9,999"/>
                <Cell col="18" displaytype="number" edittype="expr:(CONFM_AT == '1')?'none':'masknumber'" style="align:right;" text="bind:PLAN_AMOUNT_10" mask="9,999"/>
                <Cell col="19" displaytype="number" edittype="expr:(CONFM_AT == '1')?'none':'masknumber'" style="align:right;" text="bind:PLAN_AMOUNT_11" mask="9,999"/>
                <Cell col="20" displaytype="number" edittype="expr:(CONFM_AT == '1')?'none':'masknumber'" style="align:right;" text="bind:PLAN_AMOUNT_12" mask="9,999"/>
              </Band>
            </Format>
          </Formats>
        </Grid>
        <Button id="btn_excelImpot" taborder="27" onclick="btn_excelImpot_onclick" cssclass="btn_WF_Gridexcelup" top="75" right="28" width="25" height="19"/>
        <Button id="btn_excelDown" taborder="28" onclick="btn_excelDown_onclick" cssclass="btn_WF_Gridexceldn" top="75" right="55" width="25" height="19"/>
        <Button id="btn_ConfirmAll" taborder="29" text="일괄승인" cssclass="btn_WF_Process" top="74" right="136" width="64" height="21" onclick="btn_ConfirmAll_onclick"/>
      </Layout>
    </Layouts>
    <Objects>
      <Dataset id="ds_cond" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="YEAR" type="STRING" size="4"/>
          <Column id="DEPT_CODE" type="STRING" size="1"/>
          <Column id="DEPT_NM" type="STRING" size="256"/>
          <Column id="ALL_BSNS_SE" type="STRING" size="256"/>
          <Column id="BSNS_SE" type="STRING" size="1"/>
          <Column id="BALC_SE" type="STRING" size="1"/>
          <Column id="BUDGET_SE" type="STRING" size="1"/>
          <Column id="BSNS_CODE" type="STRING" size="6"/>
          <Column id="BSNS_NM" type="STRING" size="256"/>
          <Column id="ACNT_CODE" type="STRING" size="8"/>
          <Column id="ACNT_NM" type="STRING" size="256"/>
          <Column id="DETAIL_BSNS_CODE" type="STRING" size="256"/>
          <Column id="PLAN_REGIST_AT" type="STRING" size="256"/>
          <Column id="FIRST_PLAN_AT" type="STRING" size="256"/>
          <Column id="CONFM_AT" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_condSub1" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="YEAR" type="STRING" size="4"/>
          <Column id="BSNS_SE" type="STRING" size="1"/>
          <Column id="BALC_SE" type="STRING" size="1"/>
          <Column id="BUDGET_ACNT_CODE" type="STRING" size="8"/>
          <Column id="DEPT_CODE" type="STRING" size="1"/>
          <Column id="DEPT_NM" type="STRING" size="256"/>
          <Column id="BUDGET_SE" type="STRING" size="1"/>
          <Column id="DETAIL_BSNS_CODE" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_condSub2" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="YEAR" type="STRING" size="4"/>
          <Column id="BSNS_SE" type="STRING" size="1"/>
          <Column id="DETAIL_BSNS_CODE" type="STRING" size="6"/>
          <Column id="BALC_SE" type="STRING" size="1"/>
          <Column id="BUDGET_SE" type="STRING" size="1"/>
          <Column id="DEPT_CODE" type="STRING" size="1"/>
          <Column id="DEPT_NM" type="STRING" size="256"/>
          <Column id="BUDGET_ACNT_CODE" type="STRING" size="8"/>
          <Column id="EXPNDTR_UNIT_CODE" type="STRING" size="8"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_bdg001" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="ETC1" type="string" size="32"/>
          <Column id="VAL2" type="string" size="32"/>
          <Column id="CODE_CN" type="string" size="32"/>
          <Column id="VAL1" type="string" size="32"/>
          <Column id="USE_YN" type="string" size="32"/>
          <Column id="ETC3" type="string" size="32"/>
          <Column id="VAL4" type="string" size="32"/>
          <Column id="ETC2" type="string" size="32"/>
          <Column id="VAL3" type="string" size="32"/>
          <Column id="CODE_ORDR" type="bigdecimal" size="16"/>
          <Column id="MSTK_VAL" type="string" size="32"/>
          <Column id="ALL_CODE_NM" type="string" size="32"/>
          <Column id="CODE_NM" type="string" size="32"/>
          <Column id="INT_VAL" type="string" size="32"/>
          <Column id="GRP_CODE" type="string" size="32"/>
          <Column id="CODE" type="string" size="32"/>
          <Column id="VAL0" type="string" size="32"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_bdg002" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="ETC1" type="string" size="32"/>
          <Column id="VAL2" type="string" size="32"/>
          <Column id="CODE_CN" type="string" size="32"/>
          <Column id="VAL1" type="string" size="32"/>
          <Column id="USE_YN" type="string" size="32"/>
          <Column id="ETC3" type="string" size="32"/>
          <Column id="VAL4" type="string" size="32"/>
          <Column id="ETC2" type="string" size="32"/>
          <Column id="VAL3" type="string" size="32"/>
          <Column id="CODE_ORDR" type="bigdecimal" size="16"/>
          <Column id="MSTK_VAL" type="string" size="32"/>
          <Column id="ALL_CODE_NM" type="string" size="32"/>
          <Column id="CODE_NM" type="string" size="32"/>
          <Column id="INT_VAL" type="string" size="32"/>
          <Column id="GRP_CODE" type="string" size="32"/>
          <Column id="CODE" type="string" size="32"/>
          <Column id="VAL0" type="string" size="32"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_acntCode" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false" onrowposchanged="ds_acntCode_onrowposchanged" canrowposchange="ds_acntCode_canrowposchange">
        <ColumnInfo>
          <Column id="YEAR" type="STRING" size="4"/>
          <Column id="BSNS_SE" type="STRING" size="1"/>
          <Column id="BALC_SE" type="STRING" size="1"/>
          <Column id="BUDGET_ACNT_CODE" type="STRING" size="8"/>
          <Column id="BUDGET_ACNT_NM" type="STRING" size="100"/>
          <Column id="BUDGET_ACNT_NM2" type="STRING" size="256"/>
          <Column id="ACNT_LEVEL" type="STRING" size="1"/>
          <Column id="UPPER_ACNT_CODE" type="STRING" size="8"/>
          <Column id="ELPD_EXCUT_RT" type="BIGDECIMAL" size="22"/>
          <Column id="ELPD_EXCUT_AT" type="STRING" size="1"/>
          <Column id="PLAN_REGIST_AT" type="STRING" size="1"/>
          <Column id="GWAN" type="STRING" size="256"/>
          <Column id="HANG" type="STRING" size="256"/>
          <Column id="SEHANG" type="STRING" size="256"/>
          <Column id="MOK" type="STRING" size="256"/>
          <Column id="SEMOK" type="STRING" size="256"/>
          <Column id="DEMAND_BUDGET_AM" type="BIGDECIMAL" size="22"/>
          <Column id="FRMTN_BUDGET_AM" type="BIGDECIMAL" size="22"/>
          <Column id="MIN_AMT" type="BIGDECIMAL" size="22"/>
          <Column id="EXECUT_BUDGET_AM" type="BIGDECIMAL" size="22"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_frmtnBudget" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false" onrowposchanged="ds_frmtnBudget_onrowposchanged" canrowposchange="ds_frmtnBudget_canrowposchange" oncolumnchanged="ds_frmtnBudget_oncolumnchanged">
        <ColumnInfo>
          <Column id="YEAR" type="STRING" size="4"/>
          <Column id="BSNS_SE" type="STRING" size="1"/>
          <Column id="DETAIL_BSNS_CODE" type="STRING" size="6"/>
          <Column id="DETAIL_BSNS_NM" type="STRING" size="256"/>
          <Column id="BALC_SE" type="STRING" size="1"/>
          <Column id="BUDGET_SE" type="STRING" size="1"/>
          <Column id="DEPT_CODE" type="STRING" size="6"/>
          <Column id="DEPT_NM" type="STRING" size="256"/>
          <Column id="BUDGET_ACNT_CODE" type="STRING" size="8"/>
          <Column id="BUDGET_ACNT_NM" type="STRING" size="256"/>
          <Column id="EXPNDTR_UNIT_CODE" type="STRING" size="8"/>
          <Column id="EXPNDTR_UNIT_NM" type="STRING" size="1000"/>
          <Column id="COMPUT_BSIS_DTLS" type="STRING" size="1000"/>
          <Column id="ELPD_EXCUT_AT" type="STRING" size="1"/>
          <Column id="BUDGET_AM" type="BIGDECIMAL" size="22"/>
          <Column id="SE_ACCNUT_ACNT_CODE" type="STRING" size="11"/>
          <Column id="EXPNDTR_POSBL_AT" type="STRING" size="256"/>
          <Column id="BUDGET_0_AM" type="BIGDECIMAL" size="256"/>
          <Column id="BUDGET_1_AM" type="BIGDECIMAL" size="256"/>
          <Column id="BUDGET_2_AM" type="BIGDECIMAL" size="256"/>
          <Column id="BUDGET_3_AM" type="BIGDECIMAL" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_frmtnComputBsis" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false" oncolumnchanged="ds_frmtnComputBsis_oncolumnchanged">
        <ColumnInfo>
          <Column id="YEAR" type="STRING" size="4"/>
          <Column id="BSNS_SE" type="STRING" size="1"/>
          <Column id="BALC_SE" type="STRING" size="1"/>
          <Column id="DETAIL_BSNS_CODE" type="STRING" size="6"/>
          <Column id="BUDGET_SE" type="STRING" size="1"/>
          <Column id="BUDGET_ACNT_CODE" type="STRING" size="8"/>
          <Column id="DEPT_CODE" type="STRING" size="6"/>
          <Column id="EXPNDTR_UNIT_CODE" type="STRING" size="8"/>
          <Column id="COMPUT_BSIS_CODE" type="STRING" size="2"/>
          <Column id="COMPUT_BSIS_NM" type="STRING" size="1000"/>
          <Column id="COMPUT_BSIS_DTLS" type="STRING" size="1000"/>
          <Column id="COMPUT_BSIS_REFRN" type="STRING" size="1000"/>
          <Column id="BUDGET_AM" type="BIGDECIMAL" size="22"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_inpYn" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="INP_YN" type="STRING" size="1"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_validation" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="compId" type="STRING" size="256"/>
          <Column id="colId" type="STRING" size="256"/>
          <Column id="msgId" type="STRING" size="256"/>
          <Column id="PK" type="STRING" size="256"/>
          <Column id="notNull" type="STRING" size="256"/>
          <Column id="nlength" type="STRING" size="256"/>
          <Column id="lengthChkGb" type="STRING" size="256"/>
          <Column id="type" type="STRING" size="256"/>
          <Column id="from" type="STRING" size="256"/>
          <Column id="to" type="STRING" size="256"/>
          <Column id="expr" type="STRING" size="256"/>
          <Column id="func" type="STRING" size="256"/>
        </ColumnInfo>
        <Rows>
          <Row>
            <Col id="compId">ds_frmtnBudget</Col>
            <Col id="colId">DETAIL_BSNS_CODE</Col>
            <Col id="msgId">사업코드</Col>
            <Col id="PK"/>
            <Col id="notNull">Y</Col>
          </Row>
          <Row>
            <Col id="compId">ds_frmtnBudget</Col>
            <Col id="colId">DEPT_CODE</Col>
            <Col id="msgId">부서코드</Col>
            <Col id="notNull">Y</Col>
            <Col id="PK"/>
          </Row>
          <Row>
            <Col id="compId">ds_frmtnBudget</Col>
            <Col id="colId">BUDGET_ACNT_CODE</Col>
            <Col id="msgId">예산계정코드</Col>
            <Col id="PK">Y</Col>
            <Col id="notNull">Y</Col>
          </Row>
          <Row>
            <Col id="colId">EXPNDTR_UNIT_CODE</Col>
            <Col id="compId">ds_frmtnBudget</Col>
            <Col id="msgId">지출단위코드</Col>
            <Col id="notNull">Y</Col>
            <Col id="PK">Y</Col>
          </Row>
          <Row>
            <Col id="compId">ds_frmtnBudget</Col>
            <Col id="colId">EXPNDTR_UNIT_NM</Col>
            <Col id="msgId">지출단위명</Col>
            <Col id="notNull">Y</Col>
          </Row>
          <Row>
            <Col id="compId">ds_frmtnBudget</Col>
            <Col id="colId">BUDGET_AM</Col>
            <Col id="msgId">예산액</Col>
            <Col id="notNull">Y</Col>
            <Col id="nlength">15</Col>
            <Col id="lengthChkGb">LE</Col>
          </Row>
          <Row>
            <Col id="compId">ds_frmtnComputBsis</Col>
            <Col id="colId">COMPUT_BSIS_CODE</Col>
            <Col id="msgId">산출기초코드</Col>
            <Col id="notNull">Y</Col>
          </Row>
          <Row>
            <Col id="compId">ds_frmtnComputBsis</Col>
            <Col id="colId">COMPUT_BSIS_NM</Col>
            <Col id="notNull">Y</Col>
            <Col id="msgId">산출기초명</Col>
          </Row>
          <Row>
            <Col id="compId">ds_frmtnComputBsis</Col>
            <Col id="colId">BUDGET_AM</Col>
            <Col id="msgId">예산액</Col>
            <Col id="notNull">Y</Col>
            <Col id="nlength">15</Col>
            <Col id="lengthChkGb">LE</Col>
          </Row>
        </Rows>
      </Dataset>
      <Dataset id="ds_print" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="YEAR" type="STRING" size="256"/>
          <Column id="BSNS_SE" type="STRING" size="256"/>
          <Column id="BALC_SE" type="STRING" size="256"/>
          <Column id="BUDGET_ACNT_CODE" type="STRING" size="256"/>
          <Column id="BUDGET_ACNT_NM" type="STRING" size="256"/>
          <Column id="ACNT_LEVEL" type="STRING" size="256"/>
          <Column id="UPPER_ACNT_CODE" type="STRING" size="256"/>
          <Column id="GWAN" type="STRING" size="256"/>
          <Column id="HANG" type="STRING" size="256"/>
          <Column id="SEHANG" type="STRING" size="256"/>
          <Column id="MOK" type="STRING" size="256"/>
          <Column id="TAXITM_NM" type="STRING" size="256"/>
          <Column id="DEPT_NM" type="STRING" size="256"/>
          <Column id="EXPNDTR_UNIT_NM" type="STRING" size="256"/>
          <Column id="COMPUT_BSIS_CODE" type="STRING" size="256"/>
          <Column id="COMPUT_BSIS_NM" type="STRING" size="256"/>
          <Column id="COMPUT_BSIS" type="STRING" size="256"/>
          <Column id="COMPUT_BSIS_DTLS" type="STRING" size="256"/>
          <Column id="BUDGET_AM" type="BIGDECIMAL" size="256"/>
          <Column id="BSIS_BUDGET_AM" type="BIGDECIMAL" size="256"/>
          <Column id="PRV_EXECUT_AM" type="BIGDECIMAL" size="256"/>
          <Column id="NOW_EXECUT_AM" type="BIGDECIMAL" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_tbcmpRewardBsnsDstrc" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false" canrowposchange="ds_tbcmpRewardBsnsDstrc_canrowposchange">
        <ColumnInfo>
          <Column id="TYPE_CODE" type="STRING" size="256"/>
          <Column id="AREA_CODE" type="STRING" size="256"/>
          <Column id="BSNS_TYPE_NM" type="STRING" size="256"/>
          <Column id="BSNS_AREA_CODE" type="STRING" size="256"/>
          <Column id="BSNS_AREA_NM" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_bsnsType" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="CODE" type="STRING" size="256"/>
          <Column id="CODE_NM" type="STRING" size="256"/>
          <Column id="FULL_CODE_NM" type="STRING" size="256"/>
          <Column id="FULLCODE" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_mnthngCptalPlan" cancolumnchange="ds_mnthngCptalPlan_cancolumnchange" oncolumnchanged="ds_mnthngCptalPlan_oncolumnchanged">
        <ColumnInfo>
          <Column id="BUDGET_ACNT_NM" type="STRING" size="256"/>
          <Column id="EXPNDTR_UNIT_NM" type="STRING" size="256"/>
          <Column id="BUDGET_AM" type="BIGDECIMAL" size="256"/>
          <Column id="CYFD_BUDGET" type="BIGDECIMAL" size="256"/>
          <Column id="TOT_BUDGET_AM" type="BIGDECIMAL" size="256"/>
          <Column id="DETAIL_BSNS_CODE" type="STRING" size="256"/>
          <Column id="DEPT_CODE" type="STRING" size="256"/>
          <Column id="BUDGET_YEAR" type="STRING" size="256"/>
          <Column id="BSNS_SE" type="STRING" size="256"/>
          <Column id="BALC_SE" type="STRING" size="256"/>
          <Column id="BUDGET_ACNT_CODE" type="STRING" size="256"/>
          <Column id="EXPNDTR_UNIT_CODE" type="STRING" size="256"/>
          <Column id="CONFM_AT" type="STRING" size="256"/>
          <Column id="CHK" type="STRING" size="256"/>
          <Column id="PLAN_AMOUNT_01" type="INT" size="256"/>
          <Column id="PLAN_AMOUNT_02" type="INT" size="256"/>
          <Column id="PLAN_AMOUNT_03" type="INT" size="256"/>
          <Column id="PLAN_AMOUNT_04" type="INT" size="256"/>
          <Column id="PLAN_AMOUNT_05" type="INT" size="256"/>
          <Column id="PLAN_AMOUNT_06" type="INT" size="256"/>
          <Column id="PLAN_AMOUNT_07" type="INT" size="256"/>
          <Column id="PLAN_AMOUNT_08" type="INT" size="256"/>
          <Column id="PLAN_AMOUNT_09" type="INT" size="256"/>
          <Column id="PLAN_AMOUNT_10" type="INT" size="256"/>
          <Column id="PLAN_AMOUNT_11" type="INT" size="256"/>
          <Column id="PLAN_AMOUNT_12" type="INT" size="256"/>
          <Column id="DEPT_NM" type="STRING" size="256"/>
          <Column id="BSNS_NM" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_import">
        <ColumnInfo>
          <Column id="Column0" type="STRING" size="256"/>
          <Column id="Column1" type="STRING" size="256"/>
          <Column id="Column2" type="STRING" size="256"/>
          <Column id="Column3" type="STRING" size="256"/>
          <Column id="Column4" type="STRING" size="256"/>
          <Column id="Column5" type="STRING" size="256"/>
          <Column id="Column6" type="INT" size="256"/>
          <Column id="Column7" type="INT" size="256"/>
          <Column id="Column8" type="INT" size="256"/>
          <Column id="Column9" type="INT" size="256"/>
          <Column id="Column10" type="INT" size="256"/>
          <Column id="Column11" type="INT" size="256"/>
          <Column id="Column12" type="INT" size="256"/>
          <Column id="Column13" type="INT" size="256"/>
          <Column id="Column14" type="INT" size="256"/>
          <Column id="Column15" type="INT" size="256"/>
          <Column id="Column16" type="INT" size="256"/>
          <Column id="Column17" type="INT" size="256"/>
          <Column id="Column18" type="INT" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_export" cancolumnchange="ds_mnthngCptalPlan_cancolumnchange">
        <ColumnInfo>
          <Column id="BUDGET_ACNT_NM" type="STRING" size="256"/>
          <Column id="EXPNDTR_UNIT_NM" type="STRING" size="256"/>
          <Column id="BUDGET_AM" type="INT" size="256"/>
          <Column id="DETAIL_BSNS_CODE" type="STRING" size="256"/>
          <Column id="DEPT_CODE" type="STRING" size="256"/>
          <Column id="BUDGET_YEAR" type="STRING" size="256"/>
          <Column id="BSNS_SE" type="STRING" size="256"/>
          <Column id="BALC_SE" type="STRING" size="256"/>
          <Column id="BUDGET_ACNT_CODE" type="STRING" size="256"/>
          <Column id="EXPNDTR_UNIT_CODE" type="STRING" size="256"/>
          <Column id="CONFM_AT" type="STRING" size="256"/>
          <Column id="CHK" type="STRING" size="256"/>
          <Column id="PLAN_AMOUNT_01" type="INT" size="256"/>
          <Column id="PLAN_AMOUNT_02" type="INT" size="256"/>
          <Column id="PLAN_AMOUNT_03" type="INT" size="256"/>
          <Column id="PLAN_AMOUNT_04" type="INT" size="256"/>
          <Column id="PLAN_AMOUNT_05" type="INT" size="256"/>
          <Column id="PLAN_AMOUNT_06" type="INT" size="256"/>
          <Column id="PLAN_AMOUNT_07" type="INT" size="256"/>
          <Column id="PLAN_AMOUNT_08" type="INT" size="256"/>
          <Column id="PLAN_AMOUNT_09" type="INT" size="256"/>
          <Column id="PLAN_AMOUNT_10" type="INT" size="256"/>
          <Column id="PLAN_AMOUNT_11" type="INT" size="256"/>
          <Column id="PLAN_AMOUNT_12" type="INT" size="256"/>
          <Column id="DEPT_NM" type="STRING" size="256"/>
          <Column id="BSNS_NM" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
    </Objects>
    <Bind>
      <BindItem id="item0" compid="div_search.rdo_BALC_SE" propid="value" datasetid="ds_cond" columnid="BALC_SE"/>
      <BindItem id="item2" compid="div_search.cbo_BSNS_SE" propid="value" datasetid="ds_cond" columnid="BSNS_SE"/>
      <BindItem id="item14" compid="div_search.spn_YEAR" propid="value" datasetid="ds_cond" columnid="YEAR"/>
      <BindItem id="item90" compid="div_search.edt_bsnsAreaCode" propid="value" datasetid="ds_cond" columnid="DETAIL_BSNS_CODE"/>
      <BindItem id="item13" compid="div_search.edt_BSNS_NM" propid="value" datasetid="ds_cond" columnid="BSNS_NM"/>
      <BindItem id="item12" compid="div_search.chk_PLAN_REGIST_AT" propid="value" datasetid="ds_cond" columnid="PLAN_REGIST_AT"/>
      <BindItem id="item1" compid="div_search.chk_FIRST_PLAN_AT" propid="value" datasetid="ds_cond" columnid="FIRST_PLAN_AT"/>
      <BindItem id="item3" compid="div_search.rdo_APPR_SE" propid="value" datasetid="ds_cond" columnid="CONFM_AT"/>
    </Bind>
    <Script type="xscript5.0"><![CDATA[/**********************************************************************
* 화면ID   : FUN040304.xfdl
* 화면명   : 자금집행계획등록
* 화면설명 : 자금집행계획등록을 관리한다.
* 작성일   : 2015.07.15
* 작성자   : 정윤원
* 수정이력 : 
***********************************************************************
*     수정일     수정자   내용
***********************************************************************
*
***********************************************************************
*/

/**********************************************************************
* Script Include 
***********************************************************************/
// 시스템 공통 라이브러리 Include
include "lib::comInclude.xjs";
include "mis_lib::misUtil.xjs";

/**********************************************************************
* 화면 변수 선언부
***********************************************************************/
this.bFndAuth = false; //자금당당자권한

/**********************************************************************
* onInit / onLoad 영역
***********************************************************************/
this.FUN040304_oninit = function(obj:Form, e:nexacro.InitEventInfo)
{
	// Form 초기화
	this.fn_init_form();

	// DataSet 초기화
	this.fn_init_dataset();
}

this.FUN040304_onload = function(obj:Form, e:nexacro.LoadEventInfo)
{
	
}

/**********************************************************************
* Form/Dataset 오브젝트 초기화
***********************************************************************/

/*
 * 함수명  	: initForm
 * 설명 		: Form을 초기화한다.
 * params  		: None
 * return Type 	: None
 * 사용법		: this.initForm();
 */
this.fn_init_form = function()
{
	this.gfn_initForm(this);
	this.fn_misFormInit(this);
	
	// 오브젝트 등에 대한 처리
	this.div_search.div_srchDept.fn_setBind("ds_cond","DEPT_CODE","DEPT_NM");
	
	// 최초 검색조건에 대한 처리
	this.ds_cond.clearData();
	var nRow = this.ds_cond.addRow();
	this.ds_cond.setColumn(nRow, "YEAR", this.comUtils.getClientDate("YYYY"));	// 당해년도
	this.ds_cond.setColumn(nRow, "CONFM_AT", "A");
	
	// 공통코드
	var comboParams = [
	    ["ds_bdg001", "BDG001", "Y", "A", "B"]	// ds_bdg001 : 사업구분
	   ,["ds_bdg002", "BDG002", "Y", "A", "B"]	// ds_bdg002 : 수지구분
	];

	var callback = function (svcId, errorCode, errorMsg) {
		// 공통코드와 연계된 초기검색조건 설정
		this.ds_cond.setColumn(nRow, "BSNS_SE",   "1");	// (사업구분) 1:사업예산, 2:자본예산, 3:자금운용
		this.ds_cond.setColumn(nRow, "BALC_SE",   "");	// (수지구분) 1:수입, 2:지출
		//this.ds_cond.setColumn(nRow, "DEPT_CODE", "000000"        );	// 부서코드
		//this.ds_cond.setColumn(nRow, "DEPT_NM",   "화성도시공사");	// 부서명
		this.ds_cond.setColumn(nRow, "DETAIL_BSNS_CODE", "");	// 사업지구
		this.fn_search();
	};
	
	this.gfn_comboLoad (comboParams, callback);
	
	// 권한여부 확인
	this.bFndAuth = this.fn_getMisAuth(this, "FUN_USER");
	
	if(!this.bFndAuth) {
		this.ds_cond.setColumn(0, "DEPT_CODE",    this.gfn_getDeptId());
		this.ds_cond.setColumn(0, "DEPT_NM", this.gfn_getDeptName());
		this.div_search.div_srchDept.fn_setReadonly(true);
	}
}

/*
 * 함수명  	: initDataset
 * 설명 		: Dataset을 초기화한다
 * params  		: None
 * return Type 	: None
 * 사용법		: this.initDataset();
 */
this.fn_init_dataset = function()
{
	
}


/**********************************************************************
* Transaction 영역 시작
***********************************************************************
*
* 1. Transaction 관련 이벤트 핸들러
* 2. call Transaction 영역
* 3. callback 영역(Transaction, Popup)
* 
***********************************************************************/



/**********************************************************************
* Transaction 관련 이벤트 핸들러 
***********************************************************************/

/*
 * 함수명  	: fn_search
 * 설명 		: 조회 이벤트 처리(계정리스트)
 * params  		: None
 * return Type 	: None
 * 사용법		: this.fn_search();
 */
this.fn_search = function(obj:Button,  e:nexacro.ClickEventInfo)
{
	// clear Datasets
	this.ds_mnthngCptalPlan.clearData();
	
	// transaction
	this.fn_transaction("selectMnthngCptalPlanList");
}

/*
 * 함수명  	: fn_save
 * 설명 		: 저장 이벤트 처리(편성예산, 산출기초)
 * params  		: None
 * return Type 	: None
 * 사용법		: this.fn_save();
 */
this.fn_save = function()
{
	// 데이터가 없는 항목은 0원으로 등록하기 위해 수정 2017.01.23
	// 승인되지 않은 데이터는 화면과 동일한 값으로 업데이트
	// validation 체크(편성예산, 산출기초)
	//if(!Ex.util.isUpdated(this.ds_mnthngCptalPlan)) {
	//	this.gfn_message("comm.데이터.변경.없음");
	//	return false;
	//}
	
	// transaction
	if(this.gfn_message("confirm.저장.여부"))	{
		this.fn_transaction("MnthngCptalPlanCU");
	}
}

/**********************************************************************
* call Transaction 영역
***********************************************************************/

/*
 * 함수명  	: fn_transaction
 * 설명 		: Transaction 요청 처리 함수
 * params  		: strSvcId : 서비스요청 ID
 * return Type 	: None
 * 사용법		: this.fn_transaction("SELECT");
 */
this.fn_transaction = function(strSvcId)
{
	switch (strSvcId) {
		case "selectMnthngCptalPlanList":	// 세부사업 조회
			this.ds_cond.setColumn(0,"DETAIL_BSNS_CODE", this.div_search.edt_bsnsAreaCode.value);
			var sController   	= "/hsco/mis/fun/FUN040304/selectMnthngCptalPlanList.do";
			var sInDatasets   	= "input1=ds_cond";
			var sOutDatasets  	= "ds_mnthngCptalPlan=output1";
			break;
		case "MnthngCptalPlanCU":	// 저장
			var sController   	= "hsco/mis/fun/FUN040304/MnthngCptalPlanCU.do";
			var sInDatasets   	= "input1=ds_mnthngCptalPlan";
			var sOutDatasets  	= "";
			break;
		case "updateConfmAt":	// 승인
			var sController   	= "hsco/mis/fun/FUN040304/updateConfmAt.do";
			var sInDatasets   	= "input1=ds_mnthngCptalPlan:U";
			var sOutDatasets  	= "";
			break;
	}

	Ex.core.tran(this, strSvcId, sController, sInDatasets, sOutDatasets); 
}



/**********************************************************************
* Transaction Callback 영역
***********************************************************************/

 /*
 * 함수명  	: fn_callBack
 * 설명 		: Transaction Callback 처리
 * params  		: strSvcId    : 서비스요청 ID
 *                nErrorCode  : 오류 메시지 코드 ([예] 0 : Success, 그밖의 경우, error)
 *                strErrorMsg : 오류 메시지([예]  success.insert|정상적으로 등록되었습니다.)
 * return Type 	: None
 * 사용법		: 
 */
this.fn_callBack = function (strSvcId, nErrorCode, strErrorMsg)
{
	if(nErrorCode != '0') {
		this.gfn_callback_message(strSvcId, nErrorCode, strErrorMsg);
	}
	else if (nErrorCode == 0){
		switch (strSvcId) {
			case "selectMnthngCptalPlanList":			// 조회(계정리스트, 입력가능여부)
				break;
			case "MnthngCptalPlanCU": 					// 저장
				this.fn_search();
				this.gfn_message("success.처리.성공");
				break
			case "updateConfmAt":	// 승인
				this.fn_search();
				this.gfn_message("success.처리.성공");
				break;
		}
	}
}

 /*
 * 함수명  	: fn_popupCallBack
 * 설명 		: Popup Callback 처리
 * params  		: sPopupId    : 팝업 ID
 *                sReturn  : 팝업 처리 결과(dataset.saveXML())
 * return Type 	: None
 * 사용법		: 
 */
this.fn_popupCallBack = function(sPopupId, sReturn)
{
	// 사업코드 선택
	if(sPopupId == "popBsns") {
		var dsTemp = new Dataset();
		var loadCnt = dsTemp.loadXML(sReturn);
		if(loadCnt) {
			var fbRow    = this.ds_cond.rowposition;
			var bsnsCode = dsTemp.getColumn(0, "BSNS_CODE");
			var bsnsNm   = dsTemp.getColumn(0, "BSNS_NM");
			
			this.ds_cond.setColumn(fbRow, "DETAIL_BSNS_CODE", bsnsCode);	// 사업코드
			this.ds_cond.setColumn(fbRow, "BSNS_NM",   bsnsNm  );	// 사업명
		}
	}
	
	if(sPopupId == "deptPop") {
		var dsDeptCode = new Dataset();
		var loadCnt = dsDeptCode.loadXML(sReturn);
		if(loadCnt) {
			var fbRow    = this.ds_frmtnBudget.rowposition;
			var deptCode = dsDeptCode.getColumn(0, "DEPT_CODE");
			var deptNm   = dsDeptCode.getColumn(0, "DEPT_NM");
			
			this.ds_frmtnBudget.setColumn(fbRow, "DEPT_CODE", deptCode);
			this.ds_frmtnBudget.setColumn(fbRow, "DEPT_NM",   deptNm  );
		}
	}
}



/**********************************************************************
* Transaction 영역 끝
***********************************************************************/



/**********************************************************************
* non-Transaction 관련 컴포넌트 이벤트 처리 함수
***********************************************************************
*
* 1. Dataset 관련 이벤트 처리
* 2. Grid 관련 이벤트 처리
* 3. Button 관련 이벤트 처리
* 4. 공통버튼 관련 이벤트 처리
* 
***********************************************************************/



/**********************************************************************
* Dataset 관련 이벤트 처리
***********************************************************************/
this.ds_mnthngCptalPlan_cancolumnchange = function(obj:Dataset, e:nexacro.DSColChangeEventInfo)
{
	if("CHK" == e.columnid) {
		if(!this.bFndAuth) {
			return false;
		}
	}
}

/**********************************************************************
* Grid 관련 이벤트 처리
***********************************************************************/

/**********************************************************************
* Button 관련 이벤트 처리
***********************************************************************/
this.btn_Confirm_onclick = function(obj:Button,  e:nexacro.ClickEventInfo)
{
	if(!this.bFndAuth) {
		this.gfn_message("fail.실행.불가", "'자금담당자'가 아니므로 승인을");
		return;
	}
	
	// validation 체크(편성예산, 산출기초)
	if(!Ex.util.isUpdated(this.ds_mnthngCptalPlan)) {
		this.gfn_message("comm.데이터.변경.없음");
		return false;
	}
	
	var chkGbn = true;
	for(var i=0; i<this.ds_mnthngCptalPlan.rowcount; i++) {
		if(this.ds_mnthngCptalPlan.getColumn(i, "CONFM_AT") != this.ds_mnthngCptalPlan.getColumn(i, "CHK")) {
			chkGbn = false;
			break;
		}
	}
	
	if(chkGbn) {
		this.gfn_message("comm.데이터.변경.없음");
		return false;
	}
	
	if(this.gfn_message("confirm.승인.여부"))	{
		this.fn_transaction("updateConfmAt");
	}
}

this.div_detail_tab_rewardBsnsDstrc_tabpage1_btn_bsnsCode_onclick = function(obj:Button,  e:nexacro.ClickEventInfo)
{
	// 사업코드
	var parm = {
		BSNS_GB:1
	};
	this.gfn_popup("popBsns", 500, 500, "사업코드 선택", parm, "pms_prj::popBsns.xfdl", "fn_popupCallBack", true);
}

this.btn_excelDown_onclick = function(obj:Button,  e:nexacro.ClickEventInfo)
{
		/* 승인여부 엑셀추출 주석 2016.12.07 이재윤 */
//	this.ds_export.clearData();
//	this.ds_export.copyData(this.ds_mnthngCptalPlan);
// 	var nRow = -1;
// 	for(var i=0; i<this.ds_mnthngCptalPlan.rowcount; i++) {
// 		if("0" == this.ds_mnthngCptalPlan.getColumn(i, "CONFM_AT")) {
// 			nRow = this.ds_export.addRow();
// 			this.ds_export.copyRow(nRow, this.ds_mnthngCptalPlan, i);
// 		}
// 	}

	this.gfn_exportExcel(this.grd_mnthngCptalPlan, "FUN040304");
}

this.btn_excelImpot_onclick = function(obj:Button,  e:nexacro.ClickEventInfo)
{
	trace("excel Import START");
	
	this.ds_import.clearData();
	
	var arg = {
		targetDs : this.ds_import,
		headSet : false,
		callBack : function () {
			this.setWaitCursor(true,true);
			
			var sCnt = this.ds_mnthngCptalPlan.rowcount;
			var nCnt = this.ds_import.rowcount;
			var nRow = 0;

			var sKey = "";
			var nKey = "";
			
			for(var i=0; i<sCnt; i++) {
				if("0" == this.ds_mnthngCptalPlan.getColumn(i, "CONFM_AT")) {
					sKey = this.comUtils.trimString(this.ds_mnthngCptalPlan.getColumn(i, "BUDGET_ACNT_CODE")) + 
					       this.comUtils.trimString(this.ds_mnthngCptalPlan.getColumn(i, "DETAIL_BSNS_CODE")) + 
					       this.comUtils.trimString(this.ds_mnthngCptalPlan.getColumn(i, "EXPNDTR_UNIT_CODE"));
					
					for(var j=0; j<nCnt; j++) {
						nKey = this.comUtils.trimString(this.ds_import.getColumn(j, "Column2")) + 
							   this.comUtils.trimString(this.ds_import.getColumn(j, "Column4")) + 
							   this.comUtils.trimString(this.ds_import.getColumn(j, "Column6"));
						
						if(sKey == nKey) {
							this.ds_mnthngCptalPlan.setColumn(i, "PLAN_AMOUNT_01", nexacro.toNumber(this.comUtils.trimString(this.ds_import.getColumn(j, "Column10"))));
							this.ds_mnthngCptalPlan.setColumn(i, "PLAN_AMOUNT_02", nexacro.toNumber(this.comUtils.trimString(this.ds_import.getColumn(j, "Column11"))));
							this.ds_mnthngCptalPlan.setColumn(i, "PLAN_AMOUNT_03", nexacro.toNumber(this.comUtils.trimString(this.ds_import.getColumn(j, "Column12"))));
							this.ds_mnthngCptalPlan.setColumn(i, "PLAN_AMOUNT_04", nexacro.toNumber(this.comUtils.trimString(this.ds_import.getColumn(j, "Column13"))));
							this.ds_mnthngCptalPlan.setColumn(i, "PLAN_AMOUNT_05", nexacro.toNumber(this.comUtils.trimString(this.ds_import.getColumn(j, "Column14"))));
							this.ds_mnthngCptalPlan.setColumn(i, "PLAN_AMOUNT_06", nexacro.toNumber(this.comUtils.trimString(this.ds_import.getColumn(j, "Column15"))));
							this.ds_mnthngCptalPlan.setColumn(i, "PLAN_AMOUNT_07", nexacro.toNumber(this.comUtils.trimString(this.ds_import.getColumn(j, "Column16"))));
							this.ds_mnthngCptalPlan.setColumn(i, "PLAN_AMOUNT_08", nexacro.toNumber(this.comUtils.trimString(this.ds_import.getColumn(j, "Column17"))));
							this.ds_mnthngCptalPlan.setColumn(i, "PLAN_AMOUNT_09", nexacro.toNumber(this.comUtils.trimString(this.ds_import.getColumn(j, "Column18"))));
							this.ds_mnthngCptalPlan.setColumn(i, "PLAN_AMOUNT_10", nexacro.toNumber(this.comUtils.trimString(this.ds_import.getColumn(j, "Column19"))));
							this.ds_mnthngCptalPlan.setColumn(i, "PLAN_AMOUNT_11", nexacro.toNumber(this.comUtils.trimString(this.ds_import.getColumn(j, "Column20"))));
							this.ds_mnthngCptalPlan.setColumn(i, "PLAN_AMOUNT_12", nexacro.toNumber(this.comUtils.trimString(this.ds_import.getColumn(j, "Column21"))));
							break;
						}
					}
				}
			}

			this.setWaitCursor(false,true);
		}
	};
	
	this.gfn_importExcel(arg);
	
	trace("excel Import END");	
}

this.div_search_edt_bsnsAreaCode_onchanged = function(obj:Edit, e:nexacro.ChangeEventInfo)
{
	if(this.comUtils.isNull(e.postvalue)) {
		this.div_search.edt_bsnsAreaCode.set_value("");
		this.div_search.edt_BSNS_NM.set_value("");
	}	
}

this.btn_ConfirmAll_onclick = function(obj:Button,  e:nexacro.ClickEventInfo)
{
	if(!this.bFndAuth) {
		this.gfn_message("fail.실행.불가", "'자금담당자'가 아니므로 승인을");
		return;
	}
	
	var chkGbn = true;
	
	for(var i=0; i<this.ds_mnthngCptalPlan.rowcount; i++) {
		if(this.ds_mnthngCptalPlan.getColumn(i, "CONFM_AT") != '1') {
			this.ds_mnthngCptalPlan.setColumn(i, "CHK", '1');
			chkGbn = false;
		}
	}
	
	if(chkGbn) {
		this.gfn_message("comm.데이터.변경.없음");
		return false;
	}
	
	if(this.gfn_message("confirm.승인.여부"))	{
		this.fn_transaction("updateConfmAt");
	}
}

this.ds_mnthngCptalPlan_oncolumnchanged = function(obj:Dataset, e:nexacro.DSColChangeEventInfo)
{
	/*
	var totBudgetAm = obj.getColumn(e.row, "TOT_BUDGET_AM");
	var planAmount01  = obj.getColumn(e.row, "PLAN_AMOUNT_01");
	var planAmount02  = obj.getColumn(e.row, "PLAN_AMOUNT_02");
	var planAmount03  = obj.getColumn(e.row, "PLAN_AMOUNT_03");
	var planAmount04  = obj.getColumn(e.row, "PLAN_AMOUNT_04");
	var planAmount05  = obj.getColumn(e.row, "PLAN_AMOUNT_05");
	var planAmount06  = obj.getColumn(e.row, "PLAN_AMOUNT_06");
	var planAmount07  = obj.getColumn(e.row, "PLAN_AMOUNT_07");
	var planAmount08  = obj.getColumn(e.row, "PLAN_AMOUNT_08");
	var planAmount09  = obj.getColumn(e.row, "PLAN_AMOUNT_09");
	var planAmount10  = obj.getColumn(e.row, "PLAN_AMOUNT_10");
	var planAmount11  = obj.getColumn(e.row, "PLAN_AMOUNT_11");
	var planAmount12  = obj.getColumn(e.row, "PLAN_AMOUNT_12");
	var sumPlanAmount = planAmount01 + planAmount02 + planAmount03 + planAmount04 + planAmount05 + planAmount06 + planAmount07 + planAmount08 + planAmount09 + planAmount10 + planAmount11 + planAmount12;
	
	if (totBudgetAm < sumPlanAmount) {
		this.alert("계획합계는 예산총액을 초과할 수 없습니다.");
		obj.setColumn(e.row, e.columnid, e.oldvalue);
	}
	*/
}

this.div_search_rdo_APPR_SE_onitemclick = function(obj:Radio, e:nexacro.RadioMouseEventInfo)
{
	
}
]]></Script>
  </Form>
</FDL>
