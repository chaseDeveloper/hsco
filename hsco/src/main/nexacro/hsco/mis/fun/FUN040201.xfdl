<?xml version="1.0" encoding="utf-8"?>
<FDL version="1.5">
  <TypeDefinition url="..\..\default_typedef.xml"/>
  <Form id="FUN040201" classname="FUN040201" left="0" top="0" width="1059" height="735" titletext="자금배정관리" oninit="FUN040201_oninit" onload="FUN040201_onload">
    <Layouts>
      <Layout>
        <Div id="div_search" taborder="0" left="0" top="0" right="28" height="33" style="padding:0 0 0 0;" cssclass="div_WFSA_Box">
          <Layouts>
            <Layout>
              <Static id="Static00" taborder="105" text="15" visible="false" left="0" top="2" width="15" height="34" style="background:aqua;align:center middle;font:bold 9 Dotum;opacity:50;"/>
              <Static id="Static01" taborder="106" text="9" visible="false" left="9" top="0" width="1000" height="5" style="background:aqua;align:center middle;font:bold 9 Dotum;opacity:50;"/>
              <Static id="sta_year" taborder="107" text="연도" cssclass="sta_WFSA_Label" left="15" top="5" width="38" height="21"/>
              <Static id="Static03" taborder="108" text="5" visible="false" left="47" top="2" width="5" height="34" style="background:aqua;align:center middle;font:bold 9 Dotum;opacity:50;"/>
              <Static id="Static09" taborder="109" text="9" visible="false" left="9" top="32" width="1000" height="9" style="background:aqua;align:center middle;font:bold 9 Dotum;opacity:50;"/>
              <Combo id="cmb_month" taborder="1" autoselect="true" codecolumn="codecolumn" datacolumn="datacolumn" left="160" top="5" width="50" height="21" style="align:center middle;" cssclass="cmb_WF_Essential">
                <Dataset id="innerdataset">
                  <ColumnInfo>
                    <Column id="codecolumn" size="256"/>
                    <Column id="datacolumn" size="256"/>
                  </ColumnInfo>
                  <Rows>
                    <Row>
                      <Col id="codecolumn">01</Col>
                      <Col id="datacolumn">01</Col>
                    </Row>
                    <Row>
                      <Col id="codecolumn">02</Col>
                      <Col id="datacolumn">02</Col>
                    </Row>
                    <Row>
                      <Col id="codecolumn">03</Col>
                      <Col id="datacolumn">03</Col>
                    </Row>
                    <Row>
                      <Col id="codecolumn">04</Col>
                      <Col id="datacolumn">04</Col>
                    </Row>
                    <Row>
                      <Col id="codecolumn">05</Col>
                      <Col id="datacolumn">05</Col>
                    </Row>
                    <Row>
                      <Col id="codecolumn">06</Col>
                      <Col id="datacolumn">06</Col>
                    </Row>
                    <Row>
                      <Col id="codecolumn">07</Col>
                      <Col id="datacolumn">07</Col>
                    </Row>
                    <Row>
                      <Col id="codecolumn">08</Col>
                      <Col id="datacolumn">08</Col>
                    </Row>
                    <Row>
                      <Col id="codecolumn">09</Col>
                      <Col id="datacolumn">09</Col>
                    </Row>
                    <Row>
                      <Col id="codecolumn">10</Col>
                      <Col id="datacolumn">10</Col>
                    </Row>
                    <Row>
                      <Col id="codecolumn">11</Col>
                      <Col id="datacolumn">11</Col>
                    </Row>
                    <Row>
                      <Col id="codecolumn">12</Col>
                      <Col id="datacolumn">12</Col>
                    </Row>
                  </Rows>
                </Dataset>
              </Combo>
              <Static id="sta_month" taborder="111" text="월" cssclass="sta_WFSA_Label" left="137" top="5" width="22" height="21"/>
              <Static id="Static04" taborder="112" text="5" visible="false" left="155" top="2" width="5" height="34" style="background:aqua;align:center middle;font:bold 9 Dotum;opacity:50;"/>
              <Static id="Static06" taborder="113" text="15" visible="false" left="122" top="2" width="15" height="34" style="background:aqua;align:center middle;font:bold 9 Dotum;opacity:50;"/>
              <Spin id="spn_year" taborder="0" max="9999" min="1000" left="52" top="5" height="21" width="70" cssclass="spn_WF_Essential"/>
            </Layout>
          </Layouts>
          <InitValue/>
        </Div>
        <Static id="Static42" taborder="3" text="10" visible="false" left="567" top="33" bottom="0" style="background:#1b3cd23c;align:center middle;" width="10"/>
        <Div id="div_work" taborder="1" left="0" top="33" right="28" bottom="0">
          <Layouts>
            <Layout>
              <Static id="Static09" taborder="16" text="10" visible="false" left="0" top="0" right="0" height="10" style="background:aqua;align:center middle;font:bold 9 Dotum;opacity:50;"/>
              <Tab id="tab_master" taborder="23" left="0" top="10" tabindex="0" scrollbars="autoboth" right="0" bottom="0" style="showextrabutton:false;">
                <Tabpages>
                  <Tabpage id="tpg1" text="자금배정내역" left="0" top="34" width="1031" height="212">
                    <Layouts>
                      <Layout>
                        <Grid id="grd_cptalAsign" taborder="3" binddataset="ds_cptalAsign" useinputpanel="false" cellsizingtype="col" autofittype="col" left="1" top="23" right="1" bottom="282" autoenter="select" oncellclick="div_work_tab_master_tpg1_grd_cptalAsign_oncellclick">
                          <Formats>
                            <Format id="default">
                              <Columns>
                                <Column size="40"/>
                                <Column size="80"/>
                                <Column size="50"/>
                                <Column size="110"/>
                                <Column size="200"/>
                                <Column size="120"/>
                                <Column size="300"/>
                              </Columns>
                              <Rows>
                                <Row size="24" band="head"/>
                                <Row size="24"/>
                                <Row size="24" band="summ"/>
                              </Rows>
                              <Band id="head">
                                <Cell text="순번"/>
                                <Cell col="1" text="배정년월"/>
                                <Cell col="2" text="차수"/>
                                <Cell col="3" cssclass="Cellgrd_WF_HeadEssential" text="자금배정일자"/>
                                <Cell col="4" text="문서번호"/>
                                <Cell col="5" text="배정합계"/>
                                <Cell col="6" text="비고"/>
                              </Band>
                              <Band id="body">
                                <Cell text="expr:currow+1"/>
                                <Cell col="1" text="bind:ASIGN_YM" mask="####-##" autosizerow="limitmin" autosizecol="limitmin"/>
                                <Cell col="2" text="bind:ODR" autosizerow="limitmin" autosizecol="limitmin"/>
                                <Cell col="3" displaytype="date" edittype="date" style="align:center middle;" text="bind:CPTAL_ASIGN_DE" calendardisplay="display" calendardisplaynulltype="none" autosizerow="limitmin" autosizecol="limitmin"/>
                                <Cell col="4" edittype="expr:NEXT_YN == &quot;N&quot; ? &quot;normal&quot; : &quot;none&quot;" style="background: ;" cssclass="Cellgrd_WF_AlignLeft" text="bind:ASIGN_DOC_NO" editdisplay="expr:NEXT_YN == &quot;N&quot; ? &quot;display&quot; : &quot;&quot;" autosizerow="limitmin" autosizecol="limitmin"/>
                                <Cell col="5" displaytype="number" style="align: ;" cssclass="Cellgrd_WF_AlignRight" text="bind:ASIGN_SM" autosizerow="limitmin" autosizecol="limitmin"/>
                                <Cell col="6" edittype="normal" style="align: ;" cssclass="Cellgrd_WF_AlignLeft" text="bind:RM" editdisplay="display" autosizerow="limitmin" autosizecol="limitmin"/>
                              </Band>
                              <Band id="summary">
                                <Cell/>
                                <Cell col="1"/>
                                <Cell col="2"/>
                                <Cell col="3"/>
                                <Cell col="4"/>
                                <Cell col="5" displaytype="number" text="expr:dataset.getSum(&quot;ASIGN_SM&quot;)"/>
                                <Cell col="6"/>
                              </Band>
                            </Format>
                          </Formats>
                        </Grid>
                        <Static id="Static01" taborder="4" text="5" visible="false" left="0" top="18" right="0" height="5" style="background:#dc143c3c;align:center middle;"/>
                        <Static id="Static00" taborder="5" text="5" visible="false" left="0" top="0" right="0" height="5" style="background:#dc143c3c;align:center middle;"/>
                        <Static id="sta_yearAcctoWeekList" taborder="6" text="자금배정 기본 내역" cssclass="sta_WF_Title02" left="1" top="3" width="141" height="19"/>
                        <Div id="div_detail" taborder="7" text="Div00" left="1" right="1" bottom="1" height="280">
                          <Layouts>
                            <Layout>
                              <Static id="Static09" taborder="6" text="10" visible="false" left="0" top="0" right="0" height="10" style="background:aqua;align:center middle;font:bold 9 Dotum;opacity:50;"/>
                              <Static id="sta_yearAcctoWeekList" taborder="7" text="자금배정 상세 내역" cssclass="sta_WF_Title02" left="0" top="7" width="141" height="19"/>
                              <Static id="Static00" taborder="8" text="5" visible="false" left="0" top="23" right="0" height="5" style="background:#dc143c3c;align:center middle;"/>
                              <Grid id="grd_cptalAsignAcmtl" taborder="9" binddataset="ds_cptalAsignAcmtl" useinputpanel="false" cellsizingtype="col" autofittype="col" right="0" bottom="0" width="454" height="252">
                                <Formats>
                                  <Format id="default">
                                    <Columns>
                                      <Column size="40"/>
                                      <Column size="77"/>
                                      <Column size="117"/>
                                      <Column size="117"/>
                                      <Column size="117"/>
                                    </Columns>
                                    <Rows>
                                      <Row size="24" band="head"/>
                                      <Row size="24"/>
                                      <Row size="24" band="summ"/>
                                    </Rows>
                                    <Band id="head">
                                      <Cell text="순번"/>
                                      <Cell col="1" text="자금수지원"/>
                                      <Cell col="2" text="배정누계"/>
                                      <Cell col="3" text="본사배정금액"/>
                                      <Cell col="4" text="레포츠배정금액"/>
                                    </Band>
                                    <Band id="body">
                                      <Cell text="expr:currow+1"/>
                                      <Cell col="1" displaytype="combo" cssclass="Cellgrd_WF_AlignLeft" text="bind:CPTAL_BALC_SE_CODE" combodataset="ds_cptalBalcSeCode" combocodecol="CODE" combodatacol="CODE_NM" autosizerow="limitmin" autosizecol="limitmin"/>
                                      <Cell col="2" displaytype="number" style="align:right;" cssclass="Cellgrd_WF_AlignRight" text="expr:HEDOFC_ASIGN_AMOUNT+REPTS_ASIGN_AMOUNT" autosizerow="limitmin" autosizecol="limitmin"/>
                                      <Cell col="3" displaytype="number" style="align:right;" cssclass="Cellgrd_WF_AlignRight" text="bind:HEDOFC_ASIGN_AMOUNT" autosizerow="limitmin" autosizecol="limitmin"/>
                                      <Cell col="4" displaytype="number" style="align:right;" cssclass="Cellgrd_WF_AlignRight" text="bind:REPTS_ASIGN_AMOUNT" autosizerow="limitmin" autosizecol="limitmin"/>
                                    </Band>
                                    <Band id="summary">
                                      <Cell/>
                                      <Cell col="1" text="합계:"/>
                                      <Cell col="2" displaytype="number" style="align:right middle;" text="expr:dataset.getSum(&quot;HEDOFC_ASIGN_AMOUNT&quot;)+dataset.getSum(&quot;REPTS_ASIGN_AMOUNT&quot;)"/>
                                      <Cell col="3" displaytype="number" style="align:right middle;" text="expr:dataset.getSum(&quot;HEDOFC_ASIGN_AMOUNT&quot;)"/>
                                      <Cell col="4" displaytype="number" style="align:right middle;" text="expr:dataset.getSum(&quot;REPTS_ASIGN_AMOUNT&quot;)"/>
                                    </Band>
                                  </Format>
                                </Formats>
                              </Grid>
                              <Static id="sta_yearAcctoWeekList00" taborder="10" text="자금배정 누계" cssclass="sta_WF_Title02" top="7" right="313" width="141" height="19"/>
                              <Tab id="tab_cptBalcAsnCptal" taborder="11" left="0" right="464" bottom="0" height="252" canchange="div_detail_tab_cptBalcAsnCptal_canchange" tabindex="0" scrollbars="autoboth" style="showextrabutton:false;">
                                <Tabpages>
                                  <Tabpage id="tabpage1" text="자금수지원별 현황">
                                    <Layouts>
                                      <Layout>
                                        <Grid id="grd_cptBalcAsnCptal" taborder="0" binddataset="ds_cptBalcAsnCptal" useinputpanel="false" cellsizingtype="col" autofittype="col" left="1" top="5" right="1" bottom="1" oncellclick="div_work_tab_master_tpg1_div_detail_tab_cptBalcAsnCptal_tabpage1_grd_cptBalcAsnCptal_oncellclick">
                                          <Formats>
                                            <Format id="default">
                                              <Columns>
                                                <Column size="40"/>
                                                <Column size="40"/>
                                                <Column size="90"/>
                                                <Column size="100"/>
                                                <Column size="100"/>
                                                <Column size="100"/>
                                                <Column size="40"/>
                                                <Column size="40"/>
                                                <Column size="40"/>
                                              </Columns>
                                              <Rows>
                                                <Row size="24" band="head"/>
                                                <Row size="24"/>
                                                <Row size="24" band="summ"/>
                                              </Rows>
                                              <Band id="head">
                                                <Cell text="순번"/>
                                                <Cell col="1" text="결재"/>
                                                <Cell col="2" text="금융기관"/>
                                                <Cell col="3" text="배정금액"/>
                                                <Cell col="4" text="본사배정금액"/>
                                                <Cell col="5" text="레포츠배정금액"/>
                                                <Cell col="6" text="기안"/>
                                                <Cell col="7" text="결재"/>
                                                <Cell col="8" text="상세"/>
                                              </Band>
                                              <Band id="body">
                                                <Cell text="expr:currow+1"/>
                                                <Cell col="1" displaytype="checkbox" text="bind:CHK"/>
                                                <Cell col="2" displaytype="combo" style="align:center;padding: ;" cssclass="Cellgrd_WF_AlignLeft" text="bind:CPTAL_BALC_SE_CODE" combodataset="ds_cptalBalcSeCode" combocodecol="CODE" combodatacol="CODE_NM" autosizerow="limitmin" autosizecol="limitmin"/>
                                                <Cell col="3" displaytype="number" style="align: ;" cssclass="Cellgrd_WF_AlignRight" text="expr:comp.parent.parent.parent.parent.parent.parent.parent.ds_acnutnoAsnCptal.getCaseSum(&quot;CPTAL_BALC_SE_CODE=='&quot;+CPTAL_BALC_SE_CODE+&quot;' &amp;&amp; (ASIGN_SE=='1' || ASIGN_SE=='2')&quot;,&quot;ASIGN_AMOUNT&quot;)" autosizerow="limitmin" autosizecol="limitmin"/>
                                                <Cell col="4" displaytype="number" style="align: ;" cssclass="Cellgrd_WF_AlignRight" text="expr:comp.parent.parent.parent.parent.parent.parent.parent.ds_acnutnoAsnCptal.getCaseSum(&quot;CPTAL_BALC_SE_CODE=='&quot;+CPTAL_BALC_SE_CODE+&quot;' &amp;&amp; ASIGN_SE=='1'&quot;,&quot;ASIGN_AMOUNT&quot;)" suppress="0" autosizerow="limitmin" autosizecol="limitmin"/>
                                                <Cell col="5" displaytype="number" style="align: ;" cssclass="Cellgrd_WF_AlignRight" text="expr:comp.parent.parent.parent.parent.parent.parent.parent.ds_acnutnoAsnCptal.getCaseSum(&quot;CPTAL_BALC_SE_CODE=='&quot;+CPTAL_BALC_SE_CODE+&quot;' &amp;&amp; ASIGN_SE=='2'&quot;,&quot;ASIGN_AMOUNT&quot;)" autosizerow="limitmin" autosizecol="limitmin"/>
                                                <Cell col="6" displaytype="image" text="bind:DRFT_STS_IMG" tooltiptext="bind:DRFT_DT"/>
                                                <Cell col="7" displaytype="image" text="bind:SANCTN_STS_IMG" tooltiptext="bind:LAST_SANCTN_DT"/>
                                                <Cell col="8" displaytype="expr:comp.parent.parent.parent.parent.parent.parent.parent.ds_acnutnoAsnCptal.getCaseMax(&quot;CPTAL_BALC_SE_CODE=='&quot;+CPTAL_BALC_SE_CODE+&quot;' &amp;&amp; (ASIGN_SE=='1' || ASIGN_SE=='2')&quot;,&quot; DRFT_STS&quot;) == '1' ? 'image' : 'none'" style="cursor:EXPR(comp.parent.parent.parent.parent.parent.parent.parent.ds_acnutnoAsnCptal.getCaseMax(&quot;CPTAL_BALC_SE_CODE=='&quot;+CPTAL_BALC_SE_CODE+&quot;' &amp;&amp; (ASIGN_SE=='1' || ASIGN_SE=='2')&quot;,&quot; DRFT_STS&quot;) != '1' ? 'arrow' : 'hand');" text="URL('theme://images/sanctn/ico_pop_dtl.png')"/>
                                              </Band>
                                              <Band id="summary">
                                                <Cell/>
                                                <Cell col="1"/>
                                                <Cell col="2" text="합계:"/>
                                                <Cell col="3" displaytype="number" cssclass="Cellgrd_WF_AlignRight" text="expr:comp.parent.parent.parent.parent.parent.parent.parent.ds_acnutnoAsnCptal.getCaseSum(&quot;ASIGN_SE=='2'&quot;,&quot;ASIGN_AMOUNT&quot;)"/>
                                                <Cell col="4" displaytype="number" cssclass="Cellgrd_WF_AlignRight" text="expr:comp.parent.parent.parent.parent.parent.parent.parent.ds_acnutnoAsnCptal.getCaseSum(&quot;ASIGN_SE=='1'&quot;,&quot;ASIGN_AMOUNT&quot;)"/>
                                                <Cell col="5" displaytype="number" cssclass="Cellgrd_WF_AlignRight" text="expr:dataset.getCaseSum(&quot;ASIGN_SE=='2'&quot;,&quot;ASIGN_AMOUNT&quot;)"/>
                                                <Cell col="6"/>
                                                <Cell col="7"/>
                                                <Cell col="8"/>
                                              </Band>
                                            </Format>
                                          </Formats>
                                        </Grid>
                                      </Layout>
                                    </Layouts>
                                  </Tabpage>
                                  <Tabpage id="tabpage2" text="계좌별 현황">
                                    <Layouts>
                                      <Layout>
                                        <Grid id="grd_acnutnoAsnCptal" taborder="6" binddataset="ds_acnutnoAsnCptal" autoenter="select" useinputpanel="false" cellsizingtype="col" autofittype="col" autosizingtype="row" left="1" top="29" right="0" bottom="0" onexpandup="div_work_tab_master_tpg1_div_detail_tab_cptBalcAsnCptal_tabpage2_grd_acnutnoAsnCptal_onexpandup">
                                          <Formats>
                                            <Format id="default">
                                              <Columns>
                                                <Column size="40"/>
                                                <Column size="100"/>
                                                <Column size="120"/>
                                                <Column size="120"/>
                                                <Column size="80"/>
                                                <Column size="150"/>
                                                <Column size="200"/>
                                              </Columns>
                                              <Rows>
                                                <Row size="24" band="head"/>
                                                <Row size="24"/>
                                              </Rows>
                                              <Band id="head">
                                                <Cell text="순번"/>
                                                <Cell col="1" cssclass="Cellgrd_WF_HeadEssential" text="금융기관"/>
                                                <Cell col="2" cssclass="Cellgrd_WF_HeadEssential" text="출금계좌번호"/>
                                                <Cell col="3" cssclass="Cellgrd_WF_HeadEssential" text="입금계좌번호"/>
                                                <Cell col="4" cssclass="Cellgrd_WF_HeadEssential" text="배정구분"/>
                                                <Cell col="5" cssclass="Cellgrd_WF_HeadEssential" text="배정금액"/>
                                                <Cell col="6" text="비고"/>
                                              </Band>
                                              <Band id="body">
                                                <Cell text="expr:currow+1"/>
                                                <Cell col="1" displaytype="combo" edittype="none" style="align:center middle;padding: ;" text="bind:CPTAL_BALC_SE_CODE" combodataset="ds_cptalBalcSeCode" combocodecol="CODE" combodatacol="CODE_NM" combodisplay="edit" autosizerow="limitmin" autosizecol="limitmin"/>
                                                <Cell col="2" displaytype="normal" edittype="none" editfilter="integer" style="align:left middle;padding:0 0 0 5;" text="bind:DEFRAY_ACNUTNO" editlimit="20" editdisplay="edit" expandshow="show" autosizerow="limitmin" autosizecol="limitmin"/>
                                                <Cell col="3" displaytype="normal" edittype="none" editfilter="integer" style="align:left middle;padding:0 0 0 5;" text="bind:RCPMNY_ACNUTNO" editlimit="20" editdisplay="edit" expandshow="show" autosizerow="limitmin" autosizecol="limitmin"/>
                                                <Cell col="4" displaytype="combo" edittype="none" style="align:left middle;padding:0 0 0 5;" text="bind:ASIGN_SE" combodataset="ds_asignSe" combocodecol="CODE" combodatacol="CODE_NM" combodisplay="edit" combotype="dropdown" autosizerow="limitmin" autosizecol="limitmin"/>
                                                <Cell col="5" displaytype="number" edittype="masknumber" style="align:right middle;padding:0 5 0 0;" text="bind:ASIGN_AMOUNT" mask="!###,##" editdisplay="display" autosizerow="limitmin" autosizecol="limitmin"/>
                                                <Cell col="6" edittype="normal" style="align:left middle;padding:0 0 0 5;" text="bind:RM" editdisplay="display" autosizerow="limitmin" autosizecol="limitmin"/>
                                              </Band>
                                            </Format>
                                          </Formats>
                                        </Grid>
                                        <Static id="Static00" taborder="7" text="5" visible="false" left="0" top="0" right="0" height="5" style="background:#dc143c3c;align:center middle;"/>
                                        <Static id="Static01" taborder="8" text="5" visible="false" left="0" top="24" right="0" height="5" style="background:#dc143c3c;align:center middle;"/>
                                        <Button id="btn_Del_Dtpg2" taborder="9" text="행삭제" onclick="btn_Del_Row_onclick" cssclass="btn_WF_Griddel" top="5" right="67" width="64" height="19"/>
                                        <Button id="btn_Cancel_Dtpg2" taborder="10" text="행취소" onclick="btn_Cancel_Row_onclick" cssclass="btn_WF_Gridcnl" top="5" right="0" width="64" height="19"/>
                                        <Button id="btn_Add_Dtpg2" taborder="11" text="행추가" onclick="btn_Add_Row_onclick" cssclass="btn_WF_Gridadd" top="5" right="134" width="64" height="19"/>
                                      </Layout>
                                    </Layouts>
                                  </Tabpage>
                                </Tabpages>
                              </Tab>
                            </Layout>
                          </Layouts>
                        </Div>
                      </Layout>
                    </Layouts>
                  </Tabpage>
                  <Tabpage id="tpg2" text="자금운용내역">
                    <Layouts>
                      <Layout>
                        <Grid id="grd_cptalAsign" taborder="3" binddataset="ds_cptalOpratn" autoenter="select" useinputpanel="false" cellsizingtype="col" autofittype="none" left="1" top="5" right="1" bottom="1" oncellclick="div_work_tab_master_tpg2_grd_cptalAsign_oncellclick" onexpandup="div_work_tab_master_tpg2_grd_cptalAsign_onexpandup">
                          <Formats>
                            <Format id="default">
                              <Columns>
                                <Column size="40"/>
                                <Column size="40"/>
                                <Column size="80"/>
                                <Column size="124"/>
                                <Column size="110"/>
                                <Column size="100"/>
                                <Column size="150"/>
                                <Column size="100"/>
                                <Column size="150"/>
                                <Column size="130"/>
                                <Column size="180"/>
                                <Column size="60"/>
                                <Column size="60"/>
                                <Column size="60"/>
                              </Columns>
                              <Rows>
                                <Row size="24" band="head"/>
                                <Row size="24"/>
                              </Rows>
                              <Band id="head">
                                <Cell text="순번"/>
                                <Cell col="1" text="결재"/>
                                <Cell col="2" text="운용년월"/>
                                <Cell col="3" text="문서번호"/>
                                <Cell col="4" cssclass="Cellgrd_WF_HeadEssential" text="자금운용일자"/>
                                <Cell col="5" text="출금은행"/>
                                <Cell col="6" cssclass="Cellgrd_WF_HeadEssential" text="출금계좌"/>
                                <Cell col="7" text="입금은행"/>
                                <Cell col="8" cssclass="Cellgrd_WF_HeadEssential" text="입금계좌"/>
                                <Cell col="9" cssclass="Cellgrd_WF_HeadEssential" text="운용금액"/>
                                <Cell col="10" text="비고"/>
                                <Cell col="11" text="기안"/>
                                <Cell col="12" text="결재"/>
                                <Cell col="13" text="상세"/>
                              </Band>
                              <Band id="body">
                                <Cell text="expr:currow+1"/>
                                <Cell col="1" displaytype="checkbox" edittype="none" text="bind:CHK"/>
                                <Cell col="2" text="bind:OPRATN_YM" mask="####-##"/>
                                <Cell col="3" edittype="expr:SANCTN_STS == &quot;NUL&quot; ? &quot;normal&quot; : &quot;none&quot;" style="align:left;padding:0 0 0 5;" text="bind:OPRATN_DOC_NO" editdisplay="expr:SANCTN_STS == &quot;NUL&quot; ? &quot;display&quot; : &quot;&quot;"/>
                                <Cell col="4" displaytype="date" edittype="date" text="bind:CPTAL_OPRATN_DE" calendardisplay="display" calendardisplaynulltype="none" autosizerow="limitmin" autosizecol="limitmin"/>
                                <Cell col="5" displaytype="combo" edittype="none" text="bind:OUT_BANK_CODE" combodataset="ds_fnncInsttCode" combocodecol="CODE" combodatacol="CODE_NM"/>
                                <Cell col="6" displaytype="normal" edittype="none" editfilter="integer" style="align:left;padding:0 0 0 5;" text="bind:DEFRAY_ACNUTNO" editlimit="20" editdisplay="edit" expandshow="show"/>
                                <Cell col="7" displaytype="combo" edittype="none" text="bind:IN_BANK_CODE" combodataset="ds_fnncInsttCode" combocodecol="CODE" combodatacol="CODE_NM"/>
                                <Cell col="8" displaytype="normal" edittype="none" editfilter="integer" style="align:left;padding:0 0 0 5;" text="bind:RCPMNY_ACNUTNO" editlimit="20" editdisplay="edit" expandshow="show"/>
                                <Cell col="9" displaytype="number" edittype="masknumber" style="align:right;padding:0 5 0 0;" text="bind:OPRATN_AMOUNT" mask="!###,#0" editdisplay="display" autosizerow="limitmin" autosizecol="limitmin"/>
                                <Cell col="10" edittype="normal" style="align:left;padding:0 0 0 5;" text="bind:RM" editdisplay="display" autosizerow="limitmin" autosizecol="limitmin"/>
                                <Cell col="11" displaytype="image" text="bind:DRFT_STS_IMG" tooltiptext="bind:DRFT_DT"/>
                                <Cell col="12" displaytype="image" text="bind:SANCTN_STS_IMG" tooltiptext="bind:LAST_SANCTN_DT"/>
                                <Cell col="13" displaytype="expr:DRFT_STS == '1' ? 'image' : 'none'" style="cursor:EXPR(DRFT_STS!= '1' ? 'arrow' : 'hand');" text="URL('theme://images/sanctn/ico_pop_dtl.png')"/>
                              </Band>
                            </Format>
                          </Formats>
                        </Grid>
                      </Layout>
                    </Layouts>
                  </Tabpage>
                  <Tabpage id="tpg3" text="브랜치 거래내역">
                    <Layouts>
                      <Layout>
                        <Grid id="grd_cb2AcctHis" taborder="5" useinputpanel="false" left="1" top="29" right="1" bottom="1" binddataset="ds_cb2AcctHis" autofittype="col" cellsizingtype="col" onheadclick="div_work_tab_master_tpg3_grd_cb2AcctHis_onheadclick">
                          <Formats>
                            <Format id="default">
                              <Columns>
                                <Column size="40"/>
                                <Column size="120"/>
                                <Column size="120"/>
                                <Column size="100"/>
                                <Column size="120"/>
                                <Column size="60"/>
                                <Column size="120"/>
                                <Column size="120"/>
                                <Column size="200"/>
                              </Columns>
                              <Rows>
                                <Row size="24" band="head"/>
                                <Row size="24"/>
                              </Rows>
                              <Band id="head">
                                <Cell text="선택"/>
                                <Cell col="1" text="금융기관"/>
                                <Cell col="2" text="계좌번호"/>
                                <Cell col="3" text="취급점"/>
                                <Cell col="4" text="거래일시"/>
                                <Cell col="5" text="입출구분"/>
                                <Cell col="6" text="거래금액"/>
                                <Cell col="7" text="잔액"/>
                                <Cell col="8" text="적요"/>
                              </Band>
                              <Band id="body">
                                <Cell displaytype="expr:INOUT_GUBUN == &quot;출금&quot; ? &quot;checkbox&quot;:&quot;none&quot;" edittype="expr:INOUT_GUBUN == &quot;출금&quot; ? &quot;checkbox&quot;:&quot;none&quot;" text="bind:CHK" autosizerow="limitmin" autosizecol="limitmin"/>
                                <Cell col="1" style="align: ;" cssclass="Cellgrd_WF_AlignLeft" text="bind:FNNC_INSTT_NM" autosizerow="limitmin" autosizecol="limitmin"/>
                                <Cell col="2" style="align: ;" cssclass="Cellgrd_WF_AlignLeft" text="bind:ACCT_NO" autosizerow="limitmin" autosizecol="limitmin"/>
                                <Cell col="3" style="align: ;" cssclass="Cellgrd_WF_AlignLeft" text="bind:BRANCH" autosizerow="limitmin" autosizecol="limitmin"/>
                                <Cell col="4" displaytype="normal" style="align: ;" text="bind:ACCT_TXDAY" calendardisplaynulltype="none" autosizerow="limitmin" autosizecol="limitmin"/>
                                <Cell col="5" text="bind:INOUT_GUBUN" autosizerow="limitmin" autosizecol="limitmin"/>
                                <Cell col="6" displaytype="number" style="align: ;" cssclass="Cellgrd_WF_AlignRight" text="bind:TX_AMT" autosizerow="limitmin" autosizecol="limitmin"/>
                                <Cell col="7" displaytype="number" style="align: ;" cssclass="Cellgrd_WF_AlignRight" text="bind:TX_CUR_BAL" autosizerow="limitmin" autosizecol="limitmin"/>
                                <Cell col="8" style="align: ;" cssclass="Cellgrd_WF_AlignLeft" text="bind:JEOKYO" autosizerow="limitmin" autosizecol="limitmin"/>
                              </Band>
                            </Format>
                          </Formats>
                        </Grid>
                        <Static id="Static01" taborder="6" text="9" visible="false" left="0" top="0" style="background:aqua;align:center middle;font:bold 9 Dotum;opacity:50;" height="5" right="0"/>
                        <Static id="sta_year00" taborder="7" text="거래일자" cssclass="sta_WFSA_Label" top="5" height="19" left="0" width="64"/>
                        <Static id="Static05" taborder="8" text="5" visible="false" left="60" top="2" width="5" height="34" style="background:aqua;align:center middle;font:bold 9 Dotum;opacity:50;"/>
                        <Calendar id="cal_acctTxday" taborder="0" top="5" width="110" height="19" left="65" dateformat="yyyy-MM-dd" value="null" onkeyup="div_work_tab_master_tpg3_cal_acctTxday_onkeyup"/>
                        <Static id="Static07" taborder="9" text="5" visible="false" left="175" top="2" width="5" height="34" style="background:aqua;align:center middle;font:bold 9 Dotum;opacity:50;"/>
                        <Button id="btn_searchdelngDtls" taborder="1" text="거래내역 조회" cssclass="btn_WF_Process" top="5" width="105" height="19" left="180" onclick="fn_searchdelngDtls"/>
                        <Static id="Static00" taborder="10" text="9" visible="false" left="0" top="24" right="0" height="5" style="background:aqua;align:center middle;font:bold 9 Dotum;opacity:50;"/>
                        <Button id="btn_addCptalOpratn" taborder="4" text="자금운용입력" top="5" right="0" width="82" height="19" onclick="btn_addCptalOpratn_onclick" style="font:9 Gulim;"/>
                        <Static id="Static02" taborder="2" text="* 브랜치 거래내역에서 체크된 출금내역을 자금배정 및 자금운용에 자동으로 추가합니다." top="5" width="480" height="21" right="170"/>
                        <Static id="Static03" taborder="11" text="5" visible="false" left="944" top="2" width="5" height="34" style="background:aqua;align:center middle;font:bold 9 Dotum;opacity:50;"/>
                        <Button id="btn_addCptalAsign" taborder="3" text="자금배정입력" top="5" right="87" width="82" height="19" onclick="btn_addCptalAsign_onclick" style="font:9 Gulim;"/>
                        <Static id="Static04" taborder="12" text="5" visible="false" left="858" top="2" width="5" height="34" style="background:aqua;align:center middle;font:bold 9 Dotum;opacity:50;"/>
                      </Layout>
                    </Layouts>
                  </Tabpage>
                </Tabpages>
              </Tab>
            </Layout>
          </Layouts>
        </Div>
        <Calendar id="cal_trans" taborder="4" value="20150320" dateformat="yyyy.MM.dd (ddd)" left="889" top="43" width="140" height="27" visible="false"/>
      </Layout>
    </Layouts>
    <Objects>
      <Dataset id="ds_cptalAsign" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false" canrowposchange="ds_cptalAsign_canrowposchange" onrowposchanged="ds_cptalAsign_onrowposchanged">
        <ColumnInfo>
          <Column id="ASIGN_YM" type="STRING" size="6" sumtext="배정년월"/>
          <Column id="ODR" type="STRING" size="3" sumtext="차수"/>
          <Column id="CPTAL_ASIGN_DE" type="STRING" size="8" sumtext="자금배정일자"/>
          <Column id="ASIGN_DOC_NO" type="STRING" size="30" sumtext="배정문서번호"/>
          <Column id="SANCTN_NO" type="BIGDECIMAL" size="22" sumtext="결재번호"/>
          <Column id="ASIGN_SM" type="BIGDECIMAL" size="256" sumtext="배정합계"/>
          <Column id="RM" type="STRING" size="200" sumtext="비고"/>
          <Column id="REGISTER_ID" type="STRING" size="12" sumtext="등록자ID"/>
          <Column id="REGIST_DT" type="DATE" size="7" sumtext="등록일시"/>
          <Column id="UPDUSR_ID" type="STRING" size="12" sumtext="수정자ID"/>
          <Column id="UPDT_DT" type="DATE" size="7" sumtext="수정일시"/>
          <Column id="CHK" type="STRING" size="256"/>
          <Column id="NEXT_YN" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_cb2AcctHis" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="CHK" type="STRING" size="256"/>
          <Column id="FNNC_INSTT_CODE" type="STRING" size="256"/>
          <Column id="FNNC_INSTT_NM" type="STRING" size="256" sumtext="금융기관명"/>
          <Column id="ACCT_NO" type="STRING" size="256" sumtext="계좌번호"/>
          <Column id="ACCT_TXDAY" type="STRING" size="256" sumtext="거래일"/>
          <Column id="INOUT_GUBUN" type="STRING" size="256" sumtext="입출구분"/>
          <Column id="TX_AMT" type="BIGDECIMAL" size="256" sumtext="거래금액"/>
          <Column id="TX_CUR_BAL" type="BIGDECIMAL" size="256" sumtext="잔액"/>
          <Column id="JEOKYO" type="STRING" size="256" sumtext="적요"/>
          <Column id="BRANCH" type="STRING" size="256" sumtext="취급점"/>
          <Column id="CPTAL_BALC_SE_CODE" type="STRING" size="256" sumtext="자금수지구분코드"/>
          <Column id="ASIGN_SE" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_cptalAsignAcmtl" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="CPTAL_BALC_SE_CODE" type="STRING" size="256"/>
          <Column id="ASIGN_ACMTL" type="BIGDECIMAL" size="256" sumtext="배정누계"/>
          <Column id="HEDOFC_ASIGN_AMOUNT" type="BIGDECIMAL" size="256" sumtext="본사배정금액"/>
          <Column id="REPTS_ASIGN_AMOUNT" type="BIGDECIMAL" size="256" sumtext="레포츠배정금액"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_acnutnoAsnCptal" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false" cancolumnchange="ds_acnutnoAsnCptal_cancolumnchange" oncolumnchanged="ds_acnutnoAsnCptal_oncolumnchanged">
        <ColumnInfo>
          <Column id="CHK" type="STRING" size="256"/>
          <Column id="ASIGN_YM" type="STRING" size="256"/>
          <Column id="ODR" type="STRING" size="256"/>
          <Column id="CPTAL_BALC_SE_CODE" type="STRING" size="256"/>
          <Column id="DEFRAY_ACNUTNO" type="STRING" size="256" sumtext="출금계좌"/>
          <Column id="RCPMNY_ACNUTNO" type="STRING" size="256" sumtext="입금계좌"/>
          <Column id="ASIGN_SE" type="STRING" size="256" sumtext="배정구분"/>
          <Column id="ASIGN_AMOUNT" type="BIGDECIMAL" size="256" sumtext="배정금액"/>
          <Column id="RM" type="STRING" size="256"/>
          <Column id="SN" type="BIGDECIMAL" size="256" sumtext="일련번호"/>
          <Column id="SANCTN_NO" type="STRING" size="256"/>
          <Column id="SANCTN_KND" type="STRING" size="256"/>
          <Column id="REGISTER_ID" type="STRING" size="256"/>
          <Column id="REGIST_DT" type="STRING" size="256"/>
          <Column id="UPDUSR_ID" type="STRING" size="256"/>
          <Column id="UPDT_DT" type="STRING" size="256"/>
          <Column id="DRFT_STS" type="STRING" size="256"/>
          <Column id="DRFT_STS_IMG" type="STRING" size="256"/>
          <Column id="DRFT_DT" type="STRING" size="256"/>
          <Column id="SANCTN_STS" type="STRING" size="256"/>
          <Column id="SANCTN_STS_IMG" type="STRING" size="256"/>
          <Column id="LAST_SANCTN_DT" type="STRING" size="256"/>
          <Column id="OUT_ACNT_NM" type="STRING" size="256"/>
          <Column id="IN_ACNT_NM" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_asignSe" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="CODE" type="STRING" size="256"/>
          <Column id="CODE_NM" type="STRING" size="256"/>
        </ColumnInfo>
        <Rows>
          <Row>
            <Col id="CODE_NM"/>
          </Row>
          <Row>
            <Col id="CODE">1</Col>
            <Col id="CODE_NM">본사</Col>
          </Row>
          <Row>
            <Col id="CODE">2</Col>
            <Col id="CODE_NM">레포츠</Col>
          </Row>
        </Rows>
      </Dataset>
      <Dataset id="ds_cptalBalcSeCode" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="CODE" type="STRING" size="256"/>
          <Column id="CODE_NM" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_cptBalcAsnCptal" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="CPTAL_BALC_SE_CODE" type="STRING" size="256"/>
          <Column id="CHK" type="STRING" size="256"/>
          <Column id="SANCTN_NO" type="STRING" size="256"/>
          <Column id="DRFT_STS_IMG" type="STRING" size="256"/>
          <Column id="DRFT_DT" type="STRING" size="256"/>
          <Column id="SANCTN_STS_IMG" type="STRING" size="256"/>
          <Column id="LAST_SANCTN_DT" type="STRING" size="256"/>
          <Column id="DRFT_STS" type="STRING" size="256"/>
          <Column id="SANCTN_STS" type="STRING" size="256"/>
          <Column id="OUT_ACNT_NM" type="STRING" size="256"/>
          <Column id="IN_ACNT_NM" type="STRING" size="256"/>
          <Column id="DEFRAY_ACNUTNO" type="STRING" size="256"/>
          <Column id="RCPMNY_ACNUTNO" type="STRING" size="256"/>
          <Column id="ASIGN_AMOUNT" type="STRING" size="256"/>
          <Column id="SN" type="STRING" size="256"/>
          <Column id="REGIST_DT" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_cond" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="YEAR" type="STRING" size="256"/>
          <Column id="MONTH" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_cond01" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="ACCT_TXDAY" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_cond02" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="ASIGN_YM" type="STRING" size="256"/>
          <Column id="ODR" type="STRING" size="256"/>
          <Column id="YEAR" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_cptalOpratn" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false" cancolumnchange="ds_cptalOpratn_cancolumnchange">
        <ColumnInfo>
          <Column id="CHK" type="STRING" size="256" sumtext="선택"/>
          <Column id="OPRATN_YM" type="STRING" size="256" sumtext="운용년월"/>
          <Column id="SN" type="BIGDECIMAL" size="256" sumtext="일련번호"/>
          <Column id="CPTAL_OPRATN_DE" type="STRING" size="256" sumtext="자금운용일자"/>
          <Column id="SANCTN_NO" type="STRING" size="256" sumtext="결재번호"/>
          <Column id="SANCTN_KND" type="STRING" size="256"/>
          <Column id="DEFRAY_ACNUTNO" type="STRING" size="256" sumtext="출금계좌"/>
          <Column id="RCPMNY_ACNUTNO" type="STRING" size="256" sumtext="입금계좌"/>
          <Column id="OPRATN_AMOUNT" type="BIGDECIMAL" size="256" sumtext="이체금액"/>
          <Column id="RM" type="STRING" size="256" sumtext="비고"/>
          <Column id="REGISTER_ID" type="STRING" size="12" sumtext="등록자ID"/>
          <Column id="REGIST_DT" type="STRING" size="7" sumtext="등록일시"/>
          <Column id="UPDUSR_ID" type="STRING" size="12" sumtext="수정자ID"/>
          <Column id="UPDT_DT" type="STRING" size="7" sumtext="수정일시"/>
          <Column id="DRFT_STS" type="STRING" size="256"/>
          <Column id="DRFT_STS_IMG" type="STRING" size="256"/>
          <Column id="DRFT_DT" type="STRING" size="256"/>
          <Column id="SANCTN_STS" type="STRING" size="256"/>
          <Column id="SANCTN_STS_IMG" type="STRING" size="256"/>
          <Column id="LAST_SANCTN_DT" type="STRING" size="256"/>
          <Column id="IN_BANK_CODE" type="STRING" size="256"/>
          <Column id="OUT_BANK_CODE" type="STRING" size="256"/>
          <Column id="OPRATN_DOC_NO" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_print" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false"/>
      <Dataset id="ds_validation" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="compId" type="STRING" size="256"/>
          <Column id="colId" type="STRING" size="256"/>
          <Column id="PK" type="STRING" size="256"/>
          <Column id="notNull" type="STRING" size="256"/>
          <Column id="type" type="STRING" size="256"/>
          <Column id="nlength" type="STRING" size="256"/>
          <Column id="from" type="STRING" size="256"/>
          <Column id="to" type="STRING" size="256"/>
          <Column id="lengthChkGb" type="STRING" size="256"/>
          <Column id="msgId" type="STRING" size="256"/>
          <Column id="expr" type="STRING" size="256"/>
          <Column id="func" type="STRING" size="256"/>
        </ColumnInfo>
        <Rows>
          <Row>
            <Col id="compId">ds_cond01</Col>
            <Col id="colId">ACCT_TXDAY</Col>
            <Col id="notNull">Y</Col>
            <Col id="from"/>
            <Col id="to"/>
            <Col id="msgId">거래일자</Col>
          </Row>
          <Row>
            <Col id="compId">ds_acnutnoAsnCptal</Col>
            <Col id="colId">DEFRAY_ACNUTNO</Col>
            <Col id="notNull">Y</Col>
            <Col id="msgId">계좌별 현황 출금 계좌번호</Col>
          </Row>
          <Row>
            <Col id="compId">ds_acnutnoAsnCptal</Col>
            <Col id="colId">RCPMNY_ACNUTNO</Col>
            <Col id="notNull">Y</Col>
            <Col id="msgId">계좌별 현황 입금 계좌번호</Col>
          </Row>
          <Row>
            <Col id="compId">ds_acnutnoAsnCptal</Col>
            <Col id="colId">ASIGN_SE</Col>
            <Col id="notNull">Y</Col>
            <Col id="msgId">계좌별 현황 배정구분</Col>
          </Row>
          <Row>
            <Col id="compId">ds_acnutnoAsnCptal</Col>
            <Col id="colId">ASIGN_AMOUNT</Col>
            <Col id="notNull">Y</Col>
            <Col id="msgId">계좌별 현황 배정금액</Col>
          </Row>
          <Row>
            <Col id="compId">ds_cptalAsign</Col>
            <Col id="colId">CPTAL_ASIGN_DE</Col>
            <Col id="notNull">Y</Col>
            <Col id="msgId">자금배정일자</Col>
          </Row>
          <Row>
            <Col id="compId">ds_cptalOpratn</Col>
            <Col id="colId">CPTAL_OPRATN_DE</Col>
            <Col id="notNull">Y</Col>
            <Col id="msgId">자금운용일자</Col>
          </Row>
          <Row>
            <Col id="compId">ds_cptalOpratn</Col>
            <Col id="colId">DEFRAY_ACNUTNO</Col>
            <Col id="notNull">Y</Col>
            <Col id="msgId">자금운용 출금계좌</Col>
          </Row>
          <Row>
            <Col id="compId">ds_cptalOpratn</Col>
            <Col id="colId">RCPMNY_ACNUTNO</Col>
            <Col id="notNull">Y</Col>
            <Col id="msgId">자금운용 입금계좌</Col>
          </Row>
          <Row>
            <Col id="compId">ds_cptalOpratn</Col>
            <Col id="colId">OPRATN_AMOUNT</Col>
            <Col id="notNull">Y</Col>
            <Col id="msgId">자금운용 운용금액</Col>
          </Row>
        </Rows>
      </Dataset>
      <Dataset id="ds_approve" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="DATA_VALUE" type="STRING" size="1000"/>
          <Column id="DATA_TITLE" type="STRING" size="256"/>
          <Column id="O_URL" type="STRING" size="256"/>
          <Column id="I_KEY" type="STRING" size="256"/>
          <Column id="KEY" type="STRING" size="256"/>
          <Column id="DEPT_CD" type="STRING" size="256"/>
          <Column id="EMP_CD" type="STRING" size="256"/>
          <Column id="TITLE" type="STRING" size="256"/>
          <Column id="SE" type="STRING" size="256"/>
          <Column id="ASIGN_YM" type="STRING" size="256" sumtext="자금배정키"/>
          <Column id="ODR" type="STRING" size="256" sumtext="자금배정키"/>
          <Column id="CPTAL_BALC_SE_CODE" type="STRING" size="256" sumtext="자금배정키"/>
          <Column id="OPRATN_YM" type="STRING" size="256" sumtext="자금운용키"/>
          <Column id="SN" type="STRING" size="256" sumtext="자금운용키"/>
          <Column id="SANCTN_NO" type="STRING" size="256"/>
          <Column id="CSN" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_fnncInsttCode" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="CODE" type="STRING" size="256"/>
          <Column id="CODE_NM" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
    </Objects>
    <Bind>
      <BindItem id="item1" compid="div_search.cmb_month" propid="value" datasetid="ds_cond" columnid="MONTH"/>
      <BindItem id="item2" compid="div_work.Tab00.tabpage2.Calendar00" propid="value" datasetid="ds_cond01" columnid="ACCT_TXDAY"/>
      <BindItem id="item3" compid="div_work.tab_master.tpg2.cal_acctTxday" propid="value" datasetid="ds_cond01" columnid="ACCT_TXDAY"/>
      <BindItem id="item4" compid="div_work.tab_master.tpg3.cal_acctTxday" propid="value" datasetid="ds_cond01" columnid="ACCT_TXDAY"/>
      <BindItem id="item0" compid="div_search.spn_year" propid="value" datasetid="ds_cond" columnid="YEAR"/>
    </Bind>
    <Script type="xscript5.0"><![CDATA[/**********************************************************************
* 화면ID   : FUN040201.xfdl
* 화면명   : 자금배정관리
* 화면설명 : 자금배정 현황을 관리한다.
* 작성일   : 2015.09.08
* 작성자   : 양성모
* 수정이력 : 
***********************************************************************
*     수정일     수정자   내용
***********************************************************************
*
***********************************************************************
*/


/**********************************************************************
* Script Include 
***********************************************************************/
// 시스템 공통 라이브러리 Include
include "lib::comInclude.xjs";
include "mis_lib::misUtil.xjs";

this.saveRow1 = -1;
this.saveRow2 = -1;
this.checkDs = [this.ds_cptalAsign, this.ds_acnutnoAsnCptal, this.ds_cptalOpratn];
/**********************************************************************
* onInit / onLoad 영역
***********************************************************************/

this.FUN040201_oninit = function(obj:Form, e:nexacro.InitEventInfo)
{
	// Form 초기화
	this.fn_init_form();

	// DataSet 초기화
	this.fn_init_dataset();
}

this.FUN040201_onload = function(obj:Form, e:nexacro.LoadEventInfo)
{
	// 초기 검색조건
	this.ds_cond.setColumn(0, "YEAR", this.dateUtils.today().substr(0,4));
	this.ds_cond.setColumn(0, "MONTH", this.dateUtils.today().substr(4,2));
	
	this.ds_cond01.clearData();
	this.ds_cond01.addRow();
	this.ds_cond01.setColumn(0, "ACCT_TXDAY", this.dateUtils.today());
	
	
	// 공통코드
	var comboParams = [
		["ds_cptalBalcSeCode", "FUN003", "Y", ""]	// 자금수지원
	];
	var callback = function (svcId, errorCode, errorMsg) {
		
		this.ds_cptalBalcSeCode.filter("INT_VAL > 0");
		this.ds_cond.set_enableevent(true);
		
		// 조회 이벤트 / 함수 호출
		this.fn_search();
	};
	this.gfn_comboLoad (comboParams, callback);	
	
	//은행코드
	this.fn_transaction("selectFnncInsttCodeList");
}


/**********************************************************************
* Form/Dataset 오브젝트 초기화
***********************************************************************/

/*
 * 함수명  	: initForm
 * 설명 		: Form을 초기화한다.
 * params  		: None
 * return Type 	: None
 * 사용법		: this.initForm();
 */
this.fn_init_form = function()
{
	this.gfn_initForm(this);	// 시스템 공통으로 Form을 Initialize 한다.
	this.fn_misFormInit(this);
}


/*
 * 함수명  	: initDataset
 * 설명 		: Dataset을 초기화한다
 * params  		: None
 * return Type 	: None
 * 사용법		: this.initDataset();
 */
this.fn_init_dataset = function()
{
	// 조건에 사용되는 Dataset 초기화
	this.gfn_initCondDs(this, this.div_search);
}



/**********************************************************************
* Transaction 영역 시작
***********************************************************************
*
* 1. Transaction 관련 이벤트 핸들러
* 2. call Transaction 영역
* 3. callback 영역(Transaction, Popup)
* 
***********************************************************************/



/**********************************************************************
* Transaction 관련 이벤트 핸들러 
***********************************************************************/

/*
 * 함수명  	: fn_search
 * 설명 		: 조회 이벤트 처리(자금배정내역)
 * params  		: None
 * return Type 	: None
 * 사용법		: this.fn_search();
 */
this.fn_search = function(obj:Button,  e:nexacro.ClickEventInfo)
{	
	// 데이터셋 클리어
	this.ds_cptalAsign.clearData();
	this.ds_cptalOpratn.clearData();
	this.ds_acnutnoAsnCptal.clearData();
	
	// transaction
	this.fn_transaction("selectCptalAsignList");
}

/*
 * 함수명  	: fn_searchDetail
 * 설명 		: 조회 이벤트 처리(자금배정상세내역)
 * params  		: None
 * return Type 	: None
 * 사용법		: this.fn_searchDetail();
 */
this.fn_searchDetail = function(obj:Button,  e:nexacro.ClickEventInfo)
{	
	this.ds_acnutnoAsnCptal.clearData();
	this.ds_cptBalcAsnCptal.clearData();
	
	trace(this.ds_cptalAsign.getColumn(this.ds_cptalAsign.rowposition, "ASIGN_YM"));
	
	if(this.ds_cptalAsign.getRowType(this.ds_cptalAsign.rowposition) != 2){
		this.ds_cond02.setColumn(0, "ASIGN_YM", this.ds_cptalAsign.getColumn(this.ds_cptalAsign.rowposition, "ASIGN_YM"));
		this.ds_cond02.setColumn(0, "ODR"     , this.ds_cptalAsign.getColumn(this.ds_cptalAsign.rowposition, "ODR"));
		this.ds_cond02.setColumn(0, "YEAR"    , this.ds_cptalAsign.getColumn(this.ds_cptalAsign.rowposition, "ASIGN_YM").substr(0,4));
		
		this.fn_transaction("selectCptBalcAsnCptalList");
	}
}


/*
 * 함수명  	: fn_save
 * 설명 		: 저장 이벤트 처리
 * params  		: None
 * return Type 	: None
 * 사용법		: this.fn_save();
 */
this.fn_save= function()
{
	//데이터셋의 수정여부 체크
	if(Ex.util.isUpdated(this.ds_cptalAsign) || Ex.util.isUpdated(this.ds_acnutnoAsnCptal) || Ex.util.isUpdated(this.ds_cptalOpratn)) {
		// validation 체크
		if(!this.gfn_checkValidation_NoUpdChk(this.ds_cptalAsign, this.ds_validation)) {
			return false;
		}
		// validation 체크
		if(!this.gfn_checkValidation_NoUpdChk(this.ds_acnutnoAsnCptal, this.ds_validation)) {
			return false;
		}
		// validation 체크
		if(!this.gfn_checkValidation_NoUpdChk(this.ds_cptalOpratn, this.ds_validation)) {
			return false;
		}
		
		this.saveRow1 = this.ds_cptalAsign.rowposition;
		this.saveRow2 = this.ds_cptalOpratn.rowposition;
		this.fn_transaction("saveCptalAsignListCUD");
	} else {
	    this.gfn_message("comm.데이터.변경.없음");	
	}
}

/*
 * 함수명  	: fn_searchdelngDtls
 * 설명 		: 브랜치 거래내역 조회
 * params  		: None
 * return Type 	: None
 * 사용법		: this.fn_searchdelngDtls();
 */
this.fn_searchdelngDtls = function(obj:Button,  e:nexacro.ClickEventInfo)
{
	// validation 체크
	if(!this.gfn_checkValidation_NoUpdChk(this.ds_cond01, this.ds_validation)) {
		return false;
	}
	
	this.fn_transaction("selectCb2AcctHisList");
}

/*
 * 함수명  	: fn_saveDtaCreatCUD
 * 설명 		: 결재 이벤트 처리
 * params  		: None
 * return Type 	: None
 * 사용법		: this.fn_saveDtaCreatCUD();
 */
this.fn_sanction= function()
{
	if(Ex.util.isUpdated(this.ds_cptalAsign) || Ex.util.isUpdated(this.ds_acnutnoAsnCptal) || Ex.util.isUpdated(this.ds_cptalOpratn)){
	    this.gfn_message("comm.정보.저장.요청", "변경된");
	    return;
	}
	
	var SE = "";
	if(this.div_work.tab_master.tabindex == 0){
		SE = "3";
	}
	else if(this.div_work.tab_master.tabindex == 1){
		SE = "1";
	}
	else{
		SE = "2";
	}
	
	var parm = {
		arg_0 : this  //==> 필수, 팝업을 호출하는 form을 참조할 수 있도록 팝업에 Argument로 넘겨준다. (반드시 기술해야 함.)		
	   ,arg_1 : SE
	};
	
	this.gfn_popup("fun040201_p01", 380, 125, "결재선택팝업", parm, "mis_fun::FUN040201_P01.xfdl", "fn_PopupCallback");
	
// 	if(this.ds_cptalAsign.getCaseCount("CHK == '1'") > 1) {
// 		alert("자금배정 결재는 1건씩 가능합니다.")
// 		return;
// 	};
// 	
// 	if(this.ds_cptalOpratn.getCaseCount("CHK == '1'") > 1) {
// 		alert("자금운용 결재는 1건씩 가능합니다.")
// 		return;
// 	};
}

/*
 * 함수명  	: fn_sanction01
 * 설명 		: 자금운용&자금배정 전자결재 처리
 * params  		: None
 * return Type 	: None
 * 사용법		: this.fn_sanction01();
 */
this.fn_sanction01 = function()
{	
	var findRow01 = this.ds_cptalOpratn.findRow("CHK","1");
	var fRow = this.ds_cptBalcAsnCptal.findRow( "CHK", "1" );
	
	if(findRow01 < 0){
		this.gfn_message("info.항목.선택.알림", "자금운용내역");
		return;
	}
	
	if(fRow < 0){
		this.gfn_message("info.항목.선택.알림", "자금수지원");
		return;
	}
	
	var findRow02 = this.ds_cptalAsign.rowposition;
	
	
	var cptalBalcSeCode = "";
	var findRow03       = "";
	var asignAmt   = 0; // 선택한 자금수지원에 대한 금회이체액
	var asignAcmtl = 0;	// 선택한 자금수지원에 대한 자금배정누계액
	
	for(var i=0; i<this.ds_cptBalcAsnCptal.rowcount; i++) {
		if("1" == this.ds_cptBalcAsnCptal.getColumn(i,"CHK")) {
			asignAmt = asignAmt + 0;
			cptalBalcSeCode = this.ds_cptBalcAsnCptal.getColumn(i, "CPTAL_BALC_SE_CODE");	// 자금수지원코드	
			asignAmt       += nexacro.toNumber(this.ds_acnutnoAsnCptal.getCaseSum("CPTAL_BALC_SE_CODE=='"+cptalBalcSeCode+"'","ASIGN_AMOUNT")); // 선택한 자금수지원에 대한 금회이체액			
			findRow03       = this.ds_cptalAsignAcmtl.findRow("CPTAL_BALC_SE_CODE",cptalBalcSeCode);
			asignAcmtl     += nexacro.toNumber(this.ds_cptalAsignAcmtl.getColumn(findRow03, "HEDOFC_ASIGN_AMOUNT") + this.ds_cptalAsignAcmtl.getColumn(findRow03, "REPTS_ASIGN_AMOUNT"));	// 선택한 자금수지원에 대한 자금배정누계액
		}
	}
	
	var filds = new Array(35);
	
	//자금운용
	filds[0] = "금"+this.comUtils.formatComma(this.ds_cptalOpratn.getColumn(findRow01, "OPRATN_AMOUNT"))+"원";		// 자금운용금액
	filds[1] = this.ds_cptalOpratn.getColumn(findRow01, "DEFRAY_ACNUTNO");		// 출금계좌
	filds[2] = this.ds_cptalOpratn.getColumn(findRow01, "RCPMNY_ACNUTNO");		// 입금계좌
	filds[3] = this.comUtils.formatComma(this.ds_cptalOpratn.getColumn(findRow01, "OPRATN_AMOUNT"));	// 이체금액
	filds[4] = this.ds_cptalOpratn.getColumn(findRow01, "RM");    	// 비고
	
	// 자금배정
	filds[5] = "금"+this.comUtils.formatComma(asignAmt)+"원";		// 금회이체액 한글표기
	filds[6] = this.comUtils.formatComma(asignAcmtl - asignAmt);	// 기 이체액 = 이체누계 - 금회이체액
	filds[7] = this.comUtils.formatComma(asignAmt);    				// 금회 이체액
	filds[8] = this.comUtils.formatComma(asignAcmtl);   			// 이체누계
	
	var i=9
	var vSn = -1;
	var jCode = "";
	var rCode = "";

	for(var j=0; j<this.ds_cptBalcAsnCptal.rowcount; j++) {
		if("1" == this.ds_cptBalcAsnCptal.getColumn(j,"CHK")) {
			jCode = this.ds_cptBalcAsnCptal.getColumn(j,"CPTAL_BALC_SE_CODE");
			
			for(var r=0; r < this.ds_acnutnoAsnCptal.rowcount; r++){
			
				rCode = this.ds_acnutnoAsnCptal.getColumn(r,"CPTAL_BALC_SE_CODE");
				
				if(jCode == rCode) {
					filds[i]    = "("+this.ds_acnutnoAsnCptal.getColumn(r, "OUT_ACNT_NM")+") "+this.ds_acnutnoAsnCptal.getColumn(r, "DEFRAY_ACNUTNO");   						// 출금계좌
					filds[i+8]  = this.comUtils.formatComma(this.ds_acnutnoAsnCptal.getColumn(r, "ASIGN_AMOUNT"));  // 금액
					filds[i+16] = "("+this.ds_acnutnoAsnCptal.getColumn(r, "IN_ACNT_NM")+") "+this.ds_acnutnoAsnCptal.getColumn(r, "RCPMNY_ACNUTNO");   						// 입금계좌
					i = i+1;
					
					if(vSn < 0) {
						vSn = this.ds_acnutnoAsnCptal.getColumn(r, "SN");
					}
					else {
						vSn = vSn + ","+ this.ds_acnutnoAsnCptal.getColumn(r, "SN");
					}
				}
			}
		}
	}

	var date = this.ds_cptalOpratn.getColumn(findRow01, "CPTAL_OPRATN_DE");
	this.cal_trans.set_value(date);
	filds[33] = this.cal_trans.text + ".  끝.";	// 이체일자(자금운용기준)
	
	var dataValue = filds.join("|");
	var dataTitle = "계좌이체 내역 통지3";
	var title     = "계좌이체 내역 통지3";
	
	this.ds_approve.clearData();	
	this.ds_approve.addRow();
	
	this.ds_approve.setColumn(0, "TITLE",       title                );
	this.ds_approve.setColumn(0, "DATA_TITLE",  dataTitle            );
	this.ds_approve.setColumn(0, "DATA_VALUE",  dataValue            );
 	this.ds_approve.setColumn(0, "DEPT_CD",     this.gfn_getDeptId() );
 	this.ds_approve.setColumn(0, "EMP_CD",      this.fn_getEmpno() );
	this.ds_approve.setColumn(0, "SE",          "1");
	this.ds_approve.setColumn(0, "OPRATN_YM",   this.ds_cptalOpratn.getColumn(findRow01, "OPRATN_YM"));
	this.ds_approve.setColumn(0, "ASIGN_YM",    this.ds_cptalAsign.getColumn(this.ds_cptalAsign.rowposition, "ASIGN_YM"));
	this.ds_approve.setColumn(0, "ODR",         this.ds_cptalAsign.getColumn(this.ds_cptalAsign.rowposition, "ODR"));
	this.ds_approve.setColumn(0, "CSN",         this.ds_cptalOpratn.getColumn(findRow01, "SN"));
	this.ds_approve.setColumn(0, "SN",          vSn);

	this.fn_transaction("approve");
}

/*
 * 함수명  	: fn_sanction02
 * 설명 		: 자금운용 전자결재 처리
 * params  		: None
 * return Type 	: None
 * 사용법		: this.fn_sanction02();
 */
this.fn_sanction02 = function()
{	
	var findRow = this.ds_cptalOpratn.findRow("CHK","1");
	
	if(findRow < 0){
		this.gfn_message("info.항목.선택.알림", "자금운용내역");
		return;
	}
	
	var filds = new Array(7);
	filds[0] = "금"+this.comUtils.formatComma(this.ds_cptalOpratn.getColumn(findRow, "OPRATN_AMOUNT"))+"원";	// 자금운용금액
	filds[1] = this.ds_cptalOpratn.getColumn(findRow, "DEFRAY_ACNUTNO");	// 출금계좌
	filds[2] = this.ds_cptalOpratn.getColumn(findRow, "RCPMNY_ACNUTNO");	// 입금계좌
	filds[3] = this.comUtils.formatComma(this.ds_cptalOpratn.getColumn(findRow, "OPRATN_AMOUNT"));     // 이체금액
	filds[4] = this.ds_cptalOpratn.getColumn(findRow, "RM");			    // 비고
	
	var date = this.ds_cptalOpratn.getColumn(findRow, "CPTAL_OPRATN_DE");
	this.cal_trans.set_value(date);
	filds[5] = this.cal_trans.text + ".  끝.";	// 이체일자
	
	var dataValue = filds.join("|");
	var dataTitle = "계좌이체 내역 통지2";
	var title     = "계좌이체 내역 통지2";
	
	this.ds_approve.clearData();	
	this.ds_approve.addRow();
	
	this.ds_approve.setColumn(0, "TITLE",      title                );
	this.ds_approve.setColumn(0, "DATA_TITLE", dataTitle            );
	this.ds_approve.setColumn(0, "DATA_VALUE", dataValue            );
 	this.ds_approve.setColumn(0, "DEPT_CD",    this.gfn_getDeptId() );
 	this.ds_approve.setColumn(0, "EMP_CD",     this.fn_getEmpno() );
	this.ds_approve.setColumn(0, "SE",         "2");
	this.ds_approve.setColumn(0, "OPRATN_YM",  this.ds_cptalOpratn.getColumn(findRow, "OPRATN_YM"));
	this.ds_approve.setColumn(0, "CSN",        this.ds_cptalOpratn.getColumn(findRow, "SN"));
	this.ds_approve.setColumn(0, "SN",         this.ds_cptalOpratn.getColumn(findRow, "SN"));

	this.fn_transaction("approve");
}

/*
 * 함수명  	: fn_sanction03
 * 설명 		: 자금배정 전자결재 처리
 * params  		: None
 * return Type 	: None
 * 사용법		: this.fn_sanction03();
 */
this.fn_sanction03 = function()
{	
	
	var fRow = this.ds_cptBalcAsnCptal.findRow( "CHK", "1" );
	if(fRow < 0){
		this.gfn_message("info.항목.선택.알림", "자금수지원");
		return;
	}
	
	var cptalBalcSeCode = "";
	var findRow03       = "";
	var asignAmt   = 0; // 선택한 자금수지원에 대한 금회이체액
	var asignAcmtl = 0;	// 선택한 자금수지원에 대한 자금배정누계액

	for(var i=0; i<this.ds_cptBalcAsnCptal.rowcount; i++) {
		if("1" == this.ds_cptBalcAsnCptal.getColumn(i,"CHK")) {
			asignAmt = asignAmt + 0;
			cptalBalcSeCode = this.ds_cptBalcAsnCptal.getColumn(i, "CPTAL_BALC_SE_CODE");	// 자금수지원코드	
			asignAmt       += nexacro.toNumber(this.ds_acnutnoAsnCptal.getCaseSum("CPTAL_BALC_SE_CODE=='"+cptalBalcSeCode+"'","ASIGN_AMOUNT")); // 선택한 자금수지원에 대한 금회이체액			
			findRow03       = this.ds_cptalAsignAcmtl.findRow("CPTAL_BALC_SE_CODE",cptalBalcSeCode);
			asignAcmtl     += nexacro.toNumber(this.ds_cptalAsignAcmtl.getColumn(findRow03, "HEDOFC_ASIGN_AMOUNT") + this.ds_cptalAsignAcmtl.getColumn(findRow03, "REPTS_ASIGN_AMOUNT"));	// 선택한 자금수지원에 대한 자금배정누계액
		}
	}
	
	var filds = new Array(30);
	
	// 자금배정
	filds[0] = "금"+this.comUtils.formatComma(asignAmt)+"원";		// 금회이체액 한글표시
	filds[1] = this.comUtils.formatComma(asignAcmtl - asignAmt);	// 기 이체액 = 이체누계 - 금회이체액
	filds[2] = this.comUtils.formatComma(asignAmt);    				// 금회 이체액
	filds[3] = this.comUtils.formatComma(asignAcmtl);   			// 자금수지원 이체누계
	
	var i=4
	var vSn = -1;
	var jCode = "";
	var rCode = "";

	for(var j=0; j<this.ds_cptBalcAsnCptal.rowcount; j++) {
		if("1" == this.ds_cptBalcAsnCptal.getColumn(j,"CHK")) {
			jCode = this.ds_cptBalcAsnCptal.getColumn(j,"CPTAL_BALC_SE_CODE");
			
			for(var r=0; r < this.ds_acnutnoAsnCptal.rowcount; r++){
			
				rCode = this.ds_acnutnoAsnCptal.getColumn(r,"CPTAL_BALC_SE_CODE");
				
				if(jCode == rCode) {
					filds[i]    = "("+this.ds_acnutnoAsnCptal.getColumn(r, "OUT_ACNT_NM")+") "+this.ds_acnutnoAsnCptal.getColumn(r, "DEFRAY_ACNUTNO");   						// 출금계좌
					filds[i+8]  = this.comUtils.formatComma(this.ds_acnutnoAsnCptal.getColumn(r, "ASIGN_AMOUNT"));  // 금액
					filds[i+16] = "("+this.ds_acnutnoAsnCptal.getColumn(r, "IN_ACNT_NM")+") "+this.ds_acnutnoAsnCptal.getColumn(r, "RCPMNY_ACNUTNO");   						// 입금계좌
					i = i+1;
					
					if(vSn < 0) {
						vSn = this.ds_acnutnoAsnCptal.getColumn(r, "SN");
					}
					else {
						vSn = vSn + ","+ this.ds_acnutnoAsnCptal.getColumn(r, "SN");
					}
				}
			}
		}
	}
	
	var findRow02 = this.ds_cptalAsign.rowposition;
	var date = this.ds_cptalAsign.getColumn(findRow02, "CPTAL_ASIGN_DE");
	
	this.cal_trans.set_value(date);
	filds[28] = this.cal_trans.text + ".  끝.";	// 이체일자
	
	var dataValue = filds.join("|");
	var dataTitle = "계좌이체 내역 통지1";
	var title     = "계좌이체 내역 통지1";
	
	this.ds_approve.clearData();	
	
	this.ds_approve.addRow();
	
	this.ds_approve.setColumn(0, "TITLE",       title                );
	this.ds_approve.setColumn(0, "DATA_TITLE",  dataTitle            );
	this.ds_approve.setColumn(0, "DATA_VALUE",  dataValue            );
 	this.ds_approve.setColumn(0, "DEPT_CD",     this.gfn_getDeptId() );
 	this.ds_approve.setColumn(0, "EMP_CD",      this.fn_getEmpno() );
	this.ds_approve.setColumn(0, "SE",          "3");
	this.ds_approve.setColumn(0, "ASIGN_YM",    this.ds_cptalAsign.getColumn(this.ds_cptalAsign.rowposition, "ASIGN_YM"));
	this.ds_approve.setColumn(0, "ODR",         this.ds_cptalAsign.getColumn(this.ds_cptalAsign.rowposition, "ODR"));
	this.ds_approve.setColumn(0, "SN",          vSn);
	
	trace(this.ds_approve.saveXML());
	
	this.fn_transaction("approve");
}
/**********************************************************************
* call Transaction 영역
***********************************************************************/

/*
 * 함수명  	: fn_transaction
 * 설명 		: Transaction 요청 처리 함수
 * params  		: strSvcId : 서비스요청 ID
 * return Type 	: None
 * 사용법		: this.fn_transaction("SELECT");
 */
this.fn_transaction = function(strSvcId)
{
	switch (strSvcId) {
		case "selectCptalAsignList":			// 자금배정내역, 자금운용내역 조회
			var sController   	= "hsco/mis/fun/FUN040201/selectCptalAsignList.do";
			var sInDatasets   	= "input1=ds_cond";
			var sOutDatasets  	= "ds_cptalAsign=output1 ds_cptalOpratn=output3";
			break;
			
		case "selectCptBalcAsnCptalList":		// 자금배정상세내역 조회
			var sController   	= "hsco/mis/fun/FUN040201/selectCptBalcAsnCptalList.do";
			var sInDatasets   	= "input1=ds_cond02";
			var sOutDatasets  	= "ds_acnutnoAsnCptal=output1 ds_cptalAsignAcmtl=output2";
			break;
			
		case "selectCb2AcctHisList":			// 사이버브랜치 거래내역 조회
			var sController   	= "hsco/mis/fun/FUN040201/selectCb2AcctHisList.do";
			var sInDatasets   	= "input1=ds_cond01";
			var sOutDatasets  	= "ds_cb2AcctHis=output1";
			break;		
						
		case "saveCptalAsignListCUD":			// 자금배정(마스터,디테일)내역, 자금운용내역 저장
			var sController   	= "hsco/mis/fun/FUN040201/saveCptalAsignListCUD.do";
			var sInDatasets   	= "input1=ds_cptalAsign:U input2=ds_acnutnoAsnCptal:U input3=ds_cptalOpratn:U";
			var sOutDatasets  	= "";
			break;
			
		case "approve":    						// 전자결재
			var sController   	= "hsco/mis/fun/FUN040201/approve.do";	
			var sInDatasets   	= "input1=ds_approve";
			var sOutDatasets  	= "ds_approve=output1";
			break;
			
		case "selectFnncInsttCodeList":	   // 금융기관코드 조회
			var sController   	= "hsco/mis/fun/FUN000000/selectFnncInsttCodeList.do";   
			var sInDatasets   	= "";
			var sOutDatasets  	= "ds_fnncInsttCode=output1";
			break;
	}

	Ex.core.tran(this, strSvcId, sController, sInDatasets, sOutDatasets); 
}


/**********************************************************************
* Transaction Callback 영역
***********************************************************************/

 /*
 * 함수명  	: fn_callBack
 * 설명 		: Transaction Callback 처리
 * params  		: strSvcId    : 서비스요청 ID
 *                nErrorCode  : 오류 메시지 코드 ([예] 0 : Success, 그밖의 경우, error)
 *                strErrorMsg : 오류 메시지([예]  success.insert|정상적으로 등록되었습니다.)
 * return Type 	: None
 * 사용법		: 
 */
this.fn_callBack = function (strSvcId, nErrorCode, strErrorMsg)
{
	if(nErrorCode != '0') {
		this.gfn_callback_message(strSvcId, nErrorCode, strErrorMsg);
	}

	if (nErrorCode == 0){
		switch (strSvcId) {
			case "selectCptalAsignList":			// 자금배정내역 조회
				this.fn_searchDetail();
/*
				this.ds_cptalAsign.applyChange();
				this.ds_cptalAsignAcmtl.applyChange();
				this.ds_cptalOpratn.applyChange();
				
				if(this.saveRow1 > -1){
					var temp = this.saveRow1;
					this.saveRow1 = -1;
					this.ds_cptalAsign.set_rowposition(temp);
				}
				
				if(this.saveRow2 > -1){
					this.ds_cptalOpratn.set_rowposition(this.saveRow2);
					this.saveRow2 = -1;
				}
*/				
				break;
			case "selectCptBalcAsnCptalList":		// 자금배정상세내역 조회
				this.ds_acnutnoAsnCptal.applyChange();
				this.fn_cptBalcAsnCptal();
				break;
			case "saveCptalAsignListCUD":			// 자금배정(마스터,디테일)내역 저장
				this.gfn_message("success.처리.성공");
				this.fn_search();
				break;
			case "approve":							// 전자결재
				var oUrl = this.ds_approve.getColumn(0,"O_URL");
				system.execBrowser(oUrl);
				
				this.fn_search();
				break;
				
			case "selectFnncInsttCodeList":	   // 금융기관코드 조회
				//alert(this.ds_fnncInsttCode.rowcount);
			
				break;
		}
	}
}


/*
 * 함수명  	: fn_PopupCallback
 * 설명 		: 팝업 콜백함수
 * params  		: None
 * return Type 	: None
 * 사용법		: this.fn_PopupCallback();
 */
this.fn_PopupCallback = function(sPopupId, sReturn)
{		
	if(sPopupId == "fun040201_p01") {
		
		if(sReturn == "2"){
			this.fn_sanction01();
		} 
		else if(sReturn == "1") {
			this.fn_sanction02();
		}  
		else if(sReturn == "3") {
			this.fn_sanction03();
		}
	}
}

/**********************************************************************
* Transaction 영역 끝
***********************************************************************/


/***********************************************************************
* 사용자 정의 함수
************************************************************************
*
* 1. Button 영역
* 2. Dataset 영역
* 
***********************************************************************/

/**********************************************************************
* Button 영역 
***********************************************************************/
/*
 * 함수명  	: fn_insert
 * 설명 		: 신규 버튼 이벤트
 * params  		: None
 * return Type 	: None
 * 사용법		: this.fn_insert();
 */
this.fn_insert = function(obj:Button,  e:nexacro.ClickEventInfo)
{
	if(this.div_work.tab_master.tabindex == 0){	// 자금배정 기본내역 추가
		
		var rtnVal = this.ds_cptalAsign.set_rowposition(-1);
		
		if(rtnVal != -1) {	//  행 바꿈 허용
			return false;
		}
				
		var strY = this.ds_cond.getColumn(0, "YEAR");
		var strM = this.ds_cond.getColumn(0, "MONTH");
		
		var nRow = this.ds_cptalAsign.addRow();
		
		this.ds_cptalAsign.setColumn(nRow, "ASIGN_YM", strY+strM);
		this.ds_cptalAsign.setColumn(nRow, "CPTAL_ASIGN_DE", this.dateUtils.today());
		this.ds_cptalAsign.setColumn(nRow, "CHK"         , "0");
		this.ds_cptalAsign.setColumn(nRow, "SANCTN_KND"  , "0");

	}
	
	if(this.div_work.tab_master.tabindex == 1){	// 자금운용내역 추가
		var strY = this.ds_cond.getColumn(0, "YEAR");
		var strM = this.ds_cond.getColumn(0, "MONTH");
		var nRow = this.ds_cptalOpratn.addRow();
		
		this.ds_cptalOpratn.setColumn(nRow, "OPRATN_YM", strY+strM);
		this.ds_cptalOpratn.setColumn(nRow, "CPTAL_OPRATN_DE", this.dateUtils.today());
		this.ds_cptalOpratn.setColumn(nRow, "CHK"            , "0");
		this.ds_cptalOpratn.setColumn(nRow, "SANCTN_KND"     , "0");
		this.ds_cptalOpratn.setColumn(nRow, "DRFT_STS"     , "0");
	}
}

/*
 * 함수명  	: fn_delete
 * 설명 		: 삭제 버튼 이벤트
 * params  		: None
 * return Type 	: None
 * 사용법		: this.fn_delete();
 */
this.fn_delete = function(obj:Button,  e:nexacro.ClickEventInfo)
{
	if(this.gfn_message("confirm.삭제여부")){
		if(this.div_work.tab_master.tabindex == 0){
			
			
			var cnt = 0;
			for(i=0; i < this.ds_cptBalcAsnCptal.rowcount; i++){
				SANCTN_STS = this.ds_cptBalcAsnCptal.getColumn(i, "SANCTN_STS");			
				if(!this.comUtils.isNullEmpty(SANCTN_STS) && SANCTN_STS > 0){
					cnt++;
				}				
			}			
			if( cnt > 0){
				this.gfn_message("info.추가.불가", "결재진행중|삭제");
				return;
			}

			var nRow = this.ds_cptalAsign.rowposition;			
			this.ds_cptalAsign.deleteRow(nRow);
			
			this.fn_searchDetail();
		}
		
		if(this.div_work.tab_master.tabindex == 1){
			var nRow = this.ds_cptalOpratn.rowposition;
			var SANCTN_STS = this.ds_cptalOpratn.getColumn(nRow,"SANCTN_STS");
			if(!this.comUtils.isNullEmpty(SANCTN_STS) && SANCTN_STS > 0 ){
				this.gfn_message("info.추가.불가", "결재진행중|삭제");
				return;	
			}

			this.ds_cptalOpratn.deleteRow(nRow);	
		}
	}
}

/*
 * 함수명  	: fn_cancel
 * 설명 		: 취소 버튼 이벤트
 * params  		: None
 * return Type 	: None
 * 사용법		: this.fn_cancel();
 */
this.fn_cancel = function(obj:Button,  e:nexacro.ClickEventInfo)
{
	if (this.gfn_message("confirm.취소여부")) {
		if(this.div_work.tab_master.tabindex == 0){
			this.ds_cptalAsign.reset();		                                 //DATASET ROLLBACK
			this.ds_cptalAsign.applyChange();	                             //DATASET COMMIT
			
			this.fn_searchDetail();
			return;
		}
		else if(this.div_work.tab_master.tabindex == 1){
			this.ds_cptalOpratn.reset();		                             //DATASET ROLLBACK
			this.ds_cptalOpratn.applyChange();	                             //DATASET COMMIT
			return;		
		}
	}
}

/*
 * 함수명  	: btn_Add_Row_onclick
 * 설명 		: 계좌별현황 행추가 버튼 이벤트
 * params  		: None
 * return Type 	: None
 * 사용법		: this.btn_Add_Row_onclick();
 */
this.btn_Add_Row_onclick = function(obj:Button,  e:nexacro.ClickEventInfo)
{	
	if(obj.name == "btn_Add_Dtpg2"){			// 자금 배정 상세내역 추가		
		
		var nRow1 = this.ds_cptalAsign.rowposition;
		var rowType = this.ds_cptalAsign.getRowType(this.ds_cptalAsign.rowposition);
		var nCnt = this.ds_acnutnoAsnCptal.rowcount;
		
		if(nRow1 < 0){
			return;
		}
		if(rowType == 2){
			this.gfn_message("comm.정보.저장.요청", "신규 자금배정 내역");
			return;
		}
		
		if(nCnt == 8){
			this.gfn_message("info.항목.초과.입력불가","계좌별 현황|8건");
			return;
		}
		
		var strYm  = this.ds_cptalAsign.getColumn(nRow1, "ASIGN_YM");
		var strOdr = this.ds_cptalAsign.getColumn(nRow1, "ODR");
		var nRow2   = this.ds_acnutnoAsnCptal.addRow();
		
		this.ds_acnutnoAsnCptal.setColumn(nRow2, "ASIGN_YM", strYm);
		this.ds_acnutnoAsnCptal.setColumn(nRow2, "ODR", strOdr);
		//this.ds_acnutnoAsnCptal.setColumn(nRow2, "CPTAL_BALC_SE_CODE", "");
		this.ds_acnutnoAsnCptal.setColumn(nRow2, "ASIGN_SE", null);	
	}

}


/*
 * 함수명  	: btn_Del_Row_onclick
 * 설명 		: 계좌별현황 행삭제 버튼 이벤트
 * params  		: None
 * return Type 	: None
 * 사용법		: this.btn_Del_Row_onclick();
 */
this.btn_Del_Row_onclick = function(obj:Button,  e:nexacro.ClickEventInfo)
{	

	//결재중인것 삭제 금지 2016.07.18
	var SANCTN_STS = this.ds_acnutnoAsnCptal.getColumn(this.ds_acnutnoAsnCptal.rowposition, "SANCTN_STS");	// 결재상태
	//alert("SANCTN_STS = " + SANCTN_STS);
	if(!this.comUtils.isNullEmpty(SANCTN_STS) && SANCTN_STS > 0){
		this.gfn_message("fail.삭제.불가", "결재진행중인 자료는");
		return;
	}

	if(this.gfn_message("confirm.삭제여부")){		
		if(obj.name == "btn_Del_Dtpg2"){
			var nRow = this.ds_acnutnoAsnCptal.rowposition;
			this.ds_acnutnoAsnCptal.deleteRow(nRow);
		}
	}

}


/*
 * 함수명  	: btn_Cancel_Row_onclick
 * 설명 		: 계좌별현황 행취소 버튼 이벤트
 * params  		: None
 * return Type 	: None
 * 사용법		: this.btn_Cancel_Row_onclick();
 */
this.btn_Cancel_Row_onclick = function(obj:Button,  e:nexacro.ClickEventInfo)
{
	if (this.gfn_message("confirm.취소여부")) {
		
		if(obj.name == "btn_Cancel_Dtpg2"){
			this.ds_acnutnoAsnCptal.reset();		                                 //DATASET ROLLBACK
			this.ds_acnutnoAsnCptal.applyChange();	                            	 //DATASET COMMIT
			return;
		}
	}
}

/*
 * 함수명  	: btn_addCptalAsign_onclick
 * 설명 		: 자금배정입력 클릭 이벤트 처리
 * params  		: None
 * return Type 	: None
 * 사용법		: this.btn_addCptalAsign_onclick();
 */
this.btn_addCptalAsign_onclick = function(obj:Button,  e:nexacro.ClickEventInfo)
{
	var cb2Cnt = this.ds_cb2AcctHis.getCaseCount("CHK == '1'");
	var nCnt = this.ds_acnutnoAsnCptal.rowcount;
	if(cb2Cnt < 1){
		this.gfn_message("comm.항목.선택.요청", "거래내역");
		return;
	}
	
	var nRow1 = this.ds_cptalAsign.rowposition;
	if(nRow1 < 0){
		this.gfn_message("comm.항목.다중선택.요청", "자금배정 기본 내역");
		return;
	}
	
	var rowType = this.ds_cptalAsign.getRowType(this.ds_cptalAsign.rowposition);
	if(rowType == 2){
		this.gfn_message("comm.정보.저장.요청", "신규 자금배정 내역");
		return;
	}
	
	if((cb2Cnt+nCnt) > 5){
		this.gfn_message("info.항목.초과.입력불가","계좌별 현황|5건");
		return;
	}
	
	
	var strAsignYm = this.ds_cptalAsign.getColumn(this.ds_cptalAsign.rowposition, "ASIGN_YM");
	var strOdr     = this.ds_cptalAsign.getColumn(this.ds_cptalAsign.rowposition, "ODR");
	for(var i=0; i<this.ds_cb2AcctHis.rowcount; i++) {
		if(this.ds_cb2AcctHis.getColumn(i, "CHK") == "1") {
		
			//결재중인 은행은 제외 2016.07.18
			var nRow  = this.ds_cptBalcAsnCptal.findRowExpr("SANCTN_STS > 0");
			var CPTAL_BALC_SE_CODE = this.ds_cptBalcAsnCptal.getColumn(nRow, "CPTAL_BALC_SE_CODE");
			if( CPTAL_BALC_SE_CODE != this.ds_cb2AcctHis.getColumn(i, "CPTAL_BALC_SE_CODE")){
				var nRow = this.ds_acnutnoAsnCptal.addRow();
				this.ds_acnutnoAsnCptal.setColumn(nRow, "ASIGN_YM", strAsignYm);	// 배정년월
				this.ds_acnutnoAsnCptal.setColumn(nRow, "ODR"     , strOdr);        // 배정차수
				this.ds_acnutnoAsnCptal.setColumn(nRow, "CPTAL_BALC_SE_CODE", this.ds_cb2AcctHis.getColumn(i, "CPTAL_BALC_SE_CODE"));	// 자금수지구분코드
				this.ds_acnutnoAsnCptal.setColumn(nRow, "DEFRAY_ACNUTNO"    , this.ds_cb2AcctHis.getColumn(i, "ACCT_NO"));				// 출금계좌번호
				this.ds_acnutnoAsnCptal.setColumn(nRow, "ASIGN_AMOUNT"      , this.ds_cb2AcctHis.getColumn(i, "TX_AMT"));				// 이체금액
				this.ds_acnutnoAsnCptal.setColumn(nRow, "ASIGN_SE"          , null);												    // 배정구분
				this.ds_acnutnoAsnCptal.setColumn(nRow, "CHK"               , "0");			     									    // 결재선택
				this.ds_acnutnoAsnCptal.setColumn(nRow, "SANCTN_KND"        , "0"); // 결재상태
				this.ds_acnutnoAsnCptal.setColumn(nRow, "ASIGN_SE"          , this.ds_cb2AcctHis.getColumn(i, "ASIGN_SE")); // 
			}
		}
	}
	
	this.gfn_message("success.처리.성공"); //alert("입력이 완료 되었습니다.\n계좌별 현황을 확인하시기 바랍니다.");
}

/*
 * 함수명  	: btn_addCptalOpratn_onclick
 * 설명 		: 자금운용입력 클릭 이벤트 처리
 * params  		: None
 * return Type 	: None
 * 사용법		: this.btn_addCptalOpratn_onclick();
 */
this.btn_addCptalOpratn_onclick = function(obj:Button,  e:nexacro.ClickEventInfo)
{
	if(this.ds_cb2AcctHis.getCaseCount("CHK == '1'") < 1){
		this.gfn_message("comm.항목.선택.요청", "거래내역");
		return;
	}
	
	var strY = this.ds_cond.getColumn(0, "YEAR");
	var strM = this.ds_cond.getColumn(0, "MONTH");
	
	for(var i=0; i<this.ds_cb2AcctHis.rowcount; i++) {
		
		if(this.ds_cb2AcctHis.getColumn(i, "CHK") == "1") {
		
			var nRow = this.ds_cptalOpratn.addRow();
			
			this.ds_cptalOpratn.setColumn(nRow, "OPRATN_YM"   , strY+strM);	// 배정년월
			this.ds_cptalOpratn.setColumn(nRow, "OUT_BANK_CODE",  this.ds_cb2AcctHis.getColumn(i, "FNNC_INSTT_CODE"));// 출금은행			
			this.ds_cptalOpratn.setColumn(nRow, "DEFRAY_ACNUTNO", this.ds_cb2AcctHis.getColumn(i, "ACCT_NO"));		// 출금계좌번호
			this.ds_cptalOpratn.setColumn(nRow, "OPRATN_AMOUNT",  this.ds_cb2AcctHis.getColumn(i, "TX_AMT"));		// 이체금액
			this.ds_cptalOpratn.setColumn(nRow, "CHK",            "0");		// 결재선택
			this.ds_cptalOpratn.setColumn(nRow, "SANCTN_KND",     "0");		// 결재상태
		}
	}
	
		
		
	
	this.gfn_message("success.처리.성공"); //alert("입력이 완료 되었습니다.\n자금운용내역을 확인하시기 바랍니다.");
}

/**********************************************************************
* Dataset 영역 
***********************************************************************/

/*
 * 함수명  	: ds_cptalAsign_canrowposchange
 * 설명 		: 배정자금내역 행변경 전 이벤트
 * params  		: None
 * return Type 	: None
 * 사용법		: this.ds_cptalAsign_canrowposchange();
 */
this.ds_cptalAsign_canrowposchange = function(obj:Dataset, e:nexacro.DSRowPosChangeEventInfo)
{
    // 배정자금상세내역 데이터셋 변경여부 체크
    if(Ex.util.isUpdated(this.ds_acnutnoAsnCptal)){
	    if (this.gfn_message("confirm.변경.취소.여부")) {
	        return true;
	    } else {
			return false;
	    }
	}
	
	var iRow = this.ds_cptalAsign.rowposition;
	var chkVal = this.ds_cptalAsign.getColumn(iRow, "CHK");
	
	this.ds_cptalAsign.set_updatecontrol(false);
	if(chkVal == '1') {
		this.ds_cptalAsign.setColumn(iRow, "CHK", "0");
	}
	this.ds_cptalAsign.set_updatecontrol(true);
}


/*
 * 함수명  	: ds_cptalAsign_canrowposchange
 * 설명 		: 배정자금내역 행변경 후 이벤트
 * params  		: None
 * return Type 	: None
 * 사용법		: this.ds_cptalAsign_canrowposchange();
 */
this.ds_cptalAsign_onrowposchanged = function(obj:Dataset, e:nexacro.DSRowPosChangeEventInfo)
{
	if(this.saveRow1 == -1){
		this.fn_searchDetail();
	}
}

/*
 * 함수명  	: div_detail_tab_cptBalcAsnCptal_canchange
 * 설명 		: 배정자금상세내역 탭변경 전 이벤트
 * params  		: None
 * return Type 	: None
 * 사용법		: this.div_detail_tab_cptBalcAsnCptal_canchange();
 */
this.div_detail_tab_cptBalcAsnCptal_canchange = function(obj:Tab, e:nexacro.TabIndexChangeEventInfo)
{
	if(obj.tabindex == 1){
		this.fn_cptBalcAsnCptal();
	}
}


/*
 * 함수명  	: fn_cptBalcAsnCptal
 * 설명 		: 자금수지원별 현황 구하기
 * params  		: None
 * return Type 	: None
 * 사용법		: this.fn_cptBalcAsnCptal();
 */
this.fn_cptBalcAsnCptal = function()
{
	this.ds_cptBalcAsnCptal.clearData();
	var nRowCnt = this.ds_acnutnoAsnCptal.rowcount;
	var nRow;
	
	for(nRow = 0; nRow < nRowCnt; nRow++){
		var strBalcSe = this.ds_acnutnoAsnCptal.getColumn(nRow, "CPTAL_BALC_SE_CODE");
		
		var nCnt = this.ds_cptBalcAsnCptal.getCaseCount("CPTAL_BALC_SE_CODE == '"+strBalcSe+"'");
		
		if(nCnt == 0) {
			var nRow1 = this.ds_cptBalcAsnCptal.addRow();
			this.ds_cptBalcAsnCptal.setColumn(nRow1, "CPTAL_BALC_SE_CODE", strBalcSe);
			
			//결재관련 컬럼 추가 2016.07.16
			this.ds_cptBalcAsnCptal.setColumn(nRow1, "SANCTN_NO", this.ds_acnutnoAsnCptal.getColumn(nRow , "SANCTN_NO"));
			
			this.ds_cptBalcAsnCptal.setColumn(nRow1, "DRFT_STS", this.ds_acnutnoAsnCptal.getColumn(nRow , "DRFT_STS"));
			this.ds_cptBalcAsnCptal.setColumn(nRow1, "DRFT_STS_IMG", this.ds_acnutnoAsnCptal.getColumn(nRow , "DRFT_STS_IMG"));
			this.ds_cptBalcAsnCptal.setColumn(nRow1, "DRFT_DT", this.ds_acnutnoAsnCptal.getColumn(nRow , "DRFT_DT"));

			this.ds_cptBalcAsnCptal.setColumn(nRow1, "SANCTN_STS", this.ds_acnutnoAsnCptal.getColumn(nRow , "SANCTN_STS"));
			this.ds_cptBalcAsnCptal.setColumn(nRow1, "SANCTN_STS_IMG", this.ds_acnutnoAsnCptal.getColumn(nRow , "SANCTN_STS_IMG"));
			this.ds_cptBalcAsnCptal.setColumn(nRow1, "LAST_SANCTN_DT", this.ds_acnutnoAsnCptal.getColumn(nRow , "LAST_SANCTN_DT"));
			this.ds_cptBalcAsnCptal.setColumn(nRow1, "REGIST_DT", this.ds_acnutnoAsnCptal.getColumn(nRow , "REGIST_DT"));
		}
		//alert("dd = " + this.ds_acnutnoAsnCptal.getColumn(nRow , "DRFT_STS_IMG"));
	}
	
	
}


/*
 * 함수명  	: div_work_tab_master_tpg2_grd_cb2AcctHis_onheadclick
 * 설명 		: Grid Head 클릭 이벤트 처리(Grid 데이터 정렬)
 * params  		: None
 * return Type 	: None
 * 사용법		: this.div_work_tab_master_tpg2_grd_cb2AcctHis_onheadclick();
 */
this.div_work_tab_master_tpg3_grd_cb2AcctHis_onheadclick = function(obj:Grid, e:nexacro.GridClickEventInfo)
{
	this.gfn_gridSort(obj, e); // Grid 데이터 정렬
}


/*
 * 함수명  	: div_work_tab_master_tpg2_grd_cptalAsign_oncellclick
 * 설명 		: 자금운용내역 그리드 결재란 체크 이벤트
 * params  		: None
 * return Type 	: None
 * 사용법		: this.div_work_tab_master_tpg2_grd_cptalAsign_oncellclick();
 */
this.div_work_tab_master_tpg2_grd_cptalAsign_oncellclick = function(obj:Grid, e:nexacro.GridClickEventInfo)
{
	
	// 체크박스 값 변경
	if(e.col == '1') {
		
		var iRow = this.ds_cptalOpratn.rowposition;
		var chkVal = this.ds_cptalOpratn.getColumn(iRow, "CHK");
		
		this.ds_cptalOpratn.set_updatecontrol(false);
		if(chkVal == '1') {
			this.ds_cptalOpratn.setColumn(iRow, "CHK", "0");
		} 
		else {
			if(this.ds_cptalOpratn.getCaseCount("CHK == '1'") == 1){
				var fRow = this.ds_cptalOpratn.findRow( "CHK", "1" );
				this.ds_cptalOpratn.setColumn(fRow, "CHK", "0");
			}
			
			//결재중인것 체크 금지 2016.07.16
			var SANCTN_STS = this.ds_cptalOpratn.getColumn(iRow, "SANCTN_STS");	// 결재상태
			//alert("SANCTN_STS = " + SANCTN_STS);
			if(!this.comUtils.isNullEmpty(SANCTN_STS) && SANCTN_STS > 0){
				this.ds_cptalOpratn.setColumn(iRow, "CHK", "0");
			}
			else{
				this.ds_cptalOpratn.setColumn(iRow, "CHK", "1");
			}
		}
		this.ds_cptalOpratn.set_updatecontrol(true);
	}
	
	
	// 결재상태 보기
	if(e.col == '13'){
		var nRow = this.ds_cptalOpratn.rowposition;
		
		var sanctnNo  = this.ds_cptalOpratn.getColumn(nRow, "SANCTN_NO");	// 결재번호
		var SANCTN_STS = this.ds_cptalOpratn.getColumn(nRow, "SANCTN_STS");	// 결재상태
		//공통요청 2016.08.30
		var REGIST_DT = this.ds_cptalOpratn.getColumn(nRow, "REGIST_DT");
		
		if(!this.comUtils.isNullEmpty(SANCTN_STS) && SANCTN_STS > 0){
			var parm = {
				arg_0 : this,  
				arg_1 : sanctnNo,  // 결재번호
				arg_2 : REGIST_DT //공통요청 2016.08.30
			};
			this.gfn_popup("COM010400_P01", 710, 580, "전자결재진행 현황", parm, "com::COM010400_P01.xfdl", "fn_callback5");
		}
		else {		
			this.gfn_message("info.처리불가", "진행된 결재정보가 없습니다.");
			return;
		}
	}	
}

/*
 * 함수명  	: div_work_tab_master_tpg1_div_detail_tab_cptBalcAsnCptal_tabpage1_grd_cptBalcAsnCptal_oncellclick
 * 설명 		: 자금배정상세내역 그리드 결재란 체크 이벤트
 * params  		: None
 * return Type 	: None
 * 사용법		: this.div_work_tab_master_tpg1_div_detail_tab_cptBalcAsnCptal_tabpage1_grd_cptBalcAsnCptal_oncellclick();
 */
this.div_work_tab_master_tpg1_div_detail_tab_cptBalcAsnCptal_tabpage1_grd_cptBalcAsnCptal_oncellclick = function(obj:Grid, e:nexacro.GridClickEventInfo)
{

	if(e.col == '1') {
		
		var iRow = this.ds_cptBalcAsnCptal.rowposition;
		var chkVal = this.ds_cptBalcAsnCptal.getColumn(iRow, "CHK");
		
		this.ds_cptBalcAsnCptal.set_updatecontrol(false);
		if(chkVal == '1') {
			this.ds_cptBalcAsnCptal.setColumn(iRow, "CHK", "0");
		} 
		else {
/*
			if(this.ds_cptBalcAsnCptal.getCaseCount("CHK == '1'") > 0){
				var fRow = this.ds_cptBalcAsnCptal.findRow( "CHK", "1" );
				this.ds_cptBalcAsnCptal.setColumn(fRow, "CHK", "0");
			}
*/
			//결재중인것 체크 금지 2016.07.16
			var SANCTN_STS = this.ds_cptBalcAsnCptal.getColumn(iRow, "SANCTN_STS");	// 결재상태
			//alert("SANCTN_STS = " + SANCTN_STS);
			if(!this.comUtils.isNullEmpty(SANCTN_STS) && SANCTN_STS > 0){
				this.ds_cptBalcAsnCptal.setColumn(iRow, "CHK", "0");
			}
			else{
				this.ds_cptBalcAsnCptal.setColumn(iRow, "CHK", "1");
			}
		}
		this.ds_cptBalcAsnCptal.set_updatecontrol(true);
	}
	
	
	// 결재상태 보기
	if(e.col == '8'){
		//var code = this.ds_cptBalcAsnCptal.getColumn(this.ds_cptBalcAsnCptal.rowposition, "CPTAL_BALC_SE_CODE");
		//var nRow = this.ds_acnutnoAsnCptal.findRowExpr("CPTAL_BALC_SE_CODE =='"+code+"'");
		var nRow = this.ds_cptBalcAsnCptal.rowposition;
		
		var sanctnNo  = this.ds_cptBalcAsnCptal.getColumn(nRow, "SANCTN_NO");		// 결재번호
		var SANCTN_STS = this.ds_cptBalcAsnCptal.getColumn(nRow, "SANCTN_STS");	// 결재상태
		//공통요청 2016.08.30
		var REGIST_DT = this.ds_cptBalcAsnCptal.getColumn(nRow, "REGIST_DT");	
		//alert("SANCTN_STS = " + SANCTN_STS);
		if(!this.comUtils.isNullEmpty(SANCTN_STS) && SANCTN_STS > 0){
			var parm = {
				arg_0 : this,  
				arg_1 : sanctnNo,
				arg_2 : REGIST_DT	//공통요청 2016.08.30
			};
			this.gfn_popup("COM010400_P01", 710, 580, "전자결재진행 현황", parm, "com::COM010400_P01.xfdl", "fn_callback5");
			
		}
		else {			
			//this.gfn_message("info.처리불가", "진행된 결재정보가 없습니다.");
			return;
		}
	}
}

/*
 * 함수명  	: fn_popupCallback
 * 설명 		: 팝업 콜백함수
 * params  		: None
 * return Type 	: None
 * 사용법		: this.fn_popupCallback();
 */
this.fn_PopCallback = function(sPopupId, sReturn) {
    
    var dsRtn   = new Dataset();
	
	switch(sPopupId) {
		case "OUT":	// 자금배정 출금계좌
			if(!this.comUtils.isNull(sReturn)) {
				dsRtn.loadXML(sReturn);				
				
				var nRow = this.ds_acnutnoAsnCptal.rowposition;
				this.ds_acnutnoAsnCptal.setColumn(nRow, "DEFRAY_ACNUTNO",    dsRtn.getColumn(0,"ACNUTNO"));
				this.ds_acnutnoAsnCptal.setColumn(nRow, "CPTAL_BALC_SE_CODE",dsRtn.getColumn(0,"CPTAL_BALC_SE_CODE"));
				
				
			}
			break;
		case "IN":	// 자금배정 입금계좌
			if(!this.comUtils.isNull(sReturn)) {
				dsRtn.loadXML(sReturn);	
				
				var nRow = this.ds_acnutnoAsnCptal.rowposition;
				this.ds_acnutnoAsnCptal.setColumn(nRow, "RCPMNY_ACNUTNO", dsRtn.getColumn(0,"ACNUTNO"));
				this.ds_acnutnoAsnCptal.setColumn(nRow, "ASIGN_SE",       dsRtn.getColumn(0,"ASIGN_SE"));
				//this.ds_acnutnoAsnCptal.setColumn(nRow, "CPTAL_BALC_SE_CODE",dsRtn.getColumn(0,"CPTAL_BALC_SE_CODE"));
			}
			break;
		case "ETC_OUT":	// 자금운용 출금계좌
			if(!this.comUtils.isNull(sReturn)) {
				dsRtn.loadXML(sReturn);	
				
				var nRow = this.ds_cptalOpratn.rowposition;
				this.ds_cptalOpratn.setColumn(nRow, "DEFRAY_ACNUTNO",    dsRtn.getColumn(0,"ACNUTNO"));
				this.ds_cptalOpratn.setColumn(nRow, "OUT_BANK_CODE",    dsRtn.getColumn(0,"SYS_BANK_CODE"));
			}
			break;
		case "ETC_IN":	// 자금운용 입금계좌
			if(!this.comUtils.isNull(sReturn)) {
				dsRtn.loadXML(sReturn);	
				
				var nRow = this.ds_cptalOpratn.rowposition;
				this.ds_cptalOpratn.setColumn(nRow, "RCPMNY_ACNUTNO",    dsRtn.getColumn(0,"ACNUTNO"));
				this.ds_cptalOpratn.setColumn(nRow, "IN_BANK_CODE",    dsRtn.getColumn(0,"SYS_BANK_CODE"));
			}
			break;
	}
}

/*
 * 함수명  	: div_work_tab_master_tpg1_div_detail_tab_cptBalcAsnCptal_tabpage2_grd_acnutnoAsnCptal_onexpandup
 * 설명 		: 자금배정 사이버브랜치 계좌 조회
 * params  		: None
 * return Type 	: None
 * 사용법		: this.div_work_tab_master_tpg1_div_detail_tab_cptBalcAsnCptal_tabpage2_grd_acnutnoAsnCptal_onexpandup();
 */
this.div_work_tab_master_tpg1_div_detail_tab_cptBalcAsnCptal_tabpage2_grd_acnutnoAsnCptal_onexpandup = function(obj:Grid, e:nexacro.GridMouseEventInfo)
{
	var se;
	// 자금배정 출금계좌
	if(e.col == 2){
		se = 'OUT';
	}
	
	// 자금배정 입금계좌
	if(e.col == 3){
		se = 'IN';
	}	
	
    var parm = {
		arg_0 : this,
		arg_1 : se,
		arg_2 : 'XX'
	};
	
	this.gfn_popup(se, 582, 404, "", parm, "mis_fun::FUN040201_P02.xfdl", "fn_PopCallback", true);	
}

/*
 * 함수명  	: div_work_tab_master_tpg2_grd_cptalAsign_onexpandup
 * 설명 		: 자금운용 사이버브랜치 계좌 조회
 * params  		: None
 * return Type 	: None
 * 사용법		: this.div_work_tab_master_tpg2_grd_cptalAsign_onexpandup();
 */
this.div_work_tab_master_tpg2_grd_cptalAsign_onexpandup = function(obj:Grid, e:nexacro.GridMouseEventInfo)
{
	var se;
	// 자금운용 출금계좌
	if(e.col == 6){
		se = 'ETC_OUT';
	}
	
	// 자금운용 입금계좌
	if(e.col == 8){
		se = 'ETC_IN';
	}
	
    var parm = {
		arg_0 : this,
		arg_1 : se,
		arg_2 : 'ETC'
	};
	
	this.gfn_popup(se, 582, 404, "", parm, "mis_fun::FUN040201_P02.xfdl", "fn_PopCallback", true);	
}


//결재중일때 수정 금지 2016.07.18
this.ds_acnutnoAsnCptal_cancolumnchange = function(obj:Dataset, e:nexacro.DSColChangeEventInfo)
{	
	var nRow       = this.ds_acnutnoAsnCptal.rowposition;
	var SANCTN_STS = this.ds_acnutnoAsnCptal.getColumn(nRow,"SANCTN_STS");	
	var strRowtype = obj.getRowType(obj.rowposition);

	if(!this.comUtils.isNullEmpty(SANCTN_STS) && SANCTN_STS > 0 && strRowtype != Dataset.ROWTYPE_INSERT){
		//this.gfn_message("info.추가.불가", "결재진행중|변경");
		this.alert("결재진행중 일때는 수정할 수 없습니다.");
		return false;	
	}
	
	//결재중인것 은행코드 추가 금지 2016.07.18
	if(strRowtype == Dataset.ROWTYPE_INSERT && e.columnid == "CPTAL_BALC_SE_CODE"){
		var CPTAL_BALC_SE_CODE = "";
	
		for(i=0; i < this.ds_acnutnoAsnCptal.rowcount; i++){
			SANCTN_STS = this.ds_acnutnoAsnCptal.getColumn(i, "SANCTN_STS");
		
			if(!this.comUtils.isNullEmpty(SANCTN_STS) && SANCTN_STS > 0){
				CPTAL_BALC_SE_CODE = this.ds_acnutnoAsnCptal.getColumn(i, "CPTAL_BALC_SE_CODE");					
			}
			
			if( CPTAL_BALC_SE_CODE == e.newvalue){
				//this.gfn_message("info.추가.불가", "결재진행중|결재중인 은행으로 추가/변경");
				this.alert("결재중인 은행으로 추가/변경할 수 없습니다.");
				return false;
			}
		}
	}

}

//결재중일때 수정 금지 2016.07.18
this.ds_cptalOpratn_cancolumnchange = function(obj:Dataset, e:nexacro.DSColChangeEventInfo)
{	
	var nRow       = this.ds_cptalOpratn.rowposition;
	var SANCTN_STS = this.ds_cptalOpratn.getColumn(nRow,"SANCTN_STS");	
	var strRowtype = obj.getRowType(obj.rowposition);

	if(!this.comUtils.isNullEmpty(SANCTN_STS) && SANCTN_STS > 0 && strRowtype != Dataset.ROWTYPE_INSERT){
		//this.gfn_message("info.추가.불가", "결재진행중|변경");
		this.alert("결재진행중 일때는 수정할 수 없습니다.");
		return false;	
	}
}

this.div_work_tab_master_tpg3_cal_acctTxday_onkeyup = function(obj:Calendar, e:nexacro.KeyEventInfo)
{
	if(e.keycode == 13){
		this.fn_searchdelngDtls();
	}
}
]]></Script>
  </Form>
</FDL>
