<?xml version="1.0" encoding="utf-8"?>
<FDL version="1.5">
  <TypeDefinition url="..\..\default_typedef.xml"/>
  <Form id="FUN040301" classname="FUN040301" left="0" top="0" width="1059" height="813" titletext="자금일보(자금수지일계표)" onload="FUN040301_onload" oninit="FUN040301_oninit">
    <Layouts>
      <Layout>
        <Grid id="grd_selectAll" taborder="2" useinputpanel="false" left="0" top="67" right="28" binddataset="ds_selectAll" cellsizingtype="col" autoenter="select" autosizingtype="none" summarytype="top" height="267" autofittype="col">
          <Formats>
            <Format id="default">
              <Columns>
                <Column size="100"/>
                <Column size="80"/>
                <Column size="120"/>
                <Column size="120"/>
                <Column size="120"/>
                <Column size="120"/>
                <Column size="120"/>
              </Columns>
              <Rows>
                <Row size="24" band="head"/>
                <Row size="24"/>
              </Rows>
              <Band id="head">
                <Cell colspan="2" text="구분"/>
                <Cell col="2" text="전일잔액"/>
                <Cell col="3" text="이체"/>
                <Cell col="4" text="배정액"/>
                <Cell col="5" text="수입액"/>
                <Cell col="6" text="당일잔액"/>
              </Band>
              <Band id="body">
                <Cell style="align:center;" text="bind:MLSFC" suppress="1" autosizerow="limitmin" autosizecol="limitmin"/>
                <Cell col="1" style="align:left;" text="bind:SCLAS" autosizerow="limitmin" autosizecol="limitmin"/>
                <Cell col="2" displaytype="number" style="align:right;" text="bind:DTA1" autosizerow="limitmin" autosizecol="limitmin"/>
                <Cell col="3" displaytype="number" style="align:right;" text="bind:DTA2" autosizerow="limitmin" autosizecol="limitmin"/>
                <Cell col="4" displaytype="number" style="align:right;" text="bind:DTA3" autosizerow="limitmin" autosizecol="limitmin"/>
                <Cell col="5" displaytype="number" style="align:right;" text="bind:DTA4" autosizerow="limitmin" autosizecol="limitmin"/>
                <Cell col="6" displaytype="number" style="align:right;" text="bind:DTA5" autosizerow="limitmin" autosizecol="limitmin"/>
              </Band>
            </Format>
          </Formats>
        </Grid>
        <Grid id="grd_selectSpend" taborder="3" useinputpanel="false" right="28" binddataset="ds_selectSpend" autoenter="select" cellsizingtype="col" onexpandup="grd_expndtrExcutBudget_onexpandup" left="0" height="75" summarytype="top" top="368" autofittype="col">
          <Formats>
            <Format id="default">
              <Columns>
                <Column size="100"/>
                <Column size="80"/>
                <Column size="120"/>
                <Column size="120"/>
                <Column size="120"/>
                <Column size="120"/>
                <Column size="120"/>
              </Columns>
              <Rows>
                <Row size="24" band="head"/>
                <Row size="24"/>
              </Rows>
              <Band id="head">
                <Cell colspan="2" text="구분"/>
                <Cell col="2" text="전일잔액"/>
                <Cell col="3" text="여입액"/>
                <Cell col="4" text="배정액"/>
                <Cell col="5" text="지출액"/>
                <Cell col="6" text="당일잔액"/>
              </Band>
              <Band id="body">
                <Cell style="align:center;" text="bind:MLSFC" suppress="1" autosizerow="limitmin" autosizecol="limitmin"/>
                <Cell col="1" style="align:left;" text="bind:SCLAS" autosizerow="limitmin" autosizecol="limitmin"/>
                <Cell col="2" displaytype="number" style="align:right;" text="bind:DTA1" autosizerow="limitmin" autosizecol="limitmin"/>
                <Cell col="3" displaytype="number" style="align:right;" text="bind:DTA2" autosizerow="limitmin" autosizecol="limitmin"/>
                <Cell col="4" displaytype="number" style="align:right;" text="bind:DTA3" autosizerow="limitmin" autosizecol="limitmin"/>
                <Cell col="5" displaytype="number" style="align:right;" text="bind:DTA4" autosizerow="limitmin" autosizecol="limitmin"/>
                <Cell col="6" displaytype="number" style="align:right;" text="bind:DTA5" autosizerow="limitmin" autosizecol="limitmin"/>
              </Band>
            </Format>
          </Formats>
        </Grid>
        <Static id="sta_acntCode" taborder="8" text="수입지출 총괄" cssclass="sta_WF_Title02" left="0" top="43" height="19" width="120"/>
        <Static id="sta_taxitmCode" taborder="9" text="지출원 총괄" cssclass="sta_WF_Title02" height="19" left="0" width="120" top="344"/>
        <Div id="div_search" taborder="0" left="0" top="0" right="28" height="33" cssclass="div_WFSA_Box">
          <Layouts>
            <Layout>
              <Static id="sta_date" taborder="34" text="기준일" wordwrap="char" cssclass="sta_WFSA_Label" left="15" top="5" width="64" height="21" style="background:transparent;"/>
              <Static id="Static04" taborder="35" text="15" visible="false" left="0" top="5" bottom="5" width="15" style="background:#00ffff66;"/>
              <Calendar id="Calendar00" taborder="0" left="74" top="5" width="110" height="21" dateformat="yyyy-MM-dd" value="null"/>
              <Static id="Static00" taborder="37" text="15" visible="false" left="59" top="5" bottom="5" width="15" style="background:#00ffff66;"/>
              <Button id="btn_AllDelete" taborder="39" text="일괄삭제" onclick="fn_popup_onclick" cssclass="btn_WF_Process" top="5" right="15" width="66" height="21"/>
            </Layout>
          </Layouts>
        </Div>
        <Static id="Static00" taborder="30" text="10" visible="false" left="0" top="33" height="10" style="background:#dc143c3c;align:center middle;" right="28"/>
        <Static id="Static04" taborder="31" text="5" visible="false" left="0" top="62" height="5" style="background:#dc143c3c;align:center middle;" right="28"/>
        <Static id="Static01" taborder="32" text="5" visible="false" left="0" top="363" right="28" height="5" style="background:#dc143c3c;align:center middle;"/>
        <Static id="Static02" taborder="33" text="10" visible="false" left="0" top="334" right="28" height="10" style="background:#dc143c3c;align:center middle;"/>
        <Static id="Static06" taborder="34" text="15" visible="false" left="1031" top="0" width="15" height="735" style="background:#1b3cd23c;align:center middle;"/>
        <Static id="Static07" taborder="35" text="스&#13;&#10;크&#13;&#10;롤&#13;&#10;13" visible="false" top="0" right="0" width="13" height="735" style="background:#d07b173c;align:center middle;"/>
        <Grid id="grd_selectFundCondition" taborder="5" binddataset="ds_selectFundCondition" autoenter="select" useinputpanel="false" cellsizingtype="col" left="0" right="28" height="195" summarytype="top" onheadclick="grd_selectFundCondition_onheadclick" top="477" autofittype="col">
          <Formats>
            <Format id="default">
              <Columns>
                <Column size="80"/>
                <Column size="117"/>
                <Column size="117"/>
                <Column size="100"/>
                <Column size="117"/>
                <Column size="85"/>
                <Column size="85"/>
                <Column size="100"/>
                <Column size="100"/>
                <Column size="110"/>
              </Columns>
              <Rows>
                <Row size="24" band="head"/>
                <Row size="24" band="head"/>
                <Row size="24"/>
              </Rows>
              <Band id="head">
                <Cell rowspan="2" text="구분"/>
                <Cell col="1" colspan="3" text="수입원"/>
                <Cell col="4" rowspan="2" text="MMDA"/>
                <Cell col="5" colspan="2" text="저축성예금" expandshow="show"/>
                <Cell col="7" rowspan="2" text="국비" expandshow="show"/>
                <Cell col="8" rowspan="2" text="기타" expandshow="show"/>
                <Cell col="9" rowspan="2" text="당일잔액"/>
                <Cell row="1" col="1" text="공금예금"/>
                <Cell row="1" col="2" text="요구불예금"/>
                <Cell row="1" col="3" text="계"/>
                <Cell row="1" col="5"/>
                <Cell row="1" col="6" text="만기대상"/>
              </Band>
              <Band id="body">
                <Cell style="align:center;" text="bind:MLSFC" autosizerow="limitmin" autosizecol="limitmin"/>
                <Cell col="1" displaytype="number" edittype="expr:currow==0?'none':'masknumber'" style="align:right;" text="bind:DTA1" editdisplay="expr:currow==0?'edit':'display'" autosizerow="limitmin" autosizecol="limitmin"/>
                <Cell col="2" displaytype="number" edittype="expr:currow==0?'none':'masknumber'" style="align:right;" text="bind:DTA2" editdisplay="expr:currow==0?'edit':'display'" autosizerow="limitmin" autosizecol="limitmin"/>
                <Cell col="3" displaytype="number" style="align:right;" text="bind:TOT1" autosizerow="limitmin" autosizecol="limitmin"/>
                <Cell col="4" displaytype="number" edittype="expr:currow==0?'none':'masknumber'" style="align:right;" text="bind:DTA3" editdisplay="expr:currow==0?'edit':'display'" autosizerow="limitmin" autosizecol="limitmin"/>
                <Cell col="5" displaytype="number" style="align:right;" text="bind:DTA4" autosizerow="limitmin" autosizecol="limitmin"/>
                <Cell col="6" displaytype="number" style="align:right;" text="bind:DTA8" autosizerow="limitmin" autosizecol="limitmin"/>
                <Cell col="7" displaytype="number" style="align:right;" text="bind:DTA5" autosizerow="limitmin" autosizecol="limitmin"/>
                <Cell col="8" displaytype="number" style="align:right;" text="bind:DTA6" autosizerow="limitmin" autosizecol="limitmin"/>
                <Cell col="9" displaytype="number" style="align:right;" text="bind:DTA7" autosizerow="limitmin" autosizecol="limitmin"/>
              </Band>
            </Format>
          </Formats>
        </Grid>
        <Grid id="grd_selectDistrictSpend" taborder="7" binddataset="ds_selectDistrictSpend" autoenter="select" useinputpanel="false" cellsizingtype="col" left="0" right="28" height="106" summarytype="top" onheadclick="grd_selectDistrictSpend_onheadclick" top="706" autofittype="col">
          <Formats>
            <Format id="default">
              <Columns>
                <Column size="300"/>
                <Column size="150"/>
                <Column size="80"/>
                <Column size="150"/>
                <Column size="150"/>
                <Column size="150"/>
              </Columns>
              <Rows>
                <Row size="24" band="head"/>
                <Row size="24"/>
              </Rows>
              <Band id="head">
                <Cell text="사업지구"/>
                <Cell col="1" text="지출누계"/>
                <Cell col="2" text="차입일"/>
                <Cell col="3" text="공사채/선수금집행액"/>
                <Cell col="4" text="적요"/>
                <Cell col="5" text="공사채/선수금총액" expandshow="show"/>
              </Band>
              <Band id="body">
                <Cell style="align:left;" text="bind:BSNS_NM" autosizerow="limitmin" autosizecol="limitmin"/>
                <Cell col="1" displaytype="number" style="align:right;" text="bind:AMT" autosizerow="limitmin" autosizecol="limitmin"/>
                <Cell col="2" displaytype="date" style="align: ;" text="bind:BRRW_DE" calendardisplaynulltype="none" autosizerow="limitmin" autosizecol="limitmin"/>
                <Cell col="3" displaytype="number" style="align:right;" text="bind:AMT2" autosizerow="limitmin" autosizecol="limitmin"/>
                <Cell col="4" displaytype="text" style="align:left;" text="bind:SUMRY" autosizerow="limitmin" autosizecol="limitmin"/>
                <Cell col="5" displaytype="number" style="align:right;" text="bind:REWARD_AMOUNT1" autosizerow="limitmin" autosizecol="limitmin"/>
              </Band>
            </Format>
          </Formats>
        </Grid>
        <Static id="sta_acntCode00" taborder="10" text="자금현황" cssclass="sta_WF_Title02" left="0" width="120" height="19" top="453"/>
        <Static id="sta_taxitmCode00" taborder="11" text="지구별 지출현황" cssclass="sta_WF_Title02" left="0" width="120" height="19" top="682"/>
        <Static id="Static03" taborder="40" text="10" visible="false" left="0" top="443" right="28" height="10" style="background:#dc143c3c;align:center middle;"/>
        <Static id="Static05" taborder="41" text="5" visible="false" left="0" top="472" right="28" height="5" style="background:#dc143c3c;align:center middle;"/>
        <Static id="Static08" taborder="42" text="5" visible="false" left="0" top="701" right="28" height="5" style="background:#dc143c3c;align:center middle;"/>
        <Static id="Static09" taborder="43" text="10" visible="false" left="0" top="672" right="28" height="10" style="background:#dc143c3c;align:center middle;"/>
        <Button id="btn_conditionBring" taborder="4" text="전일 잔액 가져오기" cssclass="btn_WF_Process" height="19" right="28" width="120" onclick="fn_popup_onclick" top="453"/>
        <Button id="btn_districtBring" taborder="6" text="전일 지출현황 가져오기" cssclass="btn_WF_Process" height="19" right="28" width="152" onclick="fn_popup_onclick" top="682"/>
        <Button id="btn_transfer" taborder="1" text="이체" cssclass="btn_WF_Process" top="43" height="19" right="28" width="38" onclick="fn_popup_onclick"/>
        <Button id="btn_blce" taborder="44" text="잔액 가져오기" onclick="fn_popup_onclick" cssclass="btn_WF_Process" right="150" width="90" height="19" top="453"/>
        <Button id="btn_rm" taborder="45" text="비고" onclick="fn_popup_onclick" cssclass="btn_WF_Process" top="43" right="70" width="38" height="19"/>
        <Div id="div_print" taborder="46" top="0" right="68" width="189" height="132" style="shadow:outer 5,5 10 gray;" cssclass="div_WF_Calendar" visible="false">
          <Layouts>
            <Layout width="189" height="132">
              <Static id="Static05" taborder="65" text="인쇄" cssclass="sta_WF_Calendaryy" left="0" top="-1" width="187" height="27"/>
              <Button id="btn_print" taborder="66" text="인쇄" onclick="div_print_btn_print_onclick" left="43" top="100" width="40" height="21"/>
              <Button id="btn_printCancel" taborder="67" text="취소" onclick="div_print_btn_printCancel_onclick" left="99" top="100" width="40" height="21"/>
              <CheckBox id="chk_print2" taborder="68" text="가상계좌 및 기타 내역" left="16" top="64" width="157" height="18" value="true"/>
              <CheckBox id="chk_print1" taborder="69" text="수입지출일계표" left="16" top="37" width="157" height="18" value="true"/>
            </Layout>
          </Layouts>
        </Div>
      </Layout>
    </Layouts>
    <Objects>
      <Dataset id="ds_cond" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="INPUT_DE" type="STRING" size="256"/>
          <Column id="IU" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_selectAll" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="INPUT_DE" type="STRING" size="256"/>
          <Column id="LCLAS" type="STRING" size="256"/>
          <Column id="MLSFC" type="STRING" size="256"/>
          <Column id="MLSFC1" type="STRING" size="256"/>
          <Column id="SCLAS" type="STRING" size="256"/>
          <Column id="DTA1" type="STRING" size="256"/>
          <Column id="DTA2" type="STRING" size="256"/>
          <Column id="DTA3" type="STRING" size="256"/>
          <Column id="DTA4" type="STRING" size="256"/>
          <Column id="DTA5" type="STRING" size="256"/>
          <Column id="DTA6" type="STRING" size="256"/>
          <Column id="DTA7" type="STRING" size="256"/>
          <Column id="DTA8" type="STRING" size="256"/>
          <Column id="DTA9" type="STRING" size="256"/>
          <Column id="DTA10" type="STRING" size="256"/>
          <Column id="OUTPT_ORDR" type="STRING" size="256"/>
          <Column id="ORD" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_selectSpend" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="INPUT_DE" type="STRING" size="256"/>
          <Column id="LCLAS" type="STRING" size="256"/>
          <Column id="MLSFC" type="STRING" size="256"/>
          <Column id="MLSFC1" type="STRING" size="256"/>
          <Column id="SCLAS" type="STRING" size="256"/>
          <Column id="DTA1" type="STRING" size="256"/>
          <Column id="DTA2" type="STRING" size="256"/>
          <Column id="DTA3" type="STRING" size="256"/>
          <Column id="DTA4" type="STRING" size="256"/>
          <Column id="DTA5" type="STRING" size="256"/>
          <Column id="OUTPT_ORDR" type="STRING" size="256"/>
          <Column id="ORD" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_selectFundCondition" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="INPUT_DE" type="STRING" size="256"/>
          <Column id="LCLAS" type="STRING" size="256"/>
          <Column id="MLSFC" type="STRING" size="256"/>
          <Column id="SCLAS" type="STRING" size="256"/>
          <Column id="DTA1" type="STRING" size="256"/>
          <Column id="DTA2" type="STRING" size="256"/>
          <Column id="DTA3" type="STRING" size="256"/>
          <Column id="DTA4" type="STRING" size="256"/>
          <Column id="DTA5" type="STRING" size="256"/>
          <Column id="DTA6" type="STRING" size="256"/>
          <Column id="DTA7" type="STRING" size="256"/>
          <Column id="DTA8" type="STRING" size="256"/>
          <Column id="TOT1" type="STRING" size="256"/>
          <Column id="OUTPT_ORDR" type="STRING" size="256"/>
          <Column id="ORD" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_selectDistrictSpend" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="BSNS_CODE" type="STRING" size="256"/>
          <Column id="BSNS_NM" type="STRING" size="256"/>
          <Column id="AMT" type="STRING" size="256"/>
          <Column id="AMT2" type="STRING" size="256"/>
          <Column id="SUMRY" type="STRING" size="256"/>
          <Column id="REWARD_AMOUNT1" type="STRING" size="256"/>
          <Column id="RM" type="STRING" size="256"/>
          <Column id="BRRW_DE" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_validation" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="compId" type="STRING" size="256"/>
          <Column id="colId" type="STRING" size="256"/>
          <Column id="PK" type="STRING" size="256"/>
          <Column id="notNull" type="STRING" size="256"/>
          <Column id="type" type="STRING" size="256"/>
          <Column id="nlength" type="STRING" size="256"/>
          <Column id="from" type="STRING" size="256"/>
          <Column id="to" type="STRING" size="256"/>
          <Column id="lengthChkGb" type="STRING" size="256"/>
          <Column id="msgId" type="STRING" size="256"/>
          <Column id="expr" type="STRING" size="256"/>
          <Column id="func" type="STRING" size="256"/>
        </ColumnInfo>
        <Rows>
          <Row>
            <Col id="compId">ds_cond</Col>
            <Col id="colId">INPUT_DE</Col>
            <Col id="notNull">Y</Col>
            <Col id="from"/>
            <Col id="to"/>
            <Col id="msgId">기준일</Col>
          </Row>
        </Rows>
      </Dataset>
      <Dataset id="ds_transfer" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="DELNG_DE" type="STRING" size="256"/>
          <Column id="TRNSMIT_INSTT" type="STRING" size="256"/>
          <Column id="RECPTN_INSTT" type="STRING" size="256"/>
          <Column id="AMOUNT" type="STRING" size="256"/>
          <Column id="RM" type="STRING" size="256"/>
          <Column id="REGISTER_ID" type="STRING" size="256"/>
          <Column id="REGIST_DT" type="STRING" size="256"/>
          <Column id="UPDUSR_ID" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_print" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="KEY" type="STRING" size="256"/>
          <Column id="NXNDR" type="STRING" size="256"/>
          <Column id="ETC" type="STRING" size="256"/>
          <Column id="RM" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_vaReceipt" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false" onrowposchanged="ds_vaReceipt_onrowposchanged">
        <ColumnInfo>
          <Column id="CRT_DIV_NM" type="STRING" size="256"/>
          <Column id="CRT_DIV" type="STRING" size="256"/>
          <Column id="HOUSE_SE" type="STRING" size="256"/>
          <Column id="BANK_CD" type="STRING" size="256"/>
          <Column id="BANK_NM" type="STRING" size="256"/>
          <Column id="IN_DATE" type="STRING" size="256"/>
          <Column id="CNT" type="BIGDECIMAL" size="256"/>
          <Column id="AMT" type="BIGDECIMAL" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_etcMoney" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false" onrowposchanged="DS_PBNCD_onrowposchanged" canrowposchange="DS_PBNCD_canrowposchange">
        <ColumnInfo>
          <Column id="STDR_DE" type="STRING" size="256"/>
          <Column id="BANK" type="STRING" size="256"/>
          <Column id="SEQ" type="STRING" size="256"/>
          <Column id="AMOUNT" type="BIGDECIMAL" size="256"/>
          <Column id="RM" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_cond00" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="FDATE" type="STRING" size="256"/>
          <Column id="TDATE" type="STRING" size="256"/>
          <Column id="CRT_DIV" type="STRING" size="256"/>
          <Column id="BANK_CD" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_transfer00" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="INPUT_DE" type="STRING" size="256"/>
          <Column id="RM" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
    </Objects>
    <Bind>
      <BindItem id="item5" compid="div_search.Calendar00" propid="value" datasetid="ds_cond" columnid="INPUT_DE"/>
    </Bind>
    <Script type="xscript5.0"><![CDATA[/**********************************************************************
* 화면ID   : FUN040301.xfdl
* 화면명   : 자금일보(자금수지일계표)
* 화면설명 : 자금일보를 조회한다.
* 작성일   : 2015.11.20
* 작성자   : 이수지
* 수정이력 : 
***********************************************************************
*     수정일     수정자   내용
***********************************************************************
*
***********************************************************************
*/

/**********************************************************************
* Script Include 
***********************************************************************/
// 시스템 공통 라이브러리 Include
include "lib::comInclude.xjs";
include "mis_lib::misUtil.xjs";

/**********************************************************************
* 화면 변수 선언부
***********************************************************************/



/**********************************************************************
* onInit / onLoad 영역
***********************************************************************/

this.FUN040301_oninit = function(obj:Form, e:nexacro.InitEventInfo)
{
	// Form 초기화
	this.fn_init_form();

	// DataSet 초기화
	this.fn_init_dataset();
}

this.FUN040301_onload = function(obj:Form, e:nexacro.LoadEventInfo)
{
	// 초기 검색조건
 	this.ds_cond.setColumn(0, "INPUT_DE", this.comUtils.getClientDate("YYYYMMDD"));	// 오늘
 	
	this.fn_search() // 최초조회
}



/**********************************************************************
* Form/Dataset 오브젝트 초기화
***********************************************************************/

/*
 * 함수명  	: initForm
 * 설명 		: Form을 초기화한다.
 * params  		: None
 * return Type 	: None
 * 사용법		: this.initForm();
 */
this.fn_init_form = function()
{
	this.gfn_initForm(this);	// 시스템 공통으로 Form을 Initialize 한다.	
	this.fn_misFormInit(this);
}


/*
 * 함수명  	: initDataset
 * 설명 		: Dataset을 초기화한다
 * params  		: None
 * return Type 	: None
 * 사용법		: this.initDataset();
 */
this.fn_init_dataset = function()
{
	// 조건 Dataset 외에 초기화가 필요한 Dataset에 대한 초기화 코드를 추가
	this.gfn_initCondDs(this, this.div_search);
}



/**********************************************************************
* Transaction 영역 시작
***********************************************************************
*
* 1. Transaction 관련 이벤트 핸들러
* 2. call Transaction 영역
* 3. callback 영역(Transaction)
* 
***********************************************************************/

/**********************************************************************
* Transaction 관련 이벤트 핸들러 
***********************************************************************/

/*
 * 함수명  	: fn_search
 * 설명 		: 조회 이벤트 처리
 * params  		: None
 * return Type 	: None
 * 사용법		: this.fn_search();
 */
this.fn_search = function()
{
	// transaction
	this.fn_transaction("procedureSRCH");
}

/*
 * 함수명  	: fn_save
 * 설명 		: 자금현황 저장
 * params  		: None
 * return Type 	: None
 * 사용법		: this.fn_save();
 */
this.fn_save = function()
{
	this.fn_transaction("fundConditionUpdate");
}

/*
 * 함수명  	: fn_print
 * 설명 		: 자금일보 인쇄
 * params  		: None
 * return Type 	: None
 * 사용법		: this.fn_print();
 */
this.fn_print = function()
{
	if(this.div_print.visible) {
		this.div_print.set_visible(false);
	}
	else {
		this.div_print.set_visible(true);
	}
}

/**********************************************************************
* call Transaction 영역
***********************************************************************/
/*
 * 함수명  	: fn_transaction
 * 설명 		: Transaction 요청 처리 함수
 * params  		: strSvcId : 서비스요청 ID
 * return Type 	: None
 * 사용법		: this.fn_transaction("SELECT");
 */
this.fn_transaction = function(strSvcId)
{
	switch (strSvcId) {
		case "procedureSRCH":		//(프로시저호출위한)데이터건 검색
			var sController   	= "hsco/mis/fun/FUN040301/selectCount.do";
			var sInDatasets   	= "input1=ds_cond";	
			var sOutDatasets  	= "ds_cond=output1";
			break;
		case "SRCH": 				// 자금일보 조회
			var sController   	= "hsco/mis/fun/FUN040301/selectAll.do";
			var sInDatasets   	= "input1=ds_cond";	
			var sOutDatasets  	= "ds_selectAll=output1 ds_selectSpend=output2 ds_selectFundCondition=output3 ds_selectDistrictSpend=output4";
			break;
		case "AllDelete":			//일괄삭제
			var sController   	= "hsco/mis/fun/FUN040301/deleteAll.do";
			var sInDatasets   	= "input1=ds_cond";	
			var sOutDatasets  	= "";
			break;
		case "fundConditionPopup":	//자금현황가져오기
			var sController   	= "hsco/mis/fun/FUN040301/fundConditionPopup.do";
			var sInDatasets   	= "input1=ds_cond";	
			var sOutDatasets  	= "";
			break;
		case "districtSpendPopup":	//지구별지출현황가져오기
			var sController   	= "hsco/mis/fun/FUN040301/districtSpendPopup.do";
			var sInDatasets   	= "input1=ds_cond";	
			var sOutDatasets  	= "";
			break;
		case "callProcedure":		//프로시저호출
			var sController   	= "hsco/mis/fun/FUN040301/callProcedure.do";
			var sInDatasets   	= "input1=ds_cond";	
			var sOutDatasets  	= "";
			break;
		case "fundConditionUpdate":	//저장
			var sController   	= "hsco/mis/fun/FUN040301/fundConditionUpdate.do";
			var sInDatasets   	= "input1=ds_selectFundCondition:U";	
			var sOutDatasets  	= "";
			break;
		case "selectPrintList":		// 인쇄용 국비, 기타현황 조회
			var sController   	= "hsco/mis/fun/FUN040301/selectPrintList.do";
			var sInDatasets   	= "input1=ds_cond";	
			var sOutDatasets  	= "ds_print=output1";
			break;
		case "branchBlceCopy":	// 잔액가져오기
			var sController   	= "hsco/mis/fun/FUN040301/branchBlceCopy.do";
			var sInDatasets   	= "input1=ds_cond";	
			var sOutDatasets  	= "";
			break;
		case "selectVaReceiptList":			// 기본정보 조회
			var sController   	= "hsco/mis/fun/FUN040303/selectVaReceiptList.do";
			var sInDatasets   	= "input1=ds_cond00";
			var sOutDatasets  	= "ds_vaReceipt=output1";
			break;
		case "selectRm":
			var sController   	= "hsco/mis/fun/FUN040301/selectRm.do";
			var sInDatasets   	= "input1=ds_cond";	
			var sOutDatasets  	= "ds_transfer00=output1";
			break;			
		case "search":			// 조회
			var sController   	= "hsco/mis/fun/FUN040301/selectEtcMoneyList.do";
			var sInDatasets   	= "input1=ds_cond";
			var sOutDatasets  	= "ds_etcMoney=output1";
			break;
	}

	Ex.core.tran(this, strSvcId, sController, sInDatasets, sOutDatasets); 
}
/**********************************************************************
* Transaction Callback 영역
***********************************************************************/

this.fn_callBack = function (strSvcId, nErrorCode, strErrorMsg)
{	trace("strSvcId: "+strSvcId);
	
	if (nErrorCode != 0) {
		// 오류 메시지를 보여주는 동작 외에 처리할 내용이 있으면 아래에 기술.
		// 처리할 내용이 없다면, switch 문은 생략합니다.
		switch(strSvcId) {
			case "procedureSRCH":		//(프로시저호출위한)데이터건 검색
				break;
			case "SRCH":				//조회
				break;
			case "AllDelete":			//일괄삭제
				break;
			case "fundConditionPopup":	//자금현황가져오기
				break;
			case "districtSpendPopup":	//지구별지출현황가져오기
				break;
			case "callProcedure":		//프로시저호출
				break;
			default:
				break;
		}
	} else {		
		// 성공 메시지를 보여주는 동작 외에 처리할 내용이 있으면 아래에 기술.
		// 처리할 내용이 없다면, switch 문은 생략합니다.
		switch(strSvcId) {
			case "procedureSRCH":			//(프로시저호출위한)데이터건 검색
				if(this.ds_cond.getColumn(0, "IU")=="U"){	//데이터 여부
					this.fn_transaction("callProcedure");
				}else{
					if(this.gfn_message("confirm.생성.여부", "해당일자에 생성된 자료가 없습니다.||자료를")) {
						this.fn_transaction("callProcedure");
						return false;
					} else {
						this.ds_selectAll.clearData();
						this.ds_selectSpend.clearData();
						this.ds_selectFundCondition.clearData();
						this.ds_selectDistrictSpend.clearData();
					}
				}
				break;
			case "SRCH":				//조회
				break;
			case "AllDelete":			//일괄삭제
				this.ds_selectAll.clearData();
				this.ds_selectSpend.clearData();
				this.ds_selectFundCondition.clearData();
				this.ds_selectDistrictSpend.clearData();
				this.fn_search();
				break;
			case "fundConditionPopup":	//자금현황가져오기
				this.gfn_message("success.처리.성공");
				this.fn_transaction("procedureSRCH");
				break;
			case "districtSpendPopup":	//지구별지출현황가져오기
				this.gfn_message("success.처리.성공");
				this.fn_transaction("procedureSRCH");
				break;
			case "callProcedure":		//프로시저호출
				this.ds_cond.setColumn(0, "IU", "U");
				this.fn_transaction("SRCH");
				break;
			case "fundConditionUpdate":	//저장
				this.gfn_message("success.처리.성공");
				this.fn_transaction("procedureSRCH");
				break;
			case "selectPrintList":		// 인쇄용 국비, 기타현황 조회
				this.print();			// 인쇄팝업 호출
				break;
			case "selectVaReceiptList":
				this.fn_transaction("selectRm");
				break;
			case "selectRm":
				this.fn_transaction("search");
				break;			
			case "search":
				this.print2();
				break;
			case "branchBlceCopy":	// 잔액가져오기
				this.gfn_message("success.처리.성공");
				this.fn_transaction("procedureSRCH");
				break;
			default:
				break;
		}
	}
	
	// 오류 및 성공 메시지를 화면에 보여준다.
	this.gfn_callback_message(strSvcId, nErrorCode, strErrorMsg);	
}

/*
 * 함수명  	: fn_popupCallback
 * 설명 		: 팝업 콜백함수
 * params  		: None
 * return Type 	: None
 * 사용법		: this.fn_popupCallback();
 */
this.fn_popupCallBack = function(sPopupId, sReturn) {
    
    this.ds_transfer.clearData();
    
	trace(sReturn);
	switch(sPopupId) {
		case "fun040301_p03":	// 국비등록
			if(sReturn) {
				this.fn_transaction("callProcedure");
			}
			break;
		case "fun040301_p04":	// 기타등록
			if(sReturn) {
				this.fn_transaction("callProcedure");
			}
			break;
		case "fun040301_p05":	// 단지별 보상금 등록
			this.fn_transaction("callProcedure");
			break;
		case "btn_transfer":	// 자금이체팝업
			var nRowCnt = this.ds_transfer.loadXML(sReturn);
			if(!this.comUtils.isNull(nRowCnt)){
				this.fn_transaction("callProcedure");
			}
			break;
	}
}
/**********************************************************************
* Transaction 영역 끝
***********************************************************************/
/*
 * 함수명  	: fn_popup_onclick
 * 설명 		: 버튼 클릭
 * params  		: None
 * return Type 	: None
 * 사용법		: this.fn_popup_onclick();
 */
this.fn_popup_onclick = function(obj:Button,  e:nexacro.ClickEventInfo)
{
	var nLeft    = system.clientToScreenX(this, 0);
	var nTop     = system.clientToScreenY(this, 0);
	var newChild = new ChildFrame;
	newChild.set_openalign("center middle");
	newChild.set_dragmovetype("all");

	if(this.ds_cond.getColumn(0, "IU")!="U"){
		if(this.gfn_message("confirm.생성.여부", "해당일자에 생성된 자료가 없습니다.||자료를")) {
			this.fn_transaction("callProcedure");
			return;
		} 
		else {
			this.ds_selectAll.clearData();
			this.ds_selectSpend.clearData();
			this.ds_selectFundCondition.clearData();
			this.ds_selectDistrictSpend.clearData();
			return;
		}
	}
	
	//일괄삭제
	if(obj.name == "btn_AllDelete"){
		if(this.gfn_message("confirm.자료.삭제여부", "해당일의 자료를")) {
			this.fn_transaction("AllDelete");
			return false;
		}
	}
	
	//비고작성
	if(obj.name == "btn_rm"){
		newChild.init("btn_rm", "absolute", nLeft, nTop, 600, 500, null, null , "mis_fun::FUN040301_P06.xfdl");
		newChild.showModal(this.getOwnerFrame(), {date:this.ds_cond.getOrgColumn(0, "INPUT_DE")}, this, "fn_popupCallBack");
	}	

	//자금이체팝업
	if(obj.name == "btn_transfer"){
		newChild.init("btn_transfer", "absolute", nLeft, nTop, 580, 557, null, null , "mis_fun::FUN040301_P01.xfdl");
		newChild.showModal(this.getOwnerFrame(), {date:this.ds_cond.getOrgColumn(0, "INPUT_DE")}, this, "fn_popupCallBack");
	}
	
	//잔액가져오기
	if(obj.name == "btn_blce"){
		if(this.gfn_message("confirm.삭제.진행", "현재 자료를 삭제한 후, 해당일의 잔액 정보로 덮어씁니다")) {
			this.fn_transaction("branchBlceCopy");
		}
	}

	//자금현황가져오기
	if(obj.name == "btn_conditionBring"){
		if(this.gfn_message("confirm.삭제.진행", "현재 자료를 삭제한 후, 전일의 정보로 덮어씁니다")) {
			this.fn_transaction("fundConditionPopup");
		}		
	}
	
	//지구별지출현황가져오기
	if(obj.name == "btn_districtBring"){
		if(this.gfn_message("confirm.삭제.진행", "현재 자료를 삭제한 후, 전일의 정보로 덮어씁니다")) {
			this.fn_transaction("districtSpendPopup");
		}	
	}	
}

/*
 * 함수명  	: print
 * 설명 		: 인쇄버튼 클릭 이벤트
 * params  		: None
 * return Type 	: None
 * 사용법		: this.print();
 */
this.print = function(){
	var vOpts = new this.cf_Opts();
	vOpts.setToolbar(false);
	vOpts.setScale(100);
	vOpts.setReportPath("/mis/fun/FUN040301_R1.jrf");
	vOpts.setSaveFilename("수입지출일계표");
	vOpts.setLocalDs(["ds_cond",                this.ds_cond]);
	vOpts.setLocalDs(["ds_selectAll",           this.ds_selectAll]);
	vOpts.setLocalDs(["ds_selectSpend",         this.ds_selectSpend]);
	vOpts.setLocalDs(["ds_selectFundCondition", this.ds_selectFundCondition]);
	vOpts.setLocalDs(["ds_selectDistrictSpend", this.ds_selectDistrictSpend]);
	vOpts.setLocalDs(["ds_print",               this.ds_print]);
	
	var parm = {
		arg_0 : this,
		opts : vOpts
	};
	this.gfn_popup("Popup_Report", 884, 735, "수입지출일계표", parm, "common::frmReportPopup.xfdl", "report_callback");
}

/*
 * 함수명  	: print
 * 설명 		: 인쇄버튼 클릭 이벤트
 * params  		: None
 * return Type 	: None
 * 사용법		: this.print();
 */
this.print2 = function(){
	var vOpts = new this.cf_Opts();
	vOpts.setToolbar(false);
	vOpts.setScale(100);
	vOpts.setReportPath("/mis/fun/FUN040301_R2.jrf");
	vOpts.setSaveFilename("가상계좌 및 기타 내역");
	vOpts.setLocalDs(["ds_cond",      this.ds_cond]);
	vOpts.setLocalDs(["ds_vaReceipt", this.ds_vaReceipt]);
	vOpts.setLocalDs(["ds_etcMoney",  this.ds_etcMoney]);
	vOpts.setLocalDs(["ds_transfer00",  this.ds_transfer00]);
	
	var parm = {
		arg_0 : this,
		opts : vOpts
	};
	this.gfn_popup("Popup_Report", 884, 735, "가상계좌 및 기타 내역", parm, "common::frmReportPopup.xfdl", "");
}

/*
 * 함수명  	: grd_selectFundCondition_onheadclick
 * 설명 		: 자금현황 그리드 헤드클릭 이벤트
 * params  		: None
 * return Type 	: None
 * 사용법		: this.grd_selectFundCondition_onheadclick();
 */
this.grd_selectFundCondition_onheadclick = function(obj:Grid, e:nexacro.GridClickEventInfo)
{
	if(e.cell == 3){
		var parm = {
			arg_0 : this,
           date  : this.ds_cond.getColumn(0, "INPUT_DE")
		};
		
		/**
		* 팝업 공통함수
		* @param {string} svcId
		* @param {number} Width
		* @param {number} Height
		* @param {string} Title
		* @param {string} form URL
		* @param {string} Callback Function
		* @return N/A
		* @example
		* @memberOf comLib
		*/
		this.gfn_popup("fun040301_p02", 582, 404, "", parm, "mis_fun::FUN040301_P02.xfdl", "fn_popupCallBack", true);
	}
	
	if(e.cell == 4){
		var parm = {
			arg_0 : this,
            date  : this.ds_cond.getColumn(0, "INPUT_DE"),
            amt   : this.ds_selectFundCondition.getColumn(0, "DTA5")
		};
		
		/**
		* 팝업 공통함수
		* @param {string} svcId
		* @param {number} Width
		* @param {number} Height
		* @param {string} Title
		* @param {string} form URL
		* @param {string} Callback Function
		* @return N/A
		* @example
		* @memberOf comLib
		*/
		this.gfn_popup("fun040301_p03", 582, 404, "", parm, "mis_fun::FUN040301_P03.xfdl", "fn_popupCallBack", true);
	}
	
	if(e.cell == 5){
		var parm = {
			arg_0 : this,
            date  : this.ds_cond.getColumn(0, "INPUT_DE"),
            amt   : this.ds_selectFundCondition.getColumn(0, "DTA6")
		};
		
		/**
		* 팝업 공통함수
		* @param {string} svcId
		* @param {number} Width
		* @param {number} Height
		* @param {string} Title
		* @param {string} form URL
		* @param {string} Callback Function
		* @return N/A
		* @example
		* @memberOf comLib
		*/
		this.gfn_popup("fun040301_p04", 582, 404, "", parm, "mis_fun::FUN040301_P04.xfdl", "fn_popupCallBack", true);
	}
}

/*
 * 함수명  	: grd_selectDistrictSpend_onheadclick
 * 설명 		: 지구별 지출현황 그리드 헤드클릭 이벤트
 * params  		: None
 * return Type 	: None
 * 사용법		: this.grd_selectDistrictSpend_onheadclick();
 */
this.grd_selectDistrictSpend_onheadclick = function(obj:Grid, e:nexacro.GridClickEventInfo)
{
	if(e.cell == 5){
		var parm = {
			arg_0 : this,
            date  : this.ds_cond.getColumn(0, "INPUT_DE")
		};
		
		/**
		* 팝업 공통함수
		* @param {string} svcId
		* @param {number} Width
		* @param {number} Height
		* @param {string} Title
		* @param {string} form URL
		* @param {string} Callback Function
		* @return N/A
		* @example
		* @memberOf comLib
		*/
		this.gfn_popup("fun040301_p05", 582, 404, "", parm, "mis_fun::FUN040301_P05.xfdl", "fn_popupCallBack", true);
	}
}

this.div_print_btn_print_onclick = function(obj:Button,  e:nexacro.ClickEventInfo)
{
	if(this.div_print.chk_print1.value == "1") {
		this.fn_print1();
	}
	else if(this.div_print.chk_print2.value == "1") {
		this.fn_print2();
	}
}

this.fn_print1 = function() {
	// validation 체크
	if(!this.gfn_checkValidation_NoUpdChk(this.ds_cond, this.ds_validation)) {
		return;
	}
	
	if(this.ds_cond.getColumn(0, "IU")=="U"){
		this.fn_transaction("selectPrintList");
	} else {
		this.gfn_message("comm.출력.데이터.없음")
		return;
	}
}

this.fn_print2 = function() {

	if(this.div_print.chk_print2.value == "0") {
		return;
	}

	this.ds_cond00.clearData();
	var nRow = this.ds_cond00.addRow();
	this.ds_cond00.setColumn(nRow, "FDATE", this.ds_cond.getColumn(0, "INPUT_DE"));
	this.ds_cond00.setColumn(nRow, "TDATE", this.ds_cond.getColumn(0, "INPUT_DE"));
	this.fn_transaction("selectVaReceiptList");
}

this.div_print_btn_printCancel_onclick = function(obj:Button,  e:nexacro.ClickEventInfo)
{
	this.div_print.set_visible(false);
}

this.report_callback = function(){
	//재귀함수 호출
	this.fn_print2();
}
]]></Script>
  </Form>
</FDL>
