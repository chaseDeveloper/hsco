<?xml version="1.0" encoding="utf-8"?>
<FDL version="1.5">
  <TypeDefinition url="..\..\default_typedef.xml"/>
  <Form id="CTR030600" classname="CTR030600" left="0" top="0" width="1059" height="735" titletext="계약대가지급" oninit="CTR030600_oninit" onload="CTR030600_onload">
    <Layouts>
      <Layout>
        <Button id="btn_etcExpDsnRegist" taborder="106" text="종이세금계산서 등록" onclick="btn_etcExpDsnRegist_onclick" cssclass="btn_WF_Process" top="430" right="273" width="135" height="19"/>
        <Static id="Static37" taborder="46" cssclass="sta_WF_Labelbg" height="27" right="28" top="454" left="510"/>
        <Static id="Static00" taborder="54" cssclass="sta_WF_Labelbg" right="28" height="27" top="67" left="510"/>
        <Static id="Static03" taborder="55" cssclass="sta_WF_Labelbg" right="28" height="27" top="93" left="510"/>
        <Static id="Static14" taborder="58" cssclass="sta_WF_Labelbg" right="28" height="27" top="119" left="510"/>
        <Div id="div_search" taborder="0" left="0" top="0" right="28" height="33" cssclass="div_WFSA_Box">
          <Layouts>
            <Layout>
              <MaskEdit id="msk_CNTRCT_NO" taborder="1" readonly="true" type="string" mask="####-#-#####" maskchar=" " cssclass="msk_WF_Essential" left="218" top="5" width="115" height="21" style="align:left middle;"/>
              <Static id="sta_CNTRCT_NO" taborder="4" text="계약번호" wordwrap="char" cssclass="sta_WFSA_Label" left="154" top="5" width="64" height="21"/>
              <Static id="Static36" taborder="5" text="5" visible="false" left="488" top="0" width="38" height="5" style="background:#fa794f66;align:center middle;"/>
              <Static id="Static37" taborder="6" text="5" visible="false" left="488" bottom="0" width="38" height="5" style="background:#fa794f66;align:center middle;"/>
              <Static id="Static04" taborder="7" text="15" visible="false" left="0" top="5" bottom="5" width="15" style="background:#00ffff66;"/>
              <Edit id="edt_CNTRCT_NM" taborder="3" readonly="true" left="335" top="5" width="280" height="21"/>
              <Button id="btn_cntrctPopup" taborder="2" onclick="fn_popup_onclick" cssclass="btn_WF_Search" left="312" top="5" width="21" height="21"/>
              <Static id="sta_CNTRCT_YEAR" taborder="8" text="계약년도" wordwrap="char" cssclass="sta_WFSA_Label" left="15" top="5" width="64" height="21"/>
              <Static id="Static00" taborder="9" text="15" visible="false" left="139" top="5" bottom="5" width="15" style="background:#00ffff66;"/>
              <Spin id="spn_CNTRCT_YEAR" taborder="0" value="0" max="9999" min="1900" left="79" top="5" width="60" height="21" style="buttonsize:15;"/>
            </Layout>
          </Layouts>
        </Div>
        <Static id="Static04" taborder="39" text="15" visible="false" left="1031" top="0" width="15" height="735" style="background:#1b3cd23c;align:center middle;"/>
        <Static id="Static05" taborder="40" text="스&#13;&#10;크&#13;&#10;롤&#13;&#10;13" visible="false" top="0" right="0" width="13" height="735" style="background:#d07b173c;align:center middle;"/>
        <Static id="sta_top" taborder="41" text="10" visible="false" left="0" top="33" right="28" height="10" style="background:#dc143c3c;align:center middle;"/>
        <Static id="sta_prsecWtnessList" taborder="42" text="검사입회목록" cssclass="sta_WF_Title02" left="0" top="43" right="908" height="19"/>
        <Static id="Static08" taborder="43" text="5" visible="false" left="0" top="62" right="28" height="5" style="background:#dc143c3c;align:center middle;"/>
        <Grid id="grd_prsecWtnessList" taborder="1" autoenter="select" useinputpanel="false" left="0" top="67" bottom="0" binddataset="ds_prsecWtnessList" width="500">
          <Formats>
            <Format id="default">
              <Columns>
                <Column size="60"/>
                <Column size="60"/>
                <Column size="80"/>
                <Column size="80"/>
                <Column size="100"/>
                <Column size="130"/>
                <Column size="130"/>
                <Column size="130"/>
                <Column size="130"/>
              </Columns>
              <Rows>
                <Row size="24" band="head"/>
                <Row size="24" band="head"/>
                <Row size="24"/>
              </Rows>
              <Band id="head">
                <Cell colspan="2" text="진행상태"/>
                <Cell col="2" colspan="3" text="검사검수 정보"/>
                <Cell col="5" rowspan="2" text="계약금액"/>
                <Cell col="6" rowspan="2" text="검사금액"/>
                <Cell col="7" rowspan="2" text="결의금액"/>
                <Cell col="8" rowspan="2" text="기성후잔액"/>
                <Cell row="1" text="대가지급"/>
                <Cell row="1" col="1" text="회계결의"/>
                <Cell row="1" col="2" text="구분"/>
                <Cell row="1" col="3" text="차수"/>
                <Cell row="1" col="4" text="검사일자"/>
              </Band>
              <Band id="body" style="cellpadding:0 5 0 5;">
                <Cell displaytype="checkbox" text="bind:PRICE_PYMNT_REGIST_AT"/>
                <Cell col="1" displaytype="checkbox" text="bind:DECSN_REGIST_AT"/>
                <Cell col="2" style="align:center middle;" text="bind:PRSEC_SE_NM"/>
                <Cell col="3" displaytype="normal" style="align:right middle;padding:0 10 0 0;" text="expr:PRSEC_ODR + &quot;차&quot;" maskchar=" "/>
                <Cell col="4" displaytype="date" text="bind:PRSEC_DE" calendardisplaynulltype="none"/>
                <Cell col="5" displaytype="number" style="align:right middle;selectbackground:#ffffffff;" text="bind:CNTRCT_AMOUNT" suppress="1"/>
                <Cell col="6" displaytype="number" style="align:right middle;" text="bind:PRSEC_AMOUNT"/>
                <Cell col="7" displaytype="number" style="align:right middle;" text="bind:DECSN_AMOUNT"/>
                <Cell col="8" displaytype="number" style="align:right middle;" text="expr:CNTRCT_AMOUNT - dataset.getSum('DECSN_AMOUNT', 0, currow+1)"/>
              </Band>
            </Format>
          </Formats>
        </Grid>
        <Static id="Static42" taborder="44" text="10" visible="false" top="33" bottom="0" width="10" style="background:#1b3cd23c;align:center middle;" left="500"/>
        <Static id="sta_cntrctDecsnYear" taborder="45" text="결의년도" cssclass="sta_WF_Label" width="94" height="27" top="454" left="674"/>
        <Static id="sta_pxcondSe" taborder="47" text="기성구분" cssclass="sta_WF_Label" height="27" top="67" left="510" width="94"/>
        <Static id="sta_expndtrAcnut" taborder="48" text="지출계좌" cssclass="sta_WF_Label" height="27" top="119" left="510" width="94"/>
        <Static id="sta_sumry" taborder="51" text="적요(결의명)" cssclass="sta_WF_Label" height="27" top="93" left="510" width="94"/>
        <Static id="sta_decsnNo" taborder="52" text="결의번호" cssclass="sta_WF_Label" width="94" height="27" top="454" left="830"/>
        <Edit id="edt_cntrctDecsnYear" taborder="19" width="58" height="21" cssclass="edt_WF_Readonly" readonly="true" tabstop="false" top="457" style="align:center middle;" left="770"/>
        <Edit id="edt_decsnNo" taborder="20" width="102" height="21" cssclass="edt_WF_Readonly" readonly="true" tabstop="false" top="457" style="align:center middle;" left="926"/>
        <Edit id="edt_pxcondOdr" taborder="5" width="66" height="21" top="70" cssclass="edt_WF_Readonly" readonly="true" left="696"/>
        <Edit id="edt_sumry" taborder="13" width="422" height="21" lengthunit="ascii" maxlength="200" top="96" left="606"/>
        <Edit id="edt_expndtrAcnutNo" taborder="15" cssclass="edt_WF_Essential" width="152" height="21" readonly="true" tabstop="false" top="122" left="696"/>
        <Combo id="cmb_expndtrFnncInsttCode" taborder="14" cssclass="cmb_WF_Readonly" width="88" height="21" innerdataset="@ds_fnncInsttList" codecolumn="FNNC_INSTT_CODE" datacolumn="FNNC_INSTT_CODE_NM" readonly="true" tabstop="false" top="122" left="606"/>
        <Button id="btn_expndtrPopup" taborder="16" onclick="fn_popup_onclick" cssclass="btn_WF_Search" width="21" height="21" top="122" left="827"/>
        <Combo id="cmb_pxcondSe" taborder="4" width="88" height="21" index="-1" innerdataset="@ds_ctr039" codecolumn="CODE" datacolumn="CODE_NM" top="70" cssclass="cmb_WF_Readonly" readonly="true" left="606"/>
        <Static id="sta_decsnInfoDetail" taborder="61" text="기초정보" cssclass="sta_WF_Title02" width="164" height="19" style="align:left middle;" top="43" left="510"/>
        <Button id="btn_delDecsn" taborder="17" text="지출결의서 삭제" cssclass="btn_WF_Process" top="430" right="28" width="100" height="19" onclick="btn_delDecsn_onclick" visible="true" enable="false"/>
        <Static id="sta_decsnInfoDetail00" taborder="63" text="회계결의 내역" cssclass="sta_WF_Title02" top="430" width="132" height="19" style="align:left middle;" left="510"/>
        <Static id="Static10" taborder="64" text="5" visible="false" left="510" top="449" right="28" height="5" style="background:#dc143c3c;align:center middle;"/>
        <Static id="sta_top00" taborder="65" text="10" visible="false" left="510" top="420" right="28" height="10" style="background:#dc143c3c;align:center middle;"/>
        <Static id="sta_cntrctDecsnYear00" taborder="69" text="등록여부" cssclass="sta_WF_Label" top="454" width="94" height="27" left="510"/>
        <Edit id="edt_ExpDecsnAt" taborder="18" tabstop="false" readonly="true" cssclass="edt_WF_Readonly" top="457" width="66" height="21" style="align:center middle;font:bold 9 Gulim;" left="606"/>
        <Static id="sta_pxcondSe00" taborder="70" text="차" top="67" width="26" height="27" style="padding:1 0 0 3;align:left middle;" left="764"/>
        <Button id="btn_AD" taborder="2" text="결의정보 추가" cssclass="btn_WF_Gridadd" top="43" right="95" width="104" height="19" onclick="btn_AD_onclick" visible="false"/>
        <Button id="btn_Cancel" taborder="3" text="취소" cssclass="btn_WF_Gridcnl" top="43" right="28" width="64" height="19" onclick="btn_Cancel_onclick" visible="false"/>
        <Tab id="tab_" taborder="91" top="491" tabindex="0" scrollbars="autoboth" right="28" style="buttonpadding:6 20 6 20;showextrabutton:false;" left="510" bottom="0">
          <Tabpages>
            <Tabpage id="tabpage1" text="첨부파일(대가지급)">
              <Layouts>
                <Layout width="521" height="298">
                  <Grid id="grd_cmmnAtchmnfl" taborder="0" binddataset="ds_fileList" autoenter="select" useinputpanel="false" cellsizingtype="col" autofittype="col" oncellclick="grd_cmmnAtchmnfl_oncellclick" onheadclick="grd_cmmnAtchmnfl_onheadclick" top="34" left="0" bottom="0" right="0" oncelldblclick="tab__tabpage1_grd_cmmnAtchmnfl_oncelldblclick">
                    <Formats>
                      <Format id="default">
                        <Columns>
                          <Column size="40"/>
                          <Column size="65"/>
                          <Column size="300"/>
                          <Column size="80"/>
                          <Column size="80"/>
                          <Column size="20"/>
                          <Column size="20"/>
                        </Columns>
                        <Rows>
                          <Row size="24" band="head"/>
                          <Row size="40"/>
                        </Rows>
                        <Band id="head">
                          <Cell displaytype="checkbox" edittype="checkbox"/>
                          <Cell col="1" text="파일형식"/>
                          <Cell col="2" celltype="head" text="파일명"/>
                          <Cell col="3" text="확장자"/>
                          <Cell col="4" text="사이즈"/>
                          <Cell col="5" colspan="2"/>
                        </Band>
                        <Band id="body">
                          <Cell displaytype="checkbox" edittype="checkbox" text="bind:CHK"/>
                          <Cell col="1" displaytype="image" text="bind:FILE_IMAGE" autosizerow="limitmin" autosizecol="limitmin"/>
                          <Cell col="2" displaytype="normal" style="align:left middle;" text="bind:ORGINL_FILE_NM"/>
                          <Cell col="3" text="bind:FILE_EXTSN"/>
                          <Cell col="4" text="bind:FILE_MG"/>
                          <Cell col="5" style="selectbackground:transparent;" text="expr:currow &gt; 0  ? '▲' :  ''" suppressalign="middle"/>
                          <Cell col="6" style="align:center;selectbackground:transparent;" text="expr:dataset.rowcount == (currow+1) ? '' : '▼'" suppressalign="middle"/>
                        </Band>
                      </Format>
                    </Formats>
                  </Grid>
                  <Button id="btn_downFiles" taborder="1" text="선택다운로드" onclick="btn_downFiles_onclick" cssclass="btn_WF_Process" visible="true" top="10" right="0" width="85" height="19"/>
                  <Static id="sta_gnfdList03" taborder="2" text="대가지급 시 필요한 추가서류 목록" cssclass="sta_WF_Title02" top="10" width="226" height="19" style="align:left middle;" left="0"/>
                  <Static id="Static01" taborder="3" text="10" visible="false" top="0" right="0" height="10" style="background:#dc143c3c;align:center middle;" left="0"/>
                  <Static id="Static02" taborder="4" text="5" visible="false" height="5" style="background:#dc143c3c;align:center middle;" top="29" left="0" right="0"/>
                  <Button id="btn_delFiles" taborder="5" text="선택삭제" onclick="btn_delFiles_onclick" cssclass="btn_WF_Process" top="10" right="160" width="67" height="19"/>
                  <Button id="btn_uploadFiles" taborder="6" text="파일업로드" onclick="btn_uploadFiles_onclick" cssclass="btn_WF_Process" top="10" right="88" width="68" height="19"/>
                </Layout>
              </Layouts>
            </Tabpage>
            <Tabpage id="tabpage2" text="첨부파일(검사검수)">
              <Layouts>
                <Layout>
                  <Static id="Static01" taborder="0" text="10" visible="false" left="0" top="0" right="0" height="10" style="background:#dc143c3c;align:center middle;"/>
                  <Static id="sta_gnfdList03" taborder="1" text="검사검수시 등록된 첨부파일(참고)" cssclass="sta_WF_Title02" left="0" top="10" width="226" height="19" style="align:left middle;"/>
                  <Static id="Static02" taborder="2" text="5" visible="false" left="0" top="29" right="0" height="5" style="background:#dc143c3c;align:center middle;"/>
                  <Grid id="grd_cmmnAtchmnfl" taborder="3" binddataset="ds_fileList2" autoenter="select" useinputpanel="false" cellsizingtype="col" autofittype="col" oncellclick="grd_cmmnAtchmnfl_oncellclick" onheadclick="grd_cmmnAtchmnfl_onheadclick" left="0" top="34" right="0" bottom="0" oncelldblclick="tab__tabpage2_grd_cmmnAtchmnfl_oncelldblclick">
                    <Formats>
                      <Format id="default">
                        <Columns>
                          <Column size="40"/>
                          <Column size="65"/>
                          <Column size="300"/>
                          <Column size="80"/>
                          <Column size="80"/>
                        </Columns>
                        <Rows>
                          <Row size="24" band="head"/>
                          <Row size="40"/>
                        </Rows>
                        <Band id="head">
                          <Cell displaytype="checkbox" edittype="checkbox"/>
                          <Cell col="1" text="파일형식"/>
                          <Cell col="2" celltype="head" text="파일명"/>
                          <Cell col="3" text="확장자"/>
                          <Cell col="4" text="사이즈"/>
                        </Band>
                        <Band id="body">
                          <Cell displaytype="checkbox" edittype="checkbox" text="bind:CHK"/>
                          <Cell col="1" displaytype="image" text="bind:FILE_IMAGE" autosizerow="limitmin" autosizecol="limitmin"/>
                          <Cell col="2" displaytype="normal" style="align:left middle;" text="bind:ORGINL_FILE_NM"/>
                          <Cell col="3" text="bind:FILE_EXTSN"/>
                          <Cell col="4" text="bind:FILE_MG"/>
                        </Band>
                      </Format>
                    </Formats>
                  </Grid>
                  <Button id="btn_downFiles2" taborder="4" text="선택다운로드" onclick="btn_downFiles2_onclick" cssclass="btn_WF_Process" top="10" right="0" width="85" height="19"/>
                </Layout>
              </Layouts>
            </Tabpage>
            <Tabpage id="tabpage3" text="계약내역">
              <Layouts>
                <Layout width="521" height="218">
                  <Static id="Static17" taborder="0" cssclass="sta_WF_Labelbg" top="140" height="27" left="0" width="513"/>
                  <Static id="Static16" taborder="1" cssclass="sta_WF_Labelbg" top="114" height="27" left="0" width="513"/>
                  <Static id="Static15" taborder="2" cssclass="sta_WF_Labelbg" top="88" height="27" left="0" width="513"/>
                  <Static id="Static09" taborder="3" cssclass="sta_WF_Labelbg" top="10" height="27" left="0" width="513"/>
                  <Static id="Static12" taborder="4" cssclass="sta_WF_Labelbg" top="36" height="27" left="0" width="513"/>
                  <Static id="Static13" taborder="5" cssclass="sta_WF_Labelbg" top="62" height="27" left="0" width="513"/>
                  <Static id="sta_pxcondSe01" taborder="9" text="계약명" cssclass="sta_WF_Label" top="10" width="94" height="27" left="0"/>
                  <Static id="sta_pxcondSe02" taborder="10" text="계약구분" cssclass="sta_WF_Label" top="36" width="94" height="27" left="0"/>
                  <Static id="sta_pxcondSe03" taborder="11" text="계약방법" cssclass="sta_WF_Label" top="62" width="94" height="27" left="0"/>
                  <Static id="sta_pxcondSe04" taborder="12" text="상세구분" cssclass="sta_WF_Label" top="36" width="94" height="27" left="189"/>
                  <Combo id="cmb_CNTRCT_MTH_SE" taborder="13" tabstop="false" readonly="true" innerdataset="@ds_ctr049" codecolumn="CODE" datacolumn="CODE_NM" cssclass="cmb_WF_Readonly" top="65" width="104" height="21" left="96"/>
                  <Combo id="cmb_CNTRCT_SE" taborder="14" tabstop="false" readonly="true" innerdataset="@ds_ctr022" codecolumn="CODE" datacolumn="CODE_NM" cssclass="cmb_WF_Readonly" top="39" width="91" height="21" left="96"/>
                  <Combo id="cmb_DETAIL_SE" taborder="15" tabstop="false" readonly="true" innerdataset="@ds_ctr023" codecolumn="CODE" datacolumn="CODE_NM" cssclass="cmb_WF_Readonly" top="39" width="225" height="21" left="285"/>
                  <Static id="sta_pxcondSe05" taborder="16" text="계약성질/도급방법" cssclass="sta_WF_Label" top="88" width="126" height="27" left="0"/>
                  <Static id="sta_pxcondSe06" taborder="17" text="계약일자" cssclass="sta_WF_Label" top="114" width="94" height="27" left="0"/>
                  <Static id="sta_pxcondSe07" taborder="18" text="최초계약금액" cssclass="sta_WF_Label" top="140" width="94" height="27" left="0"/>
                  <Combo id="cmb_CNTRCT_DISPOS_SE" taborder="19" tabstop="false" readonly="true" innerdataset="@ds_ctr042" codecolumn="CODE" datacolumn="CODE_NM" cssclass="cmb_WF_Readonly" top="91" width="120" height="21" left="128"/>
                  <Combo id="cmb_OUTSRC_MTH_SE" taborder="20" tabstop="false" readonly="true" innerdataset="@ds_ctr040" codecolumn="CODE" datacolumn="CODE_NM" cssclass="cmb_WF_Readonly" top="91" width="96" height="21" left="250"/>
                  <Static id="sta_pxcondSe08" taborder="21" text="간이계약여부" cssclass="sta_WF_Label" top="88" width="94" height="27" left="348"/>
                  <Edit id="edt_INFRML_CNTRCT_AT" taborder="22" tabstop="false" readonly="true" cssclass="edt_WF_Readonly" top="91" width="66" height="21" style="align:center middle;" left="444"/>
                  <Static id="sta_pxcondSe09" taborder="23" text="계약기간" cssclass="sta_WF_Label" top="114" width="85" height="27" left="203"/>
                  <Calendar id="cal_CNTRCT_DE" taborder="24" readonly="true" dateformat="yyyy-MM-dd" cssclass="cal_WF_Readonly" top="117" width="105" height="21" style="align:center middle;" left="96"/>
                  <Calendar id="CAL_STRWRK_DE" taborder="25" readonly="true" dateformat="yyyy-MM-dd" cssclass="cal_WF_Readonly" top="117" width="105" height="21" style="align:center middle;" left="290"/>
                  <Calendar id="cal_COMPET_DE" taborder="26" readonly="true" dateformat="yyyy-MM-dd" cssclass="cal_WF_Readonly" top="117" width="105" height="21" style="align:center middle;" left="405"/>
                  <Static id="sta_pxcondSe10" taborder="27" text="~" top="117" width="6" height="21" style="align:center middle;" left="397"/>
                  <Static id="sta_pxcondSe11" taborder="28" text="감독부서" cssclass="sta_WF_Label" top="140" width="94" height="27" left="238"/>
                  <MaskEdit id="msk_CNTRCT_AMOUNT" taborder="29" tabstop="false" readonly="true" mask="###,###,###,###,###" limitbymask="both" cssclass="msk_WF_Readonly" top="143" width="140" height="21" left="96"/>
                  <Edit id="edt_CNTRCT_NM" taborder="30" tabstop="false" readonly="true" cssclass="edt_WF_Readonly" top="12" width="414" height="21" style="align:left middle;" left="96"/>
                  <Static id="Static18" taborder="31" cssclass="sta_WF_Labelbg" top="166" height="27" left="0" width="513"/>
                  <Static id="sta_pxcondSe12" taborder="32" text="감독관목록" cssclass="sta_WF_Label" top="166" width="94" height="27" left="0"/>
                  <Edit id="edt_MANGR_EMPNM" taborder="33" tabstop="false" readonly="true" cssclass="edt_WF_Readonly" top="169" width="414" height="21" style="align:left middle;" left="96"/>
                  <Edit id="edt_MNG_DEPT_CODE" taborder="34" tabstop="false" readonly="true" cssclass="edt_WF_Readonly" top="143" width="66" height="21" style="align:center middle;" left="334"/>
                  <Edit id="edt_MNG_DEPT_NM" taborder="35" tabstop="false" readonly="true" cssclass="edt_WF_Readonly" top="143" width="108" height="21" style="align:left middle;" left="402"/>
                </Layout>
              </Layouts>
            </Tabpage>
          </Tabpages>
        </Tab>
        <Static id="sta_top01" taborder="92" text="10" visible="false" left="510" top="481" right="28" height="10" style="background:#dc143c3c;align:center middle;"/>
        <Static id="Static01" taborder="93" text="5" visible="false" left="510" top="175" right="28" height="10" style="background:#dc143c3c;align:center middle;"/>
        <Static id="sta_decsnInfoDetail01" taborder="94" text="업체별 내역" cssclass="sta_WF_Title02" top="156" height="19" style="align:left middle;" left="510" width="92"/>
        <Static id="sta_top02" taborder="95" text="10" visible="false" left="510" top="146" right="28" height="10" style="background:#dc143c3c;align:center middle;"/>
        <Grid id="grd_cntrctDecsnDetail" taborder="96" binddataset="ds_cntrctDecsnDetail" autoenter="select" useinputpanel="false" top="180" right="28" height="240" left="510" onexpandup="grd_cntrctDecsnDetail_onexpandup">
          <Formats>
            <Format id="default">
              <Columns>
                <Column size="60"/>
                <Column size="70"/>
                <Column size="180"/>
                <Column size="120"/>
                <Column size="100"/>
                <Column size="100"/>
                <Column size="70"/>
                <Column size="120"/>
                <Column size="100"/>
                <Column size="120"/>
                <Column size="180"/>
                <Column size="80"/>
              </Columns>
              <Rows>
                <Row size="24" band="head"/>
                <Row size="24"/>
                <Row size="24" band="summ"/>
              </Rows>
              <Band id="head">
                <Cell text="결의대상"/>
                <Cell col="1" text="업체구분"/>
                <Cell col="2" text="업체명"/>
                <Cell col="3" text="결의금액"/>
                <Cell col="4" text="공급가액"/>
                <Cell col="5" text="부가세"/>
                <Cell col="6" text="은행"/>
                <Cell col="7" text="계좌번호"/>
                <Cell col="8" text="예금주"/>
                <Cell col="9" text="세금계산서구분"/>
                <Cell col="10" text="국세청 승인번호"/>
                <Cell col="11" text="청구/영수"/>
              </Band>
              <Band id="body">
                <Cell displaytype="checkbox" edittype="checkbox" text="bind:DECSN_CHK"/>
                <Cell col="1" text="bind:ENTRPS_SE_NM"/>
                <Cell col="2" style="align:left middle;padding:0 0 0 5;" text="bind:BCNC_NM2"/>
                <Cell col="3" displaytype="number" edittype="expr:DECSN_CHK == '1' ? 'masknumber' : 'none'" style="align:right middle;" text="bind:DECSN_AMOUNT" mask="###,###,###,###,###" editdisplay="expr:DECSN_CHK == '1' ? 'display' : 'edit'" editlimitbymask="both"/>
                <Cell col="4" displaytype="number" edittype="expr:DECSN_CHK == '1' ? 'masknumber' : 'none'" style="align:right middle;" text="bind:SUPLY_AMOUNT" mask="###,###,###,###,###" editdisplay="expr:DECSN_CHK == '1' ? 'display' : 'edit'" editlimitbymask="both"/>
                <Cell col="5" displaytype="number" edittype="expr:DECSN_CHK == '1' ? 'masknumber' : 'none'" style="align:right middle;" text="bind:VAT" mask="###,###,###,###,###" editdisplay="expr:DECSN_CHK == '1' ? 'display' : 'edit'" editlimitbymask="both"/>
                <Cell col="6" displaytype="combo" text="bind:PYMNT_FNNC_INSTT_CODE" combodataset="ds_fnncInsttList" combocodecol="FNNC_INSTT_CODE" combodatacol="FNNC_INSTT_CODE_NM"/>
                <Cell col="7" style="align:left middle;padding:0 0 0 5;" text="bind:PYMNT_ACNUTNO"/>
                <Cell col="8" style="align:left middle;" text="bind:PYMNT_DPSTR_NM"/>
                <Cell col="9" displaytype="combo" text="bind:BILL_KND" expandshow="expr:DECSN_CHK == '1' ? 'show' : 'hide'" combodataset="ds_acc030" combocodecol="CODE" combodatacol="CODE_NM"/>
                <Cell col="10" text="bind:ISSU_SEQNO"/>
                <Cell col="11" displaytype="combo" text="bind:POPS_CODE" combodataset="ds_acc038" combocodecol="CODE" combodatacol="CODE_NM"/>
              </Band>
              <Band id="summary">
                <Cell/>
                <Cell col="1"/>
                <Cell col="2" text="합 계"/>
                <Cell col="3" displaytype="number" style="align:right middle;" text="expr:dataset.getSum(&quot;DECSN_AMOUNT&quot;)"/>
                <Cell col="4" displaytype="number" style="align:right middle;" text="expr:dataset.getSum(&quot;SUPLY_AMOUNT&quot;)"/>
                <Cell col="5" displaytype="number" style="align:right middle;" text="expr:dataset.getSum(&quot;VAT&quot;)"/>
                <Cell col="6"/>
                <Cell col="7"/>
                <Cell col="8"/>
                <Cell col="9"/>
                <Cell col="10"/>
                <Cell col="11"/>
              </Band>
            </Format>
          </Formats>
        </Grid>
        <Static id="sta_decsnInfoDetail02" taborder="99" text="(결의하고자 하는 업체를 '대상'으로 체크해 주시기 바랍니다)" left="602" top="156" right="29" height="19" style="align:left middle;"/>
        <Static id="sta_decsnInfoDetail03" taborder="101" text="(지출결의가 등록된 대가지급 건은 수정하실 수 없습니다)" left="602" top="156" right="125" height="19" style="color:red;align:left middle;" visible="false"/>
        <Static id="sta_pxcondSe01" taborder="102" text="대지급여부" cssclass="sta_WF_Label" left="788" top="67" width="94" height="27"/>
        <CheckBox id="chk_PXPAY_AT" taborder="103" text="조달청 대지급 대상" left="887" top="70" width="134" height="21" truevalue="1" falsevalue="0"/>
        <Static id="sta_pxcondSe02" taborder="104" text="결의서" cssclass="sta_WF_Label" left="850" top="119" width="56" height="27"/>
        <Combo id="cmb_anactKnd" taborder="105" codecolumn="codecolumn" datacolumn="datacolumn" left="908" top="122" width="120" height="21">
          <Dataset id="innerdataset">
            <ColumnInfo>
              <Column id="codecolumn" size="256"/>
              <Column id="datacolumn" size="256"/>
            </ColumnInfo>
            <Rows>
              <Row>
                <Col id="codecolumn">03</Col>
                <Col id="datacolumn">지출결의서</Col>
              </Row>
              <Row>
                <Col id="codecolumn">06</Col>
                <Col id="datacolumn">공사와집행결의서</Col>
              </Row>
              <Row>
                <Col id="codecolumn">02</Col>
                <Col id="datacolumn">구입과지출결의서</Col>
              </Row>
            </Rows>
          </Dataset>
        </Combo>
        <Static id="sta_blind" taborder="100" text="상단의 검색조건에서 계약번호를 선택하면&#13;&#10;계약별로 &lt;결재가 완료된&gt; 검사검수 내역이 조회됩니다.&#13;&#10;(노무비의 경우 전자결재 완료유무를 따지지 않습니다)&#13;&#10;&#13;&#10;'결의정보 추가' 버튼을 클릭 후, 내용을 입력하여 주시기 바랍니다" left="265" top="406" width="92" height="54" style="background:#ffffffdc;align:center middle;font:bold 12 Gulim;" onclick="sta_blind_onclick"/>
        <Button id="btn_decsn" taborder="107" text="지출결의서 등록/수정" onclick="btn_decsn_onclick" cssclass="btn_WF_Process" visible="false" top="430" right="130" width="141" height="19"/>
      </Layout>
    </Layouts>
    <Bind>
      <BindItem id="item43" compid="div_search.edt_CNTRCT_NM" propid="value" datasetid="ds_cond" columnid="CNTRCT_NM"/>
      <BindItem id="item1" compid="div_search.msk_CNTRCT_NO" propid="value" datasetid="ds_cond" columnid="CNTRCT_NO"/>
      <BindItem id="item36" compid="div_search.spn_CNTRCT_YEAR" propid="value" datasetid="ds_cond" columnid="CNTRCT_YEAR"/>
      <BindItem id="item0" compid="edt_cntrctDecsnYear" propid="value" datasetid="ds_cntrctDecsnInfo" columnid="EXP_DECSN_YEAR"/>
      <BindItem id="item2" compid="edt_decsnNo" propid="value" datasetid="ds_cntrctDecsnInfo" columnid="EXP_DECSN_NO"/>
      <BindItem id="item3" compid="cmb_pxcondSe" propid="value" datasetid="ds_cntrctDecsnInfo" columnid="PXCOND_SE"/>
      <BindItem id="item4" compid="edt_pxcondOdr" propid="value" datasetid="ds_cntrctDecsnInfo" columnid="PXCOND_ODR"/>
      <BindItem id="item9" compid="cmb_expndtrFnncInsttCode" propid="value" datasetid="ds_cntrctDecsnInfo" columnid="EXPNDTR_FNNC_INSTT_CODE"/>
      <BindItem id="item11" compid="edt_expndtrAcnutNo" propid="value" datasetid="ds_cntrctDecsnInfo" columnid="EXPNDTR_ACNUTNO"/>
      <BindItem id="item22" compid="edt_sumry" propid="value" datasetid="ds_cntrctDecsnInfo" columnid="SUMRY"/>
      <BindItem id="item5" compid="edt_ExpDecsnAt" propid="value" datasetid="ds_cntrctDecsnInfo" columnid="EXP_DECSN_STR"/>
      <BindItem id="item20" compid="tab_.tabpage3.cmb_CNTRCT_MTH_SE" propid="value" datasetid="ds_cntrct" columnid="CNTRCT_MTH_SE"/>
      <BindItem id="item18" compid="tab_.tabpage3.cmb_CNTRCT_SE" propid="value" datasetid="ds_cntrct" columnid="CNTRCT_SE"/>
      <BindItem id="item19" compid="tab_.tabpage3.cmb_DETAIL_SE" propid="value" datasetid="ds_cntrct" columnid="DETAIL_SE"/>
      <BindItem id="item25" compid="tab_.tabpage3.cmb_CNTRCT_DISPOS_SE" propid="value" datasetid="ds_cntrct" columnid="CNTRCT_DISPOS_SE"/>
      <BindItem id="item24" compid="tab_.tabpage3.cmb_OUTSRC_MTH_SE" propid="value" datasetid="ds_cntrct" columnid="OUTSRC_MTH_SE"/>
      <BindItem id="item6" compid="tab_.tabpage3.edt_INFRML_CNTRCT_AT" propid="value" datasetid="ds_cntrct" columnid="INFRML_CNTRCT_AT"/>
      <BindItem id="item7" compid="tab_.tabpage3.cal_CNTRCT_DE" propid="value" datasetid="ds_cntrct" columnid="CNTRCT_DE"/>
      <BindItem id="item8" compid="tab_.tabpage3.CAL_STRWRK_DE" propid="value" datasetid="ds_cntrct" columnid="STRWRK_DE"/>
      <BindItem id="item16" compid="tab_.tabpage3.cal_COMPET_DE" propid="value" datasetid="ds_cntrct" columnid="COMPET_DE"/>
      <BindItem id="item26" compid="tab_.tabpage3.msk_CNTRCT_AMOUNT" propid="value" datasetid="ds_cntrct" columnid="CNTRCT_AMOUNT"/>
      <BindItem id="item17" compid="tab_.tabpage3.edt_CNTRCT_NM" propid="value" datasetid="ds_cntrct" columnid="CNTRCT_NM"/>
      <BindItem id="item27" compid="tab_.tabpage3.edt_MANGR_EMPNM" propid="value" datasetid="ds_cntrct" columnid="MANGR_EMPNM"/>
      <BindItem id="item28" compid="tab_.tabpage3.edt_MNG_DEPT_CODE" propid="value" datasetid="ds_cntrct" columnid="MNG_DEPT_CODE"/>
      <BindItem id="item29" compid="tab_.tabpage3.edt_MNG_DEPT_NM" propid="value" datasetid="ds_cntrct" columnid="MNG_DEPT_NM"/>
      <BindItem id="item15" compid="tab_.tabpage1.btn_delFiles" propid="enable" datasetid="ds_edcAcmsltList" columnid="ENABLE_AT"/>
      <BindItem id="item21" compid="tab_.tabpage1.btn_uploadFiles" propid="enable" datasetid="ds_edcAcmsltList" columnid="ENABLE_AT"/>
      <BindItem id="item23" compid="grd_cntrctDecsnDetail" propid="readonly" datasetid="ds_cntrctDecsnInfo" columnid="EXP_DECSN_AT"/>
      <BindItem id="item31" compid="btn_expndtrPopup" propid="visible" datasetid="ds_cntrctDecsnInfo" columnid="ENABLE_AT"/>
      <BindItem id="item30" compid="edt_sumry" propid="enable" datasetid="ds_cntrctDecsnInfo" columnid="ENABLE_AT"/>
      <BindItem id="item32" compid="edt_expndtrAcnutNo" propid="enable" datasetid="ds_cntrctDecsnInfo" columnid="ENABLE_AT"/>
      <BindItem id="item33" compid="sta_decsnInfoDetail02" propid="visible" datasetid="ds_cntrctDecsnInfo" columnid="ENABLE_AT"/>
      <BindItem id="item34" compid="sta_decsnInfoDetail03" propid="visible" datasetid="ds_cntrctDecsnInfo" columnid="EXP_DECSN_AT"/>
      <BindItem id="item10" compid="chk_PXPAY_AT" propid="value" datasetid="ds_cntrctDecsnInfo" columnid="PXPAY_AT"/>
      <BindItem id="item12" compid="chk_PXPAY_AT" propid="enable" datasetid="ds_cntrctDecsnInfo" columnid="ENABLE_AT"/>
      <BindItem id="item13" compid="cmb_anactKnd" propid="value" datasetid="ds_cntrctDecsnInfo" columnid="ANACT_KND"/>
      <BindItem id="item14" compid="cmb_anactKnd" propid="enable" datasetid="ds_cntrctDecsnInfo" columnid="ENABLE_AT"/>
    </Bind>
    <Objects>
      <Dataset id="ds_cond" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="CNTRCT_YEAR" type="STRING" size="4"/>
          <Column id="CNTRCT_NO" type="STRING" size="10"/>
          <Column id="CNTRCT_NM" type="STRING" size="100"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_condSub" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="CNTRCT_DECSN_YEAR" type="STRING" size="256"/>
          <Column id="CNTRCT_DECSN_SN" type="STRING" size="256"/>
          <Column id="CNTRCT_NO" type="STRING" size="256"/>
          <Column id="WTNESS_SN" type="STRING" size="256"/>
          <Column id="FILE_SN" type="STRING" size="256"/>
          <Column id="FILE_SN2" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_prsecWtnessList" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false" onrowposchanged="ds_prsecWtnessList_onrowposchanged">
        <ColumnInfo>
          <Column id="CNTRCT_NO" type="STRING" size="256"/>
          <Column id="WTNESS_SN" type="STRING" size="256"/>
          <Column id="PRSEC_DE" type="STRING" size="256"/>
          <Column id="PRSEC_SE" type="STRING" size="256"/>
          <Column id="PRSEC_SE_NM" type="STRING" size="256"/>
          <Column id="PRSEC_ODR" type="STRING" size="256"/>
          <Column id="CNTRCT_AMOUNT" type="BIGDECIMAL" size="15"/>
          <Column id="PRSEC_AMOUNT" type="BIGDECIMAL" size="15"/>
          <Column id="DECSN_AMOUNT" type="BIGDECIMAL" size="15"/>
          <Column id="PRICE_PYMNT_REGIST_AT" type="STRING" size="256"/>
          <Column id="DECSN_REGIST_AT" type="STRING" size="256"/>
          <Column id="MNG_DEPT_CODE" type="STRING" size="256"/>
          <Column id="MNG_DEPT_NM" type="STRING" size="256"/>
          <Column id="BUDGET_ACNT_CODE" type="STRING" size="256"/>
          <Column id="CNTRCT_NM" type="STRING" size="256"/>
          <Column id="BCNC_CODE" type="STRING" size="256"/>
          <Column id="BCNC_NM" type="STRING" size="256"/>
          <Column id="FILE_SN" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_cntrctDecsnInfo" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false" onrowposchanged="ds_cntrctDecsnInfo_onrowposchanged">
        <ColumnInfo>
          <Column id="CNTRCT_DECSN_YEAR" type="STRING" size="256"/>
          <Column id="CNTRCT_DECSN_SN" type="STRING" size="256"/>
          <Column id="DECSN_NO" type="STRING" size="256"/>
          <Column id="CNTRCT_NO" type="STRING" size="256"/>
          <Column id="WTNESS_SN" type="STRING" size="256"/>
          <Column id="PXCOND_SE" type="STRING" size="256"/>
          <Column id="PXCOND_ODR" type="STRING" size="256"/>
          <Column id="FILE_SN" type="STRING" size="256"/>
          <Column id="EXPNDTR_FNNC_INSTT_CODE" type="STRING" size="256"/>
          <Column id="EXPNDTR_FNNC_INSTT_NM" type="STRING" size="256"/>
          <Column id="EXPNDTR_ACNUTNO" type="STRING" size="256"/>
          <Column id="SUMRY" type="STRING" size="256"/>
          <Column id="PXPAY_AT" type="STRING" size="256"/>
          <Column id="DEPT_CODE" type="STRING" size="256"/>
          <Column id="BSNS_CODE" type="STRING" size="256"/>
          <Column id="BSNS_NM" type="STRING" size="256"/>
          <Column id="EXP_DECSN_YEAR" type="STRING" size="256"/>
          <Column id="EXP_DECSN_NO" type="STRING" size="256"/>
          <Column id="EXP_DECSN_STR" type="STRING" size="256"/>
          <Column id="EXP_DECSN_AT" type="STRING" size="256"/>
          <Column id="ENABLE_AT" type="STRING" size="256"/>
          <Column id="ANACT_KND" type="STRING" size="256"/>
          <Column id="CNTRCT_REGIST_DT" type="STRING" size="256"/>
          <Column id="REAL_COMPET_DE" type="STRING" size="256"/>
          <Column id="ISSU_SEQNO" type="STRING" size="256"/>
          <Column id="REGS_DATE" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_ctr039" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="ETC1" type="string" size="32"/>
          <Column id="VAL2" type="string" size="32"/>
          <Column id="CODE_CN" type="string" size="32"/>
          <Column id="VAL1" type="string" size="32"/>
          <Column id="USE_YN" type="string" size="32"/>
          <Column id="ETC3" type="string" size="32"/>
          <Column id="VAL4" type="string" size="32"/>
          <Column id="ETC2" type="string" size="32"/>
          <Column id="VAL3" type="string" size="32"/>
          <Column id="CODE_ORDR" type="bigdecimal" size="16"/>
          <Column id="MSTK_VAL" type="string" size="32"/>
          <Column id="ALL_CODE_NM" type="string" size="32"/>
          <Column id="CODE_NM" type="string" size="32"/>
          <Column id="INT_VAL" type="string" size="32"/>
          <Column id="GRP_CODE" type="string" size="32"/>
          <Column id="CODE" type="string" size="32"/>
          <Column id="VAL0" type="string" size="32"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_ctr047" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="ETC1" type="string" size="32"/>
          <Column id="VAL2" type="string" size="32"/>
          <Column id="CODE_CN" type="string" size="32"/>
          <Column id="VAL1" type="string" size="32"/>
          <Column id="USE_YN" type="string" size="32"/>
          <Column id="ETC3" type="string" size="32"/>
          <Column id="VAL4" type="string" size="32"/>
          <Column id="ETC2" type="string" size="32"/>
          <Column id="VAL3" type="string" size="32"/>
          <Column id="CODE_ORDR" type="bigdecimal" size="16"/>
          <Column id="MSTK_VAL" type="string" size="32"/>
          <Column id="ALL_CODE_NM" type="string" size="32"/>
          <Column id="CODE_NM" type="string" size="32"/>
          <Column id="INT_VAL" type="string" size="32"/>
          <Column id="GRP_CODE" type="string" size="32"/>
          <Column id="CODE" type="string" size="32"/>
          <Column id="VAL0" type="string" size="32"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_ctr048" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="ETC1" type="string" size="32"/>
          <Column id="VAL2" type="string" size="32"/>
          <Column id="CODE_CN" type="string" size="32"/>
          <Column id="VAL1" type="string" size="32"/>
          <Column id="USE_YN" type="string" size="32"/>
          <Column id="ETC3" type="string" size="32"/>
          <Column id="VAL4" type="string" size="32"/>
          <Column id="ETC2" type="string" size="32"/>
          <Column id="VAL3" type="string" size="32"/>
          <Column id="CODE_ORDR" type="bigdecimal" size="16"/>
          <Column id="MSTK_VAL" type="string" size="32"/>
          <Column id="ALL_CODE_NM" type="string" size="32"/>
          <Column id="CODE_NM" type="string" size="32"/>
          <Column id="INT_VAL" type="string" size="32"/>
          <Column id="GRP_CODE" type="string" size="32"/>
          <Column id="CODE" type="string" size="32"/>
          <Column id="VAL0" type="string" size="32"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_fnncInsttList" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="FNNC_INSTT_CODE" type="STRING" size="256"/>
          <Column id="FNNC_INSTT_CODE_NM" type="STRING" size="256"/>
          <Column id="USE_AT" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_validation" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="compId" type="STRING" size="256"/>
          <Column id="colId" type="STRING" size="256"/>
          <Column id="msgId" type="STRING" size="256"/>
          <Column id="PK" type="STRING" size="256"/>
          <Column id="notNull" type="STRING" size="256"/>
          <Column id="nlength" type="STRING" size="256"/>
          <Column id="lengthChkGb" type="STRING" size="256"/>
          <Column id="type" type="STRING" size="256"/>
          <Column id="from" type="STRING" size="256"/>
          <Column id="to" type="STRING" size="256"/>
          <Column id="expr" type="STRING" size="256"/>
          <Column id="func" type="STRING" size="256"/>
        </ColumnInfo>
        <Rows>
          <Row>
            <Col id="colId">CNTRCT_DECSN_YEAR</Col>
            <Col id="compId">ds_cntrctDecsnInfo</Col>
            <Col id="msgId">계약결의년도</Col>
            <Col id="notNull">Y</Col>
          </Row>
          <Row>
            <Col id="colId">PXCOND_SE</Col>
            <Col id="compId">ds_cntrctDecsnInfo</Col>
            <Col id="msgId">기성구분</Col>
            <Col id="notNull">Y</Col>
          </Row>
          <Row>
            <Col id="colId">PXCOND_ODR</Col>
            <Col id="compId">ds_cntrctDecsnInfo</Col>
            <Col id="msgId">기성차수</Col>
            <Col id="notNull">Y</Col>
          </Row>
          <Row>
            <Col id="colId">EXPNDTR_ACNUTNO</Col>
            <Col id="compId">ds_cntrctDecsnInfo</Col>
            <Col id="msgId">지출계좌</Col>
            <Col id="notNull">Y</Col>
          </Row>
          <Row>
            <Col id="compId">ds_cntrctDecsnDetail</Col>
            <Col id="colId">BCNC_CODE</Col>
            <Col id="msgId">계약업체</Col>
            <Col id="notNull">Y</Col>
          </Row>
          <Row>
            <Col id="colId">PYMNT_ACNUTNO</Col>
            <Col id="compId">ds_cntrctDecsnDetail</Col>
            <Col id="msgId">지급계좌</Col>
            <Col id="notNull">Y</Col>
          </Row>
        </Rows>
      </Dataset>
      <Dataset id="ds_fileList2" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="CHK" type="STRING" size="256"/>
          <Column id="PROGRS" type="BIGDECIMAL" size="16"/>
          <Column id="ORGINL_FILE_NM" type="string" size="32"/>
          <Column id="FILE_EXTSN" type="string" size="32"/>
          <Column id="FILE_STRE_COURS" type="string" size="32"/>
          <Column id="FILE_ID" type="string" size="32"/>
          <Column id="SN" type="bigdecimal" size="16"/>
          <Column id="SYS_SE_CODE" type="string" size="32"/>
          <Column id="FILE_IMAGE" type="string" size="32"/>
          <Column id="FILE_TY" type="string" size="32"/>
          <Column id="JOB_SE" type="string" size="32"/>
          <Column id="DELETE_IMAGE" type="string" size="32"/>
          <Column id="STRE_FILE_NM" type="string" size="32"/>
          <Column id="FILE_MG" type="bigdecimal" size="16"/>
          <Column id="FILE_CN" type="string" size="32"/>
          <Column id="FILE_ORDR" type="bigdecimal" size="16"/>
          <Column id="TRNSMIS_FILE_SIZE" type="string" size="32"/>
          <Column id="USE_AT" type="string" size="32"/>
          <Column id="STTUS" type="string" size="32"/>
          <Column id="FILE_SN" type="bigdecimal" size="16"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_cntrct">
        <ColumnInfo>
          <Column id="CNTRCT_NO" type="STRING" size="256"/>
          <Column id="BSNS_CODE" type="STRING" size="256"/>
          <Column id="BSNS_NM" type="STRING" size="256"/>
          <Column id="REQEST_NO" type="STRING" size="256"/>
          <Column id="CNTRCT_SE" type="STRING" size="256"/>
          <Column id="DETAIL_SE" type="STRING" size="256"/>
          <Column id="CNTRCT_NM" type="STRING" size="256"/>
          <Column id="CNTRCT_AMOUNT" type="STRING" size="256"/>
          <Column id="CNTRCT_MTH_SE" type="STRING" size="256"/>
          <Column id="CNTRCT_DISPOS_SE" type="STRING" size="256"/>
          <Column id="OUTSRC_MTH_SE" type="STRING" size="256"/>
          <Column id="BID_DE" type="STRING" size="256"/>
          <Column id="CNTRCT_DE" type="STRING" size="256"/>
          <Column id="REAL_COMPET_DE" type="STRING" size="256"/>
          <Column id="STRWRK_DE" type="STRING" size="256"/>
          <Column id="COMPET_DE" type="STRING" size="256"/>
          <Column id="PRVCNTR_PRVONSH" type="STRING" size="256"/>
          <Column id="PRCURE_CNTRCT_NO" type="STRING" size="256"/>
          <Column id="PRCURE_FEE" type="STRING" size="256"/>
          <Column id="FILE_SN" type="STRING" size="256"/>
          <Column id="MNG_DEPT_CODE" type="STRING" size="256"/>
          <Column id="MNG_DEPT_NM" type="STRING" size="256"/>
          <Column id="MANGR_EMPNM" type="STRING" size="256"/>
          <Column id="SPT_LOCPLC" type="STRING" size="256"/>
          <Column id="INFRML_CNTRCT_AT" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_ctr022" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="ETC1" type="string" size="32"/>
          <Column id="VAL2" type="string" size="32"/>
          <Column id="CODE_CN" type="string" size="32"/>
          <Column id="VAL1" type="string" size="32"/>
          <Column id="USE_YN" type="string" size="32"/>
          <Column id="ETC3" type="string" size="32"/>
          <Column id="VAL4" type="string" size="32"/>
          <Column id="ETC2" type="string" size="32"/>
          <Column id="VAL3" type="string" size="32"/>
          <Column id="CODE_ORDR" type="bigdecimal" size="16"/>
          <Column id="MSTK_VAL" type="string" size="32"/>
          <Column id="ALL_CODE_NM" type="string" size="32"/>
          <Column id="CODE_NM" type="string" size="32"/>
          <Column id="INT_VAL" type="string" size="32"/>
          <Column id="GRP_CODE" type="string" size="32"/>
          <Column id="CODE" type="string" size="32"/>
          <Column id="VAL0" type="string" size="32"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_ctr023" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="ETC1" type="string" size="32"/>
          <Column id="VAL2" type="string" size="32"/>
          <Column id="CODE_CN" type="string" size="32"/>
          <Column id="VAL1" type="string" size="32"/>
          <Column id="USE_YN" type="string" size="32"/>
          <Column id="ETC3" type="string" size="32"/>
          <Column id="VAL4" type="string" size="32"/>
          <Column id="ETC2" type="string" size="32"/>
          <Column id="VAL3" type="string" size="32"/>
          <Column id="CODE_ORDR" type="bigdecimal" size="16"/>
          <Column id="MSTK_VAL" type="string" size="32"/>
          <Column id="ALL_CODE_NM" type="string" size="32"/>
          <Column id="CODE_NM" type="string" size="32"/>
          <Column id="INT_VAL" type="string" size="32"/>
          <Column id="GRP_CODE" type="string" size="32"/>
          <Column id="CODE" type="string" size="32"/>
          <Column id="VAL0" type="string" size="32"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_ctr049" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="ETC1" type="string" size="32"/>
          <Column id="VAL2" type="string" size="32"/>
          <Column id="CODE_CN" type="string" size="32"/>
          <Column id="VAL1" type="string" size="32"/>
          <Column id="USE_YN" type="string" size="32"/>
          <Column id="ETC3" type="string" size="32"/>
          <Column id="VAL4" type="string" size="32"/>
          <Column id="ETC2" type="string" size="32"/>
          <Column id="VAL3" type="string" size="32"/>
          <Column id="CODE_ORDR" type="bigdecimal" size="16"/>
          <Column id="MSTK_VAL" type="string" size="32"/>
          <Column id="ALL_CODE_NM" type="string" size="32"/>
          <Column id="CODE_NM" type="string" size="32"/>
          <Column id="INT_VAL" type="string" size="32"/>
          <Column id="GRP_CODE" type="string" size="32"/>
          <Column id="CODE" type="string" size="32"/>
          <Column id="VAL0" type="string" size="32"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_ctr040" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="ETC1" type="string" size="32"/>
          <Column id="VAL2" type="string" size="32"/>
          <Column id="CODE_CN" type="string" size="32"/>
          <Column id="VAL1" type="string" size="32"/>
          <Column id="USE_YN" type="string" size="32"/>
          <Column id="ETC3" type="string" size="32"/>
          <Column id="VAL4" type="string" size="32"/>
          <Column id="ETC2" type="string" size="32"/>
          <Column id="VAL3" type="string" size="32"/>
          <Column id="CODE_ORDR" type="bigdecimal" size="16"/>
          <Column id="MSTK_VAL" type="string" size="32"/>
          <Column id="ALL_CODE_NM" type="string" size="32"/>
          <Column id="CODE_NM" type="string" size="32"/>
          <Column id="INT_VAL" type="string" size="32"/>
          <Column id="GRP_CODE" type="string" size="32"/>
          <Column id="CODE" type="string" size="32"/>
          <Column id="VAL0" type="string" size="32"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_ctr042" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="ETC1" type="string" size="32"/>
          <Column id="VAL2" type="string" size="32"/>
          <Column id="CODE_CN" type="string" size="32"/>
          <Column id="VAL1" type="string" size="32"/>
          <Column id="USE_YN" type="string" size="32"/>
          <Column id="ETC3" type="string" size="32"/>
          <Column id="VAL4" type="string" size="32"/>
          <Column id="ETC2" type="string" size="32"/>
          <Column id="VAL3" type="string" size="32"/>
          <Column id="CODE_ORDR" type="bigdecimal" size="16"/>
          <Column id="MSTK_VAL" type="string" size="32"/>
          <Column id="ALL_CODE_NM" type="string" size="32"/>
          <Column id="CODE_NM" type="string" size="32"/>
          <Column id="INT_VAL" type="string" size="32"/>
          <Column id="GRP_CODE" type="string" size="32"/>
          <Column id="CODE" type="string" size="32"/>
          <Column id="VAL0" type="string" size="32"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_cntrctDecsnDetail" useclientlayout="true">
        <ColumnInfo>
          <Column id="DECSN_CHK" type="STRING" size="256"/>
          <Column id="CNTRCT_NO" type="STRING" size="256"/>
          <Column id="CNTRCT_DECSN_YEAR" type="STRING" size="256"/>
          <Column id="CNTRCT_DECSN_SN" type="STRING" size="256"/>
          <Column id="DETAIL_SN" type="STRING" size="256"/>
          <Column id="ENTRPS_SE_NM" type="STRING" size="256"/>
          <Column id="MNGT_AT" type="STRING" size="256"/>
          <Column id="MNGT_AT_NM" type="STRING" size="256"/>
          <Column id="QOTA_RT" type="STRING" size="256"/>
          <Column id="BCNC_CODE" type="STRING" size="256"/>
          <Column id="BCNC_NM" type="STRING" size="256"/>
          <Column id="BCNC_NM2" type="STRING" size="256"/>
          <Column id="ORGINL_OUTSRC_BCNC_CODE" type="STRING" size="256"/>
          <Column id="ORGINL_OUTSRC_BCNC_NM" type="STRING" size="256"/>
          <Column id="PYMNT_FNNC_INSTT_CODE" type="STRING" size="256"/>
          <Column id="PYMNT_FNNC_INSTT_NM" type="STRING" size="256"/>
          <Column id="PYMNT_DPSTR_NM" type="STRING" size="256"/>
          <Column id="PYMNT_ACNUTNO" type="STRING" size="256"/>
          <Column id="DECSN_AMOUNT" type="BIGDECIMAL" size="256"/>
          <Column id="SUPLY_AMOUNT" type="BIGDECIMAL" size="256"/>
          <Column id="VAT" type="BIGDECIMAL" size="256"/>
          <Column id="ISSU_SEQNO" type="STRING" size="256"/>
          <Column id="BILL_TYPE" type="STRING" size="256"/>
          <Column id="BILL_KND" type="STRING" size="256"/>
          <Column id="TAX_TYPE" type="STRING" size="256"/>
          <Column id="POPS_CODE" type="STRING" size="256"/>
          <Column id="ISSU_ID" type="STRING" size="256"/>
          <Column id="ADRES" type="STRING" size="256"/>
          <Column id="ENTRPRS_SE" type="STRING" size="256"/>
          <Column id="EVRFRND" type="STRING" size="256"/>
          <Column id="TCNDVLP" type="STRING" size="256"/>
          <Column id="CNTRWK_PRPOS_MTRIL" type="STRING" size="256"/>
          <Column id="AREA_ENTRPS" type="STRING" size="256"/>
          <Column id="FEMALE_ENTRPRS" type="STRING" size="256"/>
          <Column id="DSPSN" type="STRING" size="256"/>
          <Column id="SRSILL_DSPSN" type="STRING" size="256"/>
          <Column id="SOCTY_ENTRPRS" type="STRING" size="256"/>
          <Column id="DSPSN_PRDCTN_FCLTY" type="STRING" size="256"/>
          <Column id="SOCTY_CPER_MXTR" type="STRING" size="256"/>
          <Column id="GREEN_PRDUCT" type="STRING" size="256"/>
          <Column id="DSPSN_STD_BPLC" type="STRING" size="256"/>
          <Column id="WATER_INDUST" type="STRING" size="256"/>
          <Column id="MDLC_INDUST" type="STRING" size="256"/>
          <Column id="FARMNG_INDUST" type="STRING" size="256"/>
          <Column id="ENERGY_INDUST" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_acc030" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false" onrowposchanged="ds_frmtnPd_onrowposchanged">
        <ColumnInfo>
          <Column id="ETC1" type="string" size="32"/>
          <Column id="VAL2" type="string" size="32"/>
          <Column id="CODE_CN" type="string" size="32"/>
          <Column id="VAL1" type="string" size="32"/>
          <Column id="USE_YN" type="string" size="32"/>
          <Column id="ETC3" type="string" size="32"/>
          <Column id="VAL4" type="string" size="32"/>
          <Column id="ETC2" type="string" size="32"/>
          <Column id="VAL3" type="string" size="32"/>
          <Column id="CODE_ORDR" type="bigdecimal" size="16"/>
          <Column id="MSTK_VAL" type="string" size="32"/>
          <Column id="ALL_CODE_NM" type="string" size="32"/>
          <Column id="CODE_NM" type="string" size="32"/>
          <Column id="INT_VAL" type="string" size="32"/>
          <Column id="GRP_CODE" type="string" size="32"/>
          <Column id="CODE" type="string" size="32"/>
          <Column id="VAL0" type="string" size="32"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_acc038">
        <ColumnInfo>
          <Column id="CODE" type="STRING" size="256"/>
          <Column id="CODE_NM" type="STRING" size="256"/>
        </ColumnInfo>
        <Rows>
          <Row>
            <Col id="CODE">01</Col>
            <Col id="CODE_NM">기재사항의 착오·정정</Col>
          </Row>
          <Row>
            <Col id="CODE">02</Col>
            <Col id="CODE_NM">공급가액 변동</Col>
          </Row>
          <Row>
            <Col id="CODE">03</Col>
            <Col id="CODE_NM">환입</Col>
          </Row>
          <Row>
            <Col id="CODE">04</Col>
            <Col id="CODE_NM">계약의 해제</Col>
          </Row>
          <Row>
            <Col id="CODE">05</Col>
            <Col id="CODE_NM">내국신용장 사후 개설</Col>
          </Row>
          <Row>
            <Col id="CODE">06</Col>
            <Col id="CODE_NM">착오에 의한 이중발급</Col>
          </Row>
        </Rows>
      </Dataset>
      <Dataset id="ds_fileList" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="CHK" type="STRING" size="256"/>
          <Column id="PROGRS" type="BIGDECIMAL" size="16"/>
          <Column id="ORGINL_FILE_NM" type="string" size="32"/>
          <Column id="FILE_EXTSN" type="string" size="32"/>
          <Column id="FILE_STRE_COURS" type="string" size="32"/>
          <Column id="FILE_ID" type="string" size="32"/>
          <Column id="SN" type="bigdecimal" size="16"/>
          <Column id="SYS_SE_CODE" type="string" size="32"/>
          <Column id="FILE_IMAGE" type="string" size="32"/>
          <Column id="FILE_TY" type="string" size="32"/>
          <Column id="JOB_SE" type="string" size="32"/>
          <Column id="DELETE_IMAGE" type="string" size="32"/>
          <Column id="STRE_FILE_NM" type="string" size="32"/>
          <Column id="FILE_MG" type="bigdecimal" size="16"/>
          <Column id="FILE_CN" type="string" size="32"/>
          <Column id="FILE_ORDR" type="bigdecimal" size="16"/>
          <Column id="TRNSMIS_FILE_SIZE" type="string" size="32"/>
          <Column id="USE_AT" type="string" size="32"/>
          <Column id="STTUS" type="string" size="32"/>
          <Column id="FILE_SN" type="bigdecimal" size="16"/>
          <Column id="NEW_FILE_ORDR" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_copyFileList" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="FILE_SN" type="BIGDECIMAL" size="16"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_accFileList" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="CHK" type="STRING" size="256"/>
          <Column id="PROGRS" type="BIGDECIMAL" size="16"/>
          <Column id="ORGINL_FILE_NM" type="string" size="32"/>
          <Column id="FILE_EXTSN" type="string" size="32"/>
          <Column id="FILE_STRE_COURS" type="string" size="32"/>
          <Column id="FILE_ID" type="string" size="32"/>
          <Column id="SN" type="bigdecimal" size="16"/>
          <Column id="SYS_SE_CODE" type="string" size="32"/>
          <Column id="FILE_IMAGE" type="string" size="32"/>
          <Column id="FILE_TY" type="string" size="32"/>
          <Column id="JOB_SE" type="string" size="32"/>
          <Column id="DELETE_IMAGE" type="string" size="32"/>
          <Column id="STRE_FILE_NM" type="string" size="32"/>
          <Column id="FILE_MG" type="bigdecimal" size="16"/>
          <Column id="FILE_CN" type="string" size="32"/>
          <Column id="FILE_ORDR" type="bigdecimal" size="16"/>
          <Column id="TRNSMIS_FILE_SIZE" type="string" size="32"/>
          <Column id="USE_AT" type="string" size="32"/>
          <Column id="STTUS" type="string" size="32"/>
          <Column id="FILE_SN" type="bigdecimal" size="16"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_cond_file">
        <ColumnInfo>
          <Column id="FILE_SN" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_cond_decsn_del">
        <ColumnInfo>
          <Column id="DECSN_YEAR" type="STRING" size="256"/>
          <Column id="DECSN_NO" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
    </Objects>
    <Script type="xscript5.0"><![CDATA[/**********************************************************************
* 화면ID   : CTR030600.xfdl
* 화면명   : 계약대가지급
* 화면설명 : 계약대가지급을 관리한다
* 작성일   : 2017.08.04
* 작성자   : 김형태
* 수정이력 : 
***********************************************************************
*     수정일     수정자   내용
***********************************************************************
*
***********************************************************************
*/



/**********************************************************************
* Script Include 
***********************************************************************/
// 시스템 공통 라이브러리 Include
include "lib::comInclude.xjs";
include "mis_lib::misUtil.xjs";
include "lib::comUpDownUtils.xjs";

/**********************************************************************
* 화면 변수 선언부
***********************************************************************/
this.saveRow = -1;
this.fSaveRow = -1;
this.infrmlCntrctAt = 0;	// 간이계약여부
this.File_UpDownManager = null;

/**********************************************************************
* onInit / onLoad 영역
***********************************************************************/

this.CTR030600_oninit = function(obj:Form, e:nexacro.InitEventInfo)
{
	// ..
}

this.CTR030600_onload = function(obj:Form, e:nexacro.LoadEventInfo)
{
	// form 초기화
	this.fn_init_form();

	// dataset 초기화
	this.fn_init_dataset();
	
	this.sta_blind.set_top(67);
	this.sta_blind.set_bottom(0);
	this.sta_blind.set_left(510);
	this.sta_blind.set_right(28);
	this.sta_blind.set_visible(true);
	
	// 초기 검색조건
	this.ds_cond.clearData();
	var nRow = this.ds_cond.addRow();
 	this.ds_cond.setColumn(nRow, "CNTRCT_YEAR", this.comUtils.getClientDate("YYYY"));	// 당해년도
	// 공통코드
	var comboParams = [
	    ["ds_ctr039", "CTR039", "Y", "D", "B"]	// ds_ctr039 : 검사구분(기성구분)
	   ,["ds_ctr047", "CTR047", "Y", "D", "B"]	// ds_ctr047 : 계산서종류
	   ,["ds_ctr048", "CTR048", "Y", "D", "B"]	// ds_ctr048 : 매칭구분
	   ,["ds_ctr022", "CTR022", "Y", "D", "B"]	// ds_ctr022 : 계약구분
	   ,["ds_ctr023", "CTR023", "Y", "D", "B"]	// ds_ctr023 : 계약종류
	   ,["ds_ctr049", "CTR049", "Y", "D", "B"]	// ds_ctr049 : 계약방법
	   ,["ds_ctr040", "CTR040", "Y", "D", "B"]	// ds_ctr040 : 도급방법
	   ,["ds_ctr042", "CTR042", "Y", "D", "B"]	// ds_ctr042 : 계약성질
	   ,["ds_acc030", "ACC030", "Y", "A", "B"]	// 계산서종류
	   ,["ds_acc038", "ACC038", "Y", "A", "B"]	// 청구/영구
	];
	var callback = function (svcId, errorCode, errorMsg) {
		// 금융기관목록 조회
		this.ds_fnncInsttList.clearData();
		this.fn_transaction("selectFnncInsttList");
	};
	this.gfn_comboLoad (comboParams, callback);
}



/**********************************************************************
* Form/Dataset 오브젝트 초기화
***********************************************************************/

/*
 * 함수명  	: initForm
 * 설명 		: Form을 초기화한다.
 * params  		: None
 * return Type 	: None
 * 사용법		: this.initForm();
 */
this.fn_init_form = function()
{
	this.gfn_initForm(this);
	this.fn_misFormInit(this);
}


/*
 * 함수명  	: initDataset
 * 설명 		: Dataset을 초기화한다
 * params  		: None
 * return Type 	: None
 * 사용법		: this.initDataset();
 */
this.fn_init_dataset = function()
{
	// 파일 메니저 설정
	var fileConfig = {
		useMultiUpload : true,
		onChange: this.fn_onFileSelected,	// 파일 선택 이벤트 핸들러
		onSuccess : this.fn_onFileSuccess	// 전송 성공 이벤트 핸들러
		//responseGrid : this.div_multiFile.grd_fileList,
		//responseArea : this.div_multiFile.sta_helpMessage
	};
	this.File_UpDownManager = new this.fileUpDownManager(this, "MIS", "CTR");
	this.File_UpDownManager.init(fileConfig);
}



/**********************************************************************
* Transaction 영역 시작
***********************************************************************
*
* 1. Transaction 관련 이벤트 핸들러
* 2. call Transaction 영역
* 3. callback 영역(Transaction, Popup)
* 
***********************************************************************/



/**********************************************************************
* Transaction 관련 이벤트 핸들러 
***********************************************************************/

/*
 * 함수명  	: fn_search
 * 설명 		: 조회 이벤트 처리(검사입회목록)
 * params  		: None
 * return Type 	: None
 * 사용법		: this.fn_search();
 */
this.fn_search = function()
{	
	// clear Datasets
	this.ds_cntrctDecsnDetail.clearData();
	this.ds_cntrctDecsnInfo.clearData();
	this.ds_fileList2.clearData();
	this.ds_fileList.clearData();
	this.ds_cntrct.clearData();
	
	this.ds_prsecWtnessList.clearData();
	
	// transaction
	this.fn_transaction("selectPrsecWtnessList");
}


/*
 * 함수명  	: fn_searchSub
 * 설명 		: 조회 이벤트 처리(계약결의정보)
 * params  		: None
 * return Type 	: None
 * 사용법		: this.fn_searchSub();
 */
this.fn_searchSub = function()
{
	// clear Datasets
	this.ds_cntrctDecsnDetail.clearData();
	this.ds_cntrctDecsnInfo.clearData();
	this.ds_fileList2.clearData();
	this.ds_fileList.clearData();
	this.ds_cntrct.clearData();
	
	// transaction
	this.fn_transaction("selectCntrctDecsnInfo");
}


/*
 * 함수명  	: fn_save
 * 설명 		: 저장 이벤트 처리(계약결의정보)
 * params  		: None
 * return Type 	: None
 * 사용법		: this.fn_save();
 */
this.fn_save = function()
{
	// 데이터셋 수정 여부체크
	if (!this.comUtils.isDatasetUpdated(this.ds_cntrctDecsnInfo) && !this.comUtils.isDatasetUpdated(this.ds_cntrctDecsnDetail)) {
		this.gfn_message("comm.데이터.변경.없음");
		return false;
	}
	
	// validation 체크(계약결의정보)
	if(!this.gfn_checkValidation_NoUpdChk(this.ds_cntrctDecsnInfo, this.ds_validation)) {
		return;
	}
	
	// validation 체크(계약결의상세)
	if(!this.gfn_checkValidation_NoUpdChk(this.ds_cntrctDecsnDetail, this.ds_validation)) {
		return;
	}
	
	if(this.gfn_message("confirm.저장.여부")) {
		this.saveRow = this.ds_prsecWtnessList.rowposition;
		this.fn_transaction("save");
	}
}


/**********************************************************************
* call Transaction 영역
***********************************************************************/

/*
 * 함수명  	: fn_transaction
 * 설명 		: Transaction 요청 처리 함수
 * params  		: strSvcId : 서비스요청 ID
 * return Type 	: None
 * 사용법		: this.fn_transaction("SELECT");
 */
this.fn_transaction = function(strSvcId)
{
	switch (strSvcId) {
		case "selectFnncInsttList":			// 금융기관목록 조회
			var sController   	= "/hsco/mis/ctr/CTR030600/selectFnncInsttList.do";
			var sInDatasets   	= "";
			var sOutDatasets  	= "ds_fnncInsttList=output1";
			break;
		case "selectPrsecWtnessList":		// 검사입회목록 조회
			var sController   	= "/hsco/mis/ctr/CTR030600/selectPrsecWtnessList.do";
			var sInDatasets   	= "input1=ds_cond";
			var sOutDatasets  	= "ds_prsecWtnessList=output1";
			break;
		case "selectCntrctDecsnInfo":		// 계약결의정보 조회
			var sController   	= "/hsco/mis/ctr/CTR030600/selectCntrctDecsnInfo.do";
			var sInDatasets   	= "input1=ds_condSub";
			var sOutDatasets  	= "ds_cntrctDecsnInfo=output1 ds_cntrct=output3 ds_cntrctDecsnDetail=output4 ds_fileList=output5 ds_fileList2=output6";
			break;
		case "save":						// 저장
			var sController   	= "/hsco/mis/ctr/CTR030600/save.do";
			var sInDatasets   	= "input1=ds_cntrctDecsnInfo:U input2=ds_cntrctDecsnDetail:U";
			var sOutDatasets  	= "";
			break;
		case "updateAtchmnFileOrdr":		// 첨부파일 순서변경
			var sController   	= "/hsco/cmm/file/updateAtchmnFileOrdr.do";
			var sInDatasets   	= "input1=ds_fileList:U input2=ds_cond_file";
			var sOutDatasets  	= "ds_fileList=output1";
			break;
		case "expDsnD":					// 결의서 삭제
			var sController   	= "/hsco/mis/ctr/CTR030600/expDsnD.do";
			var sInDatasets   	= "input2=ds_cond_decsn_del";
			var sOutDatasets  	= "";
			break;
	}

	Ex.core.tran(this, strSvcId, sController, sInDatasets, sOutDatasets); 
}



/**********************************************************************
* Transaction Callback 영역
***********************************************************************/

 /*
 * 함수명  	: fn_callBack
 * 설명 		: Transaction Callback 처리
 * params  		: strSvcId    : 서비스요청 ID
 *                nErrorCode  : 오류 메시지 코드 ([예] 0 : Success, 그밖의 경우, error)
 *                strErrorMsg : 오류 메시지([예]  success.insert|정상적으로 등록되었습니다.)
 * return Type 	: None
 * 사용법		: 
 */
this.fn_callBack = function (strSvcId, nErrorCode, strErrorMsg)
{
	if(nErrorCode != '0') {
		this.gfn_callback_message(strSvcId, nErrorCode, strErrorMsg);
	}
	
	if (nErrorCode == '0'){
		switch (strSvcId) {
			case "selectFnncInsttList":		// 금융기관목록 조회
				this.fn_search();
				break;
			case "selectPrsecWtnessList":	// 검사입회목록 조회
				if(this.saveRow > -1){
					this.ds_prsecWtnessList.set_rowposition(this.saveRow);
					this.saveRow = -1;
				}
				break;
			case "selectCntrctDecsnInfo":	// 계약결의정보 조회
				this.ds_fileList.filter("USE_AT == '1'");
				this.ds_fileList2.filter("USE_AT == '1'");
				break;
			case "save":					// 저장
				this.gfn_message("success.처리.성공");
				this.fn_search();
				break;
			case "updateAtchmnFileOrdr":	// 첨부파일 순서변경
				if(this.fSaveRow > -1) {	// 대가지급
					this.ds_fileList.set_rowposition(this.fSaveRow);
				}
				break;
			case "expDsnD":					// 결의서 삭제
				this.gfn_message("success.처리.성공");
				this.fn_transaction("selectCntrctDecsnInfo");
				break;
		}
	}
}


/*
 * 함수명  	: fn_popupCallBack
 * 설명 		: Popup Callback 처리
 * params  		: sPopupId    : 팝업 ID
 *                sReturn  : 팝업 처리 결과(dataset.saveXML())
 * return Type 	: None
 * 사용법		: 
 */
this.fn_popupCallBack = function(sPopupId, sReturn)
{
	// 계약번호 선택(검색조건)
	if(sPopupId == "btn_cntrctPopup") {
		var dsTemp = new Dataset();
		var loadCnt = dsTemp.loadXML(sReturn);
		if(loadCnt) {
			var cntrctNo = dsTemp.getColumn(0, "CNTRCT_NO");
			var cntrctNm = dsTemp.getColumn(0, "CNTRCT_NM");
			var cntrctYr = cntrctNo.substr(0,4);
			
			this.ds_cond.setColumn(0, "CNTRCT_YEAR", cntrctYr);	// 계약년도
			this.ds_cond.setColumn(0, "CNTRCT_NO",   cntrctNo);	// 계약번호
			this.ds_cond.setColumn(0, "CNTRCT_NM",   cntrctNm);	// 계약명
			this.fn_search();
		}
	}
	
	// 세금계산서
	if(sPopupId == "CTR030600_P02") {
		var dsTemp = new Dataset();
		var loadCnt = dsTemp.loadXML(sReturn);
		if(loadCnt) {
			var issuSeqno = dsTemp.getColumn(0, "ISSU_SEQNO");	// 세금계산서 일련번호
			var totlAmt   = dsTemp.getColumn(0, "TOTL_AMT"  );
			var chrgAmt   = dsTemp.getColumn(0, "CHRG_AMT"  );
			var taxAmt    = dsTemp.getColumn(0, "TAX_AMT"   );
			
			var billType  = dsTemp.getColumn(0, "BILL_TYPE" );
			var billKnd   = dsTemp.getColumn(0, "BILL_KND"  );
			var taxType   = dsTemp.getColumn(0, "TAX_TYPE"  );
			var popsCode  = dsTemp.getColumn(0, "POPS_CODE" );
			var issuId    = dsTemp.getColumn(0, "ISSU_ID"   );
			
			var cRow = this.ds_cntrctDecsnDetail.rowposition
			this.ds_cntrctDecsnDetail.setColumn(cRow, "ISSU_SEQNO",   issuSeqno);	// 세금계산서 일련번호
			this.ds_cntrctDecsnDetail.setColumn(cRow, "DECSN_AMOUNT", totlAmt);
			this.ds_cntrctDecsnDetail.setColumn(cRow, "SUPLY_AMOUNT", chrgAmt);
			this.ds_cntrctDecsnDetail.setColumn(cRow, "VAT",          taxAmt);
			
			this.ds_cntrctDecsnDetail.setColumn(cRow, "BILL_TYPE",    billType);
			this.ds_cntrctDecsnDetail.setColumn(cRow, "BILL_KND",     billKnd);
			this.ds_cntrctDecsnDetail.setColumn(cRow, "TAX_TYPE",     taxType);
			this.ds_cntrctDecsnDetail.setColumn(cRow, "POPS_CODE",    popsCode);
			this.ds_cntrctDecsnDetail.setColumn(cRow, "ISSU_ID",      issuId);
		}
	}
	
	// 원인행위번호
	if(sPopupId == "btn_actPopup") {
		var dsTemp = new Dataset();
		var loadCnt = dsTemp.loadXML(sReturn);
		if(loadCnt) {
			var causeActionNo = dsTemp.getColumn(0, "CAUSE_ACTION_NO");	// 원인행위번호
			
			this.ds_cntrctDecsnInfo.setColumn(0, "CAUSE_ACTION_NO", causeActionNo);	// 원인행위번호
		}
	}
	
	// 지출계좌
	if(sPopupId == "btn_expndtrPopup") {
		var dsTemp = new Dataset();
		var loadCnt = dsTemp.loadXML(sReturn);
		if(loadCnt) {
			var acnutNo  = dsTemp.getColumn(0, "ACNUTNO");		// 계좌번호
			var bankCode = dsTemp.getColumn(0, "BANK_CODE");	// 은행코드
			
			this.ds_cntrctDecsnInfo.setColumn(0, "EXPNDTR_ACNUTNO"        , acnutNo);	// 지출계좌번호
			this.ds_cntrctDecsnInfo.setColumn(0, "EXPNDTR_FNNC_INSTT_CODE", bankCode);	// 지출금융기관코드
		}
	}
	
	// 계약업체
	if(sPopupId == "btn_bcncCode") {
		var dsTemp = new Dataset();
		var loadCnt = dsTemp.loadXML(sReturn);
		if(loadCnt) {
			var bcncCode = dsTemp.getColumn(0, "BCNC_CODE");		// 거래코드
			var bcncNm   = dsTemp.getColumn(0, "BCNC_NM");			// 거래처명
			
			this.ds_cntrctDecsnInfo.setColumn(0, "BCNC_CODE", bcncCode);	// 거래코드
			this.ds_cntrctDecsnInfo.setColumn(0, "BCNC_NM"  , bcncNm);		// 거래처명
		}
	}
	
	// 지급계좌
	if(sPopupId == "btn_pymntAcnutNo") {
		var dsTemp = new Dataset();
		var loadCnt = dsTemp.loadXML(sReturn);
		if(loadCnt) {
			var bankCode = dsTemp.getColumn(0, "BANK_CODE");		// 은행코드
			var acnutno  = dsTemp.getColumn(0, "ACNUTNO");			// 계좌번호
			
			this.ds_cntrctDecsnInfo.setColumn(0, "PYMNT_ACNUTNO"        , acnutno);		// 지급계좌번호
			this.ds_cntrctDecsnInfo.setColumn(0, "PYMNT_FNNC_INSTT_CODE", bankCode);	// 지급금융기관코드
		}
	}
	
	// 대가지급
	if(sPopupId == "expDsnPopup") {
		this.fn_searchSub();
	}
}



/**********************************************************************
* Transaction 영역 끝
***********************************************************************/



/**********************************************************************
* non-Transaction 관련 컴포넌트 이벤트 처리 함수
***********************************************************************
*
* 1. Dataset 관련 이벤트 처리
* 2. Button 관련 이벤트 처리
* 3. 공통함수 처리
* 4. 첨부파일버튼 관련 이벤트 처리
* 
***********************************************************************/



/**********************************************************************
* Dataset 관련 이벤트 처리
***********************************************************************/

/*
 * 함수명  	: ds_prsecWtnessList_onrowposchanged
 * 설명 		: Dataset 행 변경 후 이벤트 처리(검사입회목록 dataset)
 * params  		: None
 * return Type 	: None
 * 사용법		: this.ds_prsecWtnessList_onrowposchanged(obj,e);
 */
this.ds_prsecWtnessList_onrowposchanged = function(obj:Dataset, e:nexacro.DSRowPosChangeEventInfo)
{
	var objCnt = obj.getRowCount();
	if(objCnt > 0) {
		this.btn_AD.set_visible(true);
		this.btn_Cancel.set_visible(true);
		//this.btn_downFiles.set_visible(true);
	} else {
		this.btn_AD.set_visible(false);
		this.btn_Cancel.set_visible(false);
		//this.btn_downFiles.set_visible(false);
	}
	this.btn_decsn.set_visible(false);
	
	// 서브 조회(계약결의정보)
	if(e.newrow > -1) {
		this.ds_condSub.clearData();
		var nRow = this.ds_condSub.addRow();
		var cntrctNo = obj.getColumn(e.newrow, "CNTRCT_NO");
		var wtnessSn = obj.getColumn(e.newrow, "WTNESS_SN");
		var fileSn   = obj.getColumn(e.newrow, "FILE_SN");
		
		this.ds_condSub.setColumn(nRow, "CNTRCT_NO", cntrctNo);
		this.ds_condSub.setColumn(nRow, "WTNESS_SN", wtnessSn);
		this.ds_condSub.setColumn(nRow, "FILE_SN2" , fileSn);
		
		this.fn_searchSub();
	}
}


/*
 * 함수명  	: ds_cntrctDecsnInfo_onrowposchanged
 * 설명 		: Dataset 행 변경 후 이벤트 처리(계약대가결의 dataset)
 * params  		: None
 * return Type 	: None
 * 사용법		: this.ds_cntrctDecsnInfo_onrowposchanged(obj,e);
 */
this.ds_cntrctDecsnInfo_onrowposchanged = function(obj:Dataset, e:nexacro.DSRowPosChangeEventInfo)
{
	var objCnt = obj.getRowCount();
	if(objCnt > 0) {
		this.btn_AD.set_cssclass("btn_WF_Griddel");
		this.btn_AD.set_text("결의정보 삭제");
		
		this.sta_blind.set_visible(false);
		
		// 지출결의서등록 버튼 활성화 조건
		var expDecsnAt = obj.getColumn(e.newrow, "EXP_DECSN_AT");
		var expndtrCnfirmAt = obj.getColumn(e.newrow, "EXPNDTR_CNFIRM_AT");
		if(!this.comUtils.isNull(expDecsnAt)) {
			this.btn_decsn.set_visible(true);
		
			// 지출결의서 삭제버튼
			if(expDecsnAt == '1') {
				//this.btn_delDecsn.set_visible(true);
				
				// 승인받은 지출결의서 disenable
				if(expndtrCnfirmAt == '1') {
					this.btn_delDecsn.set_enable(false);
				}else {
					this.btn_delDecsn.set_enable(true);
				}
				
			}else {
				//this.btn_delDecsn.set_visible(false);
			}
		}
	} else {
		this.btn_AD.set_cssclass("btn_WF_Gridadd");
		this.btn_AD.set_text("결의정보 추가");
		
		this.sta_blind.set_visible(true);
	}
}



/**********************************************************************
* Button 관련 이벤트 처리
***********************************************************************/


/*
 * 함수명  	: btn_AD_onclick
 * 설명 		: '결의정보 (추가/삭제)' 버튼 클릭 후 이벤트 처리
 * params  		: None
 * return Type 	: None
 * 사용법		: this.btn_AD_onclick(obj,e);
 */
this.btn_AD_onclick = function(obj:Button,  e:nexacro.ClickEventInfo)
{
	if(obj.cssclass == "btn_WF_Gridadd") {
		this.ds_cntrctDecsnInfo.clearData();
		
		var pRow = this.ds_prsecWtnessList.rowposition;
		var cntrctNo        = this.ds_prsecWtnessList.getColumn(pRow, "CNTRCT_NO");
		var wtnessSn        = this.ds_prsecWtnessList.getColumn(pRow, "WTNESS_SN");
		var prsecDe         = this.ds_prsecWtnessList.getColumn(pRow, "PRSEC_DE");
		
		// 2020.10.20 검사일자의 년도를 바라볼 시 결의년도와 계약년도가 맞지 않아 조회되지 않는 경우 발생하여 수정
		var cntrctDecsnYear = this.ds_cond.getColumn(0, "CNTRCT_YEAR");
		//var cntrctDecsnYear = prsecDe.substr(0, 4);
		
		var prsecSe         = this.ds_prsecWtnessList.getColumn(pRow, "PRSEC_SE");
		var prsecSeNm       = this.ds_prsecWtnessList.getColumn(pRow, "PRSEC_SE_NM");
		var prsecOdr        = this.ds_prsecWtnessList.getColumn(pRow, "PRSEC_ODR");
		var cntrctNm        = this.ds_prsecWtnessList.getColumn(pRow, "CNTRCT_NM");
		var pxpayAt         = this.ds_prsecWtnessList.getColumn(pRow, "PXPAY_AT");
		var sumry           = prsecSeNm + " " + prsecOdr + "차 " + cntrctNm;
		
		var cntrctSe        = this.ds_cntrct.getColumn(0, "CNTRCT_SE");
		var anactKnd        = cntrctSe == '1' ? '06' : (cntrctSe == '3' ? '02' : '03');
		
		var aRow = this.ds_cntrctDecsnInfo.addRow();
		this.ds_cntrctDecsnInfo.setColumn(aRow, "ENABLE_AT"        , '1');
		this.ds_cntrctDecsnInfo.setColumn(aRow, "EXP_DECSN_AT"     , '0');
		this.ds_cntrctDecsnInfo.setColumn(aRow, "CNTRCT_DECSN_YEAR", cntrctDecsnYear);
		this.ds_cntrctDecsnInfo.setColumn(aRow, "CNTRCT_NO"        , cntrctNo);
		this.ds_cntrctDecsnInfo.setColumn(aRow, "WTNESS_SN"        , wtnessSn);
		this.ds_cntrctDecsnInfo.setColumn(aRow, "PXCOND_SE"        , prsecSe);
		this.ds_cntrctDecsnInfo.setColumn(aRow, "PXCOND_ODR"       , prsecOdr);
		this.ds_cntrctDecsnInfo.setColumn(aRow, "SUMRY"            , sumry);
		this.ds_cntrctDecsnInfo.setColumn(aRow, "PXPAY_AT"         , pxpayAt);
		this.ds_cntrctDecsnInfo.setColumn(aRow, "ANACT_KND"        , anactKnd);
		
	} else if(obj.cssclass == "btn_WF_Griddel") {
		var cdRow = this.ds_cntrctDecsnInfo.rowposition;
		if(cdRow > -1 && this.ds_cntrctDecsnInfo.getColumn(cdRow, "EXP_DECSN_AT") == '1') {
			this.gfn_message("info.처리불가", "회계결의 정보가 존재합니다. 삭제할 수 없습니다.");
			return false;
		}
		
		if(this.gfn_message("confirm.삭제여부")) {
			this.ds_cntrctDecsnInfo.deleteRow(cdRow);
		}
	}
}


/*
 * 함수명  	: btn_Cancel_onclick
 * 설명 		: '초기화' 버튼 클릭 후 이벤트 처리
 * params  		: None
 * return Type 	: None
 * 사용법		: this.btn_Cancel_onclick(obj,e);
 */
this.btn_Cancel_onclick = function(obj:Button,  e:nexacro.ClickEventInfo)
{
	if(Ex.util.isUpdated(this.ds_cntrctDecsnInfo)) {
		if(!this.gfn_message("confirm.변경.취소.여부")) {
			return false;	// 아니오
		}
		this.ds_cntrctDecsnInfo.reset();
		this.ds_cntrctDecsnInfo.applyChange();
	}
}


/*
 * 함수명  	: fn_popup_onclick
 * 설명 		: '팝업' 버튼 클릭 후 이벤트 처리
 * params  		: None
 * return Type 	: None
 * 사용법		: this.fn_popup_onclick(obj,e);
 */
this.fn_popup_onclick = function(obj:Button,  e:nexacro.ClickEventInfo)
{
	switch(obj.name) {
		case "btn_cntrctPopup":		// 계약번호(조회조건)
			var parm = {
				 arg_0         : this
				,cntrctYear    : this.ds_cond.getColumn(0, "CNTRCT_YEAR")
				,cntrctDecsnAt : '1'	// 계약대가지급의 경우, 대상에 대한 필터링 진행
			};
			this.gfn_popup("btn_cntrctPopup", 800, 530, "", parm, "mis_ctr::CTR030100_P08.xfdl", "fn_popupCallBack", true);
			break;
		case "btn_actPopup":		// 원인행위번호
			var pRow = this.ds_prsecWtnessList.rowposition;
			var CAUSE_ACTION_NO = "";
			CAUSE_ACTION_NO     = this.comUtils.isNull(this.ds_cntrctDecsnInfo.getColumn(0, "CAUSE_ACTION_NO")) ? '' : this.ds_cntrctDecsnInfo.getColumn(0, "CAUSE_ACTION_NO");
			
			var param = {
				 arg_0				: this
				,anactKnd			: this.ds_cntrctDecsnInfo.getColumn(0, "ANACT_KND")
				,deptCode			: this.ds_prsecWtnessList.getColumn(pRow, "MNG_DEPT_CODE")
				,deptNm				: this.ds_prsecWtnessList.getColumn(pRow, "MNG_DEPT_NM")
				,BUDGET_ACNT_CODE	: this.ds_prsecWtnessList.getColumn(pRow, "BUDGET_ACNT_CODE")
				,EXPNDTR_UNIT_CODE	: ''
				,CAUSE_ACTION_NO	: CAUSE_ACTION_NO
				,CPTAL_CHRG_CONFM	: '0'	// 간이계약여부
			};
			this.gfn_popup("btn_actPopup", 600, 500, "원인행위정보", param, "mis_acc::ACC020203_P09.xfdl", "fn_popupCallBack", true);
			break;
		case "btn_expndtrPopup":	// 지출계좌
			var parm = {
				arg_0 : this
			};
			this.gfn_popup("btn_expndtrPopup", 563, 500, "브런치계좌조회", parm, "mis_fun::FUN010103_P01.xfdl", "fn_popupCallBack", true);
			break;
		case "btn_bcncCode":		// 계약업체 선택
			var parm = {
				 arg_0      : this
				,popMode  : "원도급"
				,bsnsCode : this.ds_cntrct.getColumn(0, "BSNS_CODE")
				,bsnsNm   : this.ds_cntrct.getColumn(0, "BSNS_NM")
				,cntrctNo : this.ds_cntrct.getColumn(0, "CNTRCT_NO")
				,cntrctNm : this.ds_cntrct.getColumn(0, "CNTRCT_NM")
			};
			this.gfn_popup("btn_bcncCode", 800, 530, "계약업체 선택", parm, "mis_ctr::CTR030100_P10.xfdl", "fn_popupCallBack", true);
			break;
		case "btn_pymntAcnutNo":		// 업체별계좌선택
			var bcncCode = this.ds_cntrctDecsnInfo.getColumn(0, "BCNC_CODE");
			if(this.comUtils.isNull(bcncCode)) {
				this.gfn_message("comm.항목.입력.을", "'계약업체'");
				return false;
			}
			var parm = {
				 arg_0      : this
				,bcncCode   : bcncCode
			};
			this.gfn_popup("btn_pymntAcnutNo", 620, 200, "업체별계좌 선택", parm, "mis_ctr::CTR010101_P03.xfdl", "fn_popupCallBack", true);
			break;
	}
}


/*
 * 함수명  	: btn_decsn_onclick
 * 설명 		: '지출결의서 등록/수정' 버튼 클릭 후 이벤트 처리
 * params  		: None
 * return Type 	: None
 * 사용법		: this.btn_decsn_onclick(obj,e);
 */
this.btn_decsn_onclick = function(obj:Button,  e:nexacro.ClickEventInfo)
{
	// 데이터셋 수정 여부체크
	if (this.comUtils.isDatasetUpdated(this.ds_cntrctDecsnInfo) || this.comUtils.isDatasetUpdated(this.ds_cntrctDecsnDetail)) {
		this.gfn_message("info.처리불가", "수정된 데이터가 존재합니다");
		return false;
	}
	
	var cdRow           = this.ds_cntrctDecsnInfo.rowposition;
	var cntrctDecsnYear = this.ds_cntrctDecsnInfo.getColumn(cdRow, "EXP_DECSN_YEAR");
	var expDecsnNo      = this.ds_cntrctDecsnInfo.getColumn(cdRow, "EXP_DECSN_NO");
	var anactKnd        = this.ds_cntrctDecsnInfo.getColumn(cdRow, "ANACT_KND");
	var regsDate        = this.ds_cntrctDecsnInfo.getColumn(cdRow, "REGS_DATE"); //세금계산서 발행일자 
	
	var pRow    = this.ds_prsecWtnessList.rowposition;
	var prsecDe = this.ds_prsecWtnessList.getColumn(pRow, "PRSEC_DE");
	
//	this.ds_copyFileList.clearData();
	this.ds_accFileList.clearData();
	
	var fileSn1 = this.ds_cntrctDecsnInfo.getColumn(0, "FILE_SN");
	if(!this.comUtils.isNull(fileSn1)) {		// 대가지급에서 입력한 파일
// 		var nRow1 = this.ds_copyFileList.addRow();
// 		this.ds_copyFileList.setColumn(nRow1, "FILE_SN", fileSn1);
		this.ds_accFileList.appendData(this.ds_fileList);
	}
	var fileSn2 = this.ds_prsecWtnessList.getColumn(pRow, "FILE_SN");
	if(!this.comUtils.isNull(fileSn2)) {		// 검사검수에서 입력한 파일
// 		var nRow2 = this.ds_copyFileList.addRow();
// 		this.ds_copyFileList.setColumn(nRow2, "FILE_SN", fileSn2);
		this.ds_accFileList.appendData(this.ds_fileList2);
	}
	
	var args = {
		 arg_0					: this
		,trgFormId				: "CTR030600"
		,trgFormId2				: "MIS"
		,anactKnd				: anactKnd
		,regsDate               : regsDate
		,decsnYear				: cntrctDecsnYear
		,decsnNo				: expDecsnNo
		,ds_cntrctDecsnInfo		: this.ds_cntrctDecsnInfo
		,ds_cntrctDecsnDetail	: this.ds_cntrctDecsnDetail
		,ds_cntrct				: this.ds_cntrct
		,prsecDe				: prsecDe
//		,ds_copyFileList		: this.ds_copyFileList
		,ds_accFileList			: this.ds_accFileList
    };
	this.gfn_popup("expDsnPopup", 903, 842, "결의서", args, "mis_ctr::CTR030600_P01.xfdl", "fn_popupCallBack", true);
}


/*
 * 함수명  	: btn_downFiles2_onclick
 * 설명 		: '선택다운로드' 버튼 클릭 후 이벤트 처리
 * params  		: None
 * return Type 	: None
 * 사용법		: this.btn_downFiles2_onclick(obj,e);
 */
this.btn_downFiles2_onclick = function(obj:Button,  e:nexacro.ClickEventInfo)
{
	var findRow = this.ds_fileList2.findRow("CHK", "1");
	if(findRow < 0) {
		this.gfn_message("comm.데이터.선택.없음");
			return;
	}
	
	for(var fRow = 0; fRow < this.ds_fileList2.getRowCount(); fRow++) {
		var fileSn    = this.ds_fileList2.getColumn(fRow, "FILE_SN");
		var fileOrder = this.ds_fileList2.getColumn(fRow, "FILE_ORDR");
		var fileName  = this.ds_fileList2.getColumn(fRow, "ORGINL_FILE_NM");
		var chk       = this.ds_fileList2.getColumn(fRow, "CHK");
		if(chk == '1') {
			this.File_UpDownManager.download(fileSn, fileOrder, fileName);
		}
	}
}


/*
 * 함수명  	: btn_downFiles_onclick
 * 설명 		: '선택다운로드' 버튼 클릭 후 이벤트 처리
 * params  		: None
 * return Type 	: None
 * 사용법		: this.btn_downFiles_onclick(obj,e);
 */
this.btn_downFiles_onclick = function(obj:Button,  e:nexacro.ClickEventInfo)
{
	var findRow = this.ds_fileList.findRow("CHK", "1");
	if(findRow < 0) {
		this.gfn_message("comm.데이터.선택.없음");
			return;
	}
	
	for(var fRow = 0; fRow < this.ds_fileList.getRowCount(); fRow++) {
		var fileSn    = this.ds_fileList.getColumn(fRow, "FILE_SN");
		var fileOrder = this.ds_fileList.getColumn(fRow, "FILE_ORDR");
		var fileName  = this.ds_fileList.getColumn(fRow, "ORGINL_FILE_NM");
		var chk       = this.ds_fileList.getColumn(fRow, "CHK");
		if(chk == '1') {
			this.File_UpDownManager.download(fileSn, fileOrder, fileName);
		}
	}
}


/*
 * 함수명  	: btn_delFiles_onclick
 * 설명 		: '선택삭제' 버튼 클릭 후 이벤트 처리
 * params  		: None
 * return Type 	: None
 * 사용법		: this.btn_delFiles_onclick(obj,e);
 */
this.btn_delFiles_onclick = function(obj:Button,  e:nexacro.ClickEventInfo)
{
	var findRow  = this.ds_fileList.findRow("CHK", "1");
	if(findRow < 0) {
		this.gfn_message("comm.데이터.선택.없음");
			return;
	}
	
	if(!this.gfn_message("confirm.선택파일.삭제여부", "들")){
		return false;
	}
	
	for(var fRow = this.ds_fileList.getRowCount()-1; fRow >= 0; fRow--) {
		var chkVal = this.ds_fileList.getColumn(fRow, "CHK");
		if(chkVal == '1') {
			this.ds_fileList.deleteRow(fRow);
		}
	}
	
	var strSvcId   	 = "deleteFile";
	var sController  = "hsco/cmm/file/deleteFile.do";
	var sInDatasets  = "input1=ds_fileList:U";
	var sOutDatasets = "ds_fileList=output1";
	
	Ex.core.tran(this, strSvcId, sController, sInDatasets, sOutDatasets); 
}


/*
 * 함수명  	: btn_uploadFiles_onclick
 * 설명 		: '파일업로드' 버튼 클릭 후 이벤트 처리
 * params  		: None
 * return Type 	: None
 * 사용법		: this.btn_uploadFiles_onclick(obj,e);
 */
this.btn_uploadFiles_onclick = function(obj:Button,  e:nexacro.ClickEventInfo)
{
	var nRow     = this.ds_cntrctDecsnInfo.rowposition;	
	if(nRow < 0){
		this.gfn_message("comm.항목.선택.요청","대상 정보(검사입회내역)");
		return;
	}
	
	// 첨부파일 업로드(fileSn 자동채번 / 첨부파일 Master에 ROW추가 / 파일 업로드 및 자동저장 / 테이블에 fileSn반영 / 데이터셋에 fileSn반영, 단 신규 ROW가 아닐경우 ROWTYPE은 유지)
	this.fn_autoFileSn(
		 "MIS"										// 대분류   (SYS_SE)
		,"CTR"										// 업무구분 (JOB_SE)
		, this.File_UpDownManager					// fileManager 오브젝트
		, this.ds_fileList							// fileObject
		, this.ds_cntrctDecsnInfo					// fileSn을 불러오거나 반영해야 하는 컬럼
		, "TBCTR_CNTRCT_DECSN"						// fileSn을 저장할 테이블
		, "FILE_SN"									// fileSn 컬럼명이 다를 경우를 대비
		, ["CNTRCT_DECSN_YEAR","CNTRCT_DECSN_SN"]	// fileSn을 저장할 테이블의 PK (FileSn 확인 및 자동반영목적)
	);
}
// 
// this.fn_uploadCallback = function(fileSn)
// {
// 	this.ds_condSub.setColumn(0, "FILE_SN", fileSn);
// 	this.ds_cntrctDecsnInfo.setColumn(0, "FILE_SN", fileSn);
// 	
// 	var strSvcId     = "selectAtchFile";
// 	var sController  = "/hsco/cmm/file/selectAtchmnFileList.do";
// 	var sInDatasets  = "input1=ds_condSub";
// 	var sOutDatasets = "ds_fileList=output1";
// 	
// 	Ex.core.tran(this, strSvcId, sController, sInDatasets, sOutDatasets);
// }



/***************************************
 * Grid 관련 이벤트 처리
****************************************/

/*
 * 함수명  	: file_upload_popup
 * 설명 		: 첨부파일 그리드 전체파일선택 ON/OFF 이벤트
 * params  		: None
 * return Type 	: None
 * 사용법		: this.file_upload_popup(obj,e);
 */
this.grd_cmmnAtchmnfl_onheadclick = function(obj:Grid, e:nexacro.GridClickEventInfo)
{
	if(e.col == 0) {
		this.gfn_setGridCheckAll(obj, e);
	}
}


/*
 * 함수명  	: grd_cmmnAtchmnfl_oncellclick
 * 설명 		: 첨부파일 그리드 Body의 체크 버튼이 눌러졌을 때, Head 부분의 체크 버튼을 꺼 줌.
 * params  		: None
 * return Type 	: None
 * 사용법		: this.grd_cmmnAtchmnfl_oncellclick(obj,e);
 */
this.grd_cmmnAtchmnfl_oncellclick = function(obj:Grid, e:nexacro.GridClickEventInfo)
{
	if(e.cell == 0) {
		obj.setCellProperty("Head", e.cell, "text", "0");
	}
	
	if(e.col == "5") {
		var nRow = this.ds_fileList.rowposition;
		var fcnt = this.ds_fileList.rowcount;
		if(nRow > 0) {
			var aRow = nRow-1;	// 추가될 행
			var dRow = nRow+1;	// 삭제될 행
			
			var fileSn = this.ds_fileList.getColumn(aRow, "NEW_FILE_ORDR");
			var nfileSn = this.ds_fileList.getColumn(nRow, "NEW_FILE_ORDR");
			
			this.ds_fileList.insertRow(aRow);
			this.ds_fileList.copyRow(aRow, this.ds_fileList, dRow);
			this.ds_fileList.deleteRow(dRow);

			this.ds_fileList.setColumn(aRow, "NEW_FILE_ORDR", fileSn);
			this.ds_fileList.setColumn(nRow, "NEW_FILE_ORDR", nfileSn);
			
			// 파일 순서 변경 위한 데이터셋
			var fileSn = this.ds_cntrctDecsnInfo.getColumn(this.ds_cntrctDecsnInfo.rowposition, "FILE_SN");
			
			this.ds_cond_file.clearData();
			this.ds_cond_file.addRow();
			this.ds_cond_file.setColumn(0, "FILE_SN", fileSn);
			
			this.fSaveRow = aRow;
			this.fn_transaction("updateAtchmnFileOrdr");
		}
		
	}
	if(e.col == "6") {
		var nRow = this.ds_fileList.rowposition;
		var fcnt = this.ds_fileList.rowcount;
		if((nRow+1) != fcnt) {	
			var aRow = nRow+2;	// 추가될 행
			var dRow = nRow;	// 삭제될 행
			
			var nfileSn = this.ds_fileList.getColumn(nRow, "NEW_FILE_ORDR");
			var fileSn = this.ds_fileList.getColumn(nRow+1, "NEW_FILE_ORDR");
						
			this.ds_fileList.insertRow(aRow);
			this.ds_fileList.copyRow(aRow, this.ds_fileList, dRow);
			this.ds_fileList.deleteRow(dRow);
			
			this.ds_fileList.setColumn(nRow+1  , "NEW_FILE_ORDR", fileSn);
			this.ds_fileList.setColumn(nRow    , "NEW_FILE_ORDR", nfileSn);
			
			// 파일 순서 변경 위한 데이터셋
			var fileSn = this.ds_cntrctDecsnInfo.getColumn(this.ds_cntrctDecsnInfo.rowposition, "FILE_SN");
			
			this.ds_cond_file.clearData();
			this.ds_cond_file.addRow();
			this.ds_cond_file.setColumn(0, "FILE_SN", fileSn);
			
			this.fSaveRow = nRow+1;
			this.fn_transaction("updateAtchmnFileOrdr");
		}
	}	
}


/*
 * 함수명  	: tab__tabpage1_grd_cmmnAtchmnfl_oncelldblclick
 * 설명 		: 첨부파일 다운로드(더블클릭)
 * params  		: None
 * return Type 	: None
 * 사용법		: this.tab__tabpage1_grd_cmmnAtchmnfl_oncelldblclick(obj,e);
 */
this.tab__tabpage1_grd_cmmnAtchmnfl_oncelldblclick = function(obj:Grid, e:nexacro.GridClickEventInfo)
{
	
	if(e.col = "5" || e.col != "6") {
		var fileSn    = this.ds_fileList.getColumn(this.ds_fileList.rowposition, "FILE_SN");
		var fileOrder = this.ds_fileList.getColumn(this.ds_fileList.rowposition, "FILE_ORDR");
		var fileName  = this.ds_fileList.getColumn(this.ds_fileList.rowposition, "ORGINL_FILE_NM");
		this.File_UpDownManager.download(fileSn, fileOrder, fileName);
	}
}


/*
 * 함수명  	: tab__tabpage2_grd_cmmnAtchmnfl_oncelldblclick
 * 설명 		: 첨부파일 다운로드(더블클릭)
 * params  		: None
 * return Type 	: None
 * 사용법		: this.tab__tabpage2_grd_cmmnAtchmnfl_oncelldblclick(obj,e);
 */
this.tab__tabpage2_grd_cmmnAtchmnfl_oncelldblclick = function(obj:Grid, e:nexacro.GridClickEventInfo)
{
	var fileSn    = this.ds_fileList2.getColumn(this.ds_fileList2.rowposition, "FILE_SN");
	var fileOrder = this.ds_fileList2.getColumn(this.ds_fileList2.rowposition, "FILE_ORDR");
	var fileName  = this.ds_fileList2.getColumn(this.ds_fileList2.rowposition, "ORGINL_FILE_NM");
	this.File_UpDownManager.download(fileSn, fileOrder, fileName);
}


/*
 * 함수명  	: grd_cntrctDecsnDetail_onexpandup
 * 설명 		: 그리드 expand 버튼 클릭 후 이벤트 처리
 * params  		: None
 * return Type 	: None
 * 사용법		: this.grd_cntrctDecsnDetail_onexpandup(obj,e);
 */
this.grd_cntrctDecsnDetail_onexpandup = function(obj:Grid, e:nexacro.GridMouseEventInfo)
{
	if(e.col == '9') {
		var dRow      = this.ds_cntrctDecsnInfo.rowposition;
		var decsnYear = this.ds_cntrctDecsnInfo.getColumn(dRow, "CNTRCT_DECSN_YEAR");
		
		var cRow      = this.ds_cntrctDecsnDetail.rowposition;
		var bcncNm    = this.ds_cntrctDecsnDetail.getColumn(cRow, "BCNC_NM");
		var issuSeqno = this.ds_cntrctDecsnDetail.getColumn(cRow, "ISSU_SEQNO");
		var issuId    = this.ds_cntrctDecsnDetail.getColumn(cRow, "ISSU_ID");
		
		var args = {
			 arg_0		: this
			,decsnYear	: decsnYear
			,bcncNm		: bcncNm
			,issuId		: issuId
		};
		this.gfn_popup("CTR030600_P02", 903, 842, "", args, "mis_ctr::CTR030600_P02.xfdl", "fn_popupCallBack", true);
	}
}





/*
 * 함수명  	: btn_etcExpDsnRegist_onclick
 * 설명 		: 기타증빙/지출결의등록
 * params  		: None
 * return Type 	: None
 * 사용법		: this.btn_etcExpDsnRegist_onclick();
 */
this.btn_etcExpDsnRegist_onclick = function(obj:Button,  e:nexacro.ClickEventInfo)
{
	var args = {
		  arg_0				: this
    };
	
	this.gfn_popup("etcExpDsnPopup", 0, 0, "", args, "mis_acc::ACC030111_P02.xfdl", "fn_popupCallBack",true);
}



/*
 * 함수명  	: btn_delDecsn_onclick
 * 설명 		: 지출결의서 삭제
 * params  		: None
 * return Type 	: None
 * 사용법		: this.btn_delDecsn_onclick();
 */
this.btn_delDecsn_onclick = function(obj:Button,  e:nexacro.ClickEventInfo)
{
	var expndtrCnfirmAt = this.ds_cntrctDecsnInfo.getColumn(e.newrow, "EXPNDTR_CNFIRM_AT");

	if(expndtrCnfirmAt == '1') {
		this.gfn_message("fail.삭제.불가","승인된 건은");
		return false;
	}
	
	if(this.gfn_message("confirm.삭제여부")) {
		var decsnYear = this.ds_cntrctDecsnInfo.getColumn(0, "EXP_DECSN_YEAR");
		var decsnNo = this.ds_cntrctDecsnInfo.getColumn(0, "EXP_DECSN_NO");
		
		// 삭제 데이터셋
		this.ds_cond_decsn_del.clearData();
		this.ds_cond_decsn_del.addRow();
		this.ds_cond_decsn_del.setColumn(0, "DECSN_YEAR", decsnYear);
		this.ds_cond_decsn_del.setColumn(0, "DECSN_NO"  , decsnNo);
	
		this.fn_transaction("expDsnD");
	}
}
]]></Script>
  </Form>
</FDL>
