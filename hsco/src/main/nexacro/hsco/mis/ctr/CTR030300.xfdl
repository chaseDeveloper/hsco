<?xml version="1.0" encoding="utf-8"?>
<FDL version="1.5">
  <TypeDefinition url="..\..\default_typedef.xml"/>
  <Form id="CTR030300" classname="CTR030300" left="0" top="0" width="1059" height="735" titletext="검사검수관리" onload="CTR030300_onload" oninit="CTR030300_oninit">
    <Layouts>
      <Layout>
        <Static id="sta_cntrctList" taborder="3" text="계약목록" cssclass="sta_WF_Title02" left="0" top="43" right="908" height="19"/>
        <Static id="sta_top" taborder="4" text="10" visible="false" left="0" top="33" height="10" style="background:#dc143c3c;align:center middle;" right="28"/>
        <Static id="Static04" taborder="5" text="15" visible="false" left="1031" top="0" width="15" height="735" style="background:#1b3cd23c;align:center middle;"/>
        <Static id="Static05" taborder="6" text="스&#13;&#10;크&#13;&#10;롤&#13;&#10;13" visible="false" top="0" right="0" width="13" height="735" style="background:#d07b173c;align:center middle;"/>
        <Div id="div_search" taborder="0" left="0" top="0" right="28" height="33" cssclass="div_WFSA_Box">
          <Layouts>
            <Layout>
              <Static id="Static36" taborder="6" text="5" visible="false" left="478" top="0" width="38" height="5" style="background:#fa794f66;align:center middle;"/>
              <Static id="Static37" taborder="7" text="5" visible="false" left="478" bottom="0" width="38" height="5" style="background:#fa794f66;align:center middle;"/>
              <Static id="Static04" taborder="0" text="15" visible="false" left="0" top="0" bottom="0" width="15" style="background:#00ffff66;"/>
              <Static id="sta_YEAR" taborder="8" text="계약년도" wordwrap="char" onclick="sta_YEAR_onclick" cssclass="sta_WFSA_Label" left="15" top="5" width="64" height="21"/>
              <Static id="Static00" taborder="9" text="15" visible="false" left="164" top="0" width="15" style="background:#00ffff66;" bottom="0"/>
              <Static id="sta_YEAR00" taborder="10" text="계약구분" wordwrap="char" onclick="sta_YEAR_onclick" cssclass="sta_WFSA_Label" left="179" top="5" width="64" height="21"/>
              <Combo id="cmb_searchCnd" taborder="2" innerdataset="@ds_ctr022" codecolumn="CODE" datacolumn="CODE_NM" left="243" top="5" width="70" height="21" style="font:10 Gulim;"/>
              <Static id="Static05" taborder="11" text="15" visible="false" left="314" top="0" width="15" style="background:#00ffff66;" bottom="0"/>
              <Static id="sta_YEAR02" taborder="12" text="검색항목" wordwrap="char" onclick="sta_YEAR_onclick" cssclass="sta_WFSA_Label" left="329" top="5" width="64" height="21"/>
              <Combo id="cmb_SRCH_DS" taborder="3" innerdataset="ds_searchSe" codecolumn="CODE" datacolumn="CODE_NM" left="393" top="5" width="92" height="21"/>
              <Edit id="edt_SRCH_NM" taborder="4" left="487" top="5" width="236" height="21"/>
              <Static id="Static01" taborder="13" text="15" visible="false" left="723" top="0" bottom="0" width="15" style="background:#00ffff66;"/>
              <Static id="sta_infrmlCntrctAt" taborder="14" wordwrap="char" onclick="sta_YEAR_onclick" cssclass="sta_WFSA_Label" left="738" top="5" width="64" height="21" text="계약종류"/>
              <Combo id="cmb_infrmlCntrctAt" taborder="15" innerdataset="@ds_infrmlAt_s" codecolumn="CODE" datacolumn="CODE_NM" left="802" top="5" width="90" height="21" style="font:10 Gulim;" text="전체"/>
              <Static id="Static02" taborder="16" text="15" visible="false" left="892" top="0" bottom="0" width="15" style="background:#00ffff66;"/>
              <CheckBox id="chk_exclBlce0" taborder="17" text="잔액 0원 제외" left="909" top="5" width="100" height="21" truevalue="1" falsevalue="0"/>
              <Spin id="div_cntrctYear" taborder="18" value="0" cssclass="spn_WF_Essential" left="84" top="5" width="76" height="21"/>
            </Layout>
          </Layouts>
        </Div>
        <Div id="div_work" taborder="7" left="0" top="67" height="159" style="border:1 solid #808080ff ;" right="28">
          <Layouts>
            <Layout width="1031" height="247">
              <Static id="Static37" taborder="132" cssclass="sta_WF_Labelbg" left="0" top="0" width="512" height="27"/>
              <Static id="Static00" taborder="133" cssclass="sta_WF_Labelbg" left="0" top="26" width="512" height="27"/>
              <Static id="Static01" taborder="134" cssclass="sta_WF_Labelbg" left="0" top="52" width="512" height="27"/>
              <Static id="Static02" taborder="135" cssclass="sta_WF_Labelbg" left="0" top="78" width="512" height="27"/>
              <Static id="Static05" taborder="137" cssclass="sta_WF_Labelbg" left="0" top="130" width="512" height="27"/>
              <Static id="Static06" taborder="138" cssclass="sta_WF_Labelbg" left="0" top="104" width="512" height="27"/>
              <Static id="Static03" taborder="139" cssclass="sta_WF_Labelbg" left="514" top="0" width="513" height="27"/>
              <Static id="Static07" taborder="140" cssclass="sta_WF_Labelbg" left="514" top="26" width="513" height="27"/>
              <Static id="Static08" taborder="141" cssclass="sta_WF_Labelbg" left="514" top="52" width="513" height="27"/>
              <Static id="Static09" taborder="142" cssclass="sta_WF_Labelbg" left="514" top="78" width="513" height="27"/>
              <Static id="Static11" taborder="144" cssclass="sta_WF_Labelbg" left="514" top="130" width="513" height="27"/>
              <Static id="Static12" taborder="145" cssclass="sta_WF_Labelbg" left="514" top="104" width="513" height="27"/>
              <Static id="sta_REQEST_NO" taborder="0" text="의뢰번호" cssclass="sta_WF_Label" left="0" top="0" width="105" height="27"/>
              <Static id="sta_CNTRCT_NO" taborder="18" text="계약번호" cssclass="sta_WF_Label" left="208" top="52" width="105" height="27"/>
              <Static id="sta_CNST_CODE" taborder="38" text="공종명" cssclass="sta_WF_Label" left="0" top="130" width="105" height="27"/>
              <Static id="sta_CNTRCT_DE" taborder="20" text="계약일자" cssclass="sta_WF_Label" left="514" top="52" width="105" height="27"/>
              <Static id="sta_BSNS_CODE" taborder="8" text="사업코드/명" cssclass="sta_WF_Label" left="0" top="26" width="105" height="27"/>
              <Static id="sta_FLFL_MTHD" taborder="34" text="이행방식" cssclass="sta_WF_Label" left="514" top="104" width="105" height="27"/>
              <Static id="sta_STRWRK_DE" taborder="12" text="착공일자" cssclass="sta_WF_Label" left="514" top="26" width="105" height="27"/>
              <Static id="sta_PBLANC_DE" taborder="6" text="공고일자" cssclass="sta_WF_Label" left="770" top="0" width="105" height="27"/>
              <Static id="sta_SUPLY_AMOUNT" taborder="26" text="공급가액" cssclass="sta_WF_Label" left="514" top="78" width="105" height="27"/>
              <Static id="sta_INORG_CNTRWK_SE" taborder="36" text="장기공사" cssclass="sta_WF_Label" left="770" top="104" width="105" height="27"/>
              <Static id="sta_COMPET_DE" taborder="14" text="준공일자" cssclass="sta_WF_Label" left="770" top="26" width="105" height="27"/>
              <Static id="sta_BID_DE" taborder="4" text="입찰일자" cssclass="sta_WF_Label" left="514" top="0" width="105" height="27"/>
              <Static id="sta_VAT" taborder="28" text="부가세" cssclass="sta_WF_Label" left="770" top="78" width="105" height="27"/>
              <Edit id="edt_REQEST_NM" taborder="3" left="208" top="3" width="301" height="21" readonly="true" cssclass="edt_WF_Readonly"/>
              <Edit id="edt_BSNS_NM" taborder="11" left="208" top="29" width="301" height="21" readonly="true" cssclass="edt_WF_Readonly"/>
              <Edit id="edt_BSNS_CODE" taborder="9" left="107" top="29" width="99" height="21" readonly="true" cssclass="edt_WF_Readonly"/>
              <Calendar id="cal_CNTRCT_DE" taborder="21" dateformat="yyyy-MM-dd" left="621" top="55" width="146" height="21" style="align:center middle;font:9 Gulim, bold;" cssclass="cal_WF_Readonly" readonly="true"/>
              <Calendar id="cal_STRWRK_DE" taborder="13" dateformat="yyyy-MM-dd" left="621" top="29" width="146" height="21" style="align:center middle;" cssclass="cal_WF_Readonly" readonly="true"/>
              <Calendar id="cal_PBLANC_DE" taborder="7" dateformat="yyyy-MM-dd" left="877" top="3" width="147" height="21" style="align:center middle;" cssclass="cal_WF_Readonly" readonly="true"/>
              <Calendar id="cal_BID_DE" taborder="5" dateformat="yyyy-MM-dd" left="621" top="3" width="147" height="21" style="align:center middle;" cssclass="cal_WF_Readonly" readonly="true"/>
              <Calendar id="cal_COMPET_DE" taborder="15" dateformat="yyyy-MM-dd" left="877" top="29" width="146" height="21" style="align:center middle;" cssclass="cal_WF_Readonly" readonly="true"/>
              <Edit id="edt_CNTRCT_NM" taborder="25" left="107" top="81" width="402" height="21" cssclass="edt_WF_Readonly" readonly="true"/>
              <MaskEdit id="msk_SUPLY_AMOUNT" taborder="27" mask="#,###,###,###,###" left="621" top="81" width="147" height="21" cssclass="msk_WF_Readonly" readonly="true"/>
              <MaskEdit id="msk_VAT" taborder="29" mask="#,###,###,###,###" left="877" top="81" width="147" height="21" cssclass="msk_WF_Readonly" readonly="true"/>
              <Static id="sta_CNTRCT_AMOUNT" taborder="22" text="계약금액" cssclass="sta_WF_Label" left="770" top="52" width="105" height="27"/>
              <MaskEdit id="msk_CNTRCT_AMOUNT" taborder="23" mask="#,###,###,###,###" left="877" top="55" width="147" height="21" style="font:9 Gulim, bold;" cssclass="msk_WF_Readonly" readonly="true"/>
              <Static id="sta_PBLANC_NO" taborder="40" text="입찰공고번호" cssclass="sta_WF_Label" left="514" top="130" width="105" height="27"/>
              <Static id="sta_CNTRCT_SE" taborder="30" text="계약구분" cssclass="sta_WF_Label" left="0" top="104" width="105" height="27"/>
              <Combo id="cmb_CNTRCT_SE" taborder="31" innerdataset="@ds_ctr001" codecolumn="CODE" datacolumn="CODE_NM" left="107" top="107" width="162" height="21" cssclass="cmb_WF_Readonly" readonly="true"/>
              <Combo id="cmb_FLFL_MTHD" taborder="35" innerdataset="@ds_ctr002" codecolumn="CODE" datacolumn="CODE_NM" left="621" top="107" width="146" height="21" cssclass="cmb_WF_Readonly" readonly="true"/>
              <Combo id="cmb_INORG_CNTRWK_SE" taborder="37" innerdataset="@ds_ctr003" codecolumn="CODE" datacolumn="CODE_NM" left="877" top="107" width="146" height="21" cssclass="cmb_WF_Readonly" readonly="true"/>
              <Static id="sta_AREA_ENTRPS_RATE" taborder="32" text="지역업체비율" cssclass="sta_WF_Label" left="272" top="104" width="105" height="27"/>
              <Static id="sta_PRCURE_CNTRCT_NO" taborder="42" text="G2B계약번호" cssclass="sta_WF_Label" left="770" top="130" width="105" height="27"/>
              <Edit id="edt_PRCURE_CNTRCT_NO" taborder="43" left="877" top="133" width="147" height="21" inputtype="digit,alpha" readonly="true" cssclass="edt_WF_Readonly" style="align:center middle;"/>
              <Static id="sta_CNTRCT_NM" taborder="24" text="계약명" cssclass="sta_WF_Label" left="0" top="78" width="105" height="27"/>
              <MaskEdit id="msk_CNTRCT_NO" taborder="19" left="315" top="55" width="194" height="21" mask="####-###-###" type="string" style="align:center middle;" readonly="true" cssclass="msk_WF_Readonly"/>
              <MaskEdit id="msk_CNTRCT_YEAR" taborder="17" type="string" mask="####" left="107" top="55" width="99" height="21" style="align:center middle;" cssclass="msk_WF_Readonly" readonly="true"/>
              <Static id="sta_CNTRCT_YEAR" taborder="16" text="계약년도" cssclass="sta_WF_Label" left="0" top="52" width="105" height="27"/>
              <MaskEdit id="msk_AREA_ENTRPS_RATE" taborder="33" mask="###.##" left="379" top="107" width="130" height="21" style="align:center middle;" limitbymask="both" cssclass="msk_WF_Readonly" readonly="true"/>
              <Combo id="cmb_CNST_CODE" taborder="39" left="107" top="133" width="162" height="21" innerdataset="@ds_prj021" codecolumn="CODE" datacolumn="CODE_NM" cssclass="cmb_WF_Readonly" readonly="true"/>
              <Edit id="edt_PBLANC_NO" taborder="41" inputtype="digit,alpha" left="621" top="133" width="147" height="21" style="align:center middle;" cssclass="edt_WF_Readonly" readonly="true"/>
              <MaskEdit id="msk_REQEST_NO" taborder="1" type="string" mask="####-######" cssclass="msk_WF_Readonly" left="107" top="3" width="99" height="21" style="padding:1 24 0 6;align:center middle;" readonly="true"/>
              <Static id="sta_AREA_ENTRPS_RATE00" taborder="146" text="예산계정과목" cssclass="sta_WF_Label" left="272" top="130" width="105" height="27"/>
              <Edit id="edt_BUDGET_ACNT_NM" taborder="147" readonly="true" left="379" top="133" width="129" height="21" cssclass="edt_WF_Readonly"/>
            </Layout>
          </Layouts>
        </Div>
        <Static id="Static08" taborder="8" text="5" visible="false" left="0" top="62" right="28" height="5" style="background:#dc143c3c;align:center middle;"/>
        <Static id="sta_bottom" taborder="9" text="10" visible="false" left="0" right="28" height="10" style="background:#dc143c3c;align:center middle;" top="226"/>
        <Grid id="grd_cntrctList" taborder="1" binddataset="ds_cntrctList" autoenter="select" useinputpanel="false" cellsizingtype="col" onheadclick="grd_cntrctList_onheadclick" left="0" top="67" right="28" height="159" oncellclick="grd_cntrctList_oncellclick">
          <Formats>
            <Format id="default">
              <Columns>
                <Column size="40"/>
                <Column size="60"/>
                <Column size="100"/>
                <Column size="180"/>
                <Column size="60"/>
                <Column size="120"/>
                <Column size="180"/>
                <Column size="100"/>
                <Column size="140"/>
                <Column size="140"/>
                <Column size="100"/>
                <Column size="100"/>
                <Column size="100"/>
                <Column size="120"/>
                <Column size="60"/>
              </Columns>
              <Rows>
                <Row size="24" band="head"/>
                <Row size="24"/>
              </Rows>
              <Band id="head">
                <Cell text="순번"/>
                <Cell col="1" text="정식계약"/>
                <Cell col="2" text="계약번호"/>
                <Cell col="3" text="사업명"/>
                <Cell col="4" text="계약구분"/>
                <Cell col="5" text="상세구분"/>
                <Cell col="6" text="계약명"/>
                <Cell col="7" text="계약방법"/>
                <Cell col="8" text="계약금액"/>
                <Cell col="9" text="잔액"/>
                <Cell col="10" text="계약일자"/>
                <Cell col="11" text="착공일자"/>
                <Cell col="12" text="준공일자"/>
                <Cell col="13" text="감독부서"/>
                <Cell col="14"/>
              </Band>
              <Band id="body">
                <Cell text="expr:currow + 1"/>
                <Cell col="1" text="bind:INFRML_CNTRCT_AT2"/>
                <Cell col="2" text="bind:CNTRCT_NO" mask="####-#-#####"/>
                <Cell col="3" style="align:left middle;" text="bind:BSNS_NM2"/>
                <Cell col="4" displaytype="combo" style="align:center middle;" text="bind:CNTRCT_SE" combodataset="ds_ctr022" combocodecol="CODE" combodatacol="CODE_NM"/>
                <Cell col="5" displaytype="combo" text="bind:DETAIL_SE" combodataset="ds_ctr023" combocodecol="CODE" combodatacol="CODE_NM"/>
                <Cell col="6" style="align:left middle;" text="bind:CNTRCT_NM"/>
                <Cell col="7" displaytype="combo" style="align:center middle;" text="bind:CNTRCT_MTH_SE" combodataset="ds_ctr049" combocodecol="CODE" combodatacol="CODE_NM"/>
                <Cell col="8" displaytype="number" style="align:right middle;" text="bind:CNTRCT_AMOUNT"/>
                <Cell col="9" displaytype="number" style="align:right;" text="bind:BLCE"/>
                <Cell col="10" displaytype="date" text="bind:CNTRCT_DE" calendardisplaynulltype="none"/>
                <Cell col="11" displaytype="date" text="bind:STRWRK_DE" calendardisplaynulltype="none"/>
                <Cell col="12" displaytype="date" text="bind:COMPET_DE" calendardisplaynulltype="none"/>
                <Cell col="13" text="bind:MNG_DEPT_NM"/>
                <Cell col="14" displaytype="button" text="바로가기"/>
              </Band>
            </Format>
          </Formats>
        </Grid>
        <Div id="div_cntrwk_servc" taborder="2" left="0" top="236" right="28" bottom="0">
          <Layouts>
            <Layout>
              <Button id="btn_addWtnessInsptr" taborder="4" text="행추가" cssclass="btn_WF_Gridadd" top="0" right="134" width="64" height="19" onclick="div_cntrwk_servc_btn_addWtnessInsptr_onclick"/>
              <Button id="btn_deleteWtnessInsptr" taborder="5" text="행삭제" cssclass="btn_WF_Griddel" top="0" right="67" width="64" height="19" onclick="div_cntrwk_servc_btn_deleteWtnessInsptr_onclick"/>
              <Button id="btn_cancelWtnessInsptr" taborder="6" text="취소" cssclass="btn_WF_Gridcnl" top="0" right="0" width="64" height="19" onclick="div_cntrwk_servc_btn_cancelWtnessInsptr_onclick"/>
              <Static id="Static08" taborder="12" text="5" visible="false" left="0" top="19" right="0" height="5" style="background:#dc143c3c;align:center middle;"/>
              <Static id="sta_prsecWtnessDtls" taborder="13" text="검사입회내역" cssclass="sta_WF_Title02" left="0" top="0" width="120" height="19"/>
              <Static id="Static00" taborder="14" text="10" visible="false" top="215" right="0" height="10" style="background:#dc143c3c;align:center middle;" width="410"/>
              <Static id="sta_gnfdList03" taborder="15" text="첨부파일" cssclass="sta_WF_Title02" top="225" width="100" height="19" style="align:left middle;" right="310"/>
              <Button id="btn_delFiles" taborder="8" text="선택삭제" onclick="btn_delFiles_onclick" cssclass="btn_WF_Process" top="225" right="160" width="67" height="19"/>
              <Button id="btn_uploadFiles" taborder="9" text="파일업로드" onclick="btn_uploadFiles_onclick" cssclass="btn_WF_Process" top="225" right="88" width="68" height="19"/>
              <Button id="btn_downFiles" taborder="10" text="선택다운로드" onclick="btn_downFiles_onclick" cssclass="btn_WF_Process" top="225" right="0" width="85" height="19"/>
              <Static id="Static22" taborder="16" text="5" visible="false" top="244" right="0" height="5" style="background:#dc143c3c;align:center middle;" width="410"/>
              <Grid id="grd_cmmnAtchmnfl" taborder="11" binddataset="ds_fileList" autoenter="select" useinputpanel="false" cellsizingtype="col" autofittype="col" oncellclick="grd_cmmnAtchmnfl_oncellclick" onheadclick="grd_cmmnAtchmnfl_onheadclick" top="249" right="0" bottom="0" width="410">
                <Formats>
                  <Format id="default">
                    <Columns>
                      <Column size="40"/>
                      <Column size="65"/>
                      <Column size="300"/>
                      <Column size="80"/>
                      <Column size="80"/>
                    </Columns>
                    <Rows>
                      <Row size="24" band="head"/>
                      <Row size="40"/>
                    </Rows>
                    <Band id="head">
                      <Cell displaytype="checkbox" edittype="checkbox"/>
                      <Cell col="1" text="형식"/>
                      <Cell col="2" celltype="head" text="파일명"/>
                      <Cell col="3" text="확장자"/>
                      <Cell col="4" text="사이즈"/>
                    </Band>
                    <Band id="body">
                      <Cell displaytype="checkbox" edittype="checkbox" text="bind:CHK"/>
                      <Cell col="1" displaytype="image" text="bind:FILE_IMAGE" autosizerow="limitmin" autosizecol="limitmin"/>
                      <Cell col="2" displaytype="normal" style="align:left middle;" text="bind:ORGINL_FILE_NM" wordwrap="char"/>
                      <Cell col="3" text="bind:FILE_EXTSN"/>
                      <Cell col="4" text="bind:FILE_MG" wordwrap="char"/>
                    </Band>
                  </Format>
                </Formats>
              </Grid>
              <Static id="Static42" taborder="17" text="10" visible="false" top="0" bottom="0" width="10" style="background:#1b3cd23c;align:center middle;" right="410"/>
              <Grid id="grd_wtnessInsptr" taborder="7" useinputpanel="false" top="24" width="410" height="191" right="0" binddataset="ds_wtnessInsptr" onexpandup="div_cntrwk_servc_grd_wtnessInsptr_onexpandup">
                <Formats>
                  <Format id="default">
                    <Columns>
                      <Column size="60"/>
                      <Column size="100"/>
                      <Column size="120"/>
                      <Column size="120"/>
                    </Columns>
                    <Rows>
                      <Row size="24" band="head"/>
                      <Row size="24"/>
                    </Rows>
                    <Band id="head">
                      <Cell text="순번"/>
                      <Cell col="1" text="역할구분"/>
                      <Cell col="2" text="입회/검사자(사번)"/>
                      <Cell col="3" text="입회/검사자(명)"/>
                    </Band>
                    <Band id="body">
                      <Cell text="expr:currow + 1"/>
                      <Cell col="1" displaytype="combo" edittype="expr:dataset.getRowType(currow) == Dataset.ROWTYPE_INSERT ? 'combo' : 'none'" text="bind:ROLE_SE" combodataset="ds_ctr041" combocodecol="CODE" combodatacol="CODE_NM" combodisplay="expr:dataset.getRowType(currow) == Dataset.ROWTYPE_INSERT ? 'display' : 'edit'"/>
                      <Cell col="2" text="bind:EMPNO" expandshow="expr:dataset.getRowType(currow) == Dataset.ROWTYPE_INSERT ? 'show' : 'none'"/>
                      <Cell col="3" edittype="expr:dataset.getRowType(currow) == Dataset.ROWTYPE_INSERT ? 'normal' : 'none'" style="align:center middle;" text="bind:EMPNM" editlimit="60" editdisplay="expr:dataset.getRowType(currow) == Dataset.ROWTYPE_INSERT ? 'display' : 'edit'" editlengthunit="utf8"/>
                    </Band>
                  </Format>
                </Formats>
              </Grid>
              <Static id="sta_wtnessInsptr" taborder="18" text="입회검사자" cssclass="sta_WF_Title02" top="0" right="310" width="100" height="19" style="align:left middle;"/>
              <Grid id="grd_prsecWtnessDtls" taborder="3" useinputpanel="false" left="0" top="24" bottom="0" right="420" binddataset="ds_prsecWtnessDtls" autoenter="select" oncelldblclick="div_cntrwk_servc_grd_prsecWtnessDtls_oncelldblclick">
                <Formats>
                  <Format id="default">
                    <Columns>
                      <Column size="40"/>
                      <Column size="80"/>
                      <Column size="80"/>
                      <Column size="80"/>
                      <Column size="60"/>
                      <Column size="70"/>
                      <Column size="120"/>
                      <Column size="120"/>
                      <Column size="70"/>
                      <Column size="300"/>
                      <Column size="140"/>
                      <Column size="140"/>
                      <Column size="140"/>
                      <Column size="40"/>
                    </Columns>
                    <Rows>
                      <Row size="24" band="head"/>
                      <Row size="24"/>
                      <Row size="24" band="summ"/>
                    </Rows>
                    <Band id="head">
                      <Cell text="순번"/>
                      <Cell col="1" text="결재상태"/>
                      <Cell col="2" text="진행상태"/>
                      <Cell col="3" text="검사구분"/>
                      <Cell col="4" text="검사차수"/>
                      <Cell col="5" text="구분"/>
                      <Cell col="6" text="검사원제출일"/>
                      <Cell col="7" text="검사일자"/>
                      <Cell col="8" text="검사시각"/>
                      <Cell col="9" text="검사장소"/>
                      <Cell col="10" text="계약금액"/>
                      <Cell col="11" text="검사신청금액"/>
                      <Cell col="12" text="검사금액"/>
                      <Cell col="13"/>
                    </Band>
                    <Band id="body">
                      <Cell text="expr:currow + 1"/>
                      <Cell col="1" displaytype="image" text="expr:comp.parent.parent.gfn_getSanctnImgUrl(SANCTN_KND)"/>
                      <Cell col="2" displaytype="combo" edittype="none" text="bind:PROGRS_STTUS" combodataset="ds_ctr051" combocodecol="CODE" combodatacol="CODE_NM"/>
                      <Cell col="3" displaytype="combo" edittype="expr:dataset.getRowType(currow) == Dataset.ROWTYPE_INSERT ? 'combo' : 'none'" style="align:center middle;" text="bind:PRSEC_SE" combodataset="ds_ctr039" combocodecol="CODE" combodatacol="CODE_NM" combodisplay="expr:dataset.getRowType(currow) == Dataset.ROWTYPE_INSERT ? 'display' : 'edit'"/>
                      <Cell col="4" edittype="expr:dataset.getRowType(currow) == Dataset.ROWTYPE_INSERT ? 'masknumber' : 'none'" editfilter="digit" style="align:right middle;padding:EXPR(dataset.getRowType(currow) == Dataset.ROWTYPE_INSERT ? '1 1 1 1' : '0 10 0 0');" text="bind:PRSEC_ODR" mask="###차" editlimit="3" editdisplay="expr:dataset.getRowType(currow) == Dataset.ROWTYPE_INSERT ? 'display' : 'edit'" editlimitbymask="both" editlengthunit="ascii"/>
                      <Cell col="5" displaytype="combo" edittype="expr:comp.parent.parent.chargerAt || ENABLE_AT == '1' ? 'combo' : 'none'" text="bind:INFRML_AT" combodataset="ds_infrmlAt" combocodecol="CODE" combodatacol="CODE_NM" combodisplay="expr:comp.parent.parent.chargerAt || ENABLE_AT == '1' ? 'display' : 'edit'"/>
                      <Cell col="6" displaytype="date" edittype="expr:comp.parent.parent.chargerAt || ENABLE_AT == '1' ? 'date' : 'none'" text="bind:PRSEC_DOC_PRESENTN_DE" calendardisplay="expr:comp.parent.parent.chargerAt || ENABLE_AT == '1' ? 'display' : 'edit'" calendardisplaynulltype="none"/>
                      <Cell col="7" displaytype="date" edittype="expr:comp.parent.parent.chargerAt || ENABLE_AT == '1' ? 'date' : 'none'" style="align:center middle;" text="bind:PRSEC_DE" calendardisplay="expr:comp.parent.parent.chargerAt || ENABLE_AT == '1' ? 'display' : 'edit'" calendardisplaynulltype="none"/>
                      <Cell col="8" edittype="expr:comp.parent.parent.chargerAt || ENABLE_AT == '1' ? 'mask' : 'none'" editfilter="digit" style="align:center middle;" text="bind:PRSEC_TM" mask="##:##" editdisplay="expr:comp.parent.parent.chargerAt || ENABLE_AT == '1' ? 'display' : 'edit'"/>
                      <Cell col="9" edittype="expr:comp.parent.parent.chargerAt || ENABLE_AT == '1' ? 'normal' : 'none'" style="align:left middle;" text="bind:PRSEC_PLACE" editlimit="200" editdisplay="expr:comp.parent.parent.chargerAt || ENABLE_AT == '1' ? 'display' : 'edit'" editlengthunit="ascii"/>
                      <Cell col="10" displaytype="number" style="align:right middle;" text="bind:CNTRCT_AMOUNT"/>
                      <Cell col="11" displaytype="number" edittype="expr:comp.parent.parent.chargerAt || ENABLE_AT == '1' ? 'masknumber' : 'none'" style="align:right middle;" text="bind:PRSEC_REQST_AMOUNT" mask="###,###,###,###,###" editdisplay="expr:comp.parent.parent.chargerAt || ENABLE_AT == '1' ? 'display' : 'edit'" editlimitbymask="both"/>
                      <Cell col="12" displaytype="number" edittype="expr:comp.parent.parent.chargerAt || ENABLE_AT == '1' ? 'masknumber' : 'none'" style="align:right middle;" text="bind:PRSEC_AMOUNT" mask="###,###,###,###,###" editdisplay="expr:comp.parent.parent.chargerAt || ENABLE_AT == '1' ? 'display' : 'edit'" editlimitbymask="both"/>
                      <Cell col="13" text="bind:ENABLE_AT"/>
                    </Band>
                    <Band id="summary">
                      <Cell colspan="9" text="계"/>
                      <Cell col="9"/>
                      <Cell col="10"/>
                      <Cell col="11"/>
                      <Cell col="12" displaytype="number" style="align:right middle;" text="expr:dataset.getSum(&quot;PRSEC_AMOUNT&quot;)"/>
                      <Cell col="13"/>
                    </Band>
                  </Format>
                </Formats>
              </Grid>
              <Button id="btn_addPrsecWtness" taborder="0" text="행추가" cssclass="btn_WF_Gridadd" top="0" right="554" width="64" height="19" onclick="div_cntrwk_servc_btn_addPrsecWtness_onclick"/>
              <Button id="btn_deletePrsecWtness" taborder="1" text="행삭제" cssclass="btn_WF_Griddel" top="0" right="487" width="64" height="19" onclick="div_cntrwk_servc_btn_deletePrsecWtness_onclick"/>
              <Button id="btn_cancelPrsecWtness" taborder="2" text="취소" cssclass="btn_WF_Gridcnl" top="0" right="420" width="64" height="19" onclick="div_cntrwk_servc_btn_cancelPrsecWtness_onclick"/>
              <Static id="Static01" taborder="19" text="입회검사자는 대가지급이 완료되면 수정불가" left="656" top="60" width="301" height="20" style="background:aqua;color:black;" visible="false"/>
            </Layout>
          </Layouts>
        </Div>
      </Layout>
    </Layouts>
    <Objects>
      <Dataset id="ds_cond" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="CNTRCT_YEAR" type="STRING" size="4"/>
          <Column id="CNTRCT_SE" type="STRING" size="3"/>
          <Column id="SEARCH_SE" type="STRING" size="256"/>
          <Column id="SEARCH_VAL" type="STRING" size="256"/>
          <Column id="MNG_DEPT_CODE" type="STRING" size="256"/>
          <Column id="MNG_DEPT_NM" type="STRING" size="256"/>
          <Column id="MANGR_EMPNO" type="STRING" size="256"/>
          <Column id="INFRML_CNTRCT_AT" type="STRING" size="256"/>
          <Column id="EXCL_BLCE_0" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_cntrctList" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false" onrowposchanged="ds_cntrctList_onrowposchanged">
        <ColumnInfo>
          <Column id="CNTRCT_NO" type="STRING" size="256"/>
          <Column id="BSNS_CODE" type="STRING" size="256"/>
          <Column id="BSNS_NM" type="STRING" size="256"/>
          <Column id="BSNS_NM2" type="STRING" size="256"/>
          <Column id="CNTRCT_SE" type="STRING" size="256"/>
          <Column id="DETAIL_SE" type="STRING" size="256"/>
          <Column id="CNTRCT_NM" type="STRING" size="256"/>
          <Column id="CNTRCT_MTH_SE" type="STRING" size="256"/>
          <Column id="CNTRCT_AMOUNT" type="STRING" size="256"/>
          <Column id="CNTRCT_DE" type="STRING" size="256"/>
          <Column id="STRWRK_DE" type="STRING" size="256"/>
          <Column id="COMPET_DE" type="STRING" size="256"/>
          <Column id="MNG_DEPT_CODE" type="STRING" size="256"/>
          <Column id="MNG_DEPT_NM" type="STRING" size="256"/>
          <Column id="INFRML_CNTRCT_AT" type="STRING" size="256"/>
          <Column id="INFRML_CNTRCT_AT2" type="STRING" size="256"/>
          <Column id="BLCE" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_ctr022" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="ETC1" type="string" size="32"/>
          <Column id="VAL2" type="string" size="32"/>
          <Column id="CODE_CN" type="string" size="32"/>
          <Column id="VAL1" type="string" size="32"/>
          <Column id="USE_YN" type="string" size="32"/>
          <Column id="ETC3" type="string" size="32"/>
          <Column id="VAL4" type="string" size="32"/>
          <Column id="ETC2" type="string" size="32"/>
          <Column id="VAL3" type="string" size="32"/>
          <Column id="CODE_ORDR" type="bigdecimal" size="16"/>
          <Column id="MSTK_VAL" type="string" size="32"/>
          <Column id="ALL_CODE_NM" type="string" size="32"/>
          <Column id="CODE_NM" type="string" size="32"/>
          <Column id="INT_VAL" type="string" size="32"/>
          <Column id="GRP_CODE" type="string" size="32"/>
          <Column id="CODE" type="string" size="32"/>
          <Column id="VAL0" type="string" size="32"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_ctr023" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="ETC1" type="string" size="32"/>
          <Column id="VAL2" type="string" size="32"/>
          <Column id="CODE_CN" type="string" size="32"/>
          <Column id="VAL1" type="string" size="32"/>
          <Column id="USE_YN" type="string" size="32"/>
          <Column id="ETC3" type="string" size="32"/>
          <Column id="VAL4" type="string" size="32"/>
          <Column id="ETC2" type="string" size="32"/>
          <Column id="VAL3" type="string" size="32"/>
          <Column id="CODE_ORDR" type="bigdecimal" size="16"/>
          <Column id="MSTK_VAL" type="string" size="32"/>
          <Column id="ALL_CODE_NM" type="string" size="32"/>
          <Column id="CODE_NM" type="string" size="32"/>
          <Column id="INT_VAL" type="string" size="32"/>
          <Column id="GRP_CODE" type="string" size="32"/>
          <Column id="CODE" type="string" size="32"/>
          <Column id="VAL0" type="string" size="32"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_ctr049" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="ETC1" type="string" size="32"/>
          <Column id="VAL2" type="string" size="32"/>
          <Column id="CODE_CN" type="string" size="32"/>
          <Column id="VAL1" type="string" size="32"/>
          <Column id="USE_YN" type="string" size="32"/>
          <Column id="ETC3" type="string" size="32"/>
          <Column id="VAL4" type="string" size="32"/>
          <Column id="ETC2" type="string" size="32"/>
          <Column id="VAL3" type="string" size="32"/>
          <Column id="CODE_ORDR" type="bigdecimal" size="16"/>
          <Column id="MSTK_VAL" type="string" size="32"/>
          <Column id="ALL_CODE_NM" type="string" size="32"/>
          <Column id="CODE_NM" type="string" size="32"/>
          <Column id="INT_VAL" type="string" size="32"/>
          <Column id="GRP_CODE" type="string" size="32"/>
          <Column id="CODE" type="string" size="32"/>
          <Column id="VAL0" type="string" size="32"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_ctr039" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="ETC1" type="string" size="32"/>
          <Column id="VAL2" type="string" size="32"/>
          <Column id="CODE_CN" type="string" size="32"/>
          <Column id="VAL1" type="string" size="32"/>
          <Column id="USE_YN" type="string" size="32"/>
          <Column id="ETC3" type="string" size="32"/>
          <Column id="VAL4" type="string" size="32"/>
          <Column id="ETC2" type="string" size="32"/>
          <Column id="VAL3" type="string" size="32"/>
          <Column id="CODE_ORDR" type="bigdecimal" size="16"/>
          <Column id="MSTK_VAL" type="string" size="32"/>
          <Column id="ALL_CODE_NM" type="string" size="32"/>
          <Column id="CODE_NM" type="string" size="32"/>
          <Column id="INT_VAL" type="string" size="32"/>
          <Column id="GRP_CODE" type="string" size="32"/>
          <Column id="CODE" type="string" size="32"/>
          <Column id="VAL0" type="string" size="32"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_ctr040" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="ETC1" type="string" size="32"/>
          <Column id="VAL2" type="string" size="32"/>
          <Column id="CODE_CN" type="string" size="32"/>
          <Column id="VAL1" type="string" size="32"/>
          <Column id="USE_YN" type="string" size="32"/>
          <Column id="ETC3" type="string" size="32"/>
          <Column id="VAL4" type="string" size="32"/>
          <Column id="ETC2" type="string" size="32"/>
          <Column id="VAL3" type="string" size="32"/>
          <Column id="CODE_ORDR" type="bigdecimal" size="16"/>
          <Column id="MSTK_VAL" type="string" size="32"/>
          <Column id="ALL_CODE_NM" type="string" size="32"/>
          <Column id="CODE_NM" type="string" size="32"/>
          <Column id="INT_VAL" type="string" size="32"/>
          <Column id="GRP_CODE" type="string" size="32"/>
          <Column id="CODE" type="string" size="32"/>
          <Column id="VAL0" type="string" size="32"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_ctr041" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="ETC1" type="string" size="32"/>
          <Column id="VAL2" type="string" size="32"/>
          <Column id="CODE_CN" type="string" size="32"/>
          <Column id="VAL1" type="string" size="32"/>
          <Column id="USE_YN" type="string" size="32"/>
          <Column id="ETC3" type="string" size="32"/>
          <Column id="VAL4" type="string" size="32"/>
          <Column id="ETC2" type="string" size="32"/>
          <Column id="VAL3" type="string" size="32"/>
          <Column id="CODE_ORDR" type="bigdecimal" size="16"/>
          <Column id="MSTK_VAL" type="string" size="32"/>
          <Column id="ALL_CODE_NM" type="string" size="32"/>
          <Column id="CODE_NM" type="string" size="32"/>
          <Column id="INT_VAL" type="string" size="32"/>
          <Column id="GRP_CODE" type="string" size="32"/>
          <Column id="CODE" type="string" size="32"/>
          <Column id="VAL0" type="string" size="32"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_searchSe" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="CODE" type="STRING" size="256"/>
          <Column id="CODE_NM" type="STRING" size="256"/>
        </ColumnInfo>
        <Rows>
          <Row>
            <Col id="CODE">0</Col>
            <Col id="CODE_NM">전체</Col>
          </Row>
          <Row>
            <Col id="CODE">1</Col>
            <Col id="CODE_NM">계약명</Col>
          </Row>
          <Row>
            <Col id="CODE">2</Col>
            <Col id="CODE_NM">사업명</Col>
          </Row>
        </Rows>
      </Dataset>
      <Dataset id="ds_prsecWtnessDtls" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false" onrowposchanged="ds_prsecWtnessDtls_onrowposchanged" oncolumnchanged="ds_prsecWtnessDtls_oncolumnchanged" cancolumnchange="ds_prsecWtnessDtls_cancolumnchange">
        <ColumnInfo>
          <Column id="CNTRCT_NO" type="STRING" size="10"/>
          <Column id="WTNESS_SN" type="BIGDECIMAL" size="3"/>
          <Column id="PRSEC_SE" type="STRING" size="3"/>
          <Column id="PRSEC_ODR" type="BIGDECIMAL" size="3"/>
          <Column id="PRSEC_DE" type="STRING" size="8"/>
          <Column id="PRSEC_TM" type="STRING" size="4"/>
          <Column id="PRSEC_PLACE" type="STRING" size="256"/>
          <Column id="CNTRCT_AMOUNT" type="BIGDECIMAL" size="15"/>
          <Column id="PRSEC_AMOUNT" type="BIGDECIMAL" size="15"/>
          <Column id="INFRML_AT" type="STRING" size="1"/>
          <Column id="PRSEC_DOC_PRESENTN_DE" type="STRING" size="8"/>
          <Column id="PRSEC_REQST_AMOUNT" type="BIGDECIMAL" size="15"/>
          <Column id="FILE_SN" type="STRING" size="256"/>
          <Column id="SANCTN_NO" type="STRING" size="256"/>
          <Column id="SANCTN_KND" type="STRING" size="256"/>
          <Column id="ENABLE_AT" type="STRING" size="256"/>
          <Column id="READONLY_AT" type="STRING" size="256"/>
          <Column id="PROGRS_STTUS" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_wtnessInsptr" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false" oncolumnchanged="ds_wtnessInsptr_oncolumnchanged">
        <ColumnInfo>
          <Column id="CNTRCT_NO" type="STRING" size="10"/>
          <Column id="WTNESS_SN" type="BIGDECIMAL" size="3"/>
          <Column id="INSPTR_SN" type="BIGDECIMAL" size="3"/>
          <Column id="ROLE_SE" type="STRING" size="3"/>
          <Column id="EMPNO" type="STRING" size="8"/>
          <Column id="EMPNM" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_fileList" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="CHK" type="STRING" size="256"/>
          <Column id="PROGRS" type="BIGDECIMAL" size="16"/>
          <Column id="ORGINL_FILE_NM" type="string" size="32"/>
          <Column id="FILE_EXTSN" type="string" size="32"/>
          <Column id="FILE_STRE_COURS" type="string" size="32"/>
          <Column id="FILE_ID" type="string" size="32"/>
          <Column id="SN" type="bigdecimal" size="16"/>
          <Column id="SYS_SE_CODE" type="string" size="32"/>
          <Column id="FILE_IMAGE" type="string" size="32"/>
          <Column id="FILE_TY" type="string" size="32"/>
          <Column id="JOB_SE" type="string" size="32"/>
          <Column id="DELETE_IMAGE" type="string" size="32"/>
          <Column id="STRE_FILE_NM" type="string" size="32"/>
          <Column id="FILE_MG" type="bigdecimal" size="16"/>
          <Column id="FILE_CN" type="string" size="32"/>
          <Column id="FILE_ORDR" type="bigdecimal" size="16"/>
          <Column id="TRNSMIS_FILE_SIZE" type="string" size="32"/>
          <Column id="USE_AT" type="string" size="32"/>
          <Column id="STTUS" type="string" size="32"/>
          <Column id="FILE_SN" type="bigdecimal" size="16"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_condSub" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="CNTRCT_NO" type="STRING" size="256"/>
          <Column id="CUR_EMPNO" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_condSub2" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="CNTRCT_NO" type="STRING" size="256"/>
          <Column id="PARENT_SN" type="STRING" size="256"/>
          <Column id="FILE_SN" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_validation" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="compId" type="STRING" size="256"/>
          <Column id="colId" type="STRING" size="256"/>
          <Column id="msgId" type="STRING" size="256"/>
          <Column id="PK" type="STRING" size="256"/>
          <Column id="notNull" type="STRING" size="256"/>
          <Column id="nlength" type="STRING" size="256"/>
          <Column id="lengthChkGb" type="STRING" size="256"/>
          <Column id="type" type="STRING" size="256"/>
          <Column id="from" type="STRING" size="256"/>
          <Column id="to" type="STRING" size="256"/>
          <Column id="expr" type="STRING" size="256"/>
          <Column id="func" type="STRING" size="256"/>
        </ColumnInfo>
        <Rows>
          <Row>
            <Col id="compId">ds_cond</Col>
            <Col id="colId">CNTRCT_YM</Col>
            <Col id="msgId">계약년월</Col>
            <Col id="notNull">Y</Col>
          </Row>
          <Row>
            <Col id="colId">PRSEC_SE</Col>
            <Col id="compId">ds_prsecWtnessDtls</Col>
            <Col id="msgId">검사구분</Col>
            <Col id="notNull">Y</Col>
          </Row>
          <Row>
            <Col id="colId">PRSEC_ODR</Col>
            <Col id="compId">ds_prsecWtnessDtls</Col>
            <Col id="msgId">검사차수</Col>
            <Col id="notNull">Y</Col>
          </Row>
          <Row>
            <Col id="colId">PRSEC_DE</Col>
            <Col id="compId">ds_prsecWtnessDtls</Col>
            <Col id="msgId">검사일자</Col>
            <Col id="notNull">Y</Col>
          </Row>
          <Row>
            <Col id="compId">ds_prsecWtnessDtls</Col>
            <Col id="colId">PRSEC_TM</Col>
            <Col id="msgId">검사시각^23:59</Col>
            <Col id="to">2359</Col>
          </Row>
          <Row>
            <Col id="colId">REQUST_AMOUNT</Col>
            <Col id="compId">ds_prsecWtnessDtls</Col>
            <Col id="msgId">요청금액</Col>
            <Col id="notNull">Y</Col>
          </Row>
          <Row>
            <Col id="compId">ds_wtnessInsptr</Col>
            <Col id="colId">ROLE_SE</Col>
            <Col id="msgId">역할구분</Col>
            <Col id="PK">Y</Col>
            <Col id="notNull">Y</Col>
          </Row>
          <Row>
            <Col id="compId">ds_wtnessInsptr</Col>
            <Col id="colId">EMPNM</Col>
            <Col id="msgId">입회/검사자명</Col>
            <Col id="PK">Y</Col>
            <Col id="notNull">Y</Col>
          </Row>
        </Rows>
      </Dataset>
      <Dataset id="ds_infrmlAt" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="CODE" type="STRING" size="256"/>
          <Column id="CODE_NM" type="STRING" size="256"/>
        </ColumnInfo>
        <Rows>
          <Row>
            <Col id="CODE">0</Col>
            <Col id="CODE_NM">정식</Col>
          </Row>
          <Row>
            <Col id="CODE">1</Col>
            <Col id="CODE_NM">약식</Col>
          </Row>
        </Rows>
      </Dataset>
      <Dataset id="ds_infrmlAt_s" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="CODE" type="STRING" size="256"/>
          <Column id="CODE_NM" type="STRING" size="256"/>
        </ColumnInfo>
        <Rows>
          <Row>
            <Col id="CODE_NM">전체</Col>
          </Row>
          <Row>
            <Col id="CODE">0</Col>
            <Col id="CODE_NM">정식계약</Col>
          </Row>
          <Row>
            <Col id="CODE">1</Col>
            <Col id="CODE_NM">간이계약</Col>
          </Row>
        </Rows>
      </Dataset>
      <Dataset id="ds_ctr051" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="ETC1" type="string" size="32"/>
          <Column id="VAL2" type="string" size="32"/>
          <Column id="CODE_CN" type="string" size="32"/>
          <Column id="VAL1" type="string" size="32"/>
          <Column id="USE_YN" type="string" size="32"/>
          <Column id="ETC3" type="string" size="32"/>
          <Column id="VAL4" type="string" size="32"/>
          <Column id="ETC2" type="string" size="32"/>
          <Column id="VAL3" type="string" size="32"/>
          <Column id="CODE_ORDR" type="bigdecimal" size="16"/>
          <Column id="MSTK_VAL" type="string" size="32"/>
          <Column id="ALL_CODE_NM" type="string" size="32"/>
          <Column id="CODE_NM" type="string" size="32"/>
          <Column id="INT_VAL" type="string" size="32"/>
          <Column id="GRP_CODE" type="string" size="32"/>
          <Column id="CODE" type="string" size="32"/>
          <Column id="VAL0" type="string" size="32"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_cond_link" useclientlayout="true">
        <ColumnInfo>
          <Column id="CNTRCT_YEAR" type="STRING" size="256"/>
          <Column id="CNTRCT_NO" type="STRING" size="256"/>
          <Column id="CNTRCT_NM" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
    </Objects>
    <Bind>
      <BindItem id="item28" compid="div_search.cmb_infrmlCntrctAt" propid="value" datasetid="ds_cond" columnid="INFRML_CNTRCT_AT"/>
      <BindItem id="item2" compid="div_work.edt_CNTRCT_NM" propid="value" datasetid="ds_cntrctList" columnid="CNTRCT_NM"/>
      <BindItem id="item0" compid="div_work.edt_REQEST_NM" propid="value" datasetid="ds_cntrctList" columnid="REQEST_NM"/>
      <BindItem id="item3" compid="div_work.edt_BSNS_NM" propid="value" datasetid="ds_cntrctList" columnid="BSNS_NM"/>
      <BindItem id="item4" compid="div_work.edt_BSNS_CODE" propid="value" datasetid="ds_cntrctList" columnid="BSNS_CODE"/>
      <BindItem id="item11" compid="div_work.cal_COMPET_DE" propid="value" datasetid="ds_cntrctList" columnid="COMPET_DE"/>
      <BindItem id="item12" compid="div_work.cal_BID_DE" propid="value" datasetid="ds_cntrctList" columnid="BID_DE"/>
      <BindItem id="item13" compid="div_work.cal_PBLANC_DE" propid="value" datasetid="ds_cntrctList" columnid="PBLANC_DE"/>
      <BindItem id="item14" compid="div_work.cal_STRWRK_DE" propid="value" datasetid="ds_cntrctList" columnid="STRWRK_DE"/>
      <BindItem id="item15" compid="div_work.cal_CNTRCT_DE" propid="value" datasetid="ds_cntrctList" columnid="CNTRCT_DE"/>
      <BindItem id="item19" compid="div_work.msk_CNTRCT_AMOUNT" propid="value" datasetid="ds_cntrctList" columnid="CNTRCT_AMOUNT"/>
      <BindItem id="item17" compid="div_work.msk_SUPLY_AMOUNT" propid="value" datasetid="ds_cntrctList" columnid="SUPLY_AMOUNT"/>
      <BindItem id="item18" compid="div_work.msk_VAT" propid="value" datasetid="ds_cntrctList" columnid="VAT"/>
      <BindItem id="item20" compid="div_work.cmb_CNTRCT_SE" propid="value" datasetid="ds_cntrctList" columnid="CNTRCT_SE"/>
      <BindItem id="item5" compid="div_work.cmb_FLFL_MTHD" propid="value" datasetid="ds_cntrctList" columnid="FLFL_MTHD"/>
      <BindItem id="item6" compid="div_work.cmb_INORG_CNTRWK_SE" propid="value" datasetid="ds_cntrctList" columnid="INORG_CNTRWK_SE"/>
      <BindItem id="item33" compid="div_work.edt_PRCURE_CNTRCT_NO" propid="value" datasetid="ds_cntrctList" columnid="PRCURE_CNTRCT_NO"/>
      <BindItem id="item25" compid="div_work.msk_CNTRCT_NO" propid="value" datasetid="ds_cntrctList" columnid="CNTRCT_NO"/>
      <BindItem id="item10" compid="div_work.msk_CNTRCT_YEAR" propid="value" datasetid="ds_cntrctList" columnid="CNTRCT_YEAR"/>
      <BindItem id="item32" compid="div_work.msk_AREA_ENTRPS_RATE" propid="value" datasetid="ds_cntrctList" columnid="AREA_ENTRPS_RATE"/>
      <BindItem id="item8" compid="div_work.cmb_CNST_CODE" propid="value" datasetid="ds_cntrctList" columnid="CNST_CODE"/>
      <BindItem id="item16" compid="div_work.edt_PBLANC_NO" propid="value" datasetid="ds_cntrctList" columnid="PBLANC_NO"/>
      <BindItem id="item37" compid="div_work.msk_REQEST_NO" propid="value" datasetid="ds_cntrctList" columnid="REQEST_NO"/>
      <BindItem id="item7" compid="div_work.edt_BUDGET_ACNT_NM" propid="value" datasetid="ds_cntrctList" columnid="BUDGET_NM"/>
      <BindItem id="item9" compid="div_search.cmb_searchCnd" propid="value" datasetid="ds_cond" columnid="CNTRCT_SE"/>
      <BindItem id="item21" compid="div_search.cmb_SRCH_DS" propid="value" datasetid="ds_cond" columnid="SEARCH_SE"/>
      <BindItem id="item22" compid="div_search.edt_SRCH_NM" propid="value" datasetid="ds_cond" columnid="SEARCH_VAL"/>
      <BindItem id="item23" compid="div_cntrwk_servc.btn_addWtnessInsptr" propid="enable" datasetid="ds_prsecWtnessDtls" columnid="ENABLE_AT"/>
      <BindItem id="item24" compid="div_cntrwk_servc.btn_deleteWtnessInsptr" propid="enable" datasetid="ds_prsecWtnessDtls" columnid="ENABLE_AT"/>
      <BindItem id="item26" compid="div_cntrwk_servc.btn_cancelWtnessInsptr" propid="enable" datasetid="ds_prsecWtnessDtls" columnid="ENABLE_AT"/>
      <BindItem id="item27" compid="div_cntrwk_servc.grd_wtnessInsptr" propid="readonly" datasetid="ds_prsecWtnessDtls" columnid="READONLY_AT"/>
      <BindItem id="item29" compid="div_search.chk_exclBlce0" propid="value" datasetid="ds_cond" columnid="EXCL_BLCE_0"/>
      <BindItem id="item1" compid="div_search.div_cntrctYear" propid="value" datasetid="ds_cond" columnid="CNTRCT_YEAR"/>
    </Bind>
    <Script type="xscript5.0"><![CDATA[/**********************************************************************
* 화면ID	: CTR030300.xfdl
* 화면명	: 검사검수관리
* 화면설명	: 검사검수를 관리한다
* 작성일	: 2017.07.21
* 작성자	: 김형태
* 수정이력 : 
***********************************************************************
*     수정일     수정자   내용
***********************************************************************
*
***********************************************************************
*/

/***********************************************************************
 * Script Include 
 ***********************************************************************/
// 시스템 공통 라이브러리 Include
include "lib::comInclude.xjs";
include "mis_lib::misUtil.xjs";
include "lib::comUpDownUtils.xjs";


/***********************************************************************
 * 화면 변수 선언부
 ***********************************************************************/
this.File_UpDownManager = null;
this.chargerAt = false;
var saveRow1 = -1;
var saveRow2 = -1;

/***********************************************************************
 * onInit / onLoad 영역
 ***********************************************************************/
this.CTR030300_oninit = function(obj:Form, e:nexacro.InitEventInfo)
{
	// ..
}
this.CTR030300_onload = function(obj:Form, e:nexacro.LoadEventInfo)
{
	// form 초기화
	this.fn_init_form();

	// dataset 초기화
	this.fn_init_dataset();
}

/***********************************************************************
 * Form 오브젝트 초기화
 ***********************************************************************/ 
this.fn_init_form = function()
{
	this.gfn_initForm(this);
	this.fn_misFormInit(this);
	
	// 초기 검색조건
	this.ds_cond.clearData();
	var nRow = this.ds_cond.addRow();
	var cntrctYear = this.dateUtils.format(this.gfn_today(),"yyyy");
	
	this.ds_cond.setColumn(nRow, "CNTRCT_YEAR", cntrctYear);	// 당해년도
	this.ds_cond.setColumn(nRow, "SEARCH_SE", '0');
	
	// 공통코드
	var comboParams = [
	    ["ds_ctr022", "CTR022", "Y", "D", "B"]	// ds_ctr022 : 의뢰구분(계약구분)
	   ,["ds_ctr023", "CTR023", "Y", "D", "B"]	// ds_ctr023 : 상세구분(계약종류)
	   ,["ds_ctr049", "CTR049", "Y", "D", "B"]	// ds_ctr049 : 계약방법
	   ,["ds_ctr039", "CTR039", "Y", "D", "B"]	// ds_ctr039 : 검사구분
	   ,["ds_ctr040", "CTR040", "Y", "D", "B"]	// ds_ctr040 : 계약절차구분
	   ,["ds_ctr041", "CTR041", "Y", "D", "B"]	// ds_ctr041 : 역할구분
	   ,["ds_ctr051", "CTR051", "Y", "D", "B"]	// ds_ctr051 : 검사입회진행상태
	];
	var callback = function (svcId, errorCode, errorMsg) {
		
		// 계약담당자 or 감사담당자
		if(this.gfn_authGrpId("CTR_ADMIN") != -1 || this.gfn_authGrpId("AUD_ADMIN") != -1) {
			this.chargerAt = true;
		}
		
		if(!this.chargerAt){
			this.ds_cond.setColumn(nRow, "MNG_DEPT_CODE", this.gfn_getDeptId()  );	// 부서코드
			this.ds_cond.setColumn(nRow, "MNG_DEPT_NM"  , this.gfn_getDeptName());	// 부서명
			this.ds_cond.setColumn(nRow, "MANGR_EMPNO"  , this.gfn_getEmpNo()   );	// 사번
		}
		
		this.fn_search();	// 최초조회
	};
	this.gfn_comboLoad(comboParams, callback);
}

/***********************************************************************
 * Dataset 오브젝트 초기화
 ***********************************************************************/ 
this.fn_init_dataset = function()
{
	var fileConfig = {
		useMultiUpload : true,
		onChange: this.fn_onFileSelected,	// 파일 선택 이벤트 핸들러
		onSuccess : this.fn_onFileSuccess	// 전송 성공 이벤트 핸들러
	};
	this.File_UpDownManager = new this.fileUpDownManager(this, "MIS", "CTR");
	this.File_UpDownManager.init(fileConfig);
}


/**********************************************************************
* Transaction 영역 시작
***********************************************************************
*
* 1. Transaction 관련 이벤트 핸들러
* 2. call Transaction 영역
* 3. callback 영역(Transaction, Popup)
* 
***********************************************************************/


/**********************************************************************
* Transaction 관련 이벤트 핸들러 
***********************************************************************/

/*
 * 함수명  	: fn_search
 * 설명 		: 조회 이벤트 처리(계약목록)
 * params  		: None
 * return Type 	: None
 * 사용법		: this.fn_search();
 */
this.fn_search = function()
{
	this.ds_cntrctList.clearData();
	this.ds_prsecWtnessDtls.clearData();
	this.ds_wtnessInsptr.clearData();
	this.ds_fileList.clearData();
	
	var cntrctSe = this.ds_cond.getColumn(0, "CNTRCT_SE");
	
	this.fn_transaction("selectCntrctList");
}


/*
 * 함수명  	: fn_searchSub
 * 설명 		: 조회(검사입회내역, 검사검수내역)
 * params  		: None
 * return Type 	: None
 * 사용법		: this.fn_searchSub();
 */
this.fn_searchSub = function()
{
	this.ds_prsecWtnessDtls.clearData();
	this.ds_wtnessInsptr.clearData();
	this.ds_fileList.clearData();
	
	this.fn_transaction("selectPrsecWtnessDtls");
}


/*
 * 함수명  	: fn_searchSub2
 * 설명 		: 조회(입회검사자, 검수물품, 첨부파일)
 * params  		: None
 * return Type 	: None
 * 사용법		: this.fn_searchSub();
 */
this.fn_searchSub2 = function()
{
	this.ds_wtnessInsptr.clearData();
	this.ds_fileList.clearData();
	
	// validation 체크
	if(!this.gfn_checkValidation_NoUpdChk(this.ds_cond, this.ds_validation)) {
		return;
	}
		
	this.fn_transaction("selectWtnessInsptr");
}


/*
 * 함수명  	: fn_save
 * 설명 		: 저장 이벤트 처리
 * params  		: None
 * return Type 	: None
 * 사용법		: this.fn_save();
 */
this.fn_save = function()
{
	if (   !this.comUtils.isDatasetUpdated(this.ds_prsecWtnessDtls)	// 검사입회내역
		&& !this.comUtils.isDatasetUpdated(this.ds_wtnessInsptr)	// 입회검사자
	   ) {
		this.gfn_message("comm.데이터.변경.없음");
		return false;
	}
	
	//validation 체크
	if(!this.gfn_checkValidation_NoUpdChk(this.ds_prsecWtnessDtls, this.ds_validation)) {	// 검사입회내역
		return;
	}
	if(!this.gfn_checkValidation_NoUpdChk(this.ds_wtnessInsptr, this.ds_validation)) {		// 입회검사자
		return;
	}
	
	if(this.gfn_message("confirm.저장.여부")) {
		saveRow1 = this.ds_cntrctList.rowposition;
		saveRow2 = this.ds_prsecWtnessDtls.rowposition;
		this.fn_transaction("saveCntrwkServc");
	}
}

/**********************************************************************
 * CALL TRANSACTION 영역
 **********************************************************************/
this.fn_transaction = function(strSvcId)
{
	switch (strSvcId) {
		case "selectCntrctList":		// 계약목록 조회
			var sController   	= "hsco/mis/ctr/CTR030300/selectCntrctList.do";
			var sInDatasets   	= "input1=ds_cond";
			var sOutDatasets  	= "ds_cntrctList=output1";
			break;
		case "selectPrsecWtnessDtls":	// 검사입회내역 조회
			var sController   	= "hsco/mis/ctr/CTR030300/selectPrsecWtnessDtls.do";
			var sInDatasets   	= "input1=ds_condSub";
			var sOutDatasets  	= "ds_prsecWtnessDtls=output1";
			break;
		case "selectWtnessInsptr":		// 입회검사자, 파일 조회
			var sController   	= "hsco/mis/ctr/CTR030300/selectWtnessInsptr.do";
			var sInDatasets   	= "input1=ds_condSub2";
			var sOutDatasets  	= "ds_wtnessInsptr=output1 ds_fileList=output2";
			break;
		case "selectFileList":      	// 첨부파일 조회
			var sController   	= "hsco/mis/ctr/CTR030300/selectFileList.do";
			var sInDatasets   	= "input1=ds_condSub2";
			var sOutDatasets  	= "ds_fileList=output1";
			break;
		case "saveCntrwkServc":			// 저장
			var sController   	= "hsco/mis/ctr/CTR030300/saveCntrwkServc.do";
			var sInDatasets   	= "input1=ds_prsecWtnessDtls:U input2=ds_wtnessInsptr:U";
			var sOutDatasets  	= "";
			break;
	}

	Ex.core.tran(this, strSvcId, sController, sInDatasets, sOutDatasets); 
}

 /**********************************************************************
 * Transaction Callback 영역
 ***********************************************************************/
this.fn_callBack = function (strSvcId, nErrorCode, strErrorMsg)
{
	// 오류 및 성공 메시지를 화면에 보여준다.
	if(nErrorCode != 0) {
	  this.gfn_callback_message(strSvcId, nErrorCode, strErrorMsg);
	}
	if (nErrorCode != 0){
	} else {
		switch (strSvcId) {
			case "selectCntrctList":		// 계약목록 조회
				if(saveRow1 > -1) {
					this.ds_cntrctList.set_rowposition(saveRow1);
					saveRow1 = -1;
				}
				break;
			case "selectPrsecWtnessDtls":	// 검사입회내역 조회
				if(saveRow2 > -1) {
					this.ds_prsecWtnessDtls.set_rowposition(saveRow2);
					saveRow2 = -1;
				}
				break;
			case "selectWtnessInsptr":		// 입회검사자, 첨부파일 조회
				this.ds_fileList.filter("USE_AT == '1'");
				break;
			case "selectFileList":			// 첨부파일 조회
				this.ds_fileList.filter("USE_AT == '1'");
				break;
			case "saveCntrwkServc":			// 공사용역 저장
				this.gfn_message("success.처리.성공");
				this.fn_search();
				break;
		}
	}
}


/*
 * 함수명  	: fn_popupCallBack
 * 설명 		: 팝업 콜백
 * params  		: None
 * return Type 	: None
 * 사용법		: n/a
 */
this.fn_popupCallBack = function(strID, variant)
{
	var dsTemp = new Dataset();
	var loadCnt = dsTemp.loadXML(variant);
	
	// 값이 존재하지 않을 경우에는 아무런 값을 덮어쓰지 않음
	if(!loadCnt) {
		return false;
	}
	
	switch(strID) {
		// 사원선택팝업(입회검사자)
		case "empno_P01":
			var nRow = this.ds_wtnessInsptr.rowposition;
			this.ds_wtnessInsptr.setColumn(nRow, "EMPNM", dsTemp.getColumn(0, "EMPNM") );
			this.ds_wtnessInsptr.setColumn(nRow, "EMPNO", dsTemp.getColumn(0, "EMPNO") );
			break;
	}
}

/***********************************************************************
* Transaction 영역 끝
************************************************************************/



/**********************************************************************
* non-Transaction 관련 컴포넌트 이벤트 처리 함수
***********************************************************************
*
* 1. 공통버튼 관련 이벤트 처리
* 2. Button 관련 이벤트 처리
* 3. dataset 관련 이벤트 처리
* 4. gird 관련 이벤트 처리
* 5. 첨부파일 관련 이벤트 처리
* 
***********************************************************************/



/**********************************************************************
* 공통버튼 관련 이벤트 처리
***********************************************************************/

/*
 * 함수명  	: fn_cancel
 * 설명 		: 취소 버튼 이벤트 처리(Dataset 변경 내역 Reset)
 * params  		: None
 * return Type 	: None
 * 사용법		: this.fn_cancel();
 */
this.fn_cancel= function()
{
	if(   Ex.util.isUpdated(this.ds_cntrctList)			// 계약목록
	   || Ex.util.isUpdated(this.ds_prsecWtnessDtls)	// 검사입회내역
	   || Ex.util.isUpdated(this.ds_wtnessInsptr)		// 입회검사자
	  ) {
		if(!this.gfn_message("confirm.변경.취소.여부")) {
			return false;	// 아니오
		}
		this.ds_cntrctList.reset();
		this.ds_prsecWtnessDtls.reset();
		this.ds_wtnessInsptr.reset();
		
		this.ds_cntrctList.applyChange();
		this.ds_prsecWtnessDtls.applyChange();
		this.ds_wtnessInsptr.applyChange();
	}
}




this.fn_sanction = function()
{
	if(this.comUtils.isDatasetUpdated(this.ds_wtnessInsptr)) {
		this.gfn_message("comm.정보.저장.요청", "검사자/입회자목록");
		return;
	}
	
	if(this.comUtils.isDatasetUpdated(this.ds_prsecWtnessDtls)) {
		this.gfn_message("comm.정보.저장.요청", "검사검수내역");
		return;
	}
	
	if(this.ds_prsecWtnessDtls.getRowCount() == 0) {
		this.gfn_message("info.처리불가", "검사검수내역이 존재하지 않습니다.");
		return;
	}
	
	var arrSancData = new Array(1);
	arrSancData[0]  = "검사검수 요청";		// 결재제목
	
	this.fn_callHandySanc2(
		 this						// context
		,'0000000084'				// formId
		,this.ds_prsecWtnessDtls	// misDataset
		,"TBCTR_PRSEC_WTNESS"		// tableName
		,["CNTRCT_NO", "WTNESS_SN"]	// tableKey
		,arrSancData				// arrSancData
		,null						// subData
		,null						// multiCheck(0 or 1)
		,null						// otherColumn
		,this.ds_fileList			// file Dataset
	);
}



/**********************************************************************
* Button 관련 이벤트 처리
***********************************************************************/

/*
 * 함수명  	: div_cntrwk_servc_btn_Add_onclick
 * 설명 		: '행추가' 버튼 클릭 후 이벤트 처리(검사입회내역)
 * params  		: None
 * return Type 	: None
 * 사용법		: this.div_cntrwk_servc_btn_Add_onclick(obj,e);
 */
this.div_cntrwk_servc_btn_addPrsecWtness_onclick = function(obj:Button,  e:nexacro.ClickEventInfo)
{
	var pRow  = this.ds_cntrctList.rowposition;
	if(pRow < 0) {
		this.gfn_message("info.처리불가", "계약이 존재하지 않습니다.");
		return false;
	}
	
	var cntrctNo = this.ds_cntrctList.getColumn(pRow, "CNTRCT_NO");
	var infrmlAt = this.ds_cntrctList.getColumn(pRow, "INFRML_CNTRCT_AT");
	var prsecSe  = this.ds_ctr039.getColumn(0, "CODE");
	
	var nRow = this.ds_prsecWtnessDtls.addRow();
	this.ds_prsecWtnessDtls.setColumn(nRow, "CNTRCT_NO"   , cntrctNo);
	this.ds_prsecWtnessDtls.setColumn(nRow, "PRSEC_SE"    , prsecSe);
	this.ds_prsecWtnessDtls.setColumn(nRow, "ENABLE_AT"   , '1');
	this.ds_prsecWtnessDtls.setColumn(nRow, "READONLY_AT" , '0');
	this.ds_prsecWtnessDtls.setColumn(nRow, "INFRML_AT"   , infrmlAt);
	
	var maxOdr = this.ds_prsecWtnessDtls.getCaseMax("PRSEC_SE=='" + prsecSe + "'", "PRSEC_ODR");
	this.ds_prsecWtnessDtls.setColumn(nRow, "PRSEC_ODR", maxOdr+1);
}


/*
 * 함수명  	: div_cntrwk_servc_btn_Delete_onclick
 * 설명 		: '행삭제' 버튼 클릭 후 이벤트 처리(검사입회내역)
 * params  		: None
 * return Type 	: None
 * 사용법		: this.div_cntrwk_servc_btn_Delete_onclick(obj,e);
 */
this.div_cntrwk_servc_btn_deletePrsecWtness_onclick = function(obj:Button,  e:nexacro.ClickEventInfo)
{
	if(!this.gfn_message("confirm.삭제여부")) {
		return false;	// 아니오
	}
	
	this.ds_prsecWtnessDtls.deleteRow(this.ds_prsecWtnessDtls.rowposition);
}


/*
 * 함수명  	: div_cntrwk_servc_btn_Cancel_onclick
 * 설명 		: '취소' 버튼 클릭 후 이벤트 처리(검사입회내역)
 * params  		: None
 * return Type 	: None
 * 사용법		: this.div_cntrwk_servc_btn_Cancel_onclick(obj,e);
 */
this.div_cntrwk_servc_btn_cancelPrsecWtness_onclick = function(obj:Button,  e:nexacro.ClickEventInfo)
{
	var pRow  = this.ds_cntrctList.rowposition;
	
	if(Ex.util.isUpdated(this.ds_prsecWtnessDtls)) {
		if(!this.gfn_message("confirm.변경.취소.여부")) {
			return false;	// 아니오
		}
	}
	this.ds_prsecWtnessDtls.reset();
	this.ds_prsecWtnessDtls.applyChange();
}


/*
 * 함수명  	: div_thng_btn_Add_onclick
 * 설명 		: '행추가' 버튼 클릭 후 이벤트 처리(입회검사자)
 * params  		: None
 * return Type 	: None
 * 사용법		: this.div_thng_btn_Add_onclick(obj,e);
 */
this.div_cntrwk_servc_btn_addWtnessInsptr_onclick = function(obj:Button,  e:nexacro.ClickEventInfo)
{
	var pRow  = this.ds_prsecWtnessDtls.rowposition;
	
	if(pRow < 0) {
		this.gfn_message("info.처리불가", "검사입회내역이 존재하지 않습니다.");
		return false;
	}
	
	var cntrctNo = this.ds_prsecWtnessDtls.getColumn(pRow, "CNTRCT_NO");
	var wtnessSn = this.ds_prsecWtnessDtls.getColumn(pRow, "WTNESS_SN");
	var roleSe   = this.ds_ctr040.getColumn(0, "CODE");
	
	var nRow = this.ds_wtnessInsptr.addRow();
	this.ds_wtnessInsptr.setColumn(nRow, "CNTRCT_NO", cntrctNo);
	this.ds_wtnessInsptr.setColumn(nRow, "WTNESS_SN", wtnessSn);
	this.ds_wtnessInsptr.setColumn(nRow, "ROLE_SE"  , roleSe);
}


/*
 * 함수명  	: div_thng_btn_Delete_onclick
 * 설명 		: '행삭제' 버튼 클릭 후 이벤트 처리(입회검사자)
 * params  		: None
 * return Type 	: None
 * 사용법		: this.div_thng_btn_Delete_onclick(obj,e);
 */
this.div_cntrwk_servc_btn_deleteWtnessInsptr_onclick = function(obj:Button,  e:nexacro.ClickEventInfo)
{
	if(!this.gfn_message("confirm.삭제여부")) {
		return false;	// 아니오
	}
	
	this.ds_wtnessInsptr.deleteRow(this.ds_wtnessInsptr.rowposition);
}


/*
 * 함수명  	: div_thng_btn_Cancel_onclick
 * 설명 		: '취소' 버튼 클릭 후 이벤트 처리(입회검사자)
 * params  		: None
 * return Type 	: None
 * 사용법		: this.div_thng_btn_Cancel_onclick(obj,e);
 */
this.div_cntrwk_servc_btn_cancelWtnessInsptr_onclick = function(obj:Button,  e:nexacro.ClickEventInfo)
{
	if(Ex.util.isUpdated(this.ds_wtnessInsptr)) {
		if(!this.gfn_message("confirm.변경.취소.여부")) {
			return false;	// 아니오
		}
	}
	this.ds_wtnessInsptr.reset();
	this.ds_wtnessInsptr.applyChange();
}



/**********************************************************************
* dataset 관련 이벤트 처리
***********************************************************************/

/*
 * 함수명  	: ds_cntrctList_onrowposchanged
 * 설명 		: Dataset 데이터 변경 후 이벤트 처리(계약목록 dataset)
 * params  		: None
 * return Type 	: None
 * 사용법		: this.ds_cntrctList_onrowposchanged(obj,e);
 */
this.ds_cntrctList_onrowposchanged = function(obj:Dataset, e:nexacro.DSRowPosChangeEventInfo)
{
	if(e.newrow > -1) {
		this.ds_condSub.clearData();
		var nRow = this.ds_condSub.addRow();
		var cntrctNo = obj.getColumn(e.newrow, "CNTRCT_NO");
		var curEmpno = this.gfn_getEmpNo();
		
		this.ds_condSub.setColumn(nRow, "CNTRCT_NO", cntrctNo);
		this.ds_condSub.setColumn(nRow, "CUR_EMPNO", curEmpno);
		
		this.fn_searchSub();
	}
}


/*
 * 함수명  	: ds_prsecWtnessDtls_onrowposchanged
 * 설명 		: Dataset 행 변경 후 이벤트 처리(검사입회내역 dataset)
 * params  		: None
 * return Type 	: None
 * 사용법		: this.ds_prsecWtnessDtls_onrowposchanged(obj,e);
 */
this.ds_prsecWtnessDtls_onrowposchanged = function(obj:Dataset, e:nexacro.DSRowPosChangeEventInfo)
{
	if(e.newrow > -1) {
		this.ds_condSub2.clearData();
		var nRow = this.ds_condSub2.addRow();
		var cntrctNo = obj.getColumn(e.newrow, "CNTRCT_NO");
		var wtnessSn = obj.getColumn(e.newrow, "WTNESS_SN");
		var fileSn   = "";
		
		if(!this.comUtils.isNull(obj.getColumn(e.newrow, "FILE_SN"))) {
			fileSn = obj.getColumn(e.newrow, "FILE_SN");
		}
		
		this.ds_condSub2.setColumn(nRow, "CNTRCT_NO", cntrctNo);
		this.ds_condSub2.setColumn(nRow, "PARENT_SN", wtnessSn);
		this.ds_condSub2.setColumn(nRow, "FILE_SN"  , fileSn);
		
		this.fn_searchSub2();
	}
}


/*
 * 함수명  	: ds_prsecWtnessDtls_cancolumnchange
 * 설명 		: Dataset 데이터 변경 전 이벤트 처리(검사입회내역 dataset)
 * params  		: None
 * return Type 	: None
 * 사용법		: this.ds_prsecWtnessDtls_cancolumnchange(obj,e);
 */
this.ds_prsecWtnessDtls_cancolumnchange = function(obj:Dataset, e:nexacro.DSColChangeEventInfo)
{
	if(e.columnid == "PRSEC_AMOUNT") {
//		var sumAm    = obj.getSum("PRSEC_AMOUNT");
		var newSumAm = e.newvalue;
		
		var cRow = this.ds_cntrctList.rowposition;
		var cntrctAm = this.ds_cntrctList.getColumn(cRow, "CNTRCT_AMOUNT");
		
		if(newSumAm > cntrctAm) {
			var format1 = this.comUtils.formatComma(newSumAm);
			var format2 = this.comUtils.formatComma(cntrctAm);
			alert("검사금액의 합계(" + format1 + ")는 계약금액(" + format2 + ")을 초과할 수 없습니다.");
			return false;
		}
	}
}


/*
 * 함수명  	: ds_prsecWtnessDtls_oncolumnchanged
 * 설명 		: Dataset 데이터 변경 후 이벤트 처리(검사입회내역 dataset)
 * params  		: None
 * return Type 	: None
 * 사용법		: this.ds_prsecWtnessDtls_oncolumnchanged(obj,e);
 */
this.ds_prsecWtnessDtls_oncolumnchanged = function(obj:Dataset, e:nexacro.DSColChangeEventInfo)
{
	if(e.columnid == "PRSEC_TM") {
 		var newValue = e.newvalue.replace(/\s/g, '0');
 		obj.setColumn(e.row, e.columnid, newValue);
	}
}



/***********************************************************************
 * grid 관련 이벤트 처리
 ***********************************************************************/

/*
 * 함수명  	: div_cntrwk_servc_grd_wtnessInsptr_onexpandup
 * 설명 		: 그리드 버튼 클릭 후 이벤트 처리(Popup)
 * params  		: None
 * return Type 	: None
 * 사용법		: this.div_cntrwk_servc_grd_wtnessInsptr_onexpandup(obj,e);
 */
this.div_cntrwk_servc_grd_wtnessInsptr_onexpandup = function(obj:Grid, e:nexacro.GridMouseEventInfo)
{
	if(e.cell == '2') {	// 사원선택팝업
		var nRow = this.ds_cntrctList.rowposition;
//		var pDeptCode = this.ds_cntrctList.getColumn(nRow, "MNG_DEPT_CODE");
		
// 		if(this.comUtils.isNull(pDeptCode)) {
// 			alert("감독부서를 먼저 설정해주시기 바랍니다.");
// 			return false;
// 		}
		
		var parm = {
			 arg_0      : this
//			,deptCd		: pDeptCode
		};
		this.gfn_popup("empno_P01", 400, 400, "", parm, "com::empno_P01.xfdl", "fn_popupCallBack", true);
	}
}


/*
 * 함수명  	: file_upload_popup
 * 설명 		: 첨부파일 그리드 전체파일선택 ON/OFF 이벤트
 * params  		: None
 * return Type 	: None
 * 사용법		: this.file_upload_popup(obj,e);
 */
this.grd_cmmnAtchmnfl_onheadclick = function(obj:Grid, e:nexacro.GridClickEventInfo)
{
	if(e.col == 0) {
		this.gfn_setGridCheckAll(obj, e);
	}
}

/*
 * 함수명  	: file_upload_popup
 * 설명 		: 첨부파일 그리드 Body의 체크 버튼이 눌러졌을 때, Head 부분의 체크 버튼을 꺼 줌.
 * params  		: None
 * return Type 	: None
 * 사용법		: this.file_upload_popup(obj,e);
 */
this.grd_cmmnAtchmnfl_oncellclick = function(obj:Grid, e:nexacro.GridClickEventInfo)
{
	if(e.cell == 0) {
		obj.setCellProperty("Head", e.cell, "text", "0");
	}
}


/*
 * 함수명  	: div_cntrwk_servc_grd_prsecWtnessDtls_oncelldblclick
 * 설명 		: 검사입회내역에 대한 전자결재 다시보기
 * params  		: None
 * return Type 	: None
 * 사용법		: this.div_cntrwk_servc_grd_prsecWtnessDtls_oncelldblclick(obj,e);
 */
this.div_cntrwk_servc_grd_prsecWtnessDtls_oncelldblclick = function(obj:Grid, e:nexacro.GridClickEventInfo)
{
	if(e.col == 1) {
		var nRow = this.ds_prsecWtnessDtls.rowposition;
		if(['1','2','3','4','5'].indexOf(this.ds_prsecWtnessDtls.getColumn(nRow, "SANCTN_KND")) > -1) {
			this.fn_openSanc(this.ds_prsecWtnessDtls.getColumn(nRow, "SANCTN_NO"));
		}
	}
}



/***********************************************************************
 * 첨부파일버튼 관련 이벤트 처리
 ***********************************************************************/

/*
 * 함수명  	: btn_delFiles_onclick
 * 설명 		: '선택삭제' 버튼 클릭 후 이벤트 처리
 * params  		: None
 * return Type 	: None
 * 사용법		: this.btn_delFiles_onclick(obj,e);
 */
this.btn_delFiles_onclick = function(obj:Button,  e:nexacro.ClickEventInfo)
{
	var cntrctSe = this.ds_cond.getColumn(0, "CNTRCT_SE");
	var findRow  = this.ds_fileList.findRow("CHK", "1");
	
	if(findRow < 0) {
		this.gfn_message("comm.데이터.선택.없음");
			return;
	}
	
	if(!this.gfn_message("confirm.선택파일.삭제여부", "들")){
		return false;
	}
	
	for(var fRow = this.ds_fileList.getRowCount()-1; fRow >= 0; fRow--) {
		var chkVal = this.ds_fileList.getColumn(fRow, "CHK");
		if(chkVal == '1') {
			this.ds_fileList.deleteRow(fRow);
		}
	}
	
	var strSvcId   	 = "deleteFile";
	var sController  = "hsco/cmm/file/deleteFile.do";
	var sInDatasets  = "input1=ds_fileList:U";
	var sOutDatasets = "ds_fileList=output1";
	
	Ex.core.tran(this, strSvcId, sController, sInDatasets, sOutDatasets); 
}


/*
 * 함수명  	: btn_uploadFiles_onclick
 * 설명 		: '파일업로드' 버튼 클릭 후 이벤트 처리
 * params  		: None
 * return Type 	: None
 * 사용법		: this.btn_uploadFiles_onclick(obj,e);
 */
this.btn_uploadFiles_onclick = function(obj:Button,  e:nexacro.ClickEventInfo)
{	
	var nRow     = this.ds_prsecWtnessDtls.rowposition;	
	var nRowType = this.ds_prsecWtnessDtls.getRowType(nRow);
	
	if(nRow < 0){
		this.gfn_message("comm.항목.선택.요청","대상 정보(검사입회내역)");
		return;
	}
	
	if(nRowType == 2){
		this.gfn_message("info.진행가능","신규 정보를 저장");
		return;
	}
	
	// 첨부파일 업로드(fileSn 자동채번 / 첨부파일 Master에 ROW추가 / 파일 업로드 및 자동저장 / 테이블에 fileSn반영 / 데이터셋에 fileSn반영, 단 신규 ROW가 아닐경우 ROWTYPE은 유지)
	this.mCallback = function() {
		this.fn_autoFileSn(
			 "MIS"									// 대분류   (SYS_SE)
			,"CTR"									// 업무구분 (JOB_SE)
			, this.File_UpDownManager				// fileManager 오브젝트
			, this.ds_fileList						// fileObject
			, this.ds_prsecWtnessDtls				// fileSn을 불러오거나 반영해야 하는 컬럼
			, "TBCTR_PRSEC_WTNESS"					// fileSn을 저장할 테이블
			, "FILE_SN"								// fileSn 컬럼명이 다를 경우를 대비
			, ["CNTRCT_NO","WTNESS_SN"]				// fileSn을 저장할 테이블의 PK (FileSn 확인 및 자동반영목적)
		);
	}
	
	this.mCallback();
}



/*
 * 함수명  	: btn_downFiles_onclick
 * 설명 		: '선택다운로드' 버튼 클릭 후 이벤트 처리
 * params  		: None
 * return Type 	: None
 * 사용법		: this.btn_downFiles_onclick(obj,e);
 */
this.btn_downFiles_onclick = function(obj:Button,  e:nexacro.ClickEventInfo)
{
	var findRow = this.ds_fileList.findRow("CHK", "1");
	if(findRow < 0) {
		this.gfn_message("comm.데이터.선택.없음");
			return;
	}
	
	for(var fRow = 0; fRow < this.ds_fileList.getRowCount(); fRow++) {
		var fileSn    = this.ds_fileList.getColumn(fRow, "FILE_SN");
		var fileOrder = this.ds_fileList.getColumn(fRow, "FILE_ORDR");
		var fileName  = this.ds_fileList.getColumn(fRow, "ORGINL_FILE_NM");
		var chk       = this.ds_fileList.getColumn(fRow, "CHK");
		if(chk == '1') {
			this.File_UpDownManager.download(fileSn, fileOrder, fileName);
		}
	}
}


 /*
 * 함수명  	: fn_onFileSuccess
 * 설명 		: 파일 업로드 성공시 이벤트
 * params  		: None
 * return Type 	: None
 * 사용법		: this.fn_onFileSuccess();
 */
this.fn_onFileSuccess = function()
{
	this.gfn_message("success.처리.성공");
	
	var nRow = this.ds_prsecWtnessDtls.rowposition;
	this.ds_condSub2.setColumn(0, "FILE_SN", this.ds_prsecWtnessDtls.getColumn(nRow, "FILE_SN"));
	
	this.fn_transaction("selectFileList");
}

 /*
 * 함수명  	: fn_onFileError
 * 설명 		: 파일 업로드 실패시 이벤트
 * params  		: None
 * return Type 	: None
 * 사용법		: this.fn_onFileError();
 */
this.fn_onFileError = function(){
	
	//this.gfn_message("info.저장.초과", "이미지 파일만");	
}

this.ds_wtnessInsptr_oncolumnchanged = function(obj:Dataset, e:nexacro.DSColChangeEventInfo)
{
	if(e.columnid == "EMPNM") {
		obj.setColumn(e.row, "EMPNO", null);
	}
}


 /*
 * 함수명  	: grd_cntrctList_oncellclick
 * 설명 		: 바로가기 이벤트
 * params  		: None
 * return Type 	: None
 * 사용법		: this.grd_cntrctList_oncellclick();
 */
this.grd_cntrctList_oncellclick = function(obj:Grid, e:nexacro.GridClickEventInfo)
{
	// 바로가기
	if(e.col == 14) {
		var nRow = this.ds_cntrctList.rowposition;
		var cntrctNo = this.ds_cntrctList.getColumn(nRow, "CNTRCT_NO");
		var cntrctNm = this.ds_cntrctList.getColumn(nRow, "CNTRCT_NM");
		var cntrctYear = cntrctNo.substr(0, 4);
		
		var infrmlCntrctAt = this.ds_cntrctList.getColumn(nRow, "INFRML_CNTRCT_AT");
		
		var pageUrl = "mis_ctr::CTR030100.xfdl";	//계약대장
		if(infrmlCntrctAt == "1") {
			pageUrl = "mis_ctr::CTR030700.xfdl";	//간이계약
		}
		
		this.ds_cond_link.clearData();
		this.ds_cond_link.addRow();
		this.ds_cond_link.setColumn(0, "CNTRCT_YEAR", cntrctYear);
		this.ds_cond_link.setColumn(0, "CNTRCT_NO",   cntrctNo);
		this.ds_cond_link.setColumn(0, "CNTRCT_NM",   cntrctNm);

		var param = this.ds_cond_link.saveXML();
		this.gfn_Link2Page(pageUrl, param);
	}
}
]]></Script>
  </Form>
</FDL>
