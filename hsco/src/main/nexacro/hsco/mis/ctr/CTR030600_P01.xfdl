<?xml version="1.0" encoding="utf-8"?>
<FDL version="1.5">
  <TypeDefinition url="..\..\default_typedef.xml"/>
  <Form id="CTR030600_P01" classname="CTR030600_P01" left="0" top="0" width="902" height="780" titletext="대가지급등록" onload="CTR030600_P01_onload" oninit="CTR030600_P01_oninit" ontimer="CTR030600_P01_ontimer">
    <Layouts>
      <Layout>
        <Div id="div_decsn" taborder="71" left="0" top="0" bottom="0" right="0" visible="false">
          <Layouts>
          </Layouts>
        </Div>
      </Layout>
    </Layouts>
    <Objects>
      <Dataset id="ds_cntrctDecsnInfo" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false" onrowposchanged="ds_cntrctDecsnInfo_onrowposchanged">
        <ColumnInfo>
          <Column id="CNTRCT_DECSN_YEAR" type="STRING" size="256"/>
          <Column id="CNTRCT_DECSN_SN" type="STRING" size="256"/>
          <Column id="DECSN_NO" type="STRING" size="256"/>
          <Column id="CNTRCT_NO" type="STRING" size="256"/>
          <Column id="WTNESS_SN" type="STRING" size="256"/>
          <Column id="PXCOND_SE" type="STRING" size="256"/>
          <Column id="PXCOND_ODR" type="STRING" size="256"/>
          <Column id="FILE_SN" type="STRING" size="256"/>
          <Column id="EXPNDTR_FNNC_INSTT_CODE" type="STRING" size="256"/>
          <Column id="EXPNDTR_FNNC_INSTT_NM" type="STRING" size="256"/>
          <Column id="EXPNDTR_ACNUTNO" type="STRING" size="256"/>
          <Column id="SUMRY" type="STRING" size="256"/>
          <Column id="PXPAY_AT" type="STRING" size="256"/>
          <Column id="DEPT_CODE" type="STRING" size="256"/>
          <Column id="BSNS_CODE" type="STRING" size="256"/>
          <Column id="BSNS_NM" type="STRING" size="256"/>
          <Column id="EXP_DECSN_YEAR" type="STRING" size="256"/>
          <Column id="EXP_DECSN_NO" type="STRING" size="256"/>
          <Column id="EXP_DECSN_STR" type="STRING" size="256"/>
          <Column id="EXP_DECSN_AT" type="STRING" size="256"/>
          <Column id="ENABLE_AT" type="STRING" size="256"/>
          <Column id="ANACT_KND" type="STRING" size="256"/>
          <Column id="CNTRCT_REGIST_DT" type="STRING" size="256"/>
          <Column id="REAL_COMPET_DE" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_cntrctDecsnDetail" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false" onrowposchanged="ds_cntrctDecsnInfo_onrowposchanged">
        <ColumnInfo>
          <Column id="DECSN_CHK" type="STRING" size="256"/>
          <Column id="CNTRCT_NO" type="STRING" size="256"/>
          <Column id="CNTRCT_DECSN_YEAR" type="STRING" size="256"/>
          <Column id="CNTRCT_DECSN_SN" type="STRING" size="256"/>
          <Column id="DETAIL_SN" type="STRING" size="256"/>
          <Column id="ENTRPS_SE_NM" type="STRING" size="256"/>
          <Column id="MNGT_AT" type="STRING" size="256"/>
          <Column id="MNGT_AT_NM" type="STRING" size="256"/>
          <Column id="QOTA_RT" type="STRING" size="256"/>
          <Column id="BCNC_CODE" type="STRING" size="256"/>
          <Column id="BCNC_NM" type="STRING" size="256"/>
          <Column id="BCNC_NM2" type="STRING" size="256"/>
          <Column id="ORGINL_OUTSRC_BCNC_CODE" type="STRING" size="256"/>
          <Column id="ORGINL_OUTSRC_BCNC_NM" type="STRING" size="256"/>
          <Column id="PYMNT_FNNC_INSTT_CODE" type="STRING" size="256"/>
          <Column id="PYMNT_FNNC_INSTT_NM" type="STRING" size="256"/>
          <Column id="PYMNT_DPSTR_NM" type="STRING" size="256"/>
          <Column id="PYMNT_ACNUTNO" type="STRING" size="256"/>
          <Column id="DECSN_AMOUNT" type="BIGDECIMAL" size="256"/>
          <Column id="SUPLY_AMOUNT" type="BIGDECIMAL" size="256"/>
          <Column id="VAT" type="BIGDECIMAL" size="256"/>
          <Column id="ISSU_SEQNO" type="STRING" size="256"/>
          <Column id="BILL_TYPE" type="STRING" size="256"/>
          <Column id="BILL_KND" type="STRING" size="256"/>
          <Column id="TAX_TYPE" type="STRING" size="256"/>
          <Column id="POPS_CODE" type="STRING" size="256"/>
          <Column id="ISSU_ID" type="STRING" size="256"/>
          <Column id="ADRES" type="STRING" size="256"/>
          <Column id="ENTRPRS_SE" type="STRING" size="256"/>
          <Column id="EVRFRND" type="STRING" size="256"/>
          <Column id="TCNDVLP" type="STRING" size="256"/>
          <Column id="CNTRWK_PRPOS_MTRIL" type="STRING" size="256"/>
          <Column id="AREA_ENTRPS" type="STRING" size="256"/>
          <Column id="FEMALE_ENTRPRS" type="STRING" size="256"/>
          <Column id="DSPSN" type="STRING" size="256"/>
          <Column id="SRSILL_DSPSN" type="STRING" size="256"/>
          <Column id="SOCTY_ENTRPRS" type="STRING" size="256"/>
          <Column id="DSPSN_PRDCTN_FCLTY" type="STRING" size="256"/>
          <Column id="SOCTY_CPER_MXTR" type="STRING" size="256"/>
          <Column id="GREEN_PRDUCT" type="STRING" size="256"/>
          <Column id="DSPSN_STD_BPLC" type="STRING" size="256"/>
          <Column id="WATER_INDUST" type="STRING" size="256"/>
          <Column id="MDLC_INDUST" type="STRING" size="256"/>
          <Column id="FARMNG_INDUST" type="STRING" size="256"/>
          <Column id="ENERGY_INDUST" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_cntrct">
        <ColumnInfo>
          <Column id="CNTRCT_NO" type="STRING" size="256"/>
          <Column id="BSNS_CODE" type="STRING" size="256"/>
          <Column id="BSNS_NM" type="STRING" size="256"/>
          <Column id="REQEST_NO" type="STRING" size="256"/>
          <Column id="CNTRCT_SE" type="STRING" size="256"/>
          <Column id="DETAIL_SE" type="STRING" size="256"/>
          <Column id="CNTRCT_NM" type="STRING" size="256"/>
          <Column id="CNTRCT_AMOUNT" type="STRING" size="256"/>
          <Column id="CNTRCT_MTH_SE" type="STRING" size="256"/>
          <Column id="CNTRCT_DISPOS_SE" type="STRING" size="256"/>
          <Column id="OUTSRC_MTH_SE" type="STRING" size="256"/>
          <Column id="BID_DE" type="STRING" size="256"/>
          <Column id="CNTRCT_DE" type="STRING" size="256"/>
          <Column id="REAL_COMPET_DE" type="STRING" size="256"/>
          <Column id="STRWRK_DE" type="STRING" size="256"/>
          <Column id="COMPET_DE" type="STRING" size="256"/>
          <Column id="PRVCNTR_PRVONSH" type="STRING" size="256"/>
          <Column id="PRCURE_CNTRCT_NO" type="STRING" size="256"/>
          <Column id="PRCURE_FEE" type="STRING" size="256"/>
          <Column id="FILE_SN" type="STRING" size="256"/>
          <Column id="MNG_DEPT_CODE" type="STRING" size="256"/>
          <Column id="MNG_DEPT_NM" type="STRING" size="256"/>
          <Column id="MANGR_EMPNM" type="STRING" size="256"/>
          <Column id="SPT_LOCPLC" type="STRING" size="256"/>
          <Column id="INFRML_CNTRCT_AT" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_fileInfo">
        <ColumnInfo>
          <Column id="SYS_SE_CODE" type="STRING" size="256"/>
          <Column id="JOB_SE" type="STRING" size="256"/>
          <Column id="DATASET_NAME" type="STRING" size="256"/>
          <Column id="DATASET_ROW" type="STRING" size="256"/>
          <Column id="TABLE_NAME" type="STRING" size="256"/>
          <Column id="FILE_SN_COLUMN" type="STRING" size="256"/>
          <Column id="SN_TYPE" type="STRING" size="256"/>
          <Column id="FILE_SN" type="STRING" size="256"/>
        </ColumnInfo>
        <Rows>
          <Row>
            <Col id="SYS_SE_CODE">MIS</Col>
            <Col id="JOB_SE">ACC</Col>
            <Col id="DATASET_NAME">ds_fileInfo</Col>
            <Col id="DATASET_ROW">0</Col>
            <Col id="TABLE_NAME">TBACC_EXP_DSN_MASTR</Col>
            <Col id="FILE_SN_COLUMN">FILE_SN</Col>
            <Col id="SN_TYPE">NEW</Col>
          </Row>
        </Rows>
      </Dataset>
      <Dataset id="ds_copyFileList" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="CHK" type="STRING" size="256"/>
          <Column id="PROGRS" type="BIGDECIMAL" size="16"/>
          <Column id="ORGINL_FILE_NM" type="string" size="32"/>
          <Column id="FILE_EXTSN" type="string" size="32"/>
          <Column id="FILE_STRE_COURS" type="string" size="32"/>
          <Column id="FILE_ID" type="string" size="32"/>
          <Column id="SN" type="bigdecimal" size="16"/>
          <Column id="SYS_SE_CODE" type="string" size="32"/>
          <Column id="FILE_IMAGE" type="string" size="32"/>
          <Column id="FILE_TY" type="string" size="32"/>
          <Column id="JOB_SE" type="string" size="32"/>
          <Column id="DELETE_IMAGE" type="string" size="32"/>
          <Column id="STRE_FILE_NM" type="string" size="32"/>
          <Column id="FILE_MG" type="bigdecimal" size="16"/>
          <Column id="FILE_CN" type="string" size="32"/>
          <Column id="FILE_ORDR" type="bigdecimal" size="16"/>
          <Column id="TRNSMIS_FILE_SIZE" type="string" size="32"/>
          <Column id="USE_AT" type="string" size="32"/>
          <Column id="STTUS" type="string" size="32"/>
          <Column id="FILE_SN" type="bigdecimal" size="16"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_parentFileList">
        <ColumnInfo>
          <Column id="CHK" type="STRING" size="256"/>
          <Column id="PROGRS" type="BIGDECIMAL" size="16"/>
          <Column id="ORGINL_FILE_NM" type="string" size="32"/>
          <Column id="FILE_EXTSN" type="string" size="32"/>
          <Column id="FILE_STRE_COURS" type="string" size="32"/>
          <Column id="FILE_ID" type="string" size="32"/>
          <Column id="SN" type="bigdecimal" size="16"/>
          <Column id="SYS_SE_CODE" type="string" size="32"/>
          <Column id="FILE_IMAGE" type="string" size="32"/>
          <Column id="FILE_TY" type="string" size="32"/>
          <Column id="JOB_SE" type="string" size="32"/>
          <Column id="DELETE_IMAGE" type="string" size="32"/>
          <Column id="STRE_FILE_NM" type="string" size="32"/>
          <Column id="FILE_MG" type="bigdecimal" size="16"/>
          <Column id="FILE_CN" type="string" size="32"/>
          <Column id="FILE_ORDR" type="bigdecimal" size="16"/>
          <Column id="TRNSMIS_FILE_SIZE" type="string" size="32"/>
          <Column id="USE_AT" type="string" size="32"/>
          <Column id="STTUS" type="string" size="32"/>
          <Column id="FILE_SN" type="bigdecimal" size="16"/>
        </ColumnInfo>
      </Dataset>
    </Objects>
    <Bind/>
    <Script type="xscript5.0"><![CDATA[
/***********************************************************************
 * Script Include 
 ************************************************************************/
// 시스템 공통 라이브러리 Include
include "lib::comInclude.xjs";
include "mis_lib::misUtil.xjs";



/**********************************************************************
* 화면 변수 선언부
***********************************************************************/
this.isLoad = false;

this.arg_0;
this.trgFormId;
this.trgFormId2;
this.anactKnd;
this.decsnYear;
this.decsnNo;


/**********************************************************************
* onInit / onLoad 영역
***********************************************************************/

this.CTR030600_P01_oninit = function(obj:Form, e:nexacro.InitEventInfo)
{
	// ..
}

this.CTR030600_P01_onload = function(obj:Form, e:nexacro.LoadEventInfo)
{
	// Form 초기화
	this.fn_init_form();

	// DataSet 초기화
	this.fn_init_dataset();
	
	this.arg_0      = this.parent.arg_0;
	this.trgFormId  = this.parent.trgFormId;
	this.trgFormId2 = this.parent.trgFormId2;
	this.anactKnd   = this.parent.anactKnd;
	this.decsnYear  = this.parent.decsnYear;
	this.decsnNo    = this.parent.decsnNo;
	
	this.div_decsn.set_url("mis_acc::ACC020203_P" + (this.anactKnd=='03'?'01':this.parent.anactKnd) + ".xfdl");
	this.div_decsn.set_visible(true);
	
	this.setTimer(0, 500);
}


/***********************************************************************
 * Form/Dataset 오브젝트 초기화
 ***********************************************************************/
 
/*
 * 함수명  	: initForm
 * 설명 		: Form을 초기화한다.
 * params  		: None
 * return Type 	: None
 * 사용법		: this.initForm();
 */
this.fn_init_form = function()
{
	this.gfn_initForm(this);
	this.fn_misFormInit(this);
}

this.CTR030600_P01_ontimer = function(obj:Form, e:nexacro.TimerEventInfo)
{
	if(this.isLoad == false && this.div_decsn.ds_expDsnMastr.getRowCount() > 0) {
		// 종료버튼 이벤트 갱신
		var fn_popupClose = function(obj, e) {
			this.close("C");
		}
		this.div_decsn.btn_close2.addEventHandler("onclick", fn_popupClose, this)
		
		// 부모화면에서 데이터 전달
		this.ds_cntrctDecsnInfo.copyData(this.parent.ds_cntrctDecsnInfo);
		this.ds_cntrctDecsnDetail.copyData(this.parent.ds_cntrctDecsnDetail);
		this.ds_cntrct.copyData(this.parent.ds_cntrct);
		
		if(this.comUtils.isNull(this.decsnNo)) {
			// 부모화면에서 회계화면으로 데이터 전달
			if(this.div_decsn.ds_fileList && this.parent.ds_accFileList) {
				
				// 첨부파일 정보 copy(accFileList to fileList)
				this.ds_copyFileList.loadXML(this.parent.ds_accFileList.saveXML());
				this.ds_parentFileList.loadXML(this.parent.ds_accFileList.saveXML());
				
				var sSvcID       = "autoFileSn"
				var sController  = "/hsco/mis/mis/MIS000000/saveAutoFileSn.do";
				var sInDatasets  = "input1=ds_fileInfo input2=ds_copyFileList:A";
				var sOutDatasets = "ds_fileInfo=output1 ds_copyFileList=output2";
				Ex.core.tran(this, sSvcID, sController, sInDatasets, sOutDatasets, "", "", true, false);	// 동기방식 전송
				
				var fileSn = this.ds_fileInfo.getColumn(0, "FILE_SN");
				this.div_decsn.ds_expDsnMastr.setColumn(0, "FILE_SN", fileSn);
				
				// 첨부파일 정보 copy(accFileList to fileList)
				this.div_decsn.ds_fileList.loadXML(this.ds_copyFileList.saveXML());
			}
			this.div_decsn.ds_dscsnNo.loadXML(this.ds_cntrctDecsnInfo.saveXML());
			
			var cdRow = this.ds_cntrctDecsnInfo.rowposition;
			
			// 계약정보
			var cntrctNo             = this.ds_cntrctDecsnInfo.getColumn(cdRow, "CNTRCT_NO");
			this.div_decsn.ds_expDsnMastr.setColumn(0, "CNTRCT_NO", cntrctNo);
			
			// 지출계좌정보
			var expndtrFnncInsttCode = this.ds_cntrctDecsnInfo.getColumn(cdRow, "EXPNDTR_FNNC_INSTT_CODE");
			var expndtrFnncInsttNm   = this.ds_cntrctDecsnInfo.getColumn(cdRow, "EXPNDTR_FNNC_INSTT_NM");
			var expndtrAcnutno       = this.ds_cntrctDecsnInfo.getColumn(cdRow, "EXPNDTR_ACNUTNO");
			this.div_decsn.ds_expDsnMastr.setColumn(0, "FNNC_INSTT_CODE", expndtrFnncInsttCode);
			this.div_decsn.ds_expDsnMastr.setColumn(0, "ACNUT_NM",        expndtrFnncInsttNm);
			this.div_decsn.ds_expDsnMastr.setColumn(0, "ACNUTNO",         expndtrAcnutno);
			
			// 적요
			var sumry                = this.ds_cntrctDecsnInfo.getColumn(cdRow, "SUMRY");
			this.div_decsn.ds_expDsnMastr.setColumn(0, "SUMRY", sumry);
			
			// 결의서구분 및 부서코드
			var deptCode             = this.ds_cntrctDecsnInfo.getColumn(cdRow, "DEPT_CODE");
			this.div_decsn.ds_expDsnMastr.setColumn(0, "ANACT_KND", this.anactKnd);
			this.div_decsn.ds_expDsnMastr.setColumn(0, "DEPT_CODE", deptCode);
			
			// 사업정보
			var bsnsCode = this.ds_cntrctDecsnInfo.getColumn(cdRow, "BSNS_CODE");
			var bsnsNm   = this.ds_cntrctDecsnInfo.getColumn(cdRow, "BSNS_NM");
			this.div_decsn.ds_expDsnMastr.setColumn(0, "BSNS_CODE", bsnsCode);
			this.div_decsn.ds_expDsnMastr.setColumn(0, "BSNS_NM",   bsnsNm);
			
			// 계약일자, 검수일자
			try {
				var cntrctDe = this.ds_cntrct.getColumn(0, "CNTRCT_DE");
				var acptncDe = this.parent.prsecDe;
				this.div_decsn.ds_expDsnMtrDet.setColumn(0, "CNTRCT_DE", cntrctDe);
				this.div_decsn.ds_expDsnMtrDet.setColumn(0, "ACPTNC_DE", acptncDe);
			} catch(e) {}
			
			// 계약구분, 계약방식
			try {
				var cntrctSe    = this.ds_cntrct.getColumn(0, "CNTRCT_SE");
				var cntrctMthSe = this.ds_cntrct.getColumn(0, "CNTRCT_MTH_SE");
				this.div_decsn.ds_expDsnMtrDet.setColumn(0, "CNTRCT_SE",   cntrctSe    );
				this.div_decsn.ds_expDsnMtrDet.setColumn(0, "CNTRCT_MTHD", cntrctMthSe );
			} catch(e) {}
			
			// 준공일자, 공사대장기재
			try {
				var realCompetDe   = this.ds_cntrctDecsnInfo.getColumn(0, "REAL_COMPET_DE");
				var cntrctRegistDt = this.ds_cntrctDecsnInfo.getColumn(0, "CNTRCT_REGIST_DT");
				trace(realCompetDe + "     " + cntrctRegistDt);
				this.div_decsn.ds_expDsnMtrDet.setColumn(0, "COMPT_DE",         realCompetDe   );
				this.div_decsn.ds_expDsnMtrDet.setColumn(0, "CNTR_RGST_STA_DE", cntrctRegistDt );
			} catch(e) {}
			
			
			// 거래처정보
			var pxpayAt = this.ds_cntrctDecsnInfo.getColumn(cdRow, "PXPAY_AT");
			if(pxpayAt == '1') {
				var nRow = 0;
				for(var fRow = 0; fRow < this.ds_cntrctDecsnDetail.getRowCount(); fRow++) {
					var decsnChk = this.ds_cntrctDecsnDetail.getColumn(fRow, "DECSN_CHK");
					if(decsnChk != '1') {
						continue;	// 결의대상만 추가
					}
					
					if(fRow > 0) {
						nRow = this.div_decsn.ds_expDsnDetail.addRow();
					}
					
					// 조달청 고정
					var bcncCode = '001370'
					var bcncNm   = "인천지방조달청";
					
					this.div_decsn.ds_expDsnDetail.setColumn(nRow, "BCNC_CODE",       bcncCode);
					this.div_decsn.ds_expDsnDetail.setColumn(nRow, "BCNC_NM",         bcncNm);
					this.div_decsn.ds_expDsnDetail.setColumn(nRow, "NM",              bcncNm);
					this.div_decsn.ds_expDsnDetail.setColumn(nRow, "RCPT_MAN",        bcncNm);
					
					// 결의금액
					var decsnAmount   = this.ds_cntrctDecsnDetail.getColumn(fRow, "DECSN_AMOUNT");
					var suplyAmount   = this.ds_cntrctDecsnDetail.getColumn(fRow, "SUPLY_AMOUNT");
					var vat           = this.ds_cntrctDecsnDetail.getColumn(fRow, "VAT");
					
					this.div_decsn.ds_expDsnDetail.setColumn(nRow, "DECSN_AMOUNT", decsnAmount);
					this.div_decsn.ds_expDsnDetail.setColumn(nRow, "SUPLY_AMOUNT", suplyAmount);
					this.div_decsn.ds_expDsnDetail.setColumn(nRow, "VAT",          vat);
					
					this.div_decsn.ds_expDsnMastr.setColumn(0,  "DECSN_AMOUNT", this.ds_cntrctDecsnDetail.getSum("DECSN_AMOUNT"));
					this.div_decsn.ds_expDsnMtrDet.setColumn(0, "SUPLY_AMOUNT", this.ds_cntrctDecsnDetail.getSum("SUPLY_AMOUNT"));
					this.div_decsn.ds_expDsnMtrDet.setColumn(0, "VAT_AMOUNT",   this.ds_cntrctDecsnDetail.getSum("VAT"));
					
					// 세금계산서
					var billType  = this.ds_cntrctDecsnDetail.getColumn(fRow, "BILL_TYPE" );
					var issuSeqno = this.ds_cntrctDecsnDetail.getColumn(fRow, "ISSU_SEQNO");
					var billKnd   = this.ds_cntrctDecsnDetail.getColumn(fRow, "BILL_KND"  );
					var vatAt     = '0'
					if(!this.comUtils.isNull(vat)) {
						if(vat > 0) {
							vatAt = '1';	// 부가세여부
						}
					}
					
					this.div_decsn.ds_expDsnDetail.setColumn(nRow, "BILL_TYPE",  billType);
					this.div_decsn.ds_expDsnDetail.setColumn(nRow, "ISSU_SEQNO", issuSeqno);
					this.div_decsn.ds_expDsnDetail.setColumn(nRow, "BILL_KND",   billKnd);
					this.div_decsn.ds_expDsnDetail.setColumn(nRow, "VAT_AT",     vatAt);
					
					
					// 거래처의 기업정보
					var entrprsSe            = this.ds_cntrctDecsnDetail.getColumn(fRow, "ENTRPRS_SE");
					var evrfrnd              = this.ds_cntrctDecsnDetail.getColumn(fRow, "EVRFRND");
					var tcndvlp              = this.ds_cntrctDecsnDetail.getColumn(fRow, "TCNDVLP");
					var cntrwkPrposMtril     = this.ds_cntrctDecsnDetail.getColumn(fRow, "CNTRWK_PRPOS_MTRIL");
					var areaEntrps           = this.ds_cntrctDecsnDetail.getColumn(fRow, "AREA_ENTRPS");
					var femaleEntrprs        = this.ds_cntrctDecsnDetail.getColumn(fRow, "FEMALE_ENTRPRS");
					var dspsn                = this.ds_cntrctDecsnDetail.getColumn(fRow, "DSPSN");
					var srsillDspsn          = this.ds_cntrctDecsnDetail.getColumn(fRow, "SRSILL_DSPSN");
					var soctyEntrprs         = this.ds_cntrctDecsnDetail.getColumn(fRow, "SOCTY_ENTRPRS");
					var dspsnPrdctnFclty     = this.ds_cntrctDecsnDetail.getColumn(fRow, "DSPSN_PRDCTN_FCLTY");
					var soctyCperMxtr        = this.ds_cntrctDecsnDetail.getColumn(fRow, "SOCTY_CPER_MXTR");
					var greenPrduct          = this.ds_cntrctDecsnDetail.getColumn(fRow, "GREEN_PRDUCT");
					var dspsnStdBplc         = this.ds_cntrctDecsnDetail.getColumn(fRow, "DSPSN_STD_BPLC");
					var waterIndust          = this.ds_cntrctDecsnDetail.getColumn(fRow, "WATER_INDUST");
					var mdlcIndust           = this.ds_cntrctDecsnDetail.getColumn(fRow, "MDLC_INDUST");
					var farmngIndust         = this.ds_cntrctDecsnDetail.getColumn(fRow, "FARMNG_INDUST");
					var energyIndust         = this.ds_cntrctDecsnDetail.getColumn(fRow, "ENERGY_INDUST");
					
					this.div_decsn.ds_expDsnDetail.setColumn(nRow, "ENTRPRS_SE",              entrprsSe);
					this.div_decsn.ds_expDsnDetail.setColumn(nRow, "EVRFRND",                 evrfrnd);
					this.div_decsn.ds_expDsnDetail.setColumn(nRow, "TCNDVLP",                 tcndvlp);
					this.div_decsn.ds_expDsnDetail.setColumn(nRow, "CNTRWK_PRPOS_MTRIL",      cntrwkPrposMtril);
					this.div_decsn.ds_expDsnDetail.setColumn(nRow, "AREA_ENTRPS",             areaEntrps);
					this.div_decsn.ds_expDsnDetail.setColumn(nRow, "FEMALE_ENTRPRS",          femaleEntrprs);
					this.div_decsn.ds_expDsnDetail.setColumn(nRow, "MIDDL_PD_CMPET_PRDUCT",   '');
					this.div_decsn.ds_expDsnDetail.setColumn(nRow, "FRGCPT_ENTRPRS",          '');
					this.div_decsn.ds_expDsnDetail.setColumn(nRow, "DSPSN",                   dspsn);
					this.div_decsn.ds_expDsnDetail.setColumn(nRow, "SRSILL_DSPSN",            srsillDspsn);
					this.div_decsn.ds_expDsnDetail.setColumn(nRow, "SOCTY_ENTRPRS",           soctyEntrprs);
					this.div_decsn.ds_expDsnDetail.setColumn(nRow, "DSPSN_PRDCTN_FCLTY",      dspsnPrdctnFclty);
					this.div_decsn.ds_expDsnDetail.setColumn(nRow, "SOCTY_CPER_MXTR",         soctyCperMxtr);
					this.div_decsn.ds_expDsnDetail.setColumn(nRow, "GREEN_PRDUCT",            greenPrduct);
					this.div_decsn.ds_expDsnDetail.setColumn(nRow, "DSPSN_STD_BPLC",          dspsnStdBplc);
					this.div_decsn.ds_expDsnDetail.setColumn(nRow, "WATER_INDUST",            waterIndust);
					this.div_decsn.ds_expDsnDetail.setColumn(nRow, "MDLC_INDUST",             mdlcIndust);
					this.div_decsn.ds_expDsnDetail.setColumn(nRow, "FARMNG_INDUST",           farmngIndust);
					this.div_decsn.ds_expDsnDetail.setColumn(nRow, "ENERGY_INDUST",           energyIndust);
				}
			} else {
				var nRow = 0;
				for(var fRow = 0; fRow < this.ds_cntrctDecsnDetail.getRowCount(); fRow++) {
					var decsnChk = this.ds_cntrctDecsnDetail.getColumn(fRow, "DECSN_CHK");
					if(decsnChk != '1') {
						continue;	// 결의대상만 추가
					}
					
					if(fRow > 0) {
						nRow = this.div_decsn.ds_expDsnDetail.addRow();
					}
					
					var bcncCode             = this.ds_cntrctDecsnDetail.getColumn(fRow, "BCNC_CODE");
					var bcncNm               = this.ds_cntrctDecsnDetail.getColumn(fRow, "BCNC_NM");
					var nm                   = this.ds_cntrctDecsnDetail.getColumn(fRow, "PYMNT_DPSTR_NM");
					var adres                = this.ds_cntrctDecsnDetail.getColumn(fRow, "ADRES");
					var pymntFnncInsttCode   = this.ds_cntrctDecsnDetail.getColumn(fRow, "PYMNT_FNNC_INSTT_CODE");
					var pymntAcnutno         = this.ds_cntrctDecsnDetail.getColumn(fRow, "PYMNT_ACNUTNO");
					
					this.div_decsn.ds_expDsnDetail.setColumn(nRow, "BCNC_CODE",       bcncCode);
					this.div_decsn.ds_expDsnDetail.setColumn(nRow, "BCNC_NM",         bcncNm);
					this.div_decsn.ds_expDsnDetail.setColumn(nRow, "NM",              nm);
					this.div_decsn.ds_expDsnDetail.setColumn(nRow, "RCPT_MAN",        nm);
					this.div_decsn.ds_expDsnDetail.setColumn(nRow, "ADRES",           adres);
					this.div_decsn.ds_expDsnDetail.setColumn(nRow, "FNNC_INSTT_CODE", pymntFnncInsttCode);
					this.div_decsn.ds_expDsnDetail.setColumn(nRow, "ACNUTNO",         pymntAcnutno);
					
					
					// 결의금액
					var decsnAmount   = this.ds_cntrctDecsnDetail.getColumn(fRow, "DECSN_AMOUNT");
					var suplyAmount   = this.ds_cntrctDecsnDetail.getColumn(fRow, "SUPLY_AMOUNT");
					var vat           = this.ds_cntrctDecsnDetail.getColumn(fRow, "VAT");
					
					this.div_decsn.ds_expDsnDetail.setColumn(nRow, "DECSN_AMOUNT",       decsnAmount);
					this.div_decsn.ds_expDsnDetail.setColumn(nRow, "SUPLY_AMOUNT",       suplyAmount);
					this.div_decsn.ds_expDsnDetail.setColumn(nRow, "VAT",                vat);
					
					this.div_decsn.ds_expDsnMastr.setColumn(0,  "DECSN_AMOUNT",        this.ds_cntrctDecsnDetail.getSum("DECSN_AMOUNT"));
					this.div_decsn.ds_expDsnMtrDet.setColumn(0, "SUPLY_AMOUNT",        this.ds_cntrctDecsnDetail.getSum("SUPLY_AMOUNT"));
					this.div_decsn.ds_expDsnMtrDet.setColumn(0, "VAT_AMOUNT",          this.ds_cntrctDecsnDetail.getSum("VAT"));
					
					// 세금계산서
					var billType  = this.ds_cntrctDecsnDetail.getColumn(fRow, "BILL_TYPE" );
					var issuSeqno = this.ds_cntrctDecsnDetail.getColumn(fRow, "ISSU_SEQNO");
					var billKnd   = this.ds_cntrctDecsnDetail.getColumn(fRow, "BILL_KND"  );
					var vatAt     = '0'
					if(!this.comUtils.isNull(vat)) {
						if(vat > 0) {
							vatAt = '1';	// 부가세여부
						}
					}
					
					this.div_decsn.ds_expDsnDetail.setColumn(nRow, "BILL_TYPE",  billType);
					this.div_decsn.ds_expDsnDetail.setColumn(nRow, "ISSU_SEQNO", issuSeqno);
					this.div_decsn.ds_expDsnDetail.setColumn(nRow, "BILL_KND",   billKnd);
					this.div_decsn.ds_expDsnDetail.setColumn(nRow, "VAT_AT",     vatAt);
					
					
					// 거래처의 기업정보
					var entrprsSe            = this.ds_cntrctDecsnDetail.getColumn(fRow, "ENTRPRS_SE");
					var evrfrnd              = this.ds_cntrctDecsnDetail.getColumn(fRow, "EVRFRND");
					var tcndvlp              = this.ds_cntrctDecsnDetail.getColumn(fRow, "TCNDVLP");
					var cntrwkPrposMtril     = this.ds_cntrctDecsnDetail.getColumn(fRow, "CNTRWK_PRPOS_MTRIL");
					var areaEntrps           = this.ds_cntrctDecsnDetail.getColumn(fRow, "AREA_ENTRPS");
					var femaleEntrprs        = this.ds_cntrctDecsnDetail.getColumn(fRow, "FEMALE_ENTRPRS");
					var dspsn                = this.ds_cntrctDecsnDetail.getColumn(fRow, "DSPSN");
					var srsillDspsn          = this.ds_cntrctDecsnDetail.getColumn(fRow, "SRSILL_DSPSN");
					var soctyEntrprs         = this.ds_cntrctDecsnDetail.getColumn(fRow, "SOCTY_ENTRPRS");
					var dspsnPrdctnFclty     = this.ds_cntrctDecsnDetail.getColumn(fRow, "DSPSN_PRDCTN_FCLTY");
					var soctyCperMxtr        = this.ds_cntrctDecsnDetail.getColumn(fRow, "SOCTY_CPER_MXTR");
					var greenPrduct          = this.ds_cntrctDecsnDetail.getColumn(fRow, "GREEN_PRDUCT");
					var dspsnStdBplc         = this.ds_cntrctDecsnDetail.getColumn(fRow, "DSPSN_STD_BPLC");
					var waterIndust          = this.ds_cntrctDecsnDetail.getColumn(fRow, "WATER_INDUST");
					var mdlcIndust           = this.ds_cntrctDecsnDetail.getColumn(fRow, "MDLC_INDUST");
					var farmngIndust         = this.ds_cntrctDecsnDetail.getColumn(fRow, "FARMNG_INDUST");
					var energyIndust         = this.ds_cntrctDecsnDetail.getColumn(fRow, "ENERGY_INDUST");
					
					this.div_decsn.ds_expDsnDetail.setColumn(nRow, "ENTRPRS_SE",              entrprsSe);
					this.div_decsn.ds_expDsnDetail.setColumn(nRow, "EVRFRND",                 evrfrnd);
					this.div_decsn.ds_expDsnDetail.setColumn(nRow, "TCNDVLP",                 tcndvlp);
					this.div_decsn.ds_expDsnDetail.setColumn(nRow, "CNTRWK_PRPOS_MTRIL",      cntrwkPrposMtril);
					this.div_decsn.ds_expDsnDetail.setColumn(nRow, "AREA_ENTRPS",             areaEntrps);
					this.div_decsn.ds_expDsnDetail.setColumn(nRow, "FEMALE_ENTRPRS",          femaleEntrprs);
					this.div_decsn.ds_expDsnDetail.setColumn(nRow, "MIDDL_PD_CMPET_PRDUCT",   '');
					this.div_decsn.ds_expDsnDetail.setColumn(nRow, "FRGCPT_ENTRPRS",          '');
					this.div_decsn.ds_expDsnDetail.setColumn(nRow, "DSPSN",                   dspsn);
					this.div_decsn.ds_expDsnDetail.setColumn(nRow, "SRSILL_DSPSN",            srsillDspsn);
					this.div_decsn.ds_expDsnDetail.setColumn(nRow, "SOCTY_ENTRPRS",           soctyEntrprs);
					this.div_decsn.ds_expDsnDetail.setColumn(nRow, "DSPSN_PRDCTN_FCLTY",      dspsnPrdctnFclty);
					this.div_decsn.ds_expDsnDetail.setColumn(nRow, "SOCTY_CPER_MXTR",         soctyCperMxtr);
					this.div_decsn.ds_expDsnDetail.setColumn(nRow, "GREEN_PRDUCT",            greenPrduct);
					this.div_decsn.ds_expDsnDetail.setColumn(nRow, "DSPSN_STD_BPLC",          dspsnStdBplc);
					this.div_decsn.ds_expDsnDetail.setColumn(nRow, "WATER_INDUST",            waterIndust);
					this.div_decsn.ds_expDsnDetail.setColumn(nRow, "MDLC_INDUST",             mdlcIndust);
					this.div_decsn.ds_expDsnDetail.setColumn(nRow, "FARMNG_INDUST",           farmngIndust);
					this.div_decsn.ds_expDsnDetail.setColumn(nRow, "ENERGY_INDUST",           energyIndust);
				}
			}
			
		}
		this.isLoad = true;
		this.killTimer(0);
	}
}


/*
 * 함수명  	: initDataset
 * 설명 		: Dataset을 초기화한다.
 *                주로, 조건 Dataset들(ds_cond, ds_cond_00, ds_cond_01, ...) 을 초기화한다.
 * params  		: None
 * return Type 	: None
 * 사용법		: this.initDataset();
 */
this.fn_init_dataset = function()
{
	//..
}



/**********************************************************************
* non-Transaction 관련 컴포넌트 이벤트 처리 함수
***********************************************************************
*
* 1. 공통함수 처리
* 2. 사용자 정의 함수 처리
*
***********************************************************************/



/**********************************************************************
* 공통함수 처리
***********************************************************************/



/**********************************************************************
* 사용자 정의 함수 처리
***********************************************************************/
]]></Script>
  </Form>
</FDL>
