<?xml version="1.0" encoding="utf-8"?>
<FDL version="1.5">
  <TypeDefinition url="..\..\default_typedef.xml"/>
  <Form id="SAL020108_P01" classname="SAL020108_P01" left="0" top="0" width="600" height="520" titletext="학자보조금신청" onload="SAL020108_P01_onload" oninit="SAL020108_P01_oninit">
    <Layouts>
      <Layout>
        <Static id="Static34" taborder="74" cssclass="sta_WF_PopupBg" left="0" top="0" width="600" onclick="Static34_onclick" bottom="0"/>
        <Static id="Static26" taborder="49" cssclass="sta_WF_Labelbg" left="16%" top="333" right="2.33%" height="27"/>
        <Static id="Static24" taborder="47" cssclass="sta_WF_Labelbg" left="16%" top="307" right="2.33%" height="27"/>
        <Static id="Static19" taborder="43" cssclass="sta_WF_Labelbg" left="16%" top="281" right="2.33%" height="27"/>
        <Static id="Static22" taborder="45" cssclass="sta_WF_Labelbg" left="96" top="307" right="2.33%" height="27"/>
        <Static id="Static15" taborder="41" cssclass="sta_WF_Labelbg" left="16%" top="255" right="2.33%" height="27"/>
        <Static id="Static09" taborder="36" cssclass="sta_WF_Labelbg" left="96" top="201" right="15" height="27"/>
        <Static id="Static04" taborder="33" cssclass="sta_WF_Labelbg" left="16%" top="175" right="15" height="27"/>
        <Static id="Static06" taborder="22" text="15" visible="false" left="0.33%" top="0" right="0.33%" height="15" style="background:#dc143c3c;align:center middle;"/>
        <Static id="sta_title" taborder="23" text="학자보조금신청정보" cssclass="sta_WF_Title01" left="15" top="17" height="21" width="240"/>
        <Static id="Static05" taborder="24" text="15" visible="false" left="0" top="0" style="background:#1b3cd23c;align:center middle;" width="15" bottom="0"/>
        <Static id="Static00" taborder="25" text="15" visible="false" top="0" right="0" style="background:#1b3cd23c;align:center middle;" width="15" bottom="0"/>
        <Static id="Static20" taborder="26" text="취학자녀선택" cssclass="sta_WF_Title02" left="2.5%" top="152" right="65.17%" height="27"/>
        <Button id="btn_Confirm" taborder="27" text="확인" cssclass="btn_WF_CRUD" left="474" top="15" height="25" width="50" onclick="btn_Confirm_onclick" visible="false"/>
        <Button id="btn_Close" taborder="28" text="닫기" onclick="btn_Close_onclick" cssclass="btn_WF_CRUD" left="527" top="15" height="25" width="50"/>
        <Static id="Static51" taborder="30" cssclass="sta_WF_Labelbg" left="96" top="149" height="27" right="15"/>
        <Edit id="edt_EMPNO" taborder="4" enable="false" left="117" top="152" height="21" width="99" cssclass="edt_WF_Readonly"/>
        <Static id="Static84" taborder="29" text="사원번호" cssclass="sta_WF_Label" left="15" top="149" height="27" width="100"/>
        <Static id="Static02" taborder="31" text="사원명" cssclass="sta_WF_Label" left="49.83%" top="149" height="27" width="100"/>
        <Edit id="edt_EMPNM" taborder="5" enable="false" left="66.83%" top="152" height="21" width="105" cssclass="edt_WF_Readonly"/>
        <Static id="Static03" taborder="32" text="자녀선택" cssclass="sta_WF_Label" left="15" top="175" height="27" width="100"/>
        <Static id="Static07" taborder="34" text="자녀생년월일" cssclass="sta_WF_Label" left="299" top="175" height="27" width="100"/>
        <Combo id="cmb_FAMILYNM" taborder="6" innerdataset="@DS_FAMILY" codecolumn="FAMILY_NM" datacolumn="FAMILY_NM" left="117" top="178" height="21" width="99" cssclass="cmb_WF_Essential"/>
        <Static id="Static08" taborder="35" text="학교명" cssclass="sta_WF_Label" left="2.5%" top="201" right="80.83%" height="27"/>
        <Static id="Static10" taborder="37" text="학년" cssclass="sta_WF_Label" left="299" top="201" height="27" width="100"/>
        <Edit id="edt_SCHULNM" taborder="8" left="117" top="204" height="21" width="179" cssclass="edt_WF_Essential" lengthunit="utf8" maxlength="75"/>
        <Edit id="edt_GRADE" taborder="9" left="401" top="204" height="21" width="105" cssclass="edt_WF_Essential" lengthunit="utf8" maxlength="4"/>
        <Static id="Static11" taborder="38" text="취학자녀선택" cssclass="sta_WF_Title02" left="15" top="125" height="27" width="194"/>
        <Static id="Static13" taborder="39" text="학자보조금신청" cssclass="sta_WF_Title02" left="15" top="231" height="27" width="194"/>
        <Calendar id="cal_REQSTDE" taborder="12" dateformat="yyyy-MM-dd" left="401" top="258" height="21" cssclass="cal_WF_Readonly" width="105" enable="true" readonly="true"/>
        <Static id="Static14" taborder="40" text="신청분기" cssclass="sta_WF_Label" left="15" top="255" height="27" width="100"/>
        <Static id="Static18" taborder="42" text="수업료" cssclass="sta_WF_Label" left="15" top="281" height="27" width="100"/>
        <Static id="Static21" taborder="44" text="학교운영비" cssclass="sta_WF_Label" left="299" top="281" height="27" width="100"/>
        <Static id="Static23" taborder="46" text="신청총액" cssclass="sta_WF_Label" left="15" top="307" height="27" width="100"/>
        <Static id="Static25" taborder="48" text="비고" cssclass="sta_WF_Label" left="15" top="333" height="27" width="100"/>
        <Combo id="cmb_REQSTYEAR" taborder="10" innerdataset="@DS_YEAR" codecolumn="CODE" datacolumn="NAME" left="117" top="258" height="21" onitemchanged="cmb_REQSTYEAR_onitemchanged" cssclass="cmb_WF_Essential" width="75"/>
        <MaskEdit id="msk_TUTFEE" taborder="13" mask="###,###,###,###,###" left="117" top="284" height="22" onkillfocus="msk_TUTFEE_onkillfocus" width="99" limitbymask="both"/>
        <MaskEdit id="msk_REQSTAMOUNT" taborder="15" mask="###,###,###,###,###" enable="false" left="117" top="309" height="22" width="99" autoselect="true" autoskip="true"/>
        <Static id="Static27" taborder="50" text="신청일자" cssclass="sta_WF_Label" left="49.83%" top="255" right="33.5%" height="27"/>
        <Static id="Static33" taborder="63" text="첨부파일" cssclass="sta_WF_Title02" left="15" top="367" height="27" width="194"/>
        <Static id="sta_EMPL_BANK13" taborder="68" text="재학증명서(입학사실증명), 영수증사본" cssclass="sta_WFDA_labelB" left="86" top="374" height="17" style="align:left middle;" width="293"/>
        <Edit id="edt_RM" taborder="17" left="117" top="336" height="21" width="466" lengthunit="utf8" maxlength="200"/>
        <Static id="Static01" taborder="73" text="15" visible="false" right="0" height="15" style="background:#dc143c3c;align:center middle;" bottom="2" onclick="Static01_onclick" left="0"/>
        <Button id="btn_delFiles" taborder="18" text="선택삭제" onclick="btn_delFiles_onclick" cssclass="btn_WF_Process" top="369" right="103" height="19" width="67" visible="true"/>
        <Button id="btn_uploadFiles" taborder="19" text="파일업로드" onclick="btn_uploadFiles_onclick" cssclass="btn_WF_Process" top="369" right="172" height="19" width="68"/>
        <Button id="btn_downFiles" taborder="20" text="선택다운로드" onclick="btn_downFiles_onclick" cssclass="btn_WF_Process" top="369" right="15" height="19" width="85"/>
        <Calendar id="cal_BRTHDY" taborder="7" dateformat="yyyy-MM-dd" left="401" top="178" width="105" height="21" cssclass="cal_WF_Readonly" readonly="true"/>
        <Static id="Static36" taborder="81" cssclass="sta_WF_Labelbg" left="80" top="61" width="506" height="27"/>
        <Static id="Static37" taborder="83" text="승인여부" cssclass="sta_WF_Label" left="15" top="61" width="70" height="27"/>
        <Combo id="cmb_CONFM_SE" taborder="0" innerdataset="DS_SE3" codecolumn="code" datacolumn="data" onitemchanged="cmb_CONFM_SE_onitemchanged" enable="false" left="87" top="64" width="84" height="21"/>
        <Static id="Static38" taborder="85" text="승인일자" cssclass="sta_WF_Label" left="173" top="61" width="70" height="27"/>
        <Calendar id="cal_CONFM" taborder="1" dateformat="yyyy-MM-dd" enable="false" left="245" top="64" width="107" height="21"/>
        <Static id="Static39" taborder="87" text="5" visible="false" left="0" top="56" right="0" height="5" style="background:#dc143c3c;align:center middle;"/>
        <Static id="Static41" taborder="89" text="승인정보" cssclass="sta_WF_Title02" left="2.5%" top="42" right="75.83%" height="19"/>
        <MaskEdit id="msk_SCHULOPER" taborder="14" mask="###,###,###,###,###" limitbymask="both" onkillfocus="msk_SCHULOPER_onkillfocus" left="401" top="284" width="101" height="22"/>
        <Static id="Static12" taborder="94" text="년" left="196" top="262" width="11" height="15"/>
        <Combo id="cmb_quSe" taborder="11" innerdataset="@ds_quSe" codecolumn="CODE" datacolumn="CODE_NM" cssclass="cmb_WF_Essential" left="213" top="258" width="84" height="21" value="1" text="1분기"/>
        <Static id="Static17" taborder="98" cssclass="sta_WF_Labelbg" left="78" top="87" width="277" height="27"/>
        <Static id="Static16" taborder="96" text="지급년월" cssclass="sta_WF_Label" left="354" top="61" width="70" height="27"/>
        <Div id="div_PYMNT_PREARNGE_YM" taborder="2" url="common::frmSalMonCal.xfdl" left="426" top="64" width="85" height="21" enable="false" async="false"/>
        <Edit id="edt_RETURNCN" taborder="3" enable="false" left="87" top="90" width="265" height="21"/>
        <Static id="Static40" taborder="88" text="반려내용" cssclass="sta_WF_Label" left="15" top="87" width="70" height="27"/>
        <Grid id="grd_cmmnAtchmnfl" taborder="21" binddataset="ds_fileList" autoenter="select" useinputpanel="false" cellsizingtype="col" autofittype="col" onheadclick="grd_cmmnAtchmnfl_onheadclick" left="15" top="392" right="15" bottom="15">
          <Formats>
            <Format id="default">
              <Columns>
                <Column size="40"/>
                <Column size="65"/>
                <Column size="300"/>
                <Column size="80"/>
                <Column size="80"/>
              </Columns>
              <Rows>
                <Row size="24" band="head"/>
                <Row size="40"/>
              </Rows>
              <Band id="head">
                <Cell displaytype="checkbox" edittype="checkbox"/>
                <Cell col="1" text="파일형식"/>
                <Cell col="2" celltype="head" text="파일명"/>
                <Cell col="3" text="확장자"/>
                <Cell col="4" text="사이즈"/>
              </Band>
              <Band id="body">
                <Cell displaytype="checkbox" edittype="checkbox" text="bind:CHK"/>
                <Cell col="1" displaytype="image" text="bind:FILE_IMAGE" autosizerow="limitmin" autosizecol="limitmin"/>
                <Cell col="2" displaytype="normal" style="align:left middle;" text="bind:ORGINL_FILE_NM"/>
                <Cell col="3" text="bind:FILE_EXTSN"/>
                <Cell col="4" text="bind:FILE_MG"/>
              </Band>
            </Format>
          </Formats>
        </Grid>
        <Static id="sta_confmAmount" taborder="104" cssclass="sta_WF_Label" left="299" top="307" width="100" height="27" text="승인금액"/>
        <MaskEdit id="msk_confmAmount" taborder="16" mask="###,###,###,###,###" limitbymask="both" onkillfocus="msk_SCHULOPER_onkillfocus" left="401" top="309" width="101" height="22" enable="false"/>
        <Static id="Static28" taborder="105" text="※ 주민등록번호 뒷자리 삭제 후 업로드" left="85" top="359" width="257" height="21" style="color:red;font:9 Gulim bold;"/>
      </Layout>
    </Layouts>
    <Objects>
      <Dataset id="DS_SEARCH" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="EMPNO" type="STRING" size="256"/>
          <Column id="REQST_DE" type="STRING" size="256"/>
          <Column id="SALARY_CONFM_AT" type="STRING" size="256"/>
          <Column id="STDR_YEAR" type="STRING" size="256"/>
          <Column id="PYMNT_PREARNGE_YM" type="STRING" size="256"/>
          <Column id="FAMILY_SEQ" type="STRING" size="256"/>
          <Column id="GRADE" type="STRING" size="256"/>
          <Column id="QU" type="STRING" size="256"/>
          <Column id="REQST_YEAR" type="STRING" size="256"/>
          <Column id="STDR_YEAR3" type="STRING" size="256"/>
          <Column id="REQST_SN" type="STRING" size="256"/>
          <Column id="ORIGIN_REQST_YEAR" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="DS_SCHXPN_SBSIDY" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false" oncolumnchanged="DS_SCHXPN_SBSIDY_oncolumnchanged" cancolumnchange="DS_SCHXPN_SBSIDY_cancolumnchange">
        <ColumnInfo>
          <Column id="REQST_DE" type="STRING" size="256"/>
          <Column id="REQST_YEAR" type="STRING" size="256"/>
          <Column id="PYMNT_PREARNGE_YM" type="STRING" size="256"/>
          <Column id="EMPNO" type="STRING" size="256"/>
          <Column id="EMPNM" type="STRING" size="256"/>
          <Column id="DEPT_CODE" type="STRING" size="256"/>
          <Column id="FAMILY_NM" type="STRING" size="256"/>
          <Column id="ACDMCR" type="STRING" size="256"/>
          <Column id="SCHUL_NM" type="STRING" size="256"/>
          <Column id="GRADE" type="STRING" size="256"/>
          <Column id="QU" type="STRING" size="256"/>
          <Column id="REQST_AMOUNT" type="BIGDECIMAL" size="256"/>
          <Column id="TUTFEE" type="BIGDECIMAL" size="256"/>
          <Column id="SCHUL_OPER_SPRMNY" type="BIGDECIMAL" size="256"/>
          <Column id="RETURN_PRVONSH" type="STRING" size="256"/>
          <Column id="SALARY_CONFM_AT" type="STRING" size="256"/>
          <Column id="SALARY_CONFM_DE" type="STRING" size="256"/>
          <Column id="ATCH_FILE_1" type="STRING" size="256"/>
          <Column id="ATCH_FILE_2" type="STRING" size="256"/>
          <Column id="RM" type="STRING" size="256"/>
          <Column id="SANCTN_ID" type="STRING" size="256"/>
          <Column id="LAST_SANCTN_STTUS" type="STRING" size="256"/>
          <Column id="LAST_SANCTNSTS_IMG" type="STRING" size="256"/>
          <Column id="REQST_SN" type="STRING" size="256"/>
          <Column id="FAMILY_BRTHDY" type="STRING" size="256"/>
          <Column id="FAMILY_SEQ" type="STRING" size="256"/>
          <Column id="REQST_AMOUNT2" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="DS_YEAR" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="CODE" type="STRING" size="256"/>
          <Column id="NAME" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="DS_YM" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="YM1" type="STRING" size="256"/>
          <Column id="YM2" type="STRING" size="256"/>
          <Column id="YM3" type="STRING" size="256"/>
          <Column id="YM4" type="STRING" size="256"/>
        </ColumnInfo>
        <Rows>
          <Row/>
        </Rows>
      </Dataset>
      <Dataset id="DS_FAMILY" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false" oncolumnchanged="DS_FAMILY_oncolumnchanged">
        <ColumnInfo>
          <Column id="FAMILY_NM" type="STRING" size="256"/>
          <Column id="BRTHDY" type="STRING" size="256"/>
          <Column id="SEQ" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="DS_SCHXPN_UPLMT" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="STDR_YEAR" type="STRING" size="256"/>
          <Column id="TUTFEE" type="STRING" size="256"/>
          <Column id="SCHUL_OPER_SPORT_NON" type="STRING" size="256"/>
          <Column id="SM_AMOUNT" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="DS_SCHXPN_SBSIDY_COPY" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="REQST_DE" type="STRING" size="256"/>
          <Column id="REQST_YEAR" type="STRING" size="256"/>
          <Column id="PYMNT_PREARNGE_YM" type="STRING" size="256"/>
          <Column id="EMPNO" type="STRING" size="256"/>
          <Column id="EMPNM" type="STRING" size="256"/>
          <Column id="DEPT_CODE" type="STRING" size="256"/>
          <Column id="ACDMCR" type="STRING" size="256"/>
          <Column id="SCHUL_NM" type="STRING" size="256"/>
          <Column id="GRADE" type="STRING" size="256"/>
          <Column id="QU" type="STRING" size="256"/>
          <Column id="REQST_AMOUNT" type="BIGDECIMAL" size="256"/>
          <Column id="TUTFEE" type="BIGDECIMAL" size="256"/>
          <Column id="SCHUL_OPER_SPRMNY" type="BIGDECIMAL" size="256"/>
          <Column id="RETURN_PRVONSH" type="STRING" size="256"/>
          <Column id="SALARY_CONFM_AT" type="STRING" size="256"/>
          <Column id="SALARY_CONFM_DE" type="STRING" size="256"/>
          <Column id="ATCH_FILE_1" type="STRING" size="256"/>
          <Column id="ATCH_FILE_2" type="STRING" size="256"/>
          <Column id="RM" type="STRING" size="256"/>
          <Column id="REQST_SN" type="STRING" size="256"/>
          <Column id="FAMILY_NM" type="STRING" size="256"/>
          <Column id="FAMILY_BRTHDY" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_cond02" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="FILE_SN" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_validation" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="compId" type="STRING" size="256"/>
          <Column id="colId" type="STRING" size="256"/>
          <Column id="PK" type="STRING" size="256"/>
          <Column id="notNull" type="STRING" size="256"/>
          <Column id="type" type="STRING" size="256"/>
          <Column id="nlength" type="STRING" size="256"/>
          <Column id="from" type="STRING" size="256"/>
          <Column id="to" type="STRING" size="256"/>
          <Column id="lengthChkGb" type="STRING" size="256"/>
          <Column id="msgId" type="STRING" size="256"/>
          <Column id="expr" type="STRING" size="256"/>
          <Column id="func" type="STRING" size="256"/>
        </ColumnInfo>
        <Rows>
          <Row>
            <Col id="compId">DS_SCHXPN_SBSIDY</Col>
            <Col id="colId">FILE_SN</Col>
            <Col id="notNull">Y</Col>
            <Col id="msgId">첨부파일</Col>
          </Row>
          <Row>
            <Col id="compId">DS_SCHXPN_SBSIDY</Col>
            <Col id="notNull">Y</Col>
            <Col id="colId">FAMILY_IHIDNUM</Col>
            <Col id="msgId">자녀선택</Col>
          </Row>
          <Row>
            <Col id="compId">DS_SCHXPN_SBSIDY</Col>
            <Col id="notNull">Y</Col>
            <Col id="colId">SCHUL_NM</Col>
            <Col id="msgId">학교명</Col>
          </Row>
          <Row>
            <Col id="notNull">Y</Col>
            <Col id="compId">DS_SCHXPN_SBSIDY</Col>
            <Col id="colId">GRADE</Col>
            <Col id="msgId">학년</Col>
          </Row>
          <Row>
            <Col id="notNull">Y</Col>
            <Col id="compId">DS_SCHXPN_SBSIDY</Col>
            <Col id="colId">REQST_YEAR</Col>
            <Col id="msgId">신청년도</Col>
          </Row>
          <Row>
            <Col id="colId">QU</Col>
            <Col id="notNull">Y</Col>
            <Col id="compId">DS_SCHXPN_SBSIDY</Col>
            <Col id="msgId">신청분기</Col>
          </Row>
        </Rows>
      </Dataset>
      <Dataset id="ds_fileList" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="CHK" type="STRING" size="256"/>
          <Column id="PROGRS" type="BIGDECIMAL" size="16"/>
          <Column id="ORGINL_FILE_NM" type="string" size="32"/>
          <Column id="FILE_EXTSN" type="string" size="32"/>
          <Column id="FILE_STRE_COURS" type="string" size="32"/>
          <Column id="FILE_ID" type="string" size="32"/>
          <Column id="SN" type="bigdecimal" size="16"/>
          <Column id="SYS_SE_CODE" type="string" size="32"/>
          <Column id="FILE_IMAGE" type="string" size="32"/>
          <Column id="FILE_TY" type="string" size="32"/>
          <Column id="JOB_SE" type="string" size="32"/>
          <Column id="DELETE_IMAGE" type="string" size="32"/>
          <Column id="STRE_FILE_NM" type="string" size="32"/>
          <Column id="FILE_MG" type="bigdecimal" size="16"/>
          <Column id="FILE_CN" type="string" size="32"/>
          <Column id="FILE_ORDR" type="bigdecimal" size="16"/>
          <Column id="TRNSMIS_FILE_SIZE" type="string" size="32"/>
          <Column id="USE_AT" type="string" size="32"/>
          <Column id="STTUS" type="string" size="32"/>
          <Column id="FILE_SN" type="bigdecimal" size="16"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="DS_SE3" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="code" type="STRING" size="256"/>
          <Column id="data" type="STRING" size="256"/>
        </ColumnInfo>
        <Rows>
          <Row>
            <Col id="code">1</Col>
            <Col id="data">미승인</Col>
          </Row>
          <Row>
            <Col id="code">2</Col>
            <Col id="data">승인</Col>
          </Row>
          <Row>
            <Col id="code">3</Col>
            <Col id="data">반려</Col>
          </Row>
        </Rows>
      </Dataset>
      <Dataset id="DS_SE00" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="code" type="STRING" size="256"/>
          <Column id="data" type="STRING" size="256"/>
        </ColumnInfo>
        <Rows>
          <Row>
            <Col id="code">1</Col>
            <Col id="data">선택</Col>
          </Row>
          <Row>
            <Col id="code">2</Col>
            <Col id="data">승인</Col>
          </Row>
          <Row>
            <Col id="code">3</Col>
            <Col id="data">반려</Col>
          </Row>
        </Rows>
      </Dataset>
      <Dataset id="ds_ubiDataset" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="EMPNO" type="STRING" size="256"/>
          <Column id="EMPNM" type="STRING" size="256"/>
          <Column id="IHIDNUM" type="STRING" size="256"/>
          <Column id="DEPT_CODE" type="STRING" size="256"/>
          <Column id="DEPT_NAME" type="STRING" size="256"/>
          <Column id="CLSF_CODE" type="STRING" size="256"/>
          <Column id="CLSF_CODE_NM" type="STRING" size="256"/>
          <Column id="REGIST_DT" type="STRING" size="256"/>
          <Column id="FAMILY_NM" type="STRING" size="256"/>
          <Column id="FAMILY_IHIDNUM" type="STRING" size="256"/>
          <Column id="SCHUL_NM" type="STRING" size="256"/>
          <Column id="GRADE" type="STRING" size="256"/>
          <Column id="REQST_YEAR" type="STRING" size="256"/>
          <Column id="QU" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_innerSanctnParam" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="INNER_SANCTN_MDL_ID" type="STRING" size="256"/>
          <Column id="SYS_SE_CODE" type="STRING" size="256"/>
          <Column id="JOB_SE" type="STRING" size="256"/>
          <Column id="JOB_KEY" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_cond" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="REQST_YEAR" type="STRING" size="256"/>
          <Column id="QU" type="STRING" size="256"/>
          <Column id="EMPNO" type="STRING" size="256"/>
          <Column id="FAMILY_NM" type="STRING" size="256"/>
          <Column id="REQST_SN" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_quSe" useclientlayout="true">
        <ColumnInfo>
          <Column id="CODE" type="STRING" size="256"/>
          <Column id="CODE_NM" type="STRING" size="256"/>
        </ColumnInfo>
        <Rows>
          <Row>
            <Col id="CODE">1</Col>
            <Col id="CODE_NM">1분기</Col>
          </Row>
          <Row>
            <Col id="CODE">2</Col>
            <Col id="CODE_NM">2분기</Col>
          </Row>
          <Row>
            <Col id="CODE">3</Col>
            <Col id="CODE_NM">3분기</Col>
          </Row>
          <Row>
            <Col id="CODE">4</Col>
            <Col id="CODE_NM">4분기</Col>
          </Row>
        </Rows>
      </Dataset>
    </Objects>
    <Bind>
      <BindItem id="item9" compid="msk_SCHULOPER" propid="value" datasetid="DS_SCHXPN_SBSIDY" columnid="SCHUL_OPER_SPRMNY"/>
      <BindItem id="item0" compid="edt_EMPNO" propid="value" datasetid="DS_SCHXPN_SBSIDY" columnid="EMPNO"/>
      <BindItem id="item1" compid="edt_EMPNM" propid="value" datasetid="DS_SCHXPN_SBSIDY" columnid="EMPNM"/>
      <BindItem id="item21" compid="edt_SCHULNM" propid="value" datasetid="DS_SCHXPN_SBSIDY" columnid="SCHUL_NM"/>
      <BindItem id="item20" compid="edt_GRADE" propid="value" datasetid="DS_SCHXPN_SBSIDY" columnid="GRADE"/>
      <BindItem id="item6" compid="cal_REQSTDE" propid="value" datasetid="DS_SCHXPN_SBSIDY" columnid="REQST_DE"/>
      <BindItem id="item8" compid="msk_TUTFEE" propid="value" datasetid="DS_SCHXPN_SBSIDY" columnid="TUTFEE"/>
      <BindItem id="item7" compid="msk_REQSTAMOUNT" propid="value" datasetid="DS_SCHXPN_SBSIDY" columnid="REQST_AMOUNT2"/>
      <BindItem id="item2" compid="edt_RM" propid="value" datasetid="DS_SCHXPN_SBSIDY" columnid="RM"/>
      <BindItem id="item3" compid="cal_BRTHDY" propid="value" datasetid="DS_SCHXPN_SBSIDY" columnid="FAMILY_BRTHDY"/>
      <BindItem id="item4" compid="edt_RETURNCN" propid="value" datasetid="DS_SCHXPN_SBSIDY" columnid="RETURN_PRVONSH"/>
      <BindItem id="item5" compid="cmb_CONFM_SE" propid="value" datasetid="DS_SCHXPN_SBSIDY" columnid="SALARY_CONFM_AT"/>
      <BindItem id="item10" compid="cal_CONFM" propid="value" datasetid="DS_SCHXPN_SBSIDY" columnid="SALARY_CONFM_DE"/>
      <BindItem id="item19" compid="cmb_FAMILYNM" propid="value" datasetid="DS_SCHXPN_SBSIDY" columnid="FAMILY_NM"/>
      <BindItem id="item22" compid="cmb_REQSTYEAR" propid="value" datasetid="DS_SCHXPN_SBSIDY" columnid="REQST_YEAR"/>
      <BindItem id="item11" compid="cmb_quSe" propid="value" datasetid="DS_SCHXPN_SBSIDY" columnid="QU"/>
      <BindItem id="item12" compid="msk_confmAmount" propid="value" datasetid="DS_SCHXPN_SBSIDY" columnid="REQST_AMOUNT"/>
    </Bind>
    <Script type="xscript5.0"><![CDATA[/***********************************************************************
 * 업무구분 : 학자보조금신청팝업관리
 * 화면ID   : SAL020108_P01
 * 화면명   : 학자보조금신청팝업관리
 * 화면설명 : 학자보조금신청팝업정보를 관리한다.
 * 작성일   : 2015.07.07
 * 작성자   : 이동석
 * 수정이력 : 
 ***********************************************************************
 *     수정일     수정자   내용
 ***********************************************************************
 *   
 ***********************************************************************/

/***********************************************************************
 * Script Include 
 ************************************************************************/
include "lib::comInclude.xjs";
include "mis_lib::misUtil.xjs";
include "lib::comUpDownUtils.xjs";
include "lib::comInnerSanct.xjs";


this.File_UpDownManager = null;

var empno 		= this.parent.EMPNO;
var empnm 		= this.parent.EMPNM;
var deptcode 	= this.parent.DEPTCODE;
var reqstyear 	= this.parent.REQST_YEAR;
var pymntym 	= this.parent.PYMNT_PREARNGE_YM;
var grade		= this.parent.GRADE;
var qu 			= this.parent.QU;
var se 			= this.parent.SE;
var confmat 	= this.parent.CONFMAT;
//2016.08.18
var familyNm 	= this.parent.FAMILY_NM;
var REQST_SN 	= this.parent.REQST_SN;


/***********************************************************************
 * onInit 영역
 ***********************************************************************/
this.SAL020108_P01_oninit = function(obj:Form, e:nexacro.InitEventInfo)
{
	this.fn_init_form();
	this.fn_init_dataset();
	
	var fileConfig = {
		useMultiUpload : true,
		onChange: this.fn_onFileSelected,   // 파일 선택 이벤트 핸들러
		onSuccess : this.fn_onFileSuccess   // 전송 성공 이벤트 핸들러
    };
	this.File_UpDownManager = new this.fileUpDownManager(this, "MIS", "SAL");
    this.File_UpDownManager.init(fileConfig);
} 
 
/***********************************************************************
 * 설명: 폼로딩시 처리
 ************************************************************************/
this.SAL020108_P01_onload = function(obj:Form, e:nexacro.LoadEventInfo)
{
	this.fn_year_cmb();   // 신청년도 설정
	
	this.hrfamily();
	
	if(se == "C"){
	    if(confmat == "1") { //선택
			//this.cmb_CONFM_SE.enable = true;				// 승인여부
		}
		
			
		//첨부파일 버튼 제어
		this.btn_delFiles.set_enable(false);
		this.btn_uploadFiles.set_enable(false);
	}

	if(se == "N"){                               	// 신규
		this.DS_SCHXPN_SBSIDY.clearData();
		var addRow = this.DS_SCHXPN_SBSIDY.addRow();
		this.DS_SCHXPN_SBSIDY.setColumn(addRow,"EMPNO",				empno);					// 사원번호
		this.DS_SCHXPN_SBSIDY.setColumn(addRow,"EMPNM",				empnm);					// 사원명
		this.DS_SCHXPN_SBSIDY.setColumn(addRow,"DEPT_CODE",			deptcode);				// 부서코드
		this.DS_SCHXPN_SBSIDY.setColumn(addRow,"TUTFEE",			0);						// 수업료
		this.DS_SCHXPN_SBSIDY.setColumn(addRow,"SCHUL_OPER_SPRMNY",	0);						// 학교운영비
		this.DS_SCHXPN_SBSIDY.setColumn(addRow,"REQST_AMOUNT",		0);						// 신청금액
		this.DS_SCHXPN_SBSIDY.setColumn(addRow,"REQST_DE",			this.gfn_today());		// 신청일자
		
		//2016.08.18
		this.DS_SCHXPN_SBSIDY.setColumn(0,"REQST_YEAR",			this.gfn_today().substr(0,4));		//적용년도
		this.btn_Confirm.set_visible(true);

	} 
	else if(se == "R") {             	// 신청화면 
		this.fn_search();

	    this.cmb_FAMILYNM.set_readonly(true);		// 자녀선택
	    this.cal_BRTHDY.set_readonly(true);		    // 자년생년월일

		
		this.cmb_FAMILYNM.set_cssclass("cmb_WF_Essential");	// 자녀선택
		this.cal_BRTHDY.set_cssclass("cal_WF_Essential");   // 자년생년월일
		this.cmb_quSe.set_cssclass("cmb_WF_Essential");		// 분기
		
		if(confmat == "1") {
			this.btn_Confirm.set_visible(true);
			this.edt_SCHULNM.set_readonly(false);		// 학교명
			this.edt_GRADE.set_readonly(false);			// 학년
			this.cmb_REQSTYEAR.set_enable(true);		// 적용년도	    
			this.msk_TUTFEE.set_readonly(false);		// 수업료
			this.msk_SCHULOPER.set_readonly(false);		// 학교운영비
			this.cmb_quSe.set_readonly(false);			// 분기
		}else {
			this.edt_SCHULNM.set_readonly(true);		// 학교명
			this.edt_GRADE.set_readonly(true);			// 학년
			this.cmb_REQSTYEAR.set_enable(false);		// 적용년도	    
			this.msk_TUTFEE.set_readonly(true);			// 수업료
			this.msk_SCHULOPER.set_readonly(true);		// 학교운영비
			this.cmb_quSe.set_readonly(true);			// 분기
		}
	
	}
	else if(se == "C") {             	// 승인화면
		this.fn_search();
		//this.msk_confmAmount.set_enable(true);
		this.btn_delFiles.set_enable(true);
		this.div_PYMNT_PREARNGE_YM.fn_setBind("DS_SCHXPN_SBSIDY"  ,"PYMNT_PREARNGE_YM");
		this.div_PYMNT_PREARNGE_YM.set_enable(false);
		this.cmb_CONFM_SE.set_enable(true);
		this.cmb_CONFM_SE.set_cssclass("cmb_WF_Essential");
		
	    this.cmb_FAMILYNM.set_readonly(true);		// 자녀선택
	    this.cal_BRTHDY.set_readonly(true);		    // 자년생년월일
	    this.edt_SCHULNM.set_readonly(true);		// 학교명
	    this.edt_GRADE.set_readonly(true);			// 학년
	    this.cmb_REQSTYEAR.set_enable(false);		// 적용년도	    
		this.msk_TUTFEE.set_readonly(true);			// 수업료
		this.msk_SCHULOPER.set_readonly(true);		// 학교운영비
		this.cmb_quSe.set_readonly(true);			// 분기
		
		this.cmb_FAMILYNM.set_cssclass("cmb_WF_Readonly");	// 자녀선택
		this.cal_BRTHDY.set_cssclass("cal_WF_Readonly");   // 자년생년월일
		this.cmb_quSe.set_cssclass("cmb_WF_Readonly");		// 분기
		
		this.btn_Confirm.set_visible(true);
	
		this.schxpnuplmt();   // 학자보조금 상한액
	}
}

/***********************************************************************
 * Form 오브젝트 초기화
 ***********************************************************************/ 
this.fn_init_form = function()
{
	this.gfn_initForm(this);
}

/***********************************************************************
 * Dataset 오브젝트 초기화
 ***********************************************************************/ 
this.fn_init_dataset = function()
{
	this.gfn_initCondDs(this, this.div_search);	
}

/***********************************************************************************
* 설명	: 자녀정보 조회
***********************************************************************************/
this.hrfamily = function()
{
	
	// 초기화
	this.DS_FAMILY.clearData();	
   
     // 조회조건 	
	this.DS_SEARCH.clearData();              // 조회 데이터셋 초기화	
	var nRow = this.DS_SEARCH.addRow();      // 조회 데이터셋 행추가	
	this.DS_SEARCH.setColumn(nRow,"EMPNO",empno);
	
	// Validation 체크
	if(!this.gfn_checkValidation(this.DS_SEARCH, this.ds_validation)) {
		return;
	}	
	
	this.fn_transaction("selectHrfamilyList");	
}


/***********************************************************************************
* 설명	: 학자보조금 상한액 조회
***********************************************************************************/
this.schxpnuplmt = function()
{
	// 초기화
	this.DS_SCHXPN_UPLMT.clearData();	
   
    // 조회조건 	
	this.DS_SEARCH.clearData();              // 조회 데이터셋 초기화	
	var nRow = this.DS_SEARCH.addRow();      // 조회 데이터셋 행추가	
	this.DS_SEARCH.setColumn(nRow,"STDR_YEAR3",this.cmb_REQSTYEAR.value);
			
	if(!this.gfn_checkValidation(this.DS_SEARCH, this.ds_validation)) {
		return;
	}	
	
	this.fn_transaction("selectSchxpnsbsidylmtList");
}


/***********************************************************************
 * 설명: 조회 처리
 ************************************************************************/
this.fn_search= function()
{
	// 초기화	
	this.DS_SCHXPN_SBSIDY.clearData(); 	
	
	// 조회조건 	
	this.DS_SEARCH.clearData();              // 조회 데이터셋 초기화	
	var nRow = this.DS_SEARCH.addRow();      // 조회 데이터셋 행추가	
  	this.DS_SEARCH.setColumn(nRow,"REQST_YEAR",			reqstyear); 
  	this.DS_SEARCH.setColumn(nRow,"PYMNT_PREARNGE_YM",	pymntym); 
  	this.DS_SEARCH.setColumn(nRow,"GRADE",				grade); 
  	this.DS_SEARCH.setColumn(nRow,"QU",					qu);   	
  	this.DS_SEARCH.setColumn(nRow,"EMPNO",				empno);
  	
  	//2016.08.18
  	this.DS_SEARCH.setColumn(nRow,"FAMILY_NM",			familyNm);
  	this.DS_SEARCH.setColumn(nRow,"REQST_SN",			REQST_SN);

	if(!this.gfn_checkValidation(this.DS_SEARCH, this.ds_validation)) {
		return;
	}	
	
	this.fn_transaction("selectSchxpnsbsidyList");
}


/***********************************************************************************
* 설명	: 확인(신청 내역 저장)
***********************************************************************************/
this.btn_Confirm_onclick = function(obj:Button,  e:nexacro.ClickEventInfo)
{
	if(se == "C"){ //승인
		//초기값
// 		if(this.cmb_CONFM_SE.value == "1") {
// 			  this.alert("승인여부를 선택하세요"); return;
// 		}
		
		//반려 2016.07.20
		if(this.cmb_CONFM_SE.value == "3" && this.comUtils.isNullEmpty(this.edt_RETURNCN.value)) {
			  this.alert("반려내용을 입력하세요"); return;
		}		


			this.fn_transaction("saveSchxpnsbsidyListAppr");
			
	}else{ //신청
		this.DS_SCHXPN_SBSIDY_COPY.clearData();
		if(this.comUtils.isNull(this.DS_SCHXPN_SBSIDY.getColumn(0,"SCHUL_NM"))) {
			  this.alert("자녀를 선택하세요."); return;
		} 
		
		if(this.comUtils.isNull(this.DS_SCHXPN_SBSIDY.getColumn(0,"SCHUL_NM"))) {
			  this.alert("학교명을 입력하세요"); return;
		} 
		
		if(this.comUtils.isNull(this.DS_SCHXPN_SBSIDY.getColumn(0,"GRADE"))) {
			  this.alert("학년을 입력하세요"); return;
		}
		
		if(this.comUtils.isNull(this.DS_SCHXPN_SBSIDY.getColumn(0,"REQST_DE"))) {
			  this.alert("신청일자를 입력하세요"); return;
		}
		
		if(this.comUtils.isNull(this.DS_SCHXPN_SBSIDY.getColumn(0,"TUTFEE"))) {
			  this.alert("수업료를 입력하세요"); return;
		}
		
		if(this.comUtils.isNull(this.DS_SCHXPN_SBSIDY.getColumn(0,"SCHUL_OPER_SPRMNY"))) {
			  this.alert("학교운영비를 입력하세요"); return;
		}
		
		if(this.comUtils.isNull(this.cmb_quSe.value)){
			 this.alert("신청분기를 선택하세요."); 
			 return;
		}

		if(this.ds_fileList.rowcount == 0) {
			 this.alert("첨부파일을 입력하세요."); 
			 return;
		}
		
		if(se == "N"){
				 var nRow = this.DS_SCHXPN_SBSIDY_COPY.addRow();
				 this.DS_SCHXPN_SBSIDY_COPY.copyRow(nRow,this.DS_SCHXPN_SBSIDY, 0);
				 
				 this.DS_SCHXPN_SBSIDY_COPY.setColumn(nRow,"PYMNT_PREARNGE_YM", this.DS_YM.getColumn(0,"YM1"));
				 this.DS_SCHXPN_SBSIDY_COPY.setColumn(nRow,"REQST_YEAR", this.cmb_REQSTYEAR.value); 
				 this.DS_SCHXPN_SBSIDY_COPY.setColumn(nRow,"QU", this.cmb_quSe.value); 	     
	
		} else{
			
			var nRow = this.DS_SCHXPN_SBSIDY_COPY.addRow();
			this.DS_SCHXPN_SBSIDY_COPY.copyRow(nRow,this.DS_SCHXPN_SBSIDY,this.DS_SCHXPN_SBSIDY.rowposition);			
			//this.DS_SCHXPN_SBSIDY_COPY.setColumn(nRow,"SCHUL_NM",this.DS_SCHXPN_SBSIDY.getColumn(this.DS_SCHXPN_SBSIDY.rowposition,"SCHUL_NM"));
			//this.DS_SCHXPN_SBSIDY_COPY.setColumn(nRow,"GRADE",this.DS_SCHXPN_SBSIDY.getColumn(this.DS_SCHXPN_SBSIDY.rowposition,"GRADE"));
			this.DS_SCHXPN_SBSIDY_COPY.set_updatecontrol(false);	 
			this.DS_SCHXPN_SBSIDY_COPY.setRowType(this.DS_SCHXPN_SBSIDY_COPY.rowposition, "U");
			this.DS_SCHXPN_SBSIDY_COPY.set_updatecontrol(true);
			//alert(this.DS_SCHXPN_SBSIDY_COPY.getRowType(this.DS_SCHXPN_SBSIDY_COPY.rowposition));
			
		}
		
		// Validation 체크
		if(!this.gfn_checkValidation(this.DS_SCHXPN_SBSIDY_COPY, this.ds_validation)) {
			return;
		}

		if(this.gfn_message("confirm.저장.여부")) {
			this.fn_transaction("saveSchxpnsbsidyList");
		}
	}
}

/***********************************************************************************
* 설명	: 닫기
***********************************************************************************/
this.btn_Close_onclick = function(obj:Button,  e:nexacro.ClickEventInfo)
{
	this.close();
}

/**********************************************************************
 * CALL TRANSACTION 영역
 **********************************************************************/ 
this.fn_transaction = function(strSvcId)
{
	switch (strSvcId) {
		// 자녀정보 목록조회
		case "selectHrfamilyList": 
			var sController   	= "hsco/mis/sal/SAL020108/selectHrfamilyList.do";
			var sInDatasets   	= "input2=DS_SEARCH";
			var sOutDatasets  	= "DS_FAMILY=output2";
			break;
		
		// 학자보조금상한액정보 목록조회
		case "selectSchxpnsbsidylmtList": 
			var sController   	= "hsco/mis/sal/SAL020107/selectSchxpnsbsidylmtList.do";
			var sInDatasets   	= "input1=DS_SEARCH";
			var sOutDatasets  	= "DS_SCHXPN_UPLMT=output1";
			break;
		
		// 학자보조금신청정보 목록조회
		case "selectSchxpnsbsidyList": 
        	var sController   	= "hsco/mis/sal/SAL020108/selectSchxpnsbsidyList.do";
			var sInDatasets   	= "input1=DS_SEARCH";
			var sOutDatasets  	= "DS_SCHXPN_SBSIDY=output1";
			break;		
		
		// 학자보조금신청정보 등록, 수정, 삭제
		case "saveSchxpnsbsidyList":	
			var sController   	= "hsco/mis/sal/SAL020108/SchxpnsbsidyCUD.do";	
			var sInDatasets   	= "input3=DS_SCHXPN_SBSIDY_COPY:U";
			var sOutDatasets  	= "";
			break;
		
		// 첨부파일조회
		case "selectAtchFile":
			this.grd_cmmnAtchmnfl.setCellProperty("head", 0, "text", "0");
			this.ds_fileList.clearData();
			this.ds_fileList.addRow();
			this.ds_fileList.setColumn(0, "FILE_SN", this.DS_SCHXPN_SBSIDY.getColumn(0, "ATCH_FILE_1"));	// 재조회목적(좋은 방법은 아니지만, 공통을 최대한 안바꾸려면)
			var sController  = "/hsco/cmm/file/selectAtchmnFileList.do";
			var sInDatasets  = "input1=ds_fileList";
			var sOutDatasets = "ds_fileList=output1";
			break;

		// 승인/반려
		case "saveSchxpnsbsidyListAppr":	
			var sController   	= "hsco/mis/sal/SAL020108/saveSchxpnsbsidyListAppr.do";	
			var sInDatasets   	= "input3=DS_SCHXPN_SBSIDY";
			var sOutDatasets  	= "";
			break;
				
		// 내부결재 저장 2016.08.18		
		case "saveInnerSanc": 
			var sController   	= "hsco/mis/sal/SAL020108/saveInnerSanc.do";
			var sInDatasets   	= "input1=DS_SCHXPN_SBSIDY:U";
			var sOutDatasets  	= "";
			break;
	}

	Ex.core.tran(this, strSvcId, sController, sInDatasets, sOutDatasets); 
}

/**********************************************************************
 * Transaction Callback 영역
 ***********************************************************************/ 
this.fn_callBack = function (strSvcId, nErrorCode, strErrorMsg)
{
	if (nErrorCode != 0){
		this.gfn_callback_message(strSvcId, nErrorCode, strErrorMsg);
	} 
	else {		
		
		switch (strSvcId) {
			// 학자보조금상한액정보 목록조회
			case "selectSchxpnsbsidylmtList": 
				break;
			
			// 자녀정보 목록조회
			case "selectHrfamilyList": 
	            if(se == "N"){     		// 신규
					 this.cmb_FAMILYNM.setFocus(true);	
					 this.cmb_FAMILYNM.set_index(0);
					 this.cmb_quSe.set_index(0);
				}
				break;
			
			// 학자보조금신청정보 목록조회
			case "selectSchxpnsbsidyList": 
			    // this.cmb_FAMILYNM.set_text(this.DS_SCHXPN_SBSIDY.getColumn(0,"FAMILY_NM"));
		        // this.cmb_REQSTYEAR.set_value(this.DS_SCHXPN_SBSIDY.getColumn(0,"REQST_YEAR"));
		        
		        //신청분기, 지급년월 표시 2016.08.19		        
		        var QU = this.DS_SCHXPN_SBSIDY.getColumn(this.DS_SCHXPN_SBSIDY.rowposition,"QU");
		        var PYMNT_PREARNGE_YM = this.DS_SCHXPN_SBSIDY.getColumn(this.DS_SCHXPN_SBSIDY.rowposition,"PYMNT_PREARNGE_YM");
		        	
		        this.fn_transaction("selectAtchFile");
				break;
			
			// 학자보조금신청정보 등록, 수정, 삭제
			case "saveSchxpnsbsidyList":
			    this.btn_Close_onclick();
			    this.gfn_message("success.처리.성공");
			    break;

			// 승인/반려
			case "saveSchxpnsbsidyListAppr":
			    this.btn_Close_onclick();
				this.gfn_message("success.처리.성공");
			    break;
			    
			// 내부결재 저장 2016.08.18
	       case "saveInnerSanc":				
				this.close();
				break;
		}
	}
}

/***********************************************************************
 * 설명: 년도 콤보
 ************************************************************************/
this.fn_year_cmb = function()
 {
	var objDate = new Date();
    var sYear  = objDate.getFullYear();
    
    for(var i = 2010; i <= sYear+2; i++){
		var nRow = this.DS_YEAR.addRow();
		this.DS_YEAR.setColumn(nRow,"CODE",i);
		this.DS_YEAR.setColumn(nRow,"NAME",i);		
    } 
    
    //신규
    if(se == "N"){
		this.cmb_REQSTYEAR.set_value(sYear);
    }
 }


this.DS_SCHXPN_SBSIDY_oncolumnchanged = function(obj:Dataset, e:nexacro.DSColChangeEventInfo)
{
	//가족성명
	if(e.columnid == "FAMILY_NM") {
		var familyNm = e.newvalue;
		var findRow = this.DS_FAMILY.findRow("FAMILY_NM", familyNm);
		var brthdy = this.DS_FAMILY.getColumn(findRow, "BRTHDY");
		
		this.DS_SCHXPN_SBSIDY.setColumn(0,"FAMILY_NM"    , familyNm);
		this.DS_SCHXPN_SBSIDY.setColumn(0,"FAMILY_BRTHDY", brthdy);
	}
	
	//수업료
	if(e.columnid == "TUTFEE"){	
		var TUTFEE = !this.comUtils.isNull(e.newvalue) ? nexacro.toNumber(e.newvalue) : 0;
		var SCHUL_OPER_SPRMNY = !this.comUtils.isNull(obj.getColumn(e.row, "SCHUL_OPER_SPRMNY")) ? nexacro.toNumber(obj.getColumn(e.row, "SCHUL_OPER_SPRMNY")) : 0;
	
		var reqstAmount2 = TUTFEE + SCHUL_OPER_SPRMNY;
		obj.setColumn(e.row, "REQST_AMOUNT2", reqstAmount2);
	}
	
	//학교운영지원비 
	if(e.columnid == "SCHUL_OPER_SPRMNY"){
		var TUTFEE = !this.comUtils.isNull(obj.getColumn(e.row, "TUTFEE")) ? nexacro.toNumber(obj.getColumn(e.row, "TUTFEE")) : 0;
		var SCHUL_OPER_SPRMNY = !this.comUtils.isNull(e.newvalue) ? nexacro.toNumber(e.newvalue) : 0;
	
		var reqstAmount2 = TUTFEE + SCHUL_OPER_SPRMNY;
		obj.setColumn(e.row, "REQST_AMOUNT2", reqstAmount2);
	}
	
	// 급여승인여부
	if(e.columnid == "SALARY_CONFM_AT") {
		if(e.newvalue == "2") {
		
			this.cal_CONFM.set_enable(true);
			this.edt_RETURNCN.set_enable(false);
			this.div_PYMNT_PREARNGE_YM.set_enable(true);
			
			this.cal_CONFM.set_cssclass("cal_WF_Essential");
			this.edt_RETURNCN.set_cssclass("cal_WF_Readonly");
			obj.setColumn(e.row, "SALARY_CONFM_DE", this.dateUtils.format(this.gfn_today(),"yyyymmdd"));
			obj.setColumn(e.row, "RETURN_PRVONSH", null);
			
			var today = this.dateUtils.format(this.gfn_today(),"yyyymm");
			var ym = this.dateUtils.format(this.gfn_today(),"yyyymm");
			var day = this.dateUtils.format(this.gfn_today(),"dd");

			var pymntPrearngeYm = ym;

			if(day > 15) {
				pymntPrearngeYm = this.dateUtils.format(this.dateUtils.addMonth(today, 1, "d"), "yyyymm");
			}
			
			obj.setColumn(e.row, "PYMNT_PREARNGE_YM", pymntPrearngeYm);
			
			// 승인금액 셋팅
			var nRow = this.DS_SCHXPN_SBSIDY.rowposition;
			var reqstAmount2 = !this.comUtils.isNull(this.DS_SCHXPN_SBSIDY.getColumn(nRow, "REQST_AMOUNT2")) ? this.DS_SCHXPN_SBSIDY.getColumn(nRow, "REQST_AMOUNT2") : 0; 

			if(this.DS_SCHXPN_UPLMT.getRowCount() == 0){
				alert("상한액정보가 없습니다."); 
				this.DS_SCHXPN_SBSIDY.setColumn(nRow, "REQST_AMOUNT", "0");
				return;
			}

			var smAmount = !this.comUtils.isNull(this.DS_SCHXPN_UPLMT.getColumn(0, "SM_AMOUNT")) ? nexacro.toNumber(this.DS_SCHXPN_UPLMT.getColumn(0, "SM_AMOUNT")) : 0 ;

			if(reqstAmount2 > smAmount) {
				this.DS_SCHXPN_SBSIDY.setColumn(nRow, "REQST_AMOUNT", smAmount);
			}else {
				this.DS_SCHXPN_SBSIDY.setColumn(nRow, "REQST_AMOUNT", reqstAmount2);
			}
			
		}else if(e.newvalue == "3") {
			this.edt_RETURNCN.set_enable(true);
			this.cal_CONFM.set_enable(false);
			this.div_PYMNT_PREARNGE_YM.set_enable(false);
			
 			this.edt_RETURNCN.set_cssclass("edt_WF_Essential");
 			this.cal_CONFM.set_cssclass("cal_WF_Readonly");
			obj.setColumn(e.row, "SALARY_CONFM_DE", null);
			obj.setColumn(e.row, "PYMNT_PREARNGE_YM", null);
			this.DS_SCHXPN_SBSIDY.setColumn(nRow, "REQST_AMOUNT", 0);
		}else {
			this.edt_RETURNCN.set_enable(false);
			this.cal_CONFM.set_enable(false);
			this.div_PYMNT_PREARNGE_YM.set_enable(false);
			obj.setColumn(e.row, "SALARY_CONFM_DE", null);
			obj.setColumn(e.row, "PYMNT_PREARNGE_YM", null);
			this.edt_RETURNCN.set_cssclass("cal_WF_Readonly");
 			this.cal_CONFM.set_cssclass("cal_WF_Readonly");
 			this.DS_SCHXPN_SBSIDY.setColumn(nRow, "REQST_AMOUNT", 0);
		}
	}
	
// 	if(e.columnid == "REQST_AMOUNT2") {
// 		this.schxpnuplmt();
// 		DS_SCHXPN_UPLMT
// 		obj.setColumn(e.row, "REQST_AMOUNT", )
// 	}
	
}

/***********************************************************************
 * 설명: 학교운영지원비 한도체크
 ************************************************************************/
this.msk_SCHULOPER_onkillfocus = function(obj:MaskEdit, e:nexacro.KillFocusEventInfo)
{
	/*
	if (!this.DS_SCHXPN_SBSIDY.getColumn(0,"SCHUL_OPER_SPRMNY")) {
       this.DS_SCHXPN_SBSIDY.setColumn(0,"SCHUL_OPER_SPRMNY",0);
    }
    if ( this.DS_SCHXPN_SBSIDY.getColumn(0,"SCHUL_OPER_SPRMNY") > this.DS_SCHXPN_UPLMT.getColumn(0,"SCHUL_OPER_SPORT_NON") ) {
          this.alert("학교운영지원비는 " + this.msk_SCHULOPER2.value + " 이하여야 합니다."); 
          this.DS_SCHXPN_SBSIDY.setColumn(0,"SCHUL_OPER_SPRMNY",this.DS_SCHXPN_UPLMT.getColumn(0,"SCHUL_OPER_SPORT_NON"));      
	      return;
	}  
	
	this.DS_SCHXPN_SBSIDY.setColumn(0,"REQST_AMOUNT", parseInt(this.DS_SCHXPN_SBSIDY.getColumn(0,"TUTFEE")) + parseInt(this.DS_SCHXPN_SBSIDY.getColumn(0,"SCHUL_OPER_SPRMNY")));
	*/
}

/***********************************************************************************
* 설명 : 첨부파일 선택 삭제 버튼클릭 시
***********************************************************************************/
this.btn_delFiles_onclick = function(obj:Button,  e:nexacro.ClickEventInfo)
{
	var findRow = this.ds_fileList.findRow("CHK", "1");
	if(findRow < 0) {
		this.gfn_message("comm.데이터.선택.없음");
			return;
	}
	
	if(!this.gfn_message("confirm.선택파일.삭제여부", "들")){
		return false;
	}
	
	for(var fRow = this.ds_fileList.getRowCount()-1; fRow >= 0; fRow--) {
		var chkVal = this.ds_fileList.getColumn(fRow, "CHK");
		if(chkVal == '1') {
			this.ds_fileList.deleteRow(fRow);
		}
	}
	var strSvcId   	 = "deleteFile";
	var sController  = "hsco/cmm/file/deleteFile.do";
	var sInDatasets  = "input1=ds_fileList:U";
	var sOutDatasets = "ds_fileList=output1";
	
	Ex.core.tran(this, strSvcId, sController, sInDatasets, sOutDatasets); 
}


/***********************************************************************
 * 설명 : 첨부파일 업로드 버튼클릭 시
 ***********************************************************************/
this.btn_uploadFiles_onclick = function(obj:Button,  e:nexacro.ClickEventInfo)
{
	// 첨부파일 업로드(fileSn 자동채번 / 첨부파일 Master에 ROW추가 / 파일 업로드 및 자동저장 / 테이블에 fileSn반영 / 데이터셋에 fileSn반영, 단 신규 ROW가 아닐경우 ROWTYPE은 유지)
	this.fn_autoFileSn(
		 "MIS"										// 대분류   (SYS_SE)
		,"SAL"										// 업무구분 (JOB_SE)
		, this.File_UpDownManager	            	// fileManager 오브젝트
		, this.ds_fileList		                	// fileObject
		, this.DS_SCHXPN_SBSIDY	           			// fileSn을 불러오거나 반영해야 하는 컬럼
		, "TBSAL_SCHXPN_SBSIDY"						// fileSn을 저장할 테이블
		, "ATCH_FILE_1"								// fileSn 컬럼명이 다를 경우를 대비
		, ["REQST_YEAR","QU","EMPNO","FAMILY_NM","REQST_SN"]	// fileSn을 저장할 테이블의 PK (FileSn 확인 및 자동반영목적)
	);
}
/***********************************************************************
 * 설명 : 첨부파일 선택다운로드 버튼클릭 시
 ***********************************************************************/
this.btn_downFiles_onclick = function(obj:Button,  e:nexacro.ClickEventInfo)
{
	var findRow = this.ds_fileList.findRow("CHK", "1");
	if(findRow < 0) {
		this.gfn_message("comm.데이터.선택.없음");
		return;
	}
	
	for(var fRow = 0; fRow < this.ds_fileList.getRowCount(); fRow++) {
		var fileSn    = this.ds_fileList.getColumn(fRow, "FILE_SN");
		var fileOrder = this.ds_fileList.getColumn(fRow, "FILE_ORDR");
		var fileName  = this.ds_fileList.getColumn(fRow, "ORGINL_FILE_NM");
		var chk       = this.ds_fileList.getColumn(fRow, "CHK");
		if(chk == '1') {
			this.File_UpDownManager.download(fileSn, fileOrder, fileName);
		}
	}
}

/***********************************************************************
 * 설명 : 첨부파일 그리드 헤드 클릭 시 
 ***********************************************************************/
this.grd_cmmnAtchmnfl_onheadclick = function(obj:Grid, e:nexacro.GridClickEventInfo)
{
	if(e.col == 0)
	{	
		//모든 체크박스 선택
		this.gfn_setGridCheckAll(obj, e);
	}else {
		//선택한 헤드에 따른 정렬
		this.gfn_gridSort(obj, e);
	}
}

this.Button00_onclick = function(obj:Button,  e:nexacro.ClickEventInfo)
{
	this.close();
}


// this.DS_SCHXPN_SBSIDY_cancolumnchange = function(obj:Dataset, e:nexacro.DSColChangeEventInfo)
// {
// 	if(e.columnid == "REQST_YEAR") {
// 		this.DS_SEARCH.setColumn(0, "ORIGIN_REQST_YEAR", e.oldvalue);
// 		var reqstYear = e.oldvalue;
// 		this.schxpnuplmt();
// 	}
// }


this.Button01_onclick = function(obj:Button,  e:nexacro.ClickEventInfo)
{
	this.DS_SCHXPN_SBSIDY.setColumn(0, "REQST_DE" , "20170501");
}
]]></Script>
  </Form>
</FDL>
