<?xml version="1.0" encoding="utf-8"?>
<FDL version="1.5">
  <TypeDefinition url="..\..\default_typedef.xml"/>
  <Form id="SAL040103" classname="SAL040103" left="0" top="0" width="1059" height="735" titletext="예상퇴직금조회" oninit="SAL040103_oninit" onload="SAL040103_onload">
    <Layouts>
      <Layout>
        <Static id="Static62" taborder="118" cssclass="sta_WF_Labelbg" left="78" top="297" width="700" height="27"/>
        <Static id="Static60" taborder="96" cssclass="sta_WF_Labelbg" left="78" top="110" width="700" height="27"/>
        <Static id="Static58" taborder="94" cssclass="sta_WF_Labelbg" left="78" top="607" width="700" height="27"/>
        <Static id="Static55" taborder="89" cssclass="sta_WF_Labelbg" left="78" top="581" width="700" height="27"/>
        <Static id="Static52" taborder="84" cssclass="sta_WF_Labelbg" left="78" top="555" width="700" height="27"/>
        <Static id="Static48" taborder="79" cssclass="sta_WF_Labelbg" left="78" top="529" width="700" height="27"/>
        <Static id="Static44" taborder="72" cssclass="sta_WF_Labelbg" left="78" top="503" width="700" height="27"/>
        <Static id="Static36" taborder="59" cssclass="sta_WF_Labelbg" left="78" top="375" width="700" height="27"/>
        <Static id="Static30" taborder="49" cssclass="sta_WF_Labelbg" left="78" top="349" width="700" height="27"/>
        <Static id="Static28" taborder="46" cssclass="sta_WF_Labelbg" left="78" top="323" width="700" height="27"/>
        <Static id="Static24" taborder="40" cssclass="sta_WF_Labelbg" left="78" top="243" width="700" height="27"/>
        <Static id="Static22" taborder="38" cssclass="sta_WF_Labelbg" left="78" top="217" width="700" height="27"/>
        <Static id="Static20" taborder="34" cssclass="sta_WF_Labelbg" left="78" top="191" width="700" height="27"/>
        <Static id="Static14" taborder="28" cssclass="sta_WF_Labelbg" left="78" top="165" width="700" height="27"/>
        <Static id="Static12" taborder="24" cssclass="sta_WF_Labelbg" left="78" top="110" width="700" height="27"/>
        <Static id="Static08" taborder="19" cssclass="sta_WF_Labelbg" left="78" top="84" width="700" height="27"/>
        <Static id="Static51" taborder="12" cssclass="sta_WF_Labelbg" left="78" top="58" width="700" height="27"/>
        <Div id="div_search" taborder="0" left="0" top="0" right="28" height="33" cssclass="div_WFSA_Box">
          <Layouts>
            <Layout>
              <Static id="Static06" taborder="90" text="15" visible="false" left="0" top="2" right="1015" height="20" style="background:#00ffff66;"/>
              <Static id="Static00" taborder="94" text="5" visible="false" left="104" top="53" right="887" height="5" style="background:#fa794f66;align:center middle;"/>
              <Static id="Static01" taborder="95" text="성명" cssclass="sta_WFSA_Label" left="14" top="5" width="41" height="21"/>
              <Div id="div_EMP" taborder="96" url="com::empno.xfdl" text="Div00" left="51" top="5" width="162" height="21" onkeyup="div_SEARCH_div_EMP_onkeyup" enable="false" async="false"/>
            </Layout>
          </Layouts>
        </Div>
        <Static id="Static02" taborder="1" text="10" visible="false" left="0" top="33" right="28" height="10" style="background:#dc143c3c;align:center middle;"/>
        <Static id="Static31" taborder="2" text="인적사항" cssclass="sta_WF_Title01" left="0" top="39" width="170" height="19"/>
        <Static id="Static03" taborder="3" text="5" visible="false" left="0" top="53" right="28" height="5" style="background:#dc143c3c;align:center middle;"/>
        <Static id="Static00" taborder="4" text="15" visible="false" left="1031" top="0" right="13" height="735" style="background:#1b3cd23c;align:center middle;"/>
        <Static id="Static01" taborder="5" text="스&#13;&#10;크&#13;&#10;롤&#13;&#10;13" visible="false" left="1046" top="0" right="0" height="735" style="background:#d07b173c;align:center middle;"/>
        <Static id="Static84" taborder="6" text="사원번호" cssclass="sta_WF_Label" left="0" top="58" width="100" height="27"/>
        <Edit id="Edit00" taborder="7" left="102" top="61" width="110" height="21" cssclass="edt_WF_Readonly"/>
        <Static id="Static06" taborder="8" text="사원명" cssclass="sta_WF_Label" left="214" top="58" width="100" height="27"/>
        <Edit id="Edit01" taborder="9" left="316" top="61" width="110" height="21" cssclass="edt_WF_Readonly"/>
        <Static id="Static07" taborder="10" text="부서명" cssclass="sta_WF_Label" left="428" top="58" width="100" height="27"/>
        <Edit id="Edit02" taborder="11" left="530" top="61" width="166" height="21" cssclass="edt_WF_Readonly"/>
        <Static id="Static15" taborder="13" text="직종" cssclass="sta_WF_Label" left="214" top="84" width="100" height="27"/>
        <Combo id="cmb_EMPL_SE" taborder="14" innerdataset="ds_jssfc" codecolumn="CODE" datacolumn="CODE_NM" left="316" top="87" width="110" height="21" style="font:10 Gulim;" cssclass="cmb_WF_Readonly"/>
        <Combo id="cmb_EMPL_SE00" taborder="18" innerdataset="ds_ofcps" codecolumn="CODE" datacolumn="CODE_NM" left="530" top="87" width="110" height="21" style="font:10 Gulim;" cssclass="cmb_WF_Readonly"/>
        <Static id="Static17" taborder="20" text="입사일자" cssclass="sta_WF_Label" left="0" top="84" width="100" height="27"/>
        <Static id="Static13" taborder="22" text="기준일자" cssclass="sta_WF_Label" left="802" top="107" width="100" height="27" visible="false"/>
        <Static id="Static04" taborder="25" text="5" visible="false" left="1" top="160" right="27" height="5" style="background:#dc143c3c;align:center middle;"/>
        <Static id="Static05" taborder="26" text="퇴직금기초자료" cssclass="sta_WF_Title01" left="0" top="144" width="170" height="19"/>
        <Static id="Static11" taborder="27" text="기준일자" cssclass="sta_WF_Label" left="0" top="165" width="100" height="27"/>
        <Static id="Static16" taborder="30" text="정산일자" cssclass="sta_WF_Label" left="214" top="165" width="100" height="27"/>
        <Static id="Static19" taborder="33" text="근속기간" cssclass="sta_WF_Label" left="0" top="191" width="100" height="27"/>
        <Edit id="Edit03" taborder="35" left="102" top="194" width="256" height="21"/>
        <Static id="Static21" taborder="36" text="계산기간" cssclass="sta_WF_Label" left="0" top="217" width="100" height="27"/>
        <Edit id="Edit04" taborder="37" left="102" top="220" width="256" height="21"/>
        <Static id="Static23" taborder="39" text="평균임금" cssclass="sta_WF_Label" left="0" top="243" width="100" height="27"/>
        <MaskEdit id="MaskEdit02" taborder="41" mask="###,###,###" left="102" top="246" width="110" height="21" value="1234567890"/>
        <Static id="Static25" taborder="42" text="5" visible="false" left="1" top="292" right="27" height="5" style="background:#dc143c3c;align:center middle;"/>
        <Static id="Static26" taborder="43" text="산출세액내역" cssclass="sta_WF_Title01" left="0" top="277" width="170" height="19"/>
        <Static id="Static27" taborder="44" cssclass="sta_WF_Label" left="0" top="323" width="100" height="27"/>
        <Static id="Static29" taborder="47" text="2013년 이전분" cssclass="sta_WF_Label" left="0" top="349" width="100" height="27"/>
        <MaskEdit id="MaskEdit06" taborder="48" mask="###,###,###" left="102" top="352" width="110" height="21"/>
        <Static id="Static32" taborder="50" cssclass="sta_WF_Label" left="99" top="323" width="114" height="27" text="과세표준안분" style="align:center middle;"/>
        <MaskEdit id="MaskEdit03" taborder="51" mask="###,###,###" left="214" top="352" width="110" height="21"/>
        <MaskEdit id="MaskEdit07" taborder="52" mask="###,###,###" left="326" top="352" width="110" height="21"/>
        <Static id="Static33" taborder="53" text="연평균과세표준" cssclass="sta_WF_Label" left="212" top="323" width="114" height="27" style="align:center middle;"/>
        <Static id="Static34" taborder="54" text="환산과세표준" cssclass="sta_WF_Label" left="325" top="323" width="114" height="27" style="align:center middle;"/>
        <Static id="Static35" taborder="55" text="2013년 이후분" cssclass="sta_WF_Label" left="0" top="375" width="100" height="27"/>
        <MaskEdit id="MaskEdit08" taborder="56" mask="###,###,###" left="102" top="378" width="110" height="21"/>
        <MaskEdit id="MaskEdit09" taborder="57" mask="###,###,###" left="214" top="378" width="110" height="21"/>
        <MaskEdit id="MaskEdit10" taborder="58" mask="###,###,###" left="326" top="378" width="110" height="21"/>
        <Static id="Static41" taborder="68" text="5" visible="false" left="1" top="497" right="27" height="5" style="background:#dc143c3c;align:center middle;"/>
        <Static id="Static42" taborder="69" text="예상퇴직금내역" cssclass="sta_WF_Title01" left="0" top="481" width="170" height="19"/>
        <Static id="Static43" taborder="70" text="퇴직급여" cssclass="sta_WF_Label" left="0" top="503" width="100" height="27"/>
        <MaskEdit id="MaskEdit15" taborder="71" mask="###,###,###" left="102" top="506" width="110" height="21"/>
        <Static id="Static45" taborder="73" text="보전분" cssclass="sta_WF_Label" left="214" top="503" width="100" height="27"/>
        <MaskEdit id="MaskEdit16" taborder="74" mask="###,###,###" left="316" top="506" width="110" height="21" oneditclick="MaskEdit16_oneditclick"/>
        <Static id="Static46" taborder="75" text="과세표준" cssclass="sta_WF_Label" left="0" top="529" width="100" height="27"/>
        <MaskEdit id="MaskEdit17" taborder="76" mask="###,###,###" left="102" top="532" width="110" height="21"/>
        <Static id="Static47" taborder="77" text="연과세표준" cssclass="sta_WF_Label" left="214" top="529" width="100" height="27"/>
        <MaskEdit id="MaskEdit18" taborder="78" mask="###,###,###" left="316" top="532" width="110" height="21"/>
        <Static id="Static49" taborder="80" text="연산출세액" cssclass="sta_WF_Label" left="0" top="555" width="100" height="27"/>
        <MaskEdit id="MaskEdit19" taborder="81" mask="###,###,###" left="102" top="558" width="110" height="21"/>
        <Static id="Static50" taborder="82" text="2015이전세액" cssclass="sta_WF_Label" left="214" top="555" width="100" height="27"/>
        <MaskEdit id="MaskEdit20" taborder="83" mask="###,###,###" left="316" top="558" width="110" height="21"/>
        <Static id="Static53" taborder="85" text="세액공제" cssclass="sta_WF_Label" left="0" top="581" width="100" height="27"/>
        <MaskEdit id="MaskEdit21" taborder="86" mask="###,###,###" left="102" top="584" width="110" height="21"/>
        <Static id="Static54" taborder="87" text="소득세" cssclass="sta_WF_Label" left="214" top="581" width="100" height="27"/>
        <MaskEdit id="MaskEdit22" taborder="88" mask="###,###,###" left="316" top="584" width="110" height="21"/>
        <Static id="Static56" taborder="90" text="지방소득세" cssclass="sta_WF_Label" left="0" top="607" width="100" height="27"/>
        <MaskEdit id="MaskEdit23" taborder="91" mask="###,###,###" left="102" top="610" width="110" height="21"/>
        <Static id="Static57" taborder="92" text="실수령액" cssclass="sta_WF_Label" left="214" top="607" width="100" height="27"/>
        <MaskEdit id="MaskEdit24" taborder="93" mask="###,###,###" left="316" top="610" width="110" height="21"/>
        <Static id="Static59" taborder="95" text="주소" cssclass="sta_WF_Label" left="0" top="110" width="100" height="27"/>
        <Edit id="Edit05" taborder="97" left="102" top="113" width="672" height="21" cssclass="edt_WF_Readonly"/>
        <Calendar id="cal_std2" taborder="100" dateformat="yyyy-MM-dd" left="316" top="168" width="110" height="21" value="null" enable="false" cssclass="cal_WF_Essential"/>
        <Calendar id="cal_std" taborder="101" dateformat="yyyy-MM-dd" cssclass="cal_WF_Essential" left="103" top="168" width="110" height="21"/>
        <Calendar id="cal_std00" taborder="102" dateformat="yyyy-MM-dd" left="102" top="87" width="110" height="21" cssclass="cal_WF_Readonly"/>
        <Calendar id="cal_std01" taborder="103" dateformat="yyyy-MM-dd" cssclass="cal_WF_Readonly" left="904" top="110" width="110" height="21" visible="false"/>
        <Static id="Static37" taborder="104" text="환산산출세액" cssclass="sta_WF_Label" left="438" top="323" width="114" height="27" style="align:center middle;"/>
        <MaskEdit id="MaskEdit00" taborder="105" mask="###,###,###" left="439" top="352" width="110" height="21"/>
        <MaskEdit id="MaskEdit01" taborder="106" mask="###,###,###" left="439" top="378" width="110" height="21"/>
        <MaskEdit id="MaskEdit04" taborder="107" mask="###,###,###" left="552" top="352" width="110" height="21"/>
        <Static id="Static38" taborder="108" text="연평균산출세액" cssclass="sta_WF_Label" left="551" top="323" width="114" height="27" style="align:center middle;"/>
        <MaskEdit id="MaskEdit05" taborder="109" mask="###,###,###" left="552" top="378" width="110" height="21"/>
        <Static id="Static39" taborder="110" text="산출세액" cssclass="sta_WF_Label" left="664" top="323" width="114" height="27" style="align:center middle;"/>
        <MaskEdit id="MaskEdit11" taborder="111" mask="###,###,###" left="665" top="352" width="110" height="21"/>
        <MaskEdit id="MaskEdit12" taborder="112" mask="###,###,###" left="665" top="378" width="110" height="21"/>
        <Button id="btn_mtSalaryDtstmn" taborder="113" text="예상퇴직금확인서" onclick="btn_mtSalaryDtstmn_onclick" cssclass="btn_WF_Process" left="670" top="35" width="108" height="21" visible="false"/>
        <Static id="Static40" taborder="114" text="정률공제" cssclass="sta_WF_Label" left="0" top="297" width="100" height="27"/>
        <MaskEdit id="MaskEdit27" taborder="115" mask="###,###,###" left="102" top="300" width="108" height="21"/>
        <Static id="Static61" taborder="116" text="근속연수공제" cssclass="sta_WF_Label" left="212" top="297" width="114" height="27"/>
        <MaskEdit id="MaskEdit28" taborder="117" mask="###,###,###" oneditclick="MaskEdit16_oneditclick" left="328" top="300" width="110" height="21"/>
        <Static id="Static63" taborder="119" text="10" visible="false" left="0%" top="137" right="2.64%" height="10" style="background:#dc143c3c;align:center middle;"/>
        <Static id="Static64" taborder="120" text="10" visible="false" left="0%" top="270" right="2.64%" height="10" style="background:#dc143c3c;align:center middle;"/>
        <Static id="Static65" taborder="121" text="10" visible="false" left="0%" top="474" right="2.64%" height="10" style="background:#dc143c3c;align:center middle;"/>
        <Static id="Static66" taborder="122" text="2016이후세액" cssclass="sta_WF_Label" left="428" top="555" width="100" height="27"/>
        <MaskEdit id="MaskEdit13" taborder="123" mask="###,###,###" left="530" top="558" width="100" height="21"/>
        <Static id="Static67" taborder="124" cssclass="sta_WF_Labelbg" left="78" top="433" width="700" height="27"/>
        <Static id="Static68" taborder="125" text="2016 환산급여" cssclass="sta_WF_Label" left="0" top="433" width="100" height="27"/>
        <MaskEdit id="MaskEdit14" taborder="126" mask="###,###,###" left="102" top="436" width="110" height="21"/>
        <Static id="Static69" taborder="127" text="2016 환산 공제" cssclass="sta_WF_Label" left="214" top="433" width="110" height="27"/>
        <MaskEdit id="MaskEdit25" taborder="128" mask="###,###,###" left="326" top="436" width="110" height="21"/>
        <Static id="Static70" taborder="129" text="2016 과세표준" cssclass="sta_WF_Label" left="439" top="433" width="110" height="27"/>
        <MaskEdit id="MaskEdit26" taborder="130" mask="###,###,###" left="552" top="436" width="110" height="21"/>
        <MaskEdit id="MaskEdit29" taborder="131" mask="###,###,###" left="428" top="584" width="100" height="21"/>
        <MaskEdit id="MaskEdit30" taborder="132" mask="###,###,###" left="530" top="584" width="100" height="21"/>
        <Static id="Static71" taborder="133" cssclass="sta_WF_Labelbg" left="78" top="401" width="700" height="27"/>
        <MaskEdit id="MaskEdit31" taborder="134" mask="###,###,###" left="102" top="404" width="110" height="21"/>
        <MaskEdit id="MaskEdit35" taborder="138" mask="###,###,###" left="552" top="404" width="110" height="21"/>
        <MaskEdit id="MaskEdit36" taborder="139" mask="###,###,###" left="665" top="404" width="110" height="21"/>
        <Static id="Static72" taborder="140" text="합계" cssclass="sta_WF_Label" left="0" top="401" width="100" height="27"/>
        <MaskEdit id="MaskEdit32" taborder="141" mask="###,###,###" left="214" top="404" width="110" height="21"/>
        <MaskEdit id="MaskEdit33" taborder="142" mask="###,###,###" left="326" top="404" width="110" height="21"/>
        <MaskEdit id="MaskEdit34" taborder="143" mask="###,###,###" left="439" top="404" width="110" height="21"/>
        <Static id="Static09" taborder="145" text="직위" cssclass="sta_WF_Label" left="428" top="84" width="100" height="27"/>
      </Layout>
    </Layouts>
    <Bind>
      <BindItem id="item7" compid="Edit00" propid="value" datasetid="ds_masteremp" columnid="EMPNO"/>
      <BindItem id="item10" compid="Edit01" propid="value" datasetid="ds_masteremp" columnid="EMPNM"/>
      <BindItem id="item11" compid="Edit02" propid="value" datasetid="ds_masteremp" columnid="DEPT_NAME"/>
      <BindItem id="item19" compid="cmb_EMPL_SE" propid="value" datasetid="ds_masteremp" columnid="JSSFC_SE"/>
      <BindItem id="item20" compid="cmb_EMPL_SE00" propid="value" datasetid="ds_masteremp" columnid="OFCPS_SE"/>
      <BindItem id="item33" compid="Edit05" propid="value" datasetid="ds_masteremp" columnid="ADRES"/>
      <BindItem id="item0" compid="cal_std00" propid="value" datasetid="ds_masteremp" columnid="ECNY_DE"/>
      <BindItem id="item1" compid="cal_std01" propid="value" datasetid="ds_masteremp" columnid="STDR_DE"/>
      <BindItem id="item23" compid="MaskEdit27" propid="value" datasetid="ds_retireSalaryPymnt" columnid="FIX_RATE_DDC"/>
      <BindItem id="item2" compid="MaskEdit28" propid="value" datasetid="ds_retireSalaryPymnt" columnid="CNWK_YEAR_DDC"/>
    </Bind>
    <Objects>
      <Dataset id="ds_masteremp" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false" onload="DS_SLRY_TABLE_onload">
        <ColumnInfo>
          <Column id="EMPNO" type="STRING" size="256"/>
          <Column id="EMPNM" type="STRING" size="256"/>
          <Column id="NM_CHCRT" type="STRING" size="256"/>
          <Column id="DEPT_NAME" type="STRING" size="256"/>
          <Column id="CLSF_CODE" type="STRING" size="256"/>
          <Column id="RSPOFC_SE" type="STRING" size="256"/>
          <Column id="ECNY_DE" type="STRING" size="256"/>
          <Column id="ADRES" type="STRING" size="256"/>
          <Column id="JSSFC_SE" type="STRING" size="256"/>
          <Column id="OFCPS_SE" type="STRING" size="256"/>
          <Column id="STDR_DE" type="STRING" size="256"/>
          <Column id="DATE1" type="STRING" size="256"/>
          <Column id="DATE2" type="STRING" size="256"/>
          <Column id="DATE3" type="STRING" size="256"/>
          <Column id="ANSLRY_AT" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_cond00" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="EMPNO" type="STRING" size="256"/>
          <Column id="ENDDE" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_validation" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="compId" type="STRING" size="256"/>
          <Column id="colId" type="STRING" size="256"/>
          <Column id="PK" type="STRING" size="256"/>
          <Column id="notNull" type="STRING" size="256"/>
          <Column id="type" type="STRING" size="256"/>
          <Column id="nlength" type="STRING" size="256"/>
          <Column id="from" type="STRING" size="256"/>
          <Column id="to" type="STRING" size="256"/>
          <Column id="lengthChkGb" type="STRING" size="256"/>
          <Column id="msgId" type="STRING" size="256"/>
          <Column id="expr" type="STRING" size="256"/>
          <Column id="func" type="STRING" size="256"/>
        </ColumnInfo>
        <Rows>
          <Row>
            <Col id="compId">ds_cond00</Col>
            <Col id="colId">EMPNO</Col>
            <Col id="notNull">Y</Col>
            <Col id="to"/>
            <Col id="msgId">사번</Col>
          </Row>
        </Rows>
      </Dataset>
      <Dataset id="ds_jssfc" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="CODE" type="STRING" size="256"/>
          <Column id="CODE_NM" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_rspofc" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="CODE" type="STRING" size="256"/>
          <Column id="CODE_NM" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_ofcps" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="CODE" type="STRING" size="256"/>
          <Column id="CODE_NM" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_cond01" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="YEAR" type="STRING" size="256"/>
          <Column id="STD_YEAR" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_retireCnwksdList" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="SN" type="STRING" size="256"/>
          <Column id="SDYTRN_1" type="STRING" size="256"/>
          <Column id="SDYTRN_2" type="STRING" size="256"/>
          <Column id="DDC_1" type="STRING" size="256"/>
          <Column id="DDC_2" type="STRING" size="256"/>
          <Column id="DDC_3" type="STRING" size="256"/>
          <Column id="RM" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_cond02" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="T_AMT" type="STRING" size="256"/>
          <Column id="CNV_AMT" type="STRING" size="256"/>
          <Column id="APPLC_YEAR" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_retireCnwksd2List" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="T2_AMT" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_retireCnwksd3List" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="T2_AMT" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_retireExpect" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="EMPNO" type="STRING" size="256"/>
          <Column id="EMPNM" type="STRING" size="256"/>
          <Column id="NM_CHCRT" type="STRING" size="256"/>
          <Column id="DEPT_NAME" type="STRING" size="256"/>
          <Column id="CLSF_CODE" type="STRING" size="256"/>
          <Column id="RSPOFC_SE" type="STRING" size="256"/>
          <Column id="ECNY_DE" type="STRING" size="256"/>
          <Column id="ADRES" type="STRING" size="256"/>
          <Column id="JSSFC_SE" type="STRING" size="256"/>
          <Column id="OFCPS" type="STRING" size="256"/>
          <Column id="DATE" type="STRING" size="256"/>
          <Column id="DATE1" type="STRING" size="256"/>
          <Column id="DATE2" type="STRING" size="256"/>
          <Column id="DATE3" type="STRING" size="256"/>
          <Column id="YEAR1" type="STRING" size="256"/>
          <Column id="YEAR2" type="STRING" size="256"/>
          <Column id="DAY1" type="STRING" size="256"/>
          <Column id="DAY2" type="STRING" size="256"/>
          <Column id="AMT1" type="BIGDECIMAL" size="256"/>
          <Column id="AMT2" type="BIGDECIMAL" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_pymnt3" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="TOT1" type="BIGDECIMAL" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_hap1" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="TOT2" type="BIGDECIMAL" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_cond03" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="EMPNO" type="STRING" size="256"/>
          <Column id="YYYYMM1" type="STRING" size="256"/>
          <Column id="YYYYMM2" type="STRING" size="256"/>
          <Column id="ANSLRY_AT" type="STRING" size="256"/>
          <Column id="EXCTV_AT" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_cnvrsn" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="APPLC_YEAR" type="STRING" size="256"/>
          <Column id="LWLT_AMOUNT" type="STRING" size="256"/>
          <Column id="UPLMT_AMOUNT" type="STRING" size="256"/>
          <Column id="ADSBTR_AMOUNT" type="STRING" size="256"/>
          <Column id="STDR_AMOUNT" type="STRING" size="256"/>
          <Column id="DDC_RT" type="STRING" size="256"/>
          <Column id="RM" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_cnvrsn2" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="T2_AMT" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_cnvrsn3" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="MTHD_SE" type="STRING" size="256"/>
          <Column id="APPLC_YEAR" type="STRING" size="256"/>
          <Column id="RATE" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
    </Objects>
    <Script type="xscript5.0"><![CDATA[/***********************************************************************
 * 업무구분 : 예상퇴직금조회
 * 화면ID   : SAL040103
 * 화면명   : 예상퇴직금조회
 * 화면설명 : 예상퇴직금정보를 조회한다.
 * 작성일   : 2017.06.20
 * 작성자   : 이상명
 * 수정이력 : 
 ***********************************************************************
 *     수정일     수정자   내용
 ***********************************************************************
 *    
 ***********************************************************************/

/***********************************************************************
 * Script Include 
 ***********************************************************************/
include "lib::comInclude.xjs";
include "mis_lib::misUtil.xjs";

/***********************************************************************
 * 화면 변수 선언부
 ***********************************************************************/
 var Term3;
 var Term03;
 var Term04;
 var Term20;
 var Term2;
 var Tot3;
 var Tamt8;


/***********************************************************************
 * onInit 영역
 ***********************************************************************/
this.SAL040103_oninit = function(obj:Form, e:nexacro.InitEventInfo)
{
	this.fn_init_form();
	this.fn_init_dataset();
	// 보수담당자 권한 처리
	if(this.gfn_authcode("006") > -1 || this.gfn_authGrpId("SYS_USER") != -1) {		// 보수담당자
	     this.div_search.div_EMP.set_enable(true);
	     //this.fn_search();
	} else {
	     this.div_search.div_EMP.Empno_SetValue(this.fn_getEmpno());
	}
}

/***********************************************************************
 * onLoad 영역
 ***********************************************************************/
this.SAL040103_onload = function(obj:Form, e:nexacro.LoadEventInfo)
{
    this.fn_loadCombo();
	this.cal_std2.set_value(this.gfn_today());	
//	this.div_search.div_EMP.setFocus(true);
//	this.fn_search();
}

/***********************************************************************
 * Form 오브젝트 초기화
 ***********************************************************************/ 
this.fn_init_form = function()
{
	this.gfn_initForm(this);	
    
}

/***********************************************************************
 * Dataset 오브젝트 초기화
 ***********************************************************************/ 
this.fn_init_dataset = function()
{
	this.gfn_initCondDs(this, this.div_search);	
}


/***********************************************************************
 * 설명: 공통조회
 ************************************************************************/
this.fn_loadCombo = function()
{
	var comboParams = [
	                   ["ds_ofcps", "HRM003", 1, ""],    // 직위
	                   ["ds_jssfc", "HRM001", 1, ""]     // 직종
		              ];

	this.gfn_comboLoad(comboParams, this.fn_callbackAfter);
	
}

/***********************************************************************
* 조회처리
************************************************************************/
this.fn_search = function()
{
	if(this.div_search.div_EMP.GetValue("EMPNO")){
		this.gfn_clear1();
// 		var empno = "";		
// 		empno = this.div_search.div_EMP.GetValue("EMPNO");	
		this.ds_masteremp.clearData();	
		this.ds_cond00.clearData();
		this.ds_cond00.addRow();	
		this.ds_cond00.setColumn(0,"EMPNO",this.div_search.div_EMP.GetValue("EMPNO"));	
		this.ds_cond00.setColumn(0,"ENDDE",this.cal_std2.value); 	
		
		// Validation 체크
		if(!this.gfn_checkValidation(this.ds_cond00, this.ds_validation)) {
			return;
		}	
		
		this.fn_transaction("selectRetirePlanList");
	} else {
	    this.alert("사번을 입력하세요");	
	}	
}


/**********************************************************************
 * CALL TRANSACTION 영역
 **********************************************************************/ 
this.fn_transaction = function(strSvcId)
{
	switch (strSvcId) {
		case "selectRetirePlanList": 
			var sController   	= "hsco/mis/sal/SAL040103/selectRetirePlanList.do";
			var sInDatasets   	= "input1=ds_cond00";
			var sOutDatasets  	= "ds_masteremp=output1";
			break;	
	}

	Ex.core.tran(this, strSvcId, sController, sInDatasets, sOutDatasets); 
}

 /**********************************************************************
 * Transaction Callback 영역
 ***********************************************************************/ 
this.fn_callBack = function (strSvcId, nErrorCode, strErrorMsg)
{
	// 오류 및 성공 메시지를 화면에 보여준다.
	/*this.gfn_callback_message(strSvcId, nErrorCode, strErrorMsg);*/
	if (nErrorCode != 0){
		       this.gfn_callback_message(strSvcId, nErrorCode, strErrorMsg);	
} else {		
		switch (strSvcId) {
			case "selectRetirePlanList": 
			   if(!this.cal_std.value) {
			        this.cal_std.set_value(this.ds_masteremp.getColumn(0,"STDR_DE"));
			   }     
			   this.btn_Cal_onclick();
				break;
		}
	}
}


/***********************************************************************
* 계산 클릭시
************************************************************************/
this.btn_Cal_onclick = function(obj:Grid, e:nexacro.GridClickEventInfo)
{
	if(!this.cal_std.value) { return;}
	if(!this.cal_std2.value) { return;}

	if(this.cal_std2.value > this.gfn_today() ){
		this.cal_std2.set_value(this.gfn_today());
	}
	// 초기화	  
	this.gfn_clear1();	 

	var In_date = String(this.cal_std.value);            // 기준일자
	var Out_date = String(this.cal_std2.value);          // 정산일자     
	var Term = this.gfn_daybetween(In_date,Out_date); 
	Term2 = parseInt(parseInt(Term) / 365);          // 년수
	Term3 = parseInt(Term) % 365;                        // 나머지 일수
	if (Term3 > 0 ) {
		Term20 = Term2 + 1 ;                              // 근속년수
	} else {
		Term20 = Term2;
	}    

	var Stdd_dt = this.cal_std2.value;     
	Stdd_dt1 = this.ds_masteremp.getColumn(0,"DATE1");   // 3개월전


	var In_date2 = String(this.cal_std00.value);          // 입사일자(기준일자)
	var Out_date2 = this.gfn_today();                     // 오늘일자
	var std_year = String(Out_date2).substr(0, 4);
	
	var wrk_ycnt = Math.floor(this.gfn_monthbetween(In_date2,Out_date2)/12);
	var wrk_mcnt = Math.round(this.gfn_monthbetween(In_date2,Out_date2))-wrk_ycnt*12;

	var retiryy = wrk_ycnt + wrk_mcnt /12;

	var In_date = String(this.cal_std.value);            // 기준일자
	var Out_date = String(this.cal_std2.value);          // 정산일자 

	var wrk_ycnt2 = Math.floor(this.gfn_monthbetween(In_date,Out_date)/12);
	var wrk_mcnt2 = Math.round(this.gfn_monthbetween(In_date,Out_date))-wrk_ycnt2*12;

	var retiryy = wrk_ycnt2 + wrk_mcnt2 /12;


	var date1 = this.ds_masteremp.getColumn(0,"ECNY_DE");
	var date2 = this.gfn_today();
	// 산정기간
	var date1_1 = date1.substr(0,4) + "-" + date1.substr(4,2) + "-" + date1.substr(6,2) + "~" +
	date2.substr(0,4) + "-" + date2.substr(4,2) + "-" + date2.substr(6,2);
	this.Edit03.set_value(date1_1 + "  (" + wrk_ycnt + " 년  " +  wrk_mcnt + " 월)"  );

	var date3 = String(this.cal_std.value);
	var date4 = String(this.cal_std2.value);

	// 산정기간
	var date3_1 = date3.substr(0,4) + "-" + date3.substr(4,2) + "-" + date3.substr(6,2) + "~" +
	date4.substr(0,4) + "-" + date4.substr(4,2) + "-" + date4.substr(6,2);

	this.Edit04.set_value(date3_1 + "  (" + wrk_ycnt2 + " 년  " +  wrk_mcnt2 + " 월)" );

	//2013년 퇴직금 계산 적용
	var Year10 = "20121231" ;
	var Year11 = "20130101" ;

	Eco.Logger.debug("근속년수 Term20 : " + Term20);

	var Term10 = this.gfn_daybetween(In_date,Year10);     // 퇴직일자 - 입사일자  = 개월수  2012년 12월 31일까지 근속일수
	var Term11 = this.gfn_daybetween(Year11,Out_date);    // 2013년 1월 부터 근속일수     

	Eco.Logger.debug("근속년수 Term10 : " + Term10);
	Eco.Logger.debug("근속년수 Term11 : " + Term11);

	var Tm1 = parseInt(parseInt(Term10) / 365);           // 2012년 이전 년수
	var Tm2 = parseInt(Term10) % 365;                     // 2012년 이전 근속일수
	if (Tm2 > 0 ) {
		Tm1 = Tm1 + 1 ;                                       
	}

	var Tm3 = parseInt(parseInt(Term11) / 365);           // 2013년 이후 년수
	var Tm4 = parseInt(Term11) % 365;                     // 2013년 이후 근속일수
	if (Tm4 > 0 ) {
		Tm3 = Tm3 + 1 ;                                       
	}

	var Tm5 = Term20 - Tm1 ;                              // 2013년이후 근속 년수  전체 년수 - 2012년까지 년수

    // 평균임금계산
    // 평균임금
	var yyyymm1 =  this.ds_masteremp.getColumn(0,"DATE1");
	var yyyymm2 =  this.ds_masteremp.getColumn(0,"DATE2");


	this.ds_pymnt3.clearData();
	this.ds_hap1.clearData();
	this.ds_cond03.clearData();	
	this.ds_cond03.addRow();		
	this.ds_cond03.setColumn(0,"EMPNO", this.ds_masteremp.getColumn(0,"EMPNO"));  
	//  this.ds_cond03.setColumn(0,"EXCTV_AT", this.ds_masteremp.getColumn(0,"EXCTV_AT"));  
	this.ds_cond03.setColumn(0,"ANSLRY_AT", this.ds_masteremp.getColumn(0,"ANSLRY_AT"));  
	this.ds_cond03.setColumn(0,"YYYYMM1", yyyymm1); 
	this.ds_cond03.setColumn(0,"YYYYMM2", yyyymm2); 

	var strSvcId          = "selectRetireTrgt3List";   
	var sController   	= "hsco/mis/sal/SAL040103/selectRetireTrgt3List.do";
	var sInDatasets   	= "input4=ds_cond03";
	var sOutDatasets  	= "ds_pymnt3=output4 ds_hap1=output5";
	var argument = "";
	var callbackfunc = "";
	var showprogress = "";
	var bAsync = false;
	Ex.core.tran(this, strSvcId, sController, sInDatasets, sOutDatasets, argument, callbackfunc, showprogress, bAsync);  

	var thap1 = this.ds_pymnt3.getColumn(0,"TOT1");
	var thap2 = this.ds_hap1.getColumn(0,"TOT2");
	var thap3 = parseInt(thap1) / 3 + parseInt(thap2) / 12;    

	trace(thap1);
	trace(thap2);
	trace(thap3);

	Tot3 = thap3;
	this.MaskEdit02.set_value(thap3);     
	var retiryy = wrk_ycnt2 + wrk_mcnt2 /12;       
	var Tot_h = parseInt(retiryy * thap3 /10 ) *10 ;       // 퇴직급여     
	this.MaskEdit15.set_value(Tot_h);                      // 퇴직금

	// 정률공제 40%
	var Ddc =  Tot_h * 0.4 ;
	this.MaskEdit27.set_value(Ddc);

	// 근속연수 공제기준   
	this.ds_cond01.clearData();	
	this.ds_cond01.addRow();
	this.ds_cond01.setColumn(0,"YEAR", Term20);  	 
	this.ds_cond01.setColumn(0,"STD_YEAR", std_year);
	var strSvcId = "selectSalaryAnexptr2List";   
	var sController   	= "hsco/mis/sal/SAL040103/selectRetireCnwksdList.do";
	var sInDatasets   	= "input2=ds_cond01";
	var sOutDatasets  	= "ds_retireCnwksdList=output2";
	var argument = "";
	var callbackfunc = "";
	var showprogress = "";
	var bAsync = false;
	Ex.core.tran(this, strSvcId, sController, sInDatasets, sOutDatasets, argument, callbackfunc, showprogress, bAsync);  

	var Ddc1 = this.ds_retireCnwksdList.getColumn(0,"DDC_1"); 
	var Ddc2 = this.ds_retireCnwksdList.getColumn(0,"DDC_2"); 
	var Ddc3 = this.ds_retireCnwksdList.getColumn(0,"DDC_3"); 
	var Ddc4 = (Term20 - parseInt(Ddc3)) * parseInt(Ddc1) + parseInt(Ddc2);   // 근속연수 공제
	this.MaskEdit28.set_value(Ddc4); 

	var Ddc5 = parseInt(Ddc) + parseInt(Ddc4);                                // 퇴직소득공제금액                   
	var Ddc6 = parseInt(Tot_h) - parseInt(Ddc5);                              // 퇴직소득과세표준액 
	this.MaskEdit17.set_value(Ddc6); 

	// 2013년 이전분 세액계산
	var Year_s1 = Tm1;                                                        // 이전근속연수
	var Sdt_s1 = parseInt(Ddc6) / parseInt(Term20) * parseInt(Year_s1);       // 과세표준안분
	this.MaskEdit06.set_value(Sdt_s1);    

	var Sdt_s2 = parseInt(Sdt_s1) / parseInt(Year_s1);                        // 연평균과세표준 
	this.MaskEdit03.set_value(Sdt_s2);    

	this.ds_cond02.clearData();	
	this.ds_cond02.addRow();
	this.ds_cond02.setColumn(0,"T_AMT", Sdt_s2);  	
	var strSvcId       = "selectSalaryAnexptr3List";   
	var sController   	= "hsco/mis/sal/SAL040103/selectRetireCnwksd2List.do";
	var sInDatasets   	= "input3=ds_cond02";
	var sOutDatasets  	= "ds_retireCnwksd2List=output3";
	var argument       = "";
	var callbackfunc   = "";
	var showprogress   = "";
	var bAsync = false;
	Ex.core.tran(this, strSvcId, sController, sInDatasets, sOutDatasets, argument, callbackfunc, showprogress, bAsync);   

	var Tamt = this.ds_retireCnwksd2List.getColumn(0,"T2_AMT");     //연산출세액   
	if(!Tamt) { Tamt = 0 ;}      
	this.MaskEdit04.set_value(Tamt);                                                     
											 
	var Tamt2 = Math.round(parseInt(Tamt) * parseInt(Year_s1))      // 산출세액
	this.MaskEdit11.set_value(Tamt2);

	// 2013년 이후 세액계산
	var Year_s3 = Tm5;                                              // 이후근속연수
	var Sdt_s3 = parseInt(Ddc6) - parseInt(Sdt_s1);                 // 과세표준안분
	
	this.MaskEdit08.set_value(Sdt_s3);     

	var Sdt_s4 = parseInt(Sdt_s3) / parseInt(Year_s3);              // 연평균과세표준 
	this.MaskEdit09.set_value(Sdt_s4); 

	var Sdt_s5 = parseInt(Sdt_s4) * 5;                              // 환산과세표준 
	this.MaskEdit10.set_value(Sdt_s5);     
	this.ds_cond02.clearData();	
	this.ds_cond02.addRow();
	this.ds_cond02.setColumn(0,"T_AMT", Sdt_s5);  	 
	var strSvcId       = "selectSalaryAnexptr3List";   
	var sController   	= "hsco/mis/sal/SAL040103/selectRetireCnwksd2List.do";
	var sInDatasets   	= "input3=ds_cond02";
	var sOutDatasets  	= "ds_retireCnwksd3List=output3";
	var argument       = "";
	var callbackfunc   = "";
	var showprogress   = "";
	var bAsync = false;
	Ex.core.tran(this, strSvcId, sController, sInDatasets, sOutDatasets, argument, callbackfunc, showprogress, bAsync);  

	var Tamt20 = this.ds_retireCnwksd3List.getColumn(0,"T2_AMT");     // 환산산출세액   
	if(!Tamt20) { Tamt20 = 0 ;}                       
	this.MaskEdit01.set_value(Tamt20);    

	var Tamt3 = parseInt(Tamt20) / 5;                                 // 연산출세액
	this.MaskEdit05.set_value(Tamt3);

	var Tamt4 = Math.round(parseInt(Tamt3) * parseInt(Year_s3))       // 산출세액
	this.MaskEdit12.set_value(Tamt4);   

	// 합계- 연평균산출세액
	var Yamt= parseInt(Sdt_s2) + parseInt(Sdt_s4);                    // 연과세표준
	this.MaskEdit18.set_value(Yamt);

	var Yamt1 = parseInt(Tamt) + parseInt(Tamt3);                     // 연산출세액
	this.MaskEdit19.set_value(Yamt1);

	var Yamt2 = parseInt(Tamt2) + parseInt(Tamt4);                    // 산출세액
	this.MaskEdit20.set_value(Yamt2);
	
	this.MaskEdit31.set_value(parseInt(Sdt_s1) + parseInt(Sdt_s3));
	
	this.MaskEdit32.set_value(Sdt_s4);
	this.MaskEdit33.set_value(Sdt_s5);
	this.MaskEdit34.set_value(Tamt20);
	
	this.MaskEdit35.set_value(parseInt(Tamt) + parseInt(Tamt3));
	this.MaskEdit36.set_value(parseInt(Tamt2) + parseInt(Tamt4));
    
	// =================================================================================================
	// 2016년 이후 적용
	// 환산급여
	var cnvesn = parseInt((parseInt(Tot_h) - parseInt(Ddc4)) / parseInt(Term20)) * 12 ;
	this.MaskEdit14.set_value(cnvesn);
	this.ds_cond02.clearData();	
	this.ds_cond02.addRow();
	this.ds_cond02.setColumn(0,"CNV_AMT", cnvesn);  	 
	var strSvcId       = "selectSalaryAnexptr5List";   
	var sController   	= "hsco/mis/sal/SAL040103/selectRetireCnwksd5List.do";
	var sInDatasets   	= "input1=ds_cond02";
	var sOutDatasets  	= "ds_cnvrsn=output1";
	var argument       = "";
	var callbackfunc   = "";
	var showprogress   = "";
	var bAsync = false;
	Ex.core.tran(this, strSvcId, sController, sInDatasets, sOutDatasets, argument, callbackfunc, showprogress, bAsync);  

	if(this.ds_cnvrsn.rowcount <=0) {
	this.gfn_message("info.정보.없음","환산급여공제율");
		return;
	}

	var amount1 = this.ds_cnvrsn.getColumn(0,"ADSBTR_AMOUNT");  
	var amount2 = this.ds_cnvrsn.getColumn(0,"STDR_AMOUNT");
	var amount3 = this.ds_cnvrsn.getColumn(0,"DDC_RT");

	trace("amount1 : " + amount1+", amount2 : " + amount2+", amount3 : " + amount3);

	var amount4 = parseInt(amount1) + ((parseInt(cnvesn) - parseInt(amount2)) * parseInt(amount3) / 100);   // 환산급여 공제금
	this.MaskEdit25.set_value(amount4);
	var amount5 = (parseInt(cnvesn) - parseInt(amount4));                             // 퇴직소득과세표준
	this.MaskEdit26.set_value(amount5);

	trace("amount4 : " + amount4+", parseInt(amount1) : " + parseInt(amount1)+", (parseInt(cnvesn) : " + parseInt(cnvesn) +", parseInt(amount2) : " + parseInt(amount2) +", parseInt(amount3) : " + parseInt(amount3));
	trace("amount5 : " + amount5+", parseInt(cnvesn) " + parseInt(cnvesn) +",parseInt(amount4) : " + parseInt(amount4));
	
	// 환산산출세액
	this.ds_cond02.clearData();	
	this.ds_cond02.addRow();
	this.ds_cond02.setColumn(0,"T_AMT", amount5);  	 
	var strSvcId       = "selectSalaryAnexptr3List";   
	var sController   	= "hsco/mis/sal/SAL040103/selectRetireCnwksd2List.do";
	var sInDatasets   	= "input3=ds_cond02";
	var sOutDatasets  	= "ds_cnvrsn2=output3";
	var argument       = "";
	var callbackfunc   = "";
	var showprogress   = "";
	var bAsync = false;
	Ex.core.tran(this, strSvcId, sController, sInDatasets, sOutDatasets, argument, callbackfunc, showprogress, bAsync);   

	var amount6 = this.ds_cnvrsn2.getColumn(0,"T2_AMT");            // 환산산출세액 
	var amount7 = parseInt(amount6) * parseInt(Term20) / 12;        // 산출세액
	this.MaskEdit13.set_value(amount7);

	// 세액계산 특례
	this.ds_cond02.clearData();	
	this.ds_cond02.addRow();
	this.ds_cond02.setColumn(0,"APPLC_YEAR", this.dateUtils.format(this.gfn_today(),"yyyy"));  	 
	var strSvcId       = "selectSalaryAnexptr3List";   
	var sController   	= "hsco/mis/sal/SAL040103/selectRetireCnwksd6List.do";
	var sInDatasets   	= "input1=ds_cond02";
	var sOutDatasets  	= "ds_cnvrsn3=output1";
	var argument       = "";
	var callbackfunc   = "";
	var showprogress   = "";
	var bAsync = false;
	Ex.core.tran(this, strSvcId, sController, sInDatasets, sOutDatasets, argument, callbackfunc, showprogress, bAsync);  

	if(this.ds_cnvrsn3.rowcount <=0) {
	this.gfn_message("info.정보.없음","퇴직세액특례");
		return;
	}

	var rate1 = this.ds_cnvrsn3.getColumn(0,"RATE");   // 2015 이전 적용비율
	var rate2 = this.ds_cnvrsn3.getColumn(1,"RATE");   // 2016 이후 적용비율

	var amount8 = (parseInt(Tamt2) + parseInt(Tamt4)) * parseInt(rate1) / 100;    // 이전 소득세
	var amount9 = parseInt(amount7) * parseInt(rate2) / 100;                      // 이후 소득세
	this.MaskEdit29.set_value(amount8);
	this.MaskEdit30.set_value(amount9);

	// =================================================================================================

	var Tamt5 =  parseInt((parseInt(amount8) + parseInt(amount9))/10)*10  // 소득세    
	this.MaskEdit22.set_value(Tamt5);

	var Tamt6 = parseInt(Tamt5 * 0.1 / 10) * 10 ;                     // 지방소득세
	this.MaskEdit23.set_value(Tamt6);  
					
	var Tamt7 = parseInt(Tamt5) + parseInt(Tamt6); 
	Tamt8 = parseInt(Tot_h) - parseInt(Tamt7)                         // 공제총액
	this.MaskEdit24.set_value(Tamt8);                                 // 실수령액
}

/***********************************************************************
* 초기화
************************************************************************/
this.gfn_clear1 = function()
{
    this.Edit03.set_value(""); this.Edit04.set_value("");
    
    this.MaskEdit00.set_value(""); this.MaskEdit01.set_value(""); this.MaskEdit02.set_value(""); 
    this.MaskEdit03.set_value(""); this.MaskEdit04.set_value(""); this.MaskEdit05.set_value("");
    this.MaskEdit06.set_value(""); this.MaskEdit07.set_value(""); this.MaskEdit08.set_value("");
    this.MaskEdit09.set_value(""); this.MaskEdit10.set_value(""); this.MaskEdit11.set_value("");
    this.MaskEdit12.set_value(""); this.MaskEdit15.set_value(""); this.MaskEdit16.set_value("");
    this.MaskEdit17.set_value(""); this.MaskEdit18.set_value(""); this.MaskEdit19.set_value("");
    this.MaskEdit20.set_value(""); this.MaskEdit21.set_value(""); this.MaskEdit22.set_value("");
    this.MaskEdit23.set_value(""); this.MaskEdit24.set_value(""); this.MaskEdit27.set_value("");
    this.MaskEdit25.set_value(""); this.MaskEdit26.set_value(""); this.MaskEdit13.set_value("");
    this.MaskEdit28.set_value(""); this.MaskEdit14.set_value(""); this.MaskEdit29.set_value("");
    this.MaskEdit30.set_value("");
}

/***********************************************************************
* 일수계산
************************************************************************/
this.gfn_daybetween = function(sFormDt,sEndDt)
{
    var sFormDt = String(sFormDt);
    var sEndDt 	= String(sEndDt);
    var vFromDate = new Date(parseInt(sEndDt.substr(0,4), 10), parseInt(sEndDt.substr(4, 2), 10)-1, parseInt(sEndDt.substr(6,2), 10));
    var vToDate  = new Date(parseInt(sFormDt.substr(0,4), 10), parseInt(sFormDt.substr(4, 2), 10)-1, parseInt(sFormDt.substr(6,2), 10));
    var Term = Math.abs(parseInt((vFromDate - vToDate)/(1000*60*60*24)));

    return Term;
}

/***********************************************************************
* 월수계산
************************************************************************/
this.gfn_monthbetween = function(sFormDt,sEndDt)
{
    sFormDt 	= parseInt(sFormDt.substr(0, 4), 10) * 12  + parseInt(sFormDt.substr(4, 2), 10);
    sEndDt 		= parseInt(sEndDt.substr(0, 4), 10) * 12  + parseInt(sEndDt.substr(4, 2), 10);
    var Term    = Math.abs(sEndDt - sFormDt);
    return Term;
}


/***********************************************************************
* 예상퇴직금확인서 출력
************************************************************************/
this.btn_mtSalaryDtstmn_onclick = function(obj:Button,  e:nexacro.ClickEventInfo)
{
	// 실수령액이 있는지
	if(!Tamt8){
	     return;
	}
	
	this.ds_retireExpect.clearData();
	this.ds_retireExpect.addRow();
	this.ds_retireExpect.setColumn(0,"EMPNM",this.ds_masteremp.getColumn(0,"EMPNM"));
	this.ds_retireExpect.setColumn(0,"NM_CHCRT",this.ds_masteremp.getColumn(0,"NM_CHCRT"));
	this.ds_retireExpect.setColumn(0,"ADRES",this.ds_masteremp.getColumn(0,"ADRES"));
	this.ds_retireExpect.setColumn(0,"DEPT_NAME",this.ds_masteremp.getColumn(0,"DEPT_NAME"));
	this.ds_retireExpect.setColumn(0,"OFCPS",this.cmb_EMPL_SE00.text);
	this.ds_retireExpect.setColumn(0,"DATE",this.cal_std01.value);
	this.ds_retireExpect.setColumn(0,"DATE1",this.gfn_today());
	this.ds_retireExpect.setColumn(0,"DATE2",this.cal_std.value);
	this.ds_retireExpect.setColumn(0,"DATE3",this.cal_std2.value);
	this.ds_retireExpect.setColumn(0,"YEAR1",Term04);
	this.ds_retireExpect.setColumn(0,"YEAR2",Term2);
	this.ds_retireExpect.setColumn(0,"DAY1",Term03);
	this.ds_retireExpect.setColumn(0,"DAY2",Term3);	
	this.ds_retireExpect.setColumn(0,"AMT1",Tot3);
	this.ds_retireExpect.setColumn(0,"AMT2",Tamt8);
	
	var vOpts = new this.cf_Opts();	
	vOpts.setToolbar(false);
	vOpts.setScale(100);
	vOpts.setReportPath("/mis/sal/SAL040103_R01.jrf");
	vOpts.setSaveFilename("예상퇴직금확인서");
	vOpts.setLocalDs(["ds_retireExpect", this.ds_retireExpect]);
	
	var parm = {
		arg_0 : this,  //==> 필수, 팝업을 호출하는 form을 참조할 수 있도록 팝업에 Argument로 넘겨준다. (반드시 기술해야 함.)
		opts : vOpts
	};

	this.gfn_popup("Popup_Report", 884, 735, "예상퇴직확인서", parm, "common::frmReportPopup.xfdl", "report_callback");
}
]]></Script>
  </Form>
</FDL>
