<?xml version="1.0" encoding="utf-8"?>
<FDL version="1.5">
  <TypeDefinition url="..\..\default_typedef.xml"/>
  <Form id="SAL020103_P01" classname="SAL020103_P01" left="0" top="0" width="1000" height="650" titletext="가족수당신청" onload="SAL020103_P01_onload" oninit="SAL020103_P01_oninit">
    <Layouts>
      <Layout>
        <Static id="Static07" taborder="94" cssclass="sta_WF_PopupBg" left="0%" top="0" height="650" width="1000" onclick="Static07_onclick"/>
        <Static id="Static06" taborder="10" text="15" visible="false" left="0.33%" top="0" right="0.33%" height="15" style="background:#dc143c3c;align:center middle;"/>
        <Static id="Static05" taborder="11" text="15" visible="false" left="0" top="2" height="496" style="background:#1b3cd23c;align:center middle;" width="15"/>
        <Static id="sta_title" taborder="43" text="가족수당신청정보" cssclass="sta_WF_Title01" left="15" top="17" height="21" width="240"/>
        <Button id="btn_popup_save" taborder="46" text="저장" left="879" top="15" height="25" cssclass="btn_WF_CRUD" width="50" visible="false" onclick="btn_popup_save_onclick"/>
        <Button id="btn_popup_close" taborder="47" text="닫기" onclick="btn_popup_close_onclick" left="932" top="15" height="25" cssclass="btn_WF_CRUD" width="50"/>
        <Div id="div_familyAllwncReqstInfo1" taborder="0" text="Div00" left="15" top="46" height="46" right="15" scrollbars="none" visible="false" positionstep="0">
          <Layouts>
            <Layout>
              <Static id="Static51" taborder="3" cssclass="sta_WF_Labelbg" left="64" top="18" height="27" width="905"/>
              <Edit id="edt_returnCn" taborder="2" enable="false" left="431" top="21" height="21" right="4" style=":disabled {color:#b6b6b6ff;}"/>
              <Static id="Static03" taborder="4" text="반려내용" cssclass="sta_WF_Label" left="359" top="18" width="70" height="27"/>
              <Static id="Static84" taborder="5" text="승인여부" cssclass="sta_WF_Label" left="0" top="18" width="70" height="27"/>
              <Combo id="cmb_salaryConfmAt" taborder="0" innerdataset="@ds_confmSe" codecolumn="CODE" datacolumn="CODE_NM" onitemchanged="cmb_CONFM_SE_onitemchanged" enable="false" left="72" top="21" width="102" height="21" index="-1"/>
              <Static id="Static02" taborder="6" text="승인일자" cssclass="sta_WF_Label" left="176" top="18" width="70" height="27"/>
              <Calendar id="cal_salaryConfmDe" taborder="1" dateformat="yyyy-MM-dd" enable="false" left="248" top="21" width="109" height="21" value="null" oneditclick="div_confmInfo_cal_salaryConfmDe_oneditclick" cssclass="cal_WF_Essential"/>
              <Static id="Static04" taborder="7" text="승인정보" cssclass="sta_WF_Title02" left="0" top="0" right="758" height="19"/>
              <Static id="Static12" taborder="8" text="5" visible="false" left="0%" top="14" height="5" style="background:#dc143c3c;align:center middle;" width="894"/>
            </Layout>
          </Layouts>
        </Div>
        <Static id="Static08" taborder="146" text="5" visible="false" left="1.5%" top="91" right="5.1%" height="5" style="background:#dc143c3c;align:center middle;"/>
        <Static id="Static00" taborder="161" text="15" onclick="Static00_onclick" visible="false" left="986" top="96" width="15" height="496" style="background:#1b3cd23c;align:center middle;"/>
        <Div id="div_familyAllwncReqstInfo2" taborder="1" text="Div00" left="15" top="100" right="15" bottom="15">
          <Layouts>
            <Layout>
              <Static id="Static01" taborder="30" text="15" visible="false" left="-105%" top="642" right="106.38%" height="15" style="background:#dc143c3c;align:center middle;"/>
              <Static id="Static34" taborder="27" text="신청인정보" cssclass="sta_WF_Title02" left="0" top="0" right="75.86%" height="19"/>
              <Static id="Static00" taborder="28" visible="false" left="0%" top="15" right="31" height="5" style="background:#dc143c3c;align:center middle;"/>
              <Static id="Static14" taborder="29" cssclass="sta_WF_Labelbg" left="0" top="45" right="30" height="27"/>
              <Static id="Static10" taborder="31" cssclass="sta_WF_Labelbg" left="61" top="19" right="535" height="27"/>
              <Static id="Static04" taborder="32" cssclass="sta_WF_Labelbg" left="68" top="45" right="0" height="27"/>
              <Grid id="grd_cmmnAtchmnfl" taborder="14" binddataset="ds_fileList" autoenter="select" useinputpanel="false" cellsizingtype="col" autofittype="col" onheadclick="grd_cmmnAtchmnfl_onheadclick" left="0" top="442" bottom="0" right="0">
                <Formats>
                  <Format id="default">
                    <Columns>
                      <Column size="40"/>
                      <Column size="65"/>
                      <Column size="300"/>
                      <Column size="80"/>
                      <Column size="80"/>
                    </Columns>
                    <Rows>
                      <Row size="24" band="head"/>
                      <Row size="40"/>
                    </Rows>
                    <Band id="head">
                      <Cell displaytype="checkbox" edittype="checkbox"/>
                      <Cell col="1" text="파일형식"/>
                      <Cell col="2" celltype="head" text="파일명"/>
                      <Cell col="3" text="확장자"/>
                      <Cell col="4" text="사이즈"/>
                    </Band>
                    <Band id="body">
                      <Cell displaytype="checkbox" edittype="checkbox" text="bind:CHK"/>
                      <Cell col="1" displaytype="image" text="bind:FILE_IMAGE" autosizerow="limitmin" autosizecol="limitmin"/>
                      <Cell col="2" displaytype="normal" style="align:left middle;" text="bind:ORGINL_FILE_NM"/>
                      <Cell col="3" text="bind:FILE_EXTSN"/>
                      <Cell col="4" text="bind:FILE_MG"/>
                    </Band>
                  </Format>
                </Formats>
              </Grid>
              <Static id="Static21" taborder="34" text="첨부파일" cssclass="sta_WF_Title03" left="0" top="419" width="81" height="27"/>
              <Static id="sta_EMPL_BANK13" taborder="35" text="(주민등록등본 or 가족관계증명서, 의사진단서)" cssclass="sta_WFDA_labelB" left="73" top="422" width="258" height="22" style="align:left middle;"/>
              <Button id="btn_delFiles" taborder="11" text="선택삭제" onclick="btn_delFiles_onclick" cssclass="btn_WF_Process" top="421" right="87" width="67" height="19" visible="false"/>
              <Button id="btn_uploadFiles" taborder="12" text="파일업로드" onclick="btn_uploadFiles_onclick" cssclass="btn_WF_Process" top="421" right="156" width="68" height="19" visible="false"/>
              <Button id="btn_downFiles" taborder="13" text="선택다운로드" onclick="btn_downFiles_onclick" cssclass="btn_WF_Process" top="421" right="0" width="85" height="19"/>
              <Grid id="grd_familyAllwncTrgter" taborder="8" binddataset="ds_familyAllwncTrgter" autoenter="select" useinputpanel="false" left="0" top="258" right="0" height="153" oncolumnchanged="ds_familyAllwncTrgter_oncolumnchanged" onrowposchanged="ds_familyAllwncTrgter_onrowposchanged">
                <Formats>
                  <Format id="default">
                    <Columns>
                      <Column size="40"/>
                      <Column size="85"/>
                      <Column size="80"/>
                      <Column size="80"/>
                      <Column size="60"/>
                      <Column size="144"/>
                      <Column size="100"/>
                      <Column size="90"/>
                      <Column size="60"/>
                      <Column size="60"/>
                      <Column size="180"/>
                      <Column size="90"/>
                      <Column size="180"/>
                    </Columns>
                    <Rows>
                      <Row size="24" band="head"/>
                      <Row size="24"/>
                    </Rows>
                    <Band id="head">
                      <Cell text="순번"/>
                      <Cell col="1" cssclass="Cellgrd_WF_HeadEssential" text="구분"/>
                      <Cell col="2" cssclass="Cellgrd_WF_HeadEssential" text="관계"/>
                      <Cell col="3" cssclass="Cellgrd_WF_HeadEssential" text="가족성명"/>
                      <Cell col="4" text="성별"/>
                      <Cell col="5" cssclass="Cellgrd_WF_HeadEssential" text="생년월일"/>
                      <Cell col="6" text="직업명"/>
                      <Cell col="7" text="학력구분"/>
                      <Cell col="8" text="장애여부"/>
                      <Cell col="9" text="부양여부"/>
                      <Cell col="10" text="변동사유"/>
                      <Cell col="11" text="변동사유일"/>
                      <Cell col="12" text="비고"/>
                    </Band>
                    <Band id="body">
                      <Cell text="expr:currow+1"/>
                      <Cell col="1" displaytype="combo" edittype="expr:dataset.getColumn(currow, 'NEW_AT') == '1' ? 'combo' : 'none'" text="bind:REQST_SE" combodataset="ds_reqstSe" combocodecol="CODE" combodatacol="CODE_NM"/>
                      <Cell col="2" displaytype="combo" edittype="combo" text="bind:RELATE" combodataset="ds_familyRelateSe" combocodecol="CODE" combodatacol="CODE_NM" combodisplay="expr:dataset.getRowType(currow) == Dataset.ROWTYPE_INSERT ? 'display' : 'edit'"/>
                      <Cell col="3" edittype="expr:dataset.getColumn(currow, 'ADD_SE') == '2' ? 'normal' : 'none'" text="bind:FAMILY_NM" editlimit="30" editdisplay="expr:dataset.getRowType(currow) == Dataset.ROWTYPE_INSERT ? ((dataset.getColumn(currow, 'ADD_SE') == '2' ? display' : 'edit') : 'edit')" editlengthunit="utf8"/>
                      <Cell col="4" displaytype="combo" edittype="combo" text="bind:SEXDSTN_SE" combodataset="ds_sexdstnSe" combocodecol="CODE" combodatacol="CODE_NM" combodisplayrowcount="-1" combodisplay="expr:dataset.getRowType(currow) == Dataset.ROWTYPE_INSERT ? 'display' : 'edit'"/>
                      <Cell col="5" displaytype="date" edittype="date" text="bind:BRTHDY" editlimit="8" editlengthunit="utf8" combodataset="DS_SE2" combocodecol="code" combodatacol="data" calendardisplay="expr:dataset.getRowType(currow) == Dataset.ROWTYPE_INSERT ? 'display' : 'edit'" calendardisplaynulltype="none"/>
                      <Cell col="6" edittype="normal" text="bind:OCCP_NM" editlimit="30" editdisplay="expr:dataset.getRowType(currow) == Dataset.ROWTYPE_INSERT ? 'display' : 'edit'" editlengthunit="utf8"/>
                      <Cell col="7" displaytype="combo" edittype="combo" text="bind:ACDMCR_SE" editlimit="20" editlengthunit="utf8" combodataset="ds_acdmcrSe" combocodecol="CODE" combodatacol="CODE_NM" combodisplay="expr:dataset.getRowType(currow) == Dataset.ROWTYPE_INSERT ? 'display' : 'edit'"/>
                      <Cell col="8" displaytype="checkbox" edittype="checkbox" text="bind:TROBL_AT"/>
                      <Cell col="9" displaytype="checkbox" edittype="checkbox" text="bind:SUPORT_AT"/>
                      <Cell col="10" displaytype="normal" edittype="normal" text="bind:CHANGE_PRVONSH" editlimit="200" editdisplay="expr:dataset.getRowType(currow) == Dataset.ROWTYPE_INSERT ? 'display' : 'edit'" editlengthunit="utf8"/>
                      <Cell col="11" displaytype="date" edittype="date" text="bind:CHANGE_PRVONSH_DE" calendardisplay="expr:dataset.getRowType(currow) == Dataset.ROWTYPE_INSERT ? 'display' : 'edit'" calendardisplaynulltype="none"/>
                      <Cell col="12" edittype="normal" text="bind:RM" editlimit="200" editdisplay="expr:dataset.getRowType(currow) == Dataset.ROWTYPE_INSERT ? 'display' : 'edit'" editlengthunit="utf8"/>
                    </Band>
                  </Format>
                </Formats>
              </Grid>
              <Button id="btn_familyAdd" taborder="9" text="행추가" onclick="btn_familyAdd_onclick" cssclass="btn_WF_Gridadd" visible="false" top="237" height="19" right="69" width="66" tabstop="true"/>
              <Button id="btn_familyDelete" taborder="10" text="행삭제" onclick="btn_familyDelete_onclick" cssclass="btn_WF_Griddel" visible="false" left="93.09%" top="237" width="66" height="19"/>
              <Static id="Static03" taborder="42" text="5" visible="false" left="0.2%" top="254" right="30" height="5" style="background:#dc143c3c;align:center middle;"/>
              <Static id="Static11" taborder="43" text="가족수당대상자" cssclass="sta_WF_Title02" left="0" top="236" width="194" height="27"/>
              <Grid id="grd_applcntFamilyInfo" taborder="7" binddataset="ds_applcntFamilyInfo" autoenter="select" useinputpanel="false" autofittype="col" oncellclick="grd_applcntFamilyInfo_oncellclick" left="0" top="77" right="0" height="148">
                <Formats>
                  <Format id="default">
                    <Columns>
                      <Column size="40"/>
                      <Column size="40"/>
                      <Column size="60"/>
                      <Column size="40"/>
                      <Column size="91"/>
                      <Column size="62"/>
                      <Column size="38"/>
                      <Column size="38"/>
                      <Column size="38"/>
                    </Columns>
                    <Rows>
                      <Row size="24" band="head"/>
                      <Row size="24"/>
                    </Rows>
                    <Band id="head">
                      <Cell text="순번"/>
                      <Cell col="1" text="관계"/>
                      <Cell col="2" text="성명"/>
                      <Cell col="3" text="성별"/>
                      <Cell col="4" text="생년월일"/>
                      <Cell col="5" text="직업"/>
                      <Cell col="6" text="장애"/>
                      <Cell col="7" text="부양"/>
                      <Cell col="8" text="수당"/>
                    </Band>
                    <Band id="body">
                      <Cell text="expr:currow+1"/>
                      <Cell col="1" displaytype="combo" edittype="none" text="bind:FAMILY_RELATE_SE" combodataset="ds_familyRelateSe" combocodecol="CODE" combodatacol="CODE_NM"/>
                      <Cell col="2" edittype="none" text="bind:FAMILY_NM"/>
                      <Cell col="3" displaytype="combo" edittype="none" text="bind:SEXDSTN_SE" combodataset="ds_sexdstnSe" combocodecol="CODE" combodatacol="CODE_NM"/>
                      <Cell col="4" displaytype="date" edittype="none" text="bind:BRTHDY" calendardisplaynulltype="none"/>
                      <Cell col="5" edittype="none" text="bind:OCCP_NM"/>
                      <Cell col="6" displaytype="checkbox" edittype="none" style="controlborder:1 none #808080 ;" text="bind:TROBL_AT"/>
                      <Cell col="7" displaytype="checkbox" edittype="none" style="controlborder:1 none #808080 ;" text="bind:SUPORT_AT"/>
                      <Cell col="8" displaytype="checkbox" edittype="none" style="controlborder:1 none #808080 ;" text="bind:ALLWNC_PYMNT_AT"/>
                    </Band>
                  </Format>
                </Formats>
              </Grid>
              <Static id="Static02" taborder="45" text="5" visible="false" left="0.2%" top="224" right="30" height="5" style="background:#dc143c3c;align:center middle;"/>
              <Static id="Static19" taborder="46" text="5" visible="false" left="0.2%" top="72" right="30" height="5" style="background:#dc143c3c;align:center middle;"/>
              <Static id="Static15" taborder="47" text="부서명" cssclass="sta_WF_Label" left="0" top="45" width="70" height="27"/>
              <Static id="Static09" taborder="48" text="신청일자" cssclass="sta_WF_Label" left="0" top="19" width="70" height="27"/>
              <Calendar id="cal_reqstDe" taborder="0" dateformat="yyyy-MM-dd" oneditclick="cal_reqstDe_oneditclick" left="72" top="22" width="105" height="21" value="null" cssclass="cal_WF_Essential"/>
              <Edit id="edt_deptNm" taborder="4" readonly="true" cssclass="edt_WF_Readonly" left="72" top="48" right="750" height="21"/>
              <Static id="Static13" taborder="51" text="사원번호" cssclass="sta_WF_Label" left="180" top="19" width="70" height="27"/>
              <Edit id="edt_empno" taborder="1" readonly="true" oneditclick="edt_empno_oneditclick" cssclass="edt_WF_Readonly" left="252" top="22" width="83" height="21"/>
              <Edit id="edt_empnm" taborder="3" readonly="true" cssclass="edt_WF_Readonly" left="337" top="22" width="124" height="21"/>
              <Combo id="cmb_clsfSe" taborder="5" readonly="true" innerdataset="ds_clsfSe" codecolumn="CODE" datacolumn="CODE_NM" onitemchanged="cmb_clsfSe_onitemchanged" cssclass="cmb_WF_Readonly" left="324" top="48" width="83" height="21"/>
              <Static id="Static16" taborder="55" text="직급" cssclass="sta_WF_Label" left="252" top="45" width="70" height="27"/>
              <Static id="Static18" taborder="2" text="주소" cssclass="sta_WF_Label" left="409" top="45" width="70" height="27"/>
              <Edit id="edt_ADRES" taborder="6" readonly="true" cssclass="edt_WF_Readonly" left="481" top="48" right="2" height="21"/>
              <Static id="Static12" taborder="58" text="5" visible="false" left="0.2%" top="14" right="6.77%" height="5" style="background:#dc143c3c;align:center middle;"/>
              <Static id="Static05" taborder="59" text="※ 주민등록번호 뒷자리 삭제 후 업로드" left="337" top="422" width="285" height="21" style="color:red;font:9 Gulim bold;"/>
            </Layout>
          </Layouts>
        </Div>
      </Layout>
    </Layouts>
    <Bind>
      <BindItem id="item8" compid="div_confmInfo.cal_salaryConfmDe" propid="value" datasetid="ds_confmInfoApplcntInfo" columnid="SALARY_CONFM_DE"/>
      <BindItem id="item10" compid="div_confmInfo.edt_returnCn" propid="value" datasetid="ds_confmInfoApplcntInfo" columnid="RETURN_CN"/>
      <BindItem id="item12" compid="div_confmInfo.cmb_salaryConfmAt" propid="value" datasetid="ds_confmInfoApplcntInfo" columnid="SALARY_CONFM_AT"/>
      <BindItem id="item5" compid="Div00.cal_reqstDe" propid="value" datasetid="ds_confmInfoApplcntInfo" columnid="REQST_DE"/>
      <BindItem id="item2" compid="Div00.edt_deptNm" propid="value" datasetid="ds_confmInfoApplcntInfo" columnid="DEPT_NM"/>
      <BindItem id="item0" compid="Div00.edt_empno" propid="value" datasetid="ds_confmInfoApplcntInfo" columnid="EMPNM"/>
      <BindItem id="item1" compid="Div00.edt_empnm" propid="value" datasetid="ds_confmInfoApplcntInfo" columnid="EMPNO"/>
      <BindItem id="item3" compid="Div00.cmb_clsfSe" propid="value" datasetid="ds_confmInfoApplcntInfo" columnid="HR_CLSF_SE"/>
      <BindItem id="item4" compid="Div00.edt_ADRES" propid="value" datasetid="ds_confmInfoApplcntInfo" columnid="ADRES"/>
      <BindItem id="item7" compid="div_familyAllwncReqstInfo2.edt_empno" propid="value" datasetid="ds_confmInfoApplcntInfo" columnid="EMPNO"/>
      <BindItem id="item9" compid="div_familyAllwncReqstInfo2.edt_empnm" propid="value" datasetid="ds_confmInfoApplcntInfo" columnid="EMPNM"/>
      <BindItem id="item11" compid="div_familyAllwncReqstInfo2.edt_deptNm" propid="value" datasetid="ds_confmInfoApplcntInfo" columnid="DEPT_NM"/>
      <BindItem id="item13" compid="div_familyAllwncReqstInfo2.cmb_clsfSe" propid="value" datasetid="ds_confmInfoApplcntInfo" columnid="HR_CLSF_SE"/>
      <BindItem id="item14" compid="div_familyAllwncReqstInfo2.edt_ADRES" propid="value" datasetid="ds_confmInfoApplcntInfo" columnid="ADRES"/>
      <BindItem id="item15" compid="div_familyAllwncReqstInfo1.cmb_salaryConfmAt" propid="value" datasetid="ds_confmInfoApplcntInfo" columnid="SALARY_CONFM_AT"/>
      <BindItem id="item16" compid="div_familyAllwncReqstInfo1.cal_salaryConfmDe" propid="value" datasetid="ds_confmInfoApplcntInfo" columnid="SALARY_CONFM_DE"/>
      <BindItem id="item17" compid="div_familyAllwncReqstInfo1.edt_returnCn" propid="value" datasetid="ds_confmInfoApplcntInfo" columnid="RETURN_CN"/>
      <BindItem id="item6" compid="div_familyAllwncReqstInfo2.cal_reqstDe" propid="value" datasetid="ds_confmInfoApplcntInfo" columnid="REQST_DE"/>
    </Bind>
    <Objects>
      <Dataset id="ds_cond" useclientlayout="true">
        <ColumnInfo>
          <Column id="EMPNO" type="STRING" size="256"/>
          <Column id="REQST_DE" type="STRING" size="256"/>
          <Column id="REQST_SE" type="STRING" size="256"/>
          <Column id="REQST_SN" type="STRING" size="256"/>
          <Column id="POPUP_STTUS" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_confmInfoApplcntInfo" useclientlayout="true" oncolumnchanged="ds_confmInfoApplcntInfo_oncolumnchanged">
        <ColumnInfo>
          <Column id="REQST_DE" type="STRING" size="256"/>
          <Column id="REQST_SN" type="STRING" size="256"/>
          <Column id="REQST_SE" type="STRING" size="256"/>
          <Column id="EMPNO" type="STRING" size="256"/>
          <Column id="EMPNM" type="STRING" size="256"/>
          <Column id="DEPT_NM" type="STRING" size="256"/>
          <Column id="HR_CLSF_SE" type="STRING" size="256"/>
          <Column id="ADRES" type="STRING" size="256"/>
          <Column id="SALARY_CONFM_AT" type="STRING" size="256"/>
          <Column id="SALARY_CONFM_DE" type="STRING" size="256"/>
          <Column id="RETURN_CN" type="STRING" size="256"/>
          <Column id="FILE_SN" type="STRING" size="256"/>
          <Column id="RM" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_applcntFamilyInfo" onrowposchanged="ds_applcntFamilyInfo_onrowposchanged" useclientlayout="true">
        <ColumnInfo>
          <Column id="SEQ" type="STRING" size="256"/>
          <Column id="FAMILY_RELATE_SE" type="STRING" size="256"/>
          <Column id="FAMILY_NM" type="STRING" size="256"/>
          <Column id="IHIDNUM_ENCPT" type="STRING" size="256"/>
          <Column id="SEXDSTN_SE" type="STRING" size="256"/>
          <Column id="BRTHDY" type="STRING" size="256"/>
          <Column id="OCCP_NM" type="STRING" size="256"/>
          <Column id="ACDMCR_SE" type="STRING" size="256"/>
          <Column id="TROBL_AT" type="STRING" size="256"/>
          <Column id="SUPORT_AT" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_familyAllwncTrgter" useclientlayout="true" onrowposchanged="ds_familyAllwncTrgter_onrowposchanged">
        <ColumnInfo>
          <Column id="SN" type="STRING" size="256"/>
          <Column id="REQST_DE" type="STRING" size="256"/>
          <Column id="REQST_SN" type="STRING" size="256"/>
          <Column id="REQST_SE" type="STRING" size="256"/>
          <Column id="FAMILY_NM" type="STRING" size="256"/>
          <Column id="FAMILY_IHIDNUM_ENCPT" type="STRING" size="256"/>
          <Column id="RELATE" type="STRING" size="256"/>
          <Column id="CHANGE_PRVONSH" type="STRING" size="256"/>
          <Column id="CHANGE_PRVONSH_DE" type="STRING" size="256"/>
          <Column id="SEXDSTN_SE" type="STRING" size="256"/>
          <Column id="BRTHDY" type="STRING" size="256"/>
          <Column id="OCCP_NM" type="STRING" size="256"/>
          <Column id="ACDMCR_SE" type="STRING" size="256"/>
          <Column id="TROBL_AT" type="STRING" size="256"/>
          <Column id="SUPORT_AT" type="STRING" size="256"/>
          <Column id="RM" type="STRING" size="256"/>
          <Column id="FILE_SN" type="STRING" size="256"/>
          <Column id="ADD_SE" type="STRING" size="256"/>
          <Column id="NEW_AT" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_familyRelateSe" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="CODE" type="STRING" size="256"/>
          <Column id="GRP_CODE" type="STRING" size="256"/>
          <Column id="CODE_NM" type="STRING" size="256"/>
          <Column id="CODE_CN" type="STRING" size="256"/>
          <Column id="CODE_ORDR" type="STRING" size="256"/>
          <Column id="VAL0" type="STRING" size="256"/>
          <Column id="VAL1" type="STRING" size="256"/>
          <Column id="VAL2" type="STRING" size="256"/>
          <Column id="VAL3" type="STRING" size="256"/>
          <Column id="VAL4" type="STRING" size="256"/>
          <Column id="INT_VAL" type="STRING" size="256"/>
          <Column id="MSTK_VAL" type="STRING" size="256"/>
          <Column id="ETC1" type="STRING" size="256"/>
          <Column id="ETC2" type="STRING" size="256"/>
          <Column id="ETC3" type="STRING" size="256"/>
          <Column id="USE_YN" type="STRING" size="256"/>
          <Column id="ALL_CODE_NM" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_sexdstnSe" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="CODE" type="STRING" size="256"/>
          <Column id="CODE_NM" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_acdmcrSe" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="CODE" type="STRING" size="256"/>
          <Column id="CODE_NM" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_se" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="CODE" type="STRING" size="256"/>
          <Column id="CODE_NM" type="STRING" size="256"/>
        </ColumnInfo>
        <Rows>
          <Row>
            <Col id="CODE">1</Col>
            <Col id="CODE_NM">신규</Col>
          </Row>
          <Row>
            <Col id="CODE">2</Col>
            <Col id="CODE_NM">변경</Col>
          </Row>
        </Rows>
      </Dataset>
      <Dataset id="ds_reqstSe" useclientlayout="false">
        <ColumnInfo>
          <Column id="CODE" type="STRING" size="256"/>
          <Column id="CODE_NM" type="STRING" size="256"/>
        </ColumnInfo>
        <Rows>
          <Row>
            <Col id="CODE">1</Col>
            <Col id="CODE_NM">취득</Col>
          </Row>
          <Row>
            <Col id="CODE">2</Col>
            <Col id="CODE_NM">상실</Col>
          </Row>
          <Row>
            <Col id="CODE">3</Col>
            <Col id="CODE_NM">변경</Col>
          </Row>
        </Rows>
      </Dataset>
      <Dataset id="ds_fileList" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="CHK" type="STRING" size="256"/>
          <Column id="PROGRS" type="BIGDECIMAL" size="16"/>
          <Column id="ORGINL_FILE_NM" type="string" size="32"/>
          <Column id="FILE_EXTSN" type="string" size="32"/>
          <Column id="FILE_STRE_COURS" type="string" size="32"/>
          <Column id="FILE_ID" type="string" size="32"/>
          <Column id="SN" type="bigdecimal" size="16"/>
          <Column id="SYS_SE_CODE" type="string" size="32"/>
          <Column id="FILE_IMAGE" type="string" size="32"/>
          <Column id="FILE_TY" type="string" size="32"/>
          <Column id="JOB_SE" type="string" size="32"/>
          <Column id="DELETE_IMAGE" type="string" size="32"/>
          <Column id="STRE_FILE_NM" type="string" size="32"/>
          <Column id="FILE_MG" type="bigdecimal" size="16"/>
          <Column id="FILE_CN" type="string" size="32"/>
          <Column id="FILE_ORDR" type="bigdecimal" size="16"/>
          <Column id="TRNSMIS_FILE_SIZE" type="string" size="32"/>
          <Column id="USE_AT" type="string" size="32"/>
          <Column id="STTUS" type="string" size="32"/>
          <Column id="FILE_SN" type="bigdecimal" size="16"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_confmSe">
        <ColumnInfo>
          <Column id="CODE" type="STRING" size="256"/>
          <Column id="CODE_NM" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_clsfSe" useclientlayout="true">
        <ColumnInfo>
          <Column id="CODE" type="STRING" size="256"/>
          <Column id="CODE_NM" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_validation" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="compId" type="STRING" size="256"/>
          <Column id="colId" type="STRING" size="256"/>
          <Column id="PK" type="STRING" size="256"/>
          <Column id="notNull" type="STRING" size="256"/>
          <Column id="type" type="STRING" size="256"/>
          <Column id="nlength" type="STRING" size="256"/>
          <Column id="from" type="STRING" size="256"/>
          <Column id="to" type="STRING" size="256"/>
          <Column id="lengthChkGb" type="STRING" size="256"/>
          <Column id="msgId" type="STRING" size="256"/>
          <Column id="expr" type="STRING" size="256"/>
          <Column id="func" type="STRING" size="256"/>
        </ColumnInfo>
        <Rows>
          <Row>
            <Col id="compId">ds_confmInfoApplcntInfo</Col>
            <Col id="notNull">Y</Col>
            <Col id="colId">REQST_DE</Col>
            <Col id="msgId">신청일자</Col>
            <Col id="PK"/>
            <Col id="nlength"/>
            <Col id="lengthChkGb"/>
          </Row>
          <Row>
            <Col id="compId">ds_familyAllwncTrgter</Col>
            <Col id="colId">BRTHDY</Col>
            <Col id="notNull">Y</Col>
            <Col id="nlength"/>
            <Col id="lengthChkGb"/>
            <Col id="msgId">생년월일</Col>
            <Col id="PK"/>
          </Row>
          <Row>
            <Col id="compId">ds_familyAllwncTrgter</Col>
            <Col id="colId">FAMILY_NM</Col>
            <Col id="notNull">Y</Col>
            <Col id="msgId">기족성명</Col>
          </Row>
        </Rows>
      </Dataset>
      <Dataset id="ds_fileCond" useclientlayout="true">
        <ColumnInfo>
          <Column id="FILE_SN" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
    </Objects>
    <Script type="xscript5.0"><![CDATA[/***********************************************************************
 * 업무구분 : 가족수당신청팝업관리
 * 화면ID   : SAL020103_P1
 * 화면명   : 가족수당신청팝업정보관리
 * 화면설명 : 가족수당신청팝업정보를 관리한다.
 * 작성일   : 2015.07.01
 * 작성자   : 이동석
 * 수정이력 : 
 ***********************************************************************
 *     수정일     수정자   내용
 ***********************************************************************
 *   
 ***********************************************************************

/***********************************************************************
 * Script Include 
***********************************************************************/
include "lib::comInclude.xjs";
include "mis_lib::misUtil.xjs";
include "lib::comUpDownUtils.xjs";
include "lib::comInnerSanct.xjs";
include "lib::comLib.xjs";

/**********************************************************************
* 화면 변수 선언부
**********************************************************************/
this.checkDs = [
	//this.ds_familyAllwncTrgter
];

this.File_UpDownManager = null;

var empno      = this.parent.empno;			// 사번
var reqstSn    = this.parent.reqstSn;		// 신청순번
var confmAt    = this.parent.confmAt;		// 승인여부
var popupSttus = this.parent.popupSttus;	// 팝업상태(C : 생성, R : 조회, M : 관리)

/**********************************************************************
* onInit / onLoad 영역
**********************************************************************/

this.SAL020103_P01_oninit = function(obj:Form, e:nexacro.InitEventInfo)
{
	// form 초기화
	this.fn_init_form();
	// dataset 초기화
	this.fn_init_dataset();
}

this.SAL020103_P01_onload = function(obj:Form, e:nexacro.LoadEventInfo)
{
	this.fn_loadCombo();
	this.fn_search();
}



/**********************************************************************
* Form/Dataset 오브젝트 초기화
***********************************************************************

/*
 * 함수명  	: initForm
 * 설명 		: Form을 초기화한다.
 * params  		: None
 * return Type 	: None
 * 사용법		: this.initForm();
 */
this.fn_init_form = function()
{
	this.gfn_initForm(this);
	
	// 데이터셋 초기화
	this.ds_cond.clearData();					// 검색조건
	this.ds_confmInfoApplcntInfo.clearData();	// 승인정보, 신청인정보(가족정보 제외)
	this.ds_familyAllwncTrgter.clearData();		// 신청인정보(가족정보)	
	this.ds_reqstSe.clearData();				// 신청구분 
	this.ds_confmSe.clearData();				// 승인여부
	this.ds_fileCond.clearData();
	
	var nRow = this.ds_cond.addRow();
	this.ds_cond.setColumn(nRow, "EMPNO", empno);
	this.ds_cond.setColumn(nRow, "REQST_SN", reqstSn);
	
	// 신청구분 초기값 셋팅
	nRow = this.ds_reqstSe.addRow();
	this.ds_reqstSe.setColumn(nRow, "CODE"   , "1");
	this.ds_reqstSe.setColumn(nRow, "CODE_NM", "취득");
	nRow = this.ds_reqstSe.addRow();
	this.ds_reqstSe.setColumn(nRow, "CODE"   , "2");
	this.ds_reqstSe.setColumn(nRow, "CODE_NM", "상실");
	nRow = this.ds_reqstSe.addRow();
	this.ds_reqstSe.setColumn(nRow, "CODE"   , "3");
	this.ds_reqstSe.setColumn(nRow, "CODE_NM", "변경");
	
	// 승인여부 초기값 셋팅
	nRow = this.ds_confmSe.addRow();
	this.ds_confmSe.setColumn(nRow, "CODE"   , "1");
	this.ds_confmSe.setColumn(nRow, "CODE_NM", "미승인");
	nRow = this.ds_confmSe.addRow();
	this.ds_confmSe.setColumn(nRow, "CODE"   , "2");
	this.ds_confmSe.setColumn(nRow, "CODE_NM", "승인");
	nRow = this.ds_confmSe.addRow();
	this.ds_confmSe.setColumn(nRow, "CODE"   , "3");
	this.ds_confmSe.setColumn(nRow, "CODE_NM", "반려");
		
	if(confmAt != "1") {
		for(var i=0; i<this.div_familyAllwncReqstInfo2.grd_familyAllwncTrgter.getCellCount("Body"); i++) {
			this.div_familyAllwncReqstInfo2.grd_familyAllwncTrgter.setCellProperty("Body", i, "edittype", "none");
		}
	}
			
	var fileConfig = {
      useMultiUpload : true,
      onChange: this.fn_onFileSelected,   // 파일 선택 이벤트 핸들러
      onSuccess : this.fn_onFileSuccess   // 전송 성공 이벤트 핸들러
    };
	this.File_UpDownManager = new this.fileUpDownManager(this, "MIS", "SAL");
    this.File_UpDownManager.init(fileConfig);
}


/*
 * 함수명  	: initDataset
 * 설명 		: Dataset을 초기화한다
 * params  		: None
 * return Type 	: None
 * 사용법		: this.initDataset();
 */
this.fn_init_dataset = function()
{

}


/***********************************************************************
 * 설명: 공통조회
 **********************************************************************/
this.fn_loadCombo = function()
{

	var comboParams = [
	                    ["ds_familyRelateSe", "HRM006", "1", ""]    // 가족관계
	                   ,["ds_sexdstnSe"     , "COM005", "1", ""]   	// 성별
			           ,["ds_acdmcrSe"      , "HRM008", "1", ""]    // 학력사항
			           ,["ds_clsfSe"        , "HRM002", "1", ""]	// 직급
		              ];

	this.gfn_comboLoad(comboParams, this.fn_callbackAfter);
	
}

/**********************************************************************
* Transaction 영역 시작
***********************************************************************
*
* 1. Transaction 관련 이벤트 핸들러
* 2. call Transaction 영역
* 3. callback 영역(Transaction, Popup)
* 
***********************************************************************




/**********************************************************************
* Transaction 관련 이벤트 핸들러 
***********************************************************************

/*
 * 함수명  	: fn_search
 * 설명 		: 조회 이벤트 처리
 * params  		: None
 * return Type 	: None
 * 사용법		: this.fn_search();
 */
this.fn_search = function()
{	
	// 행추가, 행삭제, 저장, 파일 삭제, 파일 업로드 버튼 보이기
	this.div_familyAllwncReqstInfo2.btn_familyAdd.set_visible(true);
	this.div_familyAllwncReqstInfo2.btn_familyDelete.set_visible(true);
	this.btn_popup_save.set_visible(true)
	this.div_familyAllwncReqstInfo2.btn_delFiles.set_visible(true);
	this.div_familyAllwncReqstInfo2.btn_uploadFiles.set_visible(true);
	
	// 생성
	if(popupSttus == "C") {
	 
		// 승인정보를	숨기고 그 외 정보 위치를 위로 옮김
		this.div_familyAllwncReqstInfo2.setOffsetTop("46");

		// 신청일자를 현재날짜로 셋팅
		this.div_familyAllwncReqstInfo2.cal_reqstDe.set_value(this.dateUtils.format(this.gfn_today(),"yyyymmdd"));
		//this.div_familyAllwncReqstInfo1.cmb_salaryConfmAt.set_value
		//this.div_familyAllwncReqstInfo1.cal_.set_value
	}
	
	// 조회 및 수정
	if(popupSttus == "R") {
		
		// 승인정보 보이기
		this.div_familyAllwncReqstInfo1.set_visible(true);
		
		// 신청일자 셋팅 및 readOnly
		this.div_familyAllwncReqstInfo2.cal_reqstDe.set_readonly(true);
		this.div_familyAllwncReqstInfo2.cal_reqstDe.set_cssclass("cal_WF_Readonly");
		
		// 승인여부가 승인, 반려일 때
		if(confmAt != 1) {
			// 행추가, 삭제, 저장, 파일 삭제, 파일 업로드 버튼 숨기기
			this.div_familyAllwncReqstInfo2.btn_familyAdd.set_visible(false);
			this.div_familyAllwncReqstInfo2.btn_familyDelete.set_visible(false);
			this.btn_popup_save.set_visible(false);
			this.div_familyAllwncReqstInfo2.btn_delFiles.set_visible(false);
			this.div_familyAllwncReqstInfo2.btn_uploadFiles.set_visible(false);
		}
	}
	
	// 승인관리
	if(popupSttus == "M") {
	
		// 승인정보 보이기
		this.div_familyAllwncReqstInfo1.set_visible(true);
		
		// 신청일자 셋팅 및 readOnly
		this.div_familyAllwncReqstInfo2.cal_reqstDe.set_readonly(true);
		this.div_familyAllwncReqstInfo2.cal_reqstDe.set_cssclass("cal_WF_Readonly");
		
		// 행추가, 삭제버튼 숨기기
		this.div_familyAllwncReqstInfo2.btn_familyAdd.set_visible(false);
		this.div_familyAllwncReqstInfo2.btn_familyDelete.set_visible(false);
		
		// 이미 승인인 경우를 제외하고,
		if(confmAt != "2") {
			// 승인정보 활성화
			this.div_familyAllwncReqstInfo1.cmb_salaryConfmAt.set_enable(true);
			this.div_familyAllwncReqstInfo1.cal_salaryConfmDe.set_enable(false);	
			this.div_familyAllwncReqstInfo1.edt_returnCn.set_enable(false);	

		}else {
			this.btn_popup_save.set_visible(false);
			this.div_familyAllwncReqstInfo2.btn_delFiles.set_visible(true);
			this.div_familyAllwncReqstInfo2.btn_uploadFiles.set_visible(false);
		}
	}	
	// 가족수당신청정보(승인정보, 신청인정보) 조회
	this.fn_transaction("selectFamilyAllwncReqstInfo_P");	

	
	// 가족수당대상자 조회
	this.fn_transaction("selectFamilyAllwncTrgterList");
}


/**********************************************************************
* call Transaction 영역
***********************************************************************

/*
 * 함수명  	: fn_transaction
 * 설명 		: Transaction 요청 처리 함수
 * params  		: strSvcId : 서비스요청 ID
 * return Type 	: None
 * 사용법		: this.fn_transaction("SELECT");
 */
this.fn_transaction = function(strSvcId)
{
	switch (strSvcId) {
		// 승인정보, 신청인정보 셋팅
		case "selectFamilyAllwncReqstInfo_P":
			var sController   	= "/hsco/mis/sal/SAL020103/selectFamilyAllwncReqstInfo_P.do";
			var sInDatasets   	= "input1=ds_cond";
			var sOutDatasets  	= "ds_confmInfoApplcntInfo=output1 ds_applcntFamilyInfo=output2";
			break;
		// 가족수당대상자 조회
		case "selectFamilyAllwncTrgterList":
			var sController   	= "/hsco/mis/sal/SAL020103/selectFamilyAllwncTrgterList.do";
			var sInDatasets   	= "input1=ds_cond";
			var sOutDatasets  	= "ds_familyAllwncTrgter=output1";
			break;
		// 가족수당신청정보 생성
		case "saveFamilyAllwncReqstInfo":
			var sController   	= "/hsco/mis/sal/SAL020103/familyAllwncReqstInfoC.do";
			var sInDatasets   	= "input1=ds_confmInfoApplcntInfo input2=ds_familyAllwncTrgter:U";
			var sOutDatasets  	= "";
			break;
		// 가족수당신청정보 수정
		case "modifyFamilyAllwncReqstInfo":
			var sController   	= "/hsco/mis/sal/SAL020103/familyAllwncReqstInfoU.do";
			var sInDatasets   	= "input1=ds_confmInfoApplcntInfo input2=ds_familyAllwncTrgter:A";
			var sOutDatasets  	= "";
			break;
		// ======== 첨부파일 관련 transaction ========
		// 첨부파일 조회
		case "selectAtchFile":
			this.ds_fileCond.addRow();
			this.ds_fileCond.setColumn(0, "FILE_SN", this.ds_confmInfoApplcntInfo.getColumn(0, "FILE_SN"));
			var sController  = "/hsco/cmm/file/selectAtchmnFileList.do";
			var sInDatasets  = "input1=ds_fileCond";
			var sOutDatasets = "ds_fileList=output1";
		    break;
		// 첨부파일 삭제
		case "deleteAtchFile":
			var sController     = "hsco/cmm/file/deleteFile.do";
			var sInDatasets     = "input1=ds_fileList:U";
			var sOutDatasets    = "ds_fileList=output1";
	}
	 Ex.core.tran(this, strSvcId, sController, sInDatasets, sOutDatasets); 
}

/**********************************************************************
* Transaction Callback 영역
***********************************************************************

 /*
 * 함수명  	: fn_callBack
 * 설명 		: Transaction Callback 처리
 * params  		: strSvcId    : 서비스요청 ID
 *                nErrorCode  : 오류 메시지 코드 ([예] 0 : Success, 그밖의 경우, error)
 *                strErrorMsg : 오류 메시지([예]  success.insert|정상적으로 등록되었습니다.)
 * return Type 	: None
 * 사용법		: 
 */
this.fn_callBack = function (strSvcId, nErrorCode, strErrorMsg)
{
	if(nErrorCode != '0') {
		this.gfn_callback_message(strSvcId, nErrorCode, strErrorMsg);
	}
	
	if (nErrorCode == '0'){
		switch (strSvcId) {
			case "selectFamilyAllwncReqstInfo_P":
				this.fn_transaction("selectAtchFile");
				if(popupSttus == "C") {
					// 신청일자를 현재날짜로 셋팅
					this.ds_confmInfoApplcntInfo.setColumn(0, "REQST_DE", this.dateUtils.format(this.gfn_today(),"yyyymmdd"));
				}
			break;
			case "selectFamilyAllwncTrgterList":
			break;
			case "saveFamilyAllwncReqstInfo":
				alert("정상적으로 저장되었습니다.");
				this.btn_popup_close_onclick();
			break;
			case "modifyFamilyAllwncReqstInfo":
				alert("정상적으로 저장되었습니다.");
				this.btn_popup_close_onclick();
			break;
		}
	}
}

/**********************************************************************
* Transaction 영역 끝
***********************************************************************



/**********************************************************************
* non-Transaction 관련 컴포넌트 이벤트 처리 함수
***********************************************************************
*
* 1. Dataset 관련 이벤트 처리
* 2. Button 관련 이벤트 처리
* 3. Grid 관련 이벤트 처리
* 4. 공통함수 처리
* 5. Object 관련 이벤트 처리
* 
***********************************************************************



/**********************************************************************
* Dataset 관련 이벤트 처리
***********************************************************************


/**********************************************************************
* Button 관련 이벤트 처리
***********************************************************************

/*
 * 함수명  	: btn_familyAdd_onclick
 * 설명 		: 가족수당대상자 취득 이벤트 처리
 * params  		: None
 * return Type 	: None
 * 사용법		: this.btn_familyAdd_onclick();
 */
 
 
this.btn_familyAdd_onclick = function(obj:Button,  e:nexacro.ClickEventInfo)
{
	var nRow = this.ds_familyAllwncTrgter.addRow();
	
	// 취득 행 신청구분 셋팅
	this.ds_familyAllwncTrgter.setColumn(nRow, "REQST_SE", 1);
	this.ds_familyAllwncTrgter.setColumn(nRow, "EMPNO"   , empno);
	this.ds_familyAllwncTrgter.setColumn(nRow, "REQST_SN", reqstSn);
	this.ds_familyAllwncTrgter.setColumn(nRow, "ADD_SE"  , 2);
	this.ds_familyAllwncTrgter.setColumn(nRow, "NEW_AT"  , 1);
	this.ds_reqstSe.filter("CODE == '"+1+"'");
}


/*
 * 함수명  	: btn_familyDelete_onclick
 * 설명 		: 가족수당대상자 행삭제 이벤트 처리
 * params  		: None
 * return Type 	: None
 * 사용법		: this.btn_familyDelete_onclick();
 */
this.btn_familyDelete_onclick = function(obj:Button,  e:nexacro.ClickEventInfo)
{
	if (this.gfn_message("confirm.삭제여부")) {  
		var nRow = this.ds_familyAllwncTrgter.rowposition;
		// 상실 행 신청구분 셋팅
		this.ds_familyAllwncTrgter.deleteRow(nRow);	
	}
}


/*
 * 함수명  	: btn_popup_save_onclick
 * 설명 		: 가족수당신청 팝업 저장 이벤트 처리
 * params  		: None
 * return Type 	: None
 * 사용법		: this.btn_popup_save_onclick();
 */
this.btn_popup_save_onclick = function(obj:Button,  e:nexacro.ClickEventInfo)
{

	if(!this.gfn_checkValidation_NoUpdChk(this.ds_confmInfoApplcntInfo, this.ds_validation)) {
		return;
	}
	
	
	if(!this.gfn_checkValidation_NoUpdChk(this.ds_familyAllwncTrgter, this.ds_validation)) {
		return;
	}
	
	if(this.gfn_message("confirm.저장.여부")) {
		if(popupSttus == "C") {
			this.fn_transaction("saveFamilyAllwncReqstInfo");
		}else{ 
			var result = true;
			
			if(popupSttus == "M" && this.ds_confmInfoApplcntInfo.getColumn(0, "SALARY_CONFM_AT") == "2") {
				result = application.confirm("해당 신청정보를 승인하시면 인사정보에 반영됩니다.\n그래도 진행하시겠습니까?");
			}
			
			if(result) {
				this.fn_transaction("modifyFamilyAllwncReqstInfo");
			}
		}
	}
	
}


/*
 * 함수명  	: btn_popup_close_onclick
 * 설명 		: 가족수당신청 팝업 닫기 이벤트 처리
 * params  		: None
 * return Type 	: None
 * 사용법		: this.btn_popup_close_onclick();
 */
this.btn_popup_close_onclick = function(obj:Button,  e:nexacro.ClickEventInfo)
{
	this.close();
}


 /*
 * 함수명  	: btn_popup_close_onclick
 * 설명 		: 첨부파일 업로드 버튼클릭 시
 * params  		: None
 * return Type 	: None
 * 사용법		: this.btn_popup_close_onclick();
 */
this.btn_uploadFiles_onclick = function(obj:Button,  e:nexacro.ClickEventInfo)
{
	// 첨부파일 업로드(fileSn 자동채번 / 첨부파일 Master에 ROW추가 / 파일 업로드 및 자동저장 / 테이블에 fileSn반영 / 데이터셋에 fileSn반영, 단 신규 ROW가 아닐경우 ROWTYPE은 유지)
	this.fn_autoFileSn(
		 "MIS"									// 대분류   (SYS_SE)
		,"SAL"									// 업무구분 (JOB_SE)
		, this.File_UpDownManager	            // fileManager 오브젝트
		, this.ds_fileList		                	// fileObject
		, this.ds_confmInfoApplcntInfo	    	// fileSn을 불러오거나 반영해야 하는 컬럼
		, "TBSAL_FAMILY_ALLWNC_REQST"			// fileSn을 저장할 테이블
		, "FILE_SN"								// fileSn 컬럼명이 다를 경우를 대비
		, ["REQST_SN"]							// fileSn을 저장할 테이블의 PK (FileSn 확인 및 자동반영목적)
	);
}



/*
 * 함수명  	: btn_delFiles_onclick
 * 설명 		: 선택한 첨부파일 삭제
 * params  		: None
 * return Type 	: None
 * 사용법		: this.btn_delFiles_onclick();
 */
this.btn_delFiles_onclick = function(obj:Button,  e:nexacro.ClickEventInfo)
{


	var findRow = this.ds_fileList.findRow("CHK", "1");
	if(findRow < 0) {
		this.gfn_message("comm.데이터.선택.없음");
			return;
	}
	
	if(!this.gfn_message("confirm.선택파일.삭제여부", "들")){
		return false;
	}
	
	for(var fRow = this.ds_fileList.getRowCount()-1; fRow >= 0; fRow--) {
		var chkVal = this.ds_fileList.getColumn(fRow, "CHK");
		if(chkVal == '1') {
			this.ds_fileList.deleteRow(fRow);
		}
	}
	
	this.fn_transaction("deleteAtchFile");
}


/*
 * 함수명  	: btn_downFiles_onclick
 * 설명 		: 선택한 첨부파일 다운로드
 * params  		: None
 * return Type 	: None
 * 사용법		: this.btn_downFiles_onclick();
 */
this.btn_downFiles_onclick = function(obj:Button,  e:nexacro.ClickEventInfo)
{
	var findRow = this.ds_fileList.findRow("CHK", "1");
	
	if(findRow < 0) {
		this.gfn_message("comm.데이터.선택.없음");
		return;
	}
	
	for(var fRow = 0; fRow < this.ds_fileList.getRowCount(); fRow++) {
		var fileSn    = this.ds_fileList.getColumn(fRow, "FILE_SN");
		var fileOrder = this.ds_fileList.getColumn(fRow, "FILE_ORDR");
		var fileName  = this.ds_fileList.getColumn(fRow, "ORGINL_FILE_NM");
		var chk       = this.ds_fileList.getColumn(fRow, "CHK");
		if(chk == '1') {
			this.File_UpDownManager.download(fileSn, fileOrder, fileName);
		}
	}
}



/**********************************************************************
* Grid 관련 이벤트 처리
***********************************************************************

/*
 * 함수명  	: ds_applcntFamilyInfo_onrowposchanged
 * 설명 		: 신청인 가족정보 행을 클릭했을때 처리
 * params  		: None
 * return Type 	: None
 * 사용법		: this.ds_applcntFamilyInfo_onrowposchanged();
 */
this.grd_applcntFamilyInfo_oncellclick = function(obj:Grid, e:nexacro.GridClickEventInfo)
{
	if(popupSttus != "M" &&  confmAt == 1) {
					
		var selectRow = this.ds_applcntFamilyInfo.rowposition;
		
		var familyNm = this.ds_applcntFamilyInfo.getColumn(selectRow, "FAMILY_NM");
		var birthday = this.ds_applcntFamilyInfo.getColumn(selectRow, "BRTHDY");

		if(this.ds_familyAllwncTrgter.findRowExpr("FAMILY_NM == '"+familyNm+"'" && "BRTHDY == '"+birthday+"'") == -1) {
			var nRow = this.ds_familyAllwncTrgter.addRow();
			// 신청인정보에서 가족을 가져왔는지 행추가로 가져왔는지 구분하기 위해
			this.ds_familyAllwncTrgter.setColumn(nRow, "ADD_SE"				    , "1");																	
			this.ds_familyAllwncTrgter.setColumn(nRow, "NEW_AT"				    , "1");	
			this.ds_familyAllwncTrgter.setColumn(nRow, "REQST_SE"				, "3");																	// 구분(default : 변경)
			this.ds_familyAllwncTrgter.setColumn(nRow, "REQST_SN"				, this.ds_confmInfoApplcntInfo.getColumn(0, "REQST_SN"	)); 			// 신청순번
			this.ds_familyAllwncTrgter.setColumn(nRow, "RELATE"					, this.ds_applcntFamilyInfo.getColumn(selectRow, "FAMILY_RELATE_SE"	)); // 가족관계
			this.ds_familyAllwncTrgter.setColumn(nRow, "FAMILY_NM"				, this.ds_applcntFamilyInfo.getColumn(selectRow, "FAMILY_NM"		)); // 가족성명
			this.ds_familyAllwncTrgter.setColumn(nRow, "OLD_FAMILY_NM"			, this.ds_applcntFamilyInfo.getColumn(selectRow, "FAMILY_NM"		)); // 가족성명
			this.ds_familyAllwncTrgter.setColumn(nRow, "SEXDSTN_SE"				, this.ds_applcntFamilyInfo.getColumn(selectRow, "SEXDSTN_SE"		)); // 성별
			this.ds_familyAllwncTrgter.setColumn(nRow, "BRTHDY"					, this.ds_applcntFamilyInfo.getColumn(selectRow, "BRTHDY"			)); // 생년월일
			this.ds_familyAllwncTrgter.setColumn(nRow, "OCCP_NM"				, this.ds_applcntFamilyInfo.getColumn(selectRow, "OCCP_NM"			)); // 직업
			this.ds_familyAllwncTrgter.setColumn(nRow, "TROBL_AT"				, this.ds_applcntFamilyInfo.getColumn(selectRow, "TROBL_AT"			)); // 장애
			this.ds_familyAllwncTrgter.setColumn(nRow, "SUPORT_AT"				, this.ds_applcntFamilyInfo.getColumn(selectRow, "SUPORT_AT"		)); // 부양
			this.ds_familyAllwncTrgter.setColumn(nRow, "ALLWNC_PYMNT_AT"		, this.ds_applcntFamilyInfo.getColumn(selectRow, "ALLWNC_PYMNT_AT"	)); // 수당
			this.ds_reqstSe.filter("CODE != '"+1+"'");
		}else {
			alert("중복된 가족수당대상입니다.");
		}
	}
}

/**********************************************************************
* 공통함수 처리
***********************************************************************


/**********************************************************************
* Tab 관련 이벤트 처리
***********************************************************************

/**********************************************************************
* Popup 관련 이벤트 처리
**********************************************************************/


this.ds_confmInfoApplcntInfo_oncolumnchanged = function(obj:Dataset, e:nexacro.DSColChangeEventInfo)
{
	if(e.columnid == "SALARY_CONFM_AT") {
		if(e.newvalue == "1") {
			this.div_familyAllwncReqstInfo1.cal_salaryConfmDe.set_enable(false);	
			this.div_familyAllwncReqstInfo1.edt_returnCn.set_enable(false);	
			
			obj.setColumn(e.row, "SALARY_CONFM_DE", null);
			obj.setColumn(e.row, "RETURN_CN", null);	
		}else if(e.newvalue == "2") {
			this.div_familyAllwncReqstInfo1.cal_salaryConfmDe.set_enable(true);	
			this.div_familyAllwncReqstInfo1.edt_returnCn.set_enable(false);
			
			obj.setColumn(e.row, "SALARY_CONFM_DE", this.dateUtils.format(this.gfn_today(),"yyyymmdd"));
			obj.setColumn(e.row, "RETURN_CN", null);
		}else if(e.newvalue == "3") {
			this.div_familyAllwncReqstInfo1.cal_salaryConfmDe.set_enable(false);	
			this.div_familyAllwncReqstInfo1.edt_returnCn.set_enable(true);
			
			obj.setColumn(e.row, "SALARY_CONFM_DE", null);	
		}
	}
}


this.ds_familyAllwncTrgter_onrowposchanged = function(obj:Dataset, e:nexacro.DSRowPosChangeEventInfo)
{
	if(e.newrow > -1) {
		var nRow = obj.rowposition;
		var addSe = obj.getColumn(nRow, "ADD_SE");
		if(addSe == "1") {
			this.ds_reqstSe.filter("CODE != '"+1+"'");
		}else if(addSe == "2") {
			this.ds_reqstSe.filter("CODE == '"+1+"'");
		}else {
			this.ds_reqstSe.filter("");
		}
	}
}

]]></Script>
  </Form>
</FDL>
