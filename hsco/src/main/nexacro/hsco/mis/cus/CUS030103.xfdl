<?xml version="1.0" encoding="utf-8"?>
<FDL version="1.5">
  <TypeDefinition url="..\..\default_typedef.xml"/>
  <Form id="CUS030103" classname="CUS030103" left="0" top="0" width="1059" height="735" titletext="고객상담관리" onload="CUS030103_onload" oninit="CUS030103_oninit">
    <Layouts>
      <Layout>
        <Div id="div_search" taborder="0" left="0" top="0" height="33" style="color:transparent;" cssclass="div_WFSA_Box" right="28">
          <Layouts>
            <Layout>
              <Edit id="edt_grpNm" taborder="4" left="571" top="5" width="250" height="21" lengthunit="utf8" maxlength="400"/>
              <Static id="sta_inqryknd03" taborder="5" text="상담일자" cssclass="sta_WFSA_Label" top="5" width="64" height="21" style="align:left middle;" left="15"/>
              <Static id="sta_inqryknd04" taborder="6" text="상담내용" cssclass="sta_WFSA_Label" left="507" top="5" width="64" height="21" style="align:left middle;"/>
              <Calendar id="Calendar00" taborder="0" left="79" top="5" width="105" height="21" cssclass="cal_WF_Essential" dateformat="yyyy-MM-dd" value="null"/>
              <Calendar id="Calendar01" taborder="1" left="205" top="5" width="105" height="21" cssclass="cal_WF_Essential" dateformat="yyyy-MM-dd"/>
              <Static id="Static00" taborder="7" text="~" left="184" top="5" width="21" height="21" style="align:center middle;"/>
              <Static id="sta_inqryknd01" taborder="8" text="동/호" cssclass="sta_WFSA_Label" left="330" top="6" width="48" height="19" style="align:left middle;"/>
              <Edit id="edt_telno00" taborder="2" left="383" top="6" width="46" height="19" inputtype="digit" lengthunit="utf8" maxlength="4"/>
              <Static id="Static11" taborder="9" text="/" left="434" top="6" width="7" height="19"/>
              <Edit id="edt_telno01" taborder="3" left="446" top="6" width="46" height="19" inputtype="digit" lengthunit="utf8" maxlength="4"/>
            </Layout>
          </Layouts>
        </Div>
        <Div id="div_work" taborder="1" left="0" top="33" right="28" bottom="0" style="border:0 solid #808080ff ;">
          <Layouts>
            <Layout width="1039" height="736">
              <Static id="Static08" taborder="35" cssclass="sta_WF_Labelbg" top="110" right="1" width="351" height="27"/>
              <Grid id="grd_cstmrList" taborder="16" binddataset="ds_cstmrList" autoenter="select" useinputpanel="false" left="0" top="347" right="0" cellsizingtype="col" autosizingtype="row" extendsizetype="row" oncellclick="div_work_grd_cstmrList_oncellclick" bottom="8">
                <Formats>
                  <Format id="default">
                    <Columns>
                      <Column size="40"/>
                      <Column size="72"/>
                      <Column size="100"/>
                      <Column size="200"/>
                      <Column size="50"/>
                      <Column size="50"/>
                      <Column size="90"/>
                      <Column size="80"/>
                      <Column size="100"/>
                      <Column size="100"/>
                      <Column size="150"/>
                      <Column size="400"/>
                    </Columns>
                    <Rows>
                      <Row size="24" band="head"/>
                      <Row size="24"/>
                    </Rows>
                    <Band id="head">
                      <Cell text="순번"/>
                      <Cell col="1" text="고객정보"/>
                      <Cell col="2" text="고객구분"/>
                      <Cell col="3" text="주택명"/>
                      <Cell col="4" text="동"/>
                      <Cell col="5" text="호"/>
                      <Cell col="6" text="성명"/>
                      <Cell col="7" text="생년월일"/>
                      <Cell col="8" text="연락처1"/>
                      <Cell col="9" text="연락처2"/>
                      <Cell col="10" text="이메일"/>
                      <Cell col="11" text="주소"/>
                    </Band>
                    <Band id="body">
                      <Cell text="expr:currow+1"/>
                      <Cell col="1" displaytype="expr:VIEW_SE != '' ? 'button' : ''" text="expr:VIEW_SE != '' ? '상세' : ''"/>
                      <Cell col="2" displaytype="normal" text="bind:VIEW_SE_NM" suppressalign="middle" combodataset="ds_cstmrSe" combocodecol="CODE" combodatacol="CODE_NM" autosizerow="limitmin" autosizecol="limitmin"/>
                      <Cell col="3" style="align:left;padding:0 0 0 5;" text="bind:HOUSE_NM"/>
                      <Cell col="4" text="bind:DONG"/>
                      <Cell col="5" text="bind:HO"/>
                      <Cell col="6" edittype="none" text="bind:CSTMR_NM" autosizerow="limitmin" autosizecol="limitmin"/>
                      <Cell col="7" text="bind:CSTMR_IHIDNUM" autosizerow="limitmin" autosizecol="limitmin"/>
                      <Cell col="8" edittype="none" text="bind:TELNO" mask="expr:TELNO ? comp.parent.parent.fn_telMask(TELNO) : ''" maskchar=" " autosizerow="limitmin" autosizecol="limitmin"/>
                      <Cell col="9" edittype="none" text="bind:MBTLNO" mask="expr:MBTLNO ? comp.parent.parent.fn_telMask(MBTLNO) : ''" maskchar=" " autosizerow="limitmin" autosizecol="limitmin"/>
                      <Cell col="10" style="align:left;padding:0 0 0 3;" text="bind:EMAIL"/>
                      <Cell col="11" style="align:left;padding:0 0 0 5;" text="bind:ADRES" tooltiptext="bind:ADRES" autosizerow="limitmin" autosizecol="limitmin"/>
                    </Band>
                  </Format>
                </Formats>
              </Grid>
              <Static id="sta_AUDIT_TABLE" taborder="3" text="고객목록" onclick="Static00_onclick" cssclass="sta_WF_Title02" left="0" top="323" width="64" height="19"/>
              <Static id="Static21" taborder="13" text="10" visible="false" left="-1" top="0" width="1031" height="10" style="background:#dc143c3c;align:center middle;"/>
              <Static id="Static00" taborder="14" text="5" visible="false" left="0" top="29" width="1031" height="5" style="background:#dc143c3c;align:center middle;"/>
              <Static id="sta_AUDIT_TABLE00" taborder="17" text="상담목록" onclick="Static00_onclick" cssclass="sta_WF_Title02" left="0" top="10" width="130" height="19"/>
              <Static id="Static02" taborder="18" text="5" visible="false" left="-1" top="262" width="1031" height="10" style="background:#dc143c3c;align:center middle;"/>
              <Static id="sta_AUDIT_TABLE01" text="상담내역정보" onclick="Static00_onclick" cssclass="sta_WF_Title02" top="10" width="130" height="19" right="287" taborder="1"/>
              <Static id="Static04" taborder="19" text="5" visible="false" left="609" top="9" width="5" height="200" style="background:#dc143c3c;align:center middle;"/>
              <Static id="Static10" taborder="21" cssclass="sta_WF_Labelbg" top="32" width="351" height="27" right="1"/>
              <Static id="Static14" taborder="23" cssclass="sta_WF_Labelbg" top="136" width="351" height="126" right="1"/>
              <TextArea id="txt_cnsltCn" taborder="12" wordwrap="char" top="139" width="345" height="120" right="4" cssclass="txt_WF_Essential" lengthunit="utf8" maxlength="400"/>
              <Calendar id="cal_cnsltDe" taborder="4" dateformat="yyyy-MM-dd" top="35" width="114" height="21" right="235" cssclass="cal_WF_Essential"/>
              <Static id="Static15" taborder="25" cssclass="sta_WF_Labelbg" top="84" width="144" height="27" right="232"/>
              <Combo id="cmb_cstmrCnsltList" taborder="9" innerdataset="@ds_cus031" codecolumn="CODE" datacolumn="CODE_NM" top="87" width="113" height="21" right="236" cssclass="cmb_WF_Essential"/>
              <Button id="btn_sen" taborder="15" text="문자발송" onclick="div_Cont_btn_Attach_onclick" cssclass="btn_WF_Process" top="10" width="66" height="19" right="423"/>
              <Static id="Static36" taborder="26" text="10" visible="false" left="266" top="5" width="223" height="5" style="background:#dc143c3c;align:center middle;"/>
              <Static id="Static03" taborder="28" cssclass="sta_WF_Labelbg" top="58" width="351" height="27" right="1"/>
              <Edit id="Edit02" taborder="7" top="60" width="114" height="23" right="235" cssclass="edt_WF_Essential" lengthunit="utf8" maxlength="100"/>
              <Edit id="Edit03" taborder="8" top="60" width="160" height="23" right="5" cssclass="edt_WF_Essential" inputtype="digit" maxlength="12" lengthunit="utf8"/>
              <CheckBox id="chk_indpndCheck" taborder="2" text="자주묻는질문관리 등록" top="9" width="150" height="21" falsevalue="0" truevalue="1" right="5"/>
              <Static id="Static06" taborder="30" cssclass="sta_WF_Labelbg" top="84" right="1" width="167" height="27"/>
              <Combo id="cmb_cstmrCnsltList00" taborder="10" innerdataset="@ds_cus032" codecolumn="CODE" datacolumn="CODE_NM" cssclass="cmb_WF_Essential" top="87" right="5" width="160" height="21"/>
              <Edit id="Edit04" taborder="5" top="34" right="115" width="50" height="23" inputtype="digit" maxlength="4" lengthunit="utf8"/>
              <Static id="Static24" taborder="33" text="/" top="35" width="7" height="21" right="100"/>
              <Edit id="Edit05" taborder="6" top="34" right="44" width="50" height="23" inputtype="digit" maxlength="4" lengthunit="utf8"/>
              <Combo id="cmb_cstmrCnsltList01" taborder="11" innerdataset="@ds_cus033" codecolumn="CODE" datacolumn="CODE_NM" top="113" right="236" width="113" height="21"/>
              <Static id="sta_wrter05" taborder="34" text="소분류" cssclass="sta_WF_Label" top="110" right="351" width="66" height="27"/>
              <Static id="sta_wrter" taborder="20" text="상담일자" cssclass="sta_WF_Label" top="32" width="66" height="27" right="351"/>
              <Static id="sta_chrctrCn" taborder="22" text="상담내용" cssclass="sta_WF_Label" top="136" width="66" height="126" right="351"/>
              <Static id="sta_wrter01" taborder="27" text="상담고객" cssclass="sta_WF_Label" top="58" width="66" height="27" right="351"/>
              <Static id="sta_wrter00" taborder="24" text="대분류" cssclass="sta_WF_Label" top="84" width="66" height="27" right="351"/>
              <Static id="sta_wrter03" taborder="31" text="중분류" cssclass="sta_WF_Label" top="84" right="167" width="66" height="27"/>
              <Static id="sta_wrter04" taborder="32" text="동/호" cssclass="sta_WF_Label" top="32" right="167" width="66" height="27"/>
              <Static id="sta_wrter02" taborder="29" text="전화번호" cssclass="sta_WF_Label" top="58" width="66" height="27" right="167"/>
              <Grid id="grd_cstmrCnsltList" taborder="0" binddataset="ds_cstmrCnsltList" autoenter="select" useinputpanel="false" autofittype="col" onselectchanged="div_work_grd_hmpgCstmrCvpl_onselectchanged" left="0" top="34" height="228" right="424">
                <Formats>
                  <Format id="default">
                    <Columns>
                      <Column size="40"/>
                      <Column size="90"/>
                      <Column size="70"/>
                      <Column size="80"/>
                      <Column size="40"/>
                      <Column size="40"/>
                      <Column size="402"/>
                    </Columns>
                    <Rows>
                      <Row size="24" band="head"/>
                      <Row size="24"/>
                    </Rows>
                    <Band id="head">
                      <Cell text="순번"/>
                      <Cell col="1" text="상담일자"/>
                      <Cell col="2" text="상담고객"/>
                      <Cell col="3" text="전화번호"/>
                      <Cell col="4" text="동"/>
                      <Cell col="5" text="호"/>
                      <Cell col="6" text="상담내용"/>
                    </Band>
                    <Band id="body">
                      <Cell text="expr:currow+1" mask="expr:currow==2?@@@@-@@:''"/>
                      <Cell col="1" displaytype="date" edittype="none" text="bind:CNSLT_DE" calendardisplaynulltype="none"/>
                      <Cell col="2" text="bind:CSTMR_NM"/>
                      <Cell col="3" text="bind:CSTMR_TELNO" mask="expr:CSTMR_TELNO ? comp.parent.parent.fn_telMask(CSTMR_TELNO) : ''"/>
                      <Cell col="4" text="bind:DONG"/>
                      <Cell col="5" text="bind:HO"/>
                      <Cell col="6" edittype="none" style="align:left;padding:0 0 0 5;" text="bind:CNSLT_CN" tooltiptext="bind:CNSLT_CN"/>
                    </Band>
                  </Format>
                </Formats>
              </Grid>
              <Static id="Static09" taborder="36" text="5" visible="false" left="-1" top="342" width="1031" height="5" style="background:#dc143c3c;align:center middle;"/>
              <Div id="div_search2" taborder="37" left="0" top="285" height="33" style="color:transparent;" cssclass="div_WFSA_Box" right="0">
                <Layouts>
                  <Layout>
                    <Static id="sta_inqryknd01" taborder="9" text="동/호" cssclass="sta_WFSA_Label" left="513" top="6" width="48" height="19" style="align:left middle;"/>
                    <Edit id="edt_telno00" taborder="4" inputtype="digit" lengthunit="utf8" maxlength="4" onkeyup="div_work_edt_cstmrNm_onkeyup" left="566" top="6" width="46" height="20"/>
                    <Static id="Static11" taborder="10" text="/" left="621" top="6" width="7" height="19"/>
                    <Edit id="edt_telno01" taborder="5" inputtype="digit" lengthunit="utf8" maxlength="4" onkeyup="div_work_edt_cstmrNm_onkeyup" left="633" top="6" width="46" height="20"/>
                    <Static id="sta_inqryknd00" taborder="0" text="성명" cssclass="sta_WFSA_Label" left="7" top="6" width="38" height="19" style="align:left middle;"/>
                    <Edit id="edt_cstmrNm" taborder="1" lengthunit="utf8" maxlength="50" onkeyup="div_work_edt_cstmrNm_onkeyup" left="50" top="6" width="86" height="20" imemode="hangul"/>
                    <Static id="sta_inqryknd02" taborder="11" text="주택명" cssclass="sta_WFSA_Label" left="341" top="6" width="64" height="19" style="align:left middle;"/>
                    <Edit id="edt_housenm" taborder="3" lengthunit="utf8" left="402" top="6" width="100" height="20" maxlength="100" onkeyup="div_work_edt_cstmrNm_onkeyup"/>
                    <Button id="btn_detailPop" taborder="12" text="전체조회" cssclass="btn_WF_Process" left="958" top="6" width="64" height="19" onclick="div_work_div_search2_btn_detailPop_onclick" visible="false"/>
                    <Combo id="cmb_detailPop" taborder="13" text="선택" top="6" height="20" codecolumn="codecolumn" datacolumn="datacolumn" width="150" left="805" visible="false">
                      <Dataset id="innerdataset">
                        <ColumnInfo>
                          <Column id="codecolumn" size="256"/>
                          <Column id="datacolumn" size="256"/>
                        </ColumnInfo>
                        <Rows>
                          <Row>
                            <Col id="codecolumn">1</Col>
                            <Col id="datacolumn">계약정보조회(영구)</Col>
                          </Row>
                          <Row>
                            <Col id="codecolumn">2</Col>
                            <Col id="datacolumn">입주대기자관리(영구)</Col>
                          </Row>
                          <Row>
                            <Col id="codecolumn">3</Col>
                            <Col id="datacolumn">계약정보조회(매입)</Col>
                          </Row>
                          <Row>
                            <Col id="codecolumn">4</Col>
                            <Col id="datacolumn">입주대기자관리(매입)</Col>
                          </Row>
                          <Row>
                            <Col id="codecolumn">5</Col>
                            <Col id="datacolumn">계약정보조회(전세)</Col>
                          </Row>
                          <Row>
                            <Col id="codecolumn">6</Col>
                            <Col id="datacolumn">신청자정보조회(전세)</Col>
                          </Row>
                          <Row>
                            <Col id="codecolumn">7</Col>
                            <Col id="datacolumn">계약정보조회(전세)</Col>
                          </Row>
                          <Row>
                            <Col id="codecolumn">8</Col>
                            <Col id="datacolumn">입주대기자관리(주택)</Col>
                          </Row>
                          <Row>
                            <Col id="codecolumn">9</Col>
                            <Col id="datacolumn">계약정보조회(토지)</Col>
                          </Row>
                        </Rows>
                      </Dataset>
                    </Combo>
                    <Button id="Button01" taborder="7" text="조회" onclick="fn_search_sub" cssclass="btn_WF_Process" left="872" top="6" width="40" height="19"/>
                    <Combo id="cmb_cus067" taborder="2" top="6" height="20" width="120" left="209" innerdataset="@ds_cus067" codecolumn="CODE" datacolumn="CODE_NM"/>
                    <Static id="sta_inqryknd03" taborder="14" text="고객구분" cssclass="sta_WFSA_Label" left="145" top="6" width="60" height="19" style="align:left middle;"/>
                    <Static id="sta_inqryknd" taborder="8" text="전화번호" cssclass="sta_WFSA_Label" left="697" top="6" width="64" height="19" style="align:left middle;"/>
                    <Edit id="edt_telno" taborder="6" inputtype="digit" lengthunit="utf8" maxlength="12" left="766" top="6" width="100" height="20" onkeyup="div_work_edt_cstmrNm_onkeyup"/>
                    <Button id="btn_reset" taborder="15" text="초기화" cssclass="btn_WF_Process" left="917" top="6" width="54" height="19" onclick="div_work_div_search2_btn_reset_onclick"/>
                  </Layout>
                </Layouts>
              </Div>
              <Static id="Static01" taborder="38" text="5" visible="false" left="-1" top="318" width="1031" height="5" style="background:#dc143c3c;align:center middle;"/>
              <Button id="btn_moveConsult" taborder="39" cssclass="btn_WF_ShuttleU" top="323" width="55" height="21" onclick="div_work_btn_moveConsult_onclick" left="403"/>
            </Layout>
          </Layouts>
        </Div>
      </Layout>
    </Layouts>
    <Bind>
      <BindItem id="item0" compid="div_work.txt_cnsltCn" propid="value" datasetid="ds_cstmrCnsltList" columnid="CNSLT_CN"/>
      <BindItem id="item15" compid="div_work.cal_cnsltDe" propid="value" datasetid="ds_cstmrCnsltList" columnid="CNSLT_DE"/>
      <BindItem id="item24" compid="div_work.cmb_cstmrCnsltList" propid="value" datasetid="ds_cstmrCnsltList" columnid="CNSLT_SE1"/>
      <BindItem id="item17" compid="div_search.edt_grpNm" propid="value" datasetid="ds_cond" columnid="CNSLT_CN"/>
      <BindItem id="item25" compid="div_work.Edit02" propid="value" datasetid="ds_cstmrCnsltList" columnid="CSTMR_NM"/>
      <BindItem id="item26" compid="div_work.Edit03" propid="value" datasetid="ds_cstmrCnsltList" columnid="CSTMR_TELNO"/>
      <BindItem id="item18" compid="div_search.Calendar00" propid="value" datasetid="ds_cond" columnid="CNSLT_BGN_DE"/>
      <BindItem id="item19" compid="div_search.Calendar01" propid="value" datasetid="ds_cond" columnid="CNSLT_END_DE"/>
      <BindItem id="item20" compid="div_work.chk_indpndCheck" propid="value" datasetid="ds_cstmrCnsltList" columnid="INDPND_CHK"/>
      <BindItem id="item53" compid="div_work.cmb_cstmrCnsltList00" propid="value" datasetid="ds_cstmrCnsltList" columnid="CNSLT_SE2"/>
      <BindItem id="item146" compid="div_work.Edit04" propid="value" datasetid="ds_cstmrCnsltList" columnid="DONG"/>
      <BindItem id="item155" compid="div_work.Edit05" propid="value" datasetid="ds_cstmrCnsltList" columnid="HO"/>
      <BindItem id="item162" compid="div_work.cmb_cstmrCnsltList01" propid="value" datasetid="ds_cstmrCnsltList" columnid="CNSLT_SE3"/>
      <BindItem id="item10" compid="div_search.edt_telno00" propid="value" datasetid="ds_cond" columnid="DONG"/>
      <BindItem id="item16" compid="div_search.edt_telno01" propid="value" datasetid="ds_cond" columnid="HO"/>
      <BindItem id="item169" compid="div_work.div_search2.edt_cstmrNm" propid="value" datasetid="ds_cond4" columnid="CSTMR_NM"/>
      <BindItem id="item170" compid="div_work.div_search2.edt_telno" propid="value" datasetid="ds_cond4" columnid="TELNO"/>
      <BindItem id="item171" compid="div_work.div_search2.edt_telno00" propid="value" datasetid="ds_cond4" columnid="DONG"/>
      <BindItem id="item172" compid="div_work.div_search2.edt_telno01" propid="value" datasetid="ds_cond4" columnid="HO"/>
      <BindItem id="item1" compid="div_work.div_search2.edt_housenm" propid="value" datasetid="ds_cond4" columnid="HOUSE_NM"/>
      <BindItem id="item2" compid="div_work.div_search2.cmb_cus067" propid="value" datasetid="ds_cond4" columnid="VIEW_SE"/>
    </Bind>
    <Objects>
      <Dataset id="ds_cond" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="CNSLT_BGN_DE" type="STRING" size="256"/>
          <Column id="CNSLT_END_DE" type="STRING" size="256"/>
          <Column id="CNSLT_CN" type="STRING" size="256"/>
          <Column id="DONG" type="STRING" size="256"/>
          <Column id="HO" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_cond2" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="NM" type="STRING" size="256"/>
          <Column id="MBTLNO" type="STRING" size="256"/>
          <Column id="TELNO" type="STRING" size="256"/>
          <Column id="CSTMR_NO" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_cstmrList" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="CHK" type="STRING" size="256"/>
          <Column id="CSTMR_SE" type="STRING" size="256"/>
          <Column id="PRMANENT_CSTMR_NO" type="STRING" size="256"/>
          <Column id="WAIT_AT" type="STRING" size="256"/>
          <Column id="CNTRCT_AT" type="STRING" size="256"/>
          <Column id="NM" type="STRING" size="256"/>
          <Column id="IHIDNUM" type="STRING" size="256"/>
          <Column id="EMAIL" type="STRING" size="256"/>
          <Column id="TELNO" type="STRING" size="256"/>
          <Column id="MBTLNO" type="STRING" size="256"/>
          <Column id="ZIP" type="STRING" size="256"/>
          <Column id="ADRES" type="STRING" size="256"/>
          <Column id="CNTRCTR_NO" type="STRING" size="256"/>
          <Column id="HOUSE_CODE" type="STRING" size="256"/>
          <Column id="HOUSE_NM" type="STRING" size="256"/>
          <Column id="DONG" type="STRING" size="256"/>
          <Column id="HO" type="STRING" size="256"/>
          <Column id="RCEPT_DE" type="STRING" size="256"/>
          <Column id="RCEPT_SN" type="STRING" size="256"/>
          <Column id="CSTMR_BRTHDY" type="STRING" size="256"/>
          <Column id="RCEPTER_SE" type="STRING" size="256"/>
          <Column id="CSTMR_IHIDNUM" type="STRING" size="256"/>
          <Column id="CSTMR_NM" type="STRING" size="256"/>
          <Column id="VIEW_SE" type="STRING" size="256"/>
          <Column id="VIEW_SE_NM" type="STRING" size="256"/>
          <Column id="WAIT_RECEP_DE" type="STRING" size="256"/>
          <Column id="WAITR_SN" type="STRING" size="256"/>
          <Column id="JOB_SE" type="STRING" size="256"/>
          <Column id="PROTECT_YN" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_cstmrCnsltList" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false" oncolumnchanged="ds_cstmrCnsltList_oncolumnchanged" onrowposchanged="ds_cstmrCnsltList_onrowposchanged">
        <ColumnInfo>
          <Column id="SN" type="BIGDECIMAL" size="11"/>
          <Column id="CNSLT_SE" type="STRING" size="5"/>
          <Column id="CSTMR_NM" type="STRING" size="100"/>
          <Column id="CSTMR_TELNO" type="STRING" size="30"/>
          <Column id="CSTMR_BRTHDY" type="STRING" size="8"/>
          <Column id="DONG" type="STRING" size="4"/>
          <Column id="HO" type="STRING" size="4"/>
          <Column id="CNSLT_DE" type="STRING" size="8"/>
          <Column id="CNSLT_CN" type="STRING" size="400"/>
          <Column id="CNSLT_MAN" type="STRING" size="30"/>
          <Column id="INDPND_REGIST_AT" type="STRING" size="2"/>
          <Column id="JOB_SE" type="STRING" size="3"/>
          <Column id="CSTMR_NO" type="BIGDECIMAL" size="11"/>
          <Column id="RCEPTER_SE" type="STRING" size="3"/>
          <Column id="CNTRCTR_NO" type="STRING" size="11"/>
          <Column id="WAITR_HOUSE_CODE" type="STRING" size="4"/>
          <Column id="WAITR_RECEP_DE" type="STRING" size="8"/>
          <Column id="WAITR_SN" type="BIGDECIMAL" size="11"/>
          <Column id="MSSAGE_ID" type="STRING" size="10"/>
          <Column id="REGISTER_ID" type="STRING" size="12"/>
          <Column id="REGIST_DT" type="STRING" size="255"/>
          <Column id="UPDUSR_ID" type="STRING" size="12"/>
          <Column id="UPDT_DT" type="STRING" size="255"/>
          <Column id="CNSLT_SE1" type="STRING" size="256"/>
          <Column id="CNSLT_SE2" type="STRING" size="256"/>
          <Column id="CNSLT_SE3" type="STRING" size="256"/>
          <Column id="INDPND_CHK" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_cstmrGrad" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="CODE" type="STRING" size="256"/>
          <Column id="CODE_NM" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_cstmrSe" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="CODE" type="STRING" size="256"/>
          <Column id="CODE_NM" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_chrctrCnInfo" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="CHRCTR_CN" type="STRING" size="256"/>
          <Column id="SEND_TEL_NO" type="STRING" size="256"/>
          <Column id="CHRCTR_SE" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_validation" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="compId" type="STRING" size="256"/>
          <Column id="colId" type="STRING" size="256"/>
          <Column id="PK" type="STRING" size="256"/>
          <Column id="notNull" type="STRING" size="256"/>
          <Column id="type" type="STRING" size="256"/>
          <Column id="nlength" type="STRING" size="256"/>
          <Column id="from" type="STRING" size="256"/>
          <Column id="to" type="STRING" size="256"/>
          <Column id="lengthChkGb" type="STRING" size="256"/>
          <Column id="msgId" type="STRING" size="256"/>
          <Column id="expr" type="STRING" size="256"/>
          <Column id="func" type="STRING" size="256"/>
        </ColumnInfo>
        <Rows>
          <Row>
            <Col id="compId">ds_cstmrCnsltList</Col>
            <Col id="colId">CNSLT_DE</Col>
            <Col id="PK"/>
            <Col id="notNull">Y</Col>
            <Col id="type">[Undefined]</Col>
            <Col id="nlength">[Undefined]</Col>
            <Col id="from">[Undefined]</Col>
            <Col id="to">[Undefined]</Col>
            <Col id="lengthChkGb">[Undefined]</Col>
            <Col id="msgId">상담일자</Col>
            <Col id="expr">[Undefined]</Col>
            <Col id="func">[Undefined]</Col>
          </Row>
          <Row>
            <Col id="compId">ds_cstmrCnsltList</Col>
            <Col id="colId">CNSLT_SE1</Col>
            <Col id="PK"/>
            <Col id="notNull">Y</Col>
            <Col id="type">[Undefined]</Col>
            <Col id="nlength">[Undefined]</Col>
            <Col id="from">[Undefined]</Col>
            <Col id="to">[Undefined]</Col>
            <Col id="lengthChkGb">[Undefined]</Col>
            <Col id="msgId">대분류</Col>
            <Col id="expr">[Undefined]</Col>
            <Col id="func">[Undefined]</Col>
          </Row>
          <Row>
            <Col id="colId">CNSLT_SE2</Col>
            <Col id="compId">ds_cstmrCnsltList</Col>
            <Col id="msgId">중분류</Col>
            <Col id="notNull">Y</Col>
            <Col id="PK"/>
          </Row>
          <Row>
            <Col id="colId">CSTMR_NM</Col>
            <Col id="compId">ds_cstmrCnsltList</Col>
            <Col id="msgId">상담고객</Col>
            <Col id="notNull">Y</Col>
            <Col id="PK"/>
          </Row>
          <Row>
            <Col id="colId">CSTMR_TELNO</Col>
            <Col id="compId">ds_cstmrCnsltList</Col>
            <Col id="notNull">Y</Col>
            <Col id="msgId">전화번호</Col>
          </Row>
          <Row>
            <Col id="compId">ds_cstmrCnsltList</Col>
            <Col id="colId">CNSLT_CN</Col>
            <Col id="PK"/>
            <Col id="notNull">Y</Col>
            <Col id="type">[Undefined]</Col>
            <Col id="nlength">[Undefined]</Col>
            <Col id="from">[Undefined]</Col>
            <Col id="to">[Undefined]</Col>
            <Col id="lengthChkGb">[Undefined]</Col>
            <Col id="msgId">상담내용</Col>
            <Col id="expr">[Undefined]</Col>
          </Row>
          <Row>
            <Col id="compId">ds_chrctrCnInfo</Col>
            <Col id="notNull">Y</Col>
            <Col id="msgId">문자내용</Col>
            <Col id="colId">CHRCTR_CN</Col>
          </Row>
          <Row>
            <Col id="compId">ds_chrctrCnInfo</Col>
            <Col id="notNull">Y</Col>
            <Col id="msgId">발신번호</Col>
            <Col id="colId">SEND_TEL_NO</Col>
          </Row>
          <Row>
            <Col id="compId">div_search</Col>
            <Col id="colId">Calendar00</Col>
            <Col id="from">Calendar00</Col>
            <Col id="to">Calendar01</Col>
            <Col id="msgId">상담시작일</Col>
            <Col id="notNull">Y</Col>
          </Row>
          <Row>
            <Col id="compId">div_search</Col>
            <Col id="colId">Calendar01</Col>
            <Col id="from">Calendar00</Col>
            <Col id="to">Calendar01</Col>
            <Col id="msgId">상담종료일</Col>
            <Col id="notNull">Y</Col>
          </Row>
        </Rows>
      </Dataset>
      <Dataset id="ds_cus030" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false"/>
      <Dataset id="ds_smsClient1" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="RECIPIENT_NUM" type="STRING" size="256"/>
          <Column id="CHANGE_WORD5" type="STRING" size="256"/>
        </ColumnInfo>
        <Rows>
          <Row>
            <Col id="RECIPIENT_NUM">010</Col>
            <Col id="CHANGE_WORD5">이동석</Col>
          </Row>
          <Row>
            <Col id="RECIPIENT_NUM">019</Col>
            <Col id="CHANGE_WORD5">정윤원</Col>
          </Row>
        </Rows>
      </Dataset>
      <Dataset id="ds_cus031" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="CODE" type="STRING" size="256"/>
          <Column id="CODE_NM" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_cus032" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="CODE" type="STRING" size="256"/>
          <Column id="CODE_NM" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_cus033" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="CODE" type="STRING" size="256"/>
          <Column id="CODE_NM" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_cond4" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="TELNO" type="STRING" size="256"/>
          <Column id="CSTMR_NM" type="STRING" size="256"/>
          <Column id="DONG" type="STRING" size="256"/>
          <Column id="HO" type="STRING" size="256"/>
          <Column id="HOUSE_NM" type="STRING" size="256"/>
          <Column id="VIEW_SE" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_cnsltSe" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="CODE" type="STRING" size="256"/>
          <Column id="CODE_NM" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_smsList" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false" onrowposchanged="ds_lfsts_cntrct_onrowposchanged" oncolumnchanged="ds_lfsts_cntrct_oncolumnchanged">
        <ColumnInfo>
          <Column id="MBTLNO" type="STRING" size="12"/>
          <Column id="NM" type="STRING" size="200"/>
          <Column id="CHANGE_WORD0" type="STRING" size="200"/>
          <Column id="CHANGE_WORD1" type="STRING" size="200"/>
          <Column id="CHANGE_WORD2" type="STRING" size="200"/>
          <Column id="CHANGE_WORD3" type="STRING" size="200"/>
          <Column id="CHANGE_WORD4" type="STRING" size="200"/>
          <Column id="CHRCTR_PREPAR_VALUE_0" type="STRING" size="200"/>
          <Column id="CHRCTR_PREPAR_VALUE_1" type="STRING" size="200"/>
          <Column id="CHRCTR_PREPAR_VALUE_2" type="STRING" size="200"/>
          <Column id="CHRCTR_PREPAR_VALUE_3" type="STRING" size="200"/>
          <Column id="CHRCTR_PREPAR_VALUE_4" type="STRING" size="200"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_cus067" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="CODE" type="STRING" size="256"/>
          <Column id="CODE_NM" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
    </Objects>
    <Script type="xscript5.0"><![CDATA[/***********************************************************************
 * 화면ID    : CUS030103.xfdl
 * 화면명    : 고객상담관리
 * 화면설명  : 콜센터의 고객상담 정보을 관리한다.
 * 작성일    : 2015.09.21
 * 작성자    : 이지영
 * 수정이력  : 
 ***********************************************************************
 *     수정일     수정자   내용
 ***********************************************************************
 *    
 ***********************************************************************/
 
/***********************************************************************
 * Script Include 
 ***********************************************************************/
include "lib::comInclude.xjs";
include "mis_lib::misUtil.xjs";
include "lib::comSms.xjs";

/***********************************************************************
 * 화면 변수 선언부
 ***********************************************************************/
this.checkDs = [
  this.ds_cstmrCnsltList
];
var save_row = -1;
this.strUserNm;

/***********************************************************************
 * onInit 영역
 ***********************************************************************/
this.CUS030103_oninit = function(obj:Form, e:nexacro.InitEventInfo)
{
	// Form 초기화
	this.fn_init_form();

	// DataSet 초기화
	this.fn_init_dataset();
	
}

/***********************************************************************
 * onLoad 영역
 ***********************************************************************/
this.CUS030103_onload = function(obj:Form, e:nexacro.LoadEventInfo)
{ 	
	this.strUserNm = application.gds_userInfo.getColumn(0, "USER_NM");	// 로그인 사용자 이름
	/*
	// 사용자 콤보 생성
	var paramMap = {};	
	paramMap["USE_AT"] = "";
	this.pmsUtil.getLadCodeList(paramMap, "ds_landCodeSh");

	this.fn_get_lndcgrCode(this.ds_lndcgrCode);							// 지목 코드
	*/
	
}

/**********************************************************************
* Form 오브젝트 초기화
***********************************************************************/
this.fn_init_form = function()
{
	this.gfn_initForm(this);	// 시스템 공통으로 Form을 Initialize 한다.
	this.fn_misFormInit(this);
	
	this.ds_cond4.addRow();
	
	this.ds_chrctrCnInfo.addRow();
	this.ds_chrctrCnInfo.setColumn(0, "REGISTER_ID", this.fn_getEmpnm());
	
	//조회조건
	this.ds_cond.clearData();
	this.ds_cond.addRow();
	this.ds_cond.setColumn(0, "CNSLT_BGN_DE", this.dateUtils.addDate(this.dateUtils.today(), -7, "s"));
	this.ds_cond.setColumn(0, "CNSLT_END_DE", this.gfn_today());
	
	var comboParams = [["ds_cstmrGrad",         "CUS021", 1, "전체"], 	//고객등급
					   ["ds_cstmrSe",           "CUS020", 1, ""], 		//고객구분
					   ["ds_cnsltSe",           "CUS018", 1, "선택"], 	//상담구분
					   ["ds_cus067",            "CUS067", 1, "선택"], 	//고객구분
					   
					   ["ds_cus030",            "CUS030", 1, ""],		//화성도시공사 연락처
					   
					   ["ds_cus031",            "CUS031", 1, ""],		//상담구분1 콜센터상담구분(대분류)
					   ["ds_cus032",            "CUS032", 1, ""],		//상담구분2	콜센터상담구분(중분류)
					   ["ds_cus033",            "CUS033", 1, ""],		//상담구분3 콜센터상담구분(소분류)
		              ];
	var callback = function (svcId, errorCode, errorMsg) {
		this.ds_cus030.filter("CODE == 'TEL'");
		var telNo = this.ds_cus030.getColumn(0, "VAL0");
		this.ds_chrctrCnInfo.setColumn(0, "SEND_TEL_NO", telNo);
		this.div_work.div_search2.cmb_cus067.set_index(0);
	};
	this.gfn_comboLoad (comboParams, callback);
}

/**********************************************************************
* Dataset 오브젝트 초기화
***********************************************************************/
this.fn_init_dataset = function()
{
	
}

/***********************************************************************
* 상단 조회처리
************************************************************************/
this.fn_search = function()
{	
	//validation check
	if(!this.gfn_checkValidation(this.div_search, this.ds_validation)){
		return;
	}

	this.ds_cstmrCnsltList.clearData();

	//상담 목록 조회 
	this.fn_transaction("selectCstmrCnsltList");
}

/**********************************************************************
 *상단 저장 처리
 ***********************************************************************/ 
this.fn_save = function()
{
	//validation check		row 상태에 따라 validation 체크가 달라져서 따로 처리
// 	if(!this.gfn_checkValidation(this.ds_cstmrCnsltList, this.ds_validation)){
// 		return;
// 	}for(var i = 0; i < obj.getRowCount(); i++) {
	for(var i=0; this.ds_cstmrCnsltList.rowcount > i; i++){
		//신규 / 수정시
		if(this.ds_cstmrCnsltList.getRowType(i)=="2"
		 ||this.ds_cstmrCnsltList.getRowType(i)=="4"){
			if(this.comUtils.isNullEmpty(this.ds_cstmrCnsltList.getColumn(i, "CSTMR_NM"))==true){
				this.gfn_message("info.처리불가", "성명을 입력하세요.")
				return false;
			}
			if(this.comUtils.isNullEmpty(this.ds_cstmrCnsltList.getColumn(i, "CSTMR_TELNO"))==true){
				this.gfn_message("info.처리불가", "연락처를 입력하세요.")
				return false;
			}
			
			if(this.comUtils.isNullEmpty(this.ds_cstmrCnsltList.getColumn(i, "CNSLT_CN"))==true){
				this.gfn_message("info.처리불가", "상담내용을 입력하세요.")
				return false;
			}
			
			if(this.ds_cstmrCnsltList.getColumn(i, "CNSLT_SE3")!='Z9999'){
				if(this.comUtils.isNullEmpty(this.ds_cstmrCnsltList.getColumn(i, "CNSLT_SE1"))==true){
					this.gfn_message("info.처리불가", "대분류를 선택하세요.")
					return false;
				}
				if(this.comUtils.isNullEmpty(this.ds_cstmrCnsltList.getColumn(i, "CNSLT_SE2"))==true){
					this.gfn_message("info.처리불가", "중분류를 선택하세요.")
					return false;
				}
			}
		}
	}
	

	if(this.gfn_message("confirm.저장.여부")){
		save_row = this.ds_cstmrCnsltList.rowposition; 
		this.fn_transaction("cstmrCnsltListCUD");
	}
}

/**********************************************************************
 * CALL TRANSACTION 영역
 **********************************************************************/ 
this.fn_transaction = function(strSvcId)
{
	switch (strSvcId) {
		
		// 고객목록 조회
		case "selectCstmrList": 
			var sController   	= "hsco/mis/cus/CUS030103/selectCstmrList.do";
			var sInDatasets   	= "input01=ds_cond4";
			var sOutDatasets  	= "ds_cstmrList=output01";
		break;	
		
		// 상담목록 조회
		case "selectCstmrCnsltList":
			var sController   	= "hsco/mis/cus/CUS030103/selectCstmrCnsltList.do";
			var sInDatasets   	= "input02=ds_cond";
			var sOutDatasets  	= "ds_cstmrCnsltList=output02";
		break;
			
		// 상담목록 CUD
		case "cstmrCnsltListCUD":
			var sController   	= "hsco/mis/cus/CUS030103/cstmrCnsltListCUD.do";
			var sInDatasets   	= "input03=ds_cstmrCnsltList:U";
			var sOutDatasets  	= "";
		break;

	}
	var sArgs = "";	
	Ex.core.tran(this, strSvcId, sController, sInDatasets, sOutDatasets, sArgs); 
}

 /**********************************************************************
 * Transaction Callback 영역
 ***********************************************************************/ 
this.fn_callBack = function (strSvcId, nErrorCode, strErrorMsg)
{
	if (nErrorCode != 0){
		this.gfn_callback_message(strSvcId, nErrorCode, strErrorMsg);	
	} 
	else {	
		var comboOption = null;
		switch(strSvcId)
		{		
		
			// 고객목록 조회
			case "selectCstmrList": 
				
			break;

			case "selectCstmrCnsltList":
				if(save_row != -1){
					this.ds_cstmrCnsltList.set_rowposition(save_row);
					save_row = -1;
				}
			break;
			
			//상담목록cud콜백
			case "cstmrCnsltListCUD":
				this.gfn_message("success.처리.성공");
				this.fn_transaction("selectCstmrCnsltList");
			break;
			
		}
	}
}

/**********************************************************************
 * 상단 신규 버튼
 ***********************************************************************/ 
this.fn_insert = function()
{
	var nRow = this.ds_cstmrCnsltList.addRow();
	this.ds_cstmrCnsltList.setColumn(nRow, "CNSLT_DE",     this.gfn_today());  //상담일자
	this.ds_cstmrCnsltList.setColumn(nRow, "CNSLT_SE",     "");  				//상담구분
	this.ds_cstmrCnsltList.setColumn(nRow, "CNSLT_MAN",    this.strUserNm);  //상담사명
	this.ds_cstmrCnsltList.setColumn(nRow, "CSTMR_NM",    "미상");  //고객명
	this.ds_cstmrCnsltList.setColumn(nRow, "CSTMR_TELNO",    "01000000000");  //전화번호
	this.ds_cstmrCnsltList.setColumn(nRow, "CNSLT_SE1",    "G");  //대분류
	this.ds_cstmrCnsltList.setColumn(nRow, "CNSLT_SE2",    "G01");  //대분류
	
// 	if(this.ds_cstmrList.rowposition > -1){		// 선택된 고객이 있을경우, 선택된 고객정보를 기본값으로 셋팅
// 		
// 		this.ds_cstmrCnsltList.setColumn(nRow, "CSTMR_NM",     this.ds_cstmrList.getColumn(this.ds_cstmrList.rowposition, "NM")); //고객이름
// 		this.ds_cstmrCnsltList.setColumn(nRow, "CSTMR_TELNO",  this.ds_cstmrList.getColumn(this.ds_cstmrList.rowposition, "MBTLNO"));   //전화번호
// 		
// 		//PMS와 연계를 위한 추가 2016.07.13
// 		this.ds_cstmrCnsltList.setColumn(nRow, "CSTMR_BRTHDY", this.ds_cstmrList.getColumn(this.ds_cstmrList.rowposition, "CSTMR_BRTHDY")); //고객생년월일
// 		this.ds_cstmrCnsltList.setColumn(nRow, "DONG",  	   this.ds_cstmrList.getColumn(this.ds_cstmrList.rowposition, "DONG"));   //동
// 		this.ds_cstmrCnsltList.setColumn(nRow, "HO",     	   this.ds_cstmrList.getColumn(this.ds_cstmrList.rowposition, "HO")); //호
// 		//alert(this.ds_cstmrList.getColumn(this.ds_cstmrList.rowposition, "RCEPTER_SE"));
// 		this.ds_cstmrCnsltList.setColumn(nRow, "JOB_SE",     	this.ds_cstmrList.getColumn(this.ds_cstmrList.rowposition, "CSTMR_SE")); //관리구분 <- CSTMR_SE고객구분
// 		this.ds_cstmrCnsltList.setColumn(nRow, "CSTMR_NO",  	this.ds_cstmrList.getColumn(this.ds_cstmrList.rowposition, "PRMANENT_CSTMR_NO"));   //고객번호 <- PRMANENT_CSTMR_NO 고객번호
// 		this.ds_cstmrCnsltList.setColumn(nRow, "RCEPTER_SE",    this.ds_cstmrList.getColumn(this.ds_cstmrList.rowposition, "RCEPTER_SE")); //접수자구분
// 		this.ds_cstmrCnsltList.setColumn(nRow, "CNTRCTR_NO",  	this.ds_cstmrList.getColumn(this.ds_cstmrList.rowposition, "CNTRCTR_NO"));   //계약자번호
// 		
// 		this.ds_cstmrCnsltList.setColumn(nRow, "WAITR_HOUSE_CODE",this.ds_cstmrList.getColumn(this.ds_cstmrList.rowposition, "HOUSE_CODE")); //주택코드
// 		this.ds_cstmrCnsltList.setColumn(nRow, "WAITR_RECEP_DE",  this.ds_cstmrList.getColumn(this.ds_cstmrList.rowposition, "RECEP_DE"));   //대기자접수일자
// 		this.ds_cstmrCnsltList.setColumn(nRow, "WAITR_SN",  	  this.ds_cstmrList.getColumn(this.ds_cstmrList.rowposition, "RCEPT_SN"));   //대기자일련번호
// 		
// 		//this.ds_cstmrCnsltList.setColumn(nRow, "MSSAGE_ID",  	  "");   //메시지ID
// 
// 	}
}
/**********************************************************************
 * 상단 삭제 버튼
 ***********************************************************************/ 
this.fn_delete = function()
{
	if(this.gfn_message("confirm.삭제여부")){
		var nRow = this.ds_cstmrCnsltList.rowposition;
		this.ds_cstmrCnsltList.deleteRow(nRow);	
	}
}
/**********************************************************************
 * 상단 취소 버튼
 ***********************************************************************/ 
this.fn_cancel = function()
{
	if(!this.comUtils.isDatasetUpdated(this.ds_cstmrCnsltList))
	{
		this.gfn_message("comm.내역.변경.없음");
	}
	else{
		if(this.gfn_message("confirm.취소여부")){
			this.ds_cstmrCnsltList.reset();		//DATASET ROLLBACK
			this.ds_cstmrCnsltList.applyChange();	//DATASET COMMIT
			return;
		}
	}
}
/**********************************************************************
 * 고객목록 행 변경 시 
 ***********************************************************************/ 
this.ds_cstmrList_onrowposchanged = function(obj:Dataset, e:nexacro.DSRowPosChangeEventInfo)
{
	switch(this.ds_cstmrList.getColumn(this.ds_cstmrList.rowposition, "CSTMR_SE"))
	{
		//영구임대
		case '02':
			//this.div_work.CUS030103.set_tabindex(1);
		break;
		//상가임대
		case '03':
			//this.div_work.CUS030103.set_tabindex(1);
		break;
		//매입임대
		case '04':
			//this.div_work.CUS030103.set_tabindex(0);
		break;
		//전세임대
		case '05':
			//this.div_work.CUS030103.set_tabindex(2);
		break;
		//보상
		case '06':
			//this.div_work.CUS030103.set_tabindex(5);
		break;
		//토지
		case '07':
			//this.div_work.CUS030103.set_tabindex(4);
		break;
		//주택
		case '08':
			//this.div_work.CUS030103.set_tabindex(3);
		break;
		
		default:
			//this.div_work.CUS030103.set_tabindex(0);
		break;
	}

}


/**********************************************************************
 * 문자 발송 이벤트
 ***********************************************************************/ 
this.div_Cont_btn_Attach_onclick = function(obj:Button,  e:nexacro.ClickEventInfo)
{
	var sRow = this.ds_cstmrCnsltList.rowposition;
	
	var MBTLNO = this.ds_cstmrCnsltList.getColumn( sRow ,"CSTMR_TELNO");
	var NM = this.ds_cstmrCnsltList.getColumn( sRow, "CSTMR_NM");
	this.ds_smsList.clearData();
		
	if(!this.comUtils.isNullEmpty(MBTLNO)){
		var nRow = this.ds_smsList.addRow();
		this.ds_smsList.setColumn(nRow , "MBTLNO", MBTLNO);
		this.ds_smsList.setColumn(nRow , "NM", NM);
	}	
	
	var CONTENT = "";
	var param = {
		CONTENT : CONTENT,
		JOB_SE : "AAA", 
		ds : this.ds_smsList
	};
		
	this.gfn_popup("COM010700_P01.xfdl"
			   , 800
			   , 500
			   , "SMS발송"
			   , param
			   , "com::COM010700_P01.xfdl"
			   , "sms_callback");
// 	var nRow = this.ds_cstmrCnsltList.rowposition;
// 	if(nRow<0){
// 		this.gfn_message("info.항목.선택.알림", "수신자");
// 		return;
// 	}
// 	
// 	var nRow = this.ds_cstmrCnsltList.rowposition;
// 	var telNo = this.ds_cstmrCnsltList.getColumn(nRow, "CSTMR_TELNO");
// 	if(!telNo){
// 		this.gfn_message("info.처리불가", "고객 연락처 정보가 존재하지 않습니다.");
// 		return;
// 	}
// 
// 	//validation check		
// 	if(!this.gfn_checkValidation_NoUpdChk(this.ds_chrctrCnInfo, this.ds_validation)){
// 		return;
// 	}
// 
// 	this.ds_smsClient1.clearData();	// sms 수신자 목록 초기화
// 	this.ds_smsClient1.addRow();
// 	
// 	this.ds_smsClient1.setColumn(nRow, "RECIPIENT_NUM", telNo.replace('-',''));
// 	this.ds_smsClient1.setColumn(nRow, "CHANGE_WORD5", this.ds_cstmrCnsltList.getColumn(nRow, "CSTMR_NM"));
// 	
// 	var chrctrCn = this.ds_chrctrCnInfo.getColumn(0, "CHRCTR_CN");		// 문자내용
// 	var telNo    = this.ds_chrctrCnInfo.getColumn(0, "SEND_TEL_NO");	// 발신자번호
// 	var deptId   = this.gfn_getDeptId();
// 
// 	var nMsgSize = this.div_work.txt_chrctrCn00.getLength("ascii");
// 	if(nMsgSize > 80 ) {
// 			var smsType = "2";
// 	}else {
// 		var smsType = "0";
// 	}
// 		
// 	//문자전송 소스필요
// 	var sSndDeptcode = deptId;      // 부서코드(필수)
// 	var sAnswTel = telNo;       	// 발신번호(필수)
//     var sServiceType = smsType;     // sms(단문80 byte):0, mms(장문 2000 byte):2 (필수)
//     var sMsge = chrctrCn;  /* 전송메시지 동보메시지단어 입력시: 사용예) 전송메시지에 '%CHANGEWORD%님이 %CHANGEWORD%에 문의하신 민원을 접수하였습니다. %CHANGEWORD%님 감사합니다.'	
// 								        (필수)                           결과:  '홍길동님이 2016년3월20일에 문의하신 민원을 접수하였습니다. 홍길동님 감사합니다.' */
//     //수신 Dataset (필수)
//     var sSndDt = ""           // 예약전송시간 YYYYMMDDHH24MISS "20160410153050" , 미입력시 즉시전송
//     var sChangWord1 = ""      // 동보메시지단어1
//     var sChangWord2 = ""      // 동보메시지단어2
//     var sChangWord3 = ""      // 동보메시지단어3
//     var sChangWord4 = ""      // 동보메시지단어4    
// 
// 	this.sms_MultiMessage(this,sSndDeptcode, sAnswTel, sServiceType, sMsge, this.ds_smsClient1, sSndDt, sChangWord1, sChangWord2, sChangWord3, sChangWord4) ;	
}

/**************************************************************************
* SMS 발송 콜백
**************************************************************************/
this.sms_callback=function(){
}

/**********************************************************************
 * 분류 선택 시 이벤트
 ***********************************************************************/ 
this.ds_cstmrCnsltList_oncolumnchanged = function(obj:Dataset, e:nexacro.DSColChangeEventInfo)
{
	//대분류
	if(e.columnid == "CNSLT_SE1"){
		this.ds_cus032.filter("CODE.substr(0,1) == '"+ e.newvalue +"'");
		this.div_work.cmb_cstmrCnsltList00.set_index(0);
		
		var code = this.ds_cstmrCnsltList.getColumn(this.ds_cstmrCnsltList.rowposition, "CNSLT_SE2");
		this.ds_cus033.filter("CODE.substr(0,3) == '"+ code +"'");
		this.div_work.cmb_cstmrCnsltList01.set_index(0);
	}
	
	//중분류
	if(e.columnid == "CNSLT_SE2"){
		this.ds_cus033.filter("CODE.substr(0,3) == '"+ e.newvalue +"'");
		this.div_work.cmb_cstmrCnsltList01.set_index(0);
	}
	
// 	if(e.columnid=="CNSLT_SE3"){
// 		if(this.ds_cstmrCnsltList.getColumn(this.ds_cstmrCnsltList.rowposition, "CNSLT_SE3")=='D0000'){
// 			this.div_work.cmb_cstmrCnsltList.set_readonly(true);
// 			this.div_work.cmb_cstmrCnsltList00(true);
// 			this.div_work.cmb_cstmrCnsltList01(true);
// 		}
// 		//trace("asdfja;sdfj : "+this.ds_cstmrCnsltList.getColumn(this.ds_cstmrCnsltList.rowposition, "CNSLT_SE3"));
// 	}
}

//고객목록 조회
this.fn_search_sub = function(obj:Button,  e:nexacro.ClickEventInfo)
{
	if(this.comUtils.isNullEmpty(this.div_work.div_search2.edt_cstmrNm.value)
	&& this.comUtils.isNullEmpty(this.div_work.div_search2.edt_telno.value)
	&& this.comUtils.isNullEmpty(this.div_work.div_search2.edt_telno00.value)
	&& this.comUtils.isNullEmpty(this.div_work.div_search2.edt_telno01.value)
	&& this.comUtils.isNullEmpty(this.div_work.div_search2.edt_housenm.value)
	&& this.comUtils.isNullEmpty(this.div_work.div_search2.cmb_cus067.value)
	)
	{
		this.div_work.div_search2.edt_cstmrNm.setFocus();
		this.gfn_message("info.처리불가", "검색어를 입력해 주세요.");
		return false;
	}else{
		this.fn_transaction("selectCstmrList");
	}
}

/**********************************************************************
 * 상담목록 행 변경 이벤트
 ***********************************************************************/ 
this.ds_cstmrCnsltList_onrowposchanged = function(obj:Dataset, e:nexacro.DSRowPosChangeEventInfo)
{
	var code = this.ds_cstmrCnsltList.getColumn(this.ds_cstmrCnsltList.rowposition, "CNSLT_SE1");
	this.ds_cus032.filter("CODE.substr(0,1) == '"+ code +"'");
		
	var code = this.ds_cstmrCnsltList.getColumn(this.ds_cstmrCnsltList.rowposition, "CNSLT_SE2");
	this.ds_cus033.filter("CODE.substr(0,3) == '"+ code +"'");
	
	if(this.ds_cstmrCnsltList.getColumn(this.ds_cstmrCnsltList.rowposition, "CNSLT_SE3")=="Z9999"){
		this.div_work.cmb_cstmrCnsltList.set_readonly(true);
		this.div_work.cmb_cstmrCnsltList.set_cssclass("cmb_WF_Readonly");
 		this.div_work.cmb_cstmrCnsltList00.set_readonly(true);
 		this.div_work.cmb_cstmrCnsltList00.set_cssclass("cmb_WF_Readonly");
 		this.div_work.cmb_cstmrCnsltList01.set_readonly(true);
 		this.div_work.cmb_cstmrCnsltList01.set_cssclass("cmb_WF_Readonly");
 	}else{
		this.div_work.cmb_cstmrCnsltList.set_readonly(false);
		this.div_work.cmb_cstmrCnsltList.set_cssclass("cmb_WF_Essential");
 		this.div_work.cmb_cstmrCnsltList00.set_readonly(false);
 		this.div_work.cmb_cstmrCnsltList00.set_cssclass("cmb_WF_Essential");
 		this.div_work.cmb_cstmrCnsltList01.set_readonly(false);
 		this.div_work.cmb_cstmrCnsltList01.set_cssclass("");
 	}
}

this.div_work_grd_cstmrList_oncellclick = function(obj:Grid, e:nexacro.GridClickEventInfo)
{
	var cntrctAt = this.ds_cstmrList.getColumn(this.ds_cstmrList.rowposition, "CNTRCT_AT");	//계약여부
	var waitAt  = this.ds_cstmrList.getColumn(this.ds_cstmrList.rowposition, "WAIT_AT");	//대기여부

	var cstmrNo = this.ds_cstmrList.getColumn(this.ds_cstmrList.rowposition, "CSTMR_NO");	//고객번호
	var cstmrSe = this.ds_cstmrList.getColumn(this.ds_cstmrList.rowposition, "CSTMR_SE");	//고객구분
	var cstmrNm = this.ds_cstmrList.getColumn(this.ds_cstmrList.rowposition, "CSTMR_NM");	//고객명
	
	//2016.07.14
	var HOUSE_CODE = this.ds_cstmrList.getColumn(this.ds_cstmrList.rowposition, "HOUSE_CODE");	//주택코드
	var RCEPT_DE = this.ds_cstmrList.getColumn(this.ds_cstmrList.rowposition, "RCEPT_DE");		//
	var RCEPT_SN = this.ds_cstmrList.getColumn(this.ds_cstmrList.rowposition, "RCEPT_SN");
	
	var viewSe = this.ds_cstmrList.getColumn(this.ds_cstmrList.rowposition, "VIEW_SE");
	var jobSe = this.ds_cstmrList.getColumn(this.ds_cstmrList.rowposition, "JOB_SE");
	var rceptSe  = this.ds_cstmrList.getColumn(this.ds_cstmrList.rowposition, "RCEPTER_SE");
	var CNTRCTR_NO = this.ds_cstmrList.getColumn(this.ds_cstmrList.rowposition, "CNTRCTR_NO");	//계약번호
	var waitDe  = this.ds_cstmrList.getColumn(this.ds_cstmrList.rowposition, "WAIT_RECEP_DE");	//대기일자
	var waitSn  = this.ds_cstmrList.getColumn(this.ds_cstmrList.rowposition, "WAITR_SN");
	var dong  = this.ds_cstmrList.getColumn(this.ds_cstmrList.rowposition, "DONG");
	var ho  = this.ds_cstmrList.getColumn(this.ds_cstmrList.rowposition, "HO");
	var protectYn  = this.ds_cstmrList.getColumn(this.ds_cstmrList.rowposition, "PROTECT_YN");
	
	//개인정보 보호 고객 팝업차단
	if(protectYn=="1"){
		this.gfn_message("info.처리불가", "개인정보 보호 요청한 고객입니다.");
		return false;
	}
	
	//주택-대기자 : 주택-주택계약관리-임대계약관리-입주대기자관리
	if(e.col == 1 && viewSe == 'HOU-1'){
		var parm = {
			arg_0 : this
		   ,arg_1 : "pms_sls_hou_ctr::SLS020500.xfdl"
		   ,arg_2 : cstmrNo
		   ,arg_3 : cstmrNm
		   
		   ,arg_4 : CNTRCTR_NO
		   ,arg_5 : HOUSE_CODE
		   ,arg_6 : RCEPT_DE
		   ,arg_7 : RCEPT_SN
		   ,arg_8 : jobSe
		   ,arg_9 : viewSe
		   ,arg_10 : waitDe
		   ,arg_11 : waitSn
		   ,arg_12 : dong
		   ,arg_13 : ho
		};
		this.gfn_popup("cus030103_p01", 1059, 700, "", parm, "mis_cus::CUS030103_P01.xfdl", "fn_PopCallback", true);		
	}
	
	//주택-계약자-분양 : 주택-주택계약관리-임대계약관리-계약관리(분양)
	if(e.col == 1 && viewSe == 'HOU-2'){
		var parm = {
			arg_0 : this
		   ,arg_1 : "pms_sls_hou_ctr::SLS020101.xfdl"
		   ,arg_2 : cstmrNo
		   ,arg_3 : cstmrNm
		   
		   ,arg_4 : CNTRCTR_NO
		   ,arg_5 : HOUSE_CODE
		   ,arg_6 : RCEPT_DE
		   ,arg_7 : RCEPT_SN
		   ,arg_8 : jobSe
		   ,arg_9 : viewSe
		   ,arg_10 : waitDe
		   ,arg_11 : waitSn
		   ,arg_12 : dong
		   ,arg_13 : ho
		};
		this.gfn_popup("cus030103_p01", 1059, 700, "", parm, "mis_cus::CUS030103_P01.xfdl", "fn_PopCallback", true);	
	}
	
	//주택-계약자-임대 : 주택-주택계약관리-임대계약관리-계약관리(임대)
	if(e.col == 1 && viewSe == 'HOU-3'){
		
		var parm = {
			arg_0 : this
		   ,arg_1 : "pms_sls_hou_ctr::SLS020208.xfdl"
		   ,arg_2 : cstmrNo
		   ,arg_3 : cstmrNm
		   
		   ,arg_4 : CNTRCTR_NO
		   ,arg_5 : HOUSE_CODE
		   ,arg_6 : RCEPT_DE
		   ,arg_7 : RCEPT_SN
		   ,arg_8 : jobSe
		   ,arg_9 : viewSe
		   ,arg_10 : waitDe
		   ,arg_11 : waitSn
		   ,arg_12 : dong
		   ,arg_13 : ho
		};
		this.gfn_popup("cus030103_p01", 1059, 700, "", parm, "mis_cus::CUS030103_P01.xfdl", "fn_PopCallback", true);		
	}
	
	//토지-계약자 : 토지-계약관리-계약관리-토지계약관리
	if(e.col == 1 && viewSe == 'LAD-1'){
		
		var parm = {
			arg_0 : this
		   ,arg_1 : "pms_sls_lad_ctr::SLS080201.xfdl"
		   ,arg_2 : cstmrNo
		   ,arg_3 : cstmrNm
		   
		   ,arg_4 : CNTRCTR_NO
		   ,arg_5 : HOUSE_CODE
		   ,arg_6 : RCEPT_DE
		   ,arg_7 : RCEPT_SN
		   ,arg_8 : jobSe
		   ,arg_9 : viewSe
		   ,arg_10 : waitDe
		   ,arg_11 : waitSn
		   ,arg_12 : dong
		   ,arg_13 : ho
		};
		this.gfn_popup("cus030103_p01", 1059, 700, "", parm, "mis_cus::CUS030103_P01.xfdl", "fn_PopCallback", true);	
	}
	
	//영구-대기자 : 영구-영구대기자관리-입주대기자관리-입주대기자관리(영구)
	if(e.col == 1 && viewSe == 'RN1-1'){
		
		var parm = {
			arg_0 : this
		   ,arg_1 : "pms_rnt_pra::RNT01020100.xfdl"
		   ,arg_2 : cstmrNo
		   ,arg_3 : cstmrNm
		   
		   ,arg_4 : CNTRCTR_NO
		   ,arg_5 : HOUSE_CODE
		   ,arg_6 : RCEPT_DE
		   ,arg_7 : RCEPT_SN
		   ,arg_8 : jobSe
		   ,arg_9 : viewSe
		   ,arg_10 : waitDe
		   ,arg_11 : waitSn
		   ,arg_12 : dong
		   ,arg_13 : ho
		};
		this.gfn_popup("cus030103_p01", 1059, 700, "", parm, "mis_cus::CUS030103_P01.xfdl", "fn_PopCallback", true);		
	}
	
	//영구-계약자 : 영구-영구계약관리-계약관리-계약정보관리(영구)
	if(e.col == 1 && viewSe == 'RN1-2'){
		
		var parm = {
			arg_0 : this
		   ,arg_1 : "pms_rnt_pra::RNT01030100.xfdl"
		   ,arg_2 : cstmrNo
		   ,arg_3 : cstmrNm
		   
		   ,arg_4 : CNTRCTR_NO
		   ,arg_5 : HOUSE_CODE
		   ,arg_6 : RCEPT_DE
		   ,arg_7 : RCEPT_SN
		   ,arg_8 : jobSe
		   ,arg_9 : viewSe
		   ,arg_10 : waitDe
		   ,arg_11 : waitSn
		   ,arg_12 : dong
		   ,arg_13 : ho
		};
		this.gfn_popup("cus030103_p01", 1059, 700, "", parm, "mis_cus::CUS030103_P01.xfdl", "fn_PopCallback", true);	
	}	
	
	//매입-대기자 : 매입-매입대기자관리-매입대기자관리-입주대기자관리(매입)
	if(e.col == 1 && viewSe == 'RN2-1'){
		var parm = {
			arg_0 : this
		   ,arg_1 : "pms_rnt_prm::RNT02020100.xfdl"
		   ,arg_2 : cstmrNo
		   ,arg_3 : cstmrNm
		   
		   ,arg_4 : CNTRCTR_NO
		   ,arg_5 : HOUSE_CODE
		   ,arg_6 : RCEPT_DE
		   ,arg_7 : RCEPT_SN
		   ,arg_8 : jobSe
		   ,arg_9 : viewSe
		   ,arg_10 : waitDe
		   ,arg_11 : waitSn
		   ,arg_12 : dong
		   ,arg_13 : ho
		};
		this.gfn_popup("cus030103_p01", 1059, 700, "", parm, "mis_cus::CUS030103_P01.xfdl", "fn_PopCallback", true);		
	}
	
	//매입-계약자 : 매입-매입계약관리-계약관리-계약정보관리(매입)
	if(e.col == 1 && viewSe == 'RN2-2'){
		var parm = {
			arg_0 : this
		   ,arg_1 : "pms_rnt_prm::RNT02030100.xfdl"
		   ,arg_2 : cstmrNo
		   ,arg_3 : cstmrNm
		   
		   ,arg_4 : CNTRCTR_NO
		   ,arg_5 : HOUSE_CODE
		   ,arg_6 : RCEPT_DE
		   ,arg_7 : RCEPT_SN
		   ,arg_8 : jobSe
		   ,arg_9 : viewSe
		   ,arg_10 : waitDe
		   ,arg_11 : waitSn
		   ,arg_12 : dong
		   ,arg_13 : ho
		};
		this.gfn_popup("cus030103_p01", 1059, 700, "", parm, "mis_cus::CUS030103_P01.xfdl", "fn_PopCallback", true);	
	}
	
	//전세-대기자 : 전세-신청자관리-신청자등록
	if(e.col == 1 && viewSe == 'RN3-1'){
		var parm = {
			arg_0 : this
		   ,arg_1 : "pms_rnt_lrm::RNT030201.xfdl"
		   ,arg_2 : cstmrNo
		   ,arg_3 : cstmrNm
		   
		   ,arg_4 : CNTRCTR_NO
		   ,arg_5 : HOUSE_CODE
		   ,arg_6 : RCEPT_DE
		   ,arg_7 : RCEPT_SN
		   ,arg_8 : jobSe
		   ,arg_9 : viewSe
		   ,arg_10 : waitDe
		   ,arg_11 : waitSn
		   ,arg_12 : dong
		   ,arg_13 : ho
		};
		this.gfn_popup("cus030103_p01", 1059, 700, "", parm, "mis_cus::CUS030103_P01.xfdl", "fn_PopCallback", true);	
	}
	
	//전세-계약자 : 전세-계약관리-계약등록
	if(e.col == 1 && viewSe == 'RN3-2'){
		var parm = {
			arg_0 : this
		   ,arg_1 : "pms_rnt_lrm::RNT030301.xfdl"
		   ,arg_2 : this.ds_cstmrList.getColumn(this.ds_cstmrList.rowposition, "IHIDNUM")
		   ,arg_3 : cstmrNm
		   
		   ,arg_4 : CNTRCTR_NO
		   ,arg_5 : HOUSE_CODE
		   ,arg_6 : RCEPT_DE
		   ,arg_7 : RCEPT_SN
		   ,arg_8 : jobSe
		   ,arg_9 : viewSe
		   ,arg_10 : waitDe
		   ,arg_11 : waitSn
		   ,arg_12 : dong
		   ,arg_13 : ho
		};
		this.gfn_popup("cus030103_p01", 1059, 700, "", parm, "mis_cus::CUS030103_P01.xfdl", "fn_PopCallback", true);	
	}	
}

this.div_work_edt_cstmrNm_onkeyup = function(obj:Edit, e:nexacro.KeyEventInfo)
{
	if(e.keycode == 13){
		this.fn_search_sub();
	}
}

/************************************************************************************
* 고객목록에서 조회 고객을 신규상담목록으로 이동
************************************************************************************/
this.div_work_btn_moveConsult_onclick = function(obj:Button,  e:nexacro.ClickEventInfo)
{
	if(this.ds_cstmrList.rowposition > -1){		// 조회된 고객이 있을 경우만 해당
		var nRow = this.ds_cstmrCnsltList.addRow();
		var mbtlno = "";
		if(this.comUtils.isNull(this.ds_cstmrList.getColumn(this.ds_cstmrList.rowposition, "MBTLNO"))){
			mbtlno = this.ds_cstmrList.getColumn(this.ds_cstmrList.rowposition, "TELNO");
		}else{
			mbtlno = this.ds_cstmrList.getColumn(this.ds_cstmrList.rowposition, "MBTLNO");
		}

		this.ds_cstmrCnsltList.setColumn(nRow, "CNSLT_DE",     this.gfn_today());  //상담일자
		this.ds_cstmrCnsltList.setColumn(nRow, "CNSLT_SE",     "");  				//상담구분
		this.ds_cstmrCnsltList.setColumn(nRow, "CNSLT_MAN",    this.strUserNm);  //상담사명
	
		this.ds_cstmrCnsltList.setColumn(nRow, "CSTMR_NM",     this.ds_cstmrList.getColumn(this.ds_cstmrList.rowposition, "CSTMR_NM")); //고객이름
		this.ds_cstmrCnsltList.setColumn(nRow, "CSTMR_TELNO",  mbtlno);   //전화번호
		
		//PMS와 연계를 위한 추가 2016.07.13
		this.ds_cstmrCnsltList.setColumn(nRow, "CSTMR_BRTHDY", this.ds_cstmrList.getColumn(this.ds_cstmrList.rowposition, "CSTMR_IHIDNUM")); //고객생년월일
		this.ds_cstmrCnsltList.setColumn(nRow, "DONG",  	   this.ds_cstmrList.getColumn(this.ds_cstmrList.rowposition, "DONG"));   //동
		this.ds_cstmrCnsltList.setColumn(nRow, "HO",     	   this.ds_cstmrList.getColumn(this.ds_cstmrList.rowposition, "HO")); //호
		//alert(this.ds_cstmrList.getColumn(this.ds_cstmrList.rowposition, "RCEPTER_SE"));
		
		//이동시 관리구분/접수자구분 코드 재가공
		var jobSe=this.ds_cstmrList.getColumn(this.ds_cstmrList.rowposition, "VIEW_SE");
		var rcepterSe="";
		/*
			HOU-1 : 주택(대기) / HOU-2 : 주택(계약) / HOU-3 : 주택(계약)
			RN1-1 : 영구(대기) / RN1-2 : 매입(계약) 
			RN2-1 : 매입(대기) / RN2-2 : 매입(계약)
			RN3-1 : 전세(대기) / RN3-2 : 전세(계약) / LAD-1 : 토지(계약)
		*/
		if(jobSe=="HOU-1" || jobSe=="RN1-1" || jobSe=="RN2-1" || jobSe=="RN3-1"){
			rcepterSe="1";	//대기자
		}
		
		if(jobSe=="HOU-2" || jobSe=="HOU-3" || jobSe=="RN1-2" || jobSe=="RN2-2" || jobSe=="RN3-2" || jobSe=="LAD-1"){
			rcepterSe="2";	//계약자
		}
			
		this.ds_cstmrCnsltList.setColumn(nRow, "JOB_SE",     	jobSe); //관리구분 <- CSTMR_SE고객구분
		this.ds_cstmrCnsltList.setColumn(nRow, "RCEPTER_SE",    rcepterSe); //접수자구분
		
		//CNSLT_SE3(소분류)이 테이블 입력시 키로 설정되어 있어 이동시에 구분값으로 임의 사용
		this.ds_cstmrCnsltList.setColumn(nRow, "CNSLT_SE3",    "Z9999"); //임의 구분값 D0000 일 때 대분류/중분류/소분류 사용안함
		
		this.ds_cstmrCnsltList.setColumn(nRow, "CSTMR_NO",  	this.ds_cstmrList.getColumn(this.ds_cstmrList.rowposition, "WAITR_SN"));   //고객번호 <- PRMANENT_CSTMR_NO 고객번호
		this.ds_cstmrCnsltList.setColumn(nRow, "CNTRCTR_NO",  	this.ds_cstmrList.getColumn(this.ds_cstmrList.rowposition, "CNTRCTR_NO"));   //계약자번호
		
		this.ds_cstmrCnsltList.setColumn(nRow, "WAITR_HOUSE_CODE",this.ds_cstmrList.getColumn(this.ds_cstmrList.rowposition, "HOUSE_CODE")); //주택코드
		this.ds_cstmrCnsltList.setColumn(nRow, "WAITR_RECEP_DE",  this.ds_cstmrList.getColumn(this.ds_cstmrList.rowposition, "WAIT_RECEP_DE"));   //대기자접수일자
		this.ds_cstmrCnsltList.setColumn(nRow, "WAITR_SN",  	  this.ds_cstmrList.getColumn(this.ds_cstmrList.rowposition, "WAITR_SN"));   //대기자일련번호
	
		this.div_work.cmb_cstmrCnsltList.set_readonly(true);
		this.div_work.cmb_cstmrCnsltList.set_cssclass("cmb_WF_Readonly");
 		this.div_work.cmb_cstmrCnsltList00.set_readonly(true);
 		this.div_work.cmb_cstmrCnsltList00.set_cssclass("cmb_WF_Readonly");
 		this.div_work.cmb_cstmrCnsltList01.set_readonly(true);
 		this.div_work.cmb_cstmrCnsltList01.set_cssclass("cmb_WF_Readonly");
	}else{
		this.gfn_message("comm.항목.다중선택.요청", "고객목록");
		return false;
	}
}

/*****************************************
* 고객 상세 정보 팝업
*****************************************/
this.div_work_div_search2_btn_detailPop_onclick = function(obj:Button,  e:nexacro.ClickEventInfo)
{
	if(this.comUtils.isNull(this.div_work.div_search2.cmb_detailPop.value)){
		this.div_work.div_search2.cmb_detailPop.setFocus(true);
		this.gfn_message("info.항목.선택.알림", "검색 정보 조건");
		return false;
	}
	
	var parm = {
			arg_0 : this
		   ,arg_1 : this.div_work.div_search2.cmb_detailPop.value
		};
	this.gfn_popup("cus030103_p02", 1059, 700, "", parm, "mis_cus::CUS030103_P02.xfdl", "", true);		
}

/*****************************************
* 검색내용 초기화
*****************************************/
this.div_work_div_search2_btn_reset_onclick = function(obj:Button,  e:nexacro.ClickEventInfo)
{
	var nRow = this.ds_cond4.rowposition;
	this.ds_cond4.setColumn(nRow, "TELNO", "");
	this.ds_cond4.setColumn(nRow, "CSTMR_NM", "");
	this.ds_cond4.setColumn(nRow, "DONG", "");
	this.ds_cond4.setColumn(nRow, "HO", "");
	this.ds_cond4.setColumn(nRow, "HOUSE_NM", "");
	this.ds_cond4.setColumn(nRow, "VIEW_SE", "");
}
]]></Script>
  </Form>
</FDL>
