<?xml version="1.0" encoding="utf-8"?>
<FDL version="1.5">
  <TypeDefinition url="..\..\default_typedef.xml"/>
  <Form id="HRM070113" classname="HRM070113" left="0" top="0" width="1059" height="735" titletext="휴직신청" oninit="HRM070113_oninit" onload="HRM070113_onload">
    <Layouts>
      <Layout>
        <Static id="Static00" taborder="2" text="15" visible="false" top="0" right="13" width="15" height="735" style="background:#1b3cd23c;align:center middle;"/>
        <Static id="Static01" taborder="3" text="스&#13;&#10;크&#13;&#10;롤&#13;&#10;13" visible="false" top="0" right="0" width="13" height="735" style="background:#d07b173c;align:center middle;"/>
        <Div id="div_search" taborder="5" left="0" top="0" right="28" height="33" cssclass="div_WFSA_Box">
          <Layouts>
            <Layout>
              <Static id="Static06" taborder="17" text="15" visible="false" left="0" top="0" width="15" height="33" style="background:#00ffff66;"/>
              <Static id="sta_gnfdDe" taborder="18" text="조회기간" cssclass="sta_WFSA_Label" left="15" top="6" width="64" height="19"/>
              <Static id="sta_dclzSe" taborder="19" text="휴직구분" cssclass="sta_WFSA_Label" left="314" top="6" width="64" height="19"/>
              <Static id="sta_register" taborder="20" text="신청자" cssclass="sta_WFSA_Label" left="771" top="6" width="51" height="19"/>
              <Calendar id="cal_BGNDT1" taborder="21" dateformat="yyyy-MM-dd" cssclass="cal_WF_Essential" left="79" top="5" width="102" height="21"/>
              <Calendar id="cal_BGNDT2" taborder="22" dateformat="yyyy-MM-dd" cssclass="cal_WF_Essential" left="197" top="5" width="102" height="21"/>
              <Combo id="cmb_DCLZ_SE" taborder="23" displaynulltext="전체" innerdataset="@ds_hrm089_s" codecolumn="CODE" datacolumn="CODE_NM" left="378" top="5" width="105" height="21"/>
              <Div id="div_DeptComp" taborder="24" url="com::deptCode.xfdl" left="562" top="5" width="194" height="21" async="false"/>
              <Static id="sta_register00" taborder="25" text="소속부서" cssclass="sta_WFSA_Label" left="498" top="6" width="64" height="19"/>
              <Static id="Static00" taborder="26" text="15" visible="false" left="483" top="0" width="15" height="33" style="background:#00ffff66;"/>
              <Static id="Static01" taborder="27" text="15" visible="false" left="756" top="0" width="15" height="33" style="background:#00ffff66;"/>
              <Div id="div_EMP" taborder="28" url="com::empno.xfdl" left="822" top="5" width="166" height="21" async="false"/>
              <Static id="Static02" taborder="29" text="15" visible="false" left="299" top="0" width="15" height="33" style="background:#00ffff66;"/>
            </Layout>
          </Layouts>
        </Div>
        <Static id="Static04" taborder="6" text="~" left="183" top="9" width="10" height="16"/>
        <Static id="Static36" taborder="7" text="10" visible="false" left="0" top="33" width="1031" height="10" style="background:#dc143c3c;align:center middle;"/>
        <Tab id="Tab" taborder="8" left="0" top="43" tabindex="0" scrollbars="autoboth" right="28" bottom="0" style="showextrabutton:false;">
          <Tabpages>
            <Tabpage id="tpg1" text="휴직현황">
              <Layouts>
                <Layout>
                  <Grid id="grd_tap1" taborder="2" binddataset="ds_tap1" autoenter="select" useinputpanel="false" left="0" top="28" right="0" bottom="0" onexpandup="Tab_tpg1_grd_tap1_onexpandup" autoupdatetype="comboselect">
                    <Formats>
                      <Format id="default">
                        <Columns>
                          <Column size="40"/>
                          <Column size="40"/>
                          <Column size="80"/>
                          <Column size="90"/>
                          <Column size="120"/>
                          <Column size="100"/>
                          <Column size="80"/>
                          <Column size="80"/>
                          <Column size="110"/>
                          <Column size="110"/>
                          <Column size="300"/>
                          <Column size="80"/>
                          <Column size="80"/>
                          <Column size="300"/>
                          <Column size="100"/>
                          <Column size="120"/>
                          <Column size="100"/>
                          <Column size="80"/>
                          <Column size="80"/>
                        </Columns>
                        <Rows>
                          <Row size="24" band="head"/>
                          <Row size="24" band="head"/>
                          <Row size="24"/>
                        </Rows>
                        <Band id="head">
                          <Cell rowspan="2" text="순번"/>
                          <Cell col="1" rowspan="2" text="발령&#13;&#10;여부"/>
                          <Cell col="2" rowspan="2" text="결재상태"/>
                          <Cell col="3" rowspan="2" text="휴직구분"/>
                          <Cell col="4" colspan="4" text="신청자"/>
                          <Cell col="8" colspan="2" text="휴직기간"/>
                          <Cell col="10" rowspan="2" text="사유"/>
                          <Cell col="11" colspan="2" text="영유아"/>
                          <Cell col="13" rowspan="2" text="주소"/>
                          <Cell col="14" rowspan="2" text="연락처"/>
                          <Cell col="15" colspan="4" text="업무대행자"/>
                          <Cell row="1" col="4" text="부서"/>
                          <Cell row="1" col="5" text="직급"/>
                          <Cell row="1" col="6" text="사번"/>
                          <Cell row="1" col="7" text="성명"/>
                          <Cell row="1" col="8" text="시작일자"/>
                          <Cell row="1" col="9" text="종료일자"/>
                          <Cell row="1" col="11" text="성명"/>
                          <Cell row="1" col="12" text="출생일자"/>
                          <Cell row="1" col="15" text="부서"/>
                          <Cell row="1" col="16" text="직급"/>
                          <Cell row="1" col="17" text="사번"/>
                          <Cell row="1" col="18" text="성명"/>
                        </Band>
                        <Band id="body">
                          <Cell text="expr:currow + 1"/>
                          <Cell col="1" displaytype="checkbox" text="bind:GNFD_AT"/>
                          <Cell col="2" displaytype="image" text="expr:comp.parent.parent.parent.fn_get_imgUrl(SANCTN_STS)"/>
                          <Cell col="3" displaytype="combo" edittype="expr:UPDATE_POSBL_AT == '1' ? 'combo' : 'none'" text="bind:LAYOFF_SE" combodataset="ds_hrm089" combocodecol="CODE" combodatacol="CODE_NM" combodisplay="expr:UPDATE_POSBL_AT == '1' ? 'display' : 'edit'"/>
                          <Cell col="4" text="bind:DEPT_NM"/>
                          <Cell col="5" text="bind:CLSF_NM"/>
                          <Cell col="6" text="bind:EMPNO"/>
                          <Cell col="7" text="bind:EMPNM" expandshow="expr:comp.parent.parent.parent.isAuth ? UPDATE_POSBL_AT == '1' ? 'show' : 'hide' : 'hide'"/>
                          <Cell col="8" displaytype="date" edittype="expr:UPDATE_POSBL_AT == '1' ? 'date' : 'none'" style="align:center middle;" text="bind:LAYOFF_BGNDE" calendardisplay="expr:UPDATE_POSBL_AT == '1' ? 'display' : 'edit'" calendardisplaynulltype="none"/>
                          <Cell col="9" displaytype="date" edittype="expr:UPDATE_POSBL_AT == '1' ? 'date' : 'none'" style="align:center middle;" text="bind:LAYOFF_ENDDE" calendardisplay="expr:UPDATE_POSBL_AT == '1' ? 'display' : 'edit'" calendardisplaynulltype="none"/>
                          <Cell col="10" edittype="expr:UPDATE_POSBL_AT == '1' ? 'normal' : 'none'" cssclass="Cellgrd_WF_AlignLeft" text="bind:LAYOFF_PRVONSH" editdisplay="expr:UPDATE_POSBL_AT == '1' ? 'display' : 'edit'"/>
                          <Cell col="11" text="bind:INFANT_NM" expandshow="expr: UPDATE_POSBL_AT == '1' ? LAYOFF_SE == '003' ? 'show' : 'hide' : 'hide'"/>
                          <Cell col="12" displaytype="date" text="bind:INFANT_BRTHDY" calendardisplaynulltype="none"/>
                          <Cell col="13" edittype="expr:UPDATE_POSBL_AT == '1' ? 'normal' : 'none'" cssclass="Cellgrd_WF_AlignLeft" text="bind:WNRD_ADRES" editdisplay="expr:UPDATE_POSBL_AT == '1' ? 'display' : 'edit'"/>
                          <Cell col="14" edittype="expr:UPDATE_POSBL_AT == '1' ? 'normal' : 'none'" text="bind:WNRD_CTTPC" editdisplay="expr:UPDATE_POSBL_AT == '1' ? 'display' : 'edit'"/>
                          <Cell col="15" text="bind:VRSC_DEPT_NM"/>
                          <Cell col="16" text="bind:VRSC_CLSF_NM"/>
                          <Cell col="17" text="bind:VRSC_EMPNO"/>
                          <Cell col="18" text="bind:VRSC_EMPNM" expandshow="expr: UPDATE_POSBL_AT == '1' ? 'show' : 'hide'"/>
                        </Band>
                      </Format>
                    </Formats>
                  </Grid>
                  <Static id="Static44" taborder="3" text="5" visible="false" left="1" top="0" right="13" height="5" style="background:#dc143c3c;align:center middle;"/>
                  <Static id="sta_entrpsAcctoCntrctDtls" taborder="4" text="휴직현황" cssclass="sta_WF_Title02" left="0" top="5" width="120" height="19"/>
                  <Static id="Static45" taborder="5" text="5" visible="false" left="1" top="23" right="13" height="5" style="background:#dc143c3c;align:center middle;"/>
                </Layout>
              </Layouts>
            </Tabpage>
            <Tabpage id="tpg2" text="복직현황">
              <Layouts>
                <Layout>
                  <Grid id="grd_tap2" taborder="0" binddataset="ds_tap2" autoenter="select" useinputpanel="false" left="0" top="28" right="0" bottom="0" oncellclick="Tab_tpg2_grd_tap2_oncellclick">
                    <Formats>
                      <Format id="default">
                        <Columns>
                          <Column size="40"/>
                          <Column size="40"/>
                          <Column size="80"/>
                          <Column size="80"/>
                          <Column size="120"/>
                          <Column size="100"/>
                          <Column size="80"/>
                          <Column size="80"/>
                          <Column size="110"/>
                          <Column size="110"/>
                          <Column size="300"/>
                          <Column size="80"/>
                          <Column size="110"/>
                          <Column size="110"/>
                          <Column size="300"/>
                          <Column size="100"/>
                        </Columns>
                        <Rows>
                          <Row size="24" band="head"/>
                          <Row size="24" band="head"/>
                          <Row size="24"/>
                        </Rows>
                        <Band id="head">
                          <Cell rowspan="2" text="순번"/>
                          <Cell col="1" rowspan="2" text="발령&#13;&#10;여부"/>
                          <Cell col="2" rowspan="2" text="결재상태"/>
                          <Cell col="3" rowspan="2" text="휴직구분"/>
                          <Cell col="4" colspan="4" text="신청자"/>
                          <Cell col="8" colspan="2" text="기간"/>
                          <Cell col="10" rowspan="2" text="사유"/>
                          <Cell col="11" colspan="2" text="영유아"/>
                          <Cell col="13" rowspan="2" text="복직예정일"/>
                          <Cell col="14" rowspan="2" text="주소"/>
                          <Cell col="15" rowspan="2" text="연락처"/>
                          <Cell row="1" col="4" text="부서"/>
                          <Cell row="1" col="5" text="직급"/>
                          <Cell row="1" col="6" text="사번"/>
                          <Cell row="1" col="7" text="성명"/>
                          <Cell row="1" col="8" text="시작일자"/>
                          <Cell row="1" col="9" text="종료일자"/>
                          <Cell row="1" col="11" text="성명"/>
                          <Cell row="1" col="12" text="출생일자"/>
                        </Band>
                        <Band id="body">
                          <Cell text="expr:currow + 1"/>
                          <Cell col="1" displaytype="checkbox" text="bind:GNFD_AT"/>
                          <Cell col="2" displaytype="image" text="expr:comp.parent.parent.parent.fn_get_imgUrl(SANCTN_STS)"/>
                          <Cell col="3" displaytype="combo" text="bind:LAYOFF_SE" combodataset="ds_hrm089" combocodecol="CODE" combodatacol="CODE_NM"/>
                          <Cell col="4" text="bind:DEPT_NM"/>
                          <Cell col="5" text="bind:CLSF_NM"/>
                          <Cell col="6" text="bind:EMPNO"/>
                          <Cell col="7" text="bind:EMPNM"/>
                          <Cell col="8" displaytype="date" style="align:center middle;" text="bind:LAYOFF_BGNDE" calendardisplaynulltype="none"/>
                          <Cell col="9" displaytype="date" style="align:center middle;" text="bind:LAYOFF_ENDDE" calendardisplaynulltype="none"/>
                          <Cell col="10" cssclass="Cellgrd_WF_AlignLeft" text="bind:LAYOFF_PRVONSH"/>
                          <Cell col="11" text="bind:INFANT_NM"/>
                          <Cell col="12" displaytype="date" text="bind:INFANT_BRTHDY" calendardisplaynulltype="none"/>
                          <Cell col="13" displaytype="date" edittype="expr:UPDATE_POSBL_AT == '1' ? 'date' : 'none'" style="align:center middle;" text="bind:REINSAT_PRARNDE" calendardisplay="expr:UPDATE_POSBL_AT == '1' ? 'display' : 'edit'" calendardisplaynulltype="none"/>
                          <Cell col="14" cssclass="Cellgrd_WF_AlignLeft" text="bind:WNRD_ADRES"/>
                          <Cell col="15" text="bind:WNRD_CTTPC"/>
                        </Band>
                      </Format>
                    </Formats>
                  </Grid>
                  <Static id="Static44" taborder="1" text="5" visible="false" left="1" top="0" right="13" height="5" style="background:#dc143c3c;align:center middle;"/>
                  <Static id="sta_entrpsAcctoCntrctDtls" taborder="2" text="복직현황" cssclass="sta_WF_Title02" left="0" top="5" width="120" height="19"/>
                  <Static id="Static45" taborder="3" text="5" visible="false" left="1" top="23" right="13" height="5" style="background:#dc143c3c;align:center middle;"/>
                </Layout>
              </Layouts>
            </Tabpage>
          </Tabpages>
        </Tab>
      </Layout>
    </Layouts>
    <Objects>
      <Dataset id="ds_validation" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="compId" type="STRING" size="256"/>
          <Column id="colId" type="STRING" size="256"/>
          <Column id="PK" type="STRING" size="256"/>
          <Column id="notNull" type="STRING" size="256"/>
          <Column id="type" type="STRING" size="256"/>
          <Column id="nlength" type="STRING" size="256"/>
          <Column id="from" type="STRING" size="256"/>
          <Column id="to" type="STRING" size="256"/>
          <Column id="lengthChkGb" type="STRING" size="256"/>
          <Column id="msgId" type="STRING" size="256"/>
          <Column id="expr" type="STRING" size="256"/>
          <Column id="func" type="STRING" size="256"/>
        </ColumnInfo>
        <Rows>
          <Row>
            <Col id="colId">BGN_DE</Col>
            <Col id="compId">ds_cond</Col>
            <Col id="notNull">Y</Col>
            <Col id="msgId">조회시작일자</Col>
          </Row>
          <Row>
            <Col id="colId">END_DE</Col>
            <Col id="compId">ds_cond</Col>
            <Col id="notNull">Y</Col>
            <Col id="msgId">조회종료일자</Col>
          </Row>
          <Row>
            <Col id="colId">END_DE</Col>
            <Col id="compId">ds_cond</Col>
            <Col id="from">BGN_DE</Col>
            <Col id="msgId">조회종료일자^조회시작일자</Col>
          </Row>
          <Row>
            <Col id="compId">ds_tap1</Col>
            <Col id="colId">LAYOFF_SE</Col>
            <Col id="notNull">Y</Col>
            <Col id="msgId">휴직구분</Col>
          </Row>
          <Row>
            <Col id="compId">ds_tap1</Col>
            <Col id="colId">EMPNO</Col>
            <Col id="notNull">Y</Col>
            <Col id="msgId">신청자</Col>
          </Row>
          <Row>
            <Col id="compId">ds_tap1</Col>
            <Col id="colId">LAYOFF_BGNDE</Col>
            <Col id="msgId">휴직시작일</Col>
            <Col id="notNull">Y</Col>
          </Row>
          <Row>
            <Col id="compId">ds_tap1</Col>
            <Col id="colId">LAYOFF_ENDDE</Col>
            <Col id="msgId">휴직종료일</Col>
            <Col id="notNull">Y</Col>
          </Row>
          <Row>
            <Col id="compId">ds_tap1</Col>
            <Col id="colId">LAYOFF_ENDDE</Col>
            <Col id="msgId">휴직시작일^휴직종료일</Col>
            <Col id="from">LAYOFF_BGNDE</Col>
          </Row>
          <Row>
            <Col id="compId">ds_tap1</Col>
            <Col id="colId">LAYOFF_PRVONSH</Col>
            <Col id="msgId">휴직사유</Col>
            <Col id="notNull">Y</Col>
          </Row>
          <Row>
            <Col id="colId">WNRD_ADRES</Col>
            <Col id="compId">ds_tap1</Col>
            <Col id="msgId">주소</Col>
            <Col id="notNull">Y</Col>
          </Row>
          <Row>
            <Col id="colId">WNRD_CTTPC</Col>
            <Col id="compId">ds_tap1</Col>
            <Col id="msgId">연락처</Col>
            <Col id="notNull">Y</Col>
          </Row>
          <Row>
            <Col id="colId">VRSC_EMPNO</Col>
            <Col id="compId">ds_tap1</Col>
            <Col id="msgId">대행자</Col>
            <Col id="notNull">Y</Col>
          </Row>
          <Row>
            <Col id="colId">REINSAT_PRARNDE</Col>
            <Col id="compId">ds_tap2</Col>
            <Col id="notNull">Y</Col>
            <Col id="msgId">복직예정일</Col>
          </Row>
        </Rows>
      </Dataset>
      <Dataset id="ds_tap1" oncolumnchanged="ds_tap1_oncolumnchanged" useclientlayout="true">
        <ColumnInfo>
          <Column id="LAYOFF_SN" type="STRING" size="256" description="휴직순번"/>
          <Column id="DEPT_NM" type="STRING" size="256" description="부서"/>
          <Column id="CLSF_NM" type="STRING" size="256" description="직급"/>
          <Column id="EMPNO" type="STRING" size="256" description="사번"/>
          <Column id="EMPNM" type="STRING" size="256" description="성명"/>
          <Column id="BRTHDY" type="STRING" size="256" description="생년월일"/>
          <Column id="SANCTN_NO" type="STRING" size="256" description="결재번호"/>
          <Column id="SANCTN_STS" type="STRING" size="256" description="결재상태"/>
          <Column id="GNFD_AT" type="STRING" size="256" description="발령여부"/>
          <Column id="LAYOFF_SE" type="STRING" size="256" description="휴직구분"/>
          <Column id="LAYOFF_BGNDE" type="STRING" size="256" description="휴직시작일"/>
          <Column id="LAYOFF_ENDDE" type="STRING" size="256" description="휴직종료일"/>
          <Column id="LAYOFF_PRVONSH" type="STRING" size="256" description="휴직사유"/>
          <Column id="INFANT_SN" type="STRING" size="256" description="영유아순번"/>
          <Column id="INFANT_NM" type="STRING" size="256" description="영유아이름"/>
          <Column id="INFANT_BRTHDY" type="STRING" size="256" description="영유아생년월일"/>
          <Column id="VRSC_DEPT_NM" type="STRING" size="256" description="대행자부서"/>
          <Column id="VRSC_CLSF_NM" type="STRING" size="256" description="대행자직급"/>
          <Column id="VRSC_EMPNO" type="STRING" size="256" description="대행자사번"/>
          <Column id="VRSC_EMPNM" type="STRING" size="256" description="대행자성명"/>
          <Column id="WNRD_ADRES" type="STRING" size="256" description="기간내_주소"/>
          <Column id="WNRD_CTTPC" type="STRING" size="256" description="기간내_연락처"/>
          <Column id="REGISTER_ID" type="STRING" size="256" description="등록자ID"/>
          <Column id="REGIST_DT" type="STRING" size="256" description="등록일시"/>
          <Column id="UPDATE_POSBL_AT" type="STRING" size="256" description="수정가능여부"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_tap2" useclientlayout="true">
        <ColumnInfo>
          <Column id="REINSAT_SN" type="STRING" size="256" description="복직순번"/>
          <Column id="LAYOFF_SN" type="STRING" size="256" description="휴직순번"/>
          <Column id="SANCTN_NO" type="STRING" size="256" description="결재번호"/>
          <Column id="SANCTN_STS" type="STRING" size="256" description="결재상태"/>
          <Column id="GNFD_AT" type="STRING" size="256" description="발령여부"/>
          <Column id="LAYOFF_SE" type="STRING" size="256" description="휴직구분"/>
          <Column id="DEPT_NM" type="STRING" size="256" description="부서"/>
          <Column id="CLSF_NM" type="STRING" size="256" description="직급"/>
          <Column id="EMPNO" type="STRING" size="256" description="사번"/>
          <Column id="EMPNM" type="STRING" size="256" description="성명"/>
          <Column id="BRTHDY" type="STRING" size="256" description="생년월일"/>
          <Column id="LAYOFF_BGNDE" type="STRING" size="256" description="휴직시작일"/>
          <Column id="LAYOFF_ENDDE" type="STRING" size="256" description="휴직종료일"/>
          <Column id="LAYOFF_PRVONSH" type="STRING" size="256" description="휴직사유"/>
          <Column id="INFANT_NM" type="STRING" size="256" description="영유아이름"/>
          <Column id="INFANT_BRTHDY" type="STRING" size="256" description="영유아생년월일"/>
          <Column id="WNRD_ADRES" type="STRING" size="256" description="기간내_주소"/>
          <Column id="WNRD_CTTPC" type="STRING" size="256" description="기간내_연락처"/>
          <Column id="REINSAT_PRARNDE" type="STRING" size="256" description="복직예정일"/>
          <Column id="REGISTER_ID" type="STRING" size="256" description="등록자ID"/>
          <Column id="REGIST_DT" type="STRING" size="256" description="등록일시"/>
          <Column id="UPDATE_POSBL_AT" type="STRING" size="256" description="수정가능여부"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_cond" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="BGN_DE" type="STRING" size="256"/>
          <Column id="END_DE" type="STRING" size="256"/>
          <Column id="SE" type="STRING" size="256"/>
          <Column id="DEPT_CODE" type="STRING" size="256"/>
          <Column id="DEPT_NM" type="STRING" size="256"/>
          <Column id="EMPNO" type="STRING" size="256"/>
          <Column id="EMPNM" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_hrm089_s" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="GRP_CODE_SN" type="bigdecimal" size="16"/>
          <Column id="CODE_CN" type="string" size="32"/>
          <Column id="CODE_ORDR" type="bigdecimal" size="16"/>
          <Column id="USE_AT" type="string" size="32"/>
          <Column id="CODE_NM" type="string" size="32"/>
          <Column id="GRP_CODE" type="string" size="32"/>
          <Column id="CODE" type="string" size="32"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_hrm089" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="GRP_CODE_SN" type="bigdecimal" size="16"/>
          <Column id="CODE_CN" type="string" size="32"/>
          <Column id="CODE_ORDR" type="bigdecimal" size="16"/>
          <Column id="USE_AT" type="string" size="32"/>
          <Column id="CODE_NM" type="string" size="32"/>
          <Column id="GRP_CODE" type="string" size="32"/>
          <Column id="CODE" type="string" size="32"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_empnoInfo" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="EMPNO" type="STRING" size="256"/>
          <Column id="EMPNM" type="STRING" size="256"/>
          <Column id="DEPT_CODE" type="STRING" size="256"/>
          <Column id="DEPT_NM" type="STRING" size="256"/>
          <Column id="JSSFC_SE" type="STRING" size="256"/>
          <Column id="JSSFC_NM" type="STRING" size="256"/>
          <Column id="HR_CLSF_SE" type="STRING" size="256"/>
          <Column id="HR_CLSF_NM" type="STRING" size="256"/>
          <Column id="OFCPS_SE" type="STRING" size="256"/>
          <Column id="OFCPS_NM" type="STRING" size="256"/>
          <Column id="ADDRESS" type="STRING" size="256"/>
          <Column id="TELNO" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_cond_hr" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="false" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="EMPNO" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
    </Objects>
    <Bind>
      <BindItem id="item4" compid="div_search.cal_BGNDT1" propid="value" datasetid="ds_cond" columnid="BGN_DE"/>
      <BindItem id="item0" compid="div_search.cal_BGNDT2" propid="value" datasetid="ds_cond" columnid="END_DE"/>
      <BindItem id="item2" compid="div_search.cmb_DCLZ_SE" propid="value" datasetid="ds_cond" columnid="SE"/>
    </Bind>
    <Script type="xscript5.0"><![CDATA[/***********************************************************************
 * 화면ID   : HRM070113
 * 화면명   : 휴직신청
 * 화면설명 : 휴직신청을 관리한다.
 * 작성일   : 2015.12.04
 * 작성자   : 김형태
 * 수정이력 : 
 ***********************************************************************
 *     수정일     수정자   내용
 ***********************************************************************
 *    
 ***********************************************************************
 */

/***********************************************************************
 * Script Include 
 ***********************************************************************/
// 시스템 공통 라이브러리 Include
include "lib::comInclude.xjs";
include "mis_lib::misUtil.xjs";

/**********************************************************************
* 화면 변수 선언부
***********************************************************************/
this.isAuth = false;
/**********************************************************************
* onInit / onLoad 영역
***********************************************************************/

this.HRM070113_oninit = function(obj:Form, e:nexacro.InitEventInfo)
{
	// ..
}

this.HRM070113_onload = function(obj:Form, e:nexacro.LoadEventInfo)
{	
	// Form 초기화
	this.fn_init_form();

	// DataSet 초기화
	this.fn_init_dataset();
	
	this.fn_loadCombo();
}



/**********************************************************************
* Form/Dataset 오브젝트 초기화
***********************************************************************/
/*
 * 함수명  	: initForm
 * 설명 		: Form을 초기화한다.
 * params  		: None
 * return Type 	: None
 * 사용법		: this.init_Form();
 */
this.fn_init_form = function()
{
	this.gfn_initForm(this);	// 시스템 공통으로 Form을 Initialize 한다.
	this.fn_misFormInit(this);
	
	/* 권한 해제 요청 */
	if(this.gfn_authGrpId("HRM_ADMIN") != -1 || this.gfn_authGrpId("HRM_SRVIC") != -1) {// 이때는 담당자 플래그 true로 바꿔서 권한분리 부탁드립니다.
		this.isAuth = true;
	}else {
		this.isAuth = false;
	}
	
	// 검색조건 영역 바인딩
	this.div_search.div_DeptComp.fn_setBind("ds_cond","DEPT_CODE","DEPT_NM");
	this.div_search.div_DeptComp.fn_setReadonly(true);
	this.div_search.div_DeptComp.div_Search.btn_dept.set_visible(false);
	this.div_search.div_DeptComp.fn_setCssclass("edt_WF_Readonly");
	
	this.div_search.div_EMP.fn_setBind("ds_cond","EMPNO","EMPNM");
	this.div_search.div_EMP.div_sear.edt_emplnm.set_readonly(true);
	this.div_search.div_EMP.div_sear.edt_empno.set_readonly(true);
	this.div_search.div_EMP.div_sear.edt_emplnm.set_cssclass("edt_WF_Readonly");
	this.div_search.div_EMP.div_sear.edt_empno.set_cssclass("edt_WF_Readonly");
	this.div_search.div_EMP.div_sear.search.set_visible(false);
	this.div_search.div_EMP.fn_set_deptCode(this.gfn_getDeptId());
	
	// 인사 담당자일 경우
	if(this.isAuth) {
		this.div_search.div_DeptComp.fn_setReadonly(false);
		this.div_search.div_DeptComp.div_Search.btn_dept.set_visible(true);
		this.div_search.div_DeptComp.fn_setCssclass("");
		this.div_search.div_EMP.div_sear.edt_emplnm.set_readonly(false);
		this.div_search.div_EMP.div_sear.edt_empno.set_readonly(false);
		this.div_search.div_EMP.div_sear.search.set_visible(true);
		this.div_search.div_EMP.div_sear.edt_emplnm.set_cssclass("");
		this.div_search.div_EMP.div_sear.edt_empno.set_cssclass("");
	}
}


/*
 * 함수명  	: initDataset
 * 설명 		: Dataset을 초기화한다
 * params  		: None
 * return Type 	: None
 * 사용법		: this.initDataset();
 */
this.fn_init_dataset = function()
{
	// 조건 Dataset 외에 초기화가 필요한 Dataset에 대한 초기화 코드를 추가
	this.gfn_initCondDs(this, this.div_search);
}


/*
 * 함수명  	: fn_loadCombo
 * 설명 		: 화면의 Combo 에 데이터를 불러온다.
 * params  		: None
 * return Type 	: None
 * 사용법		: this.fn_loadCombo();
 */
this.fn_loadCombo = function ()
{
	/*******************************************************************************
	 * params  		: 1. param_1    : 반환받을 DATASET 명 			(예: DS_AREA_NO_CODE)
					  2. param_2	: 그룹코드						(예 : COM007)
					  3. param_3	: 사용여부		    			(예 : A(전체), Y(사용), N(사용안함))
					  4. param_4	: 콤보박스INDEX(0) 표시		(예 : A(전체), S(선택), E(공백), D(첫번째데이터부터시작) )
					  5. param_5	: 코드+코드명					(예 : G(코드명), B(코드-코드명) )
	 ******************************************************************************/
	var comboParams = [
		["ds_hrm089", "HRM089", "Y", "D", "B"]	// 근무상황구분
		,["ds_hrm089_s", "HRM089", "Y", "A", "B"]	// 근무상황구분_검색
	];
	this.gfn_comboLoad(comboParams, this.fn_callbackAfter());
}

/*
 * 함수명  	: fn_callbackAfter
 * 설명 		: 공통 callback
 * params  		: None
 * return Type 	: None
 * 사용법		: this.fn_callbackAfter();
 */
this.fn_callbackAfter = function ()
{
	this.ds_cond.clearData();
	this.ds_cond.addRow();
	this.ds_cond.setColumn(0, "BGN_DE", this.StartDate());
	this.ds_cond.setColumn(0, "END_DE", this.gfn_today());
	
	// 인사 담당자가 아닐 경우
	if(!this.isAuth) {
		this.ds_cond.setColumn(0, "DEPT_CODE", this.gfn_getDeptId());
		this.ds_cond.setColumn(0, "DEPT_NM", this.gfn_getDeptName());
		this.ds_cond.setColumn(0, "EMPNO", this.gfn_getEmpNo());
		this.ds_cond.setColumn(0, "EMPNM", this.gfn_getUserName());
	}
	
	this.fn_search();
}

/**********************************************************************
* Transaction 영역 시작
***********************************************************************
*
* 1. Transaction 관련 이벤트 핸들러
* 2. call Transaction 영역
* 3. callback 영역(Transaction, Popup)
* 
***********************************************************************/



/**********************************************************************
* Transaction 관련 이벤트 핸들러 
***********************************************************************/


/*
 * 함수명  	: fn_search
 * 설명 		: 조회 이벤트 처리(휴직신청)
 * params  		: None
 * return Type 	: None
 * 사용법		: this.fn_search();
 */
this.fn_search = function()
{
	// validation 체크(휴직신청)
	if(!this.gfn_checkValidation_NoUpdChk(this.ds_cond, this.ds_validation)) {
		return;
	}
	
	this.ds_tap1.clearData();
	this.ds_tap2.clearData();
	
	this.fn_transaction("selectLayOffList");
}


/*
 * 함수명  	: fn_save
 * 설명 		: 저장 이벤트 처리
 * params  		: None
 * return Type 	: None
 * 사용법		: this.fn_save();
 */
this.fn_save = function()
{
	// 데이터셋 수정 여부체크
	if (!this.comUtils.isDatasetUpdated(this.ds_tap1) && !this.comUtils.isDatasetUpdated(this.ds_tap2)) {
		this.gfn_message("comm.데이터.변경.없음");
		return false;
	}
	
	// validation 체크
	if(!this.gfn_checkValidation_NoUpdChk(this.ds_tap1, this.ds_validation)) {
		return;
	}
	
	// 수동 validation 체크
	var rowCnt = this.ds_tap1.rowcount;
	var i = 0;
	for(i; i<rowCnt; i++){
		var rowType = this.ds_tap1.getRowType(i);
		
		if(rowType == Dataset.ROWTYPE_INSERT || rowType == Dataset.ROWTYPE_UPDATE){
			if(!this.fn_selfValidation(i)){
				this.gfn_message("comm.항목.입력.을", "["+(i+1)+"]행 영유아");
				return false;
			}
		}
	}
	
	if(this.gfn_message("confirm.저장.여부"))	{
		this.fn_transaction("saveLayOffCUD");
	}
}

/***********************************************************************************
* 설명	: 결재
***********************************************************************************/
this.fn_sanction = function()
{
	if(this.Tab.tabindex == 0){
	// 휴직현황 탭일때,
		
		var rPos = this.ds_tap1.rowposition;
		
		// 결재 전 유효성 체크
		if(this.comUtils.isDatasetUpdated(this.ds_tap1)) {
			this.gfn_message("comm.정보.저장.요청", "휴직현황");
			return;
		}
		if(rPos < 0) {
			this.gfn_message("info.선택데이터.없음.선택.요청");
			return;
		}
		
		var SANCTN_STS = this.ds_tap1.getColumn(rPos, "SANCTN_STS");
		
		if(SANCTN_STS == "1" || SANCTN_STS == "5"){
			this.gfn_message("info.처리불가", "결재상태가 기안 또는 완료일 경우 진행할 수 없습니다.");
			return;
		}
		
		// 휴직사유
		var PRVONSH = "";
		
		if(this.ds_tap1.getColumn(rPos, "LAYOFF_SE") == "003"){
		// 육아휴직일 경우
			var name = this.ds_tap1.getColumn(rPos, "INFANT_NM");
			var btd  = this.dateUtils.format(this.ds_tap1.getColumn(rPos, "INFANT_BRTHDY"), "yyyy. mm. dd");
			
			PRVONSH = this.ds_tap1.getColumn(rPos, "LAYOFF_PRVONSH") + "\\r\\n" +"자녀 (성명: " + name + ", 생년월일: " + btd + ")";
			
		} else {
			PRVONSH = this.ds_tap1.getColumn(rPos, "LAYOFF_PRVONSH");
		}
		
		// 대행자정보
		var vrscDeptNm = this.ds_tap1.getColumn(rPos, "VRSC_DEPT_NM");
		var vrscClsfNm = this.ds_tap1.getColumn(rPos, "VRSC_CLSF_NM");
		var vrscEmpnm  = this.ds_tap1.getColumn(rPos, "VRSC_EMPNM");
		
		vrscDeptNm = vrscDeptNm ? vrscDeptNm : '';
		vrscClsfNm = vrscClsfNm ? vrscClsfNm : '';
		vrscEmpnm  = vrscEmpnm  ? vrscEmpnm  : '';
		
		var VRSC = "소속: " + vrscDeptNm + ", 직급: " + vrscClsfNm + ", 성명: " + vrscEmpnm;
		
		// 결재상신 데이터 셋팅
		var arrSancData = new Array();
		
		arrSancData[0]  = "휴직신청";                                                                         // 결재제목
		arrSancData[1]  = this.ds_tap1.getColumn(rPos, "DEPT_NM");                                             // 소속
		arrSancData[2]  = this.ds_tap1.getColumn(rPos, "CLSF_NM");                                             // 직급
		arrSancData[3]  = this.ds_tap1.getColumn(rPos, "EMPNM");                                               // 성명
		arrSancData[4]  = this.dateUtils.format(this.ds_tap1.getColumn(rPos, "BRTHDY"), "yyyy. mm. dd");       // 생년월일
		arrSancData[5]  = this.dateUtils.format(this.ds_tap1.getColumn(rPos, "LAYOFF_BGNDE"), "yyyy. mm. dd"); // 휴직시작일
		arrSancData[6]  = this.dateUtils.format(this.ds_tap1.getColumn(rPos, "LAYOFF_ENDDE"), "yyyy. mm. dd"); // 휴직종료일
		arrSancData[7]  = PRVONSH;                                                                             // 휴직사유
		arrSancData[8]  = this.ds_tap1.getColumn(rPos, "WNRD_ADRES");                                          // 주소
		arrSancData[9]  = this.ds_tap1.getColumn(rPos, "WNRD_CTTPC");                                          // 연락처
		arrSancData[10] = VRSC;                                                                                // 업무대행자
		arrSancData[11] = null;                                                                                // 첨부서류
		
		this.fn_callHandySanc2(
		     this
		    ,'0000000052'          // formId
		    ,this.ds_tap1          // mis데이터셋
		    ,"TBHRM_LAYOFF"        // 갱신테이블명
		    ,["EMPNO","LAYOFF_SN"] // 테이블키배열
		    ,arrSancData           // 갑지데이터배열
		    ,null                  // 을지데이터배열
		    ,null                  // 다중체크대상
		    ,null                  // 갱신대상컬럼
		);
	}
	
	if(this.Tab.tabindex == 1){
	// 복직현황 탭일때,
		
		var rPos = this.ds_tap2.rowposition;
		
		// 결재 전 유효성 체크
		if(this.comUtils.isDatasetUpdated(this.ds_tap2)) {
			this.gfn_message("comm.정보.저장.요청", "복직현황");
			return;
		}
		if(rPos < 0) {
			this.gfn_message("info.선택데이터.없음.선택.요청");
			return;
		}
		
		var SANCTN_STS = this.ds_tap2.getColumn(rPos, "SANCTN_STS");
		var REDATE = this.ds_tap2.getColumn(rPos, "REINSAT_PRARNDE");
		
		if(this.comUtils.isNull(REDATE)){
			this.gfn_message("comm.항목.입력.을", "복직예정일");
			return;
		}
		
		if(SANCTN_STS == "1" || SANCTN_STS == "5"){
			this.gfn_message("info.처리불가", "결재상태가 기안 또는 완료일 경우 진행할 수 없습니다.");
			return;
		}
		
		// 휴직사유
		var PRVONSH = "";
		
		if(this.ds_tap2.getColumn(rPos, "LAYOFF_SE") == "003"){
		// 육아휴직일 경우
			var name = this.ds_tap2.getColumn(rPos, "INFANT_NM");
			var btd  = this.dateUtils.format(this.ds_tap2.getColumn(rPos, "INFANT_BRTHDY"), "yyyy. mm. dd");
			
			name = name ? name : '';
			btd  = btd  ? btd  : '';
			
			PRVONSH = this.ds_tap2.getColumn(rPos, "LAYOFF_PRVONSH") + "\\r\\n" +"자녀 (성명: " + name + ", 생년월일: " + btd + ")";
			
		} else {
			PRVONSH = this.ds_tap2.getColumn(rPos, "LAYOFF_PRVONSH");
		}
		
		// 결재상신 데이터 셋팅
		var arrSancData = new Array();
		
		arrSancData[0]  = "복직원";                                                                           		// 결재제목
		arrSancData[1]  = this.ds_tap2.getColumn(rPos, "DEPT_NM");                                             		// 소속
		arrSancData[2]  = this.ds_tap2.getColumn(rPos, "CLSF_NM");                                             		// 직급
		arrSancData[3]  = this.ds_tap2.getColumn(rPos, "EMPNM");                                               		// 성명
		arrSancData[4]  = this.dateUtils.format(this.ds_tap2.getColumn(rPos, "BRTHDY"), "yyyy. mm. dd");       		// 생년월일
		arrSancData[5]  = this.dateUtils.format(this.ds_tap2.getColumn(rPos, "LAYOFF_BGNDE"), "yyyy. mm. dd"); 		// 휴직시작일
		arrSancData[6]  = this.dateUtils.format(this.ds_tap2.getColumn(rPos, "LAYOFF_ENDDE"), "yyyy. mm. dd"); 		// 휴직종료일
		arrSancData[7]  = PRVONSH;                                                                             		// 휴직사유
		arrSancData[8]  = this.dateUtils.format(this.ds_tap2.getColumn(rPos, "REINSAT_PRARNDE"), "yyyy. mm. dd"); 	// 복직예정일
		arrSancData[9]  = this.ds_tap2.getColumn(rPos, "WNRD_ADRES");                                             	// 주소
		arrSancData[10]  = this.ds_tap2.getColumn(rPos, "WNRD_CTTPC");                                             	// 연락처
		
		this.fn_callHandySanc2(
		     this
		    ,'0000000053'                       // formId
		    ,this.ds_tap2                       // mis데이터셋
		    ,"TBHRM_REINSAT"                    // 갱신테이블명
		    ,["EMPNO","LAYOFF_SN","REINSAT_SN"] // 테이블키배열
		    ,arrSancData                        // 갑지데이터배열
		    ,null                               // 을지데이터배열
		    ,null                               // 다중체크대상
		    ,null                               // 갱신대상컬럼
		);
	}
}


/**********************************************************************
* call Transaction 영역
***********************************************************************/

/*
 * 함수명  	: fn_transaction
 * 설명 		: Transaction 요청 처리 함수
 * params  		: strSvcId : 서비스요청 ID
 * return Type 	: None
 * 사용법		: this.fn_transaction("SELECT");
 */
this.fn_transaction = function(strSvcId)
{
	switch (strSvcId) {
		case "selectLayOffList":	// 휴직신청 정보 조회
			var sController   	= "/hsco/mis/hrm/HRM070113/selectLayOffList.do";
			var sInDatasets   	= "input1=ds_cond";
			var sOutDatasets  	= "ds_tap1=output1 ds_tap2=output2";
			break;
		case "saveLayOffCUD":		// 저장
			var sController   	= "/hsco/mis/hrm/HRM070113/saveLayOffCUD.do";
			var sInDatasets   	= "input1=ds_tap1:U input2=ds_tap2:U";
			var sOutDatasets  	= "";
			break;
		case "selectEmpnoInfo":		// 선택사원 인적사원 조회
			var sController   	= "/hsco/mis/hrm/HRM070113/selectEmpnoInfo.do";
			var sInDatasets   	= "input1=ds_cond_hr";
			var sOutDatasets  	= "ds_empnoInfo=output1";
			break;
	}

	Ex.core.tran(this, strSvcId, sController, sInDatasets, sOutDatasets); 
}



/**********************************************************************
* Transaction Callback 영역
***********************************************************************/

 /*
 * 함수명  	: fn_callBack
 * 설명 		: Transaction Callback 처리
 * params  		: strSvcId    : 서비스요청 ID
 *                nErrorCode  : 오류 메시지 코드 ([예] 0 : Success, 그밖의 경우, error)
 *                strErrorMsg : 오류 메시지([예]  success.insert|정상적으로 등록되었습니다.)
 * return Type 	: None
 * 사용법		: 
 */
 
this.fn_callBack = function (strSvcId, nErrorCode, strErrorMsg)
{
	if(nErrorCode != '0') {
		this.gfn_callback_message(strSvcId, nErrorCode, strErrorMsg);
	}

	if (nErrorCode == 0){
		switch (strSvcId) {
			case "selectLayOffList":	// 조회
				break;
			case "saveLayOffCUD":		// 저장
				this.gfn_message("success.처리.성공");
				this.fn_search();
				break;
			case "selectEmpnoInfo":		// 사원정보 조회
				if(this.ds_empnoInfo.rowcount > 0) {
					var empNm = this.ds_empnoInfo.getColumn(0, "EMPNM");
					var deptNm = this.ds_empnoInfo.getColumn(0, "DEPT_NM");
					var clsfNm = this.ds_empnoInfo.getColumn(0, "HR_CLSF_NM");
					var addr = this.ds_empnoInfo.getColumn(0, "ADDRESS");
					var telNo = this.ds_empnoInfo.getColumn(0, "TELNO");
					
					var row = this.ds_tap1.rowposition;
					
					if(this.colSe == "EMPNO"){
						// 신청자 항목일 경우
						this.ds_tap1.setColumn(row, "DEPT_NM", deptNm);
						this.ds_tap1.setColumn(row, "CLSF_NM", clsfNm);
						this.ds_tap1.setColumn(row, "EMPNM", empNm);
						this.ds_tap1.setColumn(row, "WNRD_ADRES", addr);
						this.ds_tap1.setColumn(row, "WNRD_CTTPC", telNo);
						
					} else if(this.colSe == "VRSC_EMPNO"){
						// 대행자 항목일 경우
						this.ds_tap1.setColumn(row, "VRSC_DEPT_NM", deptNm);
						this.ds_tap1.setColumn(row, "VRSC_CLSF_NM", clsfNm);
						this.ds_tap1.setColumn(row, "VRSC_EMPNM", empNm);
					}					
				}
				break;
		}
	}
}

/**********************************************************************
* Transaction 영역 끝
***********************************************************************/


/**********************************************************************
* non-Transaction 관련 컴포넌트 이벤트 처리 함수
***********************************************************************
*
* 1. Gird 관련 이벤트 처리
* 2. 공통함수 처리
* 
***********************************************************************/

/**********************************************************************
* 공통함수 처리
***********************************************************************/

 /*
 * 함수명  	: fn_insert
 * 설명 		: 신규 버튼 이벤트 처리(행추가)
 * params  		: Non
 * return Type 	: None
 * 사용법		: this.fn_insert();
 */
this.fn_insert = function()
{
	if(this.Tab.tabindex == 0){
		var nRow = this.ds_tap1.addRow();
		this.ds_tap1.setColumn(nRow, "UPDATE_POSBL_AT", "1");
		this.ds_tap1.setColumn(nRow, "GNFD_AT", "0");
		this.ds_tap1.setColumn(nRow, "SANCTN_STS", "0");
		this.ds_tap1.setColumn(nRow, "LAYOFF_SE", "001");
		this.ds_tap1.setColumn(nRow, "EMPNO", this.gfn_getEmpNo());
	} else {
		this.gfn_message("info.처리불가", "휴직현황만 신규등록이 가능합니다.");
	}
}


/*
 * 함수명  	: fn_delete
 * 설명 		: 삭제 버튼 이벤트 처리(행삭제)
 * params  		: None
 * return Type 	: None
 * 사용법		: this.fn_delete();
 */
this.fn_delete = function()
{	
	if(this.Tab.tabindex == 0){
	// 휴직현황 탭일때,
		
		var rowposition = this.ds_tap1.rowposition;
		
		if(rowposition > -1){
			var sanctnSts = this.ds_tap1.getColumn(rowposition, "SANCTN_STS");		// 결재상태
			var dcsnAt = this.ds_tap1.getColumn(rowposition, "GNFD_AT");			// 발령여부
			
			if(dcsnAt != "1")
			{
				// 결재상태 COM022 (0: 기안전 1:기안 2:반송 3:취소 4:중간결재 5:결재완료)
				// 결재상태가 기안전 외는 신규로 다시 진행.
				
				if(sanctnSts != "0") {
					this.gfn_message("fail.삭제.불가","결재가 진행된 건은");
				}
				else {
					if(this.gfn_message("confirm.삭제여부")){
						this.ds_tap1.deleteRow(rowposition);
					}
				}
				
			}else {
				this.gfn_message("fail.삭제.불가","발령여부가 완료된 건은");
			}
		}
	}
	
	if(this.Tab.tabindex == 1){
	// 복직현황 탭일때,
		
		var rowposition = this.ds_tap2.rowposition;
		
		if(rowposition > -1){
			var sanctnSts = this.ds_tap2.getColumn(rowposition, "SANCTN_STS");		// 결재상태
			var dcsnAt = this.ds_tap2.getColumn(rowposition, "GNFD_AT");			// 발령여부
			
			if(dcsnAt != "1")
			{
				// 결재상태 COM022 (0: 기안전 1:기안 2:반송 3:취소 4:중간결재 5:결재완료)
				// 결재상태가 기안전 외는 신규로 다시 진행.
				
				if(sanctnSts != "0") {
					this.gfn_message("fail.삭제.불가","결재가 진행된 건은");
				}
				else {
					if(this.gfn_message("confirm.삭제여부")){
						this.ds_tap2.deleteRow(rowposition);
					}
				}
				
			}else {
				this.gfn_message("fail.삭제.불가","발령여부가 완료된 건은");
			}
		}
	}
}


/*
 * 함수명  	: fn_cancel
 * 설명 		: 취소 버튼 이벤트 처리(Dataset 변경 내역 Reset)
 * params  		: None
 * return Type 	: None
 * 사용법		: this.fn_cancel();
 */
this.fn_cancel = function()
{
	if(this.Tab.tabindex == 0){
		if(!Ex.util.isUpdated(this.ds_tap1)){
			this.gfn_message("comm.내역.변경.없음");
			return false;
		}
		
		if (this.gfn_message("confirm.행위여부", "휴직현황을 복원")) {
			this.ds_tap1.reset();		//DATASET ROLLBACK
			this.ds_tap1.applyChange();	//DATASET COMMIT
			return;
		}
	}
	
	if(this.Tab.tabindex == 1){
		if(!Ex.util.isUpdated(this.ds_tap2)){
			this.gfn_message("comm.내역.변경.없음");
			return false;
		}
		
		if (this.gfn_message("confirm.행위여부", "복직현황을 복원")) {
			this.ds_tap2.reset();		//DATASET ROLLBACK
			this.ds_tap2.applyChange();	//DATASET COMMIT
			return;
		}
	}
}

/***********************************************************************
* 사용자 정의 함수
************************************************************************/
 /*
 * 함수명  	: StartDate
 * 설명 		: 한달 전 날짜 구하는 함수
 *                
 * params  		: None
 * return Type 	: None
 * 사용법		: this.StartDate();
 */
this.StartDate = function ()
{
	var sToday = "";
    var objDate = new Date();
    var sToday  = objDate.getFullYear() + "";
    var sMonth = objDate.getMonth();
    var sDate = objDate.getDate();
    
    if(sMonth.toString().length == 1){
		sMonth = "0" + sMonth;
    }
	if(sDate.toString().length == 1){
		sDate = "0" + sDate;
    }
    sToday = sToday+sMonth+sDate;
    
    return sToday;
}

/*
 * 함수명  	: fn_get_imgUrl
 * 설명 		: 전자결재종류 이미지 경로 리턴 함수
 * params  		: 대상 전자결재 상태
 * return Type 	: 전자결재 종류 이미지 경로
 * 사용법		: this.fn_get_imgUrl(sanctnSts)
 */
this.fn_get_imgUrl = function(sanctnSts)
{
	return this.gfn_getSanctnImgUrl(sanctnSts);
}

/*
 * 함수명  	: fn_selfValidation
 * 설명 		: 육아휴직에 대한 validation 체크
 * params  		: 대상 그리드 행번호
 * return Type 	: None
 * 사용법		: this.fn_selfValidation(rowposition)
 */
this.fn_selfValidation = function(nRow){
	var acode = this.ds_tap1.getColumn(nRow, "LAYOFF_SE");
	
	if(acode == "003"){
		var seq = this.ds_tap1.getColumn(nRow, "INFANT_SN");
		
		if(this.comUtils.isNull(seq)){
			return false;
		}
	}
	
	return true;
}

/*
 * 함수명  	: fn_popupCallBack
 * 설명 		: Popup Callback 처리
 * params  		: sPopupId    : 팝업 ID
 * sReturn      : 팝업 처리 결과(dataset.saveXML())
 * return Type 	: None
 * 사용법		: 
 */
this.fn_popupCallback = function(sPopupId, sReturn)
{
	var ds_Popup = new Dataset();
	var loadCnt = ds_Popup.loadXML(sReturn);
	var nRow    = this.ds_tap1.rowposition;
	
	if(loadCnt){
		if(sPopupId == "empPop1") {	// 휴직신청자 항목
			var EmpCode   = ds_Popup.getColumn(0, "EMPNO");
			
			this.ds_tap1.setColumn(nRow, "EMPNO", EmpCode);
		}
		
		if(sPopupId == "empPop2") {	// 업무대행자 항목
			var EmpCode   = ds_Popup.getColumn(0, "EMPNO");
			
			this.ds_tap1.setColumn(nRow, "VRSC_EMPNO", EmpCode);
		}
		
		if(sPopupId == "infantPop") {	// 영유아 항목
			var SEQ  = ds_Popup.getColumn(0, "SEQ");
			var NM   = ds_Popup.getColumn(0, "FAMILY_NM");
			var BTD  = ds_Popup.getColumn(0, "BRTHDY");
			
			this.ds_tap1.setColumn(nRow, "INFANT_SN", SEQ);
			this.ds_tap1.setColumn(nRow, "INFANT_NM", NM);
			this.ds_tap1.setColumn(nRow, "INFANT_BRTHDY", BTD);
		}
	}
}

/***********************************************************************
* 데이터셋 정의 함수
************************************************************************/
/*
 * 함수명  	: ds_tap1_oncolumnchanged
 * 설명 		: 휴직현황 컬럼 변경 후 이벤트 함수
 * params  		: 
 * return Type 	: 
 * 사용법		: this.ds_tap1_oncolumnchanged()
 */
this.ds_tap1_oncolumnchanged = function(obj:Dataset, e:nexacro.DSColChangeEventInfo)
{
	if(e.columnid == "EMPNO"){
		// 휴직대상자 항목 변경시
		if(obj.getColumn(e.row, "LAYOFF_SE") == "003"){
			// 휴직구분이 육아휴직일 경우, 영유아 항목 초기화
			obj.setColumn(e.row, "INFANT_SN", "");		// 자녀순번
			obj.setColumn(e.row, "INFANT_NM", "");		// 자녀이름
			obj.setColumn(e.row, "INFANT_BRTHDY", "");	// 자녀생년월일
		}
		
		this.colSe = "EMPNO";
		this.ds_cond_hr.clearData();
		this.ds_cond_hr.addRow();
		this.ds_cond_hr.setColumn(0, "EMPNO", e.newvalue);
		this.fn_transaction("selectEmpnoInfo");
	}
	
	if(e.columnid == "VRSC_EMPNO"){
		// 대행업무자 항목 변경시
		this.colSe = "VRSC_EMPNO";
		this.ds_cond_hr.clearData();
		this.ds_cond_hr.addRow();
		this.ds_cond_hr.setColumn(0, "EMPNO", e.newvalue);
		this.fn_transaction("selectEmpnoInfo");
	}
	
	if(e.columnid == "LAYOFF_SE"){
		// 휴직구분 항목 변경시 영유아 항목 초기화
		obj.setColumn(e.row, "INFANT_SN", "");		// 자녀순번
		obj.setColumn(e.row, "INFANT_NM", "");		// 자녀이름
		obj.setColumn(e.row, "INFANT_BRTHDY", "");	// 자녀생년월일
	}
}

/***********************************************************************
* 그리드 정의 함수
************************************************************************/

/*
 * 함수명  	: Tab_tpg1_grd_tap1_onexpandup
 * 설명 		: 그리드onexpandup 이벤트 처리
 * params  		: None
 * return Type 	: None
 * 사용법		: this.Tab_tpg1_grd_tap1_onexpandup();
 */
this.Tab_tpg1_grd_tap1_onexpandup = function(obj:Grid, e:nexacro.GridMouseEventInfo)
{
	if(e.col == 2){	// 전자결재 진행현황 보기 이벤트
 	   
		var nRow = this.ds_tap1.rowposition;
 	    var SANCTN_NO = this.ds_tap1.getColumn(nRow, "SANCTN_NO");
		var SANCTN_STS = this.ds_tap1.getColumn(nRow, "SANCTN_STS");		
		var REGIST_DT = this.ds_tap1.getColumn(nRow, "REGIST_DT");
		
		//if( this.comUtils.isNullEmpty(SANCTN_NO) || SANCTN_STS < 1 || SANCTN_STS == 'NUL' ){
		if( SANCTN_STS < 1 || SANCTN_STS == 'NUL' ){
			return;
		}
		
	    var parm = {
			arg_0 : this,  
			arg_1 : SANCTN_NO,  // 결재번호
			arg_2 : REGIST_DT
		};
		this.gfn_popup("COM010400_P01", 710, 580, "전자결재진행 현황", parm, "com::COM010400_P01.xfdl", "fn_popupCallback");
	}
	
	if(e.col == 7){
		// 신청자 항목
		var parm = {
			arg_0 : this  //==> 필수, 팝업을 호출하는 form을 참조할 수 있도록 팝업에 Argument로 넘겨준다. (반드시 기술해야 함.)
		};
		this.gfn_popup("empPop1", 400, 400, "휴직신청자선택팝업", parm, "com::empno_P01.xfdl", "fn_popupCallback", true);
	}
	
	if(e.col == 11){
		// 영유아 항목
		var parm = {
			arg_0 : this  //==> 필수, 팝업을 호출하는 form을 참조할 수 있도록 팝업에 Argument로 넘겨준다. (반드시 기술해야 함.)
		   ,arg_1 : this.ds_tap1.getColumn(this.ds_tap1.rowposition, "EMPNO")
		   ,arg_2 : this.ds_tap1.getColumn(this.ds_tap1.rowposition, "EMPNM")
			
		};
		this.gfn_popup("infantPop", 400, 400, "", parm, "mis_hrm::HRM070113_P1.xfdl", "fn_popupCallback", true);
	}
	
	if(e.col == 18){
		// 대행자 항목
		var parm = {
			arg_0 : this  //==> 필수, 팝업을 호출하는 form을 참조할 수 있도록 팝업에 Argument로 넘겨준다. (반드시 기술해야 함.)
		};
		this.gfn_popup("empPop2", 400, 400, "업무대행자선택팝업", parm, "com::empno_P01.xfdl", "fn_popupCallback", true);
	}
}


this.Tab_tpg2_grd_tap2_oncellclick = function(obj:Grid, e:nexacro.GridClickEventInfo)
{
	if(e.col == 2){	// 전자결재 진행현황 보기 이벤트
 	   
		var nRow = this.ds_tap2.rowposition;
 	    var SANCTN_NO = this.ds_tap2.getColumn(nRow, "SANCTN_NO");
		var SANCTN_STS = this.ds_tap2.getColumn(nRow, "SANCTN_STS");		
		var REGIST_DT = this.ds_tap2.getColumn(nRow, "REGIST_DT");
		
		//if( this.comUtils.isNullEmpty(SANCTN_NO) || SANCTN_STS < 1 || SANCTN_STS == 'NUL' ){
		if( SANCTN_STS < 1 || SANCTN_STS == 'NUL' ){
			return;
		}
		
	    var parm = {
			arg_0 : this,  
			arg_1 : SANCTN_NO,  // 결재번호
			arg_2 : REGIST_DT
		};
		this.gfn_popup("COM010400_P01", 710, 580, "전자결재진행 현황", parm, "com::COM010400_P01.xfdl", "fn_popupCallback");
	}
}
]]></Script>
  </Form>
</FDL>
