<?xml version="1.0" encoding="utf-8"?>
<FDL version="1.5">
  <TypeDefinition url="..\..\default_typedef.xml"/>
  <Form id="HRM080202_P1" classname="HRM080202_P1" left="0" top="0" width="1059" height="479" titletext="교육출장보고서 등록[상세]" oninit="HRM080202_P1_oninit" onload="HRM080202_P1_onload">
    <Layouts>
      <Layout>
        <Static id="Static00" taborder="25" cssclass="sta_WF_PopupBg" left="0" top="0" height="477" right="0"/>
        <Static id="Static01" taborder="26" text="교육출장보고상세" cssclass="sta_WF_PopupTitle" left="2" top="2" height="34" right="0"/>
        <Static id="Static05" taborder="27" text="15" visible="false" left="2" top="2" width="15" height="472" style="background:#1b3cd23c;align:center middle;"/>
        <Button id="Button00" taborder="28" cssclass="btn_WF_PopupClose" top="8" width="20" height="20" right="13" onclick="Button00_onclick"/>
        <Static id="Static02" taborder="29" text="15" visible="false" left="1042" top="2" height="473" style="background:#1b3cd23c;align:center middle;" width="15"/>
        <Static id="Static06" taborder="30" text="15" visible="false" left="2" top="36" width="1040" height="15" style="background:#dc143c3c;align:center middle;"/>
        <Static id="Static03" taborder="31" text="15" visible="false" left="2" top="459" width="1040" height="15" style="background:#dc143c3c;align:center middle;"/>
        <Button id="btn_close" taborder="2" text="종료" cssclass="btn_WF_CRUD" top="51" right="17" width="50" height="25" onclick="btn_close_onclick"/>
        <Button id="btn_save" taborder="0" text="저장" cssclass="btn_WF_CRUD" top="51" right="123" width="50" height="25" onclick="fn_save"/>
        <Button id="btn_sanction" taborder="1" text="결재" cssclass="btn_WF_CRUD" top="51" right="70" width="50" height="25" onclick="fn_sanction"/>
        <Static id="Static12" taborder="32" text="5" visible="false" left="17" top="76" width="1026" height="5" style="background:#dc143c3c;align:center middle;"/>
        <Static id="Static08" taborder="33" text="보고자" cssclass="sta_WF_Title02" left="18" top="81" width="74" height="21"/>
        <Static id="sta_WFDA_Label01" taborder="35" cssclass="sta_WF_Labelbg" left="146" top="102" width="350" height="27"/>
        <Static id="sta_WFDA_Label00" taborder="37" cssclass="sta_WF_Labelbg" left="630" top="102" width="412" height="27"/>
        <Edit id="edt_deptCode" taborder="5" readonly="true" left="637" top="105" width="81" height="21" cssclass="edt_WF_Readonly"/>
        <Static id="Static09" taborder="43" text="교육출장일자(시간)" cssclass="sta_WF_Title02" left="18" top="139" width="130" height="21"/>
        <Static id="Static10" taborder="44" text="10" visible="false" left="17" top="130" width="1026" height="10" style="background:#dc143c3c;align:center middle;"/>
        <Static id="sta_WFDA_Label05" taborder="48" cssclass="sta_WF_Labelbg" left="146" top="162" width="350" height="27"/>
        <Static id="sta_WFDA_Label07" taborder="50" cssclass="sta_WF_Labelbg" left="146" top="188" width="350" height="27"/>
        <Static id="sta_EMP01" taborder="45" text="시작일자 / 종료일자" cssclass="sta_WF_Label" left="17" top="162" width="130" height="27" style="align:left middle;font:9 Dotum;"/>
        <Static id="sta_EMP03" taborder="47" text="총 교육시간" cssclass="sta_WF_Label" left="17" top="188" width="130" height="27" style="align:left middle;font:9 Dotum;"/>
        <Static id="sta_EMP" taborder="34" text="사번 / 성명" cssclass="sta_WF_Label" top="102" width="130" height="27" style="font:9 Dotum;" left="17"/>
        <Static id="sta_EMP00" taborder="36" text="소속 / 직급" cssclass="sta_WF_Label" top="102" width="130" height="27" style="align:left middle;font:9 Dotum;" left="501"/>
        <Static id="Static11" taborder="51" text="10" visible="false" left="17" top="231" width="479" height="10" style="background:#dc143c3c;align:center middle;"/>
        <Static id="Static13" taborder="52" text="교육출장 내역" cssclass="sta_WF_Title02" left="18" top="241" width="130" height="21"/>
        <Static id="sta_WFDA_Label08" taborder="56" cssclass="sta_WF_Labelbg" left="146" top="314" width="350" height="27"/>
        <Static id="sta_WFDA_Label09" taborder="57" cssclass="sta_WF_Labelbg" left="146" top="262" width="350" height="27"/>
        <Static id="sta_WFDA_Label10" taborder="58" cssclass="sta_WF_Labelbg" left="146" top="288" width="350" height="27"/>
        <Static id="Static14" taborder="59" text="10" visible="false" left="17" top="351" width="1026" height="10" style="background:#dc143c3c;align:center middle;"/>
        <Static id="sta_EMP06" taborder="55" text="교육과정" cssclass="sta_WF_Label" left="17" top="314" width="130" height="27" style="align:left middle;font:9 Dotum;"/>
        <Static id="sta_EMP04" taborder="53" text="교육출장기관" cssclass="sta_WF_Label" left="17" top="262" width="130" height="27" style="align:left middle;font:9 Dotum;"/>
        <Static id="sta_EMP05" taborder="54" text="교육명" cssclass="sta_WF_Label" left="17" top="288" width="130" height="27" style="align:left middle;font:9 Dotum;"/>
        <Static id="Static15" taborder="60" text="교육소감" cssclass="sta_WF_Title02" left="510" top="139" width="74" height="21"/>
        <Static id="Static16" taborder="62" text="교육비지출 내역" cssclass="sta_WF_Title02" left="18" top="360" width="130" height="21"/>
        <Static id="sta_WFDA_Label12" taborder="65" cssclass="sta_WF_Labelbg" left="146" top="381" width="350" height="27"/>
        <Static id="sta_WFDA_Label13" taborder="66" cssclass="sta_WF_Labelbg" left="146" top="433" width="350" height="27"/>
        <Static id="sta_WFDA_Label14" taborder="68" cssclass="sta_WF_Labelbg" left="146" top="407" width="350" height="27"/>
        <Static id="sta_EMP09" taborder="67" text="계" cssclass="sta_WF_Label" left="17" top="433" width="130" height="27" style="align:left middle;font:9 Dotum;"/>
        <Static id="sta_EMP07" taborder="63" text="교육비" cssclass="sta_WF_Label" left="17" top="381" width="130" height="27" style="align:left middle;font:9 Dotum;"/>
        <Static id="sta_EMP08" taborder="64" text="교육여비" cssclass="sta_WF_Label" left="17" top="407" width="130" height="27" style="align:left middle;font:9 Dotum;"/>
        <Static id="Static17" taborder="69" text="건의사항" cssclass="sta_WF_Title02" left="510" top="258" width="74" height="21"/>
        <Calendar id="Calendar00" taborder="10" left="153" top="165" width="110" height="21" editformat="yyyy-MM-dd" cssclass="cal_WF_Essential" dateformat="yyyy-MM-dd" style="align:center middle;" value="null"/>
        <Calendar id="Calendar01" taborder="12" left="283" top="165" width="110" height="21" editformat="yyyy-MM-dd" dateformat="yyyy-MM-dd" value="null" cssclass="cal_WF_Essential" style="align:center middle;"/>
        <Edit id="edt_DEPT_NM02" taborder="14" left="424" top="165" width="36" height="21" cssclass="edt_WF_Readonly" readonly="true"/>
        <Edit id="edt_DEPT_NM04" taborder="16" left="153" top="265" width="316" height="21" cssclass="edt_WF_Essential" maxlength="25"/>
        <Edit id="edt_DEPT_NM05" taborder="18" left="304" top="291" width="165" height="21" cssclass="edt_WF_Essential"/>
        <Combo id="cmb_PROGRS_STTUSE_SE00" taborder="19" left="153" top="317" width="316" height="21" innerdataset="@ds_edcCrseSe" datacolumn="CODE_NM" codecolumn="CODE" cssclass="cmb_WF_Essential"/>
        <Combo id="cmb_PROGRS_STTUSE_SE01" taborder="17" left="153" top="291" width="143" height="21" innerdataset="@ds_edcSe" datacolumn="CODE_NM" codecolumn="CODE" index="-1" cssclass="cmb_WF_Essential"/>
        <Edit id="edt_deptNm" taborder="6" readonly="true" cssclass="edt_WF_Readonly" left="721" top="105" width="205" height="21"/>
        <Combo id="cmb_PROGRS_STTUSE_SE02" taborder="7" left="929" top="105" width="105" height="21" cssclass="cmb_WF_Readonly" innerdataset="@ds_clsfSe" datacolumn="CODE_NM" codecolumn="CODE" readonly="true"/>
        <MaskEdit id="edt_DEPT_NM06" taborder="21" left="154" top="384" width="151" height="21" mask="99,999,999,999"/>
        <MaskEdit id="edt_DEPT_NM07" taborder="22" left="154" top="410" width="151" height="21" mask="99,999,999,999"/>
        <MaskEdit id="edt_DEPT_NM08" taborder="23" left="154" top="436" width="151" height="21" mask="99,999,999,999" cssclass="msk_WF_Readonly" readonly="true"/>
        <Static id="sta_EMP10" taborder="71" text="총" left="408" top="162" width="10" height="27" style="align:left middle;font:9 Dotum;"/>
        <Static id="sta_EMP13" taborder="74" text="일" left="461" top="162" width="27" height="27" style="align:left middle;font:9 Dotum;"/>
        <Static id="Static04" taborder="75" text="~" left="268" top="167" width="14" height="16"/>
        <Grid id="grd_fileList" taborder="79" binddataset="ds_fileList1" useinputpanel="false" top="375" right="27" width="523" height="85" onheadclick="grd_fileList_onheadclick" autofittype="col" oncelldblclick="grd_fileList_oncelldblclick">
          <Formats>
            <Format id="default">
              <Columns>
                <Column size="40"/>
                <Column size="120"/>
                <Column size="66"/>
                <Column size="63"/>
              </Columns>
              <Rows>
                <Row size="24" band="head"/>
                <Row size="24"/>
              </Rows>
              <Band id="head">
                <Cell displaytype="checkbox"/>
                <Cell col="1" text="파일명"/>
                <Cell col="2" text="확장자"/>
                <Cell col="3" text="용량"/>
              </Band>
              <Band id="body">
                <Cell displaytype="checkbox" edittype="checkbox" text="bind:CHK"/>
                <Cell col="1" text="bind:ORGINL_FILE_NM"/>
                <Cell col="2" text="bind:FILE_EXTSN"/>
                <Cell col="3" text="bind:FILE_MG"/>
              </Band>
            </Format>
          </Formats>
        </Grid>
        <Button id="btn_uploadFiles" taborder="81" text="파일업로드" cssclass="btn_WF_Process" left="893" top="351" width="68" height="19" onclick="btn_uploadFiles_onclick"/>
        <Button id="btn_delFiles" taborder="82" text="파일삭제" cssclass="btn_WF_Process" left="964" top="350" width="67" height="21" onclick="btn_delFiles_onclick"/>
        <Static id="Static07" taborder="84" text="첨부파일" cssclass="sta_WF_Title02" left="510" top="354" width="74" height="21"/>
        <Static id="sta_DETAIL01" taborder="85" text="신청구분" cssclass="sta_WF_Title02" left="152" top="81" right="815" height="21" style="font:bold 9 Gulim;"/>
        <Radio id="rdo_CANCEL_SE" taborder="86" innerdataset="@DS_CANCEL_SE" codecolumn="CODE" datacolumn="CODE_NM" value="0" direction="vertical" onitemchanged="rdo_CANCEL_SE_onitemchanged" cssclass="rdo_WF_Readonly" left="224" top="84" width="110" height="16" onitemclick="rdo_CANCEL_SE_onitemclick"/>
        <Edit id="edt_EMPNM" taborder="88" readonly="true" cssclass="edt_WF_Readonly" left="298" top="105" width="192" height="21"/>
        <Edit id="edt_EMPNO" taborder="89" readonly="true" cssclass="edt_WF_Readonly" left="153" top="105" width="140" height="21"/>
        <Button id="btn_emp" taborder="90" cssclass="btn_WF_Search" left="271" top="104" bottom="354" width="21" visible="true" onclick="btn_emp_onclick"/>
        <Static id="sta_EMP11" taborder="93" text="시간" left="209" top="187" width="27" height="27" style="align:left middle;font:9 Dotum;"/>
        <MaskEdit id="edt_DEPT_NM01" taborder="97" mask="999" left="153" top="191" width="50" height="21" cssclass="mdt_WF_Essential" limitbymask="both"/>
        <TextArea id="TextArea00" taborder="98" left="48.06%" top="162" right="2.36%" height="89" maxlength="2000"/>
        <TextArea id="TextArea01" taborder="99" left="48.06%" top="279" right="2.36%" height="62" maxlength="2000"/>
      </Layout>
    </Layouts>
    <Bind>
      <BindItem id="item0" compid="edt_EMPNO" propid="value" datasetid="ds_edcBsrpReportPopup" columnid="REPORT_MAN_EMPNO"/>
      <BindItem id="item1" compid="edt_EMPNM" propid="value" datasetid="ds_edcBsrpReportPopup" columnid="REPORT_MAN_EMPNM"/>
      <BindItem id="item2" compid="edt_deptCode" propid="value" datasetid="ds_edcBsrpReportPopup" columnid="DEPT_CODE"/>
      <BindItem id="item9" compid="edt_DEPT_NM02" propid="value" datasetid="ds_edcBsrpReportPopup" columnid="EDC_BSRP_DAYCNT"/>
      <BindItem id="item11" compid="edt_DEPT_NM04" propid="value" datasetid="ds_edcBsrpReportPopup" columnid="EDC_BSRP_INSTT_NM"/>
      <BindItem id="item12" compid="edt_DEPT_NM05" propid="value" datasetid="ds_edcBsrpReportPopup" columnid="EDC_NM"/>
      <BindItem id="item13" compid="cmb_PROGRS_STTUSE_SE00" propid="value" datasetid="ds_edcBsrpReportPopup" columnid="EDC_CRSE_SE"/>
      <BindItem id="item14" compid="cmb_PROGRS_STTUSE_SE01" propid="value" datasetid="ds_edcBsrpReportPopup" columnid="EDC_SE"/>
      <BindItem id="item18" compid="Calendar00" propid="value" datasetid="ds_edcBsrpReportPopup" columnid="BGNDE"/>
      <BindItem id="item19" compid="Calendar01" propid="value" datasetid="ds_edcBsrpReportPopup" columnid="ENDDE"/>
      <BindItem id="item3" compid="edt_deptNm" propid="value" datasetid="ds_edcBsrpReportPopup" columnid="DEPT_NM"/>
      <BindItem id="item20" compid="cmb_PROGRS_STTUSE_SE02" propid="value" datasetid="ds_edcBsrpReportPopup" columnid="CLSF_SE"/>
      <BindItem id="item23" compid="edt_DEPT_NM06" propid="value" datasetid="ds_edcBsrpReportPopup" columnid="EDC_EXPS"/>
      <BindItem id="item24" compid="edt_DEPT_NM07" propid="value" datasetid="ds_edcBsrpReportPopup" columnid="EDC_TRVCT"/>
      <BindItem id="item25" compid="edt_DEPT_NM08" propid="value" datasetid="ds_edcBsrpReportPopup" columnid="EXPNDTR_SM"/>
      <BindItem id="item5" compid="edt_DEPT_NM01" propid="value" datasetid="ds_edcBsrpReportPopup" columnid="TIME"/>
      <BindItem id="item7" compid="TextArea00" propid="value" datasetid="ds_edcBsrpReportPopup" columnid="EDC_THTS"/>
      <BindItem id="item8" compid="TextArea01" propid="value" datasetid="ds_edcBsrpReportPopup" columnid="SUGEST_MATTER"/>
    </Bind>
    <Objects>
      <Dataset id="ds_registerInfo" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="REPORT_MAN_EMPNO" type="STRING" size="256"/>
          <Column id="REPORT_MAN_EMPNM" type="STRING" size="256"/>
          <Column id="DEPT_CODE" type="STRING" size="256"/>
          <Column id="DEPT_NM" type="STRING" size="256"/>
          <Column id="CLSF_SE" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_edcBsrpReportPopup" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false" oncolumnchanged="ds_edcBsrpReportPopup_oncolumnchanged" onrowposchanged="ds_edcBsrpReportPopup_onrowposchanged">
        <ColumnInfo>
          <Column id="REPORT_MAN_EMPNO" type="STRING" size="256"/>
          <Column id="REPORT_MAN_EMPNM" type="STRING" size="256"/>
          <Column id="DEPT_CODE" type="STRING" size="256"/>
          <Column id="CLSF_SE" type="STRING" size="256"/>
          <Column id="PROGRS_STTUS" type="STRING" size="256"/>
          <Column id="BGNDE" type="STRING" size="256"/>
          <Column id="BEGIN_TM" type="STRING" size="256"/>
          <Column id="ENDDE" type="STRING" size="256"/>
          <Column id="END_TM" type="STRING" size="256"/>
          <Column id="EDC_BSRP_DAYCNT" type="STRING" size="256"/>
          <Column id="TIME" type="STRING" size="256"/>
          <Column id="EDC_BSRP_INSTT_NM" type="STRING" size="256"/>
          <Column id="EDC_SE" type="STRING" size="256"/>
          <Column id="EDC_NM" type="STRING" size="256"/>
          <Column id="EDC_CRSE_SE" type="STRING" size="256"/>
          <Column id="EDC_EXPS" type="BIGDECIMAL" size="256"/>
          <Column id="EDC_TRVCT" type="BIGDECIMAL" size="256"/>
          <Column id="EXPNDTR_SM" type="BIGDECIMAL" size="256"/>
          <Column id="EDC_THTS" type="STRING" size="256"/>
          <Column id="SUGEST_MATTER" type="STRING" size="256"/>
          <Column id="DEPT_NM" type="STRING" size="256"/>
          <Column id="SN" type="STRING" size="256"/>
          <Column id="DRFT_DT" type="STRING" size="256"/>
          <Column id="SANCTN_STS" type="STRING" size="256"/>
          <Column id="SANCTN_KND" type="STRING" size="256"/>
          <Column id="SANCTN_NO" type="STRING" size="256"/>
          <Column id="EMPNO" type="STRING" size="256"/>
          <Column id="REQST_DE" type="STRING" size="256"/>
          <Column id="SEQ" type="STRING" size="256"/>
          <Column id="FILE_SN" type="STRING" size="256"/>
          <Column id="CANCEL_SE" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_cond00" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="REPORT_MAN_EMPNO" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_cond01" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="REPORT_MAN_EMPNO" type="STRING" size="256"/>
          <Column id="SN" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_validation" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="compId" type="STRING" size="256"/>
          <Column id="colId" type="STRING" size="256"/>
          <Column id="PK" type="STRING" size="256"/>
          <Column id="notNull" type="STRING" size="256"/>
          <Column id="type" type="STRING" size="256"/>
          <Column id="nlength" type="STRING" size="256"/>
          <Column id="from" type="STRING" size="256"/>
          <Column id="to" type="STRING" size="256"/>
          <Column id="lengthChkGb" type="STRING" size="256"/>
          <Column id="msgId" type="STRING" size="256"/>
          <Column id="expr" type="STRING" size="256"/>
          <Column id="func" type="STRING" size="256"/>
        </ColumnInfo>
        <Rows>
          <Row>
            <Col id="colId">REPORT_MAN_EMPNO</Col>
            <Col id="compId">ds_edcBsrpReportPopup</Col>
            <Col id="notNull">Y</Col>
            <Col id="msgId">보고자</Col>
          </Row>
          <Row>
            <Col id="compId">ds_edcBsrpReportPopup</Col>
            <Col id="notNull">Y</Col>
            <Col id="msgId">시작일자</Col>
            <Col id="colId">BGNDE</Col>
            <Col id="PK"/>
            <Col id="nlength"/>
          </Row>
          <Row>
            <Col id="compId">ds_edcBsrpReportPopup</Col>
            <Col id="colId">ENDDE</Col>
            <Col id="msgId">종료일자</Col>
            <Col id="notNull">Y</Col>
          </Row>
          <Row>
            <Col id="compId">ds_edcBsrpReportPopup</Col>
            <Col id="colId">ENDDE</Col>
            <Col id="from">BGNDE</Col>
            <Col id="msgId">종료일자^시작일자</Col>
          </Row>
          <Row>
            <Col id="compId">ds_edcBsrpReportPopup</Col>
            <Col id="colId">TIME</Col>
            <Col id="notNull">Y</Col>
            <Col id="msgId">총교육시간</Col>
          </Row>
          <Row>
            <Col id="colId">EDC_BSRP_INSTT_NM</Col>
            <Col id="msgId">교육출장기관</Col>
            <Col id="compId">ds_edcBsrpReportPopup</Col>
            <Col id="notNull">Y</Col>
          </Row>
          <Row>
            <Col id="colId">EDC_SE</Col>
            <Col id="msgId">교육구분</Col>
            <Col id="compId">ds_edcBsrpReportPopup</Col>
            <Col id="notNull">Y</Col>
          </Row>
          <Row>
            <Col id="colId">EDC_NM</Col>
            <Col id="msgId">교육명</Col>
            <Col id="compId">ds_edcBsrpReportPopup</Col>
            <Col id="notNull">Y</Col>
          </Row>
          <Row>
            <Col id="compId">ds_edcBsrpReportPopup</Col>
            <Col id="colId">EDC_CRSE_SE</Col>
            <Col id="notNull">Y</Col>
            <Col id="msgId">교육과정</Col>
          </Row>
        </Rows>
      </Dataset>
      <Dataset id="ds_clsfSe" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="CODE" type="STRING" size="256"/>
          <Column id="CODE_NM" type="STRING" size="256"/>
        </ColumnInfo>
        <Rows>
          <Row>
            <Col id="CODE">00</Col>
            <Col id="CODE_NM">임원</Col>
          </Row>
          <Row>
            <Col id="CODE">01</Col>
            <Col id="CODE_NM">1급</Col>
          </Row>
          <Row>
            <Col id="CODE">02</Col>
            <Col id="CODE_NM">2급</Col>
          </Row>
          <Row>
            <Col id="CODE">03</Col>
            <Col id="CODE_NM">3급</Col>
          </Row>
          <Row>
            <Col id="CODE">04</Col>
            <Col id="CODE_NM">4급</Col>
          </Row>
          <Row>
            <Col id="CODE">05</Col>
            <Col id="CODE_NM">5급</Col>
          </Row>
          <Row>
            <Col id="CODE">06</Col>
            <Col id="CODE_NM">6급</Col>
          </Row>
          <Row>
            <Col id="CODE">07</Col>
            <Col id="CODE_NM">07</Col>
          </Row>
          <Row>
            <Col id="CODE">09</Col>
            <Col id="CODE_NM">09</Col>
          </Row>
          <Row>
            <Col id="CODE">3A</Col>
            <Col id="CODE_NM">3A</Col>
          </Row>
          <Row>
            <Col id="CODE">3B</Col>
            <Col id="CODE_NM">3B</Col>
          </Row>
        </Rows>
      </Dataset>
      <Dataset id="ds_edcCrseSe" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="CODE" type="STRING" size="256"/>
          <Column id="GRP_CODE" type="STRING" size="256"/>
          <Column id="CODE_NM" type="STRING" size="256"/>
          <Column id="CODE_CN" type="STRING" size="256"/>
          <Column id="CODE_ORDR" type="STRING" size="256"/>
          <Column id="VAL0" type="STRING" size="256"/>
          <Column id="VAL1" type="STRING" size="256"/>
          <Column id="VAL2" type="STRING" size="256"/>
          <Column id="VAL3" type="STRING" size="256"/>
          <Column id="VAL4" type="STRING" size="256"/>
          <Column id="INT_VAL" type="STRING" size="256"/>
          <Column id="MSTK_VAL" type="STRING" size="256"/>
          <Column id="ETC1" type="STRING" size="256"/>
          <Column id="ETC2" type="STRING" size="256"/>
          <Column id="ETC3" type="STRING" size="256"/>
          <Column id="USE_YN" type="STRING" size="256"/>
          <Column id="ALL_CODE_NM" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_edcSe" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="CODE" type="STRING" size="256"/>
          <Column id="GRP_CODE" type="STRING" size="256"/>
          <Column id="CODE_NM" type="STRING" size="256"/>
          <Column id="CODE_CN" type="STRING" size="256"/>
          <Column id="CODE_ORDR" type="STRING" size="256"/>
          <Column id="VAL0" type="STRING" size="256"/>
          <Column id="VAL1" type="STRING" size="256"/>
          <Column id="VAL2" type="STRING" size="256"/>
          <Column id="VAL3" type="STRING" size="256"/>
          <Column id="VAL4" type="STRING" size="256"/>
          <Column id="INT_VAL" type="STRING" size="256"/>
          <Column id="MSTK_VAL" type="STRING" size="256"/>
          <Column id="ETC1" type="STRING" size="256"/>
          <Column id="ETC2" type="STRING" size="256"/>
          <Column id="ETC3" type="STRING" size="256"/>
          <Column id="USE_YN" type="STRING" size="256"/>
          <Column id="ALL_CODE_NM" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_approve" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="DATA_VALUE" type="STRING" size="1000"/>
          <Column id="DATA_TITLE" type="STRING" size="256"/>
          <Column id="O_URL" type="STRING" size="256"/>
          <Column id="I_KEY" type="STRING" size="256"/>
          <Column id="EMPNO" type="STRING" size="256"/>
          <Column id="RPT_DT" type="STRING" size="256"/>
          <Column id="SN" type="STRING" size="256"/>
          <Column id="DEPT_CD" type="STRING" size="256"/>
          <Column id="EMP_CD" type="STRING" size="256"/>
          <Column id="TITLE" type="STRING" size="256"/>
          <Column id="SANCTN_NO" type="STRING" size="256"/>
          <Column id="CANCEL_SE" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_cond02" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="BEGIN_TM" type="STRING" size="256"/>
          <Column id="END_TM" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_diffTime" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="TIME" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_fileList1" firefirstcount="0" firenextcount="0" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false" useclientlayout="true" onload="ds_fileList1_onload">
        <ColumnInfo>
          <Column id="CHK" type="STRING" size="20"/>
          <Column id="FILE_SN" type="BIGDECIMAL" size="20"/>
          <Column id="FILE_ORDR" type="INT" size="3"/>
          <Column id="FILE_STRE_COURS" type="STRING" size="2000"/>
          <Column id="STRE_FILE_NM" type="STRING" size="255"/>
          <Column id="ORGINL_FILE_NM" type="STRING" size="255"/>
          <Column id="FILE_EXTSN" type="STRING" size="20"/>
          <Column id="FILE_CN" type="STRING" size="4000"/>
          <Column id="FILE_MG" type="INT" size="8"/>
          <Column id="USE_AT" type="STRING" size="1"/>
          <Column id="FILE_ID" type="STRING" size="256"/>
          <Column id="SN" type="INT" size="5"/>
          <Column id="SYS_SE_CODE" type="STRING" size="6"/>
          <Column id="JOB_SE" type="STRING" size="3"/>
          <Column id="FILE_TY" type="STRING" size="256"/>
          <Column id="FILE_IMAGE" type="STRING" size="256"/>
          <Column id="PROGRS" type="INT" size="5"/>
          <Column id="TRNSMIS_FILE_SIZE" type="INT" size="256"/>
          <Column id="DELETE_IMAGE" type="STRING" size="256"/>
          <Column id="STTUS" type="STRING" size="256"/>
          <Column id="FILE_KEY" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_cond_file1" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="FILE_SN" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="DS_CANCEL_SE" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="CODE" type="STRING" size="256"/>
          <Column id="CODE_NM" type="STRING" size="256"/>
        </ColumnInfo>
        <Rows>
          <Row>
            <Col id="CODE_NM">신규</Col>
          </Row>
          <Row>
            <Col id="CODE">1</Col>
            <Col id="CODE_NM">취소</Col>
          </Row>
        </Rows>
      </Dataset>
      <Dataset id="DS_EMPNO" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="EMPNO" type="STRING" size="256"/>
          <Column id="EMPNM" type="STRING" size="256"/>
          <Column id="DEPT_CODE" type="STRING" size="256"/>
          <Column id="DEPT_NM" type="STRING" size="256"/>
          <Column id="TELNO_2" type="STRING" size="256"/>
          <Column id="OFCPS" type="STRING" size="256"/>
          <Column id="RSPOFC_SE" type="STRING" size="256"/>
          <Column id="CLSF_SE" type="STRING" size="256"/>
        </ColumnInfo>
        <Rows>
          <Row/>
        </Rows>
      </Dataset>
    </Objects>
    <Script type="xscript5.0"><![CDATA[/***********************************************************************
 * 업무구분 : MIS > 인사관리 > 교육출장보고서 등록(상세)
 * 화면ID   : HRM080202_P1
 * 화면명   : 교육출장보고서 등록(상세)
 * 화면설명 : 교육출장보고서 등록(상세)를 관리한다.
 * 작성일   : 2015.09.17
 * 작성자   : 이혜선
 * 수정이력 : 
 ***********************************************************************
 *     수정일     수정자   내용
 ***********************************************************************
 *    
 *   
 ***********************************************************************
 */

/***********************************************************************
 * Script Include 
 ***********************************************************************/
// 시스템 공통 라이브러리 Include
include "lib::comInclude.xjs";
include "mis_lib::misUtil.xjs";
include "lib::comUpDownUtils.xjs";
// 업무에 필요한 공통 라이브러리 파일을 추가할 수 있다.
// TODO
this.fv_objForm;
/***********************************************************************
 * 화면 변수 선언부
 ***********************************************************************/

this.File_UpDownManager = null;

/***********************************************************************
 * onInit / onLoad 영역
 ***********************************************************************/
this.HRM080202_P1_oninit = function(obj:Form, e:nexacro.InitEventInfo)
{
	this.fn_init_form();
	this.fn_init_dataset();
}
this.HRM080202_P1_onload = function(obj:Form, e:nexacro.LoadEventInfo)
{	
	if(!this.parent.arg_2){ //신규일때 취소선택불가
		this.rdo_CANCEL_SE.set_readonly(true);
	}
	
	this.fn_loadCombo();
}

/***********************************************************************
 * Form 오브젝트 초기화
 ***********************************************************************/ 
this.fn_init_form = function()
{
	this.gfn_initForm(this);
}

/***********************************************************************
 * Dataset 오브젝트 초기화
 ***********************************************************************/ 
this.fn_init_dataset = function()
{
	this.gfn_initCondDs(this, this.div_search);
	
	// 파일 메니저 설정
	var fileConfig = {
		useMultiUpload : false,
		onChange       : this.fn_onFileSelected,	// 파일 선택 이벤트 핸들러
		onSuccess      : this.fn_onFileSuccess		// 전송 성공 이벤트 핸들러
		//responseGrid : this.div_multiFile.grd_fileList,
		//responseArea : this.div_multiFile.sta_helpMessage
	};
	this.File_UpDownManager = new this.fileUpDownManager(this, "MIS", "HRM");
	this.File_UpDownManager.init(fileConfig);
}

/***********************************************************************
* Transaction 영역 시작
************************************************************************/

/***********************************************************************
 * Transaction 관련 이벤트 핸들러 
 **********************************************************************/
 /*
 * 함수명  	: fn_loadCombo
 * 설명 		: 화면의 Combo 에 데이터를 불러온다.
 * params  		: None
 * return Type 	: None
 * 사용법		: this.fn_loadCombo();
 */
this.fn_loadCombo = function ()
{
	var comboParams = [
		["ds_edcSe", "HRM221", "1", "D"], //교육구분
		["ds_edcCrseSe", "HRM210", "1", "D"] //교육과정구분
	];
	this.gfn_comboLoad(comboParams, this.fn_callbackAfter);
}

/*
 * 함수명  	: fn_callbackAfter
 * 설명 		: 공통 callback
 * params  		: None
 * return Type 	: None
 * 사용법		: this.fn_callbackAfter();
 */
this.fn_callbackAfter = function ()
{
	this.fv_objForm = this.parent.arg_0;
	var v_popupMsg = this.parent.arg_1;
	var v_popupMsg2 = this.parent.arg_2;
	var v_popupMsg3 = this.parent.arg_3;
	var v_popupMsg4 = this.parent.arg_4;
	var v_popupMsg5 = this.parent.arg_5;
	var argsEdcRpt = this.parent.argsEdcRpt;
	var pDrftSts = this.parent.pDrftSts;
	
	if(this.parent.arg_5 == "교육신청관리") this.btn_sanction.set_enable(false);
	
	if(argsEdcRpt != undefined && argsEdcRpt != null) { // 교육신청관리에서 호출됐을때
		this.btn_emp.set_visible(false);
		
		this.ds_cond00.clearData();
		var nRow = this.ds_cond00.addRow();
		this.ds_cond00.setColumn(nRow,"REPORT_MAN_EMPNO",v_popupMsg);
		this.cmb_PROGRS_STTUSE_SE01.set_index(0);
		this.cmb_PROGRS_STTUSE_SE00.set_index(0);
		var nRow = this.ds_edcBsrpReportPopup.addRow();
		
		this.fn_search1();
	
		this.ds_edcBsrpReportPopup.setColumn(nRow, "EMPNO", argsEdcRpt.EMPNO); // 키컬럼
		this.ds_edcBsrpReportPopup.setColumn(nRow, "REQST_DE", argsEdcRpt.REQST_DE); // 키컬럼
		this.ds_edcBsrpReportPopup.setColumn(nRow, "SEQ", argsEdcRpt.SEQ); // 키컬럼
		
		this.ds_edcBsrpReportPopup.setColumn(nRow, "BGNDE", argsEdcRpt.BGNDE); // 시작일자
		this.ds_edcBsrpReportPopup.setColumn(nRow, "ENDDE", argsEdcRpt.ENDDE); // 종료일자
		//this.ds_edcBsrpReportPopup.setColumn(nRow, "EDC_BSRP_DAYCNT", argsEdcRpt.EDC_BSRP_DAYCNT); // 교육일수
		//this.ds_edcBsrpReportPopup.setColumn(nRow, "BEGIN_TM", argsEdcRpt.BEGIN_TM); // 시작시각
		//this.ds_edcBsrpReportPopup.setColumn(nRow, "END_TM", argsEdcRpt.END_TM); // 종료시각
		//this.ds_edcBsrpReportPopup.setColumn(nRow, "TIME", argsEdcRpt.TIME); // 총교육시간
		this.ds_edcBsrpReportPopup.setColumn(nRow, "EDC_BSRP_INSTT_NM", argsEdcRpt.EDC_BSRP_INSTT_NM); // 교육출장기관
		//this.ds_edcBsrpReportPopup.setColumn(nRow, "EDC_SE", argsEdcRpt.EDC_SE); //교육구분
		this.ds_edcBsrpReportPopup.setColumn(nRow, "EDC_NM", argsEdcRpt.EDC_NM); // 교육명
		//this.ds_edcBsrpReportPopup.setColumn(nRow, "EDC_CRSE_SE", argsEdcRpt.EDC_CRSE_SE); // 교육과정
		this.ds_edcBsrpReportPopup.setColumn(nRow, "EDC_EXPS", (argsEdcRpt.EDC_EXPS==undefined?"0":argsEdcRpt.EDC_EXPS)); // 교육비
		this.ds_edcBsrpReportPopup.setColumn(nRow, "EDC_TRVCT", (argsEdcRpt.EDC_TRVCT==undefined?"0":argsEdcRpt.EDC_TRVCT)); // 교육여비
		//this.ds_edcBsrpReportPopup.setColumn(nRow, "EXPNDTR_SM", argsEdcRpt.EXPNDTR_SM);  //합계
	} 
	else if(!v_popupMsg2){//신규버튼
		//this.btn_emp.set_visible(false);

		this.cmb_PROGRS_STTUSE_SE01.set_index(0);
		this.cmb_PROGRS_STTUSE_SE00.set_index(0);
		this.rdo_CANCEL_SE.set_index(0);
		this.rdo_CANCEL_SE.set_readonly(true);
		
		var nRow = this.ds_edcBsrpReportPopup.addRow();
		this.ds_edcBsrpReportPopup.setColumn(nRow,"DEPT_CODE",this.parent.pDEPT_CODE);
		this.ds_edcBsrpReportPopup.setColumn(nRow,"DEPT_NM",this.parent.pDEPT_NM);
		
		if(v_popupMsg != undefined && v_popupMsg != null) {
			this.ds_cond00.clearData();
			var nRow = this.ds_cond00.addRow();
			this.ds_cond00.setColumn(nRow,"REPORT_MAN_EMPNO",v_popupMsg);
			this.fn_search1();
		}
	} 
	else {//셀더블클릭
		this.btn_emp.set_visible(false);
		this.ds_cond01.clearData();
		var nRow = this.ds_cond01.addRow();
		this.ds_cond01.setColumn(nRow,"REPORT_MAN_EMPNO",v_popupMsg2);
		this.ds_cond01.setColumn(nRow,"SN",v_popupMsg3);
		
		this.fn_cudSetup();		// 전자결재 추가 (2016.7)
		this.fn_search();
	}
}

/***********************************************************************
 * 설명: 결재에 따른 CONTROL 상태 UPDATE (2016.7)
 ************************************************************************/
 this.fn_cudSetup = function()
 {
	// 전자결재 상태 체크 2016.7
	// 기안상태 COM022 (0:기안전 1:기안 9:기안오류)
	// 결재상태 COM023 (1: 진행 2:보류 4:대기 8:협조대기 32:삭제 256:완료 512:반송 4096:취소 1024:참조 NUL:상신전 DUP:결재중복)
	// 기안전인것 : 재상신 및 수정/삭제
	// 결재상태가 상신전 외는 신규로 다시 진행.
	
	var draftKnd = this.parent.pDrftSts;	// 전자결재 추가(기안상태)
	
	var bEnable = (draftKnd == "1" || draftKnd == "9") ? false : true;
	
	this.btn_save.set_enable(bEnable);
	this.rdo_CANCEL_SE.set_readonly(bEnable);
	this.btn_sanction.set_enable(bEnable);
	
	if(this.parent.arg_5 == "교육신청관리") this.btn_sanction.set_enable(false);
 }

/*
 * 함수명  	: fn_search
 * 설명 		: 교육출장보고현황 상세조회 이벤트 처리       
 * params  		: None
 * return Type 	: None
 * 사용법		: this.fn_search();
 */
this.fn_search = function()
{
	this.ds_edcBsrpReportPopup.clearData();
	this.fn_transaction("selectEdcBsrpReportR");
}

/*
 * 함수명  	: fn_search1
 * 설명 		: 보고자정보 조회 이벤트 처리       
 * params  		: None
 * return Type 	: None
 * 사용법		: this.fn_search1();
 */
this.fn_search1 = function()
{
	this.ds_registerInfo.clearData();
	this.fn_transaction("selectEdcBsrpReportRegisterList");
}

/*
 * 함수명  	: fn_save
 * 설명 		: 저장 이벤트 처리
 * params  		: None
 * return Type 	: None
 * 사용법		: this.fn_save();
 */
this.fn_save = function()
{
	//validation 체크
	if(!this.gfn_checkValidation_NoUpdChk(this.ds_edcBsrpReportPopup, this.ds_validation)) {
		return;
	}
	// 시간 체크
	
	//취소/재신청 처리 
	var cancelSe = this.rdo_CANCEL_SE.value;
	if(cancelSe == '1' || cancelSe == '2' )	{  
		if (this.ds_edcBsrpReportPopup.getColumn(0, "CANCEL_SE") == undefined || this.ds_edcBsrpReportPopup.getColumn(0, "CANCEL_SE") == "") { 
			//신규자료로 다시 생성함  
			this.ds_edcBsrpReportPopup.set_updatecontrol(false);
			this.ds_edcBsrpReportPopup.setRowType(0, Dataset.ROWTYPE_INSERT );
			
			this.ds_edcBsrpReportPopup.setColumn (0, "SN", 	""); 	
			this.ds_edcBsrpReportPopup.setColumn (0, "SANCTN_NO", "");  
			this.ds_edcBsrpReportPopup.setColumn (0, "SANCTN_STS", "");  
			this.ds_edcBsrpReportPopup.setColumn (0, "SANCTN_STTS", "");  
			this.ds_edcBsrpReportPopup.setColumn (0, "DRFT_STS", "");
			this.ds_edcBsrpReportPopup.setColumn (0, "CANCEL_SE", cancelSe); 
		}
	}
	
	this.fn_transaction("edcBsrpReportCUD");
}

/*
 * 함수명  	: fn_sanction
 * 설명 		: 결재 처리
 * params  		: None
 * return Type 	: None
 * 사용법		: this.fn_sanction();
 */
this.fn_sanction = function(obj:Button,  e:nexacro.ClickEventInfo)
{
// 	var filds = new Array(14);
// 	filds[0] = this.ds_edcBsrpReportPopup.getColumn(this.ds_edcBsrpReportPopup.rowposition,"BGNDE");
// 	filds[1] = this.ds_edcBsrpReportPopup.getColumn(this.ds_edcBsrpReportPopup.rowposition,"ENDDE");
// 	filds[2] = this.ds_edcBsrpReportPopup.getColumn(this.ds_edcBsrpReportPopup.rowposition,"TIME");
// 	filds[3] = this.ds_edcBsrpReportPopup.getColumn(this.ds_edcBsrpReportPopup.rowposition,"EDC_BSRP_INSTT_NM");
// 	filds[4] = this.ds_edcBsrpReportPopup.getColumn(this.ds_edcBsrpReportPopup.rowposition,"EDC_NM");
// 	filds[5] = this.cmb_PROGRS_STTUSE_SE00.text;
// 	filds[6] = this.ds_edcBsrpReportPopup.getColumn(this.ds_edcBsrpReportPopup.rowposition,"DEPT_NM");
// 	filds[7] = this.cmb_PROGRS_STTUSE_SE02.text;
// 	filds[8] = this.ds_edcBsrpReportPopup.getColumn(this.ds_edcBsrpReportPopup.rowposition,"REPORT_MAN_EMPNM");
// 	filds[9] = this.ds_edcBsrpReportPopup.getColumn(this.ds_edcBsrpReportPopup.rowposition,"EDC_EXPS");
// 	filds[10] = this.ds_edcBsrpReportPopup.getColumn(this.ds_edcBsrpReportPopup.rowposition,"EDC_TRVCT");
// 	filds[11] = this.ds_edcBsrpReportPopup.getColumn(this.ds_edcBsrpReportPopup.rowposition,"EXPNDTR_SM");
// 	filds[12] = this.ds_edcBsrpReportPopup.getColumn(this.ds_edcBsrpReportPopup.rowposition,"EDC_THTS");
// 	filds[13] = this.ds_edcBsrpReportPopup.getColumn(this.ds_edcBsrpReportPopup.rowposition,"SUGEST_MATTER");
// 
// 	var dataValue = filds.join("|");
// 	var dataTitle = "교육출장보고서";
// 	
// 	this.ds_approve.clearData();
// 	var nRow = this.ds_approve.addRow();
// 	this.ds_approve.setColumn(nRow, "DATA_TITLE", dataTitle);
// 	this.ds_approve.setColumn(nRow, "DATA_VALUE", dataValue);
// 	
// 	this.fn_transaction("approve");

	var sanctnknd = this.ds_edcBsrpReportPopup.getColumn(this.ds_edcBsrpReportPopup.rowposition, "SANCTN_STS");
	var cancelSe = this.rdo_CANCEL_SE.value;
	
	if(cancelSe  == '1'){
		sanctnKnd = undefined;
	}

	switch (sanctnknd) {
		case "1": case "2": case "4": case "8": case "1024": case "DUP":
		this.gfn_message("comm.결재.진행");
		return false;
		
		case "32": case "256": case "512": case "4096": 
		this.gfn_message("comm.결재.완료");
		return false;
		
		default:
	}
	
	if(Ex.util.isUpdated(this.ds_edcBsrpReportPopup)){
		this.gfn_message("info.처리불가","수정된 내용을 저장 후 진행해 주시기바랍니다."); 
		return false;
	}
	
	var bgnDe     = this.ds_edcBsrpReportPopup.getColumn(this.ds_edcBsrpReportPopup.rowposition,"BGNDE");
	var endDe     = this.ds_edcBsrpReportPopup.getColumn(this.ds_edcBsrpReportPopup.rowposition,"ENDDE");
	var edcExps   = this.ds_edcBsrpReportPopup.getColumn(this.ds_edcBsrpReportPopup.rowposition,"EDC_EXPS");
	var edcTrvct  = this.ds_edcBsrpReportPopup.getColumn(this.ds_edcBsrpReportPopup.rowposition,"EDC_TRVCT");
	var expndtrSm = this.ds_edcBsrpReportPopup.getColumn(this.ds_edcBsrpReportPopup.rowposition,"EXPNDTR_SM");
	
	var filds = new Array(17);
	filds[0]  = bgnDe.substr(0, 4) + '-' + bgnDe.substr(4, 2) + '-' + bgnDe.substr(6, 2);
	filds[1]  = endDe.substr(0, 4) + '-' + endDe.substr(4, 2) + '-' + endDe.substr(6, 2);
	filds[2]  = this.ds_edcBsrpReportPopup.getColumn(this.ds_edcBsrpReportPopup.rowposition,"TIME");
	filds[3]  = this.ds_edcBsrpReportPopup.getColumn(this.ds_edcBsrpReportPopup.rowposition,"EDC_BSRP_INSTT_NM");
	filds[4]  = this.ds_edcBsrpReportPopup.getColumn(this.ds_edcBsrpReportPopup.rowposition,"EDC_NM");
	filds[5]  = this.cmb_PROGRS_STTUSE_SE00.text;
	filds[6]  = this.ds_edcBsrpReportPopup.getColumn(this.ds_edcBsrpReportPopup.rowposition,"DEPT_NM");
	filds[7]  = this.cmb_PROGRS_STTUSE_SE02.text;
	filds[8]  = this.ds_edcBsrpReportPopup.getColumn(this.ds_edcBsrpReportPopup.rowposition,"REPORT_MAN_EMPNM");
	filds[9]  = this.comUtils.formatComma(edcExps);
	filds[10] = this.comUtils.formatComma(edcTrvct);
	filds[11] = this.comUtils.formatComma(expndtrSm);
	filds[12] = this.ds_edcBsrpReportPopup.getColumn(this.ds_edcBsrpReportPopup.rowposition,"EDC_THTS");
	filds[13] = this.ds_edcBsrpReportPopup.getColumn(this.ds_edcBsrpReportPopup.rowposition,"SUGEST_MATTER");
	filds[14] = this.ds_edcBsrpReportPopup.getColumn(this.ds_edcBsrpReportPopup.rowposition,"REPORT_MAN_EMPNO");
	filds[15] = this.gfn_today();
	filds[16] = "";
	

	var dataValue = filds.join("|");
	var dataTitle = "교육출장보고서";
	var title     = "교육출장보고서";
	
	if (cancelSe  == '1') {
		dataTitle = dataTitle + '(취소)';
		title     = title + '(취소)';
	}
	
	this.ds_approve.clearData();	
	this.ds_approve.addRow();
	
	this.ds_approve.setColumn(0, "TITLE",      title                );
	this.ds_approve.setColumn(0, "DATA_TITLE", dataTitle            );
	this.ds_approve.setColumn(0, "DATA_VALUE", dataValue            );
	this.ds_approve.setColumn(0, "DEPT_CD",    this.gfn_getDeptId() );
	this.ds_approve.setColumn(0, "EMP_CD",     this.fn_getEmpno() );
	this.ds_approve.setColumn(0, "RPT_DT",     this.gfn_today() );
// 	this.ds_approve.setColumn(0, "DEPT_CD",    "0200001");
// 	this.ds_approve.setColumn(0, "EMP_CD",     "20040172");
	this.ds_approve.setColumn(0, "EMPNO", this.ds_edcBsrpReportPopup.getColumn(0,"REPORT_MAN_EMPNM"));
	this.ds_approve.setColumn(0, "SN", this.ds_edcBsrpReportPopup.getColumn(0,"SN"));
	this.ds_approve.setColumn(0, "SANCTN_NO", this.ds_edcBsrpReportPopup.getColumn(0,"SANCTN_NO"));
	this.ds_approve.setColumn(0, "CANCEL_SE", 	cancelSe); //@@@@
	
	if(this.gfn_message("comm.행위여부", "결재를 상신"))	{
		this.fn_transaction("approve");
	}
}

/**********************************************************************
 * CALL TRANSACTION 영역
 **********************************************************************/
this.fn_transaction = function(strSvcId)
{
	switch (strSvcId) {
		case "selectEdcBsrpReportR": //상세조회
			var sController   	= "hsco/mis/hrm/HRM080202/edcBsrpReportR.do";
			var sInDatasets   	= "input1=ds_cond01";
			var sOutDatasets  	= "ds_edcBsrpReportPopup=output1";
			break;
		case "selectEdcBsrpReportRegisterList": //보고자정보 조회
			var sController   	= "hsco/mis/hrm/HRM080202/edcBsrpReportRegisterList.do";
			var sInDatasets   	= "input1=ds_cond00";
			var sOutDatasets  	= "ds_registerInfo=output1";
			break;
		case "edcBsrpReportCUD": //보고자정보 저장
			var sController   	= "hsco/mis/hrm/HRM080202/edcBsrpReportCUD.do";
			var sInDatasets   	= "input3=ds_edcBsrpReportPopup:U";
			var sOutDatasets  	= "ds_edcBsrpReportPopup=output1";
			break;
		case "approve": //결재                 
			var sController   	= "hsco/mis/hrm/HRM080202/approve.do";	
			var sInDatasets   	= "input1=ds_approve";
			var sOutDatasets  	= "ds_approve=output1";
			break;
		case "selectDiffTime":
			var sController   	= "hsco/mis/hrm/HRM080202/selectDiffTime.do";
			var sInDatasets   	= "input1=ds_cond02";
			var sOutDatasets  	= "ds_diffTime=output1";
			break;
		case "selectFileList":	// 첨부파일 조회
			this.ds_fileList1.clearData();
			var sController   	= "hsco/mis/hrm/HRM020102/selectFileList.do";
			var sInDatasets   	= "input1=ds_cond_file1";
			var sOutDatasets  	= "ds_fileList1=output1";
			break;
	}

	Ex.core.tran(this, strSvcId, sController, sInDatasets, sOutDatasets); 
}

 /**********************************************************************
 * Transaction Callback 영역
 ***********************************************************************/
this.fn_callBack = function (strSvcId, nErrorCode, strErrorMsg)
{	trace(strSvcId);
	// 오류 및 성공 메시지를 화면에 보여준다.
	if(nErrorCode != 0) {
	  this.gfn_callback_message(strSvcId, nErrorCode, strErrorMsg);
	}
	if (nErrorCode != 0){
		alert(nErrorCode)
	} else {
		switch (strSvcId) {
			case "selectEdcBsrpReportRegisterList": //보고자정보 조회
				//var nRow = this.ds_edcBsrpReportPopup.addRow();
				var nRow = this.ds_edcBsrpReportPopup.rowposition;
				this.ds_edcBsrpReportPopup.setColumn(nRow,"REPORT_MAN_EMPNO",this.ds_registerInfo.getColumn(0,"REPORT_MAN_EMPNO"));
				this.ds_edcBsrpReportPopup.setColumn(nRow,"REPORT_MAN_EMPNM",this.ds_registerInfo.getColumn(0,"REPORT_MAN_EMPNM"));
				this.ds_edcBsrpReportPopup.setColumn(nRow,"DEPT_CODE",this.ds_registerInfo.getColumn(0,"DEPT_CODE"));
				this.ds_edcBsrpReportPopup.setColumn(nRow,"DEPT_NM",this.ds_registerInfo.getColumn(0,"DEPT_NM"));
				this.ds_edcBsrpReportPopup.setColumn(nRow,"CLSF_SE",this.ds_registerInfo.getColumn(0,"CLSF_SE"));
				this.ds_edcBsrpReportPopup.setColumn(nRow,"SANCTN_KND",'0');
				this.cmb_PROGRS_STTUSE_SE01.set_index(0);
				this.cmb_PROGRS_STTUSE_SE00.set_index(0);
				break;	
			case "selectEdcBsrpReportR": 
				var sanctnknd = this.ds_edcBsrpReportPopup.getColumn(this.ds_edcBsrpReportPopup.rowposition, "SANCTN_KND");
				var dayCnt = this.ds_edcBsrpReportPopup.getColumn(this.ds_edcBsrpReportPopup.rowposition, "EDC_BSRP_DAYCNT");
				var time = this.ds_edcBsrpReportPopup.getColumn(this.ds_edcBsrpReportPopup.rowposition, "TIME");
				this.edt_DEPT_NM00.set_value(dayCnt * time);
				
				if (this.ds_edcBsrpReportPopup.getColumn(0, "CANCEL_SE") == '1' ||
					this.ds_edcBsrpReportPopup.getColumn(0, "CANCEL_SE") == '2' ) {
					var cancelSe = this.ds_edcBsrpReportPopup.getColumn(0, "CANCEL_SE");
					this.rdo_CANCEL_SE.set_index(cancelSe);
					this.rdo_CANCEL_SE.set_readonly(true);
				}    		
				break;	
			case "edcBsrpReportCUD":
				this.gfn_message("success.처리.성공", null, null, null, this.fn_popupCallback);
				break;	
			case "approve":
				var brow = this.ds_approve.getColumn(0,"O_URL");
				system.execBrowser(brow); 
				break;
			case "selectDiffTime":
				var time = this.ds_diffTime.getColumn(0, "TIME");
				this.edt_DEPT_NM03.set_value(time);
				this.fn_totalTime();
				break;
			case "selectFileList":
				break;
		}
	}
}

/*
* 함수명  	: fn_popupCallback
* 설명 		: 공통메시지 Callback 처리
* params  		: 
* return Type 	: None
* 사용법		: 
*/
this.fn_popupCallback = function() {
	var empno = this.ds_edcBsrpReportPopup.getColumn(0, "REPORT_MAN_EMPNO");
	var sn    = this.ds_edcBsrpReportPopup.getColumn(0, "SN");
	
	this.ds_cond01.setColumn(0, "REPORT_MAN_EMPNO", empno);
	this.ds_cond01.setColumn(0, "SN", sn);
	this.fn_search();
}

/***********************************************************************
* Transaction 영역 끝
************************************************************************/
/***********************************************************************
 * non-Transaction 관련 컴포넌트 이벤트 처리 함수
 ***********************************************************************/
/***********************************************************************
 * 설명: 닫기
 ************************************************************************/
this.btn_close_onclick = function(obj:Button,  e:nexacro.ClickEventInfo)
{
	this.close();
}

this.Button00_onclick = function(obj:Button,  e:nexacro.ClickEventInfo)
{
	this.close();
}

this.Button01_onclick = function(obj:Button,  e:nexacro.ClickEventInfo)
{
	this.TextArea00.set_value(this.ds_edcBsrpReportPopup.saveXML());
}


/***********************************************************************
 * 설명: 교육기간, 교육시간 계산
 ************************************************************************/
this.ds_edcBsrpReportPopup_oncolumnchanged = function(obj:Dataset, e:nexacro.DSColChangeEventInfo)
{
	var bgnDe  = e.columnid == "BGNDE" ? e.newvalue : obj.getColumn(e.row, "BGNDE");
	var endDe  = e.columnid == "ENDDE" ? e.newvalue : obj.getColumn(e.row, "ENDDE");
	var dayCnt = e.columnid == "EDC_BSRP_DAYCNT" ? e.newvalue : obj.getColumn(e.row, "EDC_BSRP_DAYCNT");
	var edcExps   = e.columnid == "EDC_EXPS" ? e.newvalue : obj.getColumn(e.row, "EDC_EXPS");
	var edcTrvct  = e.columnid == "EDC_TRVCT" ? e.newvalue : obj.getColumn(e.row, "EDC_TRVCT");
	var expndtrSm = e.columnid == "EXPNDTR_SM" ? e.newvalue : obj.getColumn(e.row, "EXPNDTR_SM");
	
	if(e.columnid == "BGNDE" || e.columnid == "ENDDE") {
		if(!this.comUtils.isNull(bgnDe) && !this.comUtils.isNull(endDe)) {
			if(bgnDe > endDe){
				var errMsg = e.columnid == "bgnDe" ? "시작일자는 종료일자를" : "종료일자는 시작일자를";
				this.gfn_message("info.처리불가", errMsg + "초과할 수 없습니다.");
			} else {
				var date1 = new Date(bgnDe.substring(0,4),parseInt(bgnDe.substring(4,6))-1,bgnDe.substring(6,8));
				var date2 = new Date(endDe.substring(0,4),parseInt(endDe.substring(4,6))-1,endDe.substring(6,8));
				dayCnt = ((date2-date1)/86400000) + 1;
				this.ds_edcBsrpReportPopup.setColumn(0, "EDC_BSRP_DAYCNT", dayCnt);
			}
		}
	}
	if(e.columnid == "EDC_EXPS" || e.columnid == "EDC_TRVCT") {
		if( edcExps == undefined || edcExps == null || edcExps == "" ) edcExps = 0; 
		if( edcTrvct == undefined || edcTrvct == null || edcTrvct == "" ) edcTrvct = 0; 
		expndtrSm = edcExps + edcTrvct;
		obj.setColumn(e.row, "EXPNDTR_SM", expndtrSm);
	}
}

/***********************************************************************
 * 설명: 시간 계산
 ************************************************************************/
this.fn_search_diffTime = function()
{	
	this.ds_diffTime.clearData();
	this.fn_transaction("selectDiffTime");
}

/***********************************************************************
 * 설명: 총교육시간 계산
 ************************************************************************/
this.fn_totalTime = function()
{
	var dayCnt = this.ds_edcBsrpReportPopup.getColumn(0, "EDC_BSRP_DAYCNT");
	var time   = this.ds_edcBsrpReportPopup.getColumn(0, "TIME");
	var totalTime = dayCnt * time;
	this.edt_DEPT_NM00.set_value(totalTime);
}

this.btn_uploadFiles_onclick = function(obj:Button,  e:nexacro.ClickEventInfo)
{	/*
	if(Ex.util.isUpdated(this.ds_edcBsrpReportPopup)) {
		this.gfn_message("info.처리불가","상세내용이 수정되었습니다. 저장 후 다시 실행하십시오.")
		return;
	}
	*/
	
	if(this.ds_edcBsrpReportPopup.getRowType(0)=='2'){
		this.gfn_message("info.처리불가","신규등록의 경우 저장 후 업로드가 가능합니다.");
		return false;
	}
	
	// 첨부파일 업로드(fileSn 자동채번 / 첨부파일 Master에 ROW추가 / 파일 업로드 및 자동저장 / 테이블에 fileSn반영 / 데이터셋에 fileSn반영, 단 신규 ROW가 아닐경우 ROWTYPE은 유지)
	this.fn_autoFileSn(
		 "MIS"										// 대분류   (SYS_SE)
		,"HRM"										// 업무구분 (JOB_SE)
		, this.File_UpDownManager	            	// fileManager 오브젝트
		, this.ds_fileList1					    	// fileObject
		, this.ds_edcBsrpReportPopup			    // fileSn을 불러오거나 반영해야 하는 컬럼
		, "TBHRM_EDC_BSRP_REPORT"					// fileSn을 저장할 테이블
		, "FILE_SN"									// fileSn 컬럼명이 다를 경우를 대비
		, ["SN"]	 							    // fileSn을 저장할 테이블의 PK (FileSn 확인 및 자동반영목적)
	);
}

this.btn_delFiles_onclick = function(obj:Button,  e:nexacro.ClickEventInfo)
{	
	if(this.ds_fileList1.rowcount <= 0){
		this.gfn_message("info.파일정보.없음"); //삭제할 파일정보가 없습니다.
		return false;
	}
	
	if(!this.gfn_message("confirm.선택파일.삭제여부", "들")){
		return false;
	}
	
	for(var i=this.ds_fileList1.rowcount-1;i>=0;i--) {
		if(this.ds_fileList1.getColumn(i, "CHK") == "1") {
			this.ds_fileList1.deleteRow(i);
		}
	}
	
	var strSvcId   	 = "deleteFile";
	var sController  = "hsco/cmm/file/deleteFile.do";
	var sInDatasets  = "input1=ds_fileList1:U";
	var sOutDatasets = "ds_fileList1=output1";
	
	Ex.core.tran(this, strSvcId, sController, sInDatasets, sOutDatasets);
}

this.grd_fileList_oncelldblclick = function(obj:Grid, e:nexacro.GridClickEventInfo)
{
	var fileSn    = this.ds_fileList1.getColumn(this.ds_fileList1.rowposition, "FILE_SN");
	var fileOrder = this.ds_fileList1.getColumn(this.ds_fileList1.rowposition, "FILE_ORDR");
	var fileName  = this.ds_fileList1.getColumn(this.ds_fileList1.rowposition, "ORGINL_FILE_NM");
	
	this.File_UpDownManager.download(fileSn, fileOrder, fileName);
}

this.grd_fileList_onheadclick = function(obj:Grid, e:nexacro.GridClickEventInfo)
{
	if(e.col == 0) {
		this.gfn_setGridCheckAll(obj, e);
	}
	this.gfn_gridSort(obj, e);
}

this.fn_searchFile = function() {
	this.ds_fileList1.clearData();
	this.ds_cond_file1.clearData();
	this.ds_cond_file1.addRow();
	if(this.ds_edcBsrpReportPopup.getColumn(0, "FILE_SN")){
		this.ds_cond_file1.setColumn(0, "FILE_SN", this.ds_edcBsrpReportPopup.getColumn(0, "FILE_SN"));
	}
	this.fn_transaction("selectFileList");  // 첨부파일 조회
}

this.ds_edcBsrpReportPopup_onrowposchanged = function(obj:Dataset, e:nexacro.DSRowPosChangeEventInfo)
{
	this.fn_searchFile();
}

this.ds_fileList1_onload = function(obj:Dataset, e:nexacro.DSLoadEventInfo)
{
	if(this.ds_fileList1.rowcount>0) {
		this.ds_edcBsrpReportPopup.updatecontrol = false;
		this.ds_edcBsrpReportPopup.setColumn(0,"FILE_SN",this.ds_fileList1.getColumn(0,"FILE_SN"));
		this.ds_edcBsrpReportPopup.updatecontrol = true;
	}
}


this.rdo_CANCEL_SE_onitemchanged = function(obj:Radio, e:nexacro.ItemChangeEventInfo)
{
	var draftKnd = this.parent.pDrftSts;	// 전자결재 추가(기안상태)
	var bEnable = (draftKnd == "1" || draftKnd == "9") ? false : true;
	
	if (obj.value == "")  {
		this.btn_save.set_enable(bEnable);
		this.btn_sanction.set_enable(bEnable);
	} else {
		this.btn_save.set_enable(true);
		this.btn_sanction.set_enable(true);
	}
	
	if(this.parent.arg_5 == "교육신청관리") this.btn_sanction.set_enable(false);
}

this.btn_emp_onclick = function(obj:Button,  e:nexacro.ClickEventInfo)
{
	var deptCode = this.parent.pDEPT_CODE;
	
	var nLeft = system.clientToScreenX(this, 10);
	var nTop  = system.clientToScreenY(this, 10);     
	var newChild = new ChildFrame;
	newChild.init("Popup1", "absolute", nLeft, nTop, 400, 400, null, null , "com::empno_P01.xfdl");
	newChild.set_openalign("center middle");
	newChild.set_dragmovetype("all");  
	newChild.set_showtitlebar(true);
	newChild.showModal(this.getOwnerFrame(), {deptCd:deptCode} , this , "fn_callback5");
}

/***********************************************************************************
* 설명	: 사원선택 팝업 콜백
***********************************************************************************/
this.fn_callback5 = function(sPopupId, sReturn)
{
	if(sPopupId == "Popup1")
	{
		this.DS_EMPNO.clearData();
        nRowCnt = this.DS_EMPNO.loadXML(sReturn);
        if(!nRowCnt){
            return;
        } else {
			this.ds_edcBsrpReportPopup.setColumn(0, "REPORT_MAN_EMPNO", this.DS_EMPNO.getColumn(0, "EMPNO"));
			this.ds_edcBsrpReportPopup.setColumn(0, "REPORT_MAN_EMPNM", this.DS_EMPNO.getColumn(0, "EMPNM"));
			this.ds_edcBsrpReportPopup.setColumn(0, "DEPT_CODE", this.DS_EMPNO.getColumn(0, "DEPT_CODE"));
			this.ds_edcBsrpReportPopup.setColumn(0, "DEPT_NM", this.DS_EMPNO.getColumn(0, "DEPT_NM"));
			this.ds_edcBsrpReportPopup.setColumn(0, "CLSF_SE", this.DS_EMPNO.getColumn(0, "HR_CLSF_SE"));
        }
	}
}
]]></Script>
  </Form>
</FDL>
