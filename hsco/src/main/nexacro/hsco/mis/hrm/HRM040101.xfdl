<?xml version="1.0" encoding="utf-8"?>
<FDL version="1.5">
  <TypeDefinition url="..\..\default_typedef.xml"/>
  <Form id="HRM040101" classname="HRM040101" left="0" top="0" width="1059" height="735" titletext="포상수여자 관리" oninit="HRM040101_oninit" onload="HRM040101_onload">
    <Layouts>
      <Layout>
        <Div id="div_search" taborder="0" left="0" top="0" height="59" right="28" cssclass="div_WFSA_Box" scrollbars="none">
          <Layouts>
            <Layout width="1031" height="59">
              <Calendar id="cal_bgnDe" taborder="0" left="79" top="5" width="100" height="21" dateformat="yyyy-MM-dd" value="null" editformat="yyyy-MM-dd" cssclass="cal_WF_Essential"/>
              <Calendar id="cal_endDe" taborder="1" left="199" top="5" width="100" height="21" dateformat="yyyy-MM-dd" value="null" editformat="yyyy-MM-dd" cssclass="cal_WF_Essential"/>
              <Edit id="edt_nm" taborder="3" left="695" top="5" width="150" height="21" maxlength="30" lengthunit="ascii"/>
              <Edit id="edt_cnferInsttS" taborder="4" left="79" top="31" width="219" height="21" lengthunit="ascii" maxlength="100"/>
              <Combo id="cmb_pzdcrSeS" taborder="5" left="393" top="31" width="219" height="21" innerdataset="@ds_pzdcrSeS" codecolumn="CODE" datacolumn="CODE_NM"/>
              <Radio id="rdo_empSe" taborder="6" index="0" innerdataset="@ds_empSeS" codecolumn="CODE" datacolumn="CODE_NM" value="0" direction="vertical" cssclass="rdo_WF_Essential" left="695" width="162" height="16" top="34"/>
              <Static id="sta_applcde" taborder="7" text="조회기간" left="15" top="5" width="64" height="21" cssclass="sta_WFSA_Label"/>
              <Static id="Static00" taborder="8" text="~" left="184" top="5" width="12" height="21"/>
              <Static id="sta_psitnNmS" taborder="9" text="소속(주소)" left="314" top="5" width="70" height="21" cssclass="sta_WFSA_Label"/>
              <Static id="sta_nm" taborder="10" text="성명" left="626" top="5" width="38" height="21" cssclass="sta_WFSA_Label" style="align:left middle;"/>
              <Static id="sta_cnferInsttS" taborder="11" text="수여기관" left="15" top="31" width="64" height="21" cssclass="sta_WFSA_Label"/>
              <Static id="sta_pzdcrSeS" taborder="12" text="포상종별" left="314" top="31" width="64" height="21" cssclass="sta_WFSA_Label"/>
              <Static id="sta_empSe" taborder="13" text="직원구분" cssclass="sta_WFSA_Label" left="626" top="31" width="64" height="21"/>
              <Static id="Static01" taborder="14" text="~" left="686" top="671" width="12" height="21"/>
              <Edit id="edt_psitnNmS" taborder="2" left="393" top="5" width="219" height="21" maxlength="200" lengthunit="ascii"/>
              <Static id="Static04" taborder="15" text="15" visible="false" left="299" top="-1" width="15" height="58" style="background:#00ffff66;"/>
              <Static id="Static02" taborder="16" text="15" visible="false" left="612" top="0" width="15" height="58" style="background:#00ffff66;"/>
            </Layout>
          </Layouts>
        </Div>
        <Div id="div_work" taborder="1" left="0" right="28" top="93" bottom="0">
          <Layouts>
            <Layout>
              <Static id="Static01" taborder="19" left="0%" width="100%" height="27" cssclass="sta_WF_Labelbg" bottom="114"/>
              <Static id="Static06" taborder="20" cssclass="sta_WF_Labelbg" left="0" width="1031" height="27" bottom="88"/>
              <Static id="Static09" taborder="21" cssclass="sta_WF_Labelbg" left="0" width="1031" height="27" bottom="62"/>
              <Static id="Static12" taborder="22" cssclass="sta_WF_Labelbg" left="0" width="1031" height="27" bottom="36"/>
              <Radio id="rdo_empSe" taborder="17" index="0" codecolumn="CODE" datacolumn="CODE_NM" direction="vertical" cssclass="rdo_WF_Essential" left="108" width="161" bottom="118" innerdataset="@ds_empSe" value="1" onitemchanged="div_work_rdo_empSe_onitemchanged" height="16" onitemclick="div_work_rdo_empSe_onitemclick"/>
              <Edit id="edt_extrlEmpNm" taborder="4" left="93" bottom="66" width="162" height="21" readonly="false" maxlength="30" lengthunit="ascii"/>
              <Edit id="edt_jssfcClsfNm" taborder="5" left="93" bottom="39" width="162" height="21" readonly="false" maxlength="100" lengthunit="ascii"/>
              <Static id="sta_rwardCnferDtl" taborder="18" text="포상수여 상세" left="0" width="103" height="21" bottom="144" cssclass="sta_WF_Title02"/>
              <Static id="Static02" taborder="23" cssclass="sta_WF_Labelbg" left="772" width="258" height="27" bottom="62"/>
              <Static id="Static03" taborder="24" cssclass="sta_WF_Labelbg" height="27" bottom="36" left="772" width="258"/>
              <Static id="Static04" taborder="25" left="257" width="260" cssclass="sta_WF_Labelbg" bottom="36" height="27"/>
              <Static id="Static00" taborder="26" cssclass="sta_WF_Labelbg" left="772" bottom="88" width="258" height="27"/>
              <Static id="Static05" taborder="27" cssclass="sta_WF_Labelbg" left="772" bottom="114" width="258" height="27"/>
              <Static id="sta_empSe" taborder="28" text="직원구분" cssclass="sta_WF_Label" left="0" bottom="114" width="91" height="27" style="align:right middle;"/>
              <Static id="sta_extrlEmpNm" taborder="29" text="외부직원성명" cssclass="sta_WF_Label" left="0" bottom="62" width="91" height="27" style="align:right middle;"/>
              <Static id="sta_jssfcClsfNm" taborder="30" text="직원직위직명" cssclass="sta_WF_Label" left="0" bottom="36" width="91" height="27" style="align:right middle;"/>
              <Static id="sta_empnm" taborder="31" text="내부직원성명" cssclass="sta_WF_Label" left="0" bottom="88" width="91" height="27" style="align:right middle;"/>
              <Grid id="grd_rwardCnferList" taborder="0" binddataset="ds_rwardCnferList" autoenter="select" useinputpanel="false" oncellclick="div_work_grd_rwardCnferList_oncellclick" onheadclick="div_work_grd_rwardCnferList_onheadclick" left="0" top="0" right="0" bottom="173">
                <Formats>
                  <Format id="default">
                    <Columns>
                      <Column size="25"/>
                      <Column size="40"/>
                      <Column size="90"/>
                      <Column size="100"/>
                      <Column size="80"/>
                      <Column size="100"/>
                      <Column size="150"/>
                      <Column size="46"/>
                      <Column size="70"/>
                      <Column size="80"/>
                      <Column size="80"/>
                      <Column size="250"/>
                      <Column size="80"/>
                      <Column size="60"/>
                      <Column size="80"/>
                      <Column size="115"/>
                      <Column size="60"/>
                      <Column size="60"/>
                      <Column size="60"/>
                    </Columns>
                    <Rows>
                      <Row size="24" band="head"/>
                      <Row size="24" band="head"/>
                      <Row size="24"/>
                    </Rows>
                    <Band id="head">
                      <Cell rowspan="2" displaytype="checkbox" edittype="checkbox" text="bind:CHK"/>
                      <Cell col="1" rowspan="2" text="순번"/>
                      <Cell col="2" rowspan="2" text="포상&#13;&#10;년월일"/>
                      <Cell col="3" rowspan="2" text="포상종별"/>
                      <Cell col="4" rowspan="2" text="수여기관"/>
                      <Cell col="5" colspan="4" text="피 포 상 자"/>
                      <Cell col="9" rowspan="2" text="수공기간"/>
                      <Cell col="10" rowspan="2" text="증서번호"/>
                      <Cell col="11" rowspan="2" text="공적개요"/>
                      <Cell col="12" rowspan="2" text="기념품&#13;&#10;(부상)"/>
                      <Cell col="13" rowspan="2" text="포상평점"/>
                      <Cell col="14" colspan="2" text="징계감경내역"/>
                      <Cell col="16" colspan="3" text="파일"/>
                      <Cell row="1" col="5" text="직위직명"/>
                      <Cell row="1" col="6" text="소속(주소)"/>
                      <Cell row="1" col="7" text="성별"/>
                      <Cell row="1" col="8" text="성명"/>
                      <Cell row="1" col="14" text="적용일자"/>
                      <Cell row="1" col="15" text="내용"/>
                      <Cell row="1" col="16" text="등록"/>
                      <Cell row="1" col="17" text="보기"/>
                      <Cell row="1" col="18" text="삭제"/>
                    </Band>
                    <Band id="body">
                      <Cell displaytype="checkbox" edittype="checkbox" text="bind:CHK"/>
                      <Cell col="1" displaytype="number" text="expr:currow + 1"/>
                      <Cell col="2" displaytype="date" edittype="none" text="bind:WNPZ_DE" calendardisplaynulltype="none"/>
                      <Cell col="3" displaytype="normal" edittype="none" cssclass="Cellgrd_WF_AlignLeft" text="bind:PZDCR_NM"/>
                      <Cell col="4" text="bind:CNFER_INSTT"/>
                      <Cell col="5" text="bind:JSSFC_CLSF_NM"/>
                      <Cell col="6" edittype="none" cssclass="Cellgrd_WF_AlignLeft" text="bind:PSITN_NM"/>
                      <Cell col="7" displaytype="combo" edittype="none" text="bind:SEXDSTN" combodataset="ds_sexdstn" combocodecol="CODE" combodatacol="CODE_NM"/>
                      <Cell col="8" displaytype="normal" edittype="none" cssclass="Cellgrd_WF_AlignLeft" text="expr:INSID_NM!= null ? INSID_NM : OUTSID_NM"/>
                      <Cell col="9" edittype="none" cssclass="Cellgrd_WF_AlignLeft" text="bind:STDR_WORK_FT"/>
                      <Cell col="10" text="bind:WNPZ_BASIS"/>
                      <Cell col="11" edittype="none" cssclass="Cellgrd_WF_AlignLeft" text="bind:WNPZ_RESN"/>
                      <Cell col="12" text="bind:SVENR"/>
                      <Cell col="13" displaytype="normal" edittype="none" style="align: ;" cssclass="Cellgrd_WF_AlignRight" text="bind:WNPZ_GRADE" mask="#.#" maskchar="0"/>
                      <Cell col="14" displaytype="expr:DSCPL_DCSN_DE != null ? 'date' : 'none'" text="bind:DSCPL_DCSN_DE"/>
                      <Cell col="15" displaytype="combo" cssclass="Cellgrd_WF_AlignLeft"/>
                      <Cell col="16" displaytype="button" text="업로드"/>
                      <Cell col="17" displaytype="expr:FILE_CNT &gt; 0 ? 'button' :  'none'" text="다운로드"/>
                      <Cell col="18" displaytype="expr:FILE_CNT &gt; 0 ? 'button' :  'none'" text="삭제"/>
                    </Band>
                  </Format>
                </Formats>
              </Grid>
              <Static id="sta_rwardDe" taborder="32" text="포상년월일" cssclass="sta_WF_Label" left="516" bottom="114" width="100" height="27" style="align:right middle;"/>
              <Calendar id="cal_rwardDe" taborder="8" dateformat="yyyy-MM-dd" cssclass="cal_WF_Essential" left="618" bottom="117" width="152" height="21"/>
              <Combo id="cmb_pzdcrSe" taborder="9" innerdataset="ds_pzdcrSe" codecolumn="CODE" datacolumn="CODE_NM" cssclass="cmb_WF_Essential" left="618" bottom="91" width="152" height="21"/>
              <Static id="sta_wnpzResn" taborder="34" text="공적개요" cssclass="sta_WF_Label" left="772" bottom="114" width="100" height="27" style="align:right middle;"/>
              <Edit id="edt_wnpzResn" taborder="13" oneditclick="div_work_edt_pblenSumry_oneditclick" left="874" bottom="117" width="154" height="21" maxlength="250" lengthunit="ascii"/>
              <Edit id="edt_svenr" taborder="14" oneditclick="div_work_edt_pblenSumry_oneditclick" left="874" bottom="91" width="154" height="21" maxlength="100" lengthunit="ascii"/>
              <Static id="sta_svenr" taborder="35" text="기념품(부상)" cssclass="sta_WF_Label" left="772" bottom="85" width="100" height="27" style="align:right middle;"/>
              <Static id="sta_wnpzGrade" taborder="36" text="포상평점" cssclass="sta_WF_Label" left="772" bottom="62" width="100" height="27" style="align:right middle;"/>
              <Edit id="edt_wnpzGrade" taborder="15" readonly="true" left="874" bottom="66" width="154" height="21" cssclass="edt_WF_Readonly"/>
              <Static id="sta_rm" taborder="37" text="비고" cssclass="sta_WF_Label" left="772" bottom="36" width="100" height="27" style="align:right middle;"/>
              <Edit id="edt_rm" taborder="16" left="874" bottom="39" width="154" height="21" maxlength="200" lengthunit="ascii"/>
              <Static id="Static07" taborder="38" cssclass="sta_WF_Labelbg" left="257" bottom="62" width="260" height="27"/>
              <Static id="Static08" taborder="39" cssclass="sta_WF_Labelbg" left="0" bottom="10" width="1031" height="27"/>
              <Static id="sta_psitnNm" taborder="40" text="소속(주소)" cssclass="sta_WF_Label" left="0" bottom="10" width="91" height="27" style="align:right middle;"/>
              <Edit id="edt_psitnNm" taborder="6" left="93" bottom="13" width="162" height="21" readonly="false" maxlength="200" lengthunit="ascii"/>
              <Static id="sta_sexdstn" taborder="41" text="직원성별" cssclass="sta_WF_Label" left="257" bottom="114" width="100" height="27" style="align:right middle;"/>
              <Radio id="rdo_sexdstn" taborder="7" innerdataset="@ds_sexdstn" codecolumn="CODE" datacolumn="CODE_NM" value="1" direction="vertical" cssclass="rdo_WF_Readonly" left="376" bottom="118" width="134" height="16" readonly="true"/>
              <Edit id="edt_wnpzBasis" taborder="12" oneditclick="div_work_edt_pblenSumry_oneditclick" left="618" bottom="13" width="152" height="21" maxlength="250" lengthunit="ascii"/>
              <Edit id="edt_cnferInstt" taborder="10" oneditclick="div_work_edt_pblenSumry_oneditclick" left="618" bottom="66" width="152" height="21" cssclass="edt_WF_Essential" maxlength="100" lengthunit="ascii"/>
              <Static id="Static10" taborder="45" cssclass="sta_WF_Labelbg" left="257" bottom="10" width="260" height="27"/>
              <Static id="Static11" taborder="46" cssclass="sta_WF_Labelbg" left="772" bottom="10" width="257" height="27"/>
              <Edit id="edt_cnferInstt00" taborder="11" oneditclick="div_work_edt_pblenSumry_oneditclick" left="618" bottom="39" width="152" height="21" maxlength="20" lengthunit="ascii"/>
              <Static id="Static13" taborder="47" cssclass="sta_WF_Labelbg" left="257" bottom="88" width="260" height="27"/>
              <Static id="sta_stdrWorkFt" taborder="43" text="수공기간" cssclass="sta_WF_Label" left="516" bottom="36" width="100" height="27" style="align:right middle;"/>
              <Static id="sta_cnferInstt" taborder="44" text="수여기관" cssclass="sta_WF_Label" left="516" bottom="62" width="100" height="27" style="align:right middle;"/>
              <Static id="sta_pzdcrSe" taborder="33" text="포상종별" cssclass="sta_WF_Label" left="516" bottom="88" width="100" height="27" style="align:right middle;"/>
              <Static id="sta_wnpzBasis" taborder="42" text="증서번호" cssclass="sta_WF_Label" left="516" bottom="10" width="100" height="27" style="align:right middle;"/>
              <Edit id="edt_emplnm" taborder="1" onkeyup="edt_emplnm_onkeyup" left="93" width="91" height="21" bottom="90"/>
              <Button id="search" taborder="2" onclick="div_sear_search_onclick" cssclass="btn_WF_Search" left="163" bottom="89" width="21" height="22"/>
              <Edit id="edt_empno" taborder="3" inputtype="number" maxlength="8" onkeyup="edt_empno_onkeyup" left="185" width="70" style="align:left middle;" height="21" bottom="90"/>
            </Layout>
          </Layouts>
        </Div>
        <Static id="sta_rwardCnferList" taborder="2" text="포상수여자 목록" left="0" top="69" width="116" height="19" cssclass="sta_WF_Title02"/>
        <Static id="Static00" taborder="3" text="15" visible="false" top="0" width="15" height="735" style="background:#1b3cd23c;align:center middle;" right="13"/>
        <Static id="Static01" taborder="4" text="스&#13;&#10;크&#13;&#10;롤&#13;&#10;13" visible="false" top="0" right="0" width="13" height="735" style="background:#d07b173c;align:center middle;"/>
      </Layout>
    </Layouts>
    <Objects>
      <Dataset id="ds_rwardCnferList" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false" oncolumnchanged="ds_rwardCnferList_oncolumnchanged" onrowposchanged="ds_rwardCnferList_onrowposchanged">
        <ColumnInfo>
          <Column id="CHK" type="STRING" size="256"/>
          <Column id="SEQ" type="STRING" size="256"/>
          <Column id="EMPNO" type="STRING" size="256"/>
          <Column id="WNPZ_DE" type="STRING" size="256"/>
          <Column id="INSID_SE" type="STRING" size="256"/>
          <Column id="PZDCR_SE" type="STRING" size="256"/>
          <Column id="PZDCR_NM" type="STRING" size="256"/>
          <Column id="CNFER_INSTT" type="STRING" size="256"/>
          <Column id="JSSFC_CLSF_NM" type="STRING" size="256"/>
          <Column id="PSITN_NM" type="STRING" size="256"/>
          <Column id="SEXDSTN_NM" type="STRING" size="256"/>
          <Column id="SEXDSTN" type="STRING" size="256"/>
          <Column id="STDR_WORK_FT" type="STRING" size="256"/>
          <Column id="WNPZ_RESN" type="STRING" size="256"/>
          <Column id="WNPZ_BASIS" type="STRING" size="256"/>
          <Column id="SVENR" type="STRING" size="256"/>
          <Column id="WNPZ_GRADE" type="STRING" size="256"/>
          <Column id="DSCPL_SEQ" type="STRING" size="256"/>
          <Column id="RDUCT_AT" type="STRING" size="256"/>
          <Column id="DSCPL_DCSN_DE" type="STRING" size="256"/>
          <Column id="DCSN_DSCPL_SE" type="STRING" size="256"/>
          <Column id="FILE_SN" type="STRING" size="256"/>
          <Column id="RM" type="STRING" size="256"/>
          <Column id="FILE_CNT" type="STRING" size="256"/>
          <Column id="INSID_NM" type="STRING" size="256"/>
          <Column id="OUTSID_NM" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_cond" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="BGN_DT" type="STRING" size="256"/>
          <Column id="END_DT" type="STRING" size="256"/>
          <Column id="PSITN_NM" type="STRING" size="256"/>
          <Column id="NM" type="STRING" size="256"/>
          <Column id="CNFER_INSTT" type="STRING" size="256"/>
          <Column id="PZDCR_SE" type="STRING" size="256"/>
          <Column id="INSID_SE" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_validation" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="compId" type="STRING" size="256"/>
          <Column id="colId" type="STRING" size="256"/>
          <Column id="PK" type="STRING" size="256"/>
          <Column id="notNull" type="STRING" size="256"/>
          <Column id="type" type="STRING" size="256"/>
          <Column id="nlength" type="STRING" size="256"/>
          <Column id="from" type="STRING" size="256"/>
          <Column id="to" type="STRING" size="256"/>
          <Column id="lengthChkGb" type="STRING" size="256"/>
          <Column id="msgId" type="STRING" size="256"/>
          <Column id="expr" type="STRING" size="256"/>
          <Column id="func" type="STRING" size="256"/>
        </ColumnInfo>
        <Rows>
          <Row>
            <Col id="compId">ds_cond</Col>
            <Col id="colId">BGN_DT</Col>
            <Col id="notNull">Y</Col>
            <Col id="msgId">조회시작일자</Col>
          </Row>
          <Row>
            <Col id="compId">ds_cond</Col>
            <Col id="colId">END_DT</Col>
            <Col id="notNull">Y</Col>
            <Col id="msgId">조회종료일자</Col>
          </Row>
          <Row>
            <Col id="compId">ds_cond</Col>
            <Col id="colId">END_DT</Col>
            <Col id="from">BGN_DT</Col>
            <Col id="msgId">조회종료일자^조회시작일자</Col>
          </Row>
          <Row>
            <Col id="compId">ds_rwardCnferList</Col>
            <Col id="colId">WNPZ_DE</Col>
            <Col id="msgId">포상년월일</Col>
            <Col id="nlength"/>
            <Col id="lengthChkGb"/>
            <Col id="notNull">Y</Col>
          </Row>
          <Row>
            <Col id="compId">ds_rwardCnferList</Col>
            <Col id="colId">CNFER_INSTT</Col>
            <Col id="msgId">수여기관</Col>
            <Col id="nlength"></Col>
            <Col id="lengthChkGb"></Col>
            <Col id="notNull">Y</Col>
          </Row>
          <Row>
            <Col id="compId">ds_rwardCnferList</Col>
            <Col id="colId">JSSFC_CLSF_NM</Col>
            <Col id="msgId">직위직명</Col>
            <Col id="nlength"></Col>
            <Col id="lengthChkGb"></Col>
            <Col id="notNull">Y</Col>
          </Row>
          <Row>
            <Col id="compId">ds_rwardCnferList</Col>
            <Col id="colId">PSITN_NM</Col>
            <Col id="msgId">소속(주소)</Col>
            <Col id="nlength"></Col>
            <Col id="lengthChkGb"></Col>
            <Col id="notNull">Y</Col>
          </Row>
          <Row>
            <Col id="compId">ds_rwardCnferList</Col>
            <Col id="colId">INSID_SE</Col>
            <Col id="msgId">직원여부</Col>
            <Col id="notNull">Y</Col>
          </Row>
          <Row>
            <Col id="compId">ds_rwardCnferList</Col>
            <Col id="colId">PZDCR_SE</Col>
            <Col id="msgId">포상종별</Col>
            <Col id="notNull">Y</Col>
          </Row>
        </Rows>
      </Dataset>
      <Dataset id="ds_sanc" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="MIS_KEY" type="STRING" size="256"/>
          <Column id="I_DIV" type="STRING" size="256"/>
          <Column id="TITLE" type="STRING" size="256"/>
          <Column id="DEPT_CD" type="STRING" size="256"/>
          <Column id="EMP_CD" type="STRING" size="256"/>
          <Column id="DATA_TITLE" type="STRING" size="256"/>
          <Column id="DATA_VALUE" type="STRING" size="1000"/>
          <Column id="O_URL" type="STRING" size="256"/>
          <Column id="KEY" type="STRING" size="256"/>
          <Column id="I_KEY" type="STRING" size="256"/>
          <Column id="REQEST_NO" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_empSe" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="CODE" type="STRING" size="256"/>
          <Column id="CODE_NM" type="STRING" size="256"/>
        </ColumnInfo>
        <Rows>
          <Row>
            <Col id="CODE">1</Col>
            <Col id="CODE_NM">내부</Col>
          </Row>
          <Row>
            <Col id="CODE">0</Col>
            <Col id="CODE_NM">외부</Col>
          </Row>
        </Rows>
      </Dataset>
      <Dataset id="ds_empSeS" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="CODE" type="STRING" size="256"/>
          <Column id="CODE_NM" type="STRING" size="256"/>
        </ColumnInfo>
        <Rows>
          <Row>
            <Col id="CODE_NM">전체</Col>
          </Row>
          <Row>
            <Col id="CODE">1</Col>
            <Col id="CODE_NM">내부</Col>
          </Row>
          <Row>
            <Col id="CODE">0</Col>
            <Col id="CODE_NM">외부</Col>
          </Row>
        </Rows>
      </Dataset>
      <Dataset id="ds_temp" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="RWARD_BASIS" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_cond_file" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="FILE_SN" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_fileList" firefirstcount="0" firenextcount="0" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false" useclientlayout="true">
        <ColumnInfo>
          <Column id="FILE_SN" type="BIGDECIMAL" size="20"/>
          <Column id="FILE_ORDR" type="INT" size="3"/>
          <Column id="FILE_STRE_COURS" type="STRING" size="2000"/>
          <Column id="STRE_FILE_NM" type="STRING" size="255"/>
          <Column id="ORGINL_FILE_NM" type="STRING" size="255"/>
          <Column id="FILE_EXTSN" type="STRING" size="20"/>
          <Column id="FILE_CN" type="STRING" size="4000"/>
          <Column id="FILE_MG" type="INT" size="8"/>
          <Column id="USE_AT" type="STRING" size="1"/>
          <Column id="FILE_ID" type="STRING" size="256"/>
          <Column id="SN" type="INT" size="5"/>
          <Column id="SYS_SE_CODE" type="STRING" size="6"/>
          <Column id="JOB_SE" type="STRING" size="3"/>
          <Column id="FILE_TY" type="STRING" size="256"/>
          <Column id="FILE_IMAGE" type="STRING" size="256"/>
          <Column id="PROGRS" type="INT" size="5"/>
          <Column id="TRNSMIS_FILE_SIZE" type="INT" size="256"/>
          <Column id="DELETE_IMAGE" type="STRING" size="256"/>
          <Column id="STTUS" type="STRING" size="256"/>
          <Column id="FILE_KEY" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_selectFileSn" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="EMPNO" type="STRING" size="256"/>
          <Column id="SEQ" type="STRING" size="256"/>
          <Column id="FILE_SN" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_sexdstn">
        <ColumnInfo>
          <Column id="CODE" type="STRING" size="256"/>
          <Column id="CODE_NM" type="STRING" size="256"/>
        </ColumnInfo>
        <Rows>
          <Row>
            <Col id="CODE">M</Col>
            <Col id="CODE_NM">남</Col>
          </Row>
          <Row>
            <Col id="CODE">F</Col>
            <Col id="CODE_NM">여</Col>
          </Row>
        </Rows>
      </Dataset>
      <Dataset id="ds_pzdcrSe" useclientlayout="true" onrowposchanged="ds_pzdcrSe_onrowposchanged">
        <ColumnInfo>
          <Column id="CODE" type="STRING" size="256"/>
          <Column id="CODE_NM" type="STRING" size="256"/>
          <Column id="MSTK_VAL" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_pzdcrSeS">
        <ColumnInfo>
          <Column id="CODE" type="STRING" size="256"/>
          <Column id="CODE_NM" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="DS_SEARCH" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="DEPT_CODE" type="STRING" size="256"/>
          <Column id="EMPNO" type="STRING" size="256"/>
          <Column id="EMPNM" type="STRING" size="256"/>
          <Column id="TELNO_2" type="STRING" size="256"/>
        </ColumnInfo>
        <Rows>
          <Row/>
        </Rows>
      </Dataset>
      <Dataset id="DS_EMP" firefirstcount="0" firenextcount="0" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false" useclientlayout="true">
        <ColumnInfo>
          <Column id="EMPNO" type="STRING" size="256"/>
          <Column id="EMPNM" type="STRING" size="256"/>
          <Column id="DEPT_CODE" type="STRING" size="256"/>
          <Column id="DEPT_NM" type="STRING" size="256"/>
          <Column id="OFCPS" type="STRING" size="256"/>
          <Column id="CLSF_CODE" type="STRING" size="256"/>
          <Column id="SALARY_SE" type="STRING" size="256"/>
          <Column id="RSPOFC_SE" type="STRING" size="256"/>
          <Column id="JSSFC_SE" type="STRING" size="256"/>
          <Column id="JSSFC_NM" type="STRING" size="256"/>
          <Column id="SRCLS" type="STRING" size="256"/>
          <Column id="ECNY_DE" type="STRING" size="256"/>
          <Column id="ADRES" type="STRING" size="256"/>
          <Column id="TELNO_2" type="STRING" size="256"/>
          <Column id="BRTHDY" type="STRING" size="256"/>
          <Column id="HR_CLSF_SE" type="STRING" size="256"/>
          <Column id="HR_CLSF_NM" type="STRING" size="256"/>
          <Column id="USER_ID" type="STRING" size="256"/>
          <Column id="OFCPS_NM" type="STRING" size="256"/>
          <Column id="SEXDSTN" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
    </Objects>
    <Bind>
      <BindItem id="item21" compid="div_work.edt_wnpzBasis" propid="value" datasetid="ds_rwardCnferList" columnid="WNPZ_BASIS"/>
      <BindItem id="item4" compid="div_search.cal_bgnDe" propid="value" datasetid="ds_cond" columnid="BGN_DT"/>
      <BindItem id="item10" compid="div_search.cal_endDe" propid="value" datasetid="ds_cond" columnid="END_DT"/>
      <BindItem id="item11" compid="div_search.edt_nm" propid="value" datasetid="ds_cond" columnid="NM"/>
      <BindItem id="item12" compid="div_search.edt_cnferInsttS" propid="value" datasetid="ds_cond" columnid="CNFER_INSTT"/>
      <BindItem id="item13" compid="div_search.cmb_pzdcrSeS" propid="value" datasetid="ds_cond" columnid="PZDCR_SE"/>
      <BindItem id="item14" compid="div_work.edt_jssfcClsfNm" propid="value" datasetid="ds_rwardCnferList" columnid="JSSFC_CLSF_NM"/>
      <BindItem id="item15" compid="div_work.rdo_empSe" propid="value" datasetid="ds_rwardCnferList" columnid="INSID_SE"/>
      <BindItem id="item16" compid="div_search.rdo_empSe" propid="value" datasetid="ds_cond" columnid="INSID_SE"/>
      <BindItem id="item19" compid="div_work.cal_rwardDe" propid="value" datasetid="ds_rwardCnferList" columnid="WNPZ_DE"/>
      <BindItem id="item20" compid="div_work.cmb_pzdcrSe" propid="value" datasetid="ds_rwardCnferList" columnid="PZDCR_SE"/>
      <BindItem id="item18" compid="div_work.edt_wnpzResn" propid="value" datasetid="ds_rwardCnferList" columnid="WNPZ_RESN"/>
      <BindItem id="item22" compid="div_work.edt_svenr" propid="value" datasetid="ds_rwardCnferList" columnid="SVENR"/>
      <BindItem id="item23" compid="div_work.edt_wnpzGrade" propid="value" datasetid="ds_rwardCnferList" columnid="WNPZ_GRADE"/>
      <BindItem id="item24" compid="div_work.edt_rm" propid="value" datasetid="ds_rwardCnferList" columnid="RM"/>
      <BindItem id="item1" compid="div_work.rdo_empSe00" propid="value" datasetid="ds_rwardCnferList" columnid="EMPSE"/>
      <BindItem id="item3" compid="div_work.edt_psitnNm" propid="value" datasetid="ds_rwardCnferList" columnid="PSITN_NM"/>
      <BindItem id="item2" compid="div_work.edt_cnferInstt" propid="value" datasetid="ds_rwardCnferList" columnid="CNFER_INSTT"/>
      <BindItem id="item0" compid="div_search.edt_psitnNmS" propid="value" datasetid="ds_cond" columnid="PSITN_NM"/>
      <BindItem id="item5" compid="div_work.edt_cnferInstt00" propid="value" datasetid="ds_rwardCnferList" columnid="STDR_WORK_FT"/>
      <BindItem id="item6" compid="div_work.rdo_sexdstn" propid="value" datasetid="ds_rwardCnferList" columnid="SEXDSTN"/>
      <BindItem id="item7" compid="div_work.edt_extrlEmpNm" propid="value" datasetid="ds_rwardCnferList" columnid="OUTSID_NM"/>
      <BindItem id="item8" compid="div_work.edt_emplnm" propid="value" datasetid="ds_rwardCnferList" columnid="INSID_NM"/>
      <BindItem id="item9" compid="div_work.edt_empno" propid="value" datasetid="ds_rwardCnferList" columnid="EMPNO"/>
    </Bind>
    <Script type="xscript5.0"><![CDATA[/***********************************************************************
 * 화면ID   : HRM040101
 * 화면명   : 포상수여자 관리
 * 화면설명 : 포상수여자를 관리한다.
 * 작성일   : 2015.08.31
 * 작성자   : 김형태
 * 수정이력 : 
 ***********************************************************************
 *     수정일     수정자   내용
 ***********************************************************************
 *    
 ***********************************************************************
 */

/***********************************************************************
 * Script Include 
 ***********************************************************************/
// 시스템 공통 라이브러리 Include
include "lib::comInclude.xjs";
include "mis_lib::misUtil.xjs";
include "lib::comUpDownUtils.xjs";

/**********************************************************************
* 화면 변수 선언부
***********************************************************************/
this.checkDs = [
  this.ds_rwardCnferList
];

var empno2 = "";
var empnm2 = "";
this.saveRow = -1;
this.File_UpDownManager = null;
/**********************************************************************
* onInit / onLoad 영역
***********************************************************************/

this.HRM040101_oninit = function(obj:Form, e:nexacro.InitEventInfo)
{
	// Form 초기화
	this.fn_init_form();

	// DataSet 초기화
	this.fn_init_dataset();
}

this.HRM040101_onload = function(obj:Form, e:nexacro.LoadEventInfo)
{	
	this.fn_loadCombo();
}

/**********************************************************************
* Form/Dataset 오브젝트 초기화
***********************************************************************/
/*
 * 함수명  	: initForm
 * 설명 		: Form을 초기화한다.
 * params  		: None
 * return Type 	: None
 * 사용법		: this.init_Form();
 */
this.fn_init_form = function()
{
	this.gfn_initForm(this);	// 시스템 공통으로 Form을 Initialize 한다.
	this.fn_misFormInit(this);
}

/*
 * 함수명  	: initDataset
 * 설명 		: Dataset을 초기화한다
 * params  		: None
 * return Type 	: None
 * 사용법		: this.initDataset();
 */
this.fn_init_dataset = function()
{
	// 조건 Dataset 외에 초기화가 필요한 Dataset에 대한 초기화 코드를 추가
	this.gfn_initCondDs(this, this.div_search);
	
	// 파일 메니저 설정
	var fileConfig = {
		useMultiUpload : false,
		onChange       : this.fn_onFileSelected,	// 파일 선택 이벤트 핸들러
		onSuccess      : this.fn_onFileSuccess		// 전송 성공 이벤트 핸들러
		//responseGrid : this.div_multiFile.grd_fileList,
		//responseArea : this.div_multiFile.sta_helpMessage
	};
	this.File_UpDownManager = new this.fileUpDownManager(this, "MIS", "HRM");
	this.File_UpDownManager.init(fileConfig);
}

/*
 * 함수명  	: fn_loadCombo
 * 설명 		: 화면의 Combo 에 데이터를 불러온다.
 * params  		: None
 * return Type 	: None
 * 사용법		: this.fn_loadCombo();
 */
this.fn_loadCombo = function ()
{
	var comboParams = [
			["ds_pzdcrSeS"      , "HRM030" , "1", "전체"],		// 포상종별(검색)
			["ds_pzdcrSe"      , "HRM030" , "1", ""] 			// 포상종별
		];
	
	this.gfn_comboLoad(comboParams, this.fn_callbackAfter);
}

/*
 * 함수명  	: fn_callbackAfter
 * 설명 		: 공통 callback
 * params  		: None
 * return Type 	: None
 * 사용법		: this.fn_callbackAfter();
 */
this.fn_callbackAfter = function ()
{
	var today = this.gfn_today();
	var startDe = this.dateUtils.addMonth(today, -12, 's');
	this.ds_cond.setColumn(0, "END_DT", today);
	this.ds_cond.setColumn(0, "BGN_DT", startDe);
	
	this.fn_search();
}

/**********************************************************************
* Transaction 영역 시작
***********************************************************************
*
* 1. Transaction 관련 이벤트 핸들러
* 2. call Transaction 영역
* 3. callback 영역(Transaction, Popup)
* 
***********************************************************************/



/**********************************************************************
* Transaction 관련 이벤트 핸들러 
***********************************************************************/


/*
 * 함수명  	: fn_search
 * 설명 		: 조회 이벤트 처리(포상수여자)
 * params  		: None
 * return Type 	: None
 * 사용법		: this.fn_search();
 */
this.fn_search = function()
{
	// validation 체크(포상수여자)
	if(!this.gfn_checkValidation_NoUpdChk(this.ds_cond, this.ds_validation)) {
		return;
	}
	
	this.ds_rwardCnferList.clearData();
	this.fn_transaction("tbhrmRwardCnferList");
}


/*
 * 함수명  	: fn_save
 * 설명 		: 저장 이벤트 처리
 * params  		: None
 * return Type 	: None
 * 사용법		: this.fn_save();
 */
this.fn_save = function()
{

	// validation 체크(포상수여자)
	if(!this.gfn_checkValidation_NoUpdChk(this.ds_rwardCnferList, this.ds_validation)) {
		return;
	}
	
	// 데이터셋 수정 여부체크
	if (!this.comUtils.isDatasetUpdated(this.ds_rwardCnferList)) {
		this.gfn_message("comm.데이터.변경.없음");
		return false;
	}
	
	if(this.gfn_message("confirm.저장.여부"))	{
		this.saveRow = this.ds_rwardCnferList.rowposition;
		this.fn_transaction("tbhrmRwardCnferSave");
	}
}



/**********************************************************************
* call Transaction 영역
***********************************************************************/

/*
 * 함수명  	: fn_transaction
 * 설명 		: Transaction 요청 처리 함수
 * params  		: strSvcId : 서비스요청 ID
 * return Type 	: None
 * 사용법		: this.fn_transaction("SELECT");
 */
this.fn_transaction = function(strSvcId)
{
	switch (strSvcId) {
		case "tbhrmRwardCnferList":	// 포상수여자 조회
			var sController   	= "/hsco/mis/hrm/HRM040101/tbhrmRwardCnferList.do";
			var sInDatasets   	= "input1=ds_cond";
			var sOutDatasets  	= "ds_rwardCnferList=output1";
			break;
		case "tbhrmRwardCnferSave":	 // 저장
			var sController   	= "/hsco/mis/hrm/HRM040101/tbhrmRwardCnferSave.do";
			var sInDatasets   	= "input1=ds_rwardCnferList:U";
			var sOutDatasets  	= "";
			break;
		case "saveSanc":					// 전자결재
			var misKey    = "HRM"
			var iDiv      = "";
			var title     = "";
			var dataTitle = "";
			var dataValue = "";
			// 001 : 기본기안
			iDiv      = "001"
			title     = "포상수여자";
			dataTitle = "포상수여자";
			
			this.ds_sanc.clearData();
			var nRow = this.ds_sanc.addRow();
			this.ds_sanc.setColumn(nRow, "MIS_KEY",    misKey     );
			this.ds_sanc.setColumn(nRow, "I_DIV",      iDiv       );
			this.ds_sanc.setColumn(nRow, "TITLE",      title      );
			this.ds_sanc.setColumn(nRow, "DATA_TITLE", dataTitle  );
			this.ds_sanc.setColumn(nRow, "DATA_VALUE", null  );
			this.ds_sanc.setColumn(nRow, "DEPT_CD",    this.gfn_getDeptId() );
			this.ds_sanc.setColumn(nRow, "EMP_CD",     this.fn_getEmpno() );
			
			var sController   	= "hsco/mis/hrm/HRM040101/saveSanc.do";
			var sInDatasets   	= "input1=ds_sanc";
			var sOutDatasets  	= "ds_sanc=output1";
			break;
		case "selectFileList":	// 첨부파일 조회
			this.ds_fileList.clearData();
			var sController   	= "hsco/mis/hrm/HRM020102/selectFileList.do";
			var sInDatasets   	= "input1=ds_cond_file";
			var sOutDatasets  	= "ds_fileList=output1";
			break;
	}

	Ex.core.tran(this, strSvcId, sController, sInDatasets, sOutDatasets); 
}



/**********************************************************************
* Transaction Callback 영역
***********************************************************************/

 /*
 * 함수명  	: fn_callBack
 * 설명 		: Transaction Callback 처리
 * params  		: strSvcId    : 서비스요청 ID
 *                nErrorCode  : 오류 메시지 코드 ([예] 0 : Success, 그밖의 경우, error)
 *                strErrorMsg : 오류 메시지([예]  success.insert|정상적으로 등록되었습니다.)
 * return Type 	: None
 * 사용법		: 
 */
 
this.fn_callBack = function (strSvcId, nErrorCode, strErrorMsg)
{
	if(nErrorCode != '0') {
		this.gfn_callback_message(strSvcId, nErrorCode, strErrorMsg);
	}

	if (nErrorCode == 0){
		switch (strSvcId) {
			case "tbhrmRwardCnferList":	// 조회(포상수여자)
				if(this.saveRow > -1){
					this.ds_rwardCnferList.set_rowposition(this.saveRow);
					this.saveRow = -1;
				}
				break;
			case "tbhrmRwardCnferSave": // 저장
				this.gfn_message("success.처리.성공");
				this.fn_search();
				break;
			case "saveSanc":
				var oUrl = this.ds_sanc.getColumn(0,"O_URL");
				system.execBrowser(oUrl);
				break;
			case "selectFileList":
				var nRow = this.ds_rwardCnferList.rowposition;
				var fileCnt = this.ds_fileList.getRowCount();
				
				this.ds_rwardCnferList.set_enableevent(false);
				this.ds_rwardCnferList.set_updatecontrol(false);
				this.ds_rwardCnferList.setColumn(nRow, "FILE_CNT", fileCnt);
				this.ds_rwardCnferList.set_updatecontrol(true);
				this.ds_rwardCnferList.set_enableevent(true);
				break;
			case "deleteFile":
				this.fn_transaction("selectFileList");
				break;
		}
	}
}


/**********************************************************************
* Transaction 영역 끝
***********************************************************************/



/**********************************************************************
* non-Transaction 관련 컴포넌트 이벤트 처리 함수
***********************************************************************
*
* 1. Dataset 관련 이벤트 처리
* 2. 공통함수 처리
* 3. 사용자 정의 함수 처리
* 
***********************************************************************/


/**********************************************************************
* Dataset 관련 이벤트 처리
***********************************************************************/


/**********************************************************************
* 공통함수 처리
***********************************************************************/

 /*
 * 함수명  	: fn_insert
 * 설명 		: 신규 버튼 이벤트 처리(행추가)
 * params  		: Non
 * return Type 	: None
 * 사용법		: this.fn_insert();
 */
this.fn_insert = function()
{
	this.ds_rwardCnferList.addRow();
	this.div_work.rdo_empSe.set_index(0);
	
	// 내부직원성명 비움
	this.div_work.edt_emplnm.set_value("");
	this.div_work.edt_empno.set_value("");
	
	this.div_work.edt_emplnm.set_readonly(false);
	this.div_work.edt_empno.set_readonly(false);

	this.div_work.edt_emplnm.set_cssclass("edt_WF_Essential");
	this.div_work.edt_empno.set_cssclass("edt_WF_Essential");


	this.div_work.edt_extrlEmpNm.set_readonly(true);
	this.div_work.edt_jssfcClsfNm.set_readonly(true);
	this.div_work.edt_psitnNm.set_readonly(true);
	this.div_work.rdo_sexdstn.set_readonly(true);

	this.div_work.edt_extrlEmpNm.set_cssclass("edt_WF_Readonly");
	this.div_work.edt_jssfcClsfNm.set_cssclass("edt_WF_Readonly");
	this.div_work.edt_psitnNm.set_cssclass("edt_WF_Readonly");
	this.div_work.rdo_sexdstn.set_cssclass("edt_WF_Readonly");
}


/*
 * 함수명  	: fn_delete
 * 설명 		: 삭제 버튼 이벤트 처리(행삭제)
 * params  		: None
 * return Type 	: None
 * 사용법		: this.fn_delete();
 */
this.fn_delete = function()
{
	this.gfn_delMultiRow(this.ds_rwardCnferList);
}


/*
 * 함수명  	: fn_cancel
 * 설명 		: 취소 버튼 이벤트 처리(Dataset 변경 내역 Reset)
 * params  		: None
 * return Type 	: None
 * 사용법		: this.fn_cancel();
 */
this.fn_cancel = function()
{
	if (this.gfn_message("confirm.취소여부")) {
		this.ds_rwardCnferList.reset();			//DATASET ROLLBACK
		this.ds_rwardCnferList.applyChange();	//DATASET COMMIT
		return;
	}
}

/*
 * 함수명  	: fn_sanction
 * 설명 		: 결재 버튼 이벤트 처리
 * params  		: None
 * return Type 	: None
 * 사용법		: this.fn_sanction();
 */
this.fn_sanction = function(obj:Button,  e:nexacro.ClickEventInfo)
{
	this.fn_transaction("saveSanc");
}

 /*
 * 함수명  	: div_work_grd_rwardCnferList_oncellclick
 * 설명 		: 체크 전체해제
 *                
 * params  		: None
 * return Type 	: None
 * 사용법		: this.div_work_grd_rwardCnferList_oncellclick();
 */
this.div_work_grd_rwardCnferList_oncellclick = function(obj:Grid, e:nexacro.GridClickEventInfo)
{
	if(e.cell == 0) {
		obj.setCellProperty("Head", e.cell, "text", "0");
	}
	// 업로드
	if(e.cell == 16) {
		var nRow = this.ds_rwardCnferList.rowposition;
		var fileSN = this.ds_rwardCnferList.getColumn(nRow,"FILE_SN");
		var empNo  = this.ds_rwardCnferList.getColumn(nRow,"EMPNO");
		var seq    = this.ds_rwardCnferList.getColumn(nRow,"SEQ");
		this.ds_selectFileSn.clearData();
		this.ds_selectFileSn.addRow();
		this.ds_selectFileSn.setColumn(0,"FILE_SN", fileSN);
		this.ds_selectFileSn.setColumn(0,"EMPNO"  , empNo);
		this.ds_selectFileSn.setColumn(0,"SEQ"    , seq);

		if(this.ds_rwardCnferList.getRowType(nRow)=='2'){
			this.gfn_message("info.처리불가","신규등록의 경우 저장 후 업로드가 가능합니다.");
			return false;
		}
		if(this.ds_fileList.rowcount>0){
			this.gfn_message("info.파일.업로드.허용건수초과", "1");
			return false;
		}
		this.saveRow = nRow;
		// 첨부파일 업로드(fileSn 자동채번 / 첨부파일 Master에 ROW추가 / 파일 업로드 및 자동저장 / 테이블에 fileSn반영 / 데이터셋에 fileSn반영, 단 신규 ROW가 아닐경우 ROWTYPE은 유지)
		this.fn_autoFileSn(
			 "MIS"									// 대분류   (SYS_SE)
			,"HRM"									// 업무구분 (JOB_SE)
			, this.File_UpDownManager	            // fileManager 오브젝트
			, this.ds_fileList					    // fileObject
			, this.ds_rwardCnferList		       	// fileSn을 불러오거나 반영해야 하는 컬럼
			, "TBHRM_RWARD_DTLS"					// fileSn을 저장할 테이블
			, "FILE_ID"								// fileSn 컬럼명이 다를 경우를 대비
			, ["SEQ"]					   			// fileSn을 저장할 테이블의 PK (FileSn 확인 및 자동반영목적)
		);
	}
	// 다운로드
	if(e.cell == 17) {
		var nRow = this.ds_rwardCnferList.rowposition;
		var fileCnt = this.ds_rwardCnferList.getColumn(nRow, "FILE_CNT");
		
		
		if(fileCnt != '1') {
			//this.gfn_message("err.파일.다운로드.정보없음");
			return false;
		}
		
		if(this.ds_rwardCnferList.getColumn(nRow, "FILE_SN")){
			this.ds_cond_file.setColumn(0, "FILE_SN", this.ds_rwardCnferList.getColumn(nRow, "FILE_SN"));
			var fileSn    = this.ds_fileList.getColumn(this.ds_fileList.rowposition, "FILE_SN");
			var fileOrder = this.ds_fileList.getColumn(this.ds_fileList.rowposition, "FILE_ORDR");
			var fileName  = this.ds_fileList.getColumn(this.ds_fileList.rowposition, "ORGINL_FILE_NM");
			
			this.File_UpDownManager.download(fileSn, fileOrder, fileName);
		}
	}
	// 삭제
	if(e.cell == 18) {
		if(this.ds_fileList.rowcount <= 0){
			//this.gfn_message("info.파일정보.없음"); //삭제할 파일정보가 없습니다.
			return false;
		}
		if(!this.gfn_message("confirm.선택파일.삭제여부", "들")){
			return false;
		}
		
		this.ds_fileList.deleteAll();
		
		var strSvcId   	 = "deleteFile";
		var sController  = "hsco/cmm/file/deleteFile.do";
		var sInDatasets  = "input1=ds_fileList:U";
		var sOutDatasets = "ds_fileList=output1";
		
		Ex.core.tran(this, strSvcId, sController, sInDatasets, sOutDatasets);
	}
}

/*
* 함수명		: div_work_grd_rwardCnferList_onheadclick
* 설명			: 헤드클릭 정렬, 체크박스 전체전택
* params		: None
* return Type	: None
* 사용법		: this.div_work_grd_rwardCnferList_onheadclick();
*/
this.div_work_grd_rwardCnferList_onheadclick = function(obj:Grid, e:nexacro.GridClickEventInfo)
{
	if(e.col == 0) {
		this.gfn_setGridCheckAll(obj, e);
	}
	this.gfn_gridSort(obj, e);
}

/***********************************************************************
* 사용자 정의 함수
************************************************************************/

 /*
 * 함수명  	: ds_rwardCnferList_onrowposchanged
 * 설명 		: 행 변경시 처리
 *                
 * params  		: None
 * return Type 	: None
 * 사용법		: this.ds_rwardCnferList_onrowposchanged();
 */
this.ds_rwardCnferList_onrowposchanged = function(obj:Dataset, e:nexacro.DSRowPosChangeEventInfo)
{ 
	var cRowp = this.ds_rwardCnferList.rowposition;
	var empno = this.ds_rwardCnferList.getColumn(cRowp, "EMPNO");
    var empSe = this.ds_rwardCnferList.getColumn(cRowp, "INSID_SE");

	if(empSe == 1) {
		//this.div_work.edt_emplnm.set_value(empNm);
		
		this.div_work.edt_emplnm.set_readonly(false);
		this.div_work.edt_empno.set_readonly(false);
		
		this.div_work.edt_emplnm.set_cssclass("edt_WF_Essential");
		this.div_work.edt_empno.set_cssclass("edt_WF_Essential");

		this.div_work.edt_extrlEmpNm.set_readonly(true);
		this.div_work.edt_jssfcClsfNm.set_readonly(true);
		this.div_work.edt_psitnNm.set_readonly(true);
		this.div_work.rdo_sexdstn.set_readonly(true);
		
		this.div_work.edt_extrlEmpNm.set_cssclass("edt_WF_Readonly");
		this.div_work.edt_jssfcClsfNm.set_cssclass("edt_WF_Readonly");
		this.div_work.edt_psitnNm.set_cssclass("edt_WF_Readonly");
		this.div_work.rdo_sexdstn.set_cssclass("edt_WF_Readonly");
		
		
	}else {
		
		this.div_work.edt_emplnm.set_readonly(true);
		this.div_work.edt_empno.set_readonly(true);
		
		this.div_work.edt_emplnm.set_cssclass("edt_WF_Readonly");
		this.div_work.edt_empno.set_cssclass("edt_WF_Readonly");
		
		this.div_work.edt_extrlEmpNm.set_readonly(false);
		this.div_work.edt_jssfcClsfNm.set_readonly(false);
		this.div_work.edt_psitnNm.set_readonly(false);
		this.div_work.rdo_sexdstn.set_readonly(false);
		
		this.div_work.edt_extrlEmpNm.set_cssclass("edt_WF_Essential");
		this.div_work.edt_jssfcClsfNm.set_cssclass("edt_WF_Essential");
		this.div_work.edt_psitnNm.set_cssclass("edt_WF_Essential");
		this.div_work.rdo_sexdstn.set_cssclass("edt_WF_Essential");
		
	
	}
	
	var fileSn = obj.getColumn(e.newrow, "FILE_SN");
	this.ds_fileList.clearData();
	this.ds_cond_file.clearData();
	this.ds_cond_file.addRow();
	
	if(this.comUtils.isNotNull(fileSn)) {
		this.ds_cond_file.setColumn(0, "FILE_SN", fileSn);
		this.fn_transaction("selectFileList");
	}
}



/*
 * 함수명  	: div_work_rdo_empSe_onitemchanged
 * 설명 		: 직원구분 변경시 처리              
 * params  		: None
 * return Type 	: None
 * 사용법		: this.div_work_rdo_empSe_onitemchanged();
 */
this.div_work_rdo_empSe_onitemchanged = function(obj:Radio, e:nexacro.ItemChangeEventInfo)
{

}

/*
 * 함수명  	: fn_uploadCallback
 * 설명 		: 파일 업로드 후 재조회
 * params  		: None
 * return Type 	: None
 * 사용법		: this.fn_uploadCallback();
 */
this.fn_uploadCallback = function()
{	
	this.fn_search();  // 첨부파일 조회
	return true;
}


/***********************************************************************************
* 설명	: 검색버튼 클릭
***********************************************************************************/
this.div_sear_search_onclick = function(obj:Button,  e:nexacro.ClickEventInfo)
{
	if(this.ds_rwardCnferList.getColumn(this.ds_rwardCnferList.rowposition, "INSID_SE") == 1) { 
		//검색된 부서코드를 가져옴 2016.07.09
		var deptCode = "";
		if(this.parent.div_DEPT instanceof Div){		
			deptCode = this.parent.div_DEPT.GetValue("DEPT_CODE");
		}
		if(typeof deptCode == "undefined" || deptCode==""){
			deptCode = this.DS_SEARCH.getColumn(0, "DEPT_CODE");
		}
		
		var nLeft = system.clientToScreenX(this, 10);
		var nTop  = system.clientToScreenY(this, 10);     
		var newChild = new ChildFrame;
		newChild.init("Popup1", "absolute", nLeft, nTop, 400, 400, null, null , "com::empno_P01.xfdl");
		newChild.set_openalign("center middle");
		newChild.set_dragmovetype("all");  
		newChild.set_showtitlebar(true);
		newChild.showModal(this.getOwnerFrame(), {EMPNO:empno2,EMPNM:empnm2,ID:this.parent.parent.parent.id,deptCd:deptCode} , this , "fn_callback5");
	}
}

/***********************************************************************************
* 설명	: 사원선택 팝업 콜백
***********************************************************************************/
this.fn_callback5 = function(sPopupId, sReturn)
{
	if(sPopupId == "Popup1")
	{
		this.DS_EMP.clearData();
        nRowCnt = this.DS_EMP.loadXML(sReturn);
        if(!nRowCnt){
            this.DS_EMP.addRow();
        } else {
			this.div_work.edt_emplnm.set_value(this.DS_EMP.getColumn(0, "EMPNM"));
			this.div_work.edt_empno.set_value(this.DS_EMP.getColumn(0, "EMPNO"));
			
			this.div_work.edt_jssfcClsfNm.set_value(this.DS_EMP.getColumn(0, "JSSFC_NM")+this.DS_EMP.getColumn(0, "HR_CLSF_NM"));
			this.div_work.edt_psitnNm.set_value(this.DS_EMP.getColumn(0, "DEPT_NM"));
			this.div_work.rdo_sexdstn.set_value(this.DS_EMP.getColumn(0, "SEXDSTN"));
        }
	}
}


 /*
 * 함수명  	: ds_rwardCnferList_oncolumnchanged
 * 설명 		: 포상종별 변경시 포상평점 입력
 *                
 * params  		: None
 * return Type 	: None
 * 사용법		: this.ds_rwardCnferList_oncolumnchanged();
 */
this.ds_rwardCnferList_oncolumnchanged = function(obj:Dataset, e:nexacro.DSColChangeEventInfo)
{
	var cRowp    = obj.rowposition;
	
	if(e.columnid == "PZDCR_SE") { 
		var pzdcrSe_row = this.ds_pzdcrSe.findRow("CODE", obj.getColumn(cRowp, "PZDCR_SE"));
		var wnpzGrade = this.ds_pzdcrSe.getColumn(pzdcrSe_row, "MSTK_VAL") == null ? '0' : this.ds_pzdcrSe.getColumn(pzdcrSe_row, "MSTK_VAL");
		obj.setColumn(obj.rowposition, "WNPZ_GRADE", wnpzGrade);
	}
	
	if(e.columnid == "INSID_SE") {
		var empSe    = obj.getColumn(cRowp, "INSID_SE");
		if(empSe == '1') {
			this.div_work.edt_emplnm.set_readonly(false);
			this.div_work.edt_empno.set_readonly(false);
			
			this.div_work.edt_emplnm.set_cssclass("edt_WF_Essential");
			this.div_work.edt_empno.set_cssclass("edt_WF_Essential");
			
			this.div_work.edt_extrlEmpNm.set_readonly(true);
			this.div_work.edt_jssfcClsfNm.set_readonly(true);
			this.div_work.edt_psitnNm.set_readonly(true);
			this.div_work.rdo_sexdstn.set_readonly(true);
			
			this.div_work.edt_extrlEmpNm.set_cssclass("edt_WF_Readonly");
			this.div_work.edt_jssfcClsfNm.set_cssclass("edt_WF_Readonly");
			this.div_work.edt_psitnNm.set_cssclass("edt_WF_Readonly");
			this.div_work.rdo_sexdstn.set_cssclass("edt_WF_Readonly");
			
			obj.getOrgColumn
			// 외부직원 정보 비움
			this.div_work.edt_extrlEmpNm.set_value("");
			
			// 기존에 있던 내부직원 정보 셋팅
			this.div_work.edt_emplnm.set_value(obj.getOrgColumn(cRowp, "INSID_NM"));
			this.div_work.edt_empno.set_value(obj.getOrgColumn(cRowp, "EMPNO"));
			this.div_work.edt_jssfcClsfNm.set_value(obj.getOrgColumn(cRowp, "JSSFC_CLSF_NM"));
			this.div_work.edt_psitnNm.set_value(obj.getOrgColumn(cRowp, "PSITN_NM"));
			this.div_work.rdo_sexdstn.set_value(obj.getOrgColumn(cRowp, "SEXDSTN"));
			
		}else {
		
			// 내부직원성명사번 비움
			this.div_work.edt_emplnm.set_value("");
			this.div_work.edt_empno.set_value("");
		
			this.div_work.edt_extrlEmpNm.set_value(obj.getOrgColumn(cRowp, "OUTSID_NM"));
			obj.setColumn(cRowp, "EMPNO", "");
			
			this.div_work.edt_emplnm.set_readonly(true);
			this.div_work.edt_empno.set_readonly(true);
			
			this.div_work.edt_emplnm.set_cssclass("edt_WF_Readonly");
			this.div_work.edt_empno.set_cssclass("edt_WF_Readonly");
			
			this.div_work.edt_extrlEmpNm.set_readonly(false);
			this.div_work.edt_jssfcClsfNm.set_readonly(false);
			this.div_work.edt_psitnNm.set_readonly(false);
			this.div_work.rdo_sexdstn.set_readonly(false);
			
			this.div_work.edt_extrlEmpNm.set_cssclass("edt_WF_Essential");
			this.div_work.edt_jssfcClsfNm.set_cssclass("edt_WF_Essential");
			this.div_work.edt_psitnNm.set_cssclass("edt_WF_Essential");
			this.div_work.rdo_sexdstn.set_cssclass("edt_WF_Essential");
		}
	}
}]]></Script>
  </Form>
</FDL>
