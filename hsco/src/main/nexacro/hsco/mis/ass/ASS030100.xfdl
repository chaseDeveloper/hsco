<?xml version="1.0" encoding="utf-8"?>
<FDL version="1.5">
  <TypeDefinition url="..\..\default_typedef.xml"/>
  <Form id="ASS030100" classname="ASS030100" left="0" top="0" width="1059" height="735" titletext="처분관리" onload="ASS030100_onload" oninit="ASS030100_oninit">
    <Layouts>
      <Layout>
        <Div id="div_search" taborder="0" top="0" height="33" left="0" cssclass="div_WFSA_Box" right="28">
          <Layouts>
            <Layout>
              <Static id="Static04" taborder="34" text="~" left="195" top="10" height="16" width="17"/>
              <Calendar id="cal_ACQS_DE2" taborder="1" left="208" top="5" height="22" width="110" dateformat="yyyy-MM-dd" value="null"/>
              <Calendar id="cal_ACQS_DE1" taborder="0" oneditclick="div_search_cal_ACQS_DE1_oneditclick" left="80" top="5" height="22" width="110" dateformat="yyyy-MM-dd" value="null"/>
              <Static id="Static05" taborder="46" text="15" visible="false" left="0" top="0" width="15" height="33" style="background:#00ffff66;"/>
              <Static id="sta_acqsDe" taborder="47" text="계획일자" cssclass="sta_WFSA_Label" left="15" top="5" width="90" height="21"/>
              <Static id="Static00" taborder="50" text="요청부서" cssclass="sta_WFSA_Label" left="332" top="5" height="21" width="64"/>
              <Div id="div_dept" taborder="2" url="com::deptCode.xfdl" left="396" top="5" height="21" async="false" width="195"/>
              <Static id="Static01" taborder="52" text="5" visible="false" left="75" top="0" height="33" style="background:#00ffff66;" width="5"/>
              <Static id="Static02" taborder="53" text="15" visible="false" left="30.9%" top="0" right="67.64%" height="33" style="background:#00ffff66;"/>
              <Static id="Static03" taborder="54" text="5" visible="false" left="38%" top="0" right="61.52%" height="33" style="background:#00ffff66;"/>
              <Static id="Static06" taborder="55" text="15" visible="false" left="57.43%" top="0" right="41.11%" height="33" style="background:#00ffff66;"/>
              <Static id="Static07" taborder="56" text="불용처리여부" cssclass="sta_WFSA_Label" left="605" top="5" height="21" width="90"/>
              <Static id="Static08" taborder="57" text="5" visible="false" left="67.15%" top="-1" right="32.36%" height="33" style="background:#00ffff66;"/>
              <Combo id="Combo00" taborder="3" left="696" top="5" height="21" width="80" codecolumn="codecolumn" datacolumn="datacolumn">
                <Dataset id="innerdataset">
                  <ColumnInfo>
                    <Column id="codecolumn" size="256"/>
                    <Column id="datacolumn" size="256"/>
                  </ColumnInfo>
                  <Rows>
                    <Row>
                      <Col id="codecolumn"/>
                      <Col id="datacolumn">전체</Col>
                    </Row>
                    <Row>
                      <Col id="codecolumn">1</Col>
                      <Col id="datacolumn">처리</Col>
                    </Row>
                    <Row>
                      <Col id="codecolumn">0</Col>
                      <Col id="datacolumn">미처리</Col>
                    </Row>
                  </Rows>
                </Dataset>
              </Combo>
            </Layout>
          </Layouts>
        </Div>
        <Static id="Static01" taborder="60" text="15" visible="false" left="1031" top="0" width="15" height="735" style="background:#1b3cd23c;align:center middle;"/>
        <Static id="Static00" taborder="61" text="스&#13;&#10;크&#13;&#10;롤&#13;&#10;13" visible="false" top="0" right="0" width="13" height="735" style="background:#d07b173c;align:center middle;"/>
        <Static id="Static36" taborder="62" text="10" visible="false" left="0" top="256" width="1031" height="10" style="background:#dc143c3c;align:center middle;"/>
        <Static id="sta_assetList" taborder="13" text="처분목록" cssclass="sta_WF_Title02" left="0" top="266" width="113" height="19" style="align:left middle;"/>
        <Static id="Static04" taborder="64" text="5" visible="false" left="0" top="285" width="1031" height="5" style="background:#dc143c3c;align:center middle;"/>
        <Grid id="grd_atldManageDetail" taborder="3" binddataset="ds_atldManageDetail" autoenter="select" useinputpanel="false" cellsizingtype="col" autosizingtype="row" left="0" top="288" right="508" bottom="0">
          <Formats>
            <Format id="default">
              <Columns>
                <Column size="60"/>
                <Column size="100"/>
                <Column size="80"/>
                <Column size="120"/>
                <Column size="200"/>
                <Column size="100"/>
                <Column size="70"/>
                <Column size="250"/>
                <Column size="100"/>
                <Column size="60"/>
                <Column size="60"/>
                <Column size="150"/>
              </Columns>
              <Rows>
                <Row size="24" band="head"/>
                <Row size="24" band="head"/>
                <Row size="24"/>
              </Rows>
              <Band id="head">
                <Cell rowspan="2" text="처분여부"/>
                <Cell col="1" rowspan="2" text="처분일자"/>
                <Cell col="2" rowspan="2" text="자산번호"/>
                <Cell col="3" rowspan="2" text="자산분류"/>
                <Cell col="4" rowspan="2" text="자산명"/>
                <Cell col="5" rowspan="2" text="처분금액"/>
                <Cell col="6" rowspan="2" text="처분구분"/>
                <Cell col="7" rowspan="2" text="사유"/>
                <Cell col="8" rowspan="2" text="단가"/>
                <Cell col="9" rowspan="2" text="수량"/>
                <Cell col="10" rowspan="2" text="단위"/>
                <Cell col="11" rowspan="2" text="규격"/>
              </Band>
              <Band id="body">
                <Cell displaytype="checkbox" edittype="none" text="bind:DISUSE_PROCESS_AT"/>
                <Cell col="1" displaytype="date" text="bind:DISUSE_PROCESS_DE" calendardisplaynulltype="none"/>
                <Cell col="2" text="bind:ASSETS_NO" autosizerow="limitmin"/>
                <Cell col="3" displaytype="normal" style="align:left;;" text="bind:ASSETS_CL_NM" editlimitbymask="decimal" combodisplay="edit"/>
                <Cell col="4" style="align:left;;" text="bind:ASSETS_NM"/>
                <Cell col="5" displaytype="number" style="align:right;padding: ;" text="bind:DISUSE_AMOUNT" editdisplay="edit" combodisplay="edit"/>
                <Cell col="6" displaytype="combo" edittype="expr:DISUSE_PROCESS_AT == '1' ? 'none' : 'combo'" text="bind:DISUSE_SE_CODE" editdisplay="edit" combodataset="ds_ass004" combocodecol="CODE" combodatacol="CODE_NM" combodisplay="expr:DISUSE_PROCESS_AT == '1' ? 'edit' : 'display'"/>
                <Cell col="7" style="align:left;" text="bind:DISUSE_PRVONSH" editdisplay="edit" combodisplay="edit"/>
                <Cell col="8" displaytype="number" style="align:right;padding:0 10 0 0;" text="bind:UNTPC"/>
                <Cell col="9" displaytype="number" style="padding: ;" text="bind:QY"/>
                <Cell col="10" displaytype="combo" style="align:center;" text="bind:UNIT" combodataset="ds_cmp002" combocodecol="CODE" combodatacol="CODE_NM" combodisplayrowcount="15"/>
                <Cell col="11" editfilter="none" style="align:left;;" text="bind:STNDRD"/>
              </Band>
            </Format>
          </Formats>
        </Grid>
        <Button id="btn_atld" taborder="2" text="자산처분실행" cssclass="btn_WF_Process" top="266" right="508" width="96" height="19" onclick="btn_atld_onclick"/>
        <Grid id="grd_atldAccnutAcnt" taborder="7" binddataset="ds_atldAccnutAcnt" autoenter="select" useinputpanel="false" right="28" height="233" width="470" autofittype="col" top="290" onexpandup="grd_atldManage_onexpandup">
          <Formats>
            <Format id="default">
              <Columns>
                <Column size="40"/>
                <Column size="70"/>
                <Column size="160"/>
                <Column size="100"/>
                <Column size="100"/>
              </Columns>
              <Rows>
                <Row size="24" band="head"/>
                <Row size="24"/>
                <Row size="24" band="summ"/>
              </Rows>
              <Band id="head">
                <Cell text="순번"/>
                <Cell col="1" colspan="2" cssclass="Cellgrd_WF_HeadEssential" text="회계계정과목"/>
                <Cell col="3" cssclass="Cellgrd_WF_HeadEssential" text="차변금액"/>
                <Cell col="4" cssclass="Cellgrd_WF_HeadEssential" text="대변금액"/>
              </Band>
              <Band id="body">
                <Cell text="bind:SEQ"/>
                <Cell col="1" text="bind:ACCNUT_ACNT_CODE"/>
                <Cell col="2" style="align:left;cursor:hand;" text="bind:ACCNUT_ACNT_NM" expandshow="expr:comp.parent.fn_expr() ? 'hide' : 'show'" expandsize="20"/>
                <Cell col="3" displaytype="number" edittype="expr:comp.parent.fn_expr() ? 'none' : 'masknumber'" style="align:right;" text="bind:DEBTOR_AMOUNT" mask="expr:!DEBTOR_AMOUNT ? &quot;!###,###,###,###,###&quot; : &quot;!###,###,###,###,##0&quot;" maskchar=" " editlimit="15" editdisplay="expr:comp.parent.fn_expr() ? 'edit' : 'display'" editlimitbymask="integer"/>
                <Cell col="4" displaytype="number" edittype="expr:comp.parent.fn_expr() ? 'none' : 'masknumber'" style="align:right;" text="bind:CRDIT_AMOUNT" mask="expr:!CRDIT_AMOUNT ? &quot;!###,###,###,###,###&quot; : &quot;!###,###,###,###,##0&quot;" maskchar=" " editlimit="15" editdisplay="expr:comp.parent.fn_expr() ? 'edit' : 'display'" editlimitbymask="integer"/>
              </Band>
              <Band id="summary">
                <Cell colspan="3"/>
                <Cell col="3" displaytype="number" style="align:right;" text="expr:dataset.getSum(&quot;DEBTOR_AMOUNT&quot;)"/>
                <Cell col="4" displaytype="number" style="align:right;" text="expr:dataset.getSum(&quot;CRDIT_AMOUNT&quot;)"/>
              </Band>
            </Format>
          </Formats>
        </Grid>
        <Static id="Static06" taborder="75" text="10" visible="false" left="551" width="10" style="background:#dc143c3c;align:center middle;" bottom="0" height="600"/>
        <Static id="sta_assetList01" taborder="76" text="회계계정과목" cssclass="sta_WF_Title02" top="266" width="113" height="19" style="align:left middle;" right="385"/>
        <Button id="btn_Add_Tpg1_R" taborder="4" text="행추가" onclick="btn_Add_Row" cssclass="btn_WF_Gridadd" top="266" right="162" width="64" height="19"/>
        <Button id="btn_Del_Tpg1_R" taborder="5" text="행삭제" onclick="btn_Del_Row" cssclass="btn_WF_Griddel" top="266" right="95" width="64" height="19" visible="true"/>
        <Button id="btn_Cancel_Tpg1_R" taborder="6" text="행취소" onclick="btn_Cancel_Row" cssclass="btn_WF_Gridcnl" top="266" right="28" width="64" height="19" visible="true"/>
        <Static id="Static61" taborder="80" text="10" visible="false" left="0" top="33" width="1032" height="10" style="background:#dc143c3c;align:center middle;"/>
        <Grid id="grd_atldManage" taborder="1" binddataset="ds_atldManage" autoenter="select" useinputpanel="false" autofittype="col" left="1" top="67" right="28" height="189">
          <Formats>
            <Format id="default">
              <Columns>
                <Column size="80"/>
                <Column size="50"/>
                <Column size="120"/>
                <Column size="70"/>
                <Column size="120"/>
                <Column size="120"/>
                <Column size="120"/>
                <Column size="120"/>
              </Columns>
              <Rows>
                <Row size="24" band="head"/>
                <Row size="24" band="head"/>
                <Row size="24"/>
              </Rows>
              <Band id="head">
                <Cell rowspan="2" cssclass="Cellgrd_WF_HeadEssential" text="기준년도"/>
                <Cell col="1" rowspan="2" text="차수"/>
                <Cell col="2" rowspan="2" cssclass="Cellgrd_WF_HeadEssential" text="계획일자"/>
                <Cell col="3" colspan="2" text="요청부서"/>
                <Cell col="5" rowspan="2" text="취득금액합계"/>
                <Cell col="6" rowspan="2" text="상각누계액합계"/>
                <Cell col="7" rowspan="2" text="처분금액합계"/>
                <Cell row="1" col="3" text="부서"/>
                <Cell row="1" col="4" text="부서명"/>
              </Band>
              <Band id="body">
                <Cell edittype="expr:dateset.getRowType(currow) == 2 ? 'masknumber' : 'none'" editfilter="integer" text="bind:REQST_YEAR" mask="9999"/>
                <Cell col="1" text="bind:ODR"/>
                <Cell col="2" displaytype="date" text="bind:DISUSE_PLAN_DE" calendardisplaynulltype="none"/>
                <Cell col="3" text="bind:REQUST_DEPT"/>
                <Cell col="4" style="align:left;" text="bind:DEPT_NM"/>
                <Cell col="5" displaytype="number" style="align:right;padding:0 10 0 0;" text="bind:ACQS_AMOUNT"/>
                <Cell col="6" displaytype="number" style="align:right;padding:0 10 0 0;" text="bind:DPRC_ACMTL_AMOUNT"/>
                <Cell col="7" displaytype="number" style="align:right;padding:0 10 0 0;" text="bind:DISUSE_AMOUNT"/>
              </Band>
            </Format>
          </Formats>
        </Grid>
        <Static id="sta_assetList00" taborder="82" text="불용계획목록" cssclass="sta_WF_Title02" left="0" top="42" width="113" height="19" style="align:left middle;"/>
        <Static id="Static02" taborder="83" text="5" visible="false" left="0" top="62" right="28" height="5" style="background:#dc143c3c;align:center middle;"/>
      </Layout>
    </Layouts>
    <Objects>
      <Dataset id="ds_cond" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="REQUST_DEPT" type="STRING" size="256"/>
          <Column id="REQUST_DEPT_NM" type="STRING" size="256"/>
          <Column id="FDATE" type="STRING" size="256"/>
          <Column id="TDATE" type="STRING" size="256"/>
          <Column id="DISUSE_PROCESS_AT" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_cond02" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="REQST_YEAR" type="STRING" size="256"/>
          <Column id="ODR" type="STRING" size="256"/>
          <Column id="DISUSE_PROCESS_AT" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_cond03" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="REQST_YEAR" type="STRING" size="256"/>
          <Column id="ODR" type="STRING" size="256"/>
          <Column id="ASSETS_NO" type="STRING" size="256"/>
        </ColumnInfo>
        <Rows>
          <Row/>
        </Rows>
      </Dataset>
      <Dataset id="ds_atldManage" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false" onrowposchanged="ds_atldManage_onrowposchanged" canrowposchange="ds_atldManage_canrowposchange">
        <ColumnInfo>
          <Column id="REQST_YEAR" type="STRING" size="256"/>
          <Column id="ODR" type="STRING" size="256"/>
          <Column id="DISUSE_PLAN_DE" type="STRING" size="256"/>
          <Column id="REQUST_DEPT" type="STRING" size="256"/>
          <Column id="DEPT_NM" type="STRING" size="256"/>
          <Column id="DISUSE_PROCESS_AT" type="STRING" size="256"/>
          <Column id="DISUSE_PROCESS_DE" type="STRING" size="256"/>
          <Column id="DEBTOR_ACNT_CODE" type="STRING" size="256"/>
          <Column id="DEBTOR_ACNT_CODE_NM" type="STRING" size="256"/>
          <Column id="CRDIT_ACNT_CODE" type="STRING" size="256"/>
          <Column id="CRDIT_ACNT_CODE_NM" type="STRING" size="256"/>
          <Column id="SANCTN_NO" type="STRING" size="256"/>
          <Column id="SANCTN_KND" type="STRING" size="256"/>
          <Column id="ACQS_AMOUNT" type="BIGDECIMAL" size="256"/>
          <Column id="DPRC_ACMTL_AMOUNT" type="BIGDECIMAL" size="256"/>
          <Column id="DISUSE_AMOUNT" type="BIGDECIMAL" size="256"/>
          <Column id="CHIT_NO" type="STRING" size="256"/>
          <Column id="SUMRY_1" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_atldManageDetail" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false" onrowposchanged="ds_atldManageDetail_onrowposchanged" oncolumnchanged="ds_atldManageDetail_oncolumnchanged" canrowposchange="ds_atldManageDetail_canrowposchange">
        <ColumnInfo>
          <Column id="DISUSE_PLAN_DE" type="STRING" size="256"/>
          <Column id="REQUST_DEPT" type="STRING" size="256"/>
          <Column id="DEPT_NM" type="STRING" size="256"/>
          <Column id="ASSETS_NO" type="STRING" size="256"/>
          <Column id="ASSETS_CL_CODE" type="STRING" size="256"/>
          <Column id="ASSETS_CL_NM" type="STRING" size="256"/>
          <Column id="ASSETS_SE" type="STRING" size="256"/>
          <Column id="ASSETS_NM" type="STRING" size="256"/>
          <Column id="DISUSE_AMOUNT" type="BIGDECIMAL" size="256"/>
          <Column id="DISUSE_SE_CODE" type="STRING" size="256"/>
          <Column id="DISUSE_PRVONSH" type="STRING" size="256"/>
          <Column id="UNTPC" type="STRING" size="256"/>
          <Column id="QY" type="STRING" size="256"/>
          <Column id="UNIT" type="STRING" size="256"/>
          <Column id="STNDRD" type="STRING" size="256"/>
          <Column id="ACQS_AMOUNT" type="BIGDECIMAL" size="256"/>
          <Column id="DPRC_ACMTL_AMOUNT" type="BIGDECIMAL" size="256"/>
          <Column id="GOVSUBY_ACQS_AMOUNT" type="BIGDECIMAL" size="256"/>
          <Column id="GOVSUBY_DPRC_ACMTL_AMOUNT" type="BIGDECIMAL" size="256"/>
          <Column id="REQST_YEAR" type="STRING" size="256"/>
          <Column id="ODR" type="STRING" size="256"/>
          <Column id="TRMEND_BLCE" type="BIGDECIMAL" size="256"/>
          <Column id="DISUSE_PROCESS_AT" type="STRING" size="256"/>
          <Column id="DISUSE_PROCESS_DE" type="STRING" size="256"/>
          <Column id="CHIT_NO" type="STRING" size="256"/>
          <Column id="SUMRY_1" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_acc001" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="CODE" type="STRING" size="256"/>
          <Column id="CODE_NM" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_cmp002" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="CODE" type="STRING" size="256"/>
          <Column id="CODE_NM" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_ass004" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="CODE" type="STRING" size="256"/>
          <Column id="CODE_NM" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_validation" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="compId" type="STRING" size="256"/>
          <Column id="colId" type="STRING" size="256"/>
          <Column id="PK" type="STRING" size="256"/>
          <Column id="notNull" type="STRING" size="256"/>
          <Column id="type" type="STRING" size="256"/>
          <Column id="nlength" type="STRING" size="256"/>
          <Column id="from" type="STRING" size="256"/>
          <Column id="to" type="STRING" size="256"/>
          <Column id="lengthChkGb" type="STRING" size="256"/>
          <Column id="msgId" type="STRING" size="256"/>
          <Column id="expr" type="STRING" size="256"/>
          <Column id="func" type="STRING" size="256"/>
        </ColumnInfo>
        <Rows>
          <Row>
            <Col id="compId">ds_cond</Col>
            <Col id="colId">FDATE</Col>
            <Col id="notNull"/>
            <Col id="from">FDATE</Col>
            <Col id="to">TDATE</Col>
            <Col id="msgId">계획시작일자^계획종료일자</Col>
          </Row>
          <Row>
            <Col id="compId">ds_cond</Col>
            <Col id="colId">TDATE</Col>
            <Col id="PK">[Undefined]</Col>
            <Col id="notNull"/>
            <Col id="type">[Undefined]</Col>
            <Col id="nlength">[Undefined]</Col>
            <Col id="from">FDATE</Col>
            <Col id="to">TDATE</Col>
            <Col id="lengthChkGb">[Undefined]</Col>
            <Col id="msgId">계획시작일자^계획종료일자</Col>
            <Col id="expr">[Undefined]</Col>
            <Col id="func">[Undefined]</Col>
          </Row>
          <Row>
            <Col id="compId">ds_atldManageDetail</Col>
            <Col id="colId">DISUSE_SE_CODE</Col>
            <Col id="msgId">처분구분</Col>
            <Col id="notNull">Y</Col>
          </Row>
        </Rows>
      </Dataset>
      <Dataset id="ds_atldAccnutAcnt" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="REQST_YEAR" type="STRING" size="256"/>
          <Column id="ODR" type="STRING" size="256"/>
          <Column id="ASSETS_NO" type="STRING" size="256"/>
          <Column id="SEQ" type="STRING" size="256"/>
          <Column id="ACCNUT_YEAR" type="STRING" size="256"/>
          <Column id="ACCNUT_ACNT_CODE" type="STRING" size="256"/>
          <Column id="ACCNUT_ACNT_NM" type="STRING" size="256"/>
          <Column id="DEBTOR_AMOUNT" type="BIGDECIMAL" size="256"/>
          <Column id="CRDIT_AMOUNT" type="BIGDECIMAL" size="256"/>
          <Column id="CHIT_NO" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="Dataset04" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false"/>
      <Dataset id="ds_atldManageDetail_sub" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false" onrowposchanged="ds_atldManageDetail_onrowposchanged">
        <ColumnInfo>
          <Column id="DISUSE_PLAN_DE" type="STRING" size="256"/>
          <Column id="REQUST_DEPT" type="STRING" size="256"/>
          <Column id="DEPT_NM" type="STRING" size="256"/>
          <Column id="ASSETS_NO" type="STRING" size="256"/>
          <Column id="ASSETS_CL_CODE" type="STRING" size="256"/>
          <Column id="ASSETS_CL_NM" type="STRING" size="256"/>
          <Column id="ASSETS_SE" type="STRING" size="256"/>
          <Column id="ASSETS_NM" type="STRING" size="256"/>
          <Column id="DISUSE_AMOUNT" type="BIGDECIMAL" size="256"/>
          <Column id="DISUSE_SE_CODE" type="STRING" size="256"/>
          <Column id="DISUSE_PRVONSH" type="STRING" size="256"/>
          <Column id="UNTPC" type="STRING" size="256"/>
          <Column id="QY" type="STRING" size="256"/>
          <Column id="UNIT" type="STRING" size="256"/>
          <Column id="STNDRD" type="STRING" size="256"/>
          <Column id="ACQS_AMOUNT" type="BIGDECIMAL" size="256"/>
          <Column id="DPRC_ACMTL_AMOUNT" type="BIGDECIMAL" size="256"/>
          <Column id="GOVSUBY_ACQS_AMOUNT" type="BIGDECIMAL" size="256"/>
          <Column id="GOVSUBY_DPRC_ACMTL_AMOUNT" type="BIGDECIMAL" size="256"/>
          <Column id="REQST_YEAR" type="STRING" size="256"/>
          <Column id="ODR" type="STRING" size="256"/>
          <Column id="TRMEND_BLCE" type="BIGDECIMAL" size="256"/>
          <Column id="DISUSE_PROCESS_AT" type="STRING" size="256"/>
          <Column id="DISUSE_PROCESS_DE" type="STRING" size="256"/>
          <Column id="CHIT_NO" type="STRING" size="256"/>
          <Column id="SUMRY_1" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
    </Objects>
    <Bind>
      <BindItem id="item2" compid="div_search.cal_ACQS_DE1" propid="value" datasetid="ds_cond" columnid="FDATE"/>
      <BindItem id="item3" compid="div_search.cal_ACQS_DE2" propid="value" datasetid="ds_cond" columnid="TDATE"/>
      <BindItem id="item5" compid="div_search.Combo00" propid="value" datasetid="ds_cond" columnid="DISUSE_PROCESS_AT"/>
    </Bind>
    <Script type="xscript5.0"><![CDATA[/***********************************************************************
 * 화면ID   : ASS030100.xfdl
 * 화면명   : 불용관리
 * 화면설명 : 불용품을 관리한다.
 * 작성일   : 2015.06.30
 * 작성자   : 이혜선
 * 수정이력 : 
 ***********************************************************************
 *     수정일     수정자   내용
 ***********************************************************************
 *    
 ***********************************************************************
 */

/***********************************************************************
 * Script Include 
 ***********************************************************************/
// 시스템 공통 라이브러리 Include
include "lib::comInclude.xjs";
include "mis_lib::misUtil.xjs";

/***********************************************************************
 * 화면 변수 선언부
 ***********************************************************************/
this.saveRow = -1;
this.saveRow2 = -1;
this.checkDs = [this.ds_atldManageDetail, this.ds_atldAccnutAcnt];
var authAt = false;

/***********************************************************************
 * onInit / onLoad 영역
 ***********************************************************************/
this.ASS030100_oninit = function(obj:Form, e:nexacro.InitEventInfo)
{
	// Form 초기화
	this.fn_init_form();

	// DataSet 초기화
	this.fn_init_dataset();
}

this.ASS030100_onload = function(obj:Form, e:nexacro.LoadEventInfo)
{	
	this.ds_cond.setColumn(0, "FDATE", this.dateUtils.today().substr(0,4) + "0101");
	this.ds_cond.setColumn(0, "TDATE", this.dateUtils.today());
	this.ds_cond.setColumn(0, "DISUSE_PROCESS_AT", "");
	this.ds_cond.setColumn(0, "REQUST_DEPT", "000000");
	this.ds_cond.setColumn(0, "REQUST_DEPT_NM", "화성도시공사");
	
	// 데이터셋 동적 바인딩(부서팝업)
	this.div_search.div_dept.fn_setBind("ds_cond","REQUST_DEPT","REQUST_DEPT_NM");
	
	this.div_search.div_dept.div_Search.edt_deptCode.set_cssclass("edt_WF_Essential");
	this.div_search.div_dept.div_Search.edt_deptNm.set_cssclass("edt_WF_Essential");
	this.div_search.div_dept.div_Search.edt_deptCode.set_readonly(true);
	this.div_search.div_dept.div_Search.edt_deptNm.set_readonly(true);
	
	// 공통코드
	var comboParams = [
	    ["ds_cmp002", "CMP002", "Y", ""]	// 단위
	   ,["ds_ass004", "ASS004", "Y", ""]	// 처분구분
	];
	
	// 권한 분리
	if(this.gfn_authGrpId("ASS_ADMIN") > -1) {		// 자산결재자
		authAt = true;
	}
	
	if(authAt) {
		// 검색조건 - 부서
		this.div_search.div_dept.fn_setReadonly(false);
		this.div_search.div_dept.set_enable(true);
		this.div_search.div_dept.div_Search.edt_deptCode.set_cssclass("");
		this.div_search.div_dept.div_Search.edt_deptNm.set_cssclass("");
		this.btn_atld.set_enable(true);
	
	}else {
	
		// 검색조건 - 부서
		this.div_search.div_dept.fn_setReadonly(true);
		this.div_search.div_dept.set_enable(false);
		this.div_search.div_dept.div_Search.edt_deptCode.set_cssclass("edt_WF_Essential");
		this.div_search.div_dept.div_Search.edt_deptNm.set_cssclass("edt_WF_Essential");
		this.btn_atld.set_enable(false);
	}
	
	var callback = function (svcId, errorCode, errorMsg) {
		this.ds_ass004.filter("CODE != '0'");
		
		// 조회 이벤트
		this.fn_search();
		
	};
	this.gfn_comboLoad (comboParams, callback);
}

/***********************************************************************
 * Form/Dataset 오브젝트 초기화
 ***********************************************************************/
/*
 * 함수명  	: initForm
 * 설명 		: Form을 초기화한다.
 * params  		: None
 * return Type 	: None
 * 사용법		: this.initForm();
 */
this.fn_init_form = function()
{
	// 시스템 공통으로 Form을 Initialize 한다.
	this.gfn_initForm(this);
	this.fn_misFormInit(this);
}

/*
 * 함수명  	: initDataset
 * 설명 		: Dataset을 초기화한다.
 * params  		: None
 * return Type 	: None
 * 사용법		: this.initDataset();
 */
this.fn_init_dataset = function()
{
	this.gfn_initCondDs(this, this.div_search);
}


/***********************************************************************
* Transaction 영역 시작
************************************************************************/

/***********************************************************************
 * Transaction 관련 이벤트 핸들러 
 **********************************************************************/
/*
 * 함수명  	: fn_search
 * 설명 		: 조회 이벤트 처리(불용품관리)
 * params  		: None
 * return Type 	: None
 * 사용법		: this.fn_search();
 */
this.fn_search = function()
{	
	// validation 체크(검색조건)
	if(!this.gfn_checkValidation_NoUpdChk(this.ds_cond, this.ds_validation)) {
		return false;
	}
	
	//this.ds_atldManage.clearData();
	this.ds_atldManageDetail_sub.clearData();
	this.ds_atldAccnutAcnt.clearData();
	this.fn_transaction("select");
}

/*
 * 함수명  	: fn_search_sub
 * 설명 		: 조회 이벤트 처리(불용품관리상세)
 * params  		: None
 * return Type 	: None
 * 사용법		: this.fn_search_sub();
 */
this.fn_search_sub = function()
{
	var nRow      = this.ds_atldManage.rowposition;
	var reqstYear = this.ds_atldManage.getColumn(nRow, "REQST_YEAR");
	var odr       = this.ds_atldManage.getColumn(nRow, "ODR");

	var disuseProcessAt = this.ds_cond.getColumn(0, "DISUSE_PROCESS_AT");

	this.ds_cond02.clearData();
	this.ds_cond02.addRow();
	
	this.ds_cond02.setColumn(0, "REQST_YEAR"       , reqstYear);
	this.ds_cond02.setColumn(0, "ODR"              , odr);
	this.ds_cond02.setColumn(0, "DISUSE_PROCESS_AT", disuseProcessAt);
	
	this.fn_transaction("select01");
}

/*
 * 함수명  	: fn_save
 * 설명 		: 저장 이벤트 처리
 * params  		: None
 * return Type 	: None
 * 사용법		: this.fn_save();
 */
this.fn_save= function()
{
	if(Ex.util.isUpdated(this.ds_atldManageDetail) || Ex.util.isUpdated(this.ds_atldAccnutAcnt)){
		if(this.gfn_message("confirm.저장.여부")) {
			this.saveRow  = this.ds_atldManageDetail.rowposition;
			this.saveRow2 = this.ds_atldAccnutAcnt.rowposition;
			this.fn_transaction("save")
		}
	}else{
		this.gfn_message("comm.데이터.변경.없음");
	}

	
}

/**********************************************************************
 * CALL TRANSACTION 영역
 **********************************************************************/
 
/*
 * 함수명  	: fn_transaction
 * 설명 		: Transaction 요청 처리 함수
 * params  		: strSvcId : 서비스요청 ID
 * return Type 	: None
 * 사용법		: this.fn_transaction("SELECT");
 */
this.fn_transaction = function(strSvcId)
{
	switch (strSvcId) {
		case "select":				// 불용품관리 조회 
			var sController   	= "hsco/mis/ass/ASS030100/atldManageList.do";
			var sInDatasets   	= "input1=ds_cond";
			var sOutDatasets  	= "ds_atldManage=output1";
			break;
		case "select01":			// 불용품관리상세 조회 
			var sController   	= "hsco/mis/ass/ASS030100/atldManageDetail.do";
			var sInDatasets   	= "input1=ds_cond02";
			var sOutDatasets  	= "ds_atldManageDetail=output1";
			break;
		case "select02":			// 회계계정과목 조회 
			var sController   	= "hsco/mis/ass/ASS030100/atldAccnutAcnt.do";
			var sInDatasets   	= "input1=ds_cond03";
			var sOutDatasets  	= "ds_atldAccnutAcnt=output2";
			break;			
		case "save":				// 불용품관리상세, 회계계정과목 저장
			var sController   	= "hsco/mis/ass/ASS030100/atldManageCUD.do";	
			var sInDatasets   	= "input1=ds_atldManageDetail:U input2=ds_atldAccnutAcnt:U";
			var sOutDatasets  	= "";
			break;
		case "disuseProcess":       // 불용처리실행
			var sController   	= "hsco/mis/ass/ASS030100/disuseProcess.do";	
			var sInDatasets   	= "input1=ds_atldManageDetail_sub:A input2=ds_atldAccnutAcnt:A";
			var sOutDatasets  	= "";
			break;
		case "disuseProcessCancel":       // 불용처리실행취소
			var sController   	= "hsco/mis/ass/ASS030100/disuseProcessCancel.do";	
			var sInDatasets   	= "input1=ds_atldManageDetail_sub:A input2=ds_atldAccnutAcnt:A";
			var sOutDatasets  	= "";
			break;
	}

	Ex.core.tran(this, strSvcId, sController, sInDatasets, sOutDatasets);
}

 /**********************************************************************
 * Transaction Callback 영역
 ***********************************************************************/
 
 /*
 * 함수명  	: fn_callBack
 * 설명 		: Transaction Callback 처리
 * params  		: strSvcId    : 서비스요청 ID
 *                nErrorCode  : 오류 메시지 코드 ([예] 0 : Success, 그밖의 경우, error)
 *                strErrorMsg : 오류 메시지([예]  success.insert|정상적으로 등록되었습니다.)
 * return Type 	: None
 * 사용법		: 
 */
this.fn_callBack = function (strSvcId, nErrorCode, strErrorMsg)
{
	trace(strSvcId);
	// 오류 및 성공 메시지를 화면에 보여준다.
	if (nErrorCode != 0){
		this.gfn_callback_message(strSvcId, nErrorCode, strErrorMsg);
	} else {
		// 실패 메시지를 보여주는 동작 외에 처리할 내용이 있으면 아래에 기술.
		switch (strSvcId) {	
			case "select":				// 불용품관리 조회
					
				break;
			case "select01":			// 불용품관리상세 조회
				this.ds_atldManageDetail.applyChange();
				this.ds_atldAccnutAcnt.applyChange();
				
				if(this.saveRow > -1){
					var tempRow = this.saveRow;
					this.saveRow = -1;
					this.ds_atldManageDetail.set_rowposition(tempRow);
					
				}
				trace("select01 콜백 "+this.ds_atldAccnutAcnt.rowposition);
				break;
			case "save":		// 불용품관리 저장
				this.gfn_message("success.처리.성공");
				this.fn_search();
				break;
			case "select02":			// 회계계정과목 조회 
				if(this.saveRow2 > -1){
					var tempRow = this.saveRow2;
					this.saveRow2 = -1;
					this.ds_atldAccnutAcnt.set_rowposition(tempRow);
				}		
				break;
			case "disuseProcess":       // 불용처리실행
				this.gfn_message("success.처리.성공");
				this.fn_search();			
				break;
			case "disuseProcessCancel":       // 불용처리실행취소
				this.gfn_message("success.처리.성공");
				this.fn_search();			
				break;
		}
	}
}

/*
 * 함수명  	: fn_callback5
 * 설명 		: 팝업 콜백함수
 * params  		: None
 * return Type 	: None
 * 사용법		: this.fn_callback5();
 */
this.fn_callback5 = function(sPopupId, sReturn)
{
    var dsRtn = new Dataset();
    nRowCnt = dsRtn.loadXML(sReturn);
	
	if(sPopupId == "ACC010103_P01")
	{
        if(nRowCnt){
			var nRow = this.ds_atldAccnutAcnt.rowposition;
			
			this.ds_atldAccnutAcnt.setColumn(nRow, "ACCNUT_YEAR",   dsRtn.getColumn(0, "ACCNUT_YEAR"));
            this.ds_atldAccnutAcnt.setColumn(nRow, "ACCNUT_ACNT_CODE",   dsRtn.getColumn(0, "ACCNUT_ACNT_CODE"));
            this.ds_atldAccnutAcnt.setColumn(nRow, "ACCNUT_ACNT_NM", dsRtn.getColumn(0, "ACCNUT_ACNT_NM"));
        }
	}	
	
}
/***********************************************************************
* Transaction 영역 끝
************************************************************************/

/***********************************************************************
* non-Transaction 관련 컴포넌트 이벤트 처리 함수
************************************************************************
* 1. Button 영역 
* 2. 데이터셋 영역
* 3. 그리드 영역
* 4. 팝업영역
************************************************************************/

/**********************************************************************
* Button 영역 
***********************************************************************/
/*
 * 함수명  	: fn_cancel
 * 설명 		: 취소 버튼 이벤트
 * params  		: None
 * return Type 	: None
 * 사용법		: this.fn_cancel();
 */
this.fn_cancel = function(obj:Button,  e:nexacro.ClickEventInfo)
{
	if (this.gfn_message("confirm.취소여부")) {  //모든 내용을 복원 하시겠습니까?
		this.ds_atldManage.reset();		//DATASET ROLLBACK
		this.ds_atldManage.applyChange();	//DATASET COMMIT
		return;
	}
}

/*
 * 함수명  	: btn_Add_Row
 * 설명 		: 회계계정과목 행추가 이벤트
 * params  		: None
 * return Type 	: None
 * 사용법		: this.btn_Add_Row();
 */
this.btn_Add_Row = function(obj:Button,  e:nexacro.ClickEventInfo)
{
	var nRow = this.ds_atldManageDetail.rowposition;
	
	if(nRow < 0){
		this.gfn_message("comm.항목.선택.요청", "처분대상자산");
		return;
	}
	
	var processAt = this.ds_atldManageDetail.getColumn(nRow, "DISUSE_PROCESS_AT");
	if(processAt == "1"){
		this.gfn_message("info.처리불가", "이미 자산처분이 완료되었습니다.");
		return;
	}
	
	var reqstYear = this.ds_atldManageDetail.getColumn(nRow, "REQST_YEAR");
	var odr = this.ds_atldManageDetail.getColumn(nRow, "ODR");
	var assetsNo = this.ds_atldManageDetail.getColumn(nRow, "ASSETS_NO");
	
	nRow = this.ds_atldAccnutAcnt.addRow();

	this.ds_atldAccnutAcnt.setColumn(nRow, "REQST_YEAR", reqstYear);
	this.ds_atldAccnutAcnt.setColumn(nRow, "ODR", odr);
	this.ds_atldAccnutAcnt.setColumn(nRow, "ASSETS_NO", assetsNo);
}

/*
 * 함수명  	: btn_Del_Row
 * 설명 		: 회계계정과목 행삭세 이벤트
 * params  		: None
 * return Type 	: None
 * 사용법		: this.btn_Del_Row();
 */
this.btn_Del_Row = function(obj:Button,  e:nexacro.ClickEventInfo)
{
	var nRow = this.ds_atldManageDetail.rowposition;
	if(nRow > -1){
		if(this.ds_atldManageDetail.getColumn(nRow, "DISUSE_PROCESS_AT") == "0"){
				
			if ( confirm( "정말로 삭제하시겠습니까?" ) ) {
				var nRow = this.ds_atldAccnutAcnt.rowposition;
				this.ds_atldAccnutAcnt.deleteRow(nRow);	
			}
		} else {
			this.gfn_message("fail.삭제.불가", "처분 처리가 완료되어");
		}
	}
}

/*
 * 함수명  	: btn_Cancel_Row
 * 설명 		: 회계계정과목 행취소 이벤트
 * params  		: None
 * return Type 	: None
 * 사용법		: this.btn_Cancel_Row();
 */
this.btn_Cancel_Row = function(obj:Button,  e:nexacro.ClickEventInfo)
{
	if ( this.gfn_message("confirm.취소여부") ) {
		this.ds_atldAccnutAcnt.reset();			//DATASET ROLLBACK
		this.ds_atldAccnutAcnt.applyChange();	//DATASET COMMIT
		return;
	}
}

/*
 * 함수명  	: btn_atld_onclick
 * 설명 		: 불용처리실행 버튼 이벤트
 * params  		: None
 * return Type 	: None
 * 사용법		: this.btn_atld_onclick();
 */
this.btn_atld_onclick = function(obj:Button,  e:nexacro.ClickEventInfo)
{
	var nRow = this.ds_atldManageDetail.rowposition;
	var processAt = this.ds_atldManageDetail.getColumn(nRow, "DISUSE_PROCESS_AT");
	
	// 자산처분실행
	if(processAt != "1") {
		
		if(!application.confirm("자산처분실행을 진행하시겠습니까?")) {
			return false;
		}
			
		if(nRow < 0){
			this.gfn_message("comm.항목.선택.요청", "처분대상자산");
			return;
		}
		
		var disuseSeCode = this.ds_atldManageDetail.getColumn(nRow, "DISUSE_SE_CODE");
		if(this.comUtils.isNull(disuseSeCode)){
			this.gfn_message("comm.항목.입력.을", "처분구분");
			return false;
		}

		if(processAt == '1'){
			this.gfn_message("info.처리불가", "이미 자산처분이 완료되었습니다.");
			return
		}
		var disuseAmt    = this.ds_atldManageDetail.getColumn(nRow, "DISUSE_AMOUNT");		// 처분금액
		
		
		var nRowCnt = this.ds_atldAccnutAcnt.getRowCount();
		if(nRowCnt <= 1) {
			this.gfn_message("info.항목.건수.이상", "회계계정과목을 2건");
			return
		}
		
		for(var i=0; i<nRowCnt; i++){
			var year = this.ds_atldAccnutAcnt.getColumn(i, "ACCNUT_YEAR");
			
			if(this.comUtils.isNullEmpty(year)){
				this.gfn_message("comm.항목.입력.을", "회계계정과목");
				return;
			}
		}

		// 차변,대변 합계가 일치하는지 체크
		if(Number(disuseAmt) != Number(this.ds_atldAccnutAcnt.getSum("DEBTOR_AMOUNT"))) {
			this.gfn_message("errors.항목값.범위.동일", "차변금액, 대변금액의 각 합계|처분금액합계");
			return;
		} else if(Number(disuseAmt) != Number(this.ds_atldAccnutAcnt.getSum("CRDIT_AMOUNT"))){
			this.gfn_message("errors.항목값.범위.동일", "차변금액, 대변금액의 각 합계|처분금액합계");
			return;
		}

		var assetsNm = this.ds_atldManageDetail.getColumn(nRow, "ASSETS_NM") + " 자산품목 처분";
		this.ds_atldManageDetail.setColumn(nRow, "SUMRY_1", assetsNm);
		this.ds_atldManageDetail.setColumn(nRow, "DISUSE_PROCESS_AT", "1");
		this.ds_atldManageDetail.setColumn(nRow, "DISUSE_PROCESS_DE", this.dateUtils.today());
		
		this.ds_atldManageDetail_sub.clearData;
		this.ds_atldManageDetail_sub.addRow();
		this.ds_atldManageDetail_sub.copyRow(0, this.ds_atldManageDetail, nRow);
		
		this.saveRow = nRow;
		
		this.fn_transaction("disuseProcess");
	
	// 자산처분취소
	}else {
			
		if(!application.confirm("자산처분취소를 진행하시겠습니까?")) {
			return false;
		}
	
		this.ds_atldManageDetail.setColumn(nRow, "DISUSE_PROCESS_AT", "0");
		this.ds_atldManageDetail.setColumn(nRow, "DISUSE_PROCESS_DE", "");
		
		this.ds_atldManageDetail_sub.clearData;
		this.ds_atldManageDetail_sub.addRow();
		this.ds_atldManageDetail_sub.copyRow(0, this.ds_atldManageDetail, nRow);
	
		this.fn_transaction("disuseProcessCancel");
	}
}
/**********************************************************************
* 데이터셋 영역  \
***********************************************************************/

/*
 * 함수명  	: DS_ASSETS_MASTR_TABLE_onrowposchanged
 * 설명 		: 불용품관리 ROW 변경 후 이벤트
 * params  		: None
 * return Type 	: None
 * 사용법		: this.DS_ASSETS_MASTR_TABLE_onrowposchanged();
 */
this.ds_atldManage_onrowposchanged = function(obj:Dataset, e:nexacro.DSRowPosChangeEventInfo)
{
	this.ds_atldManageDetail.clearData();
	
	if(e.newrow > -1){
		this.fn_search_sub();
	}
}

/**********************************************************************
* 그리드 영역 
***********************************************************************/
/*
 * 함수명  	: div_work_grd_Thng_Recipt_Plan_Manage_onexpandup
 * 설명 		: 불용계획목록 그리드 클릭 이벤트 
 * params  		: None
 * return Type 	: None
 * 사용법		: this.div_work_grd_Thng_Recipt_Plan_Manage_onexpandup();
 */
this.grd_atldManage_oncellclick = function(obj:Grid, e:nexacro.GridClickEventInfo)
{
// 	switch(e.cell) {
// 		case 0:		// 불용처리여부
// 			var prcss   = this.ds_atldManage.getColumn(this.ds_atldManage.rowposition, "DISUSE_PROCESS_AT");
// 			var rowType = this.ds_atldManage.getRowType(this.ds_atldManage.rowposition);
// 			
// 			if(prcss == '0'){
// 				this.ds_atldManage.setColumn(this.ds_atldManage.rowposition, "DISUSE_PROCESS_DE", "");
// 			} 
// 			
// 			if(prcss == '1' && rowType == 1){
// 				alert("불용처리가 완료된 건은 수정할 수 없습니다.");
// 			}
// 			
// 			
// 			break;
// 		default:
// 			break;
// 	}
}

/*
 * 함수명  	: div_work_grd_Thng_Recipt_Plan_Manage_onexpandup
 * 설명 		: 불용계획목록 그리드 onexpandup 이벤트 
 * params  		: None
 * return Type 	: None
 * 사용법		: this.div_work_grd_Thng_Recipt_Plan_Manage_onexpandup();
 */
this.grd_atldManage_onexpandup = function(obj:Grid, e:nexacro.GridMouseEventInfo)
{
	switch(e.cell) {
		case 2:		// 회계계정과목
			var year     = this.ds_atldManageDetail.getColumn(this.ds_atldManageDetail.rowposition, "REQST_YEAR");
			var nLeft    = system.clientToScreenX(this, 0);
			var nTop     = system.clientToScreenY(this, 0);
			var newChild = new ChildFrame;
			newChild.init("ACC010103_P01", "absolute", nLeft, nTop, 465, 510, null, null , "mis_acc::ACC010103_P01.xfdl");
			newChild.set_openalign("center middle");
			newChild.set_dragmovetype("all");
			newChild.showModal(this.getOwnerFrame(), {year:year}, this, "fn_callback5");
			break;
		default:
			break;
	}
}

/*
 * 함수명  	: div_work_grd_Thng_Recipt_Plan_Manage_onexpandup
 * 설명 		: 회계계정과목 그리드 expr 함수 
 * params  		: None
 * return Type 	: None
 * 사용법		: this.div_work_grd_Thng_Recipt_Plan_Manage_onexpandup();
 */
this.fn_expr = function()
{
	var processAt = this.ds_atldManageDetail.getColumn(this.ds_atldManageDetail.rowposition, "DISUSE_PROCESS_AT");
	
	if(processAt != '1'){
		return true;
	}
	
	return false;
}



this.ds_atldManageDetail_onrowposchanged = function(obj:Dataset, e:nexacro.DSRowPosChangeEventInfo)
{
	if(e.newrow > -1){
	
		var nRow = this.ds_atldManageDetail.rowposition;
		
		// 처분여부
		var processAt = obj.getColumn(nRow, "DISUSE_PROCESS_AT");
		if(processAt != "1") {
			this.btn_atld.set_text("자산처분실행");
		}else {
			this.btn_atld.set_text("자산처분취소");
		}
		
		this.ds_cond03.clearData();
		this.ds_cond03.addRow()
		
		var year = obj.getColumn(e.newrow, "REQST_YEAR");
		var odr = obj.getColumn(e.newrow, "ODR");
		var assetsNo = obj.getColumn(e.newrow, "ASSETS_NO");
		
		this.ds_cond03.setColumn(0, "REQST_YEAR", year);
		this.ds_cond03.setColumn(0, "ODR", odr);
		this.ds_cond03.setColumn(0, "ASSETS_NO", assetsNo);
		
		this.fn_transaction("select02");
	}
}


this.fn_expr = function() {

	var nRow = this.ds_atldManageDetail.rowposition;
	var result = false;
	
	var processAt = this.ds_atldManageDetail.getColumn(nRow, "DISUSE_PROCESS_AT");
 	
 	// 처분여부
 	if(processAt == "1") {
		result = true;
 	}

	return result;
}

this.ds_atldManageDetail_canrowposchange = function(obj:Dataset, e:nexacro.DSRowPosChangeEventInfo)
{
	// 데이터셋 변경 체크
    if(Ex.util.isUpdated(this.ds_atldAccnutAcnt)) {
        if(!this.gfn_message("confirm.변경.취소.여부")) {
           
            return false;
        }
    }
    
    this.ds_atldAccnutAcnt.reset();
	this.ds_atldAccnutAcnt.applyChange();
}


this.ds_atldManage_canrowposchange = function(obj:Dataset, e:nexacro.DSRowPosChangeEventInfo)
{
	// 데이터셋 변경 체크
    if(Ex.util.isUpdated(this.ds_atldManageDetail) || Ex.util.isUpdated(this.ds_atldAccnutAcnt)) {
        if(!this.gfn_message("confirm.변경.취소.여부")) {
           
            return false;
        }
    }
    
    this.ds_atldAccnutAcnt.reset();
	this.ds_atldAccnutAcnt.applyChange();
	
	this.ds_atldManageDetail.reset();
	this.ds_atldManageDetail.applyChange();
}
]]></Script>
  </Form>
</FDL>
