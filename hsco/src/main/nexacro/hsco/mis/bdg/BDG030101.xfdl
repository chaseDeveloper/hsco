<?xml version="1.0" encoding="utf-8"?>
<FDL version="1.5">
  <TypeDefinition url="..\..\default_typedef.xml"/>
  <Form id="BDG030101" classname="BDG030101" left="0" top="0" width="1059" height="735" titletext="예산요구등록" onload="BDG030101_onload" oninit="BDG030101_oninit" visible="false">
    <Layouts>
      <Layout>
        <Div id="div_search" taborder="0" left="0" top="0" right="28" height="81" cssclass="div_WFSA_Box">
          <Layouts>
            <Layout>
              <Static id="sta_YEAR" taborder="11" text="예산년도" wordwrap="char" left="15" top="5" width="64" height="21" cssclass="sta_WFSA_Label"/>
              <Static id="sta_BSNS_SE" taborder="15" text="사업구분" wordwrap="char" left="164" top="5" width="64" height="21" cssclass="sta_WFSA_Label"/>
              <Combo id="cbo_BSNS_SE" taborder="2" innerdataset="@ds_bdg001" codecolumn="CODE" datacolumn="CODE_NM" left="228" top="5" width="84" height="21"/>
              <Div id="div_srchDept" taborder="8" url="com::deptCode.xfdl" left="79" top="31" height="21" async="false" width="179" enable="false">
                <Layouts>
                  <Layout width="179" height="21"/>
                  <Layout/>
                </Layouts>
              </Div>
              <Static id="sta_DEPT_CODE" taborder="13" text="부서" wordwrap="char" left="15" top="31" width="38" height="21" cssclass="sta_WFSA_Label"/>
              <Static id="sta_BALC_SE" taborder="17" text="수/지구분" wordwrap="char" left="327" top="5" width="69" height="21" cssclass="sta_WFSA_Label"/>
              <Static id="sta_BUDGET_SE" taborder="16" text="예산구분" wordwrap="char" left="561" top="5" width="64" height="21" cssclass="sta_WFSA_Label" visible="true"/>
              <Combo id="cbo_BUDGET_SE" taborder="4" codecolumn="CODE" datacolumn="CODE_NM" left="625" top="5" width="80" height="21" innerdataset="@ds_bdg003" index="-1" visible="true"/>
              <Static id="Static05" taborder="0" text="15" visible="false" left="0" top="5" width="15" style="background:#00ffff66;" bottom="0"/>
              <Static id="Static36" taborder="18" text="5" visible="false" left="0" top="0" height="5" style="background:#fa794f66;align:center middle;" right="0"/>
              <Static id="Static00" taborder="19" text="5" visible="false" left="0" top="26" height="5" style="background:#fa794f66;align:center middle;" right="0"/>
              <Static id="Static37" taborder="20" text="5" visible="false" left="0" height="5" style="background:#fa794f66;align:center middle;" right="0" top="52"/>
              <Static id="Static01" taborder="12" text="15" visible="false" left="149" top="5" width="15" style="background:#00ffff66;" height="21"/>
              <Static id="Static03" taborder="14" text="15" visible="false" left="312" top="5" width="15" height="47" style="background:#00ffff66;"/>
              <Spin id="spn_YEAR" taborder="1" value="0" left="79" top="5" width="70" height="21" style="buttonsize:15;padding:0 0 0 0;" max="9999" cssclass="spn_WF_Essential" onchanged="div_search_spn_YEAR_onchanged"/>
              <Static id="sta_title00" taborder="21" text="(조회시 예산편성마감기간의 조건이 만족하는 경우, 각 그리드의 입력창 및 버튼입력이 활성화됩니다.)" left="15" top="57" width="612" height="19" style="color:blue;padding:0 0 0 0;align:left middle;font:bold 9 Gulim;"/>
              <Edit id="edt_BSNS_NM" taborder="10" readonly="true" left="520" top="31" width="241" height="21"/>
              <Edit id="edt_BSNS_CODE" taborder="9" left="395" top="31" width="123" height="21" onchanged="div_search_edt_BSNS_CODE_onchanged"/>
              <Static id="sta_BSNS_CODE" taborder="22" text="사업" wordwrap="char" cssclass="sta_WFSA_Label" left="327" top="31" width="38" height="21"/>
              <Radio id="rdo_BALC_SE" taborder="3" innerdataset="@ds_bdg002" codecolumn="CODE" datacolumn="CODE_NM" direction="vertical" left="396" top="5" width="150" height="21"/>
              <Static id="Static02" taborder="23" text="15" visible="false" left="546" top="5" width="15" height="21" style="background:#00ffff66;"/>
              <Static id="Static04" taborder="24" text="5" visible="false" left="0" top="76" right="0" height="5" style="background:#fa794f66;align:center middle;"/>
              <Static id="Static06" taborder="25" text="15" visible="false" left="705" top="5" width="15" height="21" style="background:#00ffff66;"/>
              <Static id="sta_BUDGET_SE00" taborder="26" text="예산계정" wordwrap="char" cssclass="sta_WFSA_Label" left="720" top="5" width="64" height="21"/>
              <Edit id="edt_budgetAcntCode" taborder="5" left="784" top="5" width="85" height="21" onchanged="div_search_edt_budgetAcntCode_onchanged"/>
              <Button id="btn_bdgAcntPop" taborder="6" cssclass="btn_WF_Search" left="848" top="5" width="21" height="21" onclick="div_search_btn_bdgAcntPop_onclick"/>
              <Edit id="edt_budgetAcntNm" taborder="7" oneditclick="div_DetailBase_edt_YEAR_oneditclick" left="871" top="5" width="150" height="21" style="align:left middle;" readonly="true"/>
              <Static id="sta_title01" taborder="27" text="(사업소에서는 사업정보를 입력하여 주십시오.)" left="639" top="57" width="288" height="19" style="color:red;padding:0 0 0 0;align:left middle;font:bold 9 Gulim;"/>
            </Layout>
          </Layouts>
        </Div>
        <Static id="Static00" taborder="11" text="10" visible="false" left="0" top="81" right="28" height="10" style="background:#dc143c3c;align:center middle;"/>
        <Static id="Static03" taborder="12" text="15" visible="false" left="1031" top="0" width="15" height="735" style="background:#1b3cd23c;align:center middle;"/>
        <Static id="Static04" taborder="13" text="스&#13;&#10;크&#13;&#10;롤&#13;&#10;13" visible="false" top="0" right="0" width="13" height="735" style="background:#d07b173c;align:center middle;"/>
        <Button id="searchBsns" taborder="1" onclick="div_search_searchBsns_onclick" cssclass="btn_WF_Search" left="499" top="31" width="21" height="21"/>
        <Static id="sta_BUDGET_FRMTN_STTUS" taborder="14" text="예산편성현황" cssclass="sta_WF_Title02" left="0" top="91" height="19" width="90"/>
        <Static id="Static08" taborder="15" text="5" visible="false" left="0" top="110" right="28" height="5" style="background:#dc143c3c;align:center middle;"/>
        <Grid id="grd_BUDGET_FRMTN_STTUS" taborder="10" autoenter="select" useinputpanel="false" left="0" top="115" right="28" bottom="0" binddataset="ds_demandBudget" onexpandup="grd_BUDGET_FRMTN_STTUS_onexpandup" oncellclick="grd_BUDGET_FRMTN_STTUS_oncellclick">
          <Formats>
            <Format id="default">
              <Columns>
                <Column size="40"/>
                <Column size="30"/>
                <Column size="80"/>
                <Column size="120"/>
                <Column size="80"/>
                <Column size="120"/>
                <Column size="100"/>
                <Column size="150"/>
                <Column size="30"/>
                <Column size="80"/>
                <Column size="120"/>
                <Column size="120"/>
                <Column size="120"/>
                <Column size="105"/>
                <Column size="200"/>
                <Column size="200"/>
                <Column size="200"/>
                <Column size="160"/>
                <Column size="160"/>
                <Column size="40"/>
                <Column size="80"/>
                <Column size="200"/>
                <Column size="120"/>
                <Column size="120"/>
                <Column size="130"/>
                <Column size="80"/>
                <Column size="80"/>
                <Column size="100"/>
              </Columns>
              <Rows>
                <Row size="24" band="head"/>
                <Row size="24" band="head"/>
                <Row size="24"/>
              </Rows>
              <Band id="head">
                <Cell rowspan="2" text="순번"/>
                <Cell col="1" colspan="3" text="사업"/>
                <Cell col="4" colspan="2" text="담당부서"/>
                <Cell col="6" colspan="2" text="예산과목(목-세목)"/>
                <Cell col="8" colspan="3" text="부기"/>
                <Cell col="11" text="전년도 예산액"/>
                <Cell col="12" text="전년도 집행실적"/>
                <Cell col="13" rowspan="2" text="출력&#13;&#10;레벨"/>
                <Cell col="14" rowspan="2" text="부기내역"/>
                <Cell col="15" rowspan="2" text="산출공식(단위 : 원)"/>
                <Cell col="16" rowspan="2" text="산출공식(예산확정공식)"/>
                <Cell col="17" rowspan="2" text="예산&#13;&#10;조정의견"/>
                <Cell col="18" rowspan="2" text="세부내역"/>
                <Cell col="19" rowspan="2" text="계약&#13;&#10;여부"/>
                <Cell col="20" colspan="2" text="계약정보"/>
                <Cell col="22" colspan="2" text="당해년도 예산요구액"/>
                <Cell col="24" rowspan="2" text="출력레벨&#13;&#10;합계"/>
                <Cell col="25" rowspan="2" text="사업설명서"/>
                <Cell col="26" colspan="2" text="최종수정자"/>
                <Cell row="1" col="1" colspan="2" text="사업코드"/>
                <Cell row="1" col="3" text="사업명"/>
                <Cell row="1" col="4" text="부서코드"/>
                <Cell row="1" col="5" text="부서명"/>
                <Cell row="1" col="6" text="예산과목코드"/>
                <Cell row="1" col="7" text="예산과목명"/>
                <Cell row="1" col="8" colspan="2" text="부기코드"/>
                <Cell row="1" col="10" text="부기명"/>
                <Cell row="1" col="11" text="편성확정액"/>
                <Cell row="1" col="12" text="집행액"/>
                <Cell row="1" col="20" text="계약번호"/>
                <Cell row="1" col="21" text="계약명"/>
                <Cell row="1" col="22" text="예산요구액"/>
                <Cell row="1" col="23" text="예산확정액"/>
                <Cell row="1" col="26" text="사번"/>
                <Cell row="1" col="27" text="성명"/>
              </Band>
              <Band id="body" style="selectbackground:EXPR(FRST_DEMAND_BUDGET_AM == DEMAND_BUDGET_DCSN_AM ? '#bce1f5ff' : 'lightsalmon');cellbackground:EXPR(FRST_DEMAND_BUDGET_AM == DEMAND_BUDGET_DCSN_AM ? (OUTPT_LEVEL == '1' ? '#fffdf2ff' : '#ffffffff') : 'lightsalmon');cellbackground2:EXPR(FRST_DEMAND_BUDGET_AM == DEMAND_BUDGET_DCSN_AM ? (OUTPT_LEVEL == '1' ? '#fffdf2ff' : '#ffffffff') : 'lightsalmon');">
                <Cell displaytype="number" style="background2: ;" text="expr:currow + 1"/>
                <Cell col="1" displaytype="expr:comp.parent.inpYn ? 'button' : 'none'" text="선택"/>
                <Cell col="2" style="background2: ;" text="bind:BSNS_CODE" suppressalign="first"/>
                <Cell col="3" edittype="none" style="align:left middle;background2: ;" text="bind:BSNS_NM" suppressalign="first" tooltiptext="bind:BSNS_NM"/>
                <Cell col="4" text="bind:DEPT_CODE"/>
                <Cell col="5" text="bind:DEPT_NM"/>
                <Cell col="6" style="background2: ;" text="bind:BUDGET_ACNT_CODE"/>
                <Cell col="7" style="align:left middle;background2: ;" text="bind:MOK_SEMOK" expandshow="hide" suppressalign="first,over" tooltiptext="bind:MOK_SEMOK"/>
                <Cell col="8" displaytype="expr:comp.parent.inpYn ? 'button' : 'none'" text="선택"/>
                <Cell col="9" style="background2: ;" text="bind:BUKIP_CODE" suppressalign="first"/>
                <Cell col="10" style="align:left middle;background2: ;" text="bind:BUKIP_NM" expandshow="hide" suppressalign="first" tooltiptext="bind:BUKIP_NM"/>
                <Cell col="11" displaytype="number" style="align:right middle;background2: ;" text="bind:PRVYY_BUDGET_AM"/>
                <Cell col="12" displaytype="number" style="align:right middle;background2: ;" text="bind:BUDGET_EXCUT_AM"/>
                <Cell col="13" displaytype="combo" edittype="expr:comp.parent.inpYn ? 'combo' : 'none'" style="align:center middle;" text="bind:OUTPT_LEVEL" combodataset="ds_bdg018" combocodecol="CODE" combodatacol="CODE_NM" combodisplay="expr:comp.parent.inpYn ? 'display' : 'edit'"/>
                <Cell col="14" edittype="expr:comp.parent.inpYn ? 'normal' : 'none'" style="align:left middle;background2: ;" text="bind:BUKIP_DTLS" editlimit="600" editdisplay="expr:comp.parent.inpYn ? 'display' : 'edit'" editlengthunit="utf8" tooltiptext="bind:BUKIP_DTLS"/>
                <Cell col="15" edittype="expr:comp.parent.inpYn ? 'normal' : 'none'" style="align:left middle;background2: ;" text="bind:COMPUT_OFCL" editlimit="600" editdisplay="expr:comp.parent.inpYn ? 'display' : 'edit'" editlengthunit="utf8" tooltiptext="bind:COMPUT_OFCL_BUKIP_ACCNUT"/>
                <Cell col="16" edittype="expr:comp.parent.chargerAt ? 'normal' : 'none'" style="align:left middle;background2: ;" text="bind:COMPUT_OFCL_BUKIP_ACCNUT" editlimit="600" editdisplay="expr:comp.parent.chargerAt ? 'display' : 'edit'" editlengthunit="utf8" tooltiptext="bind:COMPUT_OFCL"/>
                <Cell col="17" edittype="expr:comp.parent.chargerAt ? 'normal' : 'none'" style="align:left middle;background2: ;" text="bind:MDAT_OPINION" editlimit="600" editdisplay="expr:comp.parent.chargerAt ? 'display' : 'edit'" editlengthunit="utf8" tooltiptext="bind:MDAT_OPINION"/>
                <Cell col="18" edittype="expr:comp.parent.chargerAt ? 'normal' : 'none'" style="align:left middle;background2: ;" text="bind:DETAIL_DTLS" editlimit="600" editdisplay="expr:comp.parent.chargerAt ? 'display' : 'edit'" editlengthunit="utf8" tooltiptext="bind:DETAIL_DTLS"/>
                <Cell col="19" displaytype="checkbox" edittype="expr:DEPT_CODE == comp.parent.deptCode &amp;&amp; comp.parent.inpYn ? 'checkbox' : 'none'" style="background2: ;" text="bind:CNTRCT_AT"/>
                <Cell col="20" style="background2: ;" text="bind:CNTRCT_NO" expandshow="expr:CNTRCT_AT == '1' ? 'show' : 'hide'"/>
                <Cell col="21" style="align:left;" text="bind:CNTRCT_NM"/>
                <Cell col="22" displaytype="number" edittype="none" editfilter="digit" style="align:right middle;background2: ;" text="bind:FRST_DEMAND_BUDGET_AM" mask="###,###,###,###,###"/>
                <Cell col="23" displaytype="number" style="align:right middle;background2: ;" text="bind:DEMAND_BUDGET_DCSN_AM" mask="###,###,###,###,###"/>
                <Cell col="24" displaytype="number" style="align:right middle;background2: ;" text="bind:PART_SM_AM_DCSN" mask="###,###,###,###,###"/>
                <Cell col="25" displaytype="expr:OUTPT_LEVEL == '1' ? 'button' : 'none'" style="align: ;" text="등   록"/>
                <Cell col="26" style="background2: ;" text="bind:UPDUSR_ID"/>
                <Cell col="27" style="align:left middle;background2: ;" text="bind:UPDUSR_NM"/>
              </Band>
            </Format>
          </Formats>
        </Grid>
        <Button id="btn_Add" taborder="7" text="행추가" onclick="btn_Add_onclick" cssclass="btn_WF_Gridadd" enable="false" visible="true" top="91" right="162" width="64" height="19"/>
        <Button id="btn_Delete" taborder="8" text="행삭제" onclick="btn_Delete_onclick" cssclass="btn_WF_Griddel" enable="false" visible="true" top="91" right="95" width="64" height="19"/>
        <Button id="btn_Cancel" taborder="9" text="취소" onclick="btn_Cancel_onclick" enable="false" visible="true" top="91" right="28" width="64" height="19" cssclass="btn_WF_Gridcnl"/>
        <Button id="btn_copy" taborder="3" text="예산 불러오기" cssclass="btn_WF_Process" visible="true" top="91" right="587" width="106" height="19" onclick="btn_copy_onclick" enable="false"/>
        <Button id="btn_demandOpinion" taborder="6" text="조정의견" cssclass="btn_WF_Process" enable="true" top="91" right="229" width="106" height="19" onclick="btn_demandOpinion_onclick"/>
        <Button id="btn_up" taborder="4" text="UP" cssclass="btn_WF_Grid" top="91" width="60" height="19" onclick="btn_up_onclick" right="524"/>
        <Button id="btn_down" taborder="5" text="DOWN" cssclass="btn_WF_Grid" top="91" width="60" height="19" onclick="btn_down_onclick" right="461"/>
        <Div id="div_pop" taborder="16" left="8" top="759" width="515" height="220" style="background:#ffffffff;shadow:outer 5,5 10 gray;" visible="false">
          <Layouts>
            <Layout>
              <Static id="Static07" taborder="34" cssclass="sta_WF_Labelbg" left="15" top="174" right="15" height="27"/>
              <Static id="sta_title" taborder="3" text="예산 불러오기" cssclass="sta_WF_PopupTitle" left="0" top="0" right="0" height="34" onmousemove="div_pop_sta_title_onmousemove" onlbuttondown="div_pop_sta_title_onlbuttondown"/>
              <Button id="btn_destroy" taborder="11" onclick="div_pop_btn_destroy_onclick" cssclass="btn_WF_PopupClose" top="8" right="14" width="20" height="20"/>
              <Static id="Static02" taborder="12" text="15" visible="false" top="0" right="0" bottom="0" width="15" style="background:#1b3cd23c;align:center middle;"/>
              <Static id="Static05" taborder="13" text="15" visible="false" left="0" top="0" bottom="0" width="15" style="background:#1b3cd23c;align:center middle;"/>
              <Static id="Static00" taborder="14" text="10" visible="false" left="15" top="34" right="15" height="10" style="background:#dc143c3c;align:center middle;"/>
              <Static id="Static10" taborder="15" text="15" visible="false" left="15" right="15" bottom="0" height="15" style="background:#1b3cd23c;align:center middle;"/>
              <Static id="sta_acntCode" taborder="16" text="예산 불러오기" cssclass="sta_WF_Title02" left="15" top="44" width="105" height="21"/>
              <Static id="Static08" taborder="17" text="5" visible="false" left="15" top="65" right="15" height="5" style="background:#dc143c3c;align:center middle;"/>
              <Static id="Static1" taborder="18" cssclass="sta_WF_Labelbg" top="70" right="15" height="27" left="15"/>
              <Static id="sta_year" taborder="19" text="예산년도" wordwrap="char" cssclass="sta_WF_Label" top="70" height="27" left="15" width="100"/>
              <Static id="sta_demandYear" taborder="20" text="요구예산년도" wordwrap="char" cssclass="sta_WF_Label" left="257" top="70" width="100" height="27"/>
              <Static id="Static03" taborder="25" cssclass="sta_WF_Labelbg" left="15" top="96" right="15" height="27"/>
              <Static id="sta_budgetSe" taborder="21" text="예산구분" wordwrap="char" cssclass="sta_WF_Label" left="15" top="96" width="100" height="27"/>
              <Static id="sta_demandBudgetSe" taborder="22" text="요구예산구분" wordwrap="char" cssclass="sta_WF_Label" left="257" top="96" width="100" height="27"/>
              <Static id="Static04" taborder="26" cssclass="sta_WF_Labelbg" left="15" top="122" right="15" height="27"/>
              <Static id="sta_bsnsSe" taborder="23" text="사업구분" wordwrap="char" cssclass="sta_WF_Label" left="15" top="122" width="100" height="27"/>
              <Static id="sta_balcSe" taborder="24" text="수/지구분" wordwrap="char" cssclass="sta_WF_Label" left="257" top="122" width="100" height="27"/>
              <Combo id="cmb_BSNS_SE" taborder="7" readonly="true" innerdataset="@ds_bdg001" codecolumn="CODE" datacolumn="CODE_NM" cssclass="cmb_WF_Readonly" top="125" height="21" style="buttonsize:0;" left="118" width="136"/>
              <Combo id="cmd_budgetSe" taborder="5" innerdataset="@ds_bdg003" codecolumn="CODE" datacolumn="CODE_NM" left="118" top="99" width="136" height="21"/>
              <Combo id="cmb_demandBudgetSe" taborder="6" innerdataset="@ds_bdg003" codecolumn="CODE" datacolumn="CODE_NM" left="360" top="99" width="136" height="21" cssclass="cmb_WF_Readonly" readonly="true"/>
              <Static id="Static06" taborder="27" cssclass="sta_WF_Labelbg" left="15" top="148" right="15" height="27"/>
              <Static id="sta_deptNm" taborder="28" text="부서명" wordwrap="char" cssclass="sta_WF_Label" left="15" top="174" width="100" height="27"/>
              <Static id="sta_bsnsNm" taborder="29" text="당해사업" wordwrap="char" cssclass="sta_WF_Label" left="257" top="148" width="100" height="27"/>
              <Edit id="edt_deptNm" taborder="9" left="118" top="177" width="136" height="21" cssclass="edt_WF_Readonly" readonly="true"/>
              <Button id="btn_save" taborder="0" text="저장" onclick="btn_save_onclick" cssclass="btn_WF_CRUD" top="42" right="68" width="50" height="25"/>
              <Button id="btn_close" taborder="1" text="종료" onclick="btn_close_onclick" cssclass="btn_WF_CRUD" top="42" right="15" width="50" height="25"/>
              <Combo id="cmb_balcSe" taborder="30" innerdataset="@ds_bdg002" codecolumn="CODE" datacolumn="CODE_NM" left="360" top="125" width="136" height="21" readonly="true" cssclass="cmb_WF_Readonly"/>
              <Spin id="spn_year" taborder="31" value="0" max="9999" left="118" top="73" width="136" height="21" style="buttonsize:15;padding:0 0 0 0;"/>
              <Spin id="spn_demandYear" taborder="32" value="0" max="9999" left="360" top="73" width="136" height="21" style="buttonsize:15;padding:0 0 0 0;" readonly="true" cssclass="spn_WF_Readonly"/>
              <Div id="div_pop" taborder="33" left="138" top="968" width="515" height="190" style="background:#ffffffff;shadow:outer 5,5 10 gray;" visible="false">
                <Layouts>
                  <Layout>
                    <Static id="sta_title" taborder="33" text="예산 불러오기" cssclass="sta_WF_PopupTitle" left="0" top="0" right="0" height="34" onmousemove="div_pop_sta_title_onmousemove" onlbuttondown="div_pop_sta_title_onlbuttondown"/>
                    <Button id="btn_destroy" taborder="34" onclick="div_pop_btn_destroy_onclick" cssclass="btn_WF_PopupClose" top="8" right="14" width="20" height="20"/>
                    <Static id="Static02" taborder="35" text="15" visible="false" top="0" right="0" bottom="0" width="15" style="background:#1b3cd23c;align:center middle;"/>
                    <Static id="Static05" taborder="36" text="15" visible="false" left="0" top="0" bottom="0" width="15" style="background:#1b3cd23c;align:center middle;"/>
                    <Static id="Static00" taborder="37" text="10" visible="false" left="15" top="34" right="15" height="10" style="background:#dc143c3c;align:center middle;"/>
                    <Static id="Static10" taborder="38" text="15" visible="false" left="15" right="15" bottom="0" height="15" style="background:#1b3cd23c;align:center middle;"/>
                    <Static id="sta_acntCode" taborder="39" text="예산 불러오기" cssclass="sta_WF_Title02" left="15" top="44" width="150" height="21"/>
                    <Static id="Static08" taborder="40" text="5" visible="false" left="15" top="65" right="15" height="5" style="background:#dc143c3c;align:center middle;"/>
                    <Static id="Static1" taborder="41" cssclass="sta_WF_Labelbg" left="15" top="70" right="15" height="27"/>
                    <Static id="sta_year" taborder="42" text="예산년도" wordwrap="char" cssclass="sta_WF_Label" left="15" top="70" width="100" height="27"/>
                    <Static id="sta_demandYear" taborder="43" text="요구예산년도" wordwrap="char" cssclass="sta_WF_Label" left="257" top="70" width="100" height="27"/>
                    <Static id="Static03" taborder="44" cssclass="sta_WF_Labelbg" left="15" top="96" right="15" height="27"/>
                    <Static id="sta_budgetSe" taborder="45" text="예산구분" wordwrap="char" cssclass="sta_WF_Label" left="15" top="96" width="100" height="27"/>
                    <Static id="sta_demandBudgetSe" taborder="46" text="요구예산구분" wordwrap="char" cssclass="sta_WF_Label" left="257" top="96" width="100" height="27"/>
                    <Static id="Static04" taborder="47" cssclass="sta_WF_Labelbg" left="15" top="122" right="15" height="27"/>
                    <Static id="sta_bsnsSe" taborder="48" text="사업구분" wordwrap="char" cssclass="sta_WF_Label" left="15" top="122" width="100" height="27"/>
                    <Static id="sta_balcSe" taborder="49" text="수/지구분" wordwrap="char" cssclass="sta_WF_Label" left="257" top="122" width="100" height="27"/>
                    <Combo id="cmb_BSNS_SE" taborder="50" readonly="true" innerdataset="@ds_bdg001" codecolumn="CODE" datacolumn="CODE_NM" cssclass="cmb_WF_Readonly" left="118" top="125" width="136" height="21" style="buttonsize:0;"/>
                    <Combo id="cmd_budgetSe" taborder="51" innerdataset="@ds_bdg003" codecolumn="CODE" datacolumn="CODE_NM" left="118" top="99" width="136" height="21"/>
                    <Combo id="cmb_demandBudgetSe" taborder="52" readonly="true" innerdataset="@ds_bdg003" codecolumn="CODE" datacolumn="CODE_NM" cssclass="cmb_WF_Readonly" left="360" top="99" width="136" height="21"/>
                    <Static id="Static06" taborder="53" cssclass="sta_WF_Labelbg" left="15" top="148" right="15" height="27"/>
                    <Static id="sta_deptNm" taborder="54" text="부서명" wordwrap="char" cssclass="sta_WF_Label" left="15" top="148" width="100" height="27"/>
                    <Static id="sta_bsnsNm" taborder="55" text="사업명" wordwrap="char" cssclass="sta_WF_Label" left="257" top="148" width="100" height="27"/>
                    <Edit id="edt_deptNm" taborder="56" readonly="true" cssclass="edt_WF_Readonly" left="118" top="151" width="136" height="21"/>
                    <Edit id="edt_bsnsNm" taborder="57" readonly="true" cssclass="edt_WF_Readonly" left="360" top="151" width="136" height="21"/>
                    <Button id="btn_save" taborder="58" text="저장" onclick="btn_save_onclick" cssclass="btn_WF_CRUD" top="42" right="68" width="50" height="25"/>
                    <Button id="btn_close" taborder="59" text="종료" onclick="btn_close_onclick" cssclass="btn_WF_CRUD" top="42" right="15" width="50" height="25"/>
                    <Combo id="cmb_balcSe" taborder="60" readonly="true" innerdataset="@ds_bdg002" codecolumn="CODE" datacolumn="CODE_NM" cssclass="cmb_WF_Readonly" left="360" top="125" width="136" height="21"/>
                    <Spin id="spn_year" taborder="61" value="0" max="9999" left="118" top="73" width="136" height="21" style="buttonsize:15;padding:0 0 0 0;"/>
                    <Spin id="spn_demandYear" taborder="62" value="0" readonly="true" max="9999" cssclass="spn_WF_Readonly" left="360" top="73" width="136" height="21" style="buttonsize:15;padding:0 0 0 0;"/>
                  </Layout>
                </Layouts>
              </Div>
              <Static id="sta_deptNm00" taborder="35" text="전년도사업" wordwrap="char" cssclass="sta_WF_Label" left="15" top="148" width="100" height="27"/>
              <Static id="sta_title00" taborder="37" text="(전년도사업과 당해사업은 필수입력)" left="120" top="46" width="231" height="19" style="color:red;padding:0 0 0 0;align:left middle;font:bold 9 Gulim;"/>
              <Edit id="edt_BSNS_CODE" taborder="39" left="118" top="151" width="136" height="21" cssclass="edt_WF_Essential" readonly="true" style="padding:1 10 0 6;"/>
              <Button id="btn_prvyyBsns" taborder="38" cssclass="btn_WF_Search" left="235" top="151" width="21" height="21" onclick="div_pop_btn_prvyyBsns_onclick"/>
              <Edit id="edt_BSNS_CODE00" taborder="40" cssclass="edt_WF_Essential" left="360" top="151" width="136" height="21" readonly="true" style="padding:1 10 0 6;"/>
              <Button id="btn_bsns" taborder="41" cssclass="btn_WF_Search" left="477" top="151" width="21" height="21" onclick="div_pop_btn_bsns_onclick"/>
            </Layout>
          </Layouts>
        </Div>
        <Button id="btn_printBsnsMnl" taborder="2" text="사업설명서 출력" cssclass="btn_WF_Process" top="91" right="696" width="106" height="19" onclick="btn_printBsnsMnl_onclick"/>
        <Button id="btn_readjst" taborder="17" text="순서 및 합계 재조정" cssclass="btn_WF_Process" top="91" right="338" width="120" height="19" onclick="btn_readjst_onclick" style="background:#dc143c3c;"/>
      </Layout>
    </Layouts>
    <Objects>
      <Dataset id="ds_cond" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false" cancolumnchange="ds_cond_cancolumnchange" oncolumnchanged="ds_cond_oncolumnchanged">
        <ColumnInfo>
          <Column id="YEAR" type="STRING" size="4"/>
          <Column id="DEPT_CODE" type="STRING" size="6"/>
          <Column id="DEPT_NM" type="STRING" size="256"/>
          <Column id="BSNS_SE" type="STRING" size="256"/>
          <Column id="BALC_SE" type="STRING" size="256"/>
          <Column id="BUDGET_SE" type="STRING" size="256"/>
          <Column id="DETAIL_BSNS_CODE" type="STRING" size="256"/>
          <Column id="BSNS_NM" type="STRING" size="256"/>
          <Column id="BUDGET_TYPE" type="STRING" size="256"/>
          <Column id="BUDGET_ACNT_CODE" type="STRING" size="256"/>
          <Column id="BUDGET_ACNT_NM" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_condSub1" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="YEAR" type="STRING" size="4"/>
          <Column id="DEPT_CODE" type="STRING" size="6"/>
          <Column id="DEPT_NM" type="STRING" size="256"/>
          <Column id="BSNS_SE" type="STRING" size="256"/>
          <Column id="BALC_SE" type="STRING" size="256"/>
          <Column id="BUDGET_SE" type="STRING" size="256"/>
          <Column id="DETAIL_BSNS_CODE" type="STRING" size="256"/>
          <Column id="BSNS_NM" type="STRING" size="256"/>
          <Column id="BUDGET_TYPE" type="STRING" size="256"/>
          <Column id="BUDGET_ACNT_CODE" type="STRING" size="256"/>
          <Column id="BUDGET_ACNT_NM" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_bdg001" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="ETC1" type="string" size="32"/>
          <Column id="VAL2" type="string" size="32"/>
          <Column id="CODE_CN" type="string" size="32"/>
          <Column id="VAL1" type="string" size="32"/>
          <Column id="USE_YN" type="string" size="32"/>
          <Column id="ETC3" type="string" size="32"/>
          <Column id="VAL4" type="string" size="32"/>
          <Column id="ETC2" type="string" size="32"/>
          <Column id="VAL3" type="string" size="32"/>
          <Column id="CODE_ORDR" type="bigdecimal" size="16"/>
          <Column id="MSTK_VAL" type="string" size="32"/>
          <Column id="ALL_CODE_NM" type="string" size="32"/>
          <Column id="CODE_NM" type="string" size="32"/>
          <Column id="INT_VAL" type="string" size="32"/>
          <Column id="GRP_CODE" type="string" size="32"/>
          <Column id="CODE" type="string" size="32"/>
          <Column id="VAL0" type="string" size="32"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_bdg002" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="ETC1" type="string" size="32"/>
          <Column id="VAL2" type="string" size="32"/>
          <Column id="CODE_CN" type="string" size="32"/>
          <Column id="VAL1" type="string" size="32"/>
          <Column id="USE_YN" type="string" size="32"/>
          <Column id="ETC3" type="string" size="32"/>
          <Column id="VAL4" type="string" size="32"/>
          <Column id="ETC2" type="string" size="32"/>
          <Column id="VAL3" type="string" size="32"/>
          <Column id="CODE_ORDR" type="bigdecimal" size="16"/>
          <Column id="MSTK_VAL" type="string" size="32"/>
          <Column id="ALL_CODE_NM" type="string" size="32"/>
          <Column id="CODE_NM" type="string" size="32"/>
          <Column id="INT_VAL" type="string" size="32"/>
          <Column id="GRP_CODE" type="string" size="32"/>
          <Column id="CODE" type="string" size="32"/>
          <Column id="VAL0" type="string" size="32"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_bdg003" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="ETC1" type="string" size="32"/>
          <Column id="VAL2" type="string" size="32"/>
          <Column id="CODE_CN" type="string" size="32"/>
          <Column id="VAL1" type="string" size="32"/>
          <Column id="USE_YN" type="string" size="32"/>
          <Column id="ETC3" type="string" size="32"/>
          <Column id="VAL4" type="string" size="32"/>
          <Column id="ETC2" type="string" size="32"/>
          <Column id="VAL3" type="string" size="32"/>
          <Column id="CODE_ORDR" type="bigdecimal" size="16"/>
          <Column id="MSTK_VAL" type="string" size="32"/>
          <Column id="ALL_CODE_NM" type="string" size="32"/>
          <Column id="CODE_NM" type="string" size="32"/>
          <Column id="INT_VAL" type="string" size="32"/>
          <Column id="GRP_CODE" type="string" size="32"/>
          <Column id="CODE" type="string" size="32"/>
          <Column id="VAL0" type="string" size="32"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_demandBudget" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false" oncolumnchanged="ds_demandBudget_oncolumnchanged" cancolumnchange="ds_demandBudget_cancolumnchange">
        <ColumnInfo>
          <Column id="YEAR" type="STRING" size="256"/>
          <Column id="BUDGET_SE" type="STRING" size="256"/>
          <Column id="BSNS_SE" type="STRING" size="256"/>
          <Column id="BSNS_CODE" type="STRING" size="256"/>
          <Column id="BSNS_NM" type="STRING" size="256"/>
          <Column id="DEPT_CODE" type="STRING" size="256"/>
          <Column id="DEPT_NM" type="STRING" size="256"/>
          <Column id="DEMAND_NO" type="STRING" size="256"/>
          <Column id="ORG_DEMAND_NO" type="STRING" size="256"/>
          <Column id="ORGINL_DEMAND_NO" type="STRING" size="256"/>
          <Column id="BUDGET_ACNT_CODE" type="STRING" size="256"/>
          <Column id="BUDGET_ACNT_NM" type="STRING" size="256"/>
          <Column id="BALC_SE" type="STRING" size="256"/>
          <Column id="SN" type="STRING" size="256"/>
          <Column id="ORG_YEAR" type="STRING" size="256"/>
          <Column id="ORG_BUDGET_SE" type="STRING" size="256"/>
          <Column id="ORG_BSNS_SE" type="STRING" size="256"/>
          <Column id="ORG_BSNS_CODE" type="STRING" size="256"/>
          <Column id="ORG_DEPT_CODE" type="STRING" size="256"/>
          <Column id="ORG_BUDGET_ACNT_CODE" type="STRING" size="256"/>
          <Column id="ORG_BALC_SE" type="STRING" size="256"/>
          <Column id="ORG_SN" type="STRING" size="256"/>
          <Column id="CONFM_AT" type="STRING" size="256"/>
          <Column id="BUKIP_CODE" type="STRING" size="256"/>
          <Column id="BUKIP_NM" type="STRING" size="256"/>
          <Column id="BUKIP_DTLS" type="STRING" size="256"/>
          <Column id="COMPUT_OFCL" type="STRING" size="256"/>
          <Column id="PRVYY_BUDGET_AM" type="STRING" size="256"/>
          <Column id="DEMAND_BUDGET_DCSN_AM" type="STRING" size="256"/>
          <Column id="FRST_DEMAND_BUDGET_AM" type="STRING" size="256"/>
          <Column id="OUTPT_LEVEL" type="STRING" size="256"/>
          <Column id="OUTPT_ORDR" type="STRING" size="256"/>
          <Column id="CNTRCT_YEAR" type="STRING" size="256"/>
          <Column id="CNTRCT_NO" type="STRING" size="256"/>
          <Column id="CNTRCT_NM" type="STRING" size="256"/>
          <Column id="CNTRCT_YEAR_NO" type="STRING" size="256"/>
          <Column id="PART_SM_AM_DEMAND" type="STRING" size="256"/>
          <Column id="CNTRCT_AT" type="STRING" size="256"/>
          <Column id="DETAIL_DTLS" type="STRING" size="256"/>
          <Column id="MDAT_OPINION" type="STRING" size="256"/>
          <Column id="REGIST_DT" type="STRING" size="256"/>
          <Column id="REGISTER_ID" type="STRING" size="256"/>
          <Column id="REGISTER_NM" type="STRING" size="256"/>
          <Column id="UPDT_DT" type="STRING" size="256"/>
          <Column id="UPDUSR_ID" type="STRING" size="256"/>
          <Column id="UPDUSR_NM" type="STRING" size="256"/>
          <Column id="COMPUT_OFCL_BUKIP_ACCNUT" type="STRING" size="256"/>
          <Column id="BUDGET_EXCUT_AM" type="STRING" size="256"/>
          <Column id="PART_SM_AM_DCSN" type="STRING" size="256"/>
          <Column id="FIRST_RVSPBGT_BUDGET_AM" type="STRING" size="256"/>
          <Column id="SUMRY" type="STRING" size="4000"/>
          <Column id="PRVYY_BUDGET_PART_SM_AM" type="STRING" size="256"/>
          <Column id="NOW_BUDGET_AM" type="STRING" size="256"/>
          <Column id="GWAN" type="STRING" size="256"/>
          <Column id="HANG" type="STRING" size="256"/>
          <Column id="SEHANG" type="STRING" size="256"/>
          <Column id="MOK" type="STRING" size="256"/>
          <Column id="SEMOK" type="STRING" size="256"/>
          <Column id="MOK_SEMOK" type="STRING" size="256"/>
          <Column id="CUSTOM_TYPE" type="STRING" size="256"/>
          <Column id="CHANGE_AT" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_inpYn" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="INP_YN" type="STRING" size="1"/>
        </ColumnInfo>
        <Rows>
          <Row/>
        </Rows>
      </Dataset>
      <Dataset id="ds_validation" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="compId" type="STRING" size="256"/>
          <Column id="colId" type="STRING" size="256"/>
          <Column id="msgId" type="STRING" size="256"/>
          <Column id="PK" type="STRING" size="256"/>
          <Column id="notNull" type="STRING" size="256"/>
          <Column id="type" type="STRING" size="256"/>
          <Column id="nlength" type="STRING" size="256"/>
          <Column id="from" type="STRING" size="256"/>
          <Column id="to" type="STRING" size="256"/>
          <Column id="lengthChkGb" type="STRING" size="256"/>
          <Column id="expr" type="STRING" size="256"/>
          <Column id="func" type="STRING" size="256"/>
        </ColumnInfo>
        <Rows>
          <Row>
            <Col id="compId">ds_demandBudget</Col>
            <Col id="colId">BSNS_CODE</Col>
            <Col id="msgId">사업코드</Col>
            <Col id="PK"/>
            <Col id="notNull">Y</Col>
          </Row>
          <Row>
            <Col id="compId">ds_demandBudget</Col>
            <Col id="colId">BUDGET_ACNT_CODE</Col>
            <Col id="msgId">예산과목</Col>
            <Col id="PK"/>
            <Col id="notNull">Y</Col>
          </Row>
          <Row>
            <Col id="colId">BUKIP_CODE</Col>
            <Col id="compId">ds_demandBudget</Col>
            <Col id="msgId">부기코드</Col>
            <Col id="notNull">Y</Col>
            <Col id="PK"/>
          </Row>
          <Row>
            <Col id="compId">ds_demandBudget</Col>
            <Col id="colId">BUKIP_NM</Col>
            <Col id="msgId">부기명</Col>
            <Col id="notNull">Y</Col>
          </Row>
          <Row>
            <Col id="compId">ds_demandBudget</Col>
            <Col id="colId">OUTPT_LEVEL</Col>
            <Col id="msgId">출력레벨</Col>
            <Col id="notNull">Y</Col>
          </Row>
          <Row>
            <Col id="compId">ds_demandBudget</Col>
            <Col id="colId">BUKIP_DTLS</Col>
            <Col id="msgId">부기내역</Col>
            <Col id="notNull">Y</Col>
          </Row>
          <Row>
            <Col id="colId">FRST_DEMAND_BUDGET_AM</Col>
            <Col id="compId">ds_demandBudget</Col>
            <Col id="msgId">예산요구액^999,999,999,999,999</Col>
            <Col id="to">999999999999999</Col>
          </Row>
          <Row>
            <Col id="colId">DEMAND_BUDGET_DCSN_AM</Col>
            <Col id="compId">ds_demandBudget</Col>
            <Col id="msgId">예산확정액^999,999,999,999,999</Col>
            <Col id="to">999999999999999</Col>
          </Row>
          <Row>
            <Col id="compId">ds_condPrint</Col>
            <Col id="colId">DEPT_CODE</Col>
            <Col id="msgId">부서</Col>
            <Col id="notNull">Y</Col>
          </Row>
          <Row>
            <Col id="compId">ds_condCopy</Col>
            <Col id="colId">PRVYY_BSNS_CODE</Col>
            <Col id="msgId">전년도사업</Col>
            <Col id="notNull">Y</Col>
          </Row>
          <Row>
            <Col id="compId">ds_condCopy</Col>
            <Col id="colId">BSNS_CODE</Col>
            <Col id="msgId">당해사업</Col>
            <Col id="notNull">Y</Col>
          </Row>
          <Row>
            <Col id="compId">ds_cond</Col>
            <Col id="colId">YEAR</Col>
            <Col id="msgId">예산년도</Col>
            <Col id="notNull">Y</Col>
          </Row>
          <Row>
            <Col id="compId">ds_cond</Col>
            <Col id="colId">DEPT_CODE</Col>
            <Col id="msgId">부서</Col>
            <Col id="notNull">Y</Col>
          </Row>
        </Rows>
      </Dataset>
      <Dataset id="ds_print" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="YEAR" type="STRING" size="256"/>
          <Column id="BSNS_SE" type="STRING" size="256"/>
          <Column id="BALC_SE" type="STRING" size="256"/>
          <Column id="EXPNDTR_UNIT_NM" type="STRING" size="256"/>
          <Column id="COMPUT_BSIS_CODE" type="STRING" size="256"/>
          <Column id="COMPUT_BSIS_NM" type="STRING" size="256"/>
          <Column id="COMPUT_BSIS" type="STRING" size="256"/>
          <Column id="COMPUT_BSIS_DTLS" type="STRING" size="256"/>
          <Column id="BUDGET_AM" type="BIGDECIMAL" size="256"/>
          <Column id="BSIS_BUDGET_AM" type="BIGDECIMAL" size="256"/>
          <Column id="PRV_EXECUT_AM" type="BIGDECIMAL" size="256"/>
          <Column id="NOW_EXECUT_AM" type="BIGDECIMAL" size="256"/>
          <Column id="MIN_AM" type="BIGDECIMAL" size="256"/>
          <Column id="BSIS_MIN_AM" type="BIGDECIMAL" size="256"/>
          <Column id="PRV_BSIS_BUDGET_AM" type="BIGDECIMAL" size="256"/>
          <Column id="DEPT_NM" type="STRING" size="256"/>
          <Column id="BUDGET_SE" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_cond00" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false" oncolumnchanged="ds_cond_oncolumnchanged">
        <ColumnInfo>
          <Column id="YEAR" type="STRING" size="4"/>
          <Column id="DEPT_CODE" type="STRING" size="1"/>
          <Column id="DEPT_NM" type="STRING" size="256"/>
          <Column id="BSNS_SE" type="STRING" size="1"/>
          <Column id="BALC_SE" type="STRING" size="1"/>
          <Column id="BUDGET_SE" type="STRING" size="1"/>
          <Column id="EMPNO" type="STRING" size="256"/>
          <Column id="BSNS_CODE" type="STRING" size="256"/>
          <Column id="BSNS_NM" type="STRING" size="256"/>
          <Column id="ACNT_CODE" type="STRING" size="256"/>
          <Column id="ACNT_NM" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_sancGrid" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="YEAR" type="STRING" size="256"/>
          <Column id="BSNS_SE" type="STRING" size="256"/>
          <Column id="BALC_SE" type="STRING" size="256"/>
          <Column id="BUDGET_ACNT_CODE" type="STRING" size="256"/>
          <Column id="BUDGET_ACNT_NM2" type="STRING" size="256"/>
          <Column id="BUDGET_ACNT_NM" type="STRING" size="256"/>
          <Column id="ACNT_LEVEL" type="STRING" size="256"/>
          <Column id="UPPER_ACNT_CODE" type="STRING" size="256"/>
          <Column id="GWAN" type="STRING" size="256"/>
          <Column id="HANG" type="STRING" size="256"/>
          <Column id="SEHANG" type="STRING" size="256"/>
          <Column id="MOK" type="STRING" size="256"/>
          <Column id="SEMOK" type="STRING" size="256"/>
          <Column id="TAXITM_NM" type="STRING" size="256"/>
          <Column id="DETAIL_BSNS_NM" type="STRING" size="256"/>
          <Column id="EXPNDTR_UNIT_NM" type="STRING" size="256"/>
          <Column id="COMPUT_BSIS_CODE" type="STRING" size="256"/>
          <Column id="COMPUT_BSIS_NM" type="STRING" size="256"/>
          <Column id="COMPUT_BSIS" type="STRING" size="256"/>
          <Column id="COMPUT_BSIS_DTLS" type="STRING" size="256"/>
          <Column id="BUDGET_AM" type="BIGDECIMAL" size="256"/>
          <Column id="BSIS_BUDGET_AM" type="BIGDECIMAL" size="256"/>
          <Column id="PRV_EXECUT_AM" type="BIGDECIMAL" size="256"/>
          <Column id="NOW_EXECUT_AM" type="BIGDECIMAL" size="256"/>
          <Column id="MIN_AM" type="BIGDECIMAL" size="256"/>
          <Column id="BSIS_MIN_AM" type="BIGDECIMAL" size="256"/>
          <Column id="PRV_BSIS_BUDGET_AM" type="BIGDECIMAL" size="256"/>
          <Column id="DEPT_NM" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_bdg018" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="ETC1" type="string" size="32"/>
          <Column id="VAL2" type="string" size="32"/>
          <Column id="CODE_CN" type="string" size="32"/>
          <Column id="VAL1" type="string" size="32"/>
          <Column id="USE_YN" type="string" size="32"/>
          <Column id="ETC3" type="string" size="32"/>
          <Column id="VAL4" type="string" size="32"/>
          <Column id="ETC2" type="string" size="32"/>
          <Column id="VAL3" type="string" size="32"/>
          <Column id="CODE_ORDR" type="bigdecimal" size="16"/>
          <Column id="MSTK_VAL" type="string" size="32"/>
          <Column id="ALL_CODE_NM" type="string" size="32"/>
          <Column id="CODE_NM" type="string" size="32"/>
          <Column id="INT_VAL" type="string" size="32"/>
          <Column id="GRP_CODE" type="string" size="32"/>
          <Column id="CODE" type="string" size="32"/>
          <Column id="VAL0" type="string" size="32"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_cntDemandOpinion">
        <ColumnInfo>
          <Column id="CNT_DEMAND_OPINION" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_prvYearBdgAm">
        <ColumnInfo>
          <Column id="PrvYearBdgAm" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_condSub2" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="YEAR" type="STRING" size="256"/>
          <Column id="BSNS_SE" type="STRING" size="256"/>
          <Column id="BALC_SE" type="STRING" size="256"/>
          <Column id="BUDGET_SE" type="STRING" size="256"/>
          <Column id="DEPT_CODE" type="STRING" size="256"/>
          <Column id="BUDGET_ACNT_CODE" type="STRING" size="256"/>
          <Column id="BSNS_CODE" type="STRING" size="256"/>
          <Column id="BUKIP_CODE" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_condPrint" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="YEAR" type="STRING" size="4"/>
          <Column id="DEPT_CODE" type="STRING" size="6"/>
          <Column id="DEPT_NM" type="STRING" size="256"/>
          <Column id="BSNS_SE" type="STRING" size="256"/>
          <Column id="BALC_SE" type="STRING" size="256"/>
          <Column id="BUDGET_SE" type="STRING" size="256"/>
          <Column id="BUDGET_SE_NM" type="STRING" size="256"/>
          <Column id="DETAIL_BSNS_CODE" type="STRING" size="256"/>
          <Column id="BUDGET_TYPE" type="STRING" size="256"/>
          <Column id="WINDOW_ID" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_condCopy" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="YEAR" type="STRING" size="4"/>
          <Column id="DEMAND_YEAR" type="STRING" size="4"/>
          <Column id="DEPT_CODE" type="STRING" size="6"/>
          <Column id="DEPT_NM" type="STRING" size="256"/>
          <Column id="BSNS_SE" type="STRING" size="1"/>
          <Column id="BALC_SE" type="STRING" size="1"/>
          <Column id="BUDGET_SE" type="STRING" size="1"/>
          <Column id="DEMAND_BUDGET_SE" type="STRING" size="1"/>
          <Column id="PRVYY_BSNS_CODE" type="STRING" size="256"/>
          <Column id="PRVYY_BSNS_NM" type="STRING" size="256"/>
          <Column id="BSNS_CODE" type="STRING" size="256"/>
          <Column id="BSNS_NM" type="STRING" size="256"/>
        </ColumnInfo>
        <Rows>
          <Row/>
        </Rows>
      </Dataset>
      <Dataset id="ds_bsnsMnl" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="YEAR" type="STRING" size="256"/>
          <Column id="BUDGET_SE" type="STRING" size="256"/>
          <Column id="BSNS_SE" type="STRING" size="256"/>
          <Column id="BSNS_CODE" type="STRING" size="256"/>
          <Column id="BSNS_NM" type="STRING" size="256"/>
          <Column id="DEPT_CODE" type="STRING" size="256"/>
          <Column id="DEPT_NM" type="STRING" size="256"/>
          <Column id="DEMAND_NO" type="STRING" size="256"/>
          <Column id="ORG_DEMAND_NO" type="STRING" size="256"/>
          <Column id="ORGINL_DEMAND_NO" type="STRING" size="256"/>
          <Column id="BUDGET_ACNT_CODE" type="STRING" size="256"/>
          <Column id="BUDGET_ACNT_NM" type="STRING" size="256"/>
          <Column id="BALC_SE" type="STRING" size="256"/>
          <Column id="SN" type="STRING" size="256"/>
          <Column id="CONFM_AT" type="STRING" size="256"/>
          <Column id="BUKIP_CODE" type="STRING" size="256"/>
          <Column id="BUKIP_NM" type="STRING" size="256"/>
          <Column id="BUKIP_DTLS" type="STRING" size="256"/>
          <Column id="COMPUT_OFCL" type="STRING" size="256"/>
          <Column id="PRVYY_BUDGET_AM" type="STRING" size="256"/>
          <Column id="DEMAND_BUDGET_DCSN_AM" type="STRING" size="256"/>
          <Column id="FRST_DEMAND_BUDGET_AM" type="STRING" size="256"/>
          <Column id="OUTPT_LEVEL" type="STRING" size="256"/>
          <Column id="OUTPT_ORDR" type="STRING" size="256"/>
          <Column id="CNTRCT_YEAR" type="STRING" size="256"/>
          <Column id="CNTRCT_NO" type="STRING" size="256"/>
          <Column id="CNTRCT_NM" type="STRING" size="256"/>
          <Column id="CNTRCT_YEAR_NO" type="STRING" size="256"/>
          <Column id="PART_SM_AM_DEMAND" type="STRING" size="256"/>
          <Column id="CNTRCT_AT" type="STRING" size="256"/>
          <Column id="DETAIL_DTLS" type="STRING" size="256"/>
          <Column id="MDAT_OPINION" type="STRING" size="256"/>
          <Column id="REGIST_DT" type="STRING" size="256"/>
          <Column id="REGISTER_ID" type="STRING" size="256"/>
          <Column id="REGISTER_NM" type="STRING" size="256"/>
          <Column id="UPDT_DT" type="STRING" size="256"/>
          <Column id="UPDUSR_ID" type="STRING" size="256"/>
          <Column id="UPDUSR_NM" type="STRING" size="256"/>
          <Column id="COMPUT_OFCL_BUKIP_ACCNUT" type="STRING" size="256"/>
          <Column id="BUDGET_EXCUT_AM" type="STRING" size="256"/>
          <Column id="PART_SM_AM_DCSN" type="STRING" size="256"/>
          <Column id="FIRST_RVSPBGT_BUDGET_AM" type="STRING" size="256"/>
          <Column id="SUMRY" type="STRING" size="256"/>
          <Column id="PRVYY_BUDGET_PART_SM_AM" type="STRING" size="256"/>
          <Column id="NOW_BUDGET_AM" type="STRING" size="256"/>
          <Column id="GWAN" type="STRING" size="256"/>
          <Column id="HANG" type="STRING" size="256"/>
          <Column id="SEHANG" type="STRING" size="256"/>
          <Column id="MOK" type="STRING" size="256"/>
          <Column id="SEMOK" type="STRING" size="256"/>
          <Column id="MOK_SEMOK" type="STRING" size="256"/>
          <Column id="CUSTOM_TYPE" type="STRING" size="256"/>
          <Column id="CHANGE_AT" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
    </Objects>
    <Bind>
      <BindItem id="item2" compid="div_search.cbo_BSNS_SE" propid="value" datasetid="ds_cond" columnid="BSNS_SE"/>
      <BindItem id="item14" compid="div_search.spn_YEAR" propid="value" datasetid="ds_cond" columnid="YEAR"/>
      <BindItem id="item1" compid="div_search.edt_BSNS_NM" propid="value" datasetid="ds_cond" columnid="BSNS_NM"/>
      <BindItem id="item4" compid="div_search.edt_BSNS_CODE" propid="value" datasetid="ds_cond" columnid="DETAIL_BSNS_CODE"/>
      <BindItem id="item3" compid="div_print00.edt_BSNS_CODE" propid="value" datasetid="ds_cond" columnid="BSNS_CODE"/>
      <BindItem id="item5" compid="div_print00.edt_ACNT_CODE" propid="value" datasetid="ds_cond" columnid="ACNT_CODE"/>
      <BindItem id="item6" compid="div_print00.edt_ACNT_NM" propid="value" datasetid="ds_cond" columnid="ACNT_NM"/>
      <BindItem id="item7" compid="div_print00.edt_BSNS_NM" propid="value" datasetid="ds_cond" columnid="BSNS_NM"/>
      <BindItem id="item0" compid="div_search.rdo_BALC_SE" propid="value" datasetid="ds_cond" columnid="BALC_SE"/>
      <BindItem id="item8" compid="div_search.cbo_BUDGET_SE" propid="value" datasetid="ds_cond" columnid="BUDGET_SE"/>
      <BindItem id="item13" compid="div_pop.cmb_BSNS_SE" propid="value" datasetid="ds_condCopy" columnid="BSNS_SE"/>
      <BindItem id="item15" compid="div_pop.cmd_budgetSe" propid="value" datasetid="ds_condCopy" columnid="BUDGET_SE"/>
      <BindItem id="item16" compid="div_pop.cmb_demandBudgetSe" propid="value" datasetid="ds_condCopy" columnid="DEMAND_BUDGET_SE"/>
      <BindItem id="item17" compid="div_pop.edt_deptNm" propid="value" datasetid="ds_condCopy" columnid="DEPT_NM"/>
      <BindItem id="item12" compid="div_pop.cmb_balcSe" propid="value" datasetid="ds_condCopy" columnid="BALC_SE"/>
      <BindItem id="item10" compid="div_pop.spn_year" propid="value" datasetid="ds_condCopy" columnid="YEAR"/>
      <BindItem id="item11" compid="div_pop.spn_demandYear" propid="value" datasetid="ds_condCopy" columnid="DEMAND_YEAR"/>
      <BindItem id="item25" compid="div_search.edt_budgetAcntCode" propid="value" datasetid="ds_cond" columnid="BUDGET_ACNT_CODE"/>
      <BindItem id="item43" compid="div_search.edt_budgetAcntNm" propid="value" datasetid="ds_cond" columnid="BUDGET_ACNT_NM"/>
      <BindItem id="item9" compid="div_pop.div_pop.cmb_BSNS_SE" propid="value" datasetid="ds_condCopy" columnid="BSNS_SE"/>
      <BindItem id="item19" compid="div_pop.div_pop.cmd_budgetSe" propid="value" datasetid="ds_condCopy" columnid="BUDGET_SE"/>
      <BindItem id="item20" compid="div_pop.div_pop.cmb_demandBudgetSe" propid="value" datasetid="ds_condCopy" columnid="DEMAND_BUDGET_SE"/>
      <BindItem id="item21" compid="div_pop.div_pop.edt_deptNm" propid="value" datasetid="ds_condCopy" columnid="DEPT_NM"/>
      <BindItem id="item22" compid="div_pop.div_pop.edt_bsnsNm" propid="value" datasetid="ds_condCopy" columnid="BSNS_NM"/>
      <BindItem id="item23" compid="div_pop.div_pop.cmb_balcSe" propid="value" datasetid="ds_condCopy" columnid="BALC_SE"/>
      <BindItem id="item24" compid="div_pop.div_pop.spn_year" propid="value" datasetid="ds_condCopy" columnid="YEAR"/>
      <BindItem id="item26" compid="div_pop.div_pop.spn_demandYear" propid="value" datasetid="ds_condCopy" columnid="DEMAND_YEAR"/>
      <BindItem id="item27" compid="div_pop00.cmb_BSNS_SE" propid="value" datasetid="ds_condCopy" columnid="BSNS_SE"/>
      <BindItem id="item28" compid="div_pop00.cmd_budgetSe" propid="value" datasetid="ds_condCopy" columnid="BUDGET_SE"/>
      <BindItem id="item29" compid="div_pop00.cmb_demandBudgetSe" propid="value" datasetid="ds_condCopy" columnid="DEMAND_BUDGET_SE"/>
      <BindItem id="item30" compid="div_pop00.edt_deptNm" propid="value" datasetid="ds_condCopy" columnid="DEPT_NM"/>
      <BindItem id="item31" compid="div_pop00.edt_bsnsNm" propid="value" datasetid="ds_condCopy" columnid="BSNS_NM"/>
      <BindItem id="item32" compid="div_pop00.cmb_balcSe" propid="value" datasetid="ds_condCopy" columnid="BALC_SE"/>
      <BindItem id="item33" compid="div_pop00.spn_year" propid="value" datasetid="ds_condCopy" columnid="YEAR"/>
      <BindItem id="item34" compid="div_pop00.spn_demandYear" propid="value" datasetid="ds_condCopy" columnid="DEMAND_YEAR"/>
      <BindItem id="item35" compid="div_pop00.div_pop.cmb_BSNS_SE" propid="value" datasetid="ds_condCopy" columnid="BSNS_SE"/>
      <BindItem id="item36" compid="div_pop00.div_pop.cmd_budgetSe" propid="value" datasetid="ds_condCopy" columnid="BUDGET_SE"/>
      <BindItem id="item37" compid="div_pop00.div_pop.cmb_demandBudgetSe" propid="value" datasetid="ds_condCopy" columnid="DEMAND_BUDGET_SE"/>
      <BindItem id="item38" compid="div_pop00.div_pop.edt_deptNm" propid="value" datasetid="ds_condCopy" columnid="DEPT_NM"/>
      <BindItem id="item39" compid="div_pop00.div_pop.edt_bsnsNm" propid="value" datasetid="ds_condCopy" columnid="BSNS_NM"/>
      <BindItem id="item40" compid="div_pop00.div_pop.cmb_balcSe" propid="value" datasetid="ds_condCopy" columnid="BALC_SE"/>
      <BindItem id="item41" compid="div_pop00.div_pop.spn_year" propid="value" datasetid="ds_condCopy" columnid="YEAR"/>
      <BindItem id="item42" compid="div_pop00.div_pop.spn_demandYear" propid="value" datasetid="ds_condCopy" columnid="DEMAND_YEAR"/>
      <BindItem id="item44" compid="div_pop.edt_BSNS_CODE" propid="value" datasetid="ds_condCopy" columnid="PRVYY_BSNS_NM"/>
      <BindItem id="item18" compid="div_pop.edt_BSNS_CODE00" propid="value" datasetid="ds_condCopy" columnid="BSNS_NM"/>
    </Bind>
    <Script type="xscript5.0"><![CDATA[/**********************************************************************
* 화면ID   : BDG030101.xfdl
* 화면명   : 예산요구등록
* 화면설명 : 예산요구등록을 관리한다.
* 작성일   : 2017.03.27
* 작성자   : 김형태
* 수정이력 : 
***********************************************************************
*     수정일     수정자   내용
***********************************************************************
*
***********************************************************************
*/


/**********************************************************************
* Script Include 
***********************************************************************/
// 시스템 공통 라이브러리 Include
include "lib::comInclude.xjs";
include "mis_lib::misUtil.xjs";

/**********************************************************************
* 화면 변수 선언부
***********************************************************************/

var save_row = -1;

this.inpYn = false;
this.deptCode = this.gfn_getDeptId();
this.chargerAt = false;

/**********************************************************************
* onInit / onLoad 영역
***********************************************************************/
this.BDG030101_oninit = function(obj:Form, e:nexacro.InitEventInfo)
{
	// ..
}

this.BDG030101_onload = function(obj:Form, e:nexacro.LoadEventInfo)
{
	// Form 초기화
	this.fn_init_form();

	// DataSet 초기화
	this.fn_init_dataset();
}



/**********************************************************************
* Form/Dataset 오브젝트 초기화
***********************************************************************/

/*
 * 함수명  	: initForm
 * 설명 		: Form을 초기화한다.
 * params  		: None
 * return Type 	: None
 * 사용법		: this.initForm();
 */
this.fn_init_form = function()
{
	this.gfn_initForm(this);
	this.fn_misFormInit(this);
	
	// 오브젝트 등에 대한 처리
	this.div_search.div_srchDept.fn_setBind("ds_cond","DEPT_CODE","DEPT_NM");
	this.div_search.div_srchDept.div_Search.edt_deptCode.set_cssclass("edt_WF_Essential");
	this.div_search.div_srchDept.div_Search.edt_deptNm.set_cssclass("edt_WF_Essential");
	//this.div_search.div_srchDept.fn_setReadonly(true);
	
	// 최초 검색조건에 대한 처리
	this.ds_cond.set_enableevent(false);
	this.ds_cond.clearData();
	var nRow = this.ds_cond.addRow();
	this.ds_cond.setColumn(nRow, "YEAR", this.comUtils.getClientDate("YYYY"));	// 당해년도
	
	// 공통코드
	var comboParams = [
	    ["ds_bdg001",       "BDG001", "Y", "A", "B"]	// ds_bdg001 : 사업구분
	   ,["ds_bdg002",       "BDG002", "Y", "A", "B"]	// ds_bdg002 : 수지구분
	   ,["ds_bdg003",       "BDG003", "Y", "D", "B"]	// ds_bdg003 : 예산구분
	   ,["ds_bdg018",       "BDG018", "Y", "D", "B"]	// ds_bdg018 : 출력레벨
	];
	var callback = function (svcId, errorCode, errorMsg) {
		// 집행계획 관련 예산구분 제외
		this.ds_bdg003.filter("CODE < 10");
		this.ds_cond.setColumn(0, "FORMATN_BFE_SE", "7");
		
		// 공통코드와 연계된 초기검색조건 설정
		this.ds_cond.setColumn(nRow, "BSNS_SE",   "1");	// (사업구분) 1:사업예산, 2:자본예산, 3:자금운용
		this.ds_cond.setColumn(nRow, "BALC_SE",   "2");	// (수지구분) 1:수입, 2:지출
		this.ds_cond.setColumn(nRow, "BUDGET_SE", "0");	// (예산구분) 0:본예산, 1:추경1차, 2:추경2차, 3:추경3차, 4:추경4차, 5:추경5차, 6:추경6차
		
		
		// 수정가능여부를 판별하기위해 권한그룹 체크
		if(this.gfn_authGrpId("DEV_GRP") != -1) {			// 개발자
			this.chargerAt = true;
		}
		if(this.gfn_authGrpId("BDG_USER") != -1) {			// 예산담당자
			this.chargerAt = true;
		}
		if(this.gfn_authGrpId("BDG_ADMIN") != -1) {			// 예산결재자
			this.chargerAt = true;
		}
		
		this.ds_cond.setColumn(nRow, "DEPT_CODE", this.gfn_getDeptId()  );	// 부서코드
		this.ds_cond.setColumn(nRow, "DEPT_NM",   this.gfn_getDeptName());	// 부서명
		
		// 수정가능한 경우 부서변경 가능
		if(this.chargerAt){
			this.div_search.div_srchDept.set_enable(true);
			this.div_search.div_srchDept.div_Search.edt_deptNm.set_readonly(true);
// 			this.ds_cond.setColumn(nRow, "DEPT_CODE", "000000"        );		// 부서코드
// 			this.ds_cond.setColumn(nRow, "DEPT_NM",   "화성도시공사");		// 부서명
			this.grd_BUDGET_FRMTN_STTUS.setFormatColProperty(16, "size", 200);	// 산출공식(예산확정공식)
			//this.grd_BUDGET_FRMTN_STTUS.setFormatColProperty(17, "size", 160);	// 예산조정의견
		}
		// 본인의 부서 고정
		else{
			//해당 부서만
// 			this.ds_cond.setColumn(nRow, "DEPT_CODE", this.gfn_getDeptId()  );	// 부서코드
// 			this.ds_cond.setColumn(nRow, "DEPT_NM",   this.gfn_getDeptName());	// 부서명
			this.grd_BUDGET_FRMTN_STTUS.setFormatColProperty(16, "size", 0);	// 산출공식(예산확정공식)
			//this.grd_BUDGET_FRMTN_STTUS.setFormatColProperty(17, "size", 0);	// 예산조정의견
		}
		
		
		this.grd_BUDGET_FRMTN_STTUS.setFormatColProperty(11, "size", 0);	// 전년도예산액
		this.grd_BUDGET_FRMTN_STTUS.setFormatColProperty(12, "size", 0);	// 전년도집행실적
		this.grd_BUDGET_FRMTN_STTUS.setFormatColProperty(17, "size", 0);	// 예산조정의견
		this.grd_BUDGET_FRMTN_STTUS.setFormatColProperty(18, "size", 0);	// 세부내역
		this.grd_BUDGET_FRMTN_STTUS.setFormatColProperty(19, "size", 0);	// 계약여부
		this.grd_BUDGET_FRMTN_STTUS.setFormatColProperty(20, "size", 0);	// 계약정보(계약번호)
		this.grd_BUDGET_FRMTN_STTUS.setFormatColProperty(21, "size", 0);	// 계약정보(계약명)
		
		this.ds_cond.set_enableevent(true);
		this.fn_search();
	};
	this.gfn_comboLoad (comboParams, callback);
}


/*
 * 함수명  	: initDataset
 * 설명 		: Dataset을 초기화한다
 * params  		: None
 * return Type 	: None
 * 사용법		: this.initDataset();
 */
this.fn_init_dataset = function()
{
	// 조건 Dataset 외에 초기화가 필요한 Dataset에 대한 초기화 코드를 추가
}



/**********************************************************************
* Transaction 영역 시작
***********************************************************************
*
* 1. Transaction 관련 이벤트 핸들러
* 2. call Transaction 영역
* 3. callback 영역(Transaction, Popup)
* 
***********************************************************************/



/**********************************************************************
* Transaction 관련 이벤트 핸들러 
***********************************************************************/

/*
 * 함수명  	: fn_search
 * 설명 		: 조회 이벤트 처리(세부사업)
 * params  		: None
 * return Type 	: None
 * 사용법		: this.fn_search();
 */
this.fn_search = function(obj:Button,  e:nexacro.ClickEventInfo)
{	
	// validation 체크(조회)
	if(!this.gfn_checkValidation_NoUpdChk(this.ds_cond, this.ds_validation)) {
		return;
	}
	
	// 변경여부 체크
	if(Ex.util.isUpdated(this.ds_demandBudget)) {
		if(!this.gfn_message("confirm.변경.취소.여부")) {
			return false;	// 아니오
		}
	}
	
	// clear Datasets
	this.ds_inpYn.clearData();
	
	// transaction
	this.fn_transaction("selectInpYn");
}



/*
 * 함수명  	: fn_search_sub1
 * 설명 		: 조회 이벤트 처리(요구예산)
 * params  		: None
 * return Type 	: None
 * 사용법		: this.fn_search_sub1();
 */
this.fn_search_sub1 = function()
{
	// clear Datasets
	this.ds_demandBudget.clearData();
	
	// transaction
	this.fn_transaction("selectDemandBudget");
}


/*
 * 함수명  	: fn_save
 * 설명 		: 저장 이벤트 처리(요구예산, 산출기초)
 * params  		: None
 * return Type 	: None
 * 사용법		: this.fn_save();
 */
this.fn_save = function()
{
	// 저장가능 체크여부
	var inpYn = this.ds_inpYn.getColumn(0, "INP_YN") == '1' ? true : false;
	if(!inpYn){
		this.gfn_message("info.처리불가", "예산요구 등록기간이 아닙니다.");
		this.ds_demandBudget.reset();
		return false;
	}
	// 데이터셋 수정 여부체크
	if (!this.comUtils.isDatasetUpdated(this.ds_demandBudget)) {
		this.gfn_message("comm.데이터.변경.없음");
		return false;
	}
	
	// validation 체크(예산편성현황)
	if(!this.gfn_checkValidation_NoUpdChk(this.ds_demandBudget, this.ds_validation)) {
		return;
	}
	
	if(this.gfn_message("confirm.저장.여부")) {
		save_row = this.ds_demandBudget.rowposition;
		
		this.fn_transaction("save");
	}
}



/**********************************************************************
* call Transaction 영역
***********************************************************************/

/*
 * 함수명  	: fn_transaction
 * 설명 		: Transaction 요청 처리 함수
 * params  		: strSvcId : 서비스요청 ID
 * return Type 	: None
 * 사용법		: this.fn_transaction("SELECT");
 */
this.fn_transaction = function(strSvcId)
{
	switch (strSvcId) {
		case "selectInpYn":	// 입력가능여부 조회
			var sController   	= "/hsco/mis/bdg/BDG030101/selectInpYn.do";
			var sInDatasets   	= "input1=ds_cond";
			var sOutDatasets  	= "ds_inpYn=output1 ds_cntDemandOpinion=output2";
			break;
		case "selectDemandBudget":		// sub데이터 조회(요구예산)
			// ds_cond -> ds_demandBudget
			var dbRow 		= this.ds_cond.rowposition;
			this.ds_condSub1.clearData();
			var nRow = this.ds_condSub1.addRow();
			this.ds_condSub1.copyRow(nRow, this.ds_cond, dbRow);
			
			var sController   	= "/hsco/mis/bdg/BDG030101/selectDemandBudget.do";
			var sInDatasets   	= "input1=ds_condSub1";
			var sOutDatasets  	= "ds_demandBudget=output1";
			break;
		case "selectPrvYearBdgAm":	// 조회(전년도편성금액)
			var sController   	= "/hsco/mis/bdg/BDG030101/selectPrvYearBdgAm.do";
			var sInDatasets   	= "input1=ds_condSub2";
			var sOutDatasets  	= "ds_prvYearBdgAm=output1";
			break;
		case "save":				// 저장(예산요구등록)
			var sController   	= "hsco/mis/bdg/BDG030101/save.do";
			var sInDatasets   	= "input2=ds_cond input1=ds_demandBudget:A";
			var sOutDatasets  	= "";
			break;
		case "saveCopyPrvYear":		// 전년도복사
			var sController   	= "hsco/mis/bdg/BDG030101/saveCopyPrvYear.do";
			var sInDatasets   	= "input1=ds_condCopy";
			var sOutDatasets  	= "";
			break;
		case "saveCopyFormatnBfe":	// 성립전예산불러오기
			var sController   	= "hsco/mis/bdg/BDG030101/saveCopyFormatnBfe.do";
			var sInDatasets   	= "input1=ds_cond";
			var sOutDatasets  	= "";
			break;
		case "readjst":				// 순서및합계재조정
			var sController   	= "hsco/mis/bdg/BDG030101/readjst.do";
			var sInDatasets   	= "input1=ds_cond";
			var sOutDatasets  	= "";
			break;
	}
	Ex.core.tran(this, strSvcId, sController, sInDatasets, sOutDatasets); 
}



/**********************************************************************
* Transaction Callback 영역
***********************************************************************/

 /*
 * 함수명  	: fn_callBack
 * 설명 		: Transaction Callback 처리
 * params  		: strSvcId    : 서비스요청 ID
 *                nErrorCode  : 오류 메시지 코드 ([예] 0 : Success, 그밖의 경우, error)
 *                strErrorMsg : 오류 메시지([예]  success.insert|정상적으로 등록되었습니다.)
 * return Type 	: None
 * 사용법		: 
 */
this.fn_callBack = function (strSvcId, nErrorCode, strErrorMsg)
{
	if(nErrorCode != '0') {
		this.gfn_callback_message(strSvcId, nErrorCode, strErrorMsg);
	}

	if (nErrorCode == 0){
		switch (strSvcId) {
			case "selectInpYn":				// 조회(입력가능여부)
				// 입력가능여부에 따라서 수정조건 처리
				this.inpYn = this.ds_inpYn.getColumn(0, "INP_YN") == '1' ? true : false;
				this.btn_copy.set_enable(this.inpYn);
				this.btn_Add.set_enable(this.inpYn);
				this.btn_Delete.set_enable(this.inpYn);
				this.btn_Cancel.set_enable(this.inpYn);
				this.btn_up.set_enable(this.inpYn);
				this.btn_down.set_enable(this.inpYn);
				
				var cntDemandOpinion = this.ds_cntDemandOpinion.getColumn(0, "CNT_DEMAND_OPINION");
				this.btn_demandOpinion.set_text("조정의견(" + cntDemandOpinion + "건)");
				
				// 요구예산 조회
 				this.fn_search_sub1();
				break;
			case "selectDemandBudget":		// 조회(요구예산)
				var year     = this.ds_cond.getColumn(0, "YEAR");
				var budgetSe = this.ds_cond.getColumn(0, "BUDGET_SE");
				var bsnsSe   = this.ds_cond.getColumn(0, "BSNS_SE");
				var balcSe   = this.ds_cond.getColumn(0, "BALC_SE");
				var deptCode = this.ds_cond.getColumn(0, "DEPT_CODE");
				var deptNm   = this.ds_cond.getColumn(0, "DEPT_NM");
				var bsnsCode = this.ds_cond.getColumn(0, "DETAIL_BSNS_CODE");
				var bsnsNm   = this.ds_cond.getColumn(0, "BSNS_NM");
				
				if(budgetSe == '0') {
					this.ds_condCopy.setColumn(0, "YEAR",             (year-1) );
					this.ds_condCopy.setColumn(0, "DEMAND_YEAR",      year     );
					this.ds_condCopy.setColumn(0, "BUDGET_SE",        budgetSe );
					this.ds_condCopy.setColumn(0, "DEMAND_BUDGET_SE", budgetSe );
					this.ds_condCopy.setColumn(0, "BSNS_SE",          bsnsSe   );
					this.ds_condCopy.setColumn(0, "BALC_SE",          balcSe   );
					this.ds_condCopy.setColumn(0, "DEPT_CODE",        deptCode );
					this.ds_condCopy.setColumn(0, "DEPT_NM",          deptNm   );
					this.ds_condCopy.setColumn(0, "PRVYY_BSNS_CODE",  bsnsCode );
					this.ds_condCopy.setColumn(0, "PRVYY_BSNS_NM",    bsnsNm   );
					this.ds_condCopy.setColumn(0, "BSNS_CODE",        bsnsCode );
					this.ds_condCopy.setColumn(0, "BSNS_NM",          bsnsNm   );
					
					this.div_pop.cmd_budgetSe.set_readonly(true);
					this.div_pop.cmd_budgetSe.set_cssclass("cmb_WF_Readonly");
				}
				else {
					this.ds_condCopy.setColumn(0, "YEAR",             year     );
					this.ds_condCopy.setColumn(0, "DEMAND_YEAR",      year     );
					this.ds_condCopy.setColumn(0, "BUDGET_SE",        budgetSe );
					this.ds_condCopy.setColumn(0, "DEMAND_BUDGET_SE", budgetSe );
					this.ds_condCopy.setColumn(0, "BSNS_SE",          bsnsSe   );
					this.ds_condCopy.setColumn(0, "BALC_SE",          balcSe   );
					this.ds_condCopy.setColumn(0, "DEPT_CODE",        deptCode );
					this.ds_condCopy.setColumn(0, "DEPT_NM",          deptNm   );
					this.ds_condCopy.setColumn(0, "PRVYY_BSNS_CODE",  bsnsCode );
					this.ds_condCopy.setColumn(0, "PRVYY_BSNS_NM",    bsnsNm   );
					this.ds_condCopy.setColumn(0, "BSNS_CODE",        bsnsCode );
					this.ds_condCopy.setColumn(0, "BSNS_NM",          bsnsNm   );
					
					this.div_pop.cmd_budgetSe.set_readonly(false);
					this.div_pop.cmd_budgetSe.set_cssclass("");
				}
				break;
			case "selectPrvYearBdgAm":		// 조회(전년도편성금액)
				var prvYearBdgAm = this.ds_prvYearBdgAm.getColumn(0, "PrvYearBdgAm");
				if(!this.comUtils.isNull(prvYearBdgAm)) {
					var nRow = this.ds_demandBudget.rowposition;
					this.ds_demandBudget.setColumn(nRow, "PRVYY_BUDGET_AM", prvYearBdgAm);
				}
				break;
			case "save": 					// 저장				
				this.gfn_message("success.처리.성공");
				this.fn_search();
				break;
			case "saveCopyPrvYear":			// 전년도복사
				this.gfn_message("success.처리.성공");
				this.div_pop.set_visible(false);
				this.fn_search();
				break;
			case "saveCopyFormatnBfe":		// 성립전예산불러오기
				this.gfn_message("success.처리.성공");
				this.fn_search();
				break;
			case "readjst":					// 순서및합계재조정
				this.gfn_message("success.처리.성공");
				this.fn_search();
				break;
		}
	}
}


/*
 * 함수명  	: fn_popupCallBack
 * 설명 		: Popup Callback 처리
 * params  		: sPopupId    : 팝업 ID
 *                sReturn  : 팝업 처리 결과(dataset.saveXML())
 * return Type 	: None
 * 사용법		: 
 */
this.fn_popupCallBack = function(sPopupId, sReturn)
{
	// 사업코드(조회조건)
	if(sPopupId == "popBsns") {
		var dsTemp = new Dataset();
		var loadCnt = dsTemp.loadXML(sReturn);
 		if(loadCnt) {
			var bsnsCode = dsTemp.getColumn(0, "BSNS_CODE");
 			var bsnsNm   = dsTemp.getColumn(0, "BSNS_NM");
			this.ds_cond.setColumn(0, "DETAIL_BSNS_CODE", bsnsCode);
			this.ds_cond.setColumn(0, "BSNS_NM", bsnsNm);
 		}
	}
	
	// 전년도사업
	if(sPopupId == "prvyyBsns") {
		var dsTemp = new Dataset();
		var loadCnt = dsTemp.loadXML(sReturn);
 		if(loadCnt) {
			var bsnsCode = dsTemp.getColumn(0, "BSNS_CODE");
 			var bsnsNm   = dsTemp.getColumn(0, "BSNS_NM");
			this.ds_condCopy.setColumn(0, "PRVYY_BSNS_CODE", bsnsCode);
			this.ds_condCopy.setColumn(0, "PRVYY_BSNS_NM", bsnsNm);
 		}
	}
	
	// 당해사업
	if(sPopupId == "bsns") {
		var dsTemp = new Dataset();
		var loadCnt = dsTemp.loadXML(sReturn);
 		if(loadCnt) {
			var bsnsCode = dsTemp.getColumn(0, "BSNS_CODE");
 			var bsnsNm   = dsTemp.getColumn(0, "BSNS_NM");
			this.ds_condCopy.setColumn(0, "BSNS_CODE", bsnsCode);
			this.ds_condCopy.setColumn(0, "BSNS_NM", bsnsNm);
 		}
	}
	
	// 사업코드(그리드)
	if(sPopupId == "popBsnsOnGrd") {
		var dsTemp = new Dataset();
		var loadCnt = dsTemp.loadXML(sReturn);
 		if(loadCnt) {
			var bsnsCode = dsTemp.getColumn(0, "BSNS_CODE");
 			var bsnsNm   = dsTemp.getColumn(0, "BSNS_NM");
 			var dbRow    = this.ds_demandBudget.rowposition;
			this.ds_demandBudget.setColumn(dbRow, "BSNS_CODE", bsnsCode);
			this.ds_demandBudget.setColumn(dbRow, "BSNS_NM"  , bsnsNm);
 		}
	}
	
	// 예산계정코드+예산세목
	if(sPopupId == "BDG030101_P01") {
		var dsRtn = new Dataset();
		nRowCnt = dsRtn.loadXML(sReturn);
		if(nRowCnt){
			var acntCode    = dsRtn.getColumn(0, "BUDGET_ACNT_CODE");
			var acntNm      = dsRtn.getColumn(0, "BUDGET_ACNT_NM");
			var bukipCode   = dsRtn.getColumn(0, "BUKIP_CODE");
			var bukipNm     = dsRtn.getColumn(0, "BUKIP_NM");
			var mok         = dsRtn.getColumn(0, "MOK2");
			var semok       = dsRtn.getColumn(0, "SEMOK2");
			var mok_semok   = this.comUtils.isNullEmpty(semok) ? mok : mok + "(" + semok + ")";
			
			var dbRow = this.ds_demandBudget.rowposition;
			this.ds_demandBudget.setColumn(dbRow, "BUDGET_ACNT_CODE", acntCode);	// 계정코드
			this.ds_demandBudget.setColumn(dbRow, "BUDGET_ACNT_NM"  , acntNm);		// 계정명
			this.ds_demandBudget.setColumn(dbRow, "BUKIP_CODE"      , bukipCode);	// 부기코드
			this.ds_demandBudget.setColumn(dbRow, "BUKIP_NM"        , bukipNm);		// 부기명
			this.ds_demandBudget.setColumn(dbRow, "MOK_SEMOK"       , mok_semok);	// 예산과목(목-세목)
		}
	}
	
	// 계약
	if(sPopupId == "CTR030100_P08") {
		var dsRtn = new Dataset();
		nRowCnt = dsRtn.loadXML(sReturn);
		if(nRowCnt){
			var cntrctYear    = dsRtn.getColumn(0, "CNTRCT_YEAR");
			var cntrctNo      = dsRtn.getColumn(0, "CNTRCT_NO");
			var cntrctNm      = dsRtn.getColumn(0, "CNTRCT_NM");
			var dbRow = this.ds_demandBudget.rowposition;
			
			this.ds_demandBudget.setColumn(dbRow, "CNTRCT_YEAR",	 cntrctYear);	// 계약년도
			this.ds_demandBudget.setColumn(dbRow, "CNTRCT_NO",  	 cntrctNo);		// 계약번호
			this.ds_demandBudget.setColumn(dbRow, "CNTRCT_NM",  	 cntrctNm);		// 계약번호
		}
	}
	// 부기
	if(sPopupId == "bukipListP") {
		var dsBukip = new Dataset();
		var loadCnt = dsBukip.loadXML(sReturn);
		if(loadCnt) {
			var bukipCode = dsBukip.getColumn(0, "BUKIP_CODE");
			var bukipNm   = dsBukip.getColumn(0, "BUKIP_NM");
			
			var bilRow = this.ds_bukipInfoList.rowposition;
			this.ds_bukipInfoList.setColumn(bilRow, "BUKIP_CODE", bukipCode);
			this.ds_bukipInfoList.setColumn(bilRow, "BUKIP_NM"  , bukipNm);
		}
	}
	// 예산계정과목
	if(sPopupId == "bdgAcntPop") {
		var dsBdgAcntPop = new Dataset();
		var loadCnt = dsBdgAcntPop.loadXML(sReturn);
		if(loadCnt) {
			// popup에서의 반환값
			var budgetAcntCode  = dsBdgAcntPop.getColumn(0, "BUDGET_ACNT_CODE");
			var budgetAcntNm    = dsBdgAcntPop.getColumn(0, "BUDGET_ACNT_NM");
			
			this.ds_cond.setColumn(0, "BUDGET_ACNT_CODE", budgetAcntCode);
			this.ds_cond.setColumn(0, "BUDGET_ACNT_NM"  , budgetAcntNm);
		}
	}
	// 사업설명서
	if(sPopupId == "popBsnsMnl") {
		var dsBsnsMnlPop = new Dataset();
		var loadCnt = dsBsnsMnlPop.loadXML(sReturn);
		if(loadCnt) {
			// popup에서의 반환값
			var bsnsMnl = dsBsnsMnlPop.getColumn(0, "BSNS_MNL");
			var dbRow = this.ds_demandBudget.rowposition;
			
			this.ds_demandBudget.setColumn(dbRow, "SUMRY", bsnsMnl);
		}
	}
}



/**********************************************************************
* Transaction 영역 끝
***********************************************************************/



/**********************************************************************
* non-Transaction 관련 컴포넌트 이벤트 처리 함수
***********************************************************************
*
* 1. Dataset 관련 이벤트 처리
* 2. Grid 관련 이벤트 처리
* 3. Button 관련 이벤트 처리
* 4. 공통버튼 관련 이벤트 처리
* 5. 기능함수
* 
***********************************************************************/



/**********************************************************************
* Dataset 관련 이벤트 처리
***********************************************************************/

/*
 * 함수명  	: div_search_edt_BSNS_CODE_onchanged
 * 설명 		: 사업코드 변경 후 이벤트 처리
 * params  		: None
 * return Type 	: None
 * 사용법		: this.div_search_edt_BSNS_CODE_onchanged();
 */
this.div_search_edt_BSNS_CODE_onchanged = function(obj:Edit, e:nexacro.ChangeEventInfo)
{
	var bsnsCode = this.div_search.edt_BSNS_CODE.value;
	
	if( bsnsCode == null || bsnsCode == "" ){
		this.div_search.edt_BSNS_NM.set_value("");
	}
}


/*
 * 함수명  	: div_search_edt_budgetAcntCode_onchanged
 * 설명 		: 예산계정 변경 후 이벤트 처리
 * params  		: None
 * return Type 	: None
 * 사용법		: this.div_search_edt_budgetAcntCode_onchanged();
 */
this.div_search_edt_budgetAcntCode_onchanged = function(obj:Edit, e:nexacro.ChangeEventInfo)
{
	var budgetAcnt = this.div_search.edt_budgetAcntCode.value;
	
	if( budgetAcnt == null || budgetAcnt == "" ){
		this.div_search.edt_budgetAcntNm.set_value("");
	}
}

/*
 * 함수명  	: ds_cond_cancolumnchange
 * 설명 		: 조회조건 변경 전 이벤트 처리
 * params  		: None
 * return Type 	: None
 * 사용법		: this.ds_cond_cancolumnchange();
 */
this.ds_cond_cancolumnchange = function(obj:Dataset, e:nexacro.DSColChangeEventInfo)
{
	if(e.columnid != "YEAR") {// && e.columnid != "DEPT_NM" && e.columnid != "BSNS_NM" && e.columnid != "BUDGET_ACNT_NM") {
		if(Ex.util.isUpdated(this.ds_demandBudget)) {
			if(!this.gfn_message("confirm.변경.취소.여부")) {
				return false;	// 아니오
			}
		}
	}
}

/*
 * 함수명  	: ds_cond_oncolumnchanged
 * 설명 		: 조회조건 변경 후 이벤트 처리
 * params  		: None
 * return Type 	: None
 * 사용법		: this.ds_cond_oncolumnchanged();
 */
this.ds_cond_oncolumnchanged = function(obj:Dataset, e:nexacro.DSColChangeEventInfo)
{
	if(e.columnid != "YEAR") {
		this.ds_inpYn.clearData();
		
		this.fn_transaction("selectInpYn");
	}
}

this.div_search_spn_YEAR_onchanged = function(obj:Spin, e:nexacro.ChangeEventInfo)
{
	if(Ex.util.isUpdated(this.ds_demandBudget)) {
		if(!this.gfn_message("confirm.변경.취소.여부")) {
			obj.set_value(e.prevalue);
			return false;	// 아니오
		}
	}
	
	this.ds_inpYn.clearData();
		
	this.fn_transaction("selectInpYn");
}


this.div_search_spn_YEAR_onspin = function(obj:Spin, e:nexacro.SpinEventInfo)
{
	if(Ex.util.isUpdated(this.ds_demandBudget)) {
		if(!this.gfn_message("confirm.변경.취소.여부")) {
			obj.set_value(e.prevalue);
			return false;	// 아니오
		}
	}
	
	this.ds_inpYn.clearData();
		
	this.fn_transaction("selectInpYn");
}

/**********************************************************************
* Grid 관련 이벤트 처리
***********************************************************************/

/*
 * 함수명  	: grd_BUDGET_FRMTN_STTUS_onexpandup
 * 설명 		: 그리드 버튼 클릭 후 이벤트 처리(Popup)
 * params  		: None
 * return Type 	: None
 * 사용법		: this.grd_BUDGET_FRMTN_STTUS_onexpandup(obj,e);
 */
this.grd_BUDGET_FRMTN_STTUS_onexpandup = function(obj:Grid, e:nexacro.GridMouseEventInfo)
{
	if(e.cell == '1') {
		// 사업
		var schYear = this.ds_cond.getColumn(0, "YEAR");
		var parm = {
			 arg_0      : this
			,year		: schYear
		};
		this.gfn_popup("popBsnsOnGrd", 500, 465, "", parm, "mis_acc::ACC000000_P04.xfdl", "fn_popupCallBack", true);
	}
	else if(e.cell == '7') {
		// 예산과목+부기
		var parm = {
			 arg_0      : this
			,searchStr  : this.ds_cond.saveXML()
			,strObj     : "edt_YEAR,cbo_BSNS_SE,rdo_BALC_SE"
		};
		this.gfn_popup("BDG030101_P01", 800, 530, "", parm, "mis_bdg::BDG030101_P01.xfdl", "fn_popupCallBack", true);
	}
	else if(e.cell == '18') {
		// 계약번호
		var parm = {
			 arg_0       : this
			,cntrctYear  : this.ds_cond.getColumn(0, "YEAR")
		};
		this.gfn_popup("CTR030100_P08", 950, 490, "", parm, "mis_ctr::CTR030100_P08.xfdl", "fn_popupCallBack", true);
	}
}


/*
 * 함수명  	: ds_demandBudget_cancolumnchange
 * 설명 		: 산출공식 변경시 처리
 * params  		: None
 * return Type 	: None
 * 사용법		: this.ds_demandBudget_cancolumnchange(obj,e);
 */
this.ds_demandBudget_cancolumnchange = function(obj:Dataset, e:nexacro.DSColChangeEventInfo)
{
	if (e.columnid == "COMPUT_OFCL" || e.columnid == "COMPUT_OFCL_BUKIP_ACCNUT") {	// 산출공식 변경
		var changePosbl = this.ds_cond.getColumn(0, "CHANGE_POSBL");
		if(changePosbl == "0") {
			this.gfn_message("info.처리불가", "산출 및 확정공식을 변경하시고자 할 경우,\n상단 검색조건의 사업코드 및 예산과목 없이 조회된 결과에서\n진행하여 주시기 바랍니다.\n(레벨별 합계가 어긋날 수도 있습니다.)");
			obj.setColumn(e.row, e.columnid, e.oldvalue);
			return false;
		}
	}
}


/*
 * 함수명  	: ds_demandBudget_oncolumnchanged
 * 설명 		: 예산편성현황 그리드 컬럼 변경시 처리
 * params  		: None
 * return Type 	: None
 * 사용법		: this.ds_demandBudget_oncolumnchanged(obj,e);
 */
this.ds_demandBudget_oncolumnchanged = function(obj:Dataset, e:nexacro.DSColChangeEventInfo)
{
	// 출력레벨 변경
	if(e.columnid == "OUTPT_LEVEL") {
		if(e.newvalue == "1") {
			this.ds_demandBudget.set_enableevent(false);
			this.ds_demandBudget.setColumn(e.row, "COMPUT_OFCL"             , "");
			this.ds_demandBudget.setColumn(e.row, "FRST_DEMAND_BUDGET_AM"   , "");
			this.ds_demandBudget.setColumn(e.row, "COMPUT_OFCL_BUKIP_ACCNUT", "");
			this.ds_demandBudget.setColumn(e.row, "DEMAND_BUDGET_DCSN_AM"   , "");
			this.ds_demandBudget.set_enableevent(true);
		}
	}
	
	// 산출공식 변경
	if(e.columnid == "COMPUT_OFCL" || e.columnid == "COMPUT_OFCL_BUKIP_ACCNUT") {
		this.fn_calculate(e.row, e.columnid);
		// ** 예산확정공식
		if (e.columnid == "COMPUT_OFCL_BUKIP_ACCNUT") {
			if(this.ds_demandBudget.getRowType(e.row) != Dataset.ROWTYPE_INSERT) {
				this.ds_cond.setColumn(0, "IS_CONFRIM_BDG_YN", true);
			} else {
				this.gfn_message("info.처리불가", "예산확정공식은 1회 저장이 완료된 후에 수정하여 주시기 바랍니다.(지금 변경하실 경우, 예산 편성액 합계에 반영되지 않을 수 있습니다)");
			}
			switch(this.ds_cond.getColumn(0, "BALC_SE")){
				case '1':
					this.grd_BUDGET_FRMTN_STTUS.setCellProperty("body", 16, "autosizerow", "limitmin");
					break;
				case '2':
					this.grd_BUDGET_FRMTN_STTUS.setCellProperty("body", 16, "autosizerow", "limitmin");
					break;
			}
		}
		// ** 예산산출공식
		else if (e.columnid == "COMPUT_OFCL") {
			this.ds_cond.setColumn(0, "IS_CONFRIM_BDG_YN", false);
		}
	}
		
	// TODO(변1)  예산확정금액 및 산출근거(예산팀) : 편성기간종료후 조정기간
	if (e.columnid == "FRST_DEMAND_BUDGET_AM" || e.columnid == "COMPUT_OFCL") {
		this.ds_demandBudget.set_enableevent(false);
		this.ds_demandBudget.setColumn(e.row, "DEMAND_BUDGET_DCSN_AM", this.ds_demandBudget.getColumn(e.row, "FRST_DEMAND_BUDGET_AM"));
		this.ds_demandBudget.setColumn(e.row, "COMPUT_OFCL_BUKIP_ACCNUT", this.ds_demandBudget.getColumn(e.row, "COMPUT_OFCL"));
		this.ds_demandBudget.set_enableevent(true);
	}
	
	// 수정자 정보설정(입력된 부서와 로그인 부서가 같을경우만)
	if (this.gfn_getDeptId() == this.ds_demandBudget.getColumn(e.row, "DEPT_CODE")) {
		this.ds_demandBudget.set_enableevent(false);
		this.ds_demandBudget.setColumn(e.row, "CHANGE_AT", "1");
		this.ds_demandBudget.setColumn(e.row, "UPDUSR_ID", this.gfn_getUserId());
		this.ds_demandBudget.setColumn(e.row, "UPDUSR_NM", this.gfn_getUserName());
		this.ds_demandBudget.set_enableevent(true);
	}
	
	// 전년도 예산액 가져오기
	if(e.columnid == "BSNS_CODE" || e.columnid == "BUDGET_ACNT_CODE" || e.columnid == "BUKIP_CODE") {
		var nRow           = this.ds_demandBudget.rowposition;
		var bsnsCode       = this.ds_demandBudget.getColumn(nRow, "BSNS_CODE");
		var budgetAcntCode = this.ds_demandBudget.getColumn(nRow, "BUDGET_ACNT_CODE");
		var bukipCode      = this.ds_demandBudget.getColumn(nRow, "BUKIP_CODE");
		
		if(!this.comUtils.isNull(bsnsCode) && !this.comUtils.isNull(budgetAcntCode) && !this.comUtils.isNull(bukipCode)) {
			var year     = this.ds_demandBudget.getColumn(nRow, "YEAR");
			var bsnsSe   = this.ds_demandBudget.getColumn(nRow, "BSNS_SE");
			var balcSe   = this.ds_demandBudget.getColumn(nRow, "BALC_SE");
			var budgetSe = this.ds_demandBudget.getColumn(nRow, "BUDGET_SE");
			var deptCode = this.ds_demandBudget.getColumn(nRow, "DEPT_CODE");
			
			this.ds_condSub2.clearData();
			var aRow = this.ds_condSub2.addRow();
			this.ds_prvYearBdgAm.clearData();
			
			this.ds_condSub2.setColumn(aRow, "YEAR"            , year);
			this.ds_condSub2.setColumn(aRow, "BSNS_SE"         , bsnsSe);
			this.ds_condSub2.setColumn(aRow, "BALC_SE"         , balcSe);
			this.ds_condSub2.setColumn(aRow, "BUDGET_SE"       , budgetSe);
			this.ds_condSub2.setColumn(aRow, "DEPT_CODE"       , deptCode);
			this.ds_condSub2.setColumn(aRow, "BUDGET_ACNT_CODE", budgetAcntCode);
			this.ds_condSub2.setColumn(aRow, "BSNS_CODE"       , bsnsCode);
			this.ds_condSub2.setColumn(aRow, "BUKIP_CODE"      , bukipCode);
			this.fn_transaction("selectPrvYearBdgAm");
		}
	}
	
	// 계약여부 체크 해제시
	if(e.columnid == "CNTRCT_AT" && e.newvalue == '1') {
		obj.setColumn(e.row, "CNTRCT_YEAR", "");		// 계약년도
		obj.setColumn(e.row, "CNTRCT_NO",   "");		// 계약번호
		obj.setColumn(e.row, "CNTRCT_NM",   "");		// 계약명
	}
}


/*
 * 함수명  	: grd_BUDGET_FRMTN_STTUS_oncellclick
 * 설명 		: 예산편성현황 그리드 컬럼 클릭시 처리
 * params  		: None
 * return Type 	: None
 * 사용법		: this.grd_BUDGET_FRMTN_STTUS_oncellclick(obj,e);
 */
this.grd_BUDGET_FRMTN_STTUS_oncellclick = function(obj:Grid, e:nexacro.GridClickEventInfo)
{
	//var outptLevel = obj.getCellValue(e.row, 9);
	
	// 추후 필요할 수 있음
// 	if((e.cell == 11 || e.cell == 12) && outptLevel == "1") {
// 		this.gfn_message("info.처리불가", "출력레벨이 1레벨일 경우 입력할 수 없습니다.");
// 		return false;
// 	}
	var cellType = obj.getCellProperty("Body", e.cell, "displaytype");trace(cellType);
	if(e.cell == 1 && this.inpYn) {
		// 사업
		var schYear = this.ds_cond.getColumn(0, "YEAR");
		var parm = {
			 arg_0      : this
			,year		: schYear
		};
		this.gfn_popup("popBsnsOnGrd", 500, 465, "", parm, "mis_acc::ACC000000_P04.xfdl", "fn_popupCallBack", true);
	}
	if(e.cell == 8 && this.inpYn) {
		// 예산과목+부기
		var parm = {
			 arg_0      : this
			,searchStr  : this.ds_cond.saveXML()
			,strObj     : "edt_YEAR,cbo_BSNS_SE,rdo_BALC_SE"
		};
		this.gfn_popup("BDG030101_P01", 800, 530, "", parm, "mis_bdg::BDG030101_P01.xfdl", "fn_popupCallBack", true);
	}
	if(e.cell == 16 && this.ds_demandBudget.getRowType(e.row) == Dataset.ROWTYPE_INSERT) {
		this.gfn_message("info.처리불가", "예산확정공식은 1회 저장이 완료된 후에 수정하여 주시기 바랍니다.(지금 변경하실 경우, 예산 편성액 합계에 반영되지 않을 수 있습니다)");
		return false;
	}
	if(e.cell == 25 && this.ds_demandBudget.getColumn(e.row, "OUTPT_LEVEL") == '1') {
		var bsnsMnl = this.ds_demandBudget.getColumn(e.row, "SUMRY");
		var inpYn   = this.ds_inpYn.getColumn(0, "INP_YN");
		var parm = {
			 arg_0      : this
			 , bsnsMnl	: bsnsMnl
			 , inpYn	: inpYn
		};
		this.gfn_popup("popBsnsMnl", 0, 0, "사업설명서", parm, "mis_bdg::BDG030101_P03.xfdl", "fn_popupCallBack", true);
		
		return false;
	}
}



/**********************************************************************
* Button 관련 이벤트 처리
***********************************************************************/

/*
 * 함수명  	: btn_copy_onclick
 * 설명 		: '예산 불러오기' 버튼 클릭 후 이벤트 처리
 * params  		: None
 * return Type 	: None
 * 사용법		: this.btn_copy_onclick(obj,e);
 */
this.btn_copy_onclick = function(obj:Button,  e:nexacro.ClickEventInfo)
{	
	this.div_pop.set_top(200);
	this.div_pop.set_visible(true);
}


/*
 * 함수명  	: btn_save_onclick
 * 설명 		: 예산 불러오기 팝업에서 저장 버튼 클릭 후 이벤트 처리
 * params  		: None
 * return Type 	: None
 * 사용법		: this.btn_save_onclick(obj,e);
 */
this.btn_save_onclick = function(obj:Button,  e:nexacro.ClickEventInfo)
{
	var year           = this.ds_condCopy.getColumn(0, "YEAR");
	var demandYear     = this.ds_condCopy.getColumn(0, "DEMAND_YEAR");
	var budgetNm       = this.div_pop.cmd_budgetSe.text;
	var demandBudgetNm = this.div_pop.cmb_demandBudgetSe.text;
	
	// validation 체크(예산불러오기)
	if(!this.gfn_checkValidation_NoUpdChk(this.ds_condCopy, this.ds_validation)) {
		return;
	}
	
	var confirmMsg = year + "년도 " + budgetNm + " 정보를\n";
	confirmMsg    += demandYear + "년도 " + demandBudgetNm + " 정보로 복사하시겠습니까?" + "\n";
	confirmMsg    +=  "(현재 조회된 기존 데이터는 모두 삭제된 후 재생성됩니다.)";
	if(confirm(confirmMsg)) {
		this.fn_transaction("saveCopyPrvYear");
	}
}



/*
 * 함수명  	: btn_copyFormatnBfe_onclick
 * 설명 		: 성립전예산불러오기 버튼 클릭 후 이벤트 처리
 * params  		: None
 * return Type 	: None
 * 사용법		: this.btn_copyFormatnBfe_onclick(obj,e);
 */
this.btn_copyFormatnBfe_onclick = function(obj:Button,  e:nexacro.ClickEventInfo)
{
	var formatnBfeNm = this.cmb_formatnBfeSe.text;
	var budgetNm     = this.div_search.cbo_BUDGET_SE.text;
	var srchYear = this.ds_cond.getColumn(0, "YEAR");
	var budgetSe = this.div_search.cbo_BUDGET_SE.value;
	
	var confirmMsg = srchYear + "년도 " + formatnBfeNm + "의 예산요구등록정보를" + "\n";
	confirmMsg    += budgetNm + "로 복사하시겠습니까?";
	if(confirm(confirmMsg)) {
		this.fn_transaction("saveCopyFormatnBfe");
	}
}



/*
 * 함수명  	: div_search_searchBsns_onclick
 * 설명 		: 조회조건의 사업코드 검색 버튼 클릭 후 이벤트 처리
 * params  		: None
 * return Type 	: None
 * 사용법		: this.div_search_searchBsns_onclick(obj,e);
 */
this.div_search_searchBsns_onclick = function(obj:Button,  e:nexacro.ClickEventInfo)
{
	// 사업코드
	var schYear = this.div_search.spn_YEAR.value;
	var parm = {
	     arg_0      : this
	     , year		: schYear
	};
	this.gfn_popup("popBsns", 500, 465, "사업코드 선택", parm, "mis_acc::ACC000000_P04.xfdl", "fn_popupCallBack", true);
}


/*
 * 함수명  	: btn_Add_onclick
 * 설명 		: 행추가
 * params  		: None
 * return Type 	: None
 * 사용법		: this.btn_Add_onclick();
 */
this.btn_Add_onclick = function(obj:Button,  e:nexacro.ClickEventInfo)
{
	// 조회조건에서 데이터 복사
	var year     = this.ds_cond.getColumn(0, "YEAR");
	var budgetSe = this.ds_cond.getColumn(0, "BUDGET_SE");
	var bsnsSe   = this.ds_cond.getColumn(0, "BSNS_SE");
	var balcSe   = this.ds_cond.getColumn(0, "BALC_SE");
	var deptCode = this.ds_cond.getColumn(0, "DEPT_CODE");
	var deptNm   = this.ds_cond.getColumn(0, "DEPT_NM");
	var empNo    = this.gfn_getEmpNo();
	var empNm    = this.gfn_getUserName();
	
	// 현재행의 정보를 복사
	var nRow = this.ds_demandBudget.rowposition;
	var bsnsCode;
	var bsnsNm;
	var budgetAcntCode;
	var budgetAcntNm;
	var bukipCode;
	var bukipNm;
	
	if(nRow > -1) {
		bsnsCode       = this.ds_demandBudget.getColumn(nRow, "BSNS_CODE");
		bsnsNm         = this.ds_demandBudget.getColumn(nRow, "BSNS_NM");
		budgetAcntCode = this.ds_demandBudget.getColumn(nRow, "BUDGET_ACNT_CODE");
		budgetAcntNm   = this.ds_demandBudget.getColumn(nRow, "MOK_SEMOK");
		bukipCode      = this.ds_demandBudget.getColumn(nRow, "BUKIP_CODE");
		bukipNm        = this.ds_demandBudget.getColumn(nRow, "BUKIP_NM");
	}
	
	if(this.comUtils.isNull(deptCode)) {
		this.gfn_message("info.처리불가", "검색조건에서 부서를 선택하십시오.");
		return false;
	}
	if(this.comUtils.isNull(bsnsSe)) {
		this.gfn_message("info.처리불가", "검색조건에서 사업구분을 선택하십시오.\n(현재 '전체'입니다.)");
		return false;
	}
	if(this.comUtils.isNull(balcSe)) {
		this.gfn_message("info.처리불가", "검색조건에서 수/지구분을 선택하십시오.\n(현재 '전체'입니다.)");
		return false;
	}
	
	var aRow = this.ds_demandBudget.addRow();
	this.ds_demandBudget.setColumn(aRow, "YEAR"       , year);
	this.ds_demandBudget.setColumn(aRow, "BUDGET_SE"  , budgetSe);
	this.ds_demandBudget.setColumn(aRow, "BSNS_SE"    , bsnsSe);
	this.ds_demandBudget.setColumn(aRow, "BALC_SE"    , balcSe);
	this.ds_demandBudget.setColumn(aRow, "OUTPT_LEVEL", "1");
	this.ds_demandBudget.setColumn(aRow, "DEPT_CODE"  , deptCode);
	this.ds_demandBudget.setColumn(aRow, "DEPT_NM"    , deptNm);
	this.ds_demandBudget.setColumn(aRow, "UPDUSR_ID"  , empNo);
	
	this.ds_demandBudget.setColumn(aRow, "BSNS_CODE"       , bsnsCode);
	this.ds_demandBudget.setColumn(aRow, "BSNS_NM"         , bsnsNm);
	this.ds_demandBudget.setColumn(aRow, "BUDGET_ACNT_CODE", budgetAcntCode);
	this.ds_demandBudget.setColumn(aRow, "MOK_SEMOK"       , budgetAcntNm);
	this.ds_demandBudget.setColumn(aRow, "BUKIP_CODE"      , bukipCode);
	this.ds_demandBudget.setColumn(aRow, "BUKIP_NM"        , bukipNm);
}


/*
 * 함수명  	: btn_Delete_onclick
 * 설명 		: 행삭제
 * params  		: None
 * return Type 	: None
 * 사용법		: this.btn_Delete_onclick();
 */
this.btn_Delete_onclick = function(obj:Button,  e:nexacro.ClickEventInfo)
{
	if(!this.gfn_message("confirm.삭제여부")) {
		return false;	// 아니오
	}
	
	this.ds_demandBudget.deleteRow(this.ds_demandBudget.rowposition);
}


/*
 * 함수명  	: btn_Cancel_onclick
 * 설명 		: 취소
 * params  		: None
 * return Type 	: None
 * 사용법		: this.btn_Cancel_onclick();
 */
this.btn_Cancel_onclick = function(obj:Button,  e:nexacro.ClickEventInfo)
{
	if(Ex.util.isUpdated(this.ds_demandBudget)) {
		if(!this.gfn_message("confirm.변경.취소.여부")) {
			return false;	// 아니오
		}
	}
	this.ds_demandBudget.reset();
}


 /*
 * 함수명  	: fn_print
 * 설명 		: 인쇄
 *                
 * params  		: None
 * return Type 	: None
 * 사용법		: this.fn_print();
 */
this.fn_print = function ()
{
	var year     = this.ds_cond.getColumn(0, "YEAR");
	var bsnsSe   = this.ds_cond.getColumn(0, "BSNS_SE");
	var balcSe   = this.ds_cond.getColumn(0, "BALC_SE");
	var budgetSe = this.ds_cond.getColumn(0, "BUDGET_SE");
	var deptCode = this.ds_cond.getColumn(0, "DEPT_CODE");
	var bsnsCode = this.ds_cond.getColumn(0, "DETAIL_BSNS_CODE");
	
	this.ds_condPrint.clearData();
	var nRow = this.ds_condPrint.addRow();
	this.ds_condPrint.setColumn(nRow, "YEAR"            , year);
	this.ds_condPrint.setColumn(nRow, "BSNS_SE"         , bsnsSe);
	this.ds_condPrint.setColumn(nRow, "BALC_SE"         , balcSe);
	this.ds_condPrint.setColumn(nRow, "BUDGET_SE"       , budgetSe);
	this.ds_condPrint.setColumn(nRow, "DEPT_CODE"       , deptCode);
	this.ds_condPrint.setColumn(nRow, "DETAIL_BSNS_CODE", bsnsCode);
	this.ds_condPrint.setColumn(nRow, "WINDOW_ID"       , "BDG030101");
	
	if(budgetSe == "0" || budgetSe == "8" || budgetSe == "9" || budgetSe == "A" || budgetSe == "B") {
		this.gfn_ReportPopup(this, "BDG/BDG000000.crf", this.ds_condPrint);
	}
	else {
		this.gfn_ReportPopup(this, "BDG/BDG000000_RVSPBGT.crf", this.ds_condPrint);
	}
}



/*
 * 함수명  	: btn_demandOpinion_onclick
 * 설명 		: 조정의견 버튼 클릭 후 이벤트 처리(Popup)
 * params  		: None
 * return Type 	: None
 * 사용법		: this.btn_demandOpinion_onclick(obj,e);
 */
this.btn_demandOpinion_onclick = function(obj:Button,  e:nexacro.ClickEventInfo)
{
	var parm = {
		 arg_0      : this
		,searchStr  : this.ds_cond.saveXML()
	};
	this.gfn_popup("popDemandOpinion", 800, 600, "게시판", parm, "mis_bdg::BDG030101_P02.xfdl", "fn_popupCallBack", true, true);
}



/*
 * 함수명  	: btn_up_onclick
 * 설명 		: UP 버튼 클릭 후 이벤트 처리(선택된 행 위로 이동)
 * params  		: None
 * return Type 	: None
 * 사용법		: this.btn_up_onclick(obj,e);
 */
this.btn_up_onclick = function(obj:Button,  e:nexacro.ClickEventInfo)
{
	var bsnsCode       = this.ds_cond.getColumn(0, "DETAIL_BSNS_CODE");
	//var budgetAcntCode = this.ds_cond.getColumn(0, "BUDGET_ACNT_CODE");
	var deptCode       = this.ds_cond.getColumn(0, "DEPT_CODE");
// 	if(!this.comUtils.isNull(bsnsCode) || this.comUtils.isNull(deptCode)) {
// 		var errMsg = "해당 기능을 사용하기 위해, 상단의 검색조건에서\n\n";
// 		errMsg    += "1. 사업코드 : (공백)\n";
// 		//errMsg    += "2. 예산과목 : (공백)\n";
// 		errMsg    += "2. 담당부서 : 소속부서(입력필수)\n\n";
// 		errMsg    += "의 형태로 조회한 뒤 진행하여 주시기 바랍니다.";
// //		this.gfn_message("info.처리불가", errMsg);
// 		alert(errMsg);
// 		return false;
// 	}
	
	var rowCnt = this.ds_demandBudget.rowcount;
	var nRow   = this.ds_demandBudget.rowposition;
	
	if(nRow > 0 && rowCnt > 0) {
		this.ds_demandBudget.setColumn(nRow      , "CUSTOM_TYPE", "1");		// 행이동 Flag
		this.ds_demandBudget.setColumn((nRow - 1), "CUSTOM_TYPE", "1");		// 행이동 Flag
		this.ds_demandBudget.moveRow(nRow, (nRow - 1));
		this.ds_demandBudget.set_rowposition(nRow - 1);
	}
	else {
		this.gfn_message("info.처리불가", "더이상 이동할 수 없습니다.");
	}
}


/*
 * 함수명  	: btn_down_onclick
 * 설명 		: DOWN 버튼 클릭 후 이벤트 처리(선택된 행 아래로 이동)
 * params  		: None
 * return Type 	: None
 * 사용법		: this.btn_down_onclick(obj,e);
 */
this.btn_down_onclick = function(obj:Button,  e:nexacro.ClickEventInfo)
{
	var bsnsCode       = this.ds_cond.getColumn(0, "DETAIL_BSNS_CODE");
	//var budgetAcntCode = this.ds_cond.getColumn(0, "BUDGET_ACNT_CODE");
	var deptCode       = this.ds_cond.getColumn(0, "DEPT_CODE");
// 	if(!this.comUtils.isNull(bsnsCode) || this.comUtils.isNull(deptCode)) {
// 		var errMsg = "해당 기능을 사용하기 위해, 상단의 검색조건에서\n\n";
// 		errMsg    += "1. 사업코드 : (공백)\n";
// 		//errMsg    += "2. 예산과목 : (공백)\n";
// 		errMsg    += "2. 담당부서 : 소속부서(입력필수)\n\n";
// 		errMsg    += "의 형태로 조회한 뒤 진행하여 주시기 바랍니다.";
// //		this.gfn_message("info.처리불가", errMsg);
// 		alert(errMsg);
// 		return false;
// 	}
	
	var rowCnt = this.ds_demandBudget.rowcount;
	var nRow   = this.ds_demandBudget.rowposition;
	
	if(nRow != -1 && rowCnt > 0 && nRow < (rowCnt - 1)) {
		this.ds_demandBudget.setColumn(nRow      , "CUSTOM_TYPE", "1");		// 행이동 Flag
		this.ds_demandBudget.setColumn((nRow + 1), "CUSTOM_TYPE", "1");		// 행이동 Flag
		this.ds_demandBudget.moveRow(nRow, (nRow + 1));
		this.ds_demandBudget.set_rowposition(nRow + 1);
	}
	else {
		this.gfn_message("info.처리불가", "더이상 이동할 수 없습니다.");
	}
}


/*
 * 함수명  	: div_search_btn_bdgAcntPop_onclick
 * 설명 		: 예산계정팝업
 * params  		: None
 * return Type 	: None
 * 사용법		: this.div_search_btn_bdgAcntPop_onclick(obj,e);
 */
this.div_search_btn_bdgAcntPop_onclick = function(obj:Button,  e:nexacro.ClickEventInfo)
{
	var parm = {
	     arg_0      : this
	    ,acntPopup  : true												// (true : 예산계정코드선택팝업, false : 부기선택팝업)
	};
	this.gfn_popup("bdgAcntPop", 900, 635, "예산선택팝업", parm, "com::bdgAcntPop.xfdl", "fn_popupCallBack", true);
}


/*
 * 함수명  	: btn_printBsnsMnl_onclick
 * 설명 		: 사업설명서 출력
 * params  		: None
 * return Type 	: None
 * 사용법		: this.btn_printBsnsMnl_onclick(obj,e);
 */
this.btn_printBsnsMnl_onclick = function(obj:Button,  e:nexacro.ClickEventInfo)
{
	if(!this.gfn_checkValidation_NoUpdChk(this.ds_condPrint, this.ds_validation)) {
		return;
	}
	
	var year       = this.ds_cond.getColumn(0, "YEAR");
	var bsnsSe     = this.ds_cond.getColumn(0, "BSNS_SE");
	var balcSe     = this.ds_cond.getColumn(0, "BALC_SE");
	var budgetSe   = this.ds_cond.getColumn(0, "BUDGET_SE");
	var budgetSeNm = this.ds_bdg003.getColumn(this.ds_bdg003.findRow("CODE", this.ds_cond.getColumn(0, "BUDGET_SE")), "CODE_NM");
	var deptCode   = this.ds_cond.getColumn(0, "DEPT_CODE");
	var deptNm     = this.ds_cond.getColumn(0, "DEPT_NM");
	var bsnsCode   = this.ds_cond.getColumn(0, "DETAIL_BSNS_CODE");
	
	this.ds_condPrint.clearData();
	var nRow = this.ds_condPrint.addRow();
	this.ds_condPrint.setColumn(nRow, "YEAR"            , year);
	this.ds_condPrint.setColumn(nRow, "BSNS_SE"         , bsnsSe);
	this.ds_condPrint.setColumn(nRow, "BALC_SE"         , balcSe);
	this.ds_condPrint.setColumn(nRow, "BUDGET_SE"       , budgetSe);
	this.ds_condPrint.setColumn(nRow, "BUDGET_SE_NM"    , encodeURIComponent(budgetSeNm));
	this.ds_condPrint.setColumn(nRow, "DEPT_CODE"       , deptCode);
	this.ds_condPrint.setColumn(nRow, "DEPT_NM"         , encodeURIComponent(deptNm));
	this.ds_condPrint.setColumn(nRow, "DETAIL_BSNS_CODE", bsnsCode);
	this.ds_condPrint.setColumn(nRow, "WINDOW_ID"       , "BDG030101");
	
	this.gfn_ReportPopup(this, "BDG/BDG030101_R01.crf", this.ds_condPrint);
}

/*
 * 함수명  	: btn_readjst_onclick
 * 설명 		: 순서 및 합계 재조정
 * params  		: None
 * return Type 	: None
 * 사용법		: this.btn_readjst_onclick(obj,e);
 */
this.btn_readjst_onclick = function(obj:Button, e:nexacro.ClickEventInfo)
{
	// 변경여부 체크
	if(Ex.util.isUpdated(this.ds_demandBudget)) {
		if(!this.gfn_message("confirm.변경.취소.여부")) {
			return false;	// 아니오
		}
	}
	
	var year   = this.ds_cond.getColumn(0, "YEAR");
	var deptNm = this.ds_cond.getColumn(0, "DEPT_NM");
	var confirmMsg = year + "년도 " + deptNm + " 요구예산 정보의 순서 및 합계를 재조정합니다.\n";
	confirmMsg += "계속 하시겠습니까?";
	if(confirm(confirmMsg)) {
		this.fn_transaction("readjst");
	}
}



/**********************************************************************
* Grid 관련 이벤트 처리
***********************************************************************/

/*
 * 함수명  	: fn_calculate
 * 설명 		: 산출공식 수식 계산
 * params  		: None
 * return Type 	: None
 * 사용법		: this.fn_calculate();
 */
this.fn_calculate = function(row, colNm)
{
	// 추후 쿼리로 변경될 수 있음
	var computOfcl  = this.ds_demandBudget.getColumn(row, colNm);
	var regExp      = /\s\×/g;
	var computOfclC = computOfcl.replace(/×/g, '*');
	var bdgAmt      = (colNm == "COMPUT_OFCL" ? "FRST_DEMAND_BUDGET_AM" : "DEMAND_BUDGET_DCSN_AM");
	var balcSe      = this.ds_demandBudget.getColumn(row, "BALC_SE");
	
	if(!this.comUtils.isNullEmpty(computOfclC)) {
		// 산출공식 보관
		var result = "";
		for (var i = 0; i < computOfclC.length; i++)  { 
			var chk = computOfclC.substring(i,i+1);
			if(chk.match(/[\\{|0-9.|\\}]+|[\(|\)|\+|\-|\*|\/]/)) {
				result += chk;
			} else if (chk == "%") {
				result += "/100";
			}
		}
		
		// 당해요구 예산액 설정
		try {
			if(result > 999999999999999) {
				this.gfn_message("info.처리불가", "산출값이 너무 큽니다.\n계산된 값이 15자리 이하여아합니다.\n" + result);
				this.ds_demandBudget.setColumn(row, "FST_DMND_BDG_AMT", "");
			}
			if (!this.comUtils.isNull(result)) {
				if (balcSe == "1") {
					this.ds_demandBudget.setColumn(row, bdgAmt, Math.floor(nexacro.toNumber(eval(result)) / 1000) * 1000);	// 절하
				} else {
					this.ds_demandBudget.setColumn(row, bdgAmt, Math.ceil(nexacro.toNumber(eval(result)) / 1000) * 1000);	// 절상
				}
			} else {
				this.ds_demandBudget.setColumn(row, bdgAmt, "");
			}
		} catch(e) {
			this.gfn_message("info.처리불가", "산출공식을 정상적으로 인식하지 못했습니다.\n입력한 산출공식은 아래와 같습니다.\n" + result);
			this.ds_demandBudget.setColumn(row, "FST_DMND_BDG_AMT", "");
		}
	} else {
		this.ds_demandBudget.setColumn(row, bdgAmt, "");
	}
}


/*
 * 함수명  	: fn_checkPartSmAmDcsn
 * 설명 		: 출력합계금액 유효성 검사(상위레벨에서는 산출공식 안써서 의미가 없음)
 * params  		: None
 * return Type 	: None
 * 사용법		: this.fn_checkPartSmAmDcsn();
 */
this.fn_checkPartSmAmDcsn = function(row, colNm)
{
	var smLvl3 = 0;
	var smLvl2 = 0;
	var rowCnt = this.ds_demandBudget.rowcount;
	
	this.ds_demandBudget.set_enableevent(false);
	
	for(var i = rowCnt; i > 0; i--) {
		var nDemandBudgetAm = nexacro.toNumber(this.ds_demandBudget.getColumn(i, "DEMAND_BUDGET_DCSN_AM"));	// 예산확정액
		// 마지막 행
		if(i == rowCnt) {
			if(this.ds_demandBudget.getColumn(i, "OUTPT_LEVEL") == "3") {
				smLvl3 += nDemandBudgetAm;
			}
			else if(this.ds_demandBudget.getColumn(i, "OUTPT_LEVEL") == "2") {
				smLvl2 += nDemandBudgetAm;
			}
			this.ds_demandBudget.setColumn(i, "TEMP", nDemandBudgetAm);
		}
		// 마지막을 제외한 모든 행
		else {
			var bLvl = this.ds_demandBudget.getColumn((i+1), "OUTPT_LEVEL");	// 이전 행
			var nLvl = this.ds_demandBudget.getColumn(i    , "OUTPT_LEVEL");	// 현재 행
			
			// 3레벨일 경우
			if(nLvl == "3") {
				smLvl3 += nDemandBudgetAm;
				this.ds_demandBudget.setColumn(i, "TEMP", nDemandBudgetAm);
			}
			// 2레벨일 경우
			else if(nLvl == "2") {
				// 3레벨에서 2레벨로 바뀐 경우
				if(bLvl == "3") {
					if(nDemandBudgetAm == smLvl3) {
						this.ds_demandBudget.setColumn(i, "TEMP", smLvl3);
						smLvl3 = 0;
					}
					else {
						this.gfn_message("info.처리불가", (i+1) + " 번째 행의 출력레벨합계가 유효하지 않습니다.\n다시 확인해주십시오.");
						return false;
					}
				}
				// 1, 2 레벨에서 2레벨로 바뀐 경우
				else {
					this.ds_demandBudget.setColumn(i, "TEMP", nDemandBudgetAm);
					smLvl2 += nDemandBudgetAm;
				}
			}
			else if(nLvl == "1") {
				// 3레벨에서 1레벨로 바뀐 경우
				if(bLvl == "3") {
					this.gfn_message("info.처리불가", (i+1) + " 번째 행의 출력레벨이 유효하지 않습니다.\n다시 확인해주십시오.");
					return false;
				}
				// 2레벨에서 1레벨로 바뀐 경우
				else if(bLvl == "2") {
					if(nDemandBudgetAm == smLvl2) {
						this.ds_demandBudget.setColumn(i, "TEMP", smLvl2);
						smLvl2 = 0;
					}
					else {
						this.gfn_message("info.처리불가", (i+1) + " 번째 행의 출력레벨합계가 유효하지 않습니다.\n다시 확인해주십시오.");
						return false;
					}
				}
				// 1레벨에서 1레벨로 바뀐 경우
				else {
					this.ds_demandBudget.setColumn(i, "TEMP", nDemandBudgetAm);
				}
			}
		}
	}
	
	this.ds_demandBudget.set_enableevent(true);
}




this.div_pop_sta_title_onlbuttondown = function(obj:Static, e:nexacro.MouseEventInfo)
{
	this.fv_cX = e.screenX;
	this.fv_cY = e.screenY;
}


this.div_pop_sta_title_onmousemove = function(obj:Static, e:nexacro.MouseEventInfo)
{
	if(e.button == "none") {
		return;
	}
	var nX = e.screenX;
	var nY = e.screenY;
	this.div_pop.set_left(parseInt(this.div_pop.left) - (this.fv_cX - nX));
	this.div_pop.set_top(parseInt(this.div_pop.top) - (this.fv_cY - nY));
	this.fv_cX = e.screenX;
	this.fv_cY = e.screenY; 
}

// 예산불러오기 팝업 닫기
this.div_pop_btn_destroy_onclick = function(obj:Button,  e:nexacro.ClickEventInfo)
{
	this.div_pop.set_visible(false);
}

// 예산불러오기 팝업 종료
this.btn_close_onclick = function(obj:Button,  e:nexacro.ClickEventInfo)
{
	this.div_pop.set_visible(false);
}

/*
 * 함수명  	: div_pop_btn_prvyyBsns_onclick
 * 설명 		: 전년도사업 검색
 * params  		: None
 * return Type 	: None
 * 사용법		: this.div_pop_btn_prvyyBsns_onclick(obj,e);
 */
this.div_pop_btn_prvyyBsns_onclick = function(obj:Button,  e:nexacro.ClickEventInfo)
{
	// 사업코드
	var schYear = this.div_search.spn_YEAR.value;
	var parm = {
	     arg_0      : this
	     , year		: schYear
	};
	this.gfn_popup("prvyyBsns", 500, 465, "전년도사업 선택", parm, "mis_acc::ACC000000_P04.xfdl", "fn_popupCallBack", true);
}

/*
 * 함수명  	: div_pop_btn_bsns_onclick
 * 설명 		: 당해사업 검색
 * params  		: None
 * return Type 	: None
 * 사용법		: this.div_pop_btn_bsns_onclick(obj,e);
 */
this.div_pop_btn_bsns_onclick = function(obj:Button,  e:nexacro.ClickEventInfo)
{
	// 사업코드
	var schYear = this.div_search.spn_YEAR.value;
	var parm = {
	     arg_0      : this
	     , year		: schYear
	};
	this.gfn_popup("bsns", 500, 465, "당해사업 선택", parm, "mis_acc::ACC000000_P04.xfdl", "fn_popupCallBack", true);
}
]]></Script>
  </Form>
</FDL>
