<?xml version="1.0" encoding="utf-8"?>
<FDL version="1.5">
  <TypeDefinition url="..\..\default_typedef.xml"/>
  <Form id="BGD080101" classname="Pattern_03" left="0" top="0" width="1059" height="735" titletext="제안공모 관리" onload="BGD080101_onload">
    <Layouts>
      <Layout>
        <Static id="Static44" taborder="200" cssclass="sta_WF_Labelbg" left="579" top="171" right="28" height="27"/>
        <Static id="Static42" taborder="195" cssclass="sta_WF_Labelbg" left="579" top="340" right="28" height="27"/>
        <Static id="Static33" taborder="176" cssclass="sta_WF_Labelbg" left="1" top="662" right="28" height="27"/>
        <Static id="Static30" taborder="173" cssclass="sta_WF_Labelbg" left="1" top="603" right="28" height="60"/>
        <Static id="Static27" taborder="168" cssclass="sta_WF_Labelbg" left="1" top="485" right="28" height="60"/>
        <Static id="Static25" taborder="164" cssclass="sta_WF_Labelbg" left="1" top="426" right="28" height="60"/>
        <Static id="Static14" taborder="149" cssclass="sta_WF_Labelbg" left="579" top="145" right="28" height="27"/>
        <Static id="Static08" taborder="145" cssclass="sta_WF_Labelbg" left="579" top="119" right="28" height="27"/>
        <Div id="div_search" taborder="10" left="0" top="0" height="33" cssclass="div_WFSA_Box" right="28">
          <Layouts>
            <Layout>
              <Static id="Static08" taborder="11" text="15" visible="false" left="551" top="0" width="15" height="31" style="background:#00ffff66;"/>
              <Edit id="edt_propseSjNm" taborder="3" readonly="false" left="606" top="5" height="21" width="300" onkeyup="div_search_edt_onkeyup" autoselect="true"/>
              <Static id="Static16" taborder="32" text="제목" cssclass="sta_WFSA_Label" left="566" top="5" height="21" visible="true" width="40"/>
              <Static id="Static00" taborder="33" text="15" visible="false" left="0" top="0" width="15" height="31" style="background:#00ffff66;"/>
              <Static id="Static03" taborder="37" text="15" visible="false" left="371" top="0" width="15" height="31" style="background:#00ffff66;"/>
              <Static id="Static04" taborder="38" text="제안종류" cssclass="sta_WFSA_Label" left="386" top="5" width="65" height="21"/>
              <Combo id="cmb_propseKndCode" taborder="2" codecolumn="CODE" datacolumn="CODE_NM" type="filter" left="451" top="5" width="100" height="21" innerdataset="@ds_bdg031"/>
              <Static id="sta_YEAR" taborder="41" text="접수년도" wordwrap="char" cssclass="sta_WFSA_Label" left="15" top="5" width="64" height="21" style="background:transparent;align:left middle;"/>
              <Spin id="spn_YEAR" taborder="0" value="0" left="79" top="5" width="60" height="21" style="buttonsize:15;"/>
              <Static id="Static01" taborder="42" text="15" visible="false" left="139" top="5" width="15" height="21" style="background:#00ffff66;"/>
              <Static id="sta_DEPT_CODE" taborder="43" text="부서" wordwrap="char" cssclass="sta_WFSA_Label" left="154" top="5" width="38" height="21"/>
              <Div id="div_srchDept" taborder="1" url="com::deptCode.xfdl" left="192" top="5" width="179" height="21" async="false" enable="false"/>
            </Layout>
          </Layouts>
        </Div>
        <Static id="Static01" taborder="56" text="15" visible="false" top="0" width="15" height="735" style="background:#1b3cd23c;align:center middle;" right="13"/>
        <Static id="Static13" taborder="57" text="스&#13;&#10;크&#13;&#10;롤&#13;&#10;13" visible="false" top="0" width="13" height="735" style="background:#d07b173c;align:center middle;" right="0"/>
        <Static id="Static04" taborder="59" text="제안공모 목록" cssclass="sta_WF_Title01" left="0%" top="42" right="87.63%" height="21"/>
        <Static id="Static10" taborder="60" text="5" visible="false" left="0" top="62" right="28" style="background:#dc143c3c;align:center middle;" height="5"/>
        <Static id="Static46" taborder="61" text="10" visible="false" left="53.64%" top="67" right="45.42%" height="644" style="background:#1b3cd23c;align:center middle;"/>
        <Static id="Static22" taborder="62" text="제안자 기본정보" cssclass="sta_WF_Title02" top="42" width="159" height="21" left="578"/>
        <Static id="Static05" taborder="89" text="10" visible="false" left="0%" top="33" right="2.64%" height="10" style="background:#dc143c3c;align:center middle;"/>
        <Static id="Static06" taborder="129" text="10" visible="false" left="0%" top="367" right="2.64%" height="10" style="background:#dc143c3c;align:center middle;"/>
        <Static id="Static09" taborder="131" text="5" visible="false" left="0" top="396" right="28" height="5" style="background:#dc143c3c;align:center middle;"/>
        <Grid id="grd_propsePssrpManage" taborder="132" binddataset="ds_propsePssrpManage" useinputpanel="false" cellsizingtype="col" left="0" top="67" style="cursor:hand;" height="197" autofittype="col" width="568" onexpanddown="grd_propsePssrpManage_onexpanddown">
          <Formats>
            <Format id="default">
              <Columns>
                <Column size="86"/>
                <Column size="74"/>
                <Column size="164"/>
                <Column size="65"/>
                <Column size="56"/>
                <Column size="91"/>
              </Columns>
              <Rows>
                <Row size="32" band="head"/>
                <Row size="24"/>
              </Rows>
              <Band id="head">
                <Cell text="연번"/>
                <Cell col="1" text="접수일자"/>
                <Cell col="2" text="제안 제목"/>
                <Cell col="3" text="제안자"/>
                <Cell col="4" text="대표제안&#13;&#10;선정여부"/>
                <Cell col="5" text="실무부서"/>
              </Band>
              <Band id="body">
                <Cell style="align:left;" text="bind:DEPT_PROPSE_SN"/>
                <Cell col="1" displaytype="date" style="align: ;" text="bind:RCEPT_DE" calendardisplay="edit" calendardisplaynulltype="none"/>
                <Cell col="2" style="align:left;" text="bind:PROPSE_SJ_NM"/>
                <Cell col="3" style="align: ;" text="bind:USER_NM"/>
                <Cell col="4" displaytype="checkbox" style="align: ;" text="bind:REPRSNT_PROPSE_SLCTN_AT"/>
                <Cell col="5" style="align: ;" text="bind:PRCAFS_DEPT_NM"/>
              </Band>
            </Format>
          </Formats>
        </Grid>
        <Static id="Static57" taborder="133" cssclass="sta_WF_Labelbg" left="579" top="67" right="28" height="27"/>
        <Edit id="edt_userNm" taborder="134" cssclass="edt_WF_Readonly" left="681" top="70" width="120" height="21" readonly="true"/>
        <Static id="Static85" taborder="135" text="제안자 성명" cssclass="sta_WF_Label" left="578" top="67" width="100" height="27"/>
        <Static id="Static88" taborder="136" text="생년월일" cssclass="sta_WF_Label" left="804" top="67" width="100" height="27"/>
        <Calendar id="cal_brthdy" taborder="137" dateformat="yyyy-MM-dd" left="908" top="70" width="100" height="21" readonly="true" cssclass="cal_WF_Readonly"/>
        <Static id="Static00" taborder="138" cssclass="sta_WF_Labelbg" left="579" top="93" right="28" height="27"/>
        <Static id="Static02" taborder="139" text="소속" cssclass="sta_WF_Label" left="578" top="93" width="100" height="27"/>
        <Edit id="edt_deptNm" taborder="140" readonly="true" cssclass="edt_WF_Readonly" left="681" top="96" width="120" height="21"/>
        <Static id="Static03" taborder="141" text="직급(직위)" cssclass="sta_WF_Label" left="804" top="93" width="100" height="27"/>
        <Edit id="edt_hrClfsNm" taborder="142" readonly="true" cssclass="edt_WF_Readonly" left="907" top="96" width="120" height="21"/>
        <Static id="Static07" taborder="143" text="기여도(%)" cssclass="sta_WF_Label" left="578" top="119" width="100" height="27"/>
        <Edit id="edt_cntrbtRate" taborder="0" readonly="false" left="681" top="122" width="120" height="21" inputtype="number" maxlength="3" displaynulltext="0" inputfilter="dot"/>
        <Static id="Static11" taborder="146" text="이메일주소" cssclass="sta_WF_Label" left="804" top="119" width="100" height="27"/>
        <Edit id="edt_email" taborder="147" readonly="true" cssclass="edt_WF_Readonly" left="907" top="122" width="120" height="21"/>
        <Static id="Static12" taborder="148" text="전화번호" cssclass="sta_WF_Label" left="578" top="145" width="100" height="27"/>
        <Edit id="edt_telno1" taborder="150" readonly="true" cssclass="edt_WF_Readonly" left="681" top="148" width="120" height="21"/>
        <Static id="Static15" taborder="151" text="휴대폰번호" cssclass="sta_WF_Label" left="804" top="145" width="100" height="27"/>
        <Edit id="edt_telno2" taborder="152" readonly="true" cssclass="edt_WF_Readonly" left="907" top="148" width="120" height="21"/>
        <Static id="Static16" taborder="153" text="10" visible="false" left="0%" top="198" right="2.64%" height="10" style="background:#dc143c3c;align:center middle;"/>
        <Static id="Static17" taborder="154" text="공동 제안자 목록" cssclass="sta_WF_Title02" top="207" width="159" height="21" left="578"/>
        <Static id="Static18" taborder="155" text="5" visible="false" left="0" top="227" right="28" height="5" style="background:#dc143c3c;align:center middle;"/>
        <Grid id="grd_copertnPropseManage" taborder="156" binddataset="ds_copertnPropseManage" useinputpanel="false" cellsizingtype="col" autofittype="col" left="578" top="232" right="27" height="99" style="cursor:hand;" onexpanddown="grd_copertnPropseManage_onexpanddown">
          <Formats>
            <Format id="default">
              <Columns>
                <Column size="40"/>
                <Column size="80"/>
                <Column size="81"/>
                <Column size="110"/>
                <Column size="80"/>
                <Column size="75"/>
              </Columns>
              <Rows>
                <Row size="24" band="head"/>
                <Row size="24"/>
                <Row size="24" band="summ"/>
              </Rows>
              <Band id="head">
                <Cell text="순번"/>
                <Cell col="1" cssclass="Cellgrd_WF_HeadEssential" text="성명"/>
                <Cell col="2" text="생년월일"/>
                <Cell col="3" text="소속"/>
                <Cell col="4" text="직급(직위)"/>
                <Cell col="5" text="기여도(%)"/>
              </Band>
              <Band id="body">
                <Cell text="expr:currow+1"/>
                <Cell col="1" edittype="expand" style="align: ;" text="bind:USER_NM" expandshow="show"/>
                <Cell col="2" displaytype="date" edittype="none" style="align: ;" text="bind:BRTHDY" calendardisplay="edit" calendardisplaynulltype="none"/>
                <Cell col="3" style="align:left;" text="bind:DEPT_NM"/>
                <Cell col="4" displaytype="combo" style="align: ;" text="bind:HR_CLSF_SE" combodataset="ds_hrm002" combocodecol="CODE" combodatacol="CODE_NM"/>
                <Cell col="5" displaytype="number" edittype="normal" editfilter="integer" style="align:right;" text="bind:CNTRBT_RATE" editlimit="3" editdisplay="display" editacceptsenter="false" editlimitbymask="decimal"/>
              </Band>
              <Band id="summary">
                <Cell/>
                <Cell col="1"/>
                <Cell col="2"/>
                <Cell col="3"/>
                <Cell col="4" text="기여도합계"/>
                <Cell col="5" displaytype="number" text="expr:dataset.getSum(&quot;CNTRBT_RATE&quot;)"/>
              </Band>
            </Format>
          </Formats>
        </Grid>
        <Static id="Static19" taborder="157" text="제안상세내역" cssclass="sta_WF_Title02" top="376" right="900" height="21" left="0"/>
        <Static id="Static20" taborder="158" cssclass="sta_WF_Labelbg" left="1" top="400" right="28" height="27"/>
        <Static id="Static21" taborder="159" text="제안제목" cssclass="sta_WF_Label" left="0" top="400" width="100" height="27"/>
        <Edit id="edt_propseSjNm" taborder="2" readonly="false" left="103" top="403" width="465" height="21" cssclass="edt_WF_Essential"/>
        <Static id="Static23" taborder="161" text="제안종류" cssclass="sta_WF_Label" left="571" top="400" width="100" height="27"/>
        <Combo id="cmb_propseKndCode" taborder="3" innerdataset="@ds_bdg031_s" codecolumn="CODE" datacolumn="CODE_NM" cssclass="cmb_WF_Essential" left="674" top="403" width="149" height="21"/>
        <Static id="Static24" taborder="163" text="개요" cssclass="sta_WF_Label" left="0" top="426" width="100" height="60"/>
        <TextArea id="ta_propseSumryCn" taborder="4" top="429" height="54" left="103" right="100" wordwrap="char" readonly="true" cssclass="txt_WF_Essential"/>
        <Static id="Static26" taborder="166" text="현황 및 문제점" cssclass="sta_WF_Label" left="0" top="485" width="100" height="60"/>
        <TextArea id="ta_propseStusCn" taborder="5" left="103" top="488" height="54" right="100" wordwrap="char" cssclass="txt_WF_Essential" readonly="true"/>
        <Static id="Static28" taborder="169" cssclass="sta_WF_Labelbg" left="1" top="544" right="28" height="60"/>
        <TextArea id="ta_propseMethodCn" taborder="6" left="103" top="547" height="54" right="100" wordwrap="char" cssclass="txt_WF_Essential" readonly="true"/>
        <Static id="Static29" taborder="171" text="개선방안&#13;&#10;(개선내용)" cssclass="sta_WF_Label" left="0" top="544" width="100" height="60"/>
        <TextArea id="ta_expcEffectCn" taborder="7" left="103" top="606" height="54" right="100" wordwrap="char" cssclass="txt_WF_Essential" readonly="true"/>
        <Static id="Static31" taborder="174" text="기대효과&#13;&#10;(개선성과)" cssclass="sta_WF_Label" left="0" top="603" width="100" height="60"/>
        <Static id="Static32" taborder="175" text="조치사항" cssclass="sta_WF_Label" left="0" top="662" width="100" height="27"/>
        <Static id="Static34" taborder="178" cssclass="sta_WF_Labelbg" left="1" top="688" right="28" height="27"/>
        <Static id="Static35" taborder="179" text="기타내용" cssclass="sta_WF_Label" left="0" top="688" width="100" height="27"/>
        <Edit id="edt_etcCn" taborder="9" readonly="true" left="103" top="691" height="21" right="31" cssclass="edt_WF_Readonly"/>
        <Static id="Static36" taborder="181" text="10" visible="false" left="0%" top="264" right="2.64%" height="10" style="background:#dc143c3c;align:center middle;"/>
        <Static id="Static37" taborder="182" text="5" visible="false" left="0" top="293" right="28" height="5" style="background:#dc143c3c;align:center middle;"/>
        <Static id="Static38" taborder="183" text="붙임자료(첨부파일)" cssclass="sta_WF_Title02" left="0" top="273" width="159" height="21"/>
        <Button id="btn_fileUpload" taborder="184" text="붙임선택" top="274" width="61" height="19" left="385" cssclass="btn_WF_Process" onclick="btn_fileUpload_onclick"/>
        <Button id="btn_fileDownload" taborder="186" text="다운로드" onclick="btn_fileDownload_onclick" cssclass="btn_WF_Process" top="274" width="57" height="19" left="511"/>
        <Button id="btn_fileDelete" taborder="187" text="붙임삭제" cssclass="btn_WF_Process" top="274" width="59" height="19" onclick="btn_fileDelete_onclick" left="449"/>
        <Button id="btn_SubAdd_Row" taborder="188" text="행추가" cssclass="btn_WF_Gridadd" top="208" right="162" width="64" height="19" onclick="btn_SubAdd_Row_onclick"/>
        <Button id="btn_SubDel_Row" taborder="189" text="행삭제" cssclass="btn_WF_Griddel" top="208" right="95" width="64" height="19" onclick="btn_SubDel_Row_onclick"/>
        <Button id="btn_SubCan_Row" taborder="190" text="행취소" cssclass="btn_WF_Gridcnl" top="208" right="28" width="64" height="19" onclick="btn_SubCan_Row_onclick"/>
        <Static id="Static39" taborder="191" text="접수일자" cssclass="sta_WF_Label" left="826" top="400" width="100" height="27"/>
        <Calendar id="cal_rceptDe" taborder="192" dateformat="yyyy-MM-dd" left="928" top="403" width="100" height="21" readonly="true" cssclass="cal_WF_Readonly"/>
        <Static id="Static41" taborder="194" text="제안과 동일내용으로 표창․상금 수여및 특허 등 출원․등록 년도" cssclass="sta_WF_Label" left="578" top="340" width="386" height="27"/>
        <Static id="Static40" taborder="197" text="10" visible="false" left="0%" top="330" right="2.64%" height="10" style="background:#dc143c3c;align:center middle;"/>
        <Edit id="edt_samenssPropseRegistYear" taborder="1" inputfilter="dot" inputtype="number" maxlength="4" left="967" top="343" width="61" height="21"/>
        <Div id="div_cnArea" taborder="14" left="1060" top="120" width="500" height="300" visible="false">
          <Layouts>
            <Layout>
              <GroupBox id="grb_progrsSecd" taborder="0" text="내용 입력" left="10" top="10" accessibilityrole="groupbox" right="10" bottom="10" style="font:bold 9 Arial Narrow;"/>
              <Static id="sta_top00" taborder="2" text="10" visible="false" left="10" right="10" style="background:#dc143c3c 20;" textAlign="center" verticalAlign="middle" bottom="0" height="10"/>
              <Static id="Static00" taborder="7" cssclass="sta_WF_Labelbg" left="18" top="70" right="18" bottom="16"/>
              <Static id="sta_returnCn" taborder="6" text="내용" cssclass="sta_WF_Label" left="18" top="70" width="100" bottom="16"/>
              <TextArea id="txt_cn" taborder="8" left="120" top="73" width="359" bottom="19" maxlength="500" readonly="false" wordwrap="char"/>
              <Button id="btn_ok" taborder="10" text="취소" onclick="btn_Close_onclick" top="34" height="25" width="50" right="20" cssclass="btn_WF_CRUD"/>
              <Button id="btn_Ok" taborder="9" text="확인" onclick="btn_Ok_onclick" top="34" height="25" width="50" right="75" cssclass="btn_WF_CRUD"/>
              <Static id="Static06" taborder="11" text="10" visible="false" left="0" top="0" right="0" height="10" style="background:#dc143c3c 20;" textAlign="center" verticalAlign="middle"/>
              <Static id="Static05" taborder="12" text="10" visible="false" left="0" top="0" bottom="0" width="10" style="background:#dc143c3c 20;" textAlign="center" verticalAlign="middle"/>
              <Static id="Static03" taborder="13" text="10" visible="false" left="10" right="0" bottom="0" height="10" style="background:#dc143c3c 20;" textAlign="center" verticalAlign="middle"/>
              <Static id="Static02" taborder="14" text="10" visible="false" top="0" right="0" bottom="0" width="10" style="background:#dc143c3c 20;" textAlign="center" verticalAlign="middle"/>
            </Layout>
          </Layouts>
        </Div>
        <Grid id="grd_fileList" taborder="198" binddataset="ds_fileList" autoenter="select" useinputpanel="false" cellsizingtype="col" autofittype="col" onheadclick="grd_fileList_onheadclick" left="0" top="298" height="70" width="568">
          <Formats>
            <Format id="default">
              <Columns>
                <Column size="40"/>
                <Column size="60"/>
                <Column size="150"/>
                <Column size="60"/>
                <Column size="60"/>
              </Columns>
              <Rows>
                <Row size="24" band="head"/>
                <Row size="33"/>
              </Rows>
              <Band id="head">
                <Cell displaytype="checkbox"/>
                <Cell col="1" text="파일형식"/>
                <Cell col="2" text="파일명"/>
                <Cell col="3" text="확장자"/>
                <Cell col="4" text="사이즈"/>
              </Band>
              <Band id="body">
                <Cell displaytype="checkbox" edittype="checkbox" text="bind:CHK"/>
                <Cell col="1" displaytype="image" text="bind:FILE_IMAGE"/>
                <Cell col="2" text="bind:ORGINL_FILE_NM"/>
                <Cell col="3" text="bind:FILE_EXTSN"/>
                <Cell col="4" text="bind:FILE_MG"/>
              </Band>
            </Format>
          </Formats>
        </Grid>
        <Static id="Static43" taborder="199" text="대표제안 선정여부" cssclass="sta_WF_Label" left="578" top="171" width="135" height="27"/>
        <CheckBox id="chk_reprsntPropseSlctnAt" taborder="201" top="175" height="21" width="28" left="718" falsevalue="0" truevalue="1"/>
        <Button id="btn_propsePopup" taborder="202" text="제안공모 팝업" top="43" width="100" height="19" style="background:#ff9999ff;border:1 solid #ff4d4dff ;" domainId="nexa.add" onclick="btn_propsePopup_onclick" left="467" visible="true"/>
        <Static id="Static45" taborder="203" text="실무부서가 배정된 공모건은 편집이 불가능 합니다." top="42" height="21" style="color:blue;font:bold 9 굴림;" right="28" width="300"/>
        <Static id="Static47" taborder="204" text="실무부서" cssclass="sta_WF_Label" left="804" top="171" width="100" height="27" visible="true"/>
        <Edit id="edt_prcafsDeptNm" taborder="205" readonly="true" cssclass="edt_WF_Readonly" left="907" top="174" width="120" height="21" visible="true"/>
        <Button id="btn_deptCode" taborder="206" cssclass="btn_WF_Search" left="1005" top="174" width="21" height="21" visible="false" onclick="btn_deptCode_onclick"/>
        <Button id="btn_PROPSE_SUMRY_CN" taborder="207" top="429" height="54" width="65" right="32" text="내용입력" cssclass="btn_WF_Process" onclick="fn_cnAreaShow"/>
        <Button id="btn_PROPSE_STUS_CN" taborder="208" text="내용입력" onclick="fn_cnAreaShow" cssclass="btn_WF_Process" top="488" right="32" width="65" height="54"/>
        <Button id="btn_PROPSE_METHOD_CN" taborder="209" text="내용입력" onclick="fn_cnAreaShow" cssclass="btn_WF_Process" top="547" right="32" width="65" height="54"/>
        <Button id="btn_EXPC_EFFECT_CN" taborder="210" text="내용입력" onclick="fn_cnAreaShow" cssclass="btn_WF_Process" top="606" right="32" width="65" height="54"/>
        <CheckBox id="chk_01" taborder="211" text="관련규정 개정" top="665" height="21" truevalue="1" falsevalue="0" width="100" left="105"/>
        <Static id="Static48" taborder="212" text="15" visible="false" left="199" top="663" width="15" height="31" style="background:#00ffff66;"/>
        <CheckBox id="chk_02" taborder="213" text="인력추가 지원" value="0" truevalue="1" falsevalue="0" left="214" top="665" width="100" height="21"/>
        <Static id="Static49" taborder="214" text="15" visible="false" left="308" top="663" width="15" height="31" style="background:#00ffff66;"/>
        <CheckBox id="chk_04" taborder="215" text="업무프로세스 조정" value="0" truevalue="1" falsevalue="0" left="431" top="665" width="120" height="21"/>
        <Static id="Static50" taborder="216" text="15" visible="false" left="417" top="663" width="15" height="31" style="background:#00ffff66;"/>
        <CheckBox id="chk_03" taborder="217" text="예산확보 지원" value="0" truevalue="1" falsevalue="0" left="323" top="665" width="100" height="21"/>
        <Static id="Static51" taborder="218" text="15" visible="false" left="550" top="663" width="15" height="31" style="background:#00ffff66;"/>
        <CheckBox id="chk_05" taborder="219" text="관련기관 협의" value="0" truevalue="1" falsevalue="0" left="565" top="665" width="100" height="21"/>
        <Static id="Static52" taborder="220" text="15" visible="false" left="659" top="663" width="15" height="31" style="background:#00ffff66;"/>
        <CheckBox id="chk_06" taborder="221" text="기타" value="0" truevalue="1" falsevalue="0" left="674" top="665" width="60" height="21"/>
      </Layout>
    </Layouts>
    <Objects>
      <Dataset id="ds_validation" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="compId" type="STRING" size="256"/>
          <Column id="colId" type="STRING" size="256"/>
          <Column id="PK" type="STRING" size="256"/>
          <Column id="notNull" type="STRING" size="256"/>
          <Column id="type" type="STRING" size="256"/>
          <Column id="nlength" type="STRING" size="256"/>
          <Column id="from" type="STRING" size="256"/>
          <Column id="to" type="STRING" size="256"/>
          <Column id="lengthChkGb" type="STRING" size="256"/>
          <Column id="msgId" type="STRING" size="256"/>
          <Column id="expr" type="STRING" size="256"/>
          <Column id="func" type="STRING" size="256"/>
        </ColumnInfo>
        <Rows>
          <Row>
            <Col id="colId">PROPSE_SJ_NM</Col>
            <Col id="compId">ds_cond</Col>
            <Col id="nlength">200</Col>
            <Col id="lengthChkGb">LE</Col>
            <Col id="msgId">검색조건[제목]</Col>
          </Row>
          <Row>
            <Col id="compId">ds_propsePssrpManage</Col>
            <Col id="colId">PROPSE_SJ_NM</Col>
            <Col id="PK"/>
            <Col id="notNull">Y</Col>
            <Col id="type"/>
            <Col id="nlength"/>
            <Col id="from"/>
            <Col id="to"/>
            <Col id="lengthChkGb"/>
            <Col id="msgId">제안상세[제안제목]</Col>
            <Col id="expr"/>
            <Col id="func"/>
          </Row>
          <Row>
            <Col id="compId">ds_propsePssrpManage</Col>
            <Col id="colId">PROPSE_KND_CODE</Col>
            <Col id="PK"/>
            <Col id="notNull">Y</Col>
            <Col id="type"/>
            <Col id="nlength"/>
            <Col id="from"/>
            <Col id="to"/>
            <Col id="lengthChkGb"/>
            <Col id="msgId">제안상세[제안종류]</Col>
            <Col id="expr"/>
            <Col id="func"/>
          </Row>
          <Row>
            <Col id="compId">ds_propsePssrpManage</Col>
            <Col id="colId">PROPSE_SUMRY_CN</Col>
            <Col id="nlength">4000</Col>
            <Col id="lengthChkGb">LE</Col>
            <Col id="msgId">제안상세[개요]</Col>
            <Col id="notNull">Y</Col>
          </Row>
          <Row>
            <Col id="compId">ds_propsePssrpManage</Col>
            <Col id="colId">PROPSE_STUS_CN</Col>
            <Col id="nlength">4000</Col>
            <Col id="lengthChkGb">LE</Col>
            <Col id="msgId">제안상세[현황 및 문제점]</Col>
            <Col id="notNull">Y</Col>
          </Row>
          <Row>
            <Col id="compId">ds_propsePssrpManage</Col>
            <Col id="colId">PROPSE_METHOD_CN</Col>
            <Col id="nlength">4000</Col>
            <Col id="lengthChkGb">LE</Col>
            <Col id="msgId">제안상세[개선방안]</Col>
            <Col id="notNull">Y</Col>
          </Row>
          <Row>
            <Col id="compId">ds_propsePssrpManage</Col>
            <Col id="colId">EXPC_EFFECT_CN</Col>
            <Col id="nlength">4000</Col>
            <Col id="lengthChkGb">LE</Col>
            <Col id="msgId">제안상세[기대효과]</Col>
            <Col id="notNull">Y</Col>
          </Row>
          <Row>
            <Col id="compId">ds_propsePssrpManage</Col>
            <Col id="colId">ETC_CN</Col>
            <Col id="msgId">제안상세[기타내용]</Col>
            <Col id="lengthChkGb">LE</Col>
          </Row>
          <Row>
            <Col id="compId">ds_propsePssrpManage</Col>
            <Col id="colId">CNTRBT_RATE</Col>
            <Col id="nlength">100</Col>
            <Col id="lengthChkGb">LE</Col>
            <Col id="msgId">제안상세[기여도]</Col>
          </Row>
          <Row>
            <Col id="compId">ds_copertnPropseManage</Col>
            <Col id="colId">USER_NM</Col>
            <Col id="PK">Y</Col>
            <Col id="notNull">Y</Col>
            <Col id="type"/>
            <Col id="nlength"/>
            <Col id="from"/>
            <Col id="to"/>
            <Col id="lengthChkGb"/>
            <Col id="msgId">공동제안자목록 [성명]</Col>
            <Col id="expr"/>
            <Col id="func"/>
          </Row>
        </Rows>
      </Dataset>
      <Dataset id="ds_cond" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="SRCH_YEAR" type="STRING" size="256"/>
          <Column id="PROPSE_KND_CODE" type="STRING" size="256"/>
          <Column id="PROPSE_SJ_NM" type="STRING" size="256"/>
          <Column id="DEPT_CODE" type="STRING" size="256"/>
          <Column id="DEPT_NM" type="STRING" size="256"/>
        </ColumnInfo>
        <Rows/>
      </Dataset>
      <Dataset id="ds_propsePssrpManage" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false" onrowposchanged="ds_propsePssrpManage_onrowposchanged" canrowposchange="ds_propsePssrpManage_canrowposchange" oncolumnchanged="ds_propsePssrpManage_oncolumnchanged" cancolumnchange="ds_propsePssrpManage_cancolumnchange">
        <ColumnInfo>
          <Column id="PROPSE_SN" type="STRING" size="256" description="제안순번"/>
          <Column id="DEPT_PROPSE_SN" type="STRING" size="256" description="제안연번"/>
          <Column id="RCEPT_DE" type="STRING" size="256" description="접수일자"/>
          <Column id="USER_ID" type="STRING" size="256" description="사용자ID"/>
          <Column id="EMPNO" type="STRING" size="256" description="사번"/>
          <Column id="USER_NM" type="STRING" size="256" description="사용자명"/>
          <Column id="BRTHDY" type="STRING" size="256" description="생년월일"/>
          <Column id="HR_CLSF_SE" type="STRING" size="256" description="직급구분"/>
          <Column id="HR_CLSF_NM" type="STRING" size="256" description="직급명"/>
          <Column id="EMAIL" type="STRING" size="256" description="이메일"/>
          <Column id="TELNO_1" type="STRING" size="256" description="집전화번호"/>
          <Column id="TELNO_2" type="STRING" size="256" description="휴대폰번호"/>
          <Column id="DEPT_CODE" type="STRING" size="256" description="부서코드"/>
          <Column id="DEPT_NM" type="STRING" size="256" description="부서명"/>
          <Column id="CNTRBT_RATE" type="BIGDECIMAL" size="256" description="기여도비율"/>
          <Column id="SAMENSS_PROPSE_REGIST_YEAR" type="STRING" size="256" description="동일제안등록년도"/>
          <Column id="FILE_SN" type="STRING" size="256" description="파일일련번호"/>
          <Column id="PROPSE_SJ_NM" type="STRING" size="256" description="제안제목명"/>
          <Column id="PROPSE_KND_CODE" type="STRING" size="256" description="제안종류코드"/>
          <Column id="PROPSE_SUMRY_CN" type="STRING" size="256" description="제안개요내용"/>
          <Column id="PROPSE_STUS_CN" type="STRING" size="256" description="제안현황내용"/>
          <Column id="PROPSE_METHOD_CN" type="STRING" size="256" description="제안방안내용"/>
          <Column id="EXPC_EFFECT_CN" type="STRING" size="256" description="기대효과내용"/>
          <Column id="RELATE_REGLTN_REFORM_AT" type="STRING" size="256" description="관련규정개정여부"/>
          <Column id="HNF_ADIT_SPORT_AT" type="STRING" size="256" description="인력추가지원여부"/>
          <Column id="BUDGET_ENSURE_SPORT_AT" type="STRING" size="256" description="예산확보지원여부"/>
          <Column id="JOB_PROCS_MDAT_AT" type="STRING" size="256" description="업무프로세스조정여부"/>
          <Column id="RELATE_INSTT_DSCSS_AT" type="STRING" size="256" description="관련기관협의여부"/>
          <Column id="ETC_AT" type="STRING" size="256" description="기타여부"/>
          <Column id="ETC_CN" type="STRING" size="256" description="기타내용"/>
          <Column id="REPRSNT_PROPSE_SLCTN_AT" type="STRING" size="256" description="대표제안선여부"/>
          <Column id="PRCAFS_DEPT_CODE" type="STRING" size="256" description="실무부서코드"/>
          <Column id="PRCAFS_DEPT_NM" type="STRING" size="256" description="실무부서명"/>
          <Column id="REGISTER_ID" type="STRING" size="256" description="등록자ID"/>
          <Column id="REGIST_DT" type="STRING" size="256" description="등록일시"/>
          <Column id="LAST_ROW_AT" type="STRING" size="256" description="공동제안자 신규작업 체크용"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_copertnPropseManage" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false" oncolumnchanged="ds_copertnPropseManage_oncolumnchanged">
        <ColumnInfo>
          <Column id="PROPSE_SN" type="STRING" size="256" description="제안순번"/>
          <Column id="COPERTN_PROPSE_SN" type="STRING" size="256" description="공동제안순번"/>
          <Column id="USER_ID" type="STRING" size="256" description="공동제안사용자ID"/>
          <Column id="EMPNO" type="STRING" size="256" description="사번"/>
          <Column id="CNTRBT_RATE" type="BIGDECIMAL" size="256" description="기여도비율"/>
          <Column id="USER_NM" type="STRING" size="256" description="사용자명"/>
          <Column id="DEPT_NM" type="STRING" size="256" description="부서명"/>
          <Column id="BRTHDY" type="STRING" size="256" description="생년월일"/>
          <Column id="HR_CLSF_SE" type="STRING" size="256" description="직급"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_bdg031">
        <ColumnInfo>
          <Column id="CODE" type="STRING" size="256"/>
          <Column id="CODE_NM" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_bdg031_s">
        <ColumnInfo>
          <Column id="BBS_TY" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_bdg032">
        <ColumnInfo>
          <Column id="BBS_TY" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_fileList" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="CHK" type="STRING" size="256"/>
          <Column id="FILE_SN" type="BIGDECIMAL" size="20"/>
          <Column id="FILE_ORDR" type="INT" size="3"/>
          <Column id="FILE_STRE_COURS" type="STRING" size="2000"/>
          <Column id="STRE_FILE_NM" type="STRING" size="255"/>
          <Column id="ORGINL_FILE_NM" type="STRING" size="255"/>
          <Column id="FILE_EXTSN" type="STRING" size="20"/>
          <Column id="FILE_CN" type="STRING" size="4000"/>
          <Column id="FILE_MG" type="INT" size="8"/>
          <Column id="USE_AT" type="STRING" size="1"/>
          <Column id="FILE_ID" type="STRING" size="256"/>
          <Column id="SN" type="INT" size="5"/>
          <Column id="SYS_SE_CODE" type="STRING" size="6"/>
          <Column id="JOB_SE" type="STRING" size="3"/>
          <Column id="FILE_TY" type="STRING" size="256"/>
          <Column id="FILE_IMAGE" type="STRING" size="256"/>
          <Column id="PROGRS" type="INT" size="5"/>
          <Column id="TRNSMIS_FILE_SIZE" type="INT" size="256"/>
          <Column id="DELETE_IMAGE" type="STRING" size="256"/>
          <Column id="STTUS" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_fileSn" firefirstcount="0" firenextcount="0" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false" useclientlayout="true">
        <ColumnInfo>
          <Column id="FILE_SN" type="BIGDECIMAL" size="20"/>
          <Column id="SYS_SE_CODE" type="STRING" size="6"/>
          <Column id="JOB_SE" type="STRING" size="3"/>
          <Column id="FILE_SN2" type="BIGDECIMAL" size="20"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_condSub" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="PROPSE_SN" type="STRING" size="256" description="제안순번"/>
        </ColumnInfo>
        <Rows/>
      </Dataset>
      <Dataset id="ds_hrm002">
        <ColumnInfo>
          <Column id="BBS_TY" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
    </Objects>
    <Bind>
      <BindItem id="item2" compid="div_search.cmb_propseKndCode" propid="value" datasetid="ds_cond" columnid="PROPSE_KND_CODE"/>
      <BindItem id="item3" compid="div_search.edt_propseSjNm" propid="value" datasetid="ds_cond" columnid="PROPSE_SJ_NM"/>
      <BindItem id="item36" compid="div_search.spn_YEAR" propid="value" datasetid="ds_cond" columnid="SRCH_YEAR"/>
      <BindItem id="item0" compid="edt_userNm" propid="value" datasetid="ds_propsePssrpManage" columnid="USER_NM"/>
      <BindItem id="item1" compid="cal_brthdy" propid="value" datasetid="ds_propsePssrpManage" columnid="BRTHDY"/>
      <BindItem id="item4" compid="edt_deptNm" propid="value" datasetid="ds_propsePssrpManage" columnid="DEPT_NM"/>
      <BindItem id="item5" compid="edt_ofcpsNm" propid="value" datasetid="ds_propsePssrpManage" columnid="OFCPS_NM"/>
      <BindItem id="item6" compid="edt_cntrbtRate" propid="value" datasetid="ds_propsePssrpManage" columnid="CNTRBT_RATE"/>
      <BindItem id="item7" compid="edt_email" propid="value" datasetid="ds_propsePssrpManage" columnid="EMAIL"/>
      <BindItem id="item8" compid="edt_telno1" propid="value" datasetid="ds_propsePssrpManage" columnid="TELNO_1"/>
      <BindItem id="item9" compid="edt_telno2" propid="value" datasetid="ds_propsePssrpManage" columnid="TELNO_2"/>
      <BindItem id="item10" compid="edt_propseSjNm" propid="value" datasetid="ds_propsePssrpManage" columnid="PROPSE_SJ_NM"/>
      <BindItem id="item11" compid="cmb_propseKndCode" propid="value" datasetid="ds_propsePssrpManage" columnid="PROPSE_KND_CODE"/>
      <BindItem id="item12" compid="ta_propseSumryCn" propid="value" datasetid="ds_propsePssrpManage" columnid="PROPSE_SUMRY_CN"/>
      <BindItem id="item13" compid="ta_propseStusCn" propid="value" datasetid="ds_propsePssrpManage" columnid="PROPSE_STUS_CN"/>
      <BindItem id="item14" compid="ta_propseMethodCn" propid="value" datasetid="ds_propsePssrpManage" columnid="PROPSE_METHOD_CN"/>
      <BindItem id="item15" compid="ta_expcEffectCn" propid="value" datasetid="ds_propsePssrpManage" columnid="EXPC_EFFECT_CN"/>
      <BindItem id="item17" compid="edt_etcCn" propid="value" datasetid="ds_propsePssrpManage" columnid="ETC_CN"/>
      <BindItem id="item18" compid="cal_rceptDe" propid="value" datasetid="ds_propsePssrpManage" columnid="RCEPT_DE"/>
      <BindItem id="item19" compid="edt_hrClfsNm" propid="value" datasetid="ds_propsePssrpManage" columnid="HR_CLSF_NM"/>
      <BindItem id="item21" compid="edt_samenssPropseRegistYear" propid="value" datasetid="ds_propsePssrpManage" columnid="SAMENSS_PROPSE_REGIST_YEAR"/>
      <BindItem id="item20" compid="chk_reprsntPropseSlctnAt" propid="value" datasetid="ds_propsePssrpManage" columnid="REPRSNT_PROPSE_SLCTN_AT"/>
      <BindItem id="item22" compid="edt_prcafsDeptNm" propid="value" datasetid="ds_propsePssrpManage" columnid="PRCAFS_DEPT_NM"/>
      <BindItem id="item16" compid="chk_01" propid="value" datasetid="ds_propsePssrpManage" columnid="RELATE_REGLTN_REFORM_AT"/>
      <BindItem id="item23" compid="chk_02" propid="value" datasetid="ds_propsePssrpManage" columnid="HNF_ADIT_SPORT_AT"/>
      <BindItem id="item24" compid="chk_03" propid="value" datasetid="ds_propsePssrpManage" columnid="BUDGET_ENSURE_SPORT_AT"/>
      <BindItem id="item25" compid="chk_04" propid="value" datasetid="ds_propsePssrpManage" columnid="JOB_PROCS_MDAT_AT"/>
      <BindItem id="item26" compid="chk_05" propid="value" datasetid="ds_propsePssrpManage" columnid="RELATE_INSTT_DSCSS_AT"/>
      <BindItem id="item27" compid="chk_06" propid="value" datasetid="ds_propsePssrpManage" columnid="ETC_AT"/>
    </Bind>
    <Script type="xscript5.0"><![CDATA[/***********************************************************************
 * 화면ID   : BDG080101
 * 화면명   : 제안공모 관리
 * 화면설명 : 제안공모 정보를 관리한다.
 * 작성일   : 2020. 08. 25.
 * 작성자   : 권재만
 * 수정이력 :
 ***********************************************************************
 *     수정일     수정자   내용
 ***********************************************************************
 ***********************************************************************
 */
 
/***********************************************************************
 * Script Include
 ***********************************************************************/
include "lib::comInclude.xjs";
include "mis_lib::misUtil.xjs";
include "lib::comUpDownUtils.xjs";
include "lib::comInnerSanct.xjs";
include "lib::comSms.xjs";
/***********************************************************************
 * 화면 변수 선언부
 ***********************************************************************/
this.File_UpDownManager = null;
this.savePk = ""; //저장직전 PK 값 보관 
this.lastRow = -1; //마지막 공동제안자 목록 작업체크Row
this.isAuthBdg = false; //예산담당자 권한
this.cnColumn = null; //내용입력 관련 컬럼명 저장용
this.cnColumnValue = null; //내용입력 관련 컬럼내용 저장용
/***********************************************************************
* onInit / onLoad 영역
***********************************************************************/
this.BGD080101_oninit = function(obj:Form, e:nexacro.InitEventInfo)
{
}
this.BGD080101_onload = function(obj:Form, e:nexacro.LoadEventInfo)
{
	this.fn_init_form();
	this.fn_init_dataset();
	
	// 오브젝트 등에 대한 처리
	this.div_search.div_srchDept.fn_setBind("ds_cond","DEPT_CODE","DEPT_NM");
  
    // 초기 검색조건 세팅
	this.ds_cond.clearData();
	this.ds_cond.addRow();
	
	if(this.gfn_authGrpId("BDG_USER") != -1
	// || this.gfn_authGrpId("BDG_ADMIM") != -1  || this.gfn_authGrpId("BDG_ASIGN") != -1  || this.gfn_authGrpId("BDG_TIMDER") != -1
	   ) { //예산담당자
		this.isAuthBdg = true;
		
		this.div_search.div_srchDept.set_enable(true);
		this.ds_cond.setColumn(0, "DEPT_CODE", "000000");			// 부서코드
		this.ds_cond.setColumn(0, "DEPT_NM"  , "화성도시공사");	// 부서명
	}
	this.fn_authInitCtrl(); //권한에 따른 화면 컨트롤
	
	// 공통코드
	var comboParams = [
	    ["ds_bdg031", "BDG031", "Y", "A", "B"]		// 제안종류(전체)
	   ,["ds_bdg031_s", "BDG031", "Y", "S", "B"]	// 제안종류(선택)
	   ,["ds_hrm002", "HRM002", "Y", "D", "B"]		// 직급구분
	   
	];
	
	var callback = function (svcId, errorCode, errorMsg) {
		var year     = this.comUtils.getClientDate("YYYY");	// 당해년도
		var deptCode = this.gfn_getDeptId(); //부서코드
		
		this.ds_cond.setColumn(0, "SRCH_YEAR", year);
		if(!this.isAuthBdg){ //예산담당자는 모든부서 정보조회
			this.ds_cond.setColumn(0, "DEPT_CODE", deptCode);
		}
		// 초기 조회
		this.fn_search();
	}
	this.gfn_comboLoad (comboParams, callback);
	
	// 파일 매니저 설정
	var fileConfig = {
		useMultiUpload : false,
		onChange: this.fn_onFileSelected,	// 파일 선택 이벤트 핸들러
		onSuccess : this.fn_onFileSuccess	// 전송 성공 이벤트 핸들러
	};
	this.File_UpDownManager = new this.fileUpDownManager(this, "MIS", "BDG");
	this.File_UpDownManager.init(fileConfig);
	// 파일 업로드 초기화
	this.File_UpDownManager.cancelAllFile();
}
/***********************************************************************
* Form/Dataset 오브젝트 초기화
***********************************************************************/
/*
* 함수명      : initForm
* 설명         : Form을 초기화한다.
* params          : None
* return Type     : None
* 사용법        : this.initForm();
*/
this.fn_init_form = function()
{
    this.gfn_initForm(this);
    this.fn_misFormInit(this);
}

/*
 * 함수명      : initDataset
 * 설명         : Dataset을 초기화한다
 * params          : None
 * return Type     : None
 * 사용법        : this.initDataset();
 */
this.fn_init_dataset = function()
{
    this.gfn_initCondDs(this, this.div_search);   
}



/**********************************************************************
* Transaction 영역 시작
***********************************************************************
*
* 1. Transaction 관련 이벤트 핸들러
* 2. call Transaction 영역
* 3. callback 영역(Transaction, Popup)
*
*************************************************/



/**********************************************************************
* Transaction 관련 이벤트 핸들러
***********************************************************************/

/*
 * 함수명        : fn_search
 * 설명           :  제안공모 목록 조회 이벤트 처리
 * params        : None
 * return Type    : None
 * 사용법        : this.fn_search();
 */
this.fn_search = function()
{
	this.ds_propsePssrpManage.clearData();
	this.ds_copertnPropseManage.clearData();
	this.fn_fileClear();
	this.div_cnArea.set_visible(false);//내용입력팝업
	
    if(this.comUtils.isDatasetUpdated(this.ds_propsePssrpManage) || this.comUtils.isDatasetUpdated(this.ds_copertnPropseManage)) {
        if(!this.gfn_message("confirm.변경.취소.여부")) {
            return false;    // 아니오
        }
    }
    //validation 체크
    if(!this.gfn_checkValidation_NoUpdChk(this.ds_cond, this.ds_validation)) {
        return;
    }
    this.fn_transaction("selectPropsePssrpManage");
}

/*
 * 함수명        : fn_searchSub
 * 설명            : 공동제안자 목록 조회 이벤트 처리
 * params        : None
 * return Type    : None
 * 사용법        : this.fn_searchSub();
 */
this.fn_searchSub = function()
{
	this.ds_condSub.clearData();
	this.ds_copertnPropseManage.clearData();
	
    this.ds_condSub.addRow();
    
    var mRow = this.ds_propsePssrpManage.rowposition;
   
    var propseSn = this.ds_propsePssrpManage.getColumn(mRow, "PROPSE_SN");
    this.ds_condSub.setColumn(0, "PROPSE_SN", propseSn);
    
    this.fn_transaction("selectCopertnPropseManage");
}

/*
 * 함수명        : fn_getFileList
 * 설명            : 첨부파일 조회 이벤트 처리
 * params        : None
 * return Type    : None
 * 사용법        : this.fn_getFileList();
 */
this.fn_getFileList = function()
{ 
	this.fn_fileClear();
	this.grd_fileList.setCellProperty("head", 0, "text", "0");
	if (this.ds_propsePssrpManage.rowcount > 0) {
		var mRow = this.ds_propsePssrpManage.rowposition;
		var nCurFileSn = this.ds_propsePssrpManage.getColumn(mRow, "FILE_SN");
		if (!this.comUtils.isNullEmpty(nCurFileSn)) {
			if (this.ds_fileSn.rowcount == 0) this.ds_fileSn.addRow();
			this.ds_fileSn.setColumn(0, "FILE_SN", nCurFileSn);
			this.fn_transaction("selectAtchmnFileList");
		}
	}
}

/*
 * 함수명        : fn_save
 * 설명            : 저장 이벤트 처리
 * params        : None
 * return Type    : None
 * 사용법        : this.fn_save();
 */
this.fn_save = function()
{
	// 데이터셋 미변경 체크
    if (!this.comUtils.isDatasetUpdated(this.ds_propsePssrpManage) && !this.comUtils.isDatasetUpdated(this.ds_copertnPropseManage)) {
        this.gfn_message("comm.데이터.변경.없음")
        return false;
    }

    // validation 체크(mst)
    if(!this.gfn_checkValidation_NoUpdChk(this.ds_propsePssrpManage, this.ds_validation)) {
        return;
    }
    
    // validation 체크(det)
    if(!this.gfn_checkValidation_NoUpdChk(this.ds_copertnPropseManage, this.ds_validation)) {
        return;
    }
    
    
    
    for(var iRow = 0; iRow < this.ds_propsePssrpManage.getRowCount(); iRow++){
		var etcAt = this.ds_propsePssrpManage.getColumn(iRow, "ETC_AT"); //기타여부
		var etcCn = this.ds_propsePssrpManage.getColumn(iRow, "ETC_CN"); //기타내용
		
		if(etcAt == "1" && this.comUtils.isNull(etcCn)) { //기타
			this.gfn_message("info.처리불가", "[" + (iRow + 1) +"행] 제안상세[기타내용] 항목을\n 입력하십시오.");
			return false;
		}
		
		/*var fileSn = this.ds_propsePssrpManage.getColumn(iRow, "FILE_SN"); //파일순번
		if(this.comUtils.isNull(fileSn)){
			this.gfn_message("info.처리불가", "[" + (iRow + 1) +"행] 첨부파일은 필수 항목 입니다.");
			return false;
		}*/
    }
    
    if(this.gfn_message("comm.행위여부", "「공사제안제도 운영규정」제9조제2항에 따라 제안서를 제출합니다.\n저장")) {
        var mRow = this.ds_propsePssrpManage.rowposition;
        this.savePk = this.ds_propsePssrpManage.getColumn(mRow, "PROPSE_SN");
        this.ds_propsePssrpManage.setColumn(this.lastRow, "LAST_ROW_AT" , "Y");
        this.fn_transaction("savePropsePssrpManage"); 
    }
}
/**********************************************************************
* call Transaction 영역
***********************************************************************/

/*
 * 함수명      : fn_transaction
 * 설명         : Transaction 요청 처리 함수
 * params          : strSvcId : 서비스요청 ID
 * return Type     : None
 * 사용법        : this.fn_transaction("SELECT");
 */
this.fn_transaction = function(strSvcId)
{
    switch (strSvcId) {
        // 제안공모 목록 조회
        case "selectPropsePssrpManage":
            var sController       = "hsco/mis/bdg/BDG080101/selectPropsePssrpManage.do";
            var sInDatasets       = "input1=ds_cond";
            var sOutDatasets      = "ds_propsePssrpManage=output1";
            break;
        // 공동제안자 목록 조회
        case "selectCopertnPropseManage":
            var sController       = "hsco/mis/bdg/BDG080101/selectCopertnPropseManage.do";
            var sInDatasets       = "input1=ds_condSub";
            var sOutDatasets      = "ds_copertnPropseManage=output1";
            break;
        // 제안공모, 공동제안자 저장
        case "savePropsePssrpManage":
            var sController       = "hsco/mis/bdg/BDG080101/savePropsePssrpManage.do";
            var sInDatasets       = "input1=ds_propsePssrpManage:U input2=ds_copertnPropseManage:U";
            var sOutDatasets      = "";
            break;
        // 첨부파일 관련 Transaction---------------------------------------------------------------
        // 다건 첨부파일 목록 조회  
        case "selectAtchmnFileList" :	
			var sController = "hsco/cmm/file/selectAtchmnFileList.do";
			var sInDatasets  = "input1=ds_fileSn";
			var sOutDatasets = "ds_fileList=output1";
			break;
		// 다건 선택 파일 삭제
		case "deleteFiles" :  
		    var sController   	= "hsco/cmm/file/deleteFile.do";	
			var sInDatasets   	= "input1=ds_fileList:U";
			var sOutDatasets  	= "ds_fileList=output1";
		    break;
    }

    Ex.core.tran(this, strSvcId, sController, sInDatasets, sOutDatasets); 
}

/**********************************************************************
* Transaction Callback 영역
***********************************************************************/

 /*
 * 함수명      : fn_callBack
 * 설명         : Transaction Callback 처리
 * params          : strSvcId    : 서비스요청 ID
 *                nErrorCode  : 오류 메시지 코드 ([예] 0 : Success, 그밖의 경우, error)
 *                strErrorMsg : 오류 메시지([예]  success.insert|정상적으로 등록되었습니다.)
 * return Type     : None
 * 사용법        :
 */
this.fn_callBack = function (strSvcId, nErrorCode, strErrorMsg)
{
    if(nErrorCode != '0') {
        this.gfn_callback_message(strSvcId, nErrorCode, strErrorMsg);
    }

    if (nErrorCode == '0'){
    switch (strSvcId) {
        // 제안공모 목록 조회
        case "selectPropsePssrpManage":
			if(this.savePk != "") {
				var fRow = this.ds_propsePssrpManage.findRow("PROPSE_SN", this.savePk);
				this.ds_propsePssrpManage.set_rowposition(fRow);
				this.savePk = "";
			}
            break;
        // 공동제안자 목록 조회
        case "selectCopertnPropseManage":
            break;
        // 제안공모 저장
        case "savePropsePssrpManage":
			this.gfn_message("success.처리.성공"); 
			this.fn_search();
            break;
        // 다건 첨부파일 목록 조회
        case "selectAtchmnFileList":
            break;
        // 다건 선택 파일 삭제
        case "deleteFiles":
            break;
        }
    }
}

/**********************************************************************
* Transaction 영역 끝
***********************************************************************/



/**********************************************************************
* non-Transaction 관련 컴포넌트 이벤트 처리 함수
***********************************************************************
*
* 1. Dataset 관련 이벤트 처리
* 2. Button 관련 이벤트 처리
* 3. Grid 관련 이벤트 처리
* 4. 공통함수 처리
* 5. Object 관련 이벤트 처리
*
***********************************************************************/


/**********************************************************************
* Dataset 관련 이벤트 처리
***********************************************************************/

//제안공모 행변경전 이벤트
this.ds_propsePssrpManage_canrowposchange = function(obj:Dataset, e:nexacro.DSRowPosChangeEventInfo)
{
	if(this.comUtils.isDatasetUpdated(this.ds_copertnPropseManage)) {
		if(!this.gfn_message("confirm.변경.취소.여부")) {
			return false;	// 아니오
		}
	}
}

//제안공모 행변경후 이벤트
this.ds_propsePssrpManage_onrowposchanged = function(obj:Dataset, e:nexacro.DSRowPosChangeEventInfo)
{
	this.fn_searchSub();   //공동제안자 목록 조회
	this.fn_getFileList(); //첨부파일 조회
	this.fn_objectCtrl(e.newrow);
}

//제안공모 컬럼변경후 이벤트
this.ds_propsePssrpManage_oncolumnchanged = function(obj:Dataset, e:nexacro.DSColChangeEventInfo)
{
	if(e.columnid == "CNTRBT_RATE"){//기여도
		var result = this.fn_cntRbtRateChk(e.row);
		if(result == false){
			obj.setColumn(e.row, "CNTRBT_RATE", e.oldvalue);
		}
	}
	
	if(e.columnid == "PROPSE_KND_CODE" || e.columnid == "ETC_AT"){ //제안종류, 기타여부
		this.fn_objectCtrl(e.row);
	}
}

//공동제안자 컬럼변경후 이벤트
this.ds_copertnPropseManage_oncolumnchanged = function(obj:Dataset, e:nexacro.DSColChangeEventInfo)
{
	if(e.columnid == "CNTRBT_RATE"){//기여도
		var mRow = this.ds_propsePssrpManage.rowposition;
		var result = this.fn_cntRbtRateChk(mRow);
		if(result == false){
			obj.setColumn(e.row, "CNTRBT_RATE", e.oldvalue);
		}
	}
	
}

/**********************************************************************
* Button 관련 이벤트 처리
***********************************************************************/
// [신규]버튼 클릭시 이벤트
this.fn_insert = function()
{
	var mRow = this.ds_propsePssrpManage.addRow();
	var userId = this.gfn_getUserId();
	var empno = this.gfn_getEmpNo();
	var detpCode = this.gfn_getDeptId();
	var userNm = this.gfn_getUserName();
	var nowDate = this.comUtils.getClientDate("YYYYMMDD");
	var nowYear    = this.comUtils.getClientDate("YYYY");	
	
	this.ds_propsePssrpManage.setColumn(mRow, "DEPT_PROPSE_SN"	, "신규작성");	//연번
	this.ds_propsePssrpManage.setColumn(mRow, "USER_ID"	, userId);				//접수자ID
	this.ds_propsePssrpManage.setColumn(mRow, "EMPNO"	, empno);				//사번
	this.ds_propsePssrpManage.setColumn(mRow, "DEPT_CODE"	, detpCode);		//부서코드
	this.ds_propsePssrpManage.setColumn(mRow, "USER_NM"	, userNm);				//접수자명
	this.ds_propsePssrpManage.setColumn(mRow, "RCEPT_DE", nowDate);				//접수일자
	this.ds_propsePssrpManage.setColumn(mRow, "DEPT_NM", "신규작성");			//부서(소속)명
	this.ds_propsePssrpManage.setColumn(mRow, "HR_CLSF_NM", "신규작성");		//직급(직위)명
	this.ds_propsePssrpManage.setColumn(mRow, "EMAIL", "신규작성");			//이메일
	this.ds_propsePssrpManage.setColumn(mRow, "TELNO_1", "신규작성");			//전화번호
	this.ds_propsePssrpManage.setColumn(mRow, "TELNO_2", "신규작성");			//휴대폰번호
	this.ds_propsePssrpManage.setColumn(mRow, "CNTRBT_RATE", 0);				//기여도
	//this.ds_propsePssrpManage.setColumn(mRow, "SAMENSS_PROPSE_REGIST_YEAR", nowYear-1);	//동일제안등록년도
	
	this.ds_propsePssrpManage.setColumn(mRow, "PROPSE_KND_CODE", "");		//제안종류(선택)
	
}

// [삭제]버튼 클릭시 이벤트
this.fn_delete = function()
{	
	var mRow = this.ds_propsePssrpManage.rowposition;
	var prcafsDeptCode = this.ds_propsePssrpManage.getColumn(mRow, "PRCAFS_DEPT_CODE"); //실무부서코드
	var userId = this.ds_propsePssrpManage.getColumn(mRow, "USER_ID"); //작성자ID
	
	if(!this.comUtils.isNull(prcafsDeptCode)){ //실무부서 배정이후 
		this.gfn_message("info.처리불가", "실무부서가 배정된 공모건은\n삭제할 수 없습니다.");
		return false;
	}
	if(userId != this.gfn_getUserId()){ // 타인작성글
		this.gfn_message("info.처리불가", "본인이 작성한 공모건만\n삭제할 수 있습니다.");
		return false;
	}
	if(this.gfn_message("confirm.삭제여부")){
		this.ds_propsePssrpManage.deleteRow(mRow);
		this.fn_fileClear();
	}
}

//[취소]버튼 클릭시 이벤트
this.fn_cancel = function()
{
	if(!this.comUtils.isDatasetUpdated(this.ds_propsePssrpManage) && !this.comUtils.isDatasetUpdated(this.ds_copertnPropseManage))
	{
		this.gfn_message("comm.내역.변경.없음");
	}else{
		if(this.gfn_message("confirm.취소여부")){
			this.ds_propsePssrpManage.reset();		//DATASET ROLLBACK
			this.ds_propsePssrpManage.applyChange();	//DATASET COMMIT
			this.fn_fileClear();
			return;
		}
	}
}


//[행추가] 버튼 클릭시
this.btn_SubAdd_Row_onclick = function(obj:Button,  e:nexacro.ClickEventInfo)
{
	if(this.ds_propsePssrpManage.getRowCount() == 0){
		this.gfn_message("info.처리불가", "선택된 공모 정보가 없습니다.");
		return false;	
	}
	
	if(this.ds_propsePssrpManage.getRowCount() == 0){
		this.gfn_message("info.처리불가", "선택된 공모 정보가 없습니다.");
		return false;	
	}
	
	var mRow = this.ds_propsePssrpManage.rowposition;
	this.lastRow = mRow; //마지막 공동제안자 목록 행추가 부모 Row 체크(신규 순번관련)
	var propseSn = this.ds_propsePssrpManage.getColumn(mRow, "PROPSE_SN");
	
	var dRow = this.ds_copertnPropseManage.addRow();
	this.ds_copertnPropseManage.setColumn(dRow, "PROPSE_SN", propseSn);	//제안순
	this.ds_copertnPropseManage.setColumn(dRow, "CNTRBT_RATE", 0);		//기여도
}

//[행삭제] 버튼 클릭시
this.btn_SubDel_Row_onclick = function(obj:Button,  e:nexacro.ClickEventInfo)
{
	if(this.ds_propsePssrpManage.getRowCount() == 0){
		this.gfn_message("info.처리불가", "선택된 공모 정보가 없습니다.");
		return false;	
	}
	
	if(this.gfn_message("confirm.삭제여부")){
		var dRow = this.ds_copertnPropseManage.rowposition;
		this.ds_copertnPropseManage.deleteRow(dRow);
	}
}


//[행취소] 버튼 클릭시

this.btn_SubCan_Row_onclick = function(obj:Button,  e:nexacro.ClickEventInfo)
{
	if(!this.comUtils.isDatasetUpdated(this.ds_copertnPropseManage))
	{
		this.gfn_message("comm.내역.변경.없음");
	}else{
		if(this.gfn_message("confirm.취소여부")){
			this.ds_copertnPropseManage.reset();		//DATASET ROLLBACK
			this.ds_copertnPropseManage.applyChange();	//DATASET COMMIT
			return;
		}
	}
}

// [붙임선택] 버튼 클릭시
this.btn_fileUpload_onclick = function(obj:Button,  e:nexacro.ClickEventInfo)
{
	if(this.ds_propsePssrpManage.getRowCount() == 0){
		this.gfn_message("info.처리불가", "선택된 공모 정보가 없습니다.");
		return false;	
	}
	
	if(this.ds_fileList.getRowCount() > 0){
		this.gfn_message("info.처리불가", "붙임자료(첨부파일)는 1건 만 등록 가능합니다.");
		return false;	
	}
	// 첨부파일 업로드(fileSn 자동채번 / 첨부파일 Master에 ROW추가 / 파일 업로드 및 자동저장 / 테이블에 fileSn반영 / 데이터셋에 fileSn반영, 단 신규 ROW가 아닐경우 ROWTYPE은 유지)
	this.fn_autoFileSn(
		 "MIS"									// 대분류   (SYS_SE)
		,"BDG"									// 업무구분 (JOB_SE)
		, this.File_UpDownManager	            // fileManager 오브젝트
		, this.ds_fileList		                // fileObject
		, this.ds_propsePssrpManage	         	// fileSn을 불러오거나 반영해야 하는 컬럼
		, "TBCOM_PROPSE_PSSRP_MANAGE"		    // fileSn을 저장할 테이블
		, "FILE_SN"								// fileSn 컬럼명이 다를 경우를 대비
		, ["PROPSE_SN"]							// fileSn을 저장할 테이블의 PK (FileSn 확인 및 자동반영목적)
	);
 }
// [붙임삭제] 버튼 클릭시
this.btn_fileDelete_onclick = function(obj:Button,  e:nexacro.ClickEventInfo)
{
	if(this.ds_propsePssrpManage.getRowCount() == 0){
		this.gfn_message("info.처리불가", "선택된 공모 정보가 없습니다.");
		return false;	
	}
	//파일첨부, 삭제 가능한 상태인지 확인 필요(상신전에만 가능)
	this.fn_fileDelete();
}


// [다운로드] 버튼 클릭시
this.btn_fileDownload_onclick = function(obj:Button,  e:nexacro.ClickEventInfo)
{
	if(this.ds_propsePssrpManage.getRowCount() == 0){
		this.gfn_message("info.처리불가", "선택된 공모 정보가 없습니다.");
		return false;	
	}
	
	var option = {};
	option["viewRow"] = "expr:CHK == '1'";
	var checkDownList = this.gfn_datasetToObject(this.ds_fileList, option, true);
	
	var isArray = this.comUtils.isArray(checkDownList);
	if(isArray){
		var checkDownLeng = checkDownList == null ? 0 : checkDownList.length;
		
		// 선택자료 여부 체크
		if ( checkDownLeng == 0 ) {
			this.gfn_message("comm.데이터.선택.없음");
			return;
		}
		
		for(var i = 0; i < checkDownLeng; i++){
			var fileSn = checkDownList[i].FILE_SN;
			var fileOrder = checkDownList[i].FILE_ORDR;
			var fileName = checkDownList[i].ORGINL_FILE_NM;
			
			this.File_UpDownManager.download(fileSn, fileOrder, fileName);
		}
	}else{
		var fileSn = checkDownList.FILE_SN;
		var fileOrder = checkDownList.FILE_ORDR;
		var fileName = checkDownList.ORGINL_FILE_NM;
		
		this.File_UpDownManager.download(fileSn, fileOrder, fileName);
	}
}

//실무부서 선택 버튼 클릭시
this.btn_deptCode_onclick = function(obj:Button,  e:nexacro.ClickEventInfo)
{
	var parm = {
		 arg_0      : this
	};
	this.gfn_popup("deptPop", 400, 400, "부서 선택", parm, "com::deptCode_P01.xfdl", "fn_popupCallBack", true);
}

//제안공모 웹페이지 팝업호출
this.btn_propsePopup_onclick = function(obj:Button,  e:nexacro.ClickEventInfo)
{
	window.open("","popupForm",'scrollbars=yes,toolbar=no,location=no,resizable=no,status=no,menubar=no,resizable=yes,width=1050,height=1200,left=20,top=20,fullscreen=no');
	var sUrl = application.gv_host + "hsco/com/sym/bbs/BBS020101/selectProposalBbsList.do"
	var form = $("<form id='frm'></form>");
	form.attr("action", sUrl);
	form.attr("method", "post");
	form.attr("target", "popupForm");
	var input1 = $("<input type='hidden' value='" + application.gv_userId +"' name='V_USER_ID'>");
	form.append(input1);
	form.appendTo("body");
	form.submit();
}

/*
 * 함수명  	: btn_Ok_onclick
 * 설명 		: 내용 팝업 확인 이벤트 처리
 * params  		: None
 * return Type 	: None
 * 사용법		: this.btn_Ok_onclick();
 */
this.btn_Ok_onclick = function(obj:Button,  e:nexacro.ClickEventInfo)
{
	this.div_cnArea.set_visible(false);
}

/*
 * 함수명  	: btn_Close_onclick
 * 설명 		: 내용 팝업 취소 이벤트 처리
 * params  		: None
 * return Type 	: None
 * 사용법		: this.btn_Close_onclick();
 */
this.btn_Close_onclick = function(obj:nexacro.Button,e:nexacro.ClickEventInfo)
{
	mRow = this.ds_propsePssrpManage.rowposition;
	this.ds_propsePssrpManage.setColumn(mRow, this.cnColumn, this.cnColumnValue);
	
	this.div_cnArea.set_visible(false);

};

/**********************************************************************
* Grid 관련 이벤트 처리
***********************************************************************/
//공동제안자 사원선택 팝업 grid onexpand클릭 이벤트
this.grd_copertnPropseManage_onexpanddown = function(obj:Grid, e:nexacro.GridMouseEventInfo)
{
	var parm = {
		 arg_0      : this
	};
	this.gfn_popup("empPop", 400, 400, "사원 선택", parm, "com::empno_P01.xfdl", "fn_popupCallBack", true);
}

//제안공모 부서선택 팝업 grid onexpand클릭 이벤트
this.grd_propsePssrpManage_onexpanddown = function(obj:Grid, e:nexacro.GridMouseEventInfo)
{
	var parm = {
		 arg_0      : this
	};
	this.gfn_popup("deptPop", 400, 400, "부서 선택", parm, "com::deptCode_P01.xfdl", "fn_popupCallBack", true);
}

//팝업 콜백
this.fn_popupCallBack = function(sPopupId, sReturn)
{
	
	if(sPopupId == "empPop"){ //사원팝업
		var dsTemp = new Dataset();
		var loadCnt = dsTemp.loadXML(sReturn);
		if(loadCnt) {
			var mRow = this.ds_propsePssrpManage.rowposition;
			var empno = this.ds_propsePssrpManage.getColumn(mRow, "EMPNO");
			if(empno == dsTemp.getColumn(0, "EMPNO")){
				this.gfn_message("info.처리불가", "제안자 정보와 중복됩니다.");
				return false;
			}
			var dRow = this.ds_copertnPropseManage.rowposition;
			this.ds_copertnPropseManage.setColumn(dRow, "EMPNO", dsTemp.getColumn(0, "EMPNO"));
			this.ds_copertnPropseManage.setColumn(dRow, "USER_NM", dsTemp.getColumn(0, "EMPNM"));
			this.ds_copertnPropseManage.setColumn(dRow, "BRTHDY", dsTemp.getColumn(0, "BRTHDY"));
			this.ds_copertnPropseManage.setColumn(dRow, "DEPT_NM", dsTemp.getColumn(0, "DEPT_NM"));
			this.ds_copertnPropseManage.setColumn(dRow, "HR_CLSF_SE", dsTemp.getColumn(0, "HR_CLSF_SE"));	
        }
        this.fn_getFileList(); //팝업이후 첨부파일 다운로드시 공통에러 발생 확인 재조회로 임시조치 by 권재만
	}
	
	if(sPopupId == "deptPop"){ //부서팝업
		var dsTemp = new Dataset();
		var loadCnt = dsTemp.loadXML(sReturn);
		if(loadCnt) {
			var mRow = this.ds_propsePssrpManage.rowposition;
			this.ds_propsePssrpManage.setColumn(mRow, "PRCAFS_DEPT_CODE",  dsTemp.getColumn(0, "DEPT_CODE")); //실무부서코드
			this.ds_propsePssrpManage.setColumn(mRow, "PRCAFS_DEPT_NM",  dsTemp.getColumn(0, "DEPT_NM")); //실무부서명
		}
		this.fn_getFileList();
	}
	
	
}



//붙임자료(첨부파일) 체크헤더 클릭시
this.grd_fileList_onheadclick = function(obj:Grid, e:nexacro.GridClickEventInfo)
{
	if(e.col == 0) {
		this.gfn_setGridCheckAll(obj, e);
	}
}

/**********************************************************************
* 공통함수 처리
***********************************************************************/

/*
 * 함수명  	: fn_fileClear
 * 설명 		: 파일 정보 초기화
 * params  		: 
 * return Type 	: None
 * 사용법		: this.fn_fileClear();
 */
this.fn_fileClear = function()
{
	this.ds_fileList.clearData();
	this.File_UpDownManager.cancelAllFile();
	this.ds_fileSn.clearData();
}

/*
 * 함수명  	: fn_fileDelete
 * 설명 		: 파일삭제
 * params  		: 
 * return Type 	: None
 * 사용법		: this.fn_fileDelete();
 */
this.fn_fileDelete = function()
{
	var findRow = this.ds_fileList.findRow("CHK", "1");
	if(findRow < 0) {
		this.gfn_message("comm.데이터.선택.없음");
			return;
	}
	
	if(this.gfn_message("confirm.선택파일.삭제여부", "들")){
		this.gfn_delMultiDsRow(this.ds_fileList);
		this.fn_transaction("deleteFiles");
	}
}

/**********************************************************************
* 사용자함수 처리
***********************************************************************/
//제안자기여도 + 공동제안자 기여도 총합 validation
this.fn_cntRbtRateChk = function(mRow){
	var result = true;
	var parentCntRbtRate = nexacro.toNumber(this.ds_propsePssrpManage.getColumn(mRow, "CNTRBT_RATE")); //제안자 기여도
    var childCntRbtRate = this.ds_copertnPropseManage.getSum("CNTRBT_RATE"); //공동 제안자 
    if((parentCntRbtRate + childCntRbtRate) > 100){
		this.gfn_message("info.처리불가", "제안자/공동제안자 기여도 총합이 100을 넘을수 없습니다.");
		result = false;
    }
    return result;
}

//항목 세팅 컨트롤 함수
this.fn_objectCtrl = function(mRow){
	var propseKndCode = this.ds_propsePssrpManage.getColumn(mRow, "PROPSE_KND_CODE"); //제안종류
	var etcAt = this.ds_propsePssrpManage.getColumn(mRow, "ETC_AT"); //기타여부
	var prcafsDeptCode = this.ds_propsePssrpManage.getColumn(mRow, "PRCAFS_DEPT_CODE"); //실무부서코드
	var userId = this.ds_propsePssrpManage.getColumn(mRow, "USER_ID"); //작성자ID
	//제안종류
	if(propseKndCode == "20"){ //실시제안
		this.Static29.set_text("개선내용");
		this.Static31.set_text("기대성과");
	}else{ //10:아이디어, 30: 공모
		this.Static29.set_text("개선방안");
		this.Static31.set_text("기대효과");
	}
	
	//기타여부
	if(etcAt == "1"){ //chk
		this.edt_etcCn.set_readonly(false);
		this.edt_etcCn.set_cssclass("edt_WF_Essential");
	}else{
		this.ds_propsePssrpManage.setColumn(mRow, "ETC_CN", null);
		this.edt_etcCn.set_readonly(true);
		this.edt_etcCn.set_cssclass("edt_WF_Readonly");
	}
	
	if(!this.isAuthBdg){ //일반부서 기준
		if(!this.comUtils.isNull(prcafsDeptCode) || userId != this.gfn_getUserId()){ //실무부서 배정이후 or 타인작성글  컨트롤 불가
			var except = [ //예외object
				 "div_search"					// 검색조건
				,"div_cnArea"					// 내용입력 팝업
				,"grd_fileList"					// 첨부파일 그리드
			    ,"btn_fileDownload"				// 첨부파일 다운로드 버튼
			    ,"btn_propsePopup"				// 제안공모 팝업버튼
			    ,"btn_deptCode"                 // 실무부서 선택 돋보기 버튼(예산팀전용)
			]
			this.fn_setReadonly(this, except);
		}else{
			//초기상태
			//grid
			this.grd_propsePssrpManage.set_readonly(false);		
			this.grd_copertnPropseManage.set_readonly(false);	
			this.grd_fileList.set_readonly(false);
			
			//button
			this.btn_fileUpload.set_enable(true);
			this.btn_fileDelete.set_enable(true);
			this.btn_fileDownload.set_enable(true);
			this.btn_SubAdd_Row.set_enable(true);
			this.btn_SubDel_Row.set_enable(true);
			this.btn_SubCan_Row.set_enable(true);
			
			//other
			this.edt_cntrbtRate.set_readonly(false);
			this.edt_cntrbtRate.set_cssclass("");
			
			this.chk_reprsntPropseSlctnAt.set_readonly(false);
			
			this.edt_samenssPropseRegistYear.set_readonly(false);
			this.edt_samenssPropseRegistYear.set_cssclass("");
			
			this.edt_propseSjNm.set_readonly(false);
			this.edt_propseSjNm.set_cssclass("edt_WF_Essential");
			
			this.cmb_propseKndCode.set_readonly(false);
			this.cmb_propseKndCode.set_cssclass("cmb_WF_Essential");
			
			//this.ta_propseSumryCn.set_readonly(false);
			this.ta_propseSumryCn.set_cssclass("txt_WF_Essential");
			this.btn_PROPSE_SUMRY_CN.set_enable(true);
			
			//this.ta_propseStusCn.set_readonly(false);
			this.ta_propseStusCn.set_cssclass("txt_WF_Essential");
			this.btn_PROPSE_STUS_CN.set_enable(true);
			
			//this.ta_propseMethodCn.set_readonly(false);
			this.ta_propseMethodCn.set_cssclass("txt_WF_Essential");
			this.btn_PROPSE_METHOD_CN.set_enable(true);
			
			//this.ta_expcEffectCn.set_readonly(false);
			this.ta_expcEffectCn.set_cssclass("txt_WF_Essential");
			this.btn_EXPC_EFFECT_CN.set_enable(true);
			
			//조치사항chk
			this.chk_01.set_readonly(false);
			this.chk_02.set_readonly(false);
			this.chk_03.set_readonly(false);
			this.chk_04.set_readonly(false);
			this.chk_05.set_readonly(false);
			this.chk_06.set_readonly(false);
		}
		
	}
	
}


//권한에 따른 항목제어 함수
this.fn_authInitCtrl = function(){
	if(this.isAuthBdg){ //예산담당자
		//this.grd_propsePssrpManage.setCellProperty("Body", 5, "edittype", "expand");
		//this.grd_propsePssrpManage.setCellProperty("Body", 5, "expandshow", "show");
		this.btn_deptCode.set_visible(true);
	}
}

//내용입력 버튼 div 호출
this.fn_cnAreaShow = function(obj:Button,  e:nexacro.ClickEventInfo)
{
	this.removeChild("BIND_ITME"); //바인드 초기화
	var mRow = this.ds_propsePssrpManage.rowposition;
	var objName = obj.name;
	objName = objName.replace("btn_", "");
	//취소시 컬럼 및 컬럼내용 원복용
	this.cnColumn = objName; 
	this.cnColumnValue = this.ds_propsePssrpManage.getColumn(mRow, objName);
	
	var objBind = new BindItem();
	objBind.init("BIND_ITME", "div_cnArea.txt_cn", "value", "ds_propsePssrpManage", objName);
	this.addChild("BIND_ITME", objBind); 
	objBind.bind();
	
	
	this.div_cnArea.set_visible(true);
}

/**********************************************************************
* Tab 관련 이벤트 처리
***********************************************************************/

/**********************************************************************
* Popup 관련 이벤트 처리
***********************************************************************/





]]></Script>
  </Form>
</FDL>
