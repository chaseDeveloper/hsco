<?xml version="1.0" encoding="utf-8"?>
<FDL version="1.5">
  <TypeDefinition url="..\..\default_typedef.xml"/>
  <Form id="BDG010102" classname="BDG010102" left="0" top="0" width="1059" height="735" titletext="예산계정코드" onload="BDG010102_onload" oninit="BDG010102_oninit">
    <Layouts>
      <Layout>
        <Div id="div_search" taborder="0" left="0" top="0" right="28" height="33" cssclass="div_WFSA_Box">
          <Layouts>
            <Layout>
              <Static id="sta_YEAR" taborder="2" text="예산년도" wordwrap="char" left="15" top="5" width="64" height="21" cssclass="sta_WFSA_Label"/>
              <Static id="sta_BSNS_SE" taborder="4" text="사업구분" wordwrap="char" left="154" top="5" width="64" height="21" cssclass="sta_WFSA_Label"/>
              <Combo id="cbo_BSNS_SE" taborder="5" codecolumn="CODE" datacolumn="CODE_NM" left="218" top="5" width="100" height="21" innerdataset="@ds_bdg001"/>
              <Static id="sta_BALC_SE" taborder="7" text="수/지구분" wordwrap="char" left="333" top="5" width="77" height="21" cssclass="sta_WFSA_Label"/>
              <Radio id="rdo_BALC_SE" taborder="8" innerdataset="@ds_bdg002" codecolumn="CODE" datacolumn="CODE_NM" direction="vertical" left="410" top="5" width="100" height="21"/>
              <Static id="Static36" taborder="29" text="5" left="488" width="38" style="background:#fa794f66;align:center middle;" visible="false" top="0" height="5"/>
              <Static id="Static37" taborder="30" text="5" left="488" width="38" style="background:#fa794f66;align:center middle;" height="5" bottom="0" visible="false"/>
              <Static id="Static04" taborder="1" text="15" left="0" top="5" width="15" style="background:#00ffff66;" bottom="5" visible="false"/>
              <Static id="Static00" taborder="3" text="15" left="139" top="5" bottom="5" width="15" style="background:#00ffff66;" visible="false"/>
              <Static id="Static01" taborder="6" text="15" left="318" top="5" bottom="5" width="15" style="background:#00ffff66;" visible="false"/>
              <Combo id="cmb_ACNT_CODE" taborder="11" innerdataset="@ds_acntCode" codecolumn="BUDGET_ACNT_CODE" datacolumn="BUDGET_ACNT_NM2" type="filter" left="589" top="5" width="229" height="21"/>
              <Static id="sta_ACNT_CODE" taborder="10" text="계정과목" wordwrap="char" cssclass="sta_WFSA_Label" left="525" top="5" width="64" height="21"/>
              <Static id="Static02" taborder="9" text="15" visible="false" left="510" top="5" bottom="5" width="15" style="background:#00ffff66;"/>
              <Spin id="spn_YEAR" taborder="0" left="79" top="5" width="60" height="21" style="buttonsize:15;" max="9999"/>
            </Layout>
          </Layouts>
        </Div>
        <Grid id="grd_ACNT_CODE" taborder="6" useinputpanel="false" left="0" top="67" binddataset="ds_acntCode" right="601" autofittype="col" cellsizingtype="col" autoenter="select" autosizingtype="row" extendsizetype="row" bottom="0" treeinitstatus="expand,all" treeusecheckbox="false" treeuseexpandkey="true" treeuseimage="false" treeuseline="true">
          <Formats>
            <Format id="default">
              <Columns>
                <Column size="35" band="left"/>
                <Column size="40" band="left"/>
                <Column size="250"/>
                <Column size="50" band="right"/>
                <Column size="35" band="right"/>
                <Column size="35" band="right"/>
              </Columns>
              <Rows>
                <Row size="24" band="head"/>
                <Row size="24" band="head"/>
                <Row size="24"/>
              </Rows>
              <Band id="head">
                <Cell rowspan="2" text="No"/>
                <Cell col="1" rowspan="2" text="레벨"/>
                <Cell col="2" rowspan="2" text="예산계정과목"/>
                <Cell col="3" rowspan="2" text="조기&#13;&#10;집행"/>
                <Cell col="4" rowspan="2" text="자동&#13;&#10;분개"/>
                <Cell col="5" rowspan="2" text="부기&#13;&#10;코드"/>
              </Band>
              <Band id="body">
                <Cell style="background:EXPR(ACNT_LEVEL&gt;(YEAR&gt;=2016?'4':'3') ? '#ffffffff' : '#f6f7ff');background2:EXPR(ACNT_LEVEL&gt;(YEAR&gt;=2016?'4':'3') ? '#ffffffff' : '#f6f7ff');" text="expr:currow+1" autosizerow="limitmin"/>
                <Cell col="1" displaytype="combo" style="align:left middle;padding:0 0 0 5;background:EXPR(ACNT_LEVEL&gt;(YEAR&gt;=2016?'4':'3') ? '#ffffffff' : '#f6f7ff');background2:EXPR(ACNT_LEVEL&gt;(YEAR&gt;=2016?'4':'3') ? '#ffffffff' : '#f6f7ff');" text="bind:ACNT_LEVEL" combodataset="ds_bdg005" combocodecol="CODE" combodatacol="CODE_NM"/>
                <Cell col="2" displaytype="tree" edittype="tree" style="align:left middle;background:EXPR(ACNT_LEVEL&gt;(YEAR&gt;=2016?'4':'3') ? '#ffffffff' : '#f6f7ff');background2:EXPR(ACNT_LEVEL&gt;(YEAR&gt;=2016?'4':'3') ? '#ffffffff' : '#f6f7ff');" text="bind:BUDGET_ACNT_NM2" expandshow="hide" treelevel="bind:ACNT_LEVEL"/>
                <Cell col="3" displaytype="combo" style="background:EXPR(ACNT_LEVEL&gt;(YEAR&gt;=2016?'4':'3') ? '#ffffffff' : '#f6f7ff');background2:EXPR(ACNT_LEVEL&gt;(YEAR&gt;=2016?'4':'3') ? '#ffffffff' : '#f6f7ff');" text="bind:ELPD_EXCUT_AT" combodataset="ds_com051" combocodecol="CODE" combodatacol="CODE_NM"/>
                <Cell col="4" style="background:EXPR(ACNT_LEVEL&gt;(YEAR&gt;=2016?'4':'3') ? '#ffffffff' : '#f6f7ff');background2:EXPR(ACNT_LEVEL&gt;(YEAR&gt;=2016?'4':'3') ? '#ffffffff' : '#f6f7ff');" text="bind:JRNLZ_CNT"/>
                <Cell col="5" style="background:EXPR(ACNT_LEVEL&gt;(YEAR&gt;=2016?'4':'3') ? '#ffffffff' : '#f6f7ff');background2:EXPR(ACNT_LEVEL&gt;(YEAR&gt;=2016?'4':'3') ? '#ffffffff' : '#f6f7ff');" text="expr:EXPNDTR_UNIT_CNT &gt; 0 ? EXPNDTR_UNIT_CNT : ''"/>
              </Band>
            </Format>
          </Formats>
        </Grid>
        <Static id="sta_acntCode" taborder="3" text="예산계정리스트" cssclass="sta_WF_Title02" left="0" top="43" right="940" height="19"/>
        <Static id="Static00" taborder="2" text="10" visible="false" left="0" top="33" height="10" style="background:#dc143c3c;align:center middle;" right="28"/>
        <Static id="Static08" taborder="5" text="5" visible="false" left="0" top="62" height="5" style="background:#dc143c3c;align:center middle;" right="28"/>
        <Static id="Static01" taborder="30" cssclass="sta_WF_Labelbg" top="93" right="28" height="27" width="563"/>
        <Static id="Static02" taborder="31" cssclass="sta_WF_Labelbg" top="119" right="28" height="27" width="563"/>
        <Static id="Static03" taborder="32" cssclass="sta_WF_Labelbg" top="145" right="28" height="27" width="563"/>
        <Static id="Static37" taborder="33" cssclass="sta_WF_Labelbg" top="67" right="28" height="27" width="563"/>
        <Static id="sta_BSNS_SE" taborder="7" text="예산년도" wordwrap="char" cssclass="sta_WF_Label" top="67" width="97" height="27" right="494"/>
        <Static id="sta_BALC_SE" taborder="11" text="수/지구분" wordwrap="char" cssclass="sta_WF_Label" top="67" height="27" right="144" width="84"/>
        <Static id="sta_UPPER_ACNT_CODE" taborder="13" text="상위계정코드" wordwrap="char" cssclass="sta_WF_Label" top="93" height="27" right="494" width="97"/>
        <Static id="sta_UPPER_ACNT_CODE_NM" taborder="9" text="사업구분" wordwrap="char" cssclass="sta_WF_Label" top="67" height="27" right="312" width="84"/>
        <Static id="sta_BUDGET_ACNT_CODE" taborder="17" text="계정과목코드" wordwrap="char" cssclass="sta_WF_Label" top="119" width="97" height="27" right="494"/>
        <Static id="sta_BUDGET_ACNT_NM" taborder="19" text="계정과목명" wordwrap="char" cssclass="sta_WF_Label" top="119" height="27" right="312" width="84"/>
        <Static id="sta_ACNT_LEVEL" taborder="21" text="계정레벨" wordwrap="char" cssclass="sta_WF_Label" top="145" width="97" height="27" right="494"/>
        <Radio id="rad_ACNT_LEVEL" taborder="22" innerdataset="@ds_bdg005" codecolumn="CODE" datacolumn="CODE_NM" direction="vertical" top="148" width="259" height="21" index="-1" right="230" readonly="false"/>
        <Combo id="cmb_BSNS_SE" taborder="10" innerdataset="@ds_bdg001" codecolumn="CODE" datacolumn="CODE_NM" top="70" height="21" right="230" width="80" index="-1" readonly="true" style="buttonsize:0;" cssclass="cmb_WF_Readonly"/>
        <Radio id="rad_BALC_SE" taborder="12" innerdataset="@ds_bdg002" codecolumn="CODE" datacolumn="CODE_NM" direction="vertical" top="70" height="21" right="39" width="103" index="-1" readonly="true"/>
        <Edit id="edt_BUDGET_ACNT_NM" taborder="20" top="122" height="21" right="31" width="279" lengthunit="utf8" maxlength="150"/>
        <Static id="Static42" taborder="4" text="10" visible="false" left="458" top="33" bottom="0" width="10" style="background:#1b3cd23c;align:center middle;"/>
        <Static id="Static04" taborder="28" text="15" visible="false" left="1031" top="0" width="15" height="735" style="background:#1b3cd23c;align:center middle;"/>
        <Static id="Static05" taborder="29" text="스&#13;&#10;크&#13;&#10;롤&#13;&#10;13" visible="false" top="0" right="0" width="13" height="735" style="background:#d07b173c;align:center middle;"/>
        <Button id="btn_copy" taborder="1" text="전년도복사" cssclass="btn_WF_Process" top="43" right="28" width="84" height="19" onclick="btn_copy_onclick"/>
        <Static id="Static09" taborder="27" text="10" visible="false" left="468" top="198" right="28" height="10" style="background:#dc143c3c;align:center middle;"/>
        <MaskEdit id="msk_BUDGET_ACNT_CODE" taborder="18" top="122" width="94" height="21" mask="###-#####" limitbymask="both" type="string" style="align:center middle;" right="398"/>
        <MaskEdit id="msk_YEAR" taborder="8" type="string" mask="####" limitbymask="both" top="70" width="94" height="21" style="align:center middle;" right="398" readonly="true" cssclass="msk_WF_Readonly"/>
        <MaskEdit id="msk_UPPER_ACNT_CODE" taborder="14" type="string" mask="###-#####" limitbymask="both" top="96" right="398" width="94" height="21" style="padding:1 21 0 6;align:center middle;" readonly="true" cssclass="msk_WF_Readonly"/>
        <Static id="sta_UPPER_ACNT_NM" taborder="15" text="상위계정명" wordwrap="char" cssclass="sta_WF_Label" top="93" right="312" width="84" height="27"/>
        <Combo id="cmb_UPPER_ACNT_CODE" taborder="16" innerdataset="@ds_uppAcntCode" codecolumn="BUDGET_ACNT_CODE" datacolumn="BUDGET_ACNT_NM" top="96" right="31" width="279" height="21" readonly="true" style="buttonsize:0;" cssclass="cmb_WF_Readonly"/>
        <Static id="sta_title02" taborder="34" text="'신규' 버튼 클릭 시, 선택한 행의 하위계정으로 자동 추가됩니다." left="133" top="43" width="400" height="19" style="color:blue;padding:0 0 0 0;align:left middle;font:bold 9 Gulim;"/>
        <Button id="btn_pop" taborder="35" cssclass="btn_WF_Search" top="96" right="398" width="14" height="21" onclick="btn_pop_onclick"/>
        <Tab id="tab" taborder="26" top="208" width="563" tabindex="0" scrollbars="autoboth" bottom="0" right="27" onchanged="tab_onchanged" canchange="tab_canchange" style="showextrabutton:false;">
          <Tabpages>
            <Tabpage id="tabpage1" text="자동분개유형">
              <Layouts>
                <Layout>
                  <Static id="sta_acntCode00" taborder="0" text="자동분개유형" cssclass="sta_WF_Title03" top="10" right="412" width="151" height="19"/>
                  <Static id="Static07" taborder="1" text="5" visible="false" left="0" top="29" right="0" height="5" style="background:#dc143c3c;align:center middle;"/>
                  <Grid id="grd_atmcJrnlzTy" taborder="2" binddataset="ds_atmcJrnlzTy" autoenter="select" useinputpanel="false" cellsizingtype="col" autofittype="col" treeusecheckbox="false" treeuseimage="false" treeinitstatus="expand,all" treeuseexpandkey="true" onexpandup="grd_atmcJrnlzTy_onexpandup" top="34" right="0" bottom="0" width="563">
                    <Formats>
                      <Format id="default">
                        <Columns>
                          <Column size="30"/>
                          <Column size="60"/>
                          <Column size="40"/>
                          <Column size="75"/>
                          <Column size="120"/>
                          <Column size="40"/>
                          <Column size="75"/>
                          <Column size="120"/>
                        </Columns>
                        <Rows>
                          <Row size="24" band="head"/>
                          <Row size="24"/>
                          <Row size="24"/>
                        </Rows>
                        <Band id="head">
                          <Cell colspan="2" style="line:1 solid #000000ff,1 solid #efececff;selectline:1 solid #000000ff,1 solid #efececff;" text="거래유형"/>
                          <Cell col="2" colspan="6" style="line:1 solid #000000ff,1 solid #efececff;selectline:1 solid #000000ff,1 solid #efececff;" text="회계계정과목"/>
                        </Band>
                        <Band id="body">
                          <Cell rowspan="2" style="line:1 solid #000000ff,1 solid #efececff;background:white;background2:white;selectbackground:white;selectline:1 solid #000000ff,1 solid #efececff;" text="expr:currow+1" autosizecol="limitmax"/>
                          <Cell col="1" style="line:1 solid #efececff,1 solid #000000ff;background:white;background2:white;color:blue;color2:blue;font:bold 9 arial;selectbackground:white;selectcolor:blue;selectfont:bold 9 arial;selectline:1 solid #efececff,1 solid #000000ff;" text="expr:BALC_SE == &quot;1&quot; ? &quot;징수&quot; : &quot;채무확정&quot;"/>
                          <Cell col="2" style="line:1 solid #efececff,1 solid #000000ff;background:white;background2:white;font:bold 9 arial;selectbackground:white;selectfont:bold 9 arial;selectline:1 solid #efececff,1 solid #000000ff;" text="차변"/>
                          <Cell col="3" style="line: ;" text="bind:GNRL_DEBTOR_ACNT_CODE"/>
                          <Cell col="4" style="align:left middle;line:1 solid #efececff,1 solid #000000ff;selectline:1 solid #efececff,1 solid #000000ff;" text="bind:GNRL_DEBTOR_ACNT_NM" tooltiptext="bind:GNRL_DEBTOR_ACNT_NM"/>
                          <Cell col="5" style="line:1 solid #efececff,1 solid #000000ff;background:white;background2:white;font:bold 9 arial;selectbackground:white;selectfont:bold 9 arial;selectline:1 solid #efececff,1 solid #000000ff;" text="대변"/>
                          <Cell col="6" text="bind:GNRL_CRDIT_ACNT_CODE"/>
                          <Cell col="7" style="align:left middle;selectline: ;" text="bind:GNRL_CRDIT_ACNT_NM" tooltiptext="bind:GNRL_CRDIT_ACNT_NM"/>
                          <Cell row="1" col="1" style="line:1 solid #000000ff ;background:white;background2:white;color:orangered;color2:orangered;font:bold 9 arial;selectbackground:white;selectcolor:orangered;selectfont:bold 9 arial;selectline:1 solid #000000ff ;" text="expr:BALC_SE == &quot;1&quot; ? &quot;회수&quot; : &quot;지급&quot;"/>
                          <Cell row="1" col="2" style="line:1 solid #000000ff ;background:white;background2:white;font:bold 9 arial;selectbackground:white;selectfont:bold 9 arial;selectline:1 solid #000000ff ;" text="차변"/>
                          <Cell row="1" col="3" style="line:1 solid #000000ff,1 solid #efececff;selectline:1 solid #000000ff,1 solid #efececff;" text="bind:SETOFF_DEBTOR_ACNT_CODE"/>
                          <Cell row="1" col="4" style="align:left middle;line:1 solid #000000ff ;selectline:1 solid #000000ff ;" text="bind:SETOFF_DEBTOR_ACNT_NM" tooltiptext="bind:SETOFF_DEBTOR_ACNT_NM"/>
                          <Cell row="1" col="5" style="line:1 solid #000000ff ;background:white;background2:white;font:bold 9 arial;selectbackground:white;selectfont:bold 9 arial;selectline:1 solid #000000ff ;" text="대변"/>
                          <Cell row="1" col="6" style="line:1 solid #000000ff,1 solid #efececff;selectline:1 solid #000000ff,1 solid #efececff;" text="bind:SETOFF_CRDIT_ACNT_CODE"/>
                          <Cell row="1" col="7" style="align:left middle;line:1 solid #000000ff,1 solid #efececff;selectline:1 solid #000000ff,1 solid #efececff;" text="bind:SETOFF_CRDIT_ACNT_NM" tooltiptext="bind:SETOFF_CRDIT_ACNT_NM"/>
                        </Band>
                      </Format>
                    </Formats>
                  </Grid>
                  <Button id="btn_Add" taborder="3" text="행추가" onclick="btn_Add_onclick" cssclass="btn_WF_Gridadd" enable="false" visible="false" top="10" right="134" width="64" height="19"/>
                  <Button id="btn_Delete" taborder="4" text="행삭제" onclick="btn_Delete_onclick" cssclass="btn_WF_Griddel" enable="false" visible="false" top="10" right="67" width="64" height="19"/>
                  <Button id="btn_Cancel" taborder="5" text="취소" onclick="btn_Cancel_onclick" cssclass="btn_WF_Gridcnl" enable="false" visible="false" top="10" right="0" width="64" height="19"/>
                  <Button id="btn_copyAtmcJrnlzTy" taborder="6" text="전년도복사" onclick="btn_copyAtmcJrnlzTy_onclick" cssclass="btn_WF_Process" visible="false" top="10" right="201" width="84" height="19"/>
                  <Static id="Static09" taborder="7" text="10" visible="false" left="0" top="0" right="0" height="10" style="background:#dc143c3c;align:center middle;"/>
                </Layout>
              </Layouts>
            </Tabpage>
            <Tabpage id="tabpage2" text="부기코드">
              <Layouts>
                <Layout>
                  <Static id="Static09" taborder="0" text="10" visible="false" left="0" top="0" right="0" height="10" style="background:#dc143c3c;align:center middle;"/>
                  <Static id="sta_acntCode00" taborder="1" text="부기코드리스트" cssclass="sta_WF_Title03" top="10" right="412" width="151" height="19"/>
                  <Button id="btn_copyBukip" taborder="2" text="전년도복사" cssclass="btn_WF_Process" visible="true" top="10" right="201" width="84" height="19" onclick="btn_copyBukip_onclick"/>
                  <Button id="btn_Add" taborder="3" text="행추가" onclick="btn_Add_onclick" cssclass="btn_WF_Gridadd" enable="false" visible="true" top="10" right="134" width="64" height="19"/>
                  <Button id="btn_Delete" taborder="4" text="행삭제" onclick="btn_Delete_onclick" cssclass="btn_WF_Griddel" enable="false" visible="true" top="10" right="67" width="64" height="19"/>
                  <Button id="btn_Cancel" taborder="5" text="취소" onclick="btn_Cancel_onclick" cssclass="btn_WF_Gridcnl" enable="false" visible="true" top="10" right="0" width="64" height="19"/>
                  <Static id="Static07" taborder="6" text="5" visible="false" left="0" top="29" right="0" height="5" style="background:#dc143c3c;align:center middle;"/>
                  <Grid id="grd_bukipList" taborder="7" useinputpanel="false" left="0" top="34" right="0" bottom="0" binddataset="ds_bukipInfoList" autofittype="col" onexpandup="tab_tabpage2_grd_bukipList_onexpandup">
                    <Formats>
                      <Format id="default">
                        <Columns>
                          <Column size="120"/>
                          <Column size="440"/>
                        </Columns>
                        <Rows>
                          <Row size="24" band="head"/>
                          <Row size="24"/>
                        </Rows>
                        <Band id="head">
                          <Cell text="부기코드"/>
                          <Cell col="1" text="부기명"/>
                        </Band>
                        <Band id="body">
                          <Cell edittype="none" editfilter="none" text="bind:BUKIP_CODE" editlimit="0" expandshow="expr:dataset.getRowType(currow) == Dataset.ROWTYPE_INSERT ? 'show' : 'none'"/>
                          <Cell col="1" edittype="none" style="align:left middle;padding:0 0 0 5;" text="bind:BUKIP_NM" editlimit="0"/>
                        </Band>
                      </Format>
                    </Formats>
                  </Grid>
                </Layout>
              </Layouts>
            </Tabpage>
          </Tabpages>
        </Tab>
        <Div id="div_pop" taborder="36" left="41" top="800" width="855" height="500" style="background:#ffffffff;shadow:outer 5,5 10 gray;" visible="false">
          <Layouts>
            <Layout>
              <Static id="sta_title" taborder="0" text="상위계정 선택" cssclass="sta_WF_PopupTitle" left="0" top="0" right="0" height="34" onlbuttondown="div_pop_sta_title_onlbuttondown" onmousemove="div_pop_sta_title_onmousemove"/>
              <Button id="btn_destroy" taborder="1" cssclass="btn_WF_PopupClose" top="8" right="14" width="20" height="20" onclick="div_pop_btn_destroy_onclick"/>
              <Static id="Static02" taborder="2" text="15" visible="false" top="0" right="0" bottom="0" width="15" style="background:#1b3cd23c;align:center middle;"/>
              <Static id="Static05" taborder="3" text="15" visible="false" left="0" top="0" bottom="0" width="15" style="background:#1b3cd23c;align:center middle;"/>
              <Static id="Static00" taborder="4" text="10" visible="false" left="15" top="34" right="15" height="10" style="background:#dc143c3c;align:center middle;"/>
              <Static id="Static10" taborder="5" text="15" visible="false" left="15" right="15" style="background:#1b3cd23c;align:center middle;" bottom="0" height="15"/>
              <Grid id="grd_ACNT_CODE" taborder="8" binddataset="ds_acntCodePop" autoenter="select" useinputpanel="false" extendsizetype="row" cellsizingtype="col" autosizingtype="row" treeusecheckbox="false" treeuseimage="false" treeinitstatus="expand,all" treeuseexpandkey="true" left="15" top="68" right="15" bottom="15" oncelldblclick="div_pop_grd_ACNT_CODE_oncelldblclick" autofittype="col">
                <Formats>
                  <Format id="default">
                    <Columns>
                      <Column size="35" band="left"/>
                      <Column size="40" band="left"/>
                      <Column size="300"/>
                    </Columns>
                    <Rows>
                      <Row size="24" band="head"/>
                      <Row size="24"/>
                    </Rows>
                    <Band id="head">
                      <Cell text="No"/>
                      <Cell col="1" text="레벨"/>
                      <Cell col="2" text="예산계정과목"/>
                    </Band>
                    <Band id="body">
                      <Cell style="background:EXPR(ACNT_LEVEL&gt;(YEAR&gt;=2016?'4':'3') ? '#ffffffff' : '#f6f7ff');background2:EXPR(ACNT_LEVEL&gt;(YEAR&gt;=2016?'4':'3') ? '#ffffffff' : '#f6f7ff');" text="expr:currow+1" autosizerow="limitmin"/>
                      <Cell col="1" displaytype="combo" style="align:left middle;padding:0 0 0 5;background:EXPR(ACNT_LEVEL&gt;(YEAR&gt;=2016?'4':'3') ? '#ffffffff' : '#f6f7ff');background2:EXPR(ACNT_LEVEL&gt;(YEAR&gt;=2016?'4':'3') ? '#ffffffff' : '#f6f7ff');" text="bind:ACNT_LEVEL" combodataset="ds_bdg005" combocodecol="CODE" combodatacol="CODE_NM"/>
                      <Cell col="2" displaytype="tree" edittype="tree" style="align:left middle;background:EXPR(ACNT_LEVEL&gt;(YEAR&gt;=2016?'4':'3') ? '#ffffffff' : '#f6f7ff');background2:EXPR(ACNT_LEVEL&gt;(YEAR&gt;=2016?'4':'3') ? '#ffffffff' : '#f6f7ff');" text="bind:BUDGET_ACNT_NM2" expandshow="hide" treelevel="bind:ACNT_LEVEL"/>
                    </Band>
                  </Format>
                </Formats>
              </Grid>
              <Static id="sta_acntCode" taborder="6" text="(상위계정으로 사용할 계정을 더블클릭해 주시기 바랍니다)" cssclass="sta_WF_Title02" left="15" top="44" height="19" width="368"/>
              <Static id="Static08" taborder="7" text="5" visible="false" left="15" top="63" right="15" height="5" style="background:#dc143c3c;align:center middle;"/>
            </Layout>
          </Layouts>
        </Div>
        <Static id="Static06" taborder="40" cssclass="sta_WF_Labelbg" top="171" right="28" width="563" height="27"/>
        <Static id="sta_elpdExcutAt" taborder="37" text="조기집행여부" wordwrap="char" cssclass="sta_WF_Label" top="171" right="494" width="97" height="27"/>
        <Static id="sta_elpdExcutTrgetRt" taborder="38" text="조기집행대상" wordwrap="char" cssclass="sta_WF_Label" top="171" right="274" width="97" height="27"/>
        <Static id="sta_elpdExcutRt" taborder="39" text="조기집행률" wordwrap="char" cssclass="sta_WF_Label" top="171" right="110" width="84" height="27"/>
        <MaskEdit id="msk_elpdExcutTrgetRt" taborder="24" top="174" width="76" height="21" right="196" mask="###.#" limitbymask="both"/>
        <MaskEdit id="msk_elpdExcutRt" taborder="25" top="174" right="31" width="77" height="21" mask="###.#" limitbymask="both"/>
        <Radio id="rad_elpdExcutAt" taborder="23" innerdataset="@ds_com051" codecolumn="CODE" datacolumn="CODE_NM" direction="vertical" top="174" right="373" width="115" height="21"/>
      </Layout>
    </Layouts>
    <Objects>
      <Dataset id="ds_cond" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false" oncolumnchanged="ds_cond_oncolumnchanged">
        <ColumnInfo>
          <Column id="YEAR" type="STRING" size="4"/>
          <Column id="BSNS_SE" type="STRING" size="1"/>
          <Column id="BALC_SE" type="STRING" size="1"/>
          <Column id="BUDGET_ACNT_CODE" type="STRING" size="256"/>
        </ColumnInfo>
        <Rows>
          <Row/>
        </Rows>
      </Dataset>
      <Dataset id="ds_bdg001" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="ETC1" type="string" size="32"/>
          <Column id="VAL2" type="string" size="32"/>
          <Column id="CODE_CN" type="string" size="32"/>
          <Column id="VAL1" type="string" size="32"/>
          <Column id="USE_YN" type="string" size="32"/>
          <Column id="ETC3" type="string" size="32"/>
          <Column id="VAL4" type="string" size="32"/>
          <Column id="ETC2" type="string" size="32"/>
          <Column id="VAL3" type="string" size="32"/>
          <Column id="CODE_ORDR" type="bigdecimal" size="16"/>
          <Column id="MSTK_VAL" type="string" size="32"/>
          <Column id="ALL_CODE_NM" type="string" size="32"/>
          <Column id="CODE_NM" type="string" size="32"/>
          <Column id="INT_VAL" type="string" size="32"/>
          <Column id="GRP_CODE" type="string" size="32"/>
          <Column id="CODE" type="string" size="32"/>
          <Column id="VAL0" type="string" size="32"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_bdg002" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="ETC1" type="string" size="32"/>
          <Column id="VAL2" type="string" size="32"/>
          <Column id="CODE_CN" type="string" size="32"/>
          <Column id="VAL1" type="string" size="32"/>
          <Column id="USE_YN" type="string" size="32"/>
          <Column id="ETC3" type="string" size="32"/>
          <Column id="VAL4" type="string" size="32"/>
          <Column id="ETC2" type="string" size="32"/>
          <Column id="VAL3" type="string" size="32"/>
          <Column id="CODE_ORDR" type="bigdecimal" size="16"/>
          <Column id="MSTK_VAL" type="string" size="32"/>
          <Column id="ALL_CODE_NM" type="string" size="32"/>
          <Column id="CODE_NM" type="string" size="32"/>
          <Column id="INT_VAL" type="string" size="32"/>
          <Column id="GRP_CODE" type="string" size="32"/>
          <Column id="CODE" type="string" size="32"/>
          <Column id="VAL0" type="string" size="32"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_bdg005" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="ETC1" type="string" size="32"/>
          <Column id="VAL2" type="string" size="32"/>
          <Column id="CODE_CN" type="string" size="32"/>
          <Column id="VAL1" type="string" size="32"/>
          <Column id="USE_YN" type="string" size="32"/>
          <Column id="ETC3" type="string" size="32"/>
          <Column id="VAL4" type="string" size="32"/>
          <Column id="ETC2" type="string" size="32"/>
          <Column id="VAL3" type="string" size="32"/>
          <Column id="CODE_ORDR" type="bigdecimal" size="16"/>
          <Column id="MSTK_VAL" type="string" size="32"/>
          <Column id="ALL_CODE_NM" type="string" size="32"/>
          <Column id="CODE_NM" type="string" size="32"/>
          <Column id="INT_VAL" type="string" size="32"/>
          <Column id="GRP_CODE" type="string" size="32"/>
          <Column id="CODE" type="string" size="32"/>
          <Column id="VAL0" type="string" size="32"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_uppAcntCode" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="BUDGET_ACNT_CODE" type="STRING" size="8"/>
          <Column id="BUDGET_ACNT_NM" type="STRING" size="100"/>
          <Column id="BUDGET_ACNT_CODE_NM" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_acntCode" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false" cancolumnchange="ds_acntCode_cancolumnchange" oncolumnchanged="ds_acntCode_oncolumnchanged" onrowposchanged="ds_acntCode_onrowposchanged" canrowposchange="ds_acntCode_canrowposchange">
        <ColumnInfo>
          <Column id="YEAR" type="STRING" size="4"/>
          <Column id="BSNS_SE" type="STRING" size="1"/>
          <Column id="BALC_SE" type="STRING" size="1"/>
          <Column id="BUDGET_ACNT_CODE" type="STRING" size="8"/>
          <Column id="BUDGET_ACNT_NM" type="STRING" size="100"/>
          <Column id="BUDGET_ACNT_NM2" type="STRING" size="100"/>
          <Column id="ACNT_LEVEL" type="STRING" size="1"/>
          <Column id="UPPER_ACNT_CODE" type="STRING" size="8"/>
          <Column id="ELPD_EXCUT_RT" type="BIGDECIMAL" size="22"/>
          <Column id="ELPD_EXCUT_TRGET_RT" type="BIGDECIMAL" size="22"/>
          <Column id="ELPD_EXCUT_AT" type="STRING" size="1"/>
          <Column id="PLAN_REGIST_AT" type="STRING" size="1"/>
          <Column id="CHIT_PROCESS_AT" type="STRING" size="1"/>
          <Column id="COST_ACNT_CODE" type="STRING" size="8"/>
          <Column id="COST_ACNT_NM" type="STRING" size="256"/>
          <Column id="PARTN_ACNT_CODE" type="STRING" size="8"/>
          <Column id="PARTN_ACNT_NM" type="STRING" size="256"/>
          <Column id="GWAN" type="STRING" size="256"/>
          <Column id="HANG" type="STRING" size="256"/>
          <Column id="SEHANG" type="STRING" size="256"/>
          <Column id="MOK" type="STRING" size="256"/>
          <Column id="BUDGET_ACNT_CODE_NM" type="STRING" size="256"/>
          <Column id="JRNLZ_CNT" type="BIGDECIMAL" size="256"/>
          <Column id="LEAF" type="STRING" size="1"/>
          <Column id="EXPNDTR_UNIT_CNT" type="INT" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_validation" firefirstcount="0" firenextcount="0" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false" useclientlayout="false">
        <ColumnInfo>
          <Column id="compId" type="STRING" size="256"/>
          <Column id="colId" type="STRING" size="256"/>
          <Column id="msgId" type="STRING" size="256"/>
          <Column id="PK" type="STRING" size="256"/>
          <Column id="notNull" type="STRING" size="256"/>
          <Column id="nlength" type="STRING" size="256"/>
          <Column id="lengthChkGb" type="STRING" size="256"/>
          <Column id="type" type="STRING" size="256"/>
          <Column id="from" type="STRING" size="256"/>
          <Column id="to" type="STRING" size="256"/>
          <Column id="expr" type="STRING" size="256"/>
          <Column id="func" type="STRING" size="256"/>
        </ColumnInfo>
        <Rows>
          <Row>
            <Col id="colId">YEAR</Col>
            <Col id="compId">ds_cond</Col>
            <Col id="msgId">예산년도</Col>
            <Col id="notNull">Y</Col>
          </Row>
          <Row>
            <Col id="colId">BSNS_SE</Col>
            <Col id="compId">ds_cond</Col>
            <Col id="msgId">사업구분</Col>
            <Col id="notNull">Y</Col>
          </Row>
          <Row>
            <Col id="compId">ds_cond</Col>
            <Col id="colId">BALC_SE</Col>
            <Col id="notNull">Y</Col>
            <Col id="msgId">수지구분</Col>
          </Row>
          <Row>
            <Col id="compId">ds_acntCode</Col>
            <Col id="notNull">Y</Col>
            <Col id="msgId">예산년도</Col>
            <Col id="colId">YEAR</Col>
            <Col id="PK">Y</Col>
            <Col id="nlength">4</Col>
          </Row>
          <Row>
            <Col id="compId">ds_acntCode</Col>
            <Col id="PK">Y</Col>
            <Col id="notNull">Y</Col>
            <Col id="msgId">사업구분</Col>
            <Col id="colId">BSNS_SE</Col>
            <Col id="nlength">1</Col>
          </Row>
          <Row>
            <Col id="compId">ds_acntCode</Col>
            <Col id="PK">Y</Col>
            <Col id="notNull">Y</Col>
            <Col id="msgId">수지구분</Col>
            <Col id="colId">BALC_SE</Col>
            <Col id="nlength">1</Col>
          </Row>
          <Row>
            <Col id="compId">ds_acntCode</Col>
            <Col id="colId">BUDGET_ACNT_CODE</Col>
            <Col id="msgId">계정과목코드</Col>
            <Col id="PK">Y</Col>
            <Col id="notNull">Y</Col>
            <Col id="nlength">8</Col>
          </Row>
          <Row>
            <Col id="compId">ds_acntCode</Col>
            <Col id="colId">BUDGET_ACNT_NM</Col>
            <Col id="msgId">계정과목명</Col>
            <Col id="notNull">Y</Col>
            <Col id="lengthChkGb">LE</Col>
            <Col id="nlength">50</Col>
          </Row>
          <Row>
            <Col id="colId">ACNT_LEVEL</Col>
            <Col id="compId">ds_acntCode</Col>
            <Col id="notNull">Y</Col>
            <Col id="msgId">계정레벨</Col>
            <Col id="nlength">1</Col>
          </Row>
          <Row>
            <Col id="compId">ds_atmcJrnlzTy</Col>
            <Col id="colId">GNRL_DEBTOR_ACNT_CODE</Col>
            <Col id="notNull">Y</Col>
            <Col id="msgId">[일반차변]회계계정코드</Col>
          </Row>
          <Row>
            <Col id="compId">ds_atmcJrnlzTy</Col>
            <Col id="colId">GNRL_CRDIT_ACNT_CODE</Col>
            <Col id="notNull">Y</Col>
            <Col id="msgId">[일반대변]회계계정코드</Col>
          </Row>
          <Row>
            <Col id="compId">ds_atmcJrnlzTy</Col>
            <Col id="colId">SETOFF_DEBTOR_ACNT_CODE</Col>
            <Col id="notNull">Y</Col>
            <Col id="msgId">[상계차변]회계계정코드</Col>
          </Row>
          <Row>
            <Col id="compId">ds_atmcJrnlzTy</Col>
            <Col id="colId">SETOFF_CRDIT_ACNT_CODE</Col>
            <Col id="notNull">Y</Col>
            <Col id="msgId">[상계대변]회계계정코드</Col>
          </Row>
          <Row>
            <Col id="compId">ds_bukipInfoList</Col>
            <Col id="colId">YEAR</Col>
            <Col id="msgId">예산년도111</Col>
            <Col id="PK">Y</Col>
            <Col id="notNull">Y</Col>
            <Col id="nlength">4</Col>
            <Col id="lengthChkGb"/>
            <Col id="type"/>
            <Col id="from"/>
            <Col id="to"/>
            <Col id="expr"/>
            <Col id="func"/>
          </Row>
          <Row>
            <Col id="compId">ds_bukipInfoList</Col>
            <Col id="colId">BUDGET_ACNT_CODE</Col>
            <Col id="msgId">계정과목코드</Col>
            <Col id="PK">Y</Col>
            <Col id="notNull">Y</Col>
            <Col id="nlength">8</Col>
            <Col id="lengthChkGb"/>
            <Col id="type"/>
            <Col id="from"/>
            <Col id="to"/>
            <Col id="expr"/>
            <Col id="func"/>
          </Row>
          <Row>
            <Col id="compId">ds_bukipInfoList</Col>
            <Col id="colId">BUKIP_CODE</Col>
            <Col id="msgId">부기코드</Col>
            <Col id="PK">Y</Col>
            <Col id="notNull">Y</Col>
            <Col id="nlength"/>
          </Row>
          <Row>
            <Col id="compId">ds_bukipInfoList</Col>
            <Col id="colId">BUKIP_NM</Col>
            <Col id="msgId">부기명</Col>
            <Col id="notNull">Y</Col>
            <Col id="nlength">50</Col>
            <Col id="lengthChkGb">LE</Col>
          </Row>
        </Rows>
      </Dataset>
      <Dataset id="ds_atmcJrnlzTy" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="BUDGET_YEAR" type="STRING" size="4"/>
          <Column id="BSNS_SE" type="STRING" size="1"/>
          <Column id="BALC_SE" type="STRING" size="1"/>
          <Column id="BUDGET_ACNT_CODE" type="STRING" size="8"/>
          <Column id="SN" type="BIGDECIMAL" size="22"/>
          <Column id="GNRL_DEBTOR_ACNT_CODE" type="STRING" size="8"/>
          <Column id="GNRL_DEBTOR_ACNT_NM" type="STRING" size="100"/>
          <Column id="GNRL_CRDIT_ACNT_CODE" type="STRING" size="8"/>
          <Column id="GNRL_CRDIT_ACNT_NM" type="STRING" size="100"/>
          <Column id="SETOFF_DEBTOR_ACNT_CODE" type="STRING" size="8"/>
          <Column id="SETOFF_DEBTOR_ACNT_NM" type="STRING" size="100"/>
          <Column id="SETOFF_CRDIT_ACNT_CODE" type="STRING" size="8"/>
          <Column id="SETOFF_CRDIT_ACNT_NM" type="STRING" size="100"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_condSub" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false" oncolumnchanged="ds_cond_oncolumnchanged">
        <ColumnInfo>
          <Column id="YEAR" type="STRING" size="4"/>
          <Column id="BSNS_SE" type="STRING" size="1"/>
          <Column id="BALC_SE" type="STRING" size="1"/>
          <Column id="BUDGET_ACNT_CODE" type="STRING" size="256"/>
        </ColumnInfo>
        <Rows>
          <Row/>
        </Rows>
      </Dataset>
      <Dataset id="ds_useAcntCnt" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="RTN_MSG" type="STRING" size="256"/>
          <Column id="TOT_CNT" type="BIGDECIMAL" size="22"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_acntCodePop" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="YEAR" type="STRING" size="4"/>
          <Column id="BSNS_SE" type="STRING" size="1"/>
          <Column id="BALC_SE" type="STRING" size="1"/>
          <Column id="BUDGET_ACNT_CODE" type="STRING" size="8"/>
          <Column id="BUDGET_ACNT_NM" type="STRING" size="100"/>
          <Column id="BUDGET_ACNT_NM2" type="STRING" size="100"/>
          <Column id="ACNT_LEVEL" type="STRING" size="1"/>
          <Column id="UPPER_ACNT_CODE" type="STRING" size="8"/>
          <Column id="ELPD_EXCUT_RT" type="BIGDECIMAL" size="22"/>
          <Column id="ELPD_EXCUT_AT" type="STRING" size="1"/>
          <Column id="PLAN_REGIST_AT" type="STRING" size="1"/>
          <Column id="CHIT_PROCESS_AT" type="STRING" size="1"/>
          <Column id="COST_ACNT_CODE" type="STRING" size="8"/>
          <Column id="COST_ACNT_NM" type="STRING" size="256"/>
          <Column id="PARTN_ACNT_CODE" type="STRING" size="8"/>
          <Column id="PARTN_ACNT_NM" type="STRING" size="256"/>
          <Column id="GWAN" type="STRING" size="256"/>
          <Column id="HANG" type="STRING" size="256"/>
          <Column id="SEHANG" type="STRING" size="256"/>
          <Column id="MOK" type="STRING" size="256"/>
          <Column id="BUDGET_ACNT_CODE_NM" type="STRING" size="256"/>
          <Column id="JRNLZ_CNT" type="BIGDECIMAL" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_bukipInfoList" useclientlayout="true">
        <ColumnInfo>
          <Column id="YEAR" type="STRING" size="4"/>
          <Column id="BUDGET_ACNT_CODE" type="STRING" size="8"/>
          <Column id="BUKIP_CODE" type="STRING" size="8"/>
          <Column id="BUKIP_NM" type="STRING" size="100"/>
          <Column id="USE_AT" type="INT" size="1"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_com051" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="ETC1" type="string" size="32"/>
          <Column id="VAL2" type="string" size="32"/>
          <Column id="CODE_CN" type="string" size="32"/>
          <Column id="VAL1" type="string" size="32"/>
          <Column id="USE_YN" type="string" size="32"/>
          <Column id="ETC3" type="string" size="32"/>
          <Column id="VAL4" type="string" size="32"/>
          <Column id="ETC2" type="string" size="32"/>
          <Column id="VAL3" type="string" size="32"/>
          <Column id="CODE_ORDR" type="bigdecimal" size="16"/>
          <Column id="MSTK_VAL" type="string" size="32"/>
          <Column id="ALL_CODE_NM" type="string" size="32"/>
          <Column id="CODE_NM" type="string" size="32"/>
          <Column id="INT_VAL" type="string" size="32"/>
          <Column id="GRP_CODE" type="string" size="32"/>
          <Column id="CODE" type="string" size="32"/>
          <Column id="VAL0" type="string" size="32"/>
        </ColumnInfo>
      </Dataset>
    </Objects>
    <Bind>
      <BindItem id="item8" compid="div_search.rdo_BALC_SE" propid="value" datasetid="ds_cond" columnid="BALC_SE"/>
      <BindItem id="item9" compid="div_search.cbo_BSNS_SE" propid="value" datasetid="ds_cond" columnid="BSNS_SE"/>
      <BindItem id="item5" compid="rad_ACNT_LEVEL" propid="value" datasetid="ds_acntCode" columnid="ACNT_LEVEL"/>
      <BindItem id="item0" compid="cmb_BSNS_SE" propid="value" datasetid="ds_acntCode" columnid="BSNS_SE"/>
      <BindItem id="item1" compid="rad_BALC_SE" propid="value" datasetid="ds_acntCode" columnid="BALC_SE"/>
      <BindItem id="item3" compid="edt_BUDGET_ACNT_NM" propid="value" datasetid="ds_acntCode" columnid="BUDGET_ACNT_NM"/>
      <BindItem id="item20" compid="div_search.cmb_ACNT_CODE" propid="value" datasetid="ds_cond" columnid="BUDGET_ACNT_CODE"/>
      <BindItem id="item14" compid="div_search.spn_YEAR" propid="value" datasetid="ds_cond" columnid="YEAR"/>
      <BindItem id="item6" compid="msk_BUDGET_ACNT_CODE" propid="value" datasetid="ds_acntCode" columnid="BUDGET_ACNT_CODE"/>
      <BindItem id="item7" compid="msk_YEAR" propid="value" datasetid="ds_acntCode" columnid="YEAR"/>
      <BindItem id="item2" compid="msk_UPPER_ACNT_CODE" propid="value" datasetid="ds_acntCode" columnid="UPPER_ACNT_CODE"/>
      <BindItem id="item10" compid="cmb_UPPER_ACNT_CODE" propid="value" datasetid="ds_acntCode" columnid="UPPER_ACNT_CODE"/>
      <BindItem id="item11" compid="msk_elpdExcutTrgetRt" propid="value" datasetid="ds_acntCode" columnid="ELPD_EXCUT_TRGET_RT"/>
      <BindItem id="item12" compid="msk_elpdExcutRt" propid="value" datasetid="ds_acntCode" columnid="ELPD_EXCUT_RT"/>
      <BindItem id="item4" compid="rad_elpdExcutAt" propid="value" datasetid="ds_acntCode" columnid="ELPD_EXCUT_AT"/>
    </Bind>
    <Script type="xscript5.0"><![CDATA[/**********************************************************************
* 화면ID   : BDG010102.xfdl
* 화면명   : 예산계정코드
* 화면설명 : 예산계정코드를 관리한다
* 작성일   : 2015.07.07
* 작성자   : 정윤원
* 수정이력 : 
***********************************************************************
*     수정일     수정자   내용
***********************************************************************
*   2017.03.22    김형태
***********************************************************************
*/


/**********************************************************************
* Script Include 
***********************************************************************/
// 시스템 공통 라이브러리 Include
include "lib::comInclude.xjs";
include "mis_lib::misUtil.xjs";


/**********************************************************************
* 화면 변수 선언부
***********************************************************************/
this.checkDs = [
	 this.ds_acntCode
	,this.ds_atmcJrnlzTy
	,this.ds_bukipInfoList
];

var saveRow = -1;

this.fv_cX;
this.fv_cY;


/**********************************************************************
* onInit / onLoad 영역
***********************************************************************/

this.BDG010102_oninit = function(obj:Form, e:nexacro.InitEventInfo)
{
	// form 초기화
	this.fn_init_form();

	// dataset 초기화
	this.fn_init_dataset();
}

this.BDG010102_onload = function(obj:Form, e:nexacro.LoadEventInfo)
{
	// ..
}



/**********************************************************************
* Form/Dataset 오브젝트 초기화
***********************************************************************/

/*
 * 함수명  	: initForm
 * 설명 		: Form을 초기화한다.
 * params  		: None
 * return Type 	: None
 * 사용법		: this.initForm();
 */
this.fn_init_form = function()
{
	this.gfn_initForm(this);
	this.fn_misFormInit(this);
	
	// 초기 검색조건
	this.ds_cond.clearData();
	var nRow = this.ds_cond.addRow();
 	this.ds_cond.setColumn(nRow, "YEAR", this.comUtils.getClientDate("YYYY"));	// 당해년도
	
	// 공통코드
	var comboParams = [
		["ds_bdg001", "BDG001", "Y", "D", "B"]	// ds_bdg001 : 사업구분
	   ,["ds_bdg002", "BDG002", "Y", "D", "B"]	// ds_bdg002 : 수지구분
	   ,["ds_bdg005", "BDG005", "Y", "D", "B"]	// ds_bdg005 : 계정레벨
	   ,["ds_com051", "COM051", "Y", "D", "B"]	// ds_com051 : YN
	];
	var callback = function (svcId, errorCode, errorMsg) {
		// 공통코드와 연계된 초기검색조건 설정
		this.ds_cond.setColumn(nRow, "BSNS_SE", "1");	// (사업구분) 1:사업예산, 2:자본예산, 3:자금운용
		this.ds_cond.setColumn(nRow, "BALC_SE", "2");	// (수지구분) 1:수입, 2:지출
		this.fn_search();	//  최초조회
	};
	this.gfn_comboLoad (comboParams, callback);
}


/*
 * 함수명  	: initDataset
 * 설명 		: Dataset을 초기화한다
 * params  		: None
 * return Type 	: None
 * 사용법		: this.initDataset();
 */
this.fn_init_dataset = function()
{
	// 조건 Dataset 외에 초기화가 필요한 Dataset에 대한 초기화 코드를 추가
}



/**********************************************************************
* Transaction 영역 시작
***********************************************************************
*
* 1. Transaction 관련 이벤트 핸들러
* 2. call Transaction 영역
* 3. callback 영역(Transaction, Popup)
* 
***********************************************************************/



/**********************************************************************
* Transaction 관련 이벤트 핸들러 
***********************************************************************/

/*
 * 함수명  	: fn_search
 * 설명 		: 조회 이벤트 처리(예산계정코드)
 * params  		: None
 * return Type 	: None
 * 사용법		: this.fn_search();
 */
this.fn_search = function()
{
	// validation 체크(예산계정코드)
	if(!this.gfn_checkValidation_NoUpdChk(this.ds_cond, this.ds_validation)) {
		return;
	}
	
	// clear Datasets
	this.ds_acntCode.clearData();
	
	// transaction
	this.fn_transaction("selectBudgetAcntCode");
}


/*
 * 함수명  	: fn_search_sub
 * 설명 		: 조회 이벤트 처리(자동분개유형)
 * params  		: None
 * return Type 	: None
 * 사용법		: this.fn_search_sub();
 */
this.fn_search_sub = function()
{
	if(this.tab.tabindex == 0){
		// clear Datasets
		this.ds_atmcJrnlzTy.clearData();
		
		// transaction
		if(this.ds_acntCode.getRowCount() > 0) {
			this.fn_transaction("selectAtmcJrnlzTy");
		}
	}
	else if(this.tab.tabindex == 1){
		// clear Datasets
		this.ds_bukipInfoList.clearData();
		
		// transaction
		if(this.ds_acntCode.getRowCount() > 0) {
			this.fn_transaction("selectBukipList");
		}
	}
}


/*
 * 함수명  	: fn_save
 * 설명 		: 저장 이벤트 처리(예산계정코드)
 * params  		: None
 * return Type 	: None
 * 사용법		: this.fn_save();
 */
this.fn_save = function()
{
	// 데이터셋 수정 여부체크
	if (!this.comUtils.isDatasetUpdated(this.ds_acntCode) && !this.comUtils.isDatasetUpdated(this.ds_atmcJrnlzTy) && !this.comUtils.isDatasetUpdated(this.ds_bukipInfoList)) {
		this.gfn_message("comm.데이터.변경.없음");
		return false;
	}
	
	// validation 체크(예산계정코드)
	if(!this.gfn_checkValidation_NoUpdChk(this.ds_acntCode, this.ds_validation)) {
		return;
	}
	
	// validation 체크(부기코드)
	if(!this.gfn_checkValidation_NoUpdChk(this.ds_bukipInfoList, this.ds_validation)) {
		return;
	}
	
	var gDebAcntLength = 0;
	var gCrdAcntLength = 0;
	var sDebAcntLength = 0;
	var sCrdAcntLength = 0;
	var msgCt = "";

	for(var i=0; i<this.ds_atmcJrnlzTy.rowcount; i++) {
		(null == this.ds_atmcJrnlzTy.getColumn(i, "GNRL_DEBTOR_ACNT_CODE"  ))?gDebAcntLength=0:gDebAcntLength=this.ds_atmcJrnlzTy.getColumn(i, "GNRL_DEBTOR_ACNT_CODE").length;
		(null == this.ds_atmcJrnlzTy.getColumn(i, "GNRL_CRDIT_ACNT_CODE"   ))?gCrdAcntLength=0:gCrdAcntLength=this.ds_atmcJrnlzTy.getColumn(i, "GNRL_CRDIT_ACNT_CODE").length;
		(null == this.ds_atmcJrnlzTy.getColumn(i, "SETOFF_DEBTOR_ACNT_CODE"))?sDebAcntLength=0:sDebAcntLength=this.ds_atmcJrnlzTy.getColumn(i, "SETOFF_DEBTOR_ACNT_CODE").length;
		(null == this.ds_atmcJrnlzTy.getColumn(i, "SETOFF_CRDIT_ACNT_CODE" ))?sCrdAcntLength=0:sCrdAcntLength=this.ds_atmcJrnlzTy.getColumn(i, "SETOFF_CRDIT_ACNT_CODE").length;
		
		trace("상 차 : " + gDebAcntLength);
		trace("상 대 : " + gCrdAcntLength);
		trace("하 차 : " + sDebAcntLength);
		trace("하 대 : " + sCrdAcntLength);
		trace("=======================");

		if(gDebAcntLength != gCrdAcntLength) {
			(gDebAcntLength>gCrdAcntLength)?msgCt="[일반대변]회계계정코드":msgCt="[일반차변]회계계정코드";
			this.gfn_message("comm.항목.입력.을", msgCt);
			return;
		}
		
		if(sDebAcntLength != sCrdAcntLength) {
			(sDebAcntLength>sCrdAcntLength)?msgCt="[상계대변]회계계정코드":msgCt="[상계차변]회계계정코드";
			this.gfn_message("comm.항목.입력.을", msgCt);
			return;
		}
	}

/*
	// validation 체크(자동분개유형)
	if(!this.gfn_checkValidation_NoUpdChk(this.ds_atmcJrnlzTy, this.ds_validation)) {
		return;
	}
*/
	
	for(var fRow = 0; fRow < this.ds_acntCode.getRowCount(); fRow++) {
		var acntCode = this.ds_acntCode.getColumn(fRow, "BUDGET_ACNT_CODE");
		var acntNm = this.ds_acntCode.getColumn(fRow, "BUDGET_ACNT_NM");
		if(this.ds_acntCode.getRowType(fRow) != Dataset.ROWTYPE_NORMAL) {
			if(acntCode.indexOf(" ") > -1) {
				this.gfn_message("errors.항목.타입.숫자형", "예산계정코드");
				return false;
			}
		}
	}
	
	if(this.gfn_message("confirm.저장.여부")) {
		saveRow = this.ds_acntCode.rowposition;
		this.fn_transaction("saveBudgetAcntCode");
	}
}



/**********************************************************************
* call Transaction 영역
***********************************************************************/

/*
 * 함수명  	: fn_transaction
 * 설명 		: Transaction 요청 처리 함수
 * params  		: strSvcId : 서비스요청 ID
 * return Type 	: None
 * 사용법		: this.fn_transaction("SELECT");
 */
this.fn_transaction = function(strSvcId)
{
	switch (strSvcId) {
		case "selectBudgetAcntCode":	// 예산계정코드 조회
			var sController   	= "/hsco/mis/bdg/BDG010102/selectBudgetAcntCode.do";
			var sInDatasets   	= "input1=ds_cond";
			var sOutDatasets  	= "ds_acntCode=output1";
			break;
		case "selectAtmcJrnlzTy":		// 자동분개유형 조회
			var acRow    = this.ds_acntCode.rowposition;
			var year     = this.ds_acntCode.getColumn(acRow, "YEAR");
			var bsnsSe   = this.ds_acntCode.getColumn(acRow, "BSNS_SE");
			var balcSe   = this.ds_acntCode.getColumn(acRow, "BALC_SE");
			var acntCode = this.ds_acntCode.getColumn(acRow, "BUDGET_ACNT_CODE");
			
			this.ds_condSub.clearData();
			var nRow = this.ds_condSub.addRow();
			this.ds_condSub.setColumn(nRow, "YEAR",             year    );
			this.ds_condSub.setColumn(nRow, "BSNS_SE",          bsnsSe  );
			this.ds_condSub.setColumn(nRow, "BALC_SE",          balcSe  );
			this.ds_condSub.setColumn(nRow, "BUDGET_ACNT_CODE", acntCode);
			
			var sController   	= "/hsco/mis/bdg/BDG010102/selectAtmcJrnlzTy.do";
			var sInDatasets   	= "input1=ds_condSub";
			var sOutDatasets  	= "ds_atmcJrnlzTy=output1";
			break;
		case "selectBukipList":		// 부기리스트 조회
			var acRow    = this.ds_acntCode.rowposition;
			var year     = this.ds_acntCode.getColumn(acRow, "YEAR");
			var acntCode = this.ds_acntCode.getColumn(acRow, "BUDGET_ACNT_CODE");
			
			this.ds_condSub.clearData();
			var nRow = this.ds_condSub.addRow();
			this.ds_condSub.setColumn(nRow, "YEAR",             year    );
			this.ds_condSub.setColumn(nRow, "BUDGET_ACNT_CODE", acntCode);
			
			var sController   	= "/hsco/mis/bdg/BDG010102/selectBukipList.do";
			var sInDatasets   	= "input1=ds_condSub";
			var sOutDatasets  	= "ds_bukipInfoList=output1";
			break;
		case "saveBudgetAcntCode":		// 저장
			var sController   	= "hsco/mis/bdg/BDG010102/saveBudgetAcntCode.do";
			var sInDatasets   	= "input1=ds_acntCode:U input2=ds_atmcJrnlzTy:U input3=ds_bukipInfoList:U";
			var sOutDatasets  	= "";
			break;
		case "saveCopyPrvYear":			// 전년도복사(예산계정)
			var sController   	= "hsco/mis/bdg/BDG010102/saveCopyPrvYear.do";
			var sInDatasets   	= "input1=ds_cond";
			var sOutDatasets  	= "";
			break;
		case "saveCopyPrvYearJrnlzTy":	// 전년도복사(자동분개유형)
			var sController   	= "hsco/mis/bdg/BDG010102/saveCopyPrvYearJrnlzTy.do";
			var sInDatasets   	= "input1=ds_cond";
			var sOutDatasets  	= "";
			break;
		case "saveCopyPrvYearBukip":	// 전년도복사(부기정보)
			var sController   	= "hsco/mis/bdg/BDG010102/saveCopyPrvYearBukip.do";
			var sInDatasets   	= "input1=ds_cond";
			var sOutDatasets  	= "";
			break;
		case "selectUseAcntCnt":		// 현 예산계정을 사용하고 있는 테이블을 탐색
			var acRow    = this.ds_acntCode.rowposition;
			var year     = this.ds_acntCode.getColumn(acRow, "YEAR");
			var bsnsSe   = this.ds_acntCode.getColumn(acRow, "BSNS_SE");
			var balcSe   = this.ds_acntCode.getColumn(acRow, "BALC_SE");
			var acntCode = this.ds_acntCode.getColumn(acRow, "BUDGET_ACNT_CODE");
			
			this.ds_condSub.clearData();
			var nRow = this.ds_condSub.addRow();
			this.ds_condSub.setColumn(nRow, "YEAR",             year    );
			this.ds_condSub.setColumn(nRow, "BSNS_SE",          bsnsSe  );
			this.ds_condSub.setColumn(nRow, "BALC_SE",          balcSe  );
			this.ds_condSub.setColumn(nRow, "BUDGET_ACNT_CODE", acntCode);
			
			var sController   	= "/hsco/mis/bdg/BDG010102/selectUseAcntCnt.do";
			var sInDatasets   	= "input1=ds_condSub";
			var sOutDatasets  	= "ds_useAcntCnt=output1";
			break;
		
		case "selectUseYearCnt":		// 현 연도를 사용하고 있는 테이블을 탐색
			var year = this.ds_cond.getColumn(0, "YEAR");
			this.ds_condSub.clearData();
			var nRow = this.ds_condSub.addRow();
			this.ds_condSub.setColumn(nRow, "YEAR", year);
			
			var sController   	= "/hsco/mis/bdg/BDG010102/selectUseYearCnt.do";
			var sInDatasets   	= "input1=ds_condSub";
			var sOutDatasets  	= "ds_useAcntCnt=output1";
			break;
	}

	Ex.core.tran(this, strSvcId, sController, sInDatasets, sOutDatasets); 
}



/**********************************************************************
* Transaction Callback 영역
***********************************************************************/

 /*
 * 함수명  	: fn_callBack
 * 설명 		: Transaction Callback 처리
 * params  		: strSvcId    : 서비스요청 ID
 *                nErrorCode  : 오류 메시지 코드 ([예] 0 : Success, 그밖의 경우, error)
 *                strErrorMsg : 오류 메시지([예]  success.insert|정상적으로 등록되었습니다.)
 * return Type 	: None
 * 사용법		: 
 */
this.fn_callBack = function (strSvcId, nErrorCode, strErrorMsg)
{
	if(nErrorCode != '0') {
		this.gfn_callback_message(strSvcId, nErrorCode, strErrorMsg);
	}
	
	if (nErrorCode == '0'){
		switch (strSvcId) {
			
			case "selectBudgetAcntCode":	// 조회
				// 상위계정코드 bind 데이터 설정
				this.ds_uppAcntCode.clearData();
				this.ds_uppAcntCode.set_enableevent(false);
				for(var fRow = 0; fRow < this.ds_acntCode.getRowCount(); fRow++) {
					var acntCode   = this.ds_acntCode.getColumn(fRow, "BUDGET_ACNT_CODE");
					var acntNm     = this.ds_acntCode.getColumn(fRow, "BUDGET_ACNT_NM");
					var acntCodeNm = this.ds_acntCode.getColumn(fRow, "BUDGET_ACNT_CODE_NM");
					
					var nRow = this.ds_uppAcntCode.addRow();
					this.ds_uppAcntCode.setColumn(nRow, "BUDGET_ACNT_CODE",    acntCode  );
					this.ds_uppAcntCode.setColumn(nRow, "BUDGET_ACNT_NM",      acntNm    );
					this.ds_uppAcntCode.setColumn(nRow, "BUDGET_ACNT_CODE_NM", acntCodeNm);
				}
				this.ds_uppAcntCode.set_enableevent(true);
				
				if(saveRow > -1) {
					this.ds_acntCode.set_rowposition(saveRow);
					saveRow = -1;
				}
				
				//if(this.ds_acntCode.getRowCount() == 0) {
				//	this.gfn_message("info.데이터.없음");
				//}
				break;
			case "selectAtmcJrnlzTy":		// 자동분개유형 조회
				break;
			case "selectBukipList":			// 부기코드리스트 조회
				break;
			case "saveBudgetAcntCode":		// 저장
				this.gfn_message("success.처리.성공");
				this.fn_search();
				break;
			
			case "saveCopyPrvYear":			// 전년도복사
				this.gfn_message("success.처리.성공");
				this.fn_search();
				break;
			
			case "selectUseAcntCnt":		// 삭제 조건
				var rtnMsg = this.ds_useAcntCnt.getColumn(0, "RTN_MSG");
				var totCnt = nexacro.toNumber(this.ds_useAcntCnt.getColumn(0, "TOT_CNT"));
				if(totCnt > 0) {
					alert("현 계정을 사용하는 <" + rtnMsg + ">를 삭제하신 후에 삭제 진행 가능합니다.")
					return false;
				}
				
				if(!this.gfn_message("confirm.삭제여부")) {
					return false;	// 아니오
				}
				this.ds_acntCode.deleteRow(this.ds_acntCode.rowposition);
				break;
				
			case "selectUseYearCnt":		// 전년도복사 조건
				var rtnMsg = this.ds_useAcntCnt.getColumn(0, "RTN_MSG");
				var totCnt = nexacro.toNumber(this.ds_useAcntCnt.getColumn(0, "TOT_CNT"));
				var year   = this.ds_cond.getColumn(0, "YEAR");
				var bYear  = parseInt(year) - 1;
				if(totCnt > 0) {
					alert(year + "년 계정을 사용하는 <" + rtnMsg + ">를 삭제하신 후에 전년도복사 진행 가능합니다.")
					return false;
				}
				
				if(this.gfn_message("confirm.복사.여부", "(자동저장) " + bYear + "년 예산계정|" + year + "년 예산계정으")) {
					this.fn_transaction("saveCopyPrvYear");
				}
				
				break;
				
			case "saveCopyPrvYearJrnlzTy":	// 전년도복사(자동분개유형)
				alert("전년도 자동분개유형이 복사 되었습니다.");
				this.fn_search();
			break;
			case "saveCopyPrvYearBukip":	// 전년도복사(부기정보)
				alert("전년도 부기정보가 복사 되었습니다.");
				this.fn_search();
			break;
		}
	}
}


/*
 * 함수명  	: fn_popupCallBack
 * 설명 		: Popup Callback 처리
 * params  		: sPopupId : 팝업 ID
 *                sReturn  : 팝업 처리 결과(dataset.saveXML())
 * return Type 	: None
 * 사용법		: 
 */
this.fn_popupCallBack = function(sPopupId, sReturn)
{
	if(sPopupId == "GNRL_DEBTOR_ACNT_CODE" || sPopupId == "GNRL_CRDIT_ACNT_CODE" || sPopupId == "SETOFF_DEBTOR_ACNT_CODE" || sPopupId == "SETOFF_CRDIT_ACNT_CODE") {
		var dsRtn = new Dataset();
		nRowCnt = dsRtn.loadXML(sReturn);
		if(nRowCnt){
			var acntCode = dsRtn.getColumn(0, "ACCNUT_ACNT_CODE");
			var acntNm   = dsRtn.getColumn(0, "ACCNUT_ACNT_NM");
			var ajRow    = this.ds_atmcJrnlzTy.rowposition;
			switch(sPopupId) {
				case "GNRL_DEBTOR_ACNT_CODE":		// 일반차변
					this.ds_atmcJrnlzTy.setColumn(ajRow, "GNRL_DEBTOR_ACNT_CODE",   acntCode);
					this.ds_atmcJrnlzTy.setColumn(ajRow, "GNRL_DEBTOR_ACNT_NM",     acntNm);
					break;
				case "GNRL_CRDIT_ACNT_CODE":		// 일반대변
					this.ds_atmcJrnlzTy.setColumn(ajRow, "GNRL_CRDIT_ACNT_CODE",    acntCode);
					this.ds_atmcJrnlzTy.setColumn(ajRow, "GNRL_CRDIT_ACNT_NM",      acntNm);
					break;
				case "SETOFF_DEBTOR_ACNT_CODE":		// 상계차변
					this.ds_atmcJrnlzTy.setColumn(ajRow, "SETOFF_DEBTOR_ACNT_CODE", acntCode);
					this.ds_atmcJrnlzTy.setColumn(ajRow, "SETOFF_DEBTOR_ACNT_NM",   acntNm);
					break;
				case "SETOFF_CRDIT_ACNT_CODE":		// 상계대변
					this.ds_atmcJrnlzTy.setColumn(ajRow, "SETOFF_CRDIT_ACNT_CODE",  acntCode);
					this.ds_atmcJrnlzTy.setColumn(ajRow, "SETOFF_CRDIT_ACNT_NM",    acntNm);
					break;
				default:
					break;
			}
		}
	}
	
	if(sPopupId == "bukipListP") {
		var dsBukip = new Dataset();
		var loadCnt = dsBukip.loadXML(sReturn);
		if(loadCnt) {
			var bukipCode = dsBukip.getColumn(0, "BUKIP_CODE");
			var bukipNm   = dsBukip.getColumn(0, "BUKIP_NM");
			
			var bilRow = this.ds_bukipInfoList.rowposition;
			this.ds_bukipInfoList.setColumn(bilRow, "BUKIP_CODE", bukipCode);
			this.ds_bukipInfoList.setColumn(bilRow, "BUKIP_NM"  , bukipNm);
		}
	}
}



/**********************************************************************
* Transaction 영역 끝
***********************************************************************/



/**********************************************************************
* non-Transaction 관련 컴포넌트 이벤트 처리 함수
***********************************************************************
*
* 1. Dataset 관련 이벤트 처리
* 2. Button 관련 이벤트 처리
* 3. Grid 관련 이벤트 처리
* 4. 공통함수 처리
* 5. Object 관련 이벤트 처리
* 
***********************************************************************/



/**********************************************************************
* Dataset 관련 이벤트 처리
***********************************************************************/

/*
 * 함수명  	: ds_cond_oncolumnchanged
 * 설명 		: Dataset 데이터 변경 후 이벤트 처리(검색조건 dataset)
 * params  		: None
 * return Type 	: None
 * 사용법		: this.ds_cond_oncolumnchanged(obj,e);
 */
this.ds_cond_oncolumnchanged = function(obj:Dataset, e:nexacro.DSColChangeEventInfo)
{
	if(e.columnid == "BUDGET_ACNT_CODE") {
		if(!this.comUtils.isNull(e.newvalue)) {
			var findRow = this.ds_acntCode.findRow(e.columnid, e.newvalue);
			if(findRow > -1) {
				this.ds_acntCode.set_rowposition(findRow);
			}
		}
	}
}


/*
 * 함수명  	: ds_acntCode_canrowposchange
 * 설명 		: Dataset 행 변경 전 이벤트 처리(예산계정코드 dataset)
 * params  		: None
 * return Type 	: None
 * 사용법		: this.ds_acntCode_canrowposchange(obj,e);
 */
this.ds_acntCode_canrowposchange = function(obj:Dataset, e:nexacro.DSRowPosChangeEventInfo)
{
	if(Ex.util.isUpdated(this.ds_atmcJrnlzTy)) {
		if(!this.gfn_message("confirm.변경.취소.여부")) {
			return false;	// 아니오
		}
	}
}


/*
 * 함수명  	: ds_acntCode_onrowposchanged
 * 설명 		: Dataset 행 변경 후 이벤트 처리(예산계정코드 dataset)
 * params  		: None
 * return Type 	: None
 * 사용법		: this.ds_acntCode_onrowposchanged(obj,e);
 */
this.ds_acntCode_onrowposchanged = function(obj:Dataset, e:nexacro.DSRowPosChangeEventInfo)
{
	this.div_pop.set_visible(false);
	
	// 예산계정코드
	if(obj.getRowType(e.newrow) == Dataset.ROWTYPE_INSERT) {
		this.msk_BUDGET_ACNT_CODE.set_readonly(false);
		this.msk_BUDGET_ACNT_CODE.style.set_cursor("text");
	} else {
		this.msk_BUDGET_ACNT_CODE.set_readonly(true);
		this.msk_BUDGET_ACNT_CODE.style.set_cursor("default");
	}
	
	// 검색조건 연결
	this.ds_cond.set_enableevent(false);
	var acntCode    = obj.getColumn(e.newrow, "BUDGET_ACNT_CODE");
	var leaf        = obj.getColumn(e.newrow, "LEAF");
	var acntLevel   = obj.getColumn(e.newrow, "ACNT_LEVEL");
	var elpdExcutAt = obj.getColumn(e.newrow, "ELPD_EXCUT_AT");
	this.ds_cond.setColumn(0, "BUDGET_ACNT_CODE", acntCode);
	this.ds_cond.set_enableevent(true);
	
	if(acntLevel == '5') {
		if(elpdExcutAt == '1') {
			this.msk_elpdExcutTrgetRt.set_cssclass("");
			this.msk_elpdExcutTrgetRt.set_readonly(false);
			this.msk_elpdExcutRt.set_cssclass("");
			this.msk_elpdExcutRt.set_readonly(false);
		}
		else {
			this.msk_elpdExcutTrgetRt.set_cssclass("msk_WF_Readonly");
			this.msk_elpdExcutTrgetRt.set_readonly(true);
			this.msk_elpdExcutRt.set_cssclass("msk_WF_Readonly");
			this.msk_elpdExcutRt.set_readonly(true);
		}
		this.rad_elpdExcutAt.set_enable(true);
	}
	else {
		this.rad_elpdExcutAt.set_enable(false);
		this.msk_elpdExcutTrgetRt.set_cssclass("msk_WF_Readonly");
		this.msk_elpdExcutTrgetRt.set_readonly(true);
		this.msk_elpdExcutRt.set_cssclass("msk_WF_Readonly");
		this.msk_elpdExcutRt.set_readonly(true);
	}
	
	if(this.tab.tabindex == 0){
		// 자동분개유형 버튼 관련
		this.tab.tabpage1.btn_Add.set_enable(false);
		this.tab.tabpage1.btn_Delete.set_enable(false);
		this.tab.tabpage1.btn_Cancel.set_enable(false);
		var year = obj.getColumn(e.newrow, "YEAR")
		if((year >= '2016' && acntLevel == 5) || (year < '2016' && acntLevel == 4)) {
			this.tab.tabpage1.btn_Add.set_enable(true);
			this.tab.tabpage1.btn_Delete.set_enable(true);
			this.tab.tabpage1.btn_Cancel.set_enable(true);
		}
	}
	else if(this.tab.tabindex == 1){
		// 선택된 예산계정이 최하위 레벨이고 목, 세항일 때
		if(leaf == '1' && (acntLevel == '4' || acntLevel == '5')) {
			this.tab.tabpage2.btn_Add.set_enable(true);
			this.tab.tabpage2.btn_Delete.set_enable(true);
			this.tab.tabpage2.btn_Cancel.set_enable(true);
		}
		else {
			this.tab.tabpage2.btn_Add.set_enable(false);
			this.tab.tabpage2.btn_Delete.set_enable(false);
			this.tab.tabpage2.btn_Cancel.set_enable(false);
		}
	}
	
	// 서브 조회(자동분개유형, 부기코드리스트)
	this.fn_search_sub();
}


/*
 * 함수명  	: ds_acntCode_cancolumnchange
 * 설명 		: Dataset 데이터 변경 전 이벤트 처리(예산계정코드 dataset)
 * params  		: None
 * return Type 	: None
 * 사용법		: this.ds_acntCode_cancolumnchange(obj,e);
 */
this.ds_acntCode_cancolumnchange = function(obj:Dataset, e:nexacro.DSColChangeEventInfo)
{
	if(e.columnid == "ELPD_EXCUT_AT") {
		if(e.newvalue != "1") {
			this.ds_acntCode.setColumn(e.row, "ELPD_EXCUT_RT"      , "");		// 조기집행여부 초기화
			this.ds_acntCode.setColumn(e.row, "ELPD_EXCUT_TRGET_RT", "");		// 조기집행여부 초기화
		}
	}
	
	if(e.columnid == "ELPD_EXCUT_RT") {
		if(e.newvalue > 100) {
			this.gfn_message("errors.항목.입력값.이하", "조기집행률|100%");
			return false;
		}
	}
	
	if(e.columnid == "ELPD_EXCUT_TRGET_RT") {
		if(e.newvalue > 100) {
			this.gfn_message("errors.항목.입력값.이하", "조기집행대상|100%");
			return false;
		}
	}
	
	if(e.columnid == "BUDGET_ACNT_CODE") {
		var findRow1 = obj.findRowExpr("BUDGET_ACNT_CODE=='" + e.newvalue + "'", 0, e.row);
		var findRow2 = obj.findRowExpr("BUDGET_ACNT_CODE=='" + e.newvalue + "'", e.row+1, obj.rowcount);
		if(findRow1 > -1 || findRow2 > -1) {
			this.gfn_message("info.항목.중복","예산계정코드")
			obj.set_updatecontrol(false);
			obj.setColumn(e.row, e.columnid, e.oldvalue);
			obj.set_updatecontrol(true);
			return false;
		}
	}
}


/*
 * 함수명  	: ds_acntCode_oncolumnchanged
 * 설명 		: Dataset 데이터 변경 후 이벤트 처리(예산계정코드 dataset)
 * params  		: None
 * return Type 	: None
 * 사용법		: this.ds_acntCode_oncolumnchanged(obj,e);
 */
this.ds_acntCode_oncolumnchanged = function(obj:Dataset, e:nexacro.DSColChangeEventInfo)
{
	if(e.columnid == "BUDGET_ACNT_CODE") {
		if(!this.comUtils.isNull(e.newvalue)) {
			if(e.newvalue.indexOf(" ") > -1) {
				this.gfn_message("errors.항목.타입.숫자형", "예산계정코드");
				obj.setColumn(e.row, e.columnid, e.oldvalue);
			}
		}
	}
	
	if(e.columnid == "ELPD_EXCUT_AT") {
		if(e.newvalue == '1') {
			this.msk_elpdExcutTrgetRt.set_cssclass("");
			this.msk_elpdExcutTrgetRt.set_readonly(false);
			this.msk_elpdExcutRt.set_cssclass("");
			this.msk_elpdExcutRt.set_readonly(false);
		}
		else {
			this.msk_elpdExcutTrgetRt.set_cssclass("msk_WF_Readonly");
			this.msk_elpdExcutTrgetRt.set_readonly(true);
			this.msk_elpdExcutRt.set_cssclass("msk_WF_Readonly");
			this.msk_elpdExcutRt.set_readonly(true);
		}
	}
}



/**********************************************************************
* Button 관련 이벤트 처리
***********************************************************************/

/*
 * 함수명  	: btn_copy_onclick
 * 설명 		: '전년도복사' 버튼 클릭 후 이벤트 처리
 * params  		: None
 * return Type 	: None
 * 사용법		: this.btn_copy_onclick(obj,e);
 */
this.btn_copy_onclick = function(obj:Button,  e:nexacro.ClickEventInfo)
{
	this.fn_transaction("selectUseYearCnt");
}


/*
 * 함수명  	: btn_copyAtmcJrnlzTy_onclick
 * 설명 		: '전년도복사' 버튼 클릭 후 이벤트 처리(자동분개유형)
 * params  		: None
 * return Type 	: None
 * 사용법		: this.btn_copyAtmcJrnlzTy_onclick(obj,e);
 */
this.btn_copyAtmcJrnlzTy_onclick = function(obj:Button,  e:nexacro.ClickEventInfo)
{
	if(this.gfn_message("confirm.복사.여부", "(자동저장) 전년 자동분개유형|당해 자동분개유형")) {
		this.fn_transaction("saveCopyPrvYearJrnlzTy");
	}
}


/*
 * 함수명  	: btn_Add_onclick
 * 설명 		: '행추가' 버튼 클릭 후 이벤트 처리(자동분개유형 Grid)
 * params  		: None
 * return Type 	: None
 * 사용법		: this.btn_Add_onclick(obj,e);
 */
this.btn_Add_onclick = function(obj:Button,  e:nexacro.ClickEventInfo)
{
	var acRow    = this.ds_acntCode.rowposition;
	var year     = this.ds_acntCode.getColumn(acRow, "YEAR");
	var bsnsSe   = this.ds_acntCode.getColumn(acRow, "BSNS_SE");
	var balcSe   = this.ds_acntCode.getColumn(acRow, "BALC_SE");
	var acntCode = this.ds_acntCode.getColumn(acRow, "BUDGET_ACNT_CODE");
	
	if(this.tab.tabindex == 0){
		var nRow = this.ds_atmcJrnlzTy.addRow();
		this.ds_atmcJrnlzTy.setColumn(nRow, "BUDGET_YEAR",      year     );
		this.ds_atmcJrnlzTy.setColumn(nRow, "BSNS_SE",          bsnsSe   );
		this.ds_atmcJrnlzTy.setColumn(nRow, "BALC_SE",          balcSe   );
		this.ds_atmcJrnlzTy.setColumn(nRow, "BUDGET_ACNT_CODE", acntCode );
	}
	else if(this.tab.tabindex == 1){
		var nRow = this.ds_bukipInfoList.addRow();
		this.ds_bukipInfoList.setColumn(nRow, "YEAR",             year     );
		this.ds_bukipInfoList.setColumn(nRow, "BUDGET_ACNT_CODE", acntCode );
	}
}


/*
 * 함수명  	: btn_Delete_onclick
 * 설명 		: '행삭제' 버튼 클릭 후 이벤트 처리(자동분개유형 Grid)
 * params  		: None
 * return Type 	: None
 * 사용법		: this.btn_Delete_onclick(obj,e);
 */
this.btn_Delete_onclick = function(obj:Button,  e:nexacro.ClickEventInfo)
{
	if(!this.gfn_message("confirm.삭제여부")) {
		return false;	// 아니오
	}
	
	if(this.tab.tabindex == 0){
		this.ds_atmcJrnlzTy.deleteRow(this.ds_atmcJrnlzTy.rowposition);
	}
	else if(this.tab.tabindex == 1){
		this.ds_bukipInfoList.deleteRow(this.ds_bukipInfoList.rowposition);
	}
}


/*
 * 함수명  	: btn_Cancel_onclick
 * 설명 		: '취소' 버튼 클릭 후 이벤트 처리(자동분개유형 Grid)
 * params  		: None
 * return Type 	: None
 * 사용법		: this.btn_Cancel_onclick(obj,e);
 */
this.btn_Cancel_onclick = function(obj:Button,  e:nexacro.ClickEventInfo)
{
	if(Ex.util.isUpdated(this.ds_atmcJrnlzTy) || Ex.util.isUpdated(this.ds_bukipInfoList)) {
		if(!this.gfn_message("confirm.변경.취소.여부")) {
			return false;	// 아니오
		}
	}
	
	if(this.tab.tabindex == 0){
		this.ds_atmcJrnlzTy.reset();
	}
	else if(this.tab.tabindex == 1){
		this.ds_bukipInfoList.reset();
	}
}


/*
 * 함수명  	: btn_copyAtmcJrnlzTy_onclick
 * 설명 		: '전년도복사' 버튼 클릭 후 이벤트 처리(자동분개유형)
 * params  		: None
 * return Type 	: None
 * 사용법		: this.btn_copyAtmcJrnlzTy_onclick(obj,e);
 */
this.btn_copyBukip_onclick = function(obj:Button,  e:nexacro.ClickEventInfo)
{
	if(this.gfn_message("confirm.복사.여부", "(자동저장) 전년 부기정보|당해 부기정보")) {
		this.fn_transaction("saveCopyPrvYearBukip");
	}
}


/**********************************************************************
* Grid 관련 이벤트 처리
***********************************************************************/

/*
 * 함수명  	: grd_atmcJrnlzTy_onexpandup
 * 설명 		: Grid expand 이미지 클릭 후 이벤트 처리(자동분개유형 Grid)
 * params  		: None
 * return Type 	: None
 * 사용법		: this.grd_atmcJrnlzTy_onexpandup(obj,e);
 */
this.grd_atmcJrnlzTy_onexpandup = function(obj:Grid, e:nexacro.GridMouseEventInfo)
{
	var popupColumn = "";
	switch(e.cell) {
		case 3:		// 일반차변
			popupColumn = "GNRL_DEBTOR_ACNT_CODE";
			break;
		case 6:		// 일반대변
			popupColumn = "GNRL_CRDIT_ACNT_CODE";
			break;
		case 10:	// 상계차변
			popupColumn = "SETOFF_DEBTOR_ACNT_CODE";
			break;
		case 13:	// 상계대변
			popupColumn = "SETOFF_CRDIT_ACNT_CODE";
			break;
		default:
			break;
	}
	
	if(popupColumn != "") {
		var year     = this.ds_cond.getColumn(0, "YEAR");
		var nLeft    = system.clientToScreenX(this, 0);
		var nTop     = system.clientToScreenY(this, 0);
		var newChild = new ChildFrame;
		newChild.init(popupColumn, "absolute", nLeft, nTop, 465, 510, null, null , "mis_acc::ACC010103_P01.xfdl");
		newChild.set_openalign("center middle");
		newChild.set_dragmovetype("all");
		newChild.showModal(this.getOwnerFrame(), {year:year}, this, "fn_popupCallBack");
	}
}



/**********************************************************************
* 공통함수 처리
***********************************************************************/

 /*
 * 함수명  	: fn_insert
 * 설명 		: 신규 버튼 이벤트 처리(행추가)
 * params  		: Non
 * return Type 	: None
 * 사용법		: this.fn_insert();
 */
this.fn_insert = function()
{
	var year_S   = this.ds_cond.getColumn(0, "YEAR");
	var bsnsSe_S = this.ds_cond.getColumn(0, "BSNS_SE");
	var balcSe_S = this.ds_cond.getColumn(0, "BALC_SE");
	
	var acRow         = this.ds_acntCode.rowposition;
	var year          = this.ds_acntCode.getColumn(acRow, "YEAR");
	var bsnsSe        = this.ds_acntCode.getColumn(acRow, "BSNS_SE");
	var balcSe        = this.ds_acntCode.getColumn(acRow, "BALC_SE");
	var upperAcntCode = this.ds_acntCode.getColumn(acRow, "BUDGET_ACNT_CODE");
	var acntLevel     = nexacro.toNumber(this.ds_acntCode.getColumn(acRow, "ACNT_LEVEL"), 0);
	var gwan          = acntLevel >= 1 ? this.ds_acntCode.getColumn(acRow, "GWAN")   : '';
	var hang          = acntLevel >= 2 ? this.ds_acntCode.getColumn(acRow, "HANG")   : '';
	var sehang        = acntLevel >= 3 ? this.ds_acntCode.getColumn(acRow, "SEHANG") : '';
	
	var acntCode      = this.comUtils.isNull(upperAcntCode) ? null : upperAcntCode.substr(0,3);
	
	year   = this.comUtils.isNull(year)   ? year_S   : year;
	bsnsSe = this.comUtils.isNull(bsnsSe) ? bsnsSe_S : bsnsSe;
	balcSe = this.comUtils.isNull(balcSe) ? balcSe_S : balcSe;
	
	if(acntLevel+1 > (year>=2016?5:4)) {
		this.gfn_message("info.항목.사용불가", "동작(" + (year>=2016?"세목":"목") + "의 하위레벨은 추가할 수 없습니다)");
		return false;
	}
	
	// 추가될 위치를 지정(현재행으로부터 하위로 탐색하여, 자신과 레벨이 같거나 작아지는 시점을 탐색)
	var findRow = this.ds_acntCode.getRowCount();
	for(var fRow = acRow+1; fRow < this.ds_acntCode.getRowCount(); fRow++) {
		var findLevel = nexacro.toNumber(this.ds_acntCode.getColumn(fRow, "ACNT_LEVEL"));
		var nm = nexacro.toNumber(this.ds_acntCode.getColumn(fRow, "BUDGET_ACNT_NM"));
		if(findLevel <= acntLevel) {
			findRow = fRow;
			break;
		}
	}
	
	var nRow = this.ds_acntCode.insertRow(findRow);
	this.ds_acntCode.setColumn(nRow, "YEAR",             year         );	// 년도
	this.ds_acntCode.setColumn(nRow, "BSNS_SE",          bsnsSe       );	// 사업구분
	this.ds_acntCode.setColumn(nRow, "BALC_SE",          balcSe       );	// 수지구분
	this.ds_acntCode.setColumn(nRow, "UPPER_ACNT_CODE",  upperAcntCode);	// 상위계정코드
	this.ds_acntCode.setColumn(nRow, "BUDGET_ACNT_CODE", acntCode     );	// 예산계정코드(가이드 목적 앞에 3글자만)
	this.ds_acntCode.setColumn(nRow, "ACNT_LEVEL",       acntLevel + 1);	// 계정레벨
	this.ds_acntCode.setColumn(nRow, "GWAN",             gwan         );	// 관(보여주기용)
	this.ds_acntCode.setColumn(nRow, "HANG",             hang         );	// 항(보여주기용)
	this.ds_acntCode.setColumn(nRow, "SEHANG",           sehang       );	// 세항(보여주기용)
}


/*
 * 함수명  	: fn_delete
 * 설명 		: 삭제 버튼 이벤트 처리(행삭제)
 * params  		: None
 * return Type 	: None
 * 사용법		: this.fn_delete();
 */
this.fn_delete = function()
{
	var acRow = this.ds_acntCode.rowposition;
	var nowAcntLevel = this.ds_acntCode.getColumn(acRow,   "ACNT_LEVEL");
	var nxtAcntLevel = this.ds_acntCode.getColumn(acRow+1, "ACNT_LEVEL");
	if(nowAcntLevel < nxtAcntLevel) {
		this.gfn_message("fail.삭제.불가", "하위계정이 존재하는 예산계정과목은");
		return false;
	}
	
	this.fn_transaction("selectUseAcntCnt");
}


/*
 * 함수명  	: fn_cancel
 * 설명 		: 취소 버튼 이벤트 처리(Dataset 변경 내역 Reset)
 * params  		: None
 * return Type 	: None
 * 사용법		: this.fn_cancel();
 */
this.fn_cancel = function()
{
	if(Ex.util.isUpdated(this.ds_acntCode)) {
		if(!this.gfn_message("confirm.변경.취소.여부")) {
			return false;	// 아니오
		}
		this.ds_acntCode.reset();
	}
}



/**********************************************************************
* Tab 관련 이벤트 처리
***********************************************************************/

this.tab_canchange = function(obj:Tab, e:nexacro.TabIndexChangeEventInfo)
{
	if(Ex.util.isUpdated(this.ds_atmcJrnlzTy) || Ex.util.isUpdated(this.ds_bukipInfoList)) {
		if(!this.gfn_message("confirm.변경.취소.여부")) {
			return false;	// 아니오
		}
	}
}

this.tab_onchanged = function(obj:Tab, e:nexacro.TabIndexChangeEventInfo)
{
	// 검색조건 연결
	this.ds_cond.set_enableevent(false);
	var aRow = this.ds_acntCode.rowposition;
	var acntCode  = this.ds_acntCode.getColumn(aRow, "BUDGET_ACNT_CODE");
	var leaf      = this.ds_acntCode.getColumn(aRow, "LEAF");
	var acntLevel = this.ds_acntCode.getColumn(aRow, "ACNT_LEVEL");
	this.ds_cond.setColumn(0, "BUDGET_ACNT_CODE", acntCode);
	this.ds_cond.set_enableevent(true);
	
	if(obj.tabindex == 0){
		// 자동분개유형 버튼 관련
		obj.tabpage1.btn_Add.set_enable(false);
		obj.tabpage1.btn_Delete.set_enable(false);
		obj.tabpage1.btn_Cancel.set_enable(false);
		var year = this.ds_acntCode.getColumn(aRow, "YEAR")
		if((year >= '2016' && acntLevel == 5) || (year < '2016' && acntLevel == 4)) {
			obj.tabpage1.btn_Add.set_enable(true);
			obj.tabpage1.btn_Delete.set_enable(true);
			obj.tabpage1.btn_Cancel.set_enable(true);
		}
	}
	else if(this.tab.tabindex == 1){
		// 선택된 예산계정이 최하위 레벨이고 목, 세항일 때
		if(leaf == '1' && acntLevel >= 4) {
			obj.tabpage2.btn_Add.set_enable(true);
			obj.tabpage2.btn_Delete.set_enable(true);
			obj.tabpage2.btn_Cancel.set_enable(true);
		}
		else {
			obj.tabpage2.btn_Add.set_enable(false);
			obj.tabpage2.btn_Delete.set_enable(false);
			obj.tabpage2.btn_Cancel.set_enable(false);
		}
	}
	
	// 서브 조회(자동분개유형, 부기코드리스트)
	this.fn_search_sub();
}

this.tab_tabpage2_grd_bukipList_onexpandup = function(obj:Grid, e:nexacro.GridMouseEventInfo)
{
	if(e.cell == '0') {
		var parm = {
			 arg_0    : this
		};
		this.gfn_popup("bukipListP", 410, 370, "부기코드팝업", parm, "mis_bdg::BDG010102_P01.xfdl", "fn_popupCallBack", true);
	}
}


/**********************************************************************
* Popup 관련 이벤트 처리
***********************************************************************/

this.div_pop_grd_ACNT_CODE_oncelldblclick = function(obj:Grid, e:nexacro.GridClickEventInfo)
{
	var acRow     = this.ds_acntCode.rowposition;
	var orgLevel  = nexacro.toNumber(this.ds_acntCode.getColumn(acRow, "ACNT_LEVEL"),0);
	
	var acpRow    = this.ds_acntCodePop.rowposition;
	var year      = this.ds_acntCodePop.getColumn(acpRow, "YEAR");
	var acntCode  = this.ds_acntCodePop.getColumn(acpRow, "BUDGET_ACNT_CODE");
	var acntLevel = nexacro.toNumber(this.ds_acntCodePop.getColumn(acpRow, "ACNT_LEVEL"),0);
	
	if(acntLevel+1 > (year>=2016?5:4)) {
		alert((year>=2016?"세목":"목") + "은 상위레벨이 될 수 없습니다.)");
		return false;
	}
	
	if(acntLevel != orgLevel-1) {
		alert("현재의 상위계정과 동일한 레벨의 계정을 선택하여 주시기 바랍니다.");
		return false;
	}
	
	this.div_pop.set_visible(false);
	this.ds_acntCode.setColumn(acRow, "UPPER_ACNT_CODE", acntCode);
}


this.btn_pop_onclick = function(obj:Button,  e:nexacro.ClickEventInfo)
{
	this.ds_acntCodePop.clearData();
	this.ds_acntCodePop.copyData(this.ds_acntCode);
	
	this.div_pop.set_top(50);
	this.div_pop.set_visible(true);
}


this.div_pop_sta_title_onlbuttondown = function(obj:Static, e:nexacro.MouseEventInfo)
{
	this.fv_cX = e.screenX;
	this.fv_cY = e.screenY;
}


this.div_pop_sta_title_onmousemove = function(obj:Static, e:nexacro.MouseEventInfo)
{
	if(e.button == "none") {
		return;
	}
	var nX = e.screenX;
	var nY = e.screenY;
	this.div_pop.set_left(parseInt(this.div_pop.left) - (this.fv_cX - nX));
	this.div_pop.set_top(parseInt(this.div_pop.top) - (this.fv_cY - nY));
	this.fv_cX = e.screenX;
	this.fv_cY = e.screenY; 
}

this.div_pop_btn_destroy_onclick = function(obj:Button,  e:nexacro.ClickEventInfo)
{
	this.div_pop.set_visible(false);
}
]]></Script>
  </Form>
</FDL>
