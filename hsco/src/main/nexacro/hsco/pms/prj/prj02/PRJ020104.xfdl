<?xml version="1.0" encoding="utf-8"?>
<FDL version="1.5">
  <TypeDefinition url="..\..\..\default_typedef.xml"/>
  <Form id="PRJ020104" classname="PRJ020104" left="0" top="0" width="1059" height="735" titletext="PRJ020104_임대주택상한산정" onload="PRJ020104_onload" oninit="PRJ020104_oninit">
    <Layouts>
      <Layout>
        <Div id="div_search" taborder="0" left="0" top="0" height="57" right="28" cssclass="div_WFSA_Box">
          <Layouts>
            <Layout>
              <Static id="sta_11" left="15" top="6" height="21" width="60" cssclass="sta_WFSA_Label" text="사업코드"/>
              <Static id="sta_12" left="369" top="6" height="21" width="60" cssclass="sta_WFSA_Label" text="주택코드"/>
              <Static id="sta_13" left="732" top="6" height="21" width="60" cssclass="sta_WFSA_Label" text="공급유형"/>
              <Static id="sta_21" left="15" top="31" height="21" width="60" cssclass="sta_WFSA_Label" text="등록일자" visible2="0"/>
              <Static id="sta_22" left="369" top="31" height="21" width="60" cssclass="sta_WFSA_Label" text="대지면적"/>
              <Static id="sta_23" left="519" top="31" height="21" width="25" cssclass="sta_WFSA_Label" text="㎡"/>
              <Static id="sta_24" left="558" top="31" height="21" width="52" cssclass="sta_WFSA_Label" text="연면적"/>
              <Static id="sta_25" left="695" top="31" height="21" width="25" cssclass="sta_WFSA_Label" text="㎡"/>
              <Static id="sta_26" left="744" top="31" height="21" right="232" cssclass="sta_WFSA_Label" text="용적율"/>
              <Static id="sta_27" left="883" top="31" height="21" width="25" cssclass="sta_WFSA_Label" text="%"/>
              <Edit id="edt_11" taborder="11" left="78" top="6" width="110" height="21" cssclass="edt_WF_Essential"/>
              <Button id="btn_bsns" taborder="12" left="167" top="6" width="21" height="21" onclick="btn_bsns_onclick" cssclass="btn_WF_Search"/>
              <Edit id="edt_12" taborder="13" left="193" top="6" width="160" height="21" readonly="1" enable="1" cssclass="edt_WF_Essential"/>
              <Edit id="edt_13" taborder="14" left="431" top="6" width="92" height="21" cssclass="edt_WF_Essential"/>
              <Edit id="edt_14" taborder="15" left="526" top="6" width="173" height="21" readonly="1" cssclass="edt_WF_Essential"/>
              <Edit id="edt_15" taborder="16" left="794" top="6" width="190" height="21" readonly="1" cssclass="edt_WF_Essential"/>
              <Calendar id="cal_1" taborder="21" left="78" top="31" width="110" height="21" cssclass="cal_WF_Essential" dateformat="yyyy-MM-dd" visible2="0"/>
              <MaskEdit id="mae_23" taborder="23" left="431" top="31" width="92" height="21" mask="#,##0" readonly="1"/>
              <MaskEdit id="mae_24" taborder="24" left="607" top="31" width="92" height="21" mask="#,##0" readonly="1"/>
              <MaskEdit id="mae_25" taborder="25" left="794" top="31" width="92" height="21" mask="#,##0.00" readonly="1"/>
            </Layout>
          </Layouts>
        </Div>
        <Div id="div_work" taborder="3" left="0" top="57" bottom="0" right="28">
          <Layouts>
            <Layout>
              <Div id="div_0" taborder="0" left="0" top="0" height="23%" right="0">
                <Layouts>
                  <Layout>
                    <Static id="sta_gud_h1" left="0" height="10" right="0" top="0" style="background:#dc143c3c;" text="10" visible="0"/>
                    <Static id="sta_gud_h2" left="0" height="10" right="0" bottom="0" style="background:#dc143c3c;" text="10" visible="0"/>
                    <Grid id="grd_types" binddataset="ds_types" left="0" top="10" bottom="10" right="0" autofittype="col">
                      <Formats>
                        <Format id="default">
                          <Columns>
                            <Column size="60"/>
                            <Column size="60"/>
                            <Column size="60"/>
                            <Column size="60"/>
                            <Column size="60"/>
                            <Column size="60"/>
                            <Column size="60"/>
                            <Column size="60"/>
                          </Columns>
                          <Rows>
                            <Row size="18" band="head"/>
                            <Row size="18" band="head"/>
                            <Row size="24"/>
                            <Row size="0" band="summ"/>
                          </Rows>
                          <Band id="head">
                            <Cell rowspan="2" text="타입"/>
                            <Cell col="1" rowspan="2" text="세대수"/>
                            <Cell col="2" colspan="2" text="전용면적(㎡)"/>
                            <Cell col="4" colspan="2" text="공용면적(㎡)"/>
                            <Cell col="6" colspan="2" text="계약면적(㎡)"/>
                            <Cell row="1" col="2" text="세대별"/>
                            <Cell row="1" col="3" text="세대합계"/>
                            <Cell row="1" col="4" text="세대별"/>
                            <Cell row="1" col="5" text="세대합계"/>
                            <Cell row="1" col="6" text="세대별"/>
                            <Cell row="1" col="7" text="세대합계"/>
                          </Band>
                          <Band id="body">
                            <Cell text="bind:TY_CODE_NM"/>
                            <Cell col="1" displaytype="number" style="align:right;padding:0 5 0 5;" mask="#,##0" text="bind:HSHLD_CO"/>
                            <Cell col="2" displaytype="number" style="align:right;padding:0 5 0 5;" mask="#,##0.00" text="bind:DVR_AR_A"/>
                            <Cell col="3" displaytype="number" style="align:right;padding:0 5 0 5;" mask="#,##0.00" text="bind:DVR_AR_S"/>
                            <Cell col="4" displaytype="number" style="align:right;padding:0 5 0 5;" mask="#,##0.00" text="bind:CMNUSE_AR_A"/>
                            <Cell col="5" displaytype="number" style="align:right;padding:0 5 0 5;" mask="#,##0.00" text="bind:CMNUSE_AR_S"/>
                            <Cell col="6" displaytype="number" style="align:right;padding:0 5 0 5;" mask="#,##0.00" text="bind:CNTRCT_AR_A"/>
                            <Cell col="7" displaytype="number" style="align:right;padding:0 5 0 5;" mask="#,##0.00" text="bind:CNTRCT_AR_S"/>
                          </Band>
                          <Band id="summary">
                            <Cell text="합계"/>
                            <Cell col="1" displaytype="number" style="align:right;padding:0 5 0 0;" mask="#,##0" expr="dataset.getSum('parseInt(HSHLD_CO)||0')"/>
                            <Cell col="2" colspan="2" displaytype="number" style="align:right;padding:0 5 0 0;" mask="#,##0.00" expr="dataset.getSum('parseFloat(DVR_AR_S)||0')"/>
                            <Cell col="4" colspan="2" displaytype="number" style="align:right;padding:0 5 0 0;" mask="#,##0.00" expr="dataset.getSum('parseFloat(CMNUSE_AR_S)||0')"/>
                            <Cell col="6" colspan="2" displaytype="number" style="align:right;padding:0 5 0 0;" mask="#,##0.00" expr="dataset.getSum('parseFloat(CNTRCT_AR_S)||0')"/>
                          </Band>
                        </Format>
                      </Formats>
                    </Grid>
                  </Layout>
                </Layouts>
              </Div>
              <Div id="div_1" taborder="1" left="0" top="23%" height="35%" right="50%">
                <Layouts>
                  <Layout>
                    <Static id="sta_gud_v01" top="0" width="10" bottom="0" right="0" style="background:#1b3cd23c;" text="10" visible="0"/>
                    <Static id="sta_gud_h01" left="0" height="10" bottom="0" right="0" style="background:#dc143c3c;" text="10" visible="0"/>
                    <Tab id="tab" left="0" top="0" bottom="10" right="10">
                      <Tabpages>
                        <Tabpage id="tab1" text="대지비">
                          <Layouts>
                            <Layout>
                              <Grid id="grd_land" binddataset="ds_land" left="0" top="0" right="0" bottom="0" autofittype="col">
                                <Formats>
                                  <Format id="default">
                                    <Columns>
                                      <Column size="38"/>
                                      <Column size="42"/>
                                      <Column size="55"/>
                                      <Column size="55"/>
                                      <Column size="55"/>
                                      <Column size="55"/>
                                      <Column size="53"/>
                                      <Column size="55"/>
                                      <Column size="66"/>
                                    </Columns>
                                    <Rows>
                                      <Row size="18" band="head"/>
                                      <Row size="18" band="head"/>
                                      <Row size="24"/>
                                      <Row size="0" band="summ"/>
                                    </Rows>
                                    <Band id="head">
                                      <Cell rowspan="2" text="타입"/>
                                      <Cell col="1" rowspan="2" text="세대수"/>
                                      <Cell col="2" rowspan="2" text="대지&#13;&#10;지분"/>
                                      <Cell col="3" rowspan="2" text="지분&#13;&#10;합계"/>
                                      <Cell col="4" rowspan="2" text="적용&#13;&#10;단가"/>
                                      <Cell col="5" colspan="3" text="대지비"/>
                                      <Cell col="8" rowspan="2" text="세대당&#13;&#10;금액"/>
                                      <Cell row="1" col="5" text="계"/>
                                      <Cell row="1" col="6" text="공급가격"/>
                                      <Cell row="1" col="7" text="기간이자"/>
                                    </Band>
                                    <Band id="body">
                                      <Cell text="bind:TY_CODE_NM"/>
                                      <Cell col="1" displaytype="number" style="align:right;padding:0 5 0 5;" mask="#,##0" text="bind:HSHLD_CO"/>
                                      <Cell col="2" displaytype="number" edittype="masknumber" style="align:right;padding:0 5 0 5;" editlimitbymask="both" mask="#,###,###,###,##0.###" text="bind:PLOT_QOTA"/>
                                      <Cell col="3" displaytype="number" style="align:right;padding:0 5 0 5;" mask="#,##0" text="bind:QOTA_SM"/>
                                      <Cell col="4" displaytype="number" edittype="masknumber" style="align:right;padding:0 5 0 5;" editlimitbymask="both" mask="###,###,###,###,##0" text="bind:APPLC_UNTPC"/>
                                      <Cell col="5" displaytype="number" style="align:right;padding:0 5 0 5;" mask="#,##0" text="bind:TOTAL"/>
                                      <Cell col="6" displaytype="number" edittype="masknumber" style="align:right;padding:0 5 0 5;" editlimitbymask="both" mask="###,###,###,###,##0" text="bind:SPLPC"/>
                                      <Cell col="7" displaytype="number" edittype="masknumber" style="align:right;padding:0 5 0 5;" editlimitbymask="both" mask="###,###,###,###,##0" text="bind:INTR"/>
                                      <Cell col="8" displaytype="number" edittype="masknumber" style="align:right;padding:0 5 0 5;" editlimitbymask="both" mask="###,###,###,###,##0" text="bind:HSHLD_AMOUNT"/>
                                    </Band>
                                    <Band id="summary">
                                      <Cell text="합계"/>
                                      <Cell col="1" displaytype="number" style="align:right;padding:0 5 0 0;" mask="#,##0" expr="dataset.getSum('parseInt(HSHLD_CO)||0')"/>
                                      <Cell col="2" displaytype="number" style="align:right;padding:0 5 0 0;" mask="#,##0" expr="dataset.getSum('parseInt(PLOT_QOTA)||0')"/>
                                      <Cell col="3" displaytype="number" style="align:right;padding:0 5 0 0;" mask="#,##0" expr="dataset.getSum('parseInt(QOTA_SM)||0')"/>
                                      <Cell col="4" displaytype="number" style="align:right;padding:0 5 0 0;" mask="#,##0" expr="dataset.getSum('parseInt(APPLC_UNTPC)||0')"/>
                                      <Cell col="5" displaytype="number" style="align:right;padding:0 5 0 0;" mask="#,##0" expr="dataset.getSum('parseInt(TOTAL)||0')"/>
                                      <Cell col="6" displaytype="number" style="align:right;padding:0 5 0 0;" mask="#,##0" expr="dataset.getSum('parseInt(SPLPC)||0')"/>
                                      <Cell col="7" displaytype="number" style="align:right;padding:0 5 0 0;" mask="#,##0" expr="dataset.getSum('parseInt(INTR)||0')"/>
                                      <Cell col="8" displaytype="number" style="align:right;padding:0 5 0 0;" mask="#,##0" expr="dataset.getSum('parseInt(HSHLD_AMOUNT)||0')"/>
                                    </Band>
                                  </Format>
                                </Formats>
                              </Grid>
                            </Layout>
                          </Layouts>
                        </Tabpage>
                        <Tabpage id="tab2" text="건축비">
                          <Layouts>
                            <Layout>
                              <Grid id="grd_bldg" binddataset="ds_bldg" left="0" top="0" right="0" bottom="0" autofittype="col">
                                <Formats>
                                  <Format id="default">
                                    <Columns>
                                      <Column size="38"/>
                                      <Column size="42"/>
                                      <Column size="80"/>
                                      <Column size="80"/>
                                      <Column size="80"/>
                                      <Column size="80"/>
                                      <Column size="80"/>
                                    </Columns>
                                    <Rows>
                                      <Row size="36" band="head"/>
                                      <Row size="24"/>
                                      <Row size="0" band="summ"/>
                                    </Rows>
                                    <Band id="head">
                                      <Cell text="타입"/>
                                      <Cell col="1" text="세대수"/>
                                      <Cell col="2" text="계"/>
                                      <Cell col="3" text="지상층&#13;&#10;건축비"/>
                                      <Cell col="4" text="지하층&#13;&#10;건축비"/>
                                      <Cell col="5" text="가산비용"/>
                                      <Cell col="6" text="세대당&#13;&#10;금액"/>
                                    </Band>
                                    <Band id="body">
                                      <Cell text="bind:TY_CODE_NM"/>
                                      <Cell col="1" displaytype="number" style="align:right;padding:0 5 0 5;" mask="#,##0" text="bind:HSHLD_CO"/>
                                      <Cell col="2" displaytype="number" style="align:right;padding:0 5 0 5;" mask="#,##0" text="bind:TOTAL"/>
                                      <Cell col="3" displaytype="number" edittype="masknumber" style="align:right;padding:0 5 0 5;" editlimitbymask="both" mask="###,###,###,###,##0" text="bind:BILDNG_CT_GROUND"/>
                                      <Cell col="4" displaytype="number" edittype="masknumber" style="align:right;padding:0 5 0 5;" editlimitbymask="both" mask="###,###,###,###,##0" text="bind:BILDNG_CT_UNDGRND"/>
                                      <Cell col="5" displaytype="number" edittype="masknumber" style="align:right;padding:0 5 0 5;" editlimitbymask="both" mask="###,###,###,###,##0" text="bind:ADDI_CT"/>
                                      <Cell col="6" displaytype="number" edittype="masknumber" style="align:right;padding:0 5 0 5;" editlimitbymask="both" mask="###,###,###,###,##0" text="bind:HSHLD_AMOUNT"/>
                                    </Band>
                                    <Band id="summary">
                                      <Cell text="합계"/>
                                      <Cell col="1" displaytype="number" style="align:right;padding:0 5 0 0;" mask="#,##0" expr="dataset.getSum('parseInt(HSHLD_CO)||0')"/>
                                      <Cell col="2" displaytype="number" style="align:right;padding:0 5 0 0;" mask="#,##0" expr="dataset.getSum('parseInt(TOTAL)||0')"/>
                                      <Cell col="3" displaytype="number" style="align:right;padding:0 5 0 0;" mask="#,##0" expr="dataset.getSum('parseInt(BILDNG_CT_GROUND)||0')"/>
                                      <Cell col="4" displaytype="number" style="align:right;padding:0 5 0 0;" mask="#,##0" expr="dataset.getSum('parseInt(BILDNG_CT_UNDGRND)||0')"/>
                                      <Cell col="5" displaytype="number" style="align:right;padding:0 5 0 0;" mask="#,##0" expr="dataset.getSum('parseInt(ADDI_CT)||0')"/>
                                      <Cell col="6" displaytype="number" style="align:right;padding:0 5 0 0;" mask="#,##0" expr="dataset.getSum('parseInt(HSHLD_AMOUNT)||0')"/>
                                    </Band>
                                  </Format>
                                </Formats>
                              </Grid>
                            </Layout>
                          </Layouts>
                        </Tabpage>
                      </Tabpages>
                    </Tab>
                  </Layout>
                </Layouts>
              </Div>
              <Div id="div_2" taborder="2" left="50%" top="23%" height="35%" right="0">
                <Layouts>
                  <Layout>
                    <Static id="sta_gud_h1" left="0" top="25" right="0" height="5" style="background:#dc143c3c;" text="5" visible="0"/>
                    <Static id="sta_gud_h3" left="0" height="10" bottom="0" right="0" style="background:#dc143c3c;" text="10" visible="0"/>
                    <Static id="sta_1" left="0" top="6" width="200" height="19" cssclass="sta_WF_Title02" text="(임대주택 상한금액 총괄)" style="color:blue;"/>
                    <Static id="sta_5" top="6" width="85" height="21" right="0" cssclass="sta_WF_txt01" text="[단위 : 천원]" visible="0"/>
                    <Grid id="grd_tot" taborder="9" binddataset="ds_tot" left="0" top="30" bottom="10" right="0" autofittype="col">
                      <Formats>
                        <Format id="default">
                          <Columns>
                            <Column size="50"/>
                            <Column size="50"/>
                            <Column size="146"/>
                            <Column size="180"/>
                            <Column size="180"/>
                          </Columns>
                          <Rows>
                            <Row size="18" band="head"/>
                            <Row size="18" band="head"/>
                            <Row size="24"/>
                            <Row size="0" band="summ"/>
                          </Rows>
                          <Band id="head">
                            <Cell rowspan="2" text="타입"/>
                            <Cell col="1" rowspan="2" text="세대수"/>
                            <Cell col="2" rowspan="2" text="세대당&#13;&#10;기초금액"/>
                            <Cell col="3" colspan="2" text="임대보증금 및 월임대료"/>
                            <Cell row="1" col="3" text="임대보증금"/>
                            <Cell row="1" col="4" text="월 임대료(원)"/>
                          </Band>
                          <Band id="body">
                            <Cell text="bind:TY_CODE_NM"/>
                            <Cell col="1" displaytype="number" style="align:right;padding:0 5 0 5;" mask="#,##0" text="bind:HSHLD_CO"/>
                            <Cell col="2" displaytype="number" style="align:right;padding:0 5 0 5;" mask="#,##0" text="bind:BSIS_AMOUNT"/>
                            <Cell col="3" displaytype="number" edittype="masknumber" style="align:right;padding:0 5 0 5;" editlimitbymask="both" mask="###,###,###,###,##0" text="bind:GTN"/>
                            <Cell col="4" displaytype="number" edittype="masknumber" style="align:right;padding:0 5 0 5;" editlimitbymask="both" mask="###,###,###,###,##0" text="bind:RNTCHRG"/>
                          </Band>
                          <Band id="summary">
                            <Cell text="합계"/>
                            <Cell col="1" displaytype="number" style="align:right;padding:0 5 0 0;" mask="#,##0" expr="dataset.getSum('parseInt(HSHLD_CO)||0')"/>
                            <Cell col="2" displaytype="number" style="align:right;padding:0 5 0 0;" mask="#,##0" expr="dataset.getSum('parseInt(BSIS_AMOUNT)||0')"/>
                            <Cell col="3" displaytype="number" style="align:right;padding:0 5 0 0;" mask="#,##0" expr="dataset.getSum('parseInt(GTN)||0')"/>
                            <Cell col="4" displaytype="number" style="align:right;padding:0 5 0 0;" mask="#,##0" expr="dataset.getSum('parseInt(RNTCHRG)||0')"/>
                          </Band>
                        </Format>
                      </Formats>
                    </Grid>
                  </Layout>
                </Layouts>
              </Div>
              <Div id="div_3" taborder="3" left="0" top="58%" bottom="0" right="50%">
                <Layouts>
                  <Layout>
                    <Static id="sta_gud_v01" top="0" width="10" bottom="0" right="0" style="background:#1b3cd23c;" text="10" visible="0"/>
                    <Static id="sta_gud_h1" left="0" top="19" right="0" height="5" style="background:#dc143c3c;" text="5" visible="0"/>
                    <Static id="sta_1" left="0" top="0" width="200" height="19" cssclass="sta_WF_Title02" text="(임대보증금)" style="color:blue;"/>
                    <Static id="sta_5" top="0" width="85" height="21" right="10" cssclass="sta_WF_txt01" text="[단위 : 천원]" visible="0"/>
                    <Grid id="grd_gtn" taborder="9" binddataset="ds_gtn" left="0" top="24" bottom="0" right="10" autofittype="col">
                      <Formats>
                        <Format id="default">
                          <Columns>
                            <Column size="50"/>
                            <Column size="52"/>
                            <Column size="110"/>
                            <Column size="110"/>
                            <Column size="110"/>
                            <Column size="110"/>
                          </Columns>
                          <Rows>
                            <Row size="36" band="head"/>
                            <Row size="24"/>
                            <Row size="0" band="summ"/>
                          </Rows>
                          <Band id="head">
                            <Cell text="타입"/>
                            <Cell col="1" text="세대수"/>
                            <Cell col="2" text="기초금액&#13;&#10;(A)"/>
                            <Cell col="3" text="국민주택기금&#13;&#10;(B)"/>
                            <Cell col="4" text="차감액&#13;&#10;(C=A-B)"/>
                            <Cell col="5" text="임대보증금&#13;&#10;(D=C x 50%)"/>
                          </Band>
                          <Band id="body">
                            <Cell text="bind:TY_CODE_NM"/>
                            <Cell col="1" displaytype="number" style="align:right;padding:0 5 0 5;" mask="#,##0" text="bind:HSHLD_CO"/>
                            <Cell col="2" displaytype="number" edittype="masknumber" style="align:right;padding:0 5 0 5;" editlimitbymask="both" mask="###,###,###,###,##0" text="bind:BSIS_AMOUNT"/>
                            <Cell col="3" displaytype="number" edittype="masknumber" style="align:right;padding:0 5 0 5;" editlimitbymask="both" mask="###,###,###,###,##0" text="bind:KJF"/>
                            <Cell col="4" displaytype="number" style="align:right;padding:0 5 0 5;" mask="#,##0" text="bind:DDCT_AM"/>
                            <Cell col="5" displaytype="number" style="align:right;padding:0 5 0 5;" mask="#,##0" text="bind:GTN"/>
                          </Band>
                          <Band id="summary">
                            <Cell text="합계"/>
                            <Cell col="1" displaytype="number" style="align:right;padding:0 5 0 0;" mask="#,##0" expr="dataset.getSum('parseInt(HSHLD_CO)||0')"/>
                            <Cell col="2" displaytype="number" style="align:right;padding:0 5 0 0;" mask="#,##0" expr="dataset.getSum('parseInt(BSIS_AMOUNT)||0')"/>
                            <Cell col="3" displaytype="number" style="align:right;padding:0 5 0 0;" mask="#,##0" expr="dataset.getSum('parseInt(KJF)||0')"/>
                            <Cell col="4" displaytype="number" style="align:right;padding:0 5 0 0;" mask="#,##0" expr="dataset.getSum('parseInt(DDCT_AM)||0')"/>
                            <Cell col="5" displaytype="number" style="align:right;padding:0 5 0 0;" mask="#,##0" expr="dataset.getSum('parseInt(GTN)||0')"/>
                          </Band>
                        </Format>
                      </Formats>
                    </Grid>
                  </Layout>
                </Layouts>
              </Div>
              <Div id="div_4" taborder="4" left="50%" top="58%" bottom="0" right="0">
                <Layouts>
                  <Layout>
                    <Static id="sta_gud_h1" left="0" top="19" right="0" height="5" style="background:#dc143c3c;" text="5" visible="0"/>
                    <Static id="sta_1" left="0" top="0" width="200" height="19" cssclass="sta_WF_Title02" text="(월 임대료)" style="color:blue;"/>
                    <Static id="sta_5" top="0" width="85" height="21" right="0" cssclass="sta_WF_txt01" text="[단위 : 천원]" visible="0"/>
                    <Grid id="grd_rent" taborder="9" binddataset="ds_rent" left="0" top="24" bottom="0" right="0" autofittype="col">
                      <Formats>
                        <Format id="default">
                          <Columns>
                            <Column size="50"/>
                            <Column size="63"/>
                            <Column size="65"/>
                            <Column size="65"/>
                            <Column size="65"/>
                            <Column size="65"/>
                            <Column size="65"/>
                            <Column size="65"/>
                          </Columns>
                          <Rows>
                            <Row size="36" band="head"/>
                            <Row size="24"/>
                            <Row size="0" band="summ"/>
                          </Rows>
                          <Band id="head">
                            <Cell text="타입"/>
                            <Cell col="1" text="계"/>
                            <Cell col="2" text="감가&#13;&#10;상각비"/>
                            <Cell col="3" text="수선&#13;&#10;유지비"/>
                            <Cell col="4" text="보험료"/>
                            <Cell col="5" text="기금이자"/>
                            <Cell col="6" text="제세&#13;&#10;공과금"/>
                            <Cell col="7" text="자기자금&#13;&#10;이자"/>
                          </Band>
                          <Band id="body">
                            <Cell edittype="text" text="bind:TY_CODE_NM"/>
                            <Cell col="1" displaytype="number" style="align:right;padding:0 5 0 5;" mask="#,##0" text="bind:TOTAL"/>
                            <Cell col="2" displaytype="number" edittype="masknumber" style="align:right;padding:0 5 0 5;" editlimitbymask="both" mask="###,###,###,###,##0" text="bind:DPRC_NON"/>
                            <Cell col="3" displaytype="number" edittype="masknumber" style="align:right;padding:0 5 0 5;" editlimitbymask="both" mask="###,###,###,###,##0" text="bind:RPAIRS_MNTNC_CT"/>
                            <Cell col="4" displaytype="number" edittype="masknumber" style="align:right;padding:0 5 0 5;" editlimitbymask="both" mask="###,###,###,###,##0" text="bind:IRNCF"/>
                            <Cell col="5" displaytype="number" edittype="masknumber" style="align:right;padding:0 5 0 5;" editlimitbymask="both" mask="###,###,###,###,##0" text="bind:ENDW_INTR"/>
                            <Cell col="6" displaytype="number" edittype="masknumber" style="align:right;padding:0 5 0 5;" editlimitbymask="both" mask="###,###,###,###,##0" text="bind:TAXDUE"/>
                            <Cell col="7" displaytype="number" edittype="masknumber" style="align:right;padding:0 5 0 5;" editlimitbymask="both" mask="###,###,###,###,##0" text="bind:MGNTC_CPTAL_INTR"/>
                          </Band>
                          <Band id="summary">
                            <Cell text="합계"/>
                            <Cell col="1" displaytype="number" style="align:right;padding:0 5 0 0;" mask="#,##0" expr="dataset.getSum('parseInt(TOTAL)||0')"/>
                            <Cell col="2" displaytype="number" style="align:right;padding:0 5 0 0;" mask="#,##0" expr="dataset.getSum('parseInt(DPRC_NON)||0')"/>
                            <Cell col="3" displaytype="number" style="align:right;padding:0 5 0 0;" mask="#,##0" expr="dataset.getSum('parseInt(RPAIRS_MNTNC_CT)||0')"/>
                            <Cell col="4" displaytype="number" style="align:right;padding:0 5 0 0;" mask="#,##0" expr="dataset.getSum('parseInt(IRNCF)||0')"/>
                            <Cell col="5" displaytype="number" style="align:right;padding:0 5 0 0;" mask="#,##0" expr="dataset.getSum('parseInt(ENDW_INTR)||0')"/>
                            <Cell col="6" displaytype="number" style="align:right;padding:0 5 0 0;" mask="#,##0" expr="dataset.getSum('parseInt(TAXDUE)||0')"/>
                            <Cell col="7" displaytype="number" style="align:right;padding:0 5 0 0;" mask="#,##0" expr="dataset.getSum('parseInt(MGNTC_CPTAL_INTR)||0')"/>
                          </Band>
                        </Format>
                      </Formats>
                    </Grid>
                  </Layout>
                </Layouts>
              </Div>
            </Layout>
          </Layouts>
        </Div>
      </Layout>
    </Layouts>
    <Objects>
      <Dataset id="ds_types" onrowposchanged="ds_onrowposchanged" useclientlayout2="1">
        <ColumnInfo>
          <Column id="BSNS_CODE" type="STRING" size="5"/>
          <Column id="HOUSE_CODE" type="STRING" size="4"/>
          <Column id="SUPLY_TY_CODE" type="STRING" size="6"/>
          <Column id="TY_CODE" type="STRING" size="6"/>
          <Column id="TY_CODE_NM" type="STRING" size="100"/>
          <Column id="UPLMTPC_SE" type="STRING" size="3"/>
          <Column id="STDR_DE" type="STRING" size="8"/>
          <Column id="HSHLD_CO" type="BIGDECIMAL" size="16"/>
          <Column id="DVR_AR" type="BIGDECIMAL" size="17"/>
          <Column id="DVR_AR_DETAIL" type="BIGDECIMAL" size="17"/>
          <Column id="CMNUSE_AR" type="BIGDECIMAL" size="17"/>
          <Column id="CMNUSE_AR_DETAIL" type="BIGDECIMAL" size="17"/>
          <Column id="CNTRCT_AR" type="BIGDECIMAL" size="17"/>
          <Column id="CNTRCT_AR_DETAIL" type="BIGDECIMAL" size="17"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_tot" onrowposchanged="ds_onrowposchanged" oncolumnchanged="ds_tot_oncolumnchanged" useclientlayout="1">
        <ColumnInfo>
          <Column id="BSNS_CODE" type="STRING" size="5"/>
          <Column id="HOUSE_CODE" type="STRING" size="4"/>
          <Column id="SUPLY_TY_CODE" type="STRING" size="6"/>
          <Column id="TY_CODE" type="STRING" size="6"/>
          <Column id="TY_CODE_NM" type="STRING" size="100"/>
          <Column id="UPLMTPC_SE" type="STRING" size="3"/>
          <Column id="STDR_DE" type="STRING" size="8"/>
          <Column id="HSHLD_CO" type="BIGDECIMAL" size="16"/>
          <Column id="BSIS_AMOUNT" type="BIGDECIMAL" size="16"/>
          <Column id="GTN" type="BIGDECIMAL" size="16"/>
          <Column id="RNTCHRG" type="BIGDECIMAL" size="16"/>
          <Column id="EMPNM" type="STRING" size="30"/>
          <Column id="DEPT_NM" type="STRING" size="30"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_land" onrowposchanged="ds_onrowposchanged" oncolumnchanged="ds_land_oncolumnchanged" useclientlayout="1">
        <ColumnInfo>
          <Column id="BSNS_CODE" type="STRING" size="5"/>
          <Column id="HOUSE_CODE" type="STRING" size="4"/>
          <Column id="SUPLY_TY_CODE" type="STRING" size="6"/>
          <Column id="TY_CODE" type="STRING" size="6"/>
          <Column id="TY_CODE_NM" type="STRING" size="100"/>
          <Column id="UPLMTPC_SE" type="STRING" size="3"/>
          <Column id="STDR_DE" type="STRING" size="8"/>
          <Column id="HSHLD_CO" type="BIGDECIMAL" size="16"/>
          <Column id="PLOT_QOTA" type="BIGDECIMAL" size="17"/>
          <Column id="QOTA_SM" type="BIGDECIMAL" size="17"/>
          <Column id="APPLC_UNTPC" type="BIGDECIMAL" size="16"/>
          <Column id="SPLPC" type="BIGDECIMAL" size="16"/>
          <Column id="INTR" type="BIGDECIMAL" size="16"/>
          <Column id="HSHLD_AMOUNT" type="BIGDECIMAL" size="16"/>
          <Column id="TOTAL" type="BIGDECIMAL" size="16"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_bldg" onrowposchanged="ds_onrowposchanged" oncolumnchanged="ds_bldg_oncolumnchanged" useclientlayout="1">
        <ColumnInfo>
          <Column id="BSNS_CODE" type="STRING" size="5"/>
          <Column id="HOUSE_CODE" type="STRING" size="4"/>
          <Column id="SUPLY_TY_CODE" type="STRING" size="6"/>
          <Column id="TY_CODE" type="STRING" size="6"/>
          <Column id="TY_CODE_NM" type="STRING" size="100"/>
          <Column id="UPLMTPC_SE" type="STRING" size="3"/>
          <Column id="STDR_DE" type="STRING" size="8"/>
          <Column id="HSHLD_CO" type="BIGDECIMAL" size="16"/>
          <Column id="BILDNG_CT_GROUND" type="BIGDECIMAL" size="16"/>
          <Column id="BILDNG_CT_UNDGRND" type="BIGDECIMAL" size="16"/>
          <Column id="ADDI_CT" type="BIGDECIMAL" size="16"/>
          <Column id="HSHLD_AMOUNT" type="BIGDECIMAL" size="16"/>
          <Column id="TOTAL" type="BIGDECIMAL" size="16"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_gtn" onrowposchanged="ds_onrowposchanged" oncolumnchanged="ds_gtn_oncolumnchanged" useclientlayout="1">
        <ColumnInfo>
          <Column id="BSNS_CODE" type="STRING" size="5"/>
          <Column id="HOUSE_CODE" type="STRING" size="4"/>
          <Column id="SUPLY_TY_CODE" type="STRING" size="6"/>
          <Column id="TY_CODE" type="STRING" size="6"/>
          <Column id="TY_CODE_NM" type="STRING" size="100"/>
          <Column id="UPLMTPC_SE" type="STRING" size="3"/>
          <Column id="STDR_DE" type="STRING" size="8"/>
          <Column id="HSHLD_CO" type="BIGDECIMAL" size="16"/>
          <Column id="BSIS_AMOUNT" type="BIGDECIMAL" size="16"/>
          <Column id="KJF" type="BIGDECIMAL" size="16"/>
          <Column id="DDCT_AM" type="BIGDECIMAL" size="16"/>
          <Column id="GTN" type="BIGDECIMAL" size="16"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_rent" onrowposchanged="ds_onrowposchanged" oncolumnchanged="ds_rent_oncolumnchanged" useclientlayout="1">
        <ColumnInfo>
          <Column id="BSNS_CODE" type="STRING" size="5"/>
          <Column id="HOUSE_CODE" type="STRING" size="4"/>
          <Column id="SUPLY_TY_CODE" type="STRING" size="6"/>
          <Column id="TY_CODE" type="STRING" size="6"/>
          <Column id="TY_CODE_NM" type="STRING" size="100"/>
          <Column id="UPLMTPC_SE" type="STRING" size="3"/>
          <Column id="STDR_DE" type="STRING" size="8"/>
          <Column id="HSHLD_CO" type="BIGDECIMAL" size="16"/>
          <Column id="DPRC_NON" type="BIGDECIMAL" size="16"/>
          <Column id="RPAIRS_MNTNC_CT" type="BIGDECIMAL" size="16"/>
          <Column id="IRNCF" type="BIGDECIMAL" size="16"/>
          <Column id="ENDW_INTR" type="BIGDECIMAL" size="16"/>
          <Column id="TAXDUE" type="BIGDECIMAL" size="16"/>
          <Column id="MGNTC_CPTAL_INTR" type="BIGDECIMAL" size="16"/>
          <Column id="TOTAL" type="BIGDECIMAL" size="16"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_validation">
        <ColumnInfo>
          <Column id="compId" type="STRING" size="256"/>
          <Column id="colId" type="STRING" size="256"/>
          <Column id="PK" type="STRING" size="256"/>
          <Column id="notNull" type="STRING" size="256"/>
          <Column id="type" type="STRING" size="256"/>
          <Column id="nlength" type="STRING" size="256"/>
          <Column id="from" type="STRING" size="256"/>
          <Column id="to" type="STRING" size="256"/>
          <Column id="lengthChkGb" type="STRING" size="256"/>
          <Column id="msgId" type="STRING" size="256"/>
          <Column id="expr" type="STRING" size="256"/>
          <Column id="func" type="STRING" size="256"/>
        </ColumnInfo>
        <Rows>
          <Row>
            <Col id="compId">div_search</Col>
            <Col id="colId">edt_13</Col>
            <Col id="notNull">Y</Col>
            <Col id="msgId">주택코드</Col>
          </Row>
        </Rows>
      </Dataset>
      <Dataset id="ds_cond0" useclientlayout="1">
        <ColumnInfo>
          <Column id="BSNS_CODE" type="STRING" size="5"/>
          <Column id="BSNS_NM" type="STRING" size="100"/>
          <Column id="HOUSE_CODE" type="STRING" size="4"/>
          <Column id="HOUSE_CODE_NM" type="STRING" size="100"/>
          <Column id="SUPLY_TY_CODE" type="STRING" size="6"/>
          <Column id="SUPLY_TY_CODE_NM" type="STRING" size="100"/>
          <Column id="BSNS_AR" type="bigdecimal" size="16"/>
          <Column id="TOTAR" type="bigdecimal" size="16"/>
          <Column id="MEASRMT_RT" type="bigdecimal" size="16"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_cond1" useclientlayout="1">
        <ColumnInfo>
          <Column id="BSNS_CODE" type="STRING" size="5"/>
          <Column id="HOUSE_CODE" type="STRING" size="4"/>
          <Column id="SUPLY_TY_CODE" type="STRING" size="6"/>
          <Column id="UPLMTPC_SE" type="STRING" size="1"/>
          <Column id="STDR_DE" type="STRING" size="8"/>
          <Column id="TY_CODE" type="STRING" size="6"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_PRJ010"/>
      <Dataset id="ds_PRJ016"/>
    </Objects>
    <Bind>
      <BindItem id="item11" compid="div_search.edt_11" propid="value" datasetid="ds_cond0" columnid="BSNS_CODE"/>
      <BindItem id="item12" compid="div_search.edt_12" propid="value" datasetid="ds_cond0" columnid="BSNS_NM"/>
      <BindItem id="item13" compid="div_search.edt_13" propid="value" datasetid="ds_cond0" columnid="HOUSE_CODE"/>
      <BindItem id="item14" compid="div_search.edt_14" propid="value" datasetid="ds_cond0" columnid="HOUSE_CODE_NM"/>
      <BindItem id="item15" compid="div_search.edt_15" propid="value" datasetid="ds_cond0" columnid="SUPLY_TY_CODE_NM"/>
      <BindItem id="item16" compid="div_search.mae_23" propid="value" datasetid="ds_cond0" columnid="BSNS_AR"/>
      <BindItem id="item17" compid="div_search.mae_24" propid="value" datasetid="ds_cond0" columnid="TOTAR"/>
      <BindItem id="item18" compid="div_search.mae_25" propid="value" datasetid="ds_cond0" columnid="MEASRMT_RT"/>
      <BindItem id="item19" compid="div_search.cal_1" propid="value" datasetid="ds_cond1" columnid="STDR_DE"/>
    </Bind>
    <Script type="xscript5.0"><![CDATA[/***********************************************************************
 * 화면ID   : PRJ020104.xfdl
 * 화면명   : 임대주택상한산정
 * 화면설명 : 
 * 작성일   :
 * 작성자   : 
 * 수정이력 : 
 ***********************************************************************
 *     수정일     수정자   내용
 ***********************************************************************
 *
 ***********************************************************************
 */
/***********************************************************************
 * Script Include 
 ***********************************************************************/
// 시스템 공통 라이브러리 Include
include "pms_lib::pmsUtilInclude.xjs";

/***********************************************************************
 * 화면 변수 선언부
 ***********************************************************************/
this.g_GB = 2;	// 상한가구분 : 1:분양산한가, 2:임대상한가, 3:분양산정가, 4:임대산정가

// 설정값 저장컬럼
this.g_initCols = 
	   'BSNS_CODE'
	+ ',BSNS_NM'
	+ ',HOUSE_CODE'
	+ ',HOUSE_CODE_NM'
	+ ',SUPLY_TY_CODE'
	+ ',SUPLY_TY_CODE_NM'
	+ ',BSNS_AR'
	+ ',TOTAR'
	+ ',MEASRMT_RT'
;

 /***********************************************************************
 * onInit / onLoad 영역
 ***********************************************************************/
this.PRJ020104_oninit = function(obj:Form, e:nexacro.InitEventInfo)
{
	this.fn_init();				//공통 폼 초기화
	this.fn_init_form();		//폼 초기화
	this.fn_init_dataset();		//Dataset 초기화

	this.ds_cond1.setColumn(0, "UPLMTPC_SE", this.g_GB);

	this.form_id = application.gv_curFormId + '_';
}

this.PRJ020104_onload = function(obj:Form, e:nexacro.LoadEventInfo)
{
	// 공통코드처리
	this.div_search.cal_1.set_value(this.dateUtils.today());
//	this.fn_loadCombo();

	var bsns_cd = this.fn_Profile(this.ds_cond0, 0);
	if(bsns_cd)
		this.fn_search();
}

this.fn_Profile = function(ds:Dataset, bSave)
{
return;
	var val;
	var form_id = this.form_id;
	var cols = this.g_initCols.split(',');
	var row = ds.rowposition;
	var nRet;

	var fnLoad = function() {		// 설정 불러오기
		val = application.getPrivateProfile(form_id + cols[i]);
		ds.setColumn(row, cols[i], val);
		if(i==0) {
			if(!val)
				return 1;
			nRet = val;
		}
	}

	var fnSave = function() {		// 설정 저장하기
		val = ds.getColumn(row, cols[i]);
		application.setPrivateProfile(form_id + cols[i], val);
	}

	var fn = bSave ? fnSave : fnLoad;
	for(var i=0;i < cols.length;i++)
		if(fn()) {		// 설정 불러오기, 저장하기
			break;
		}

//	this.debug('initCol:'+ds.name+'\n'+ds.saveCSV());
	return nRet;
}

/***********************************************************************
 * Form/Dataset 오브젝트 초기화
 ***********************************************************************/
/*
 * 함수명		: initForm
 * 설명			: Form을 초기화한다.
 * params		: None
 * return Type	: None
 * 사용법		: this.initForm();
 */
this.fn_init_form = function()
{
	// 시스템 공통으로 Form을 Initialize 한다.
//	this.gfn_initForm(this);
}

/*
 * 함수명		: fn_init_dataset
 * 설명 		: Dataset을 초기화한다.
 *					주로, 조건 Dataset들(ds_cond, ds_cond_00, ds_cond_01, ...) 을 초기화한다.
 * params		: None
 * return Type	: None
 * 사용법		: this.fn_init_dataset();
 */
this.fn_init_dataset = function()
{
	// 조건에 사용되는 Dataset 초기화
	this.gfn_initCondDs(this, this.div_search);

	this.checkDs.push(this.ds_tot);
	this.checkDs.push(this.ds_gtn);
	this.checkDs.push(this.ds_rent);
	this.checkDs.push(this.ds_land);
	this.checkDs.push(this.ds_bldg);
}

/***********************************************************************
 * 공통 코드 조회
 ***********************************************************************/
/*
 * 함수명		: fn_loadCombo
 * 설명			: 화면의 Combo 에 데이터를 불러온다.
 * params		: None
 * return Type	: None
 * 사용법		: this.fn_loadCombo();
 */
this.fn_loadCombo = function ()
{
/*
	params		: 1. param_1	: 반환받을 DATASET 명			(예: ds_comCode00)
				  2. param_2	: 그룹코드						(예 : COM007)
				  3. param_3	: 사용여부						(예 : 1(사용), ""(사용안함))
				  4. param_4	: 콤보박스INDEX(0) 표시			(예 : "전체", "선택", " "(공백), ""(첫번째데이터부터시작) )
*/
	var comboParams = [
		['ds_PRJ010','PRJ010',1,'']		// 
	   ,['ds_PRJ016','PRJ016',1,'']		// 
	];

	var callback = function (svcId, errorCode, errorMsg) {
	};

	this.gfn_comboLoad (comboParams, callback);
}

/***********************************************************************
* Transaction 영역 시작
************************************************************************/


/***********************************************************************
 * Transaction 관련 이벤트 핸들러 
 **********************************************************************/

/*
 * 함수명		: fn_search
 * 설명			: 조회 이벤트 처리
 * params		: None
 * return Type	: None
 * 사용법		: this.fn_search();
 */
this.fn_search = function()
{
	// Validation 체크
	if(!this.gfn_checkValidation(this.div_search, this.ds_validation)) {
		return;
	}

	// 조회
	this.fn_transaction("houseCountList");
}

/*
 * 함수명		: fn_save
 * 설명 		: 저장 이벤트 처리
 * params		: None
 * return Type	: None
 * 사용법		: this.fn_save();
 */
this.fn_save = function()
{
	if(this.gfn_message("confirm.저장.여부")) {
		this.fn_transaction("save");
	}
}

/**********************************************************************
 * CALL TRANSACTION 영역
 **********************************************************************/
/*
 * 함수명		: fn_transaction
 * 설명			: Transaction 요청 처리 함수
 * params		: strSvcId : 서비스요청 ID
 * return Type	: None
 * 사용법		: this.fn_transaction("SELECT");
 */
this.fn_transaction = function(strSvcId)
{
	if(this.ds_cond1.rowcount < 1) return;

	var sController = "hsco/pms/prj/PRJ020104/" + strSvcId + ".do";
	var sInDatasets = "input1=ds_cond1";
	var sOutDatasets = "";
	switch (strSvcId) {
		case "houseCountList":		// 조회
			sController = "hsco/pms/prj/houseCountList.do";
			sOutDatasets = "ds_types=output1";

			this.ds_cond1.copyRow(0, this.ds_cond0, 0);
			break;
		case "totList":		//  조회
			sOutDatasets = "ds_tot=output1";
			break;
		case "gtnList":		// 
			sOutDatasets = "ds_gtn=output1";
			break;
		case "rentList":	// 
			sOutDatasets = "ds_rent=output1";
			break;
		case "landList":		// 
			sController = "hsco/pms/prj/PRJ020103/landList.do";
			sOutDatasets = "ds_land=output1";
			break;
		case "bldgList":	// 
			sController = "hsco/pms/prj/PRJ020103/bldgList.do";
			sOutDatasets = "ds_bldg=output1";
			break;
		case "save":		// 저장
			sCols = '';
			sInDatasets  =  "input_tot=ds_tot:U";
			sInDatasets += " input_gtn=ds_gtn:U";
			sInDatasets += " input_rent=ds_rent:U";
			sInDatasets += " input_land=ds_land:U";
			sInDatasets += " input_bldg=ds_bldg:U";
			break;
	}

	this.fn_clearData(strSvcId);

	this.debug('tr:' + strSvcId + '\n' + this.ds_cond1.saveCSV());
	Ex.core.tran(this, strSvcId, sController, sInDatasets, sOutDatasets);// , "", sCallbackFunc, sShowProgress, bAsync, bBinary); 
}

this.fn_clearData = function (strSvcId)
{
	switch (strSvcId) {
		case "houseCountList":		// 조회
			this.ds_types.clearData();
		case "totList":			// 
			this.ds_tot.clearData();
		case "gtnList":			// 
			this.ds_gtn.clearData();
		case "rentList":		// 
			this.ds_rent.clearData();
		case "landList":			// 
			this.ds_land.clearData();
		case "bldgList":		// 
			this.ds_bldg.clearData();
	}
}

 /**********************************************************************
 * Transaction Callback 영역
 ***********************************************************************/
 /*
 * 함수명		: fn_callBack
 * 설명			: Transaction Callback 처리
 * params		: strSvcId    : 서비스요청 ID
 *					nErrorCode  : 오류 메시지 코드 ([예] 0 : Success, 그밖의 경우, error)
 *					strErrorMsg : 오류 메시지([예]  success.insert|정상적으로 등록되었습니다.)
 * return Type	: None
 * 사용법		: 
 */
this.fn_callBack = function (strSvcId, nErrorCode, strErrorMsg)
{
this.debug("fn_callBack() - " + strSvcId + ',' + nErrorCode + ',' + strErrorMsg);
	if (nErrorCode != 0) 
	{
		// 오류 메시지를 보여주는 동작 외에 처리할 내용이 있으면 아래에 기술.
		// 처리할 내용이 없다면, switch 문은 생략합니다.
		return this.gfn_callback_message(strSvcId, nErrorCode, strErrorMsg);
	}

	switch(strSvcId)
	{
		case "houseCountList":
			this.fn_transaction("totList");
			this.fn_transaction("gtnList");
			this.fn_transaction("rentList");
			this.fn_transaction("landList");
			this.fn_transaction("bldgList");
			break;
		case "save":
			this.fn_search();
			break;
	}
}

/**********************************************************************
 * Transaction Callback 영역 끝
 ***********************************************************************/
 
/**********************************************************************
 * Non-Transaction 영역
 ***********************************************************************/
/**********************************************************************
 * 사용자정의 함수
 ***********************************************************************/
this.ds_onrowposchanged = function(obj:Dataset, e:nexacro.DSRowPosChangeEventInfo)
{
//this.debug('onrow:'+obj.name + ' = ' + e.newrow);
	if(obj.rowcount < 1) return;

	switch(obj)
	{
		case this.ds_types:
		case this.ds_tot:
		case this.ds_land:
		case this.ds_bldg:
		case this.ds_gtn:
		case this.ds_rent:
			this.fn_ds_setRow(obj, e.newrow);
			break;
	}
}

this.g_DSs = [
	 this.ds_types
	,this.ds_tot
	,this.ds_land
	,this.ds_bldg
	,this.ds_gtn
	,this.ds_rent
];

this.g_bUpdate = false;
this.fn_ds_setRow = function(obj:Dataset, row)
{
	if(this.g_bUpdate) return;
this.debug('setRow:'+obj.name + ' = ' + row);
	if(obj.rowcount < 1) return;

	this.g_bUpdate = true;
	var ds;
	for(var i=0;i < this.g_DSs.length;i++) {
		ds = this.g_DSs[i];
//		this.debug('onrow:'+ds.name);
		if(!ds) continue;
		if(ds == obj) continue;

		ds.set_rowposition(row);
	}
	this.g_bUpdate = false;
}

 /*
 * 함수명  	: div_search_btn_1_onclick
 * 설명 		: Popup 호출 처리
 * params  		: None
 * return Type 	: None
 * 사용법		: div_search_btn_1_onclick();
 */
this.btn_bsns_onclick = function(obj:Button,  e:nexacro.ClickEventInfo)
{
	this.fn_PopupBsns();
}

// 주택코드 팝업
this.fn_PopupBsns = function()
{
	var fn_cb = function(sPopupId, sReturn)
	{
		if(!sReturn) return;
		this.debug('OK\n'  + sReturn);

		var dsRet = new Dataset();
		nRowCnt = dsRet.loadXML(sReturn);
		if(nRowCnt < 1) return;

		var sCols = 
			  "BSNS_CODE=BSNS_CODE"
			+",BSNS_NM=BSNS_NM"
			+",HOUSE_CODE=HOUSE_CODE"
			+",HOUSE_CODE_NM=HOUSE_CODE_NM"
			+",SUPLY_TY_CODE=SUPLY_TY_CODE"
			+",SUPLY_TY_CODE_NM=SUPLY_TY_CODE_NM"
			+",BSNS_AR=BSNS_AR"
			+",TOTAR=TOTAR"
			+",MEASRMT_RT=MEASRMT_RT"
		;

		var ds = this.ds_cond0;
		var row = ds.rowposition;
		ds.copyRow(row, dsRet, 0);//, sCols);

		this.fn_Profile(ds, 1);

		this.fn_search();
	}

	var param = {
		arg_0 : this,  //==> 필수, 팝업을 호출하는 form을 참조할 수 있도록 팝업에 Argument로 넘겨준다. (반드시 기술해야 함.)
		arg_1 : this.div_search.edt_11.text,
	};	
	this.gfn_popup('popHouCode', 500, 500, '', param, "pms_prj::popHouCode.xfdl", fn_cb, 1);
}

 /*
 * 함수명  	: ds_land_oncolumnchanged
 * 설명 		: 대지비 입력또는 변경시
 * params  		: None
 * return Type 	: None
 * 사용법		: this.ds_land_oncolumnchanged();
 */
this.ds_land_oncolumnchanged = function(obj:Dataset, e:nexacro.DSColChangeEventInfo)
{
this.debug('oncol:' + obj.name + ' - ' + e.row + ':' + e.columnid + '=' + e.newvalue);
	if(e.columnid  == 'SPLPC'||'INTR')	// 공급가격, 이자
	{
		var cnt  = parseInt(obj.getColumn(e.row, 'HSHLD_CO'))||0;	// 세대수
		var Tot  = parseInt(obj.getColumn(e.row, 'SPLPC'))||0;		// 공급가격
			Tot += parseInt(obj.getColumn(e.row, 'INTR'))||0;		// 이자
		var hshld = parseInt(Tot / cnt)||0;

		obj.setColumn(e.row, 'TOTAL', Tot);				// 계
		obj.setColumn(e.row, 'HSHLD_AMOUNT', hshld);	// 세대금액
		this.ds_tot.setColumn(e.row, 'HSHLD_AMOUNT', hshld);
		this.ds_tot.setColumn(e.row, 'PLOT_CT', Tot);
		this.ds_gtn.setColumn(e.row , 'BSIS_AMOUNT' , hshld);		// 기초금액
		this.ds_tot.setColumn(e.row , 'BSIS_AMOUNT' , hshld);
	}

	if(e.columnid  == 'PLOT_QOTA')		// 대지지분
	{
		var Tot  = parseInt(e.newvalue)||0;							// 대지지분
			Tot *= parseInt(obj.getColumn(e.row, 'HSHLD_CO'))||0;	// 세대수

		obj.setColumn(e.row, 'QOTA_SM', Tot);			// 지분합계
	}
}

 /*
 * 함수명  	: ds_bldg_oncolumnchanged
 * 설명 		: 건축비 입력또는 변경시
 * params  		: None
 * return Type 	: None
 * 사용법		: this.ds_bldg_oncolumnchanged();
 */
this.ds_bldg_oncolumnchanged = function(obj:Dataset, e:nexacro.DSColChangeEventInfo)
{
this.debug('oncol:' + obj.name + ' - ' + e.row + ':' + e.columnid + '=' + e.newvalue);
	if(e.columnid  == 'HSHLD_AMOUNT')			// 세대금액
	{
		var Tot  = parseInt(e.newvalue)||0;
			Tot += parseInt(this.ds_land.getColumn(e.row, 'HSHLD_AMOUNT'))||0;

		this.ds_tot.setColumn(e.row, 'HSHLD_AMOUNT', Tot);
	}
}

 /*
 * 함수명  	: ds_gtn_oncolumnchanged
 * 설명 		: 보증금 입력또는 변경시
 * params  		: None
 * return Type 	: None
 * 사용법		: this.ds_gtn_oncolumnchanged();
 */
this.ds_gtn_oncolumnchanged = function(obj:Dataset, e:nexacro.DSColChangeEventInfo)
{
this.debug('oncol:' + obj.name + ' - ' + e.row + ':' + e.columnid + '=' + e.newvalue);
	if(e.columnid  == 'SPLPC'||'INTR')				// 공급가격, 이자
	{
		var cnt  = parseInt(obj.getColumn(e.row, 'HSHLD_CO'))||0;	// 세대수
		var Tot  = parseInt(obj.getColumn(e.row, 'SPLPC'))||0;		// 공급가격
			Tot += parseInt(obj.getColumn(e.row, 'INTR'))||0;		// 이자
		var hshld = parseInt(Tot / cnt)||0;
		obj.setColumn(e.row, 'TOTAL', Tot);
	}

	if(e.columnid  == 'PLOT_QOTA')				// 대지지분
	{
		var Tot  = parseInt(e.newvalue)||0;
			Tot *= parseInt(obj.getColumn(e.row, 'HSHLD_CO'))||0;	// 세대수

		obj.setColumn(e.row, 'QOTA_SM', Tot);						// 지분합계
	}

	if(e.columnid  == 'BSIS_AMOUNT'||'KJF')	// 기초금액, 국민주택기금
	{
		var nBSIS = parseInt(obj.getColumn(e.row, 'BSIS_AMOUNT'))||0;
		var nDDCT = nBSIS - parseInt(obj.getColumn(e.row, 'KJF'))||0;
		var nGTN = nDDCT * 0.5;

		obj.setColumn(e.row, 'DDCT_AM', nDDCT);						// 차감액 = 기초금액 - 국민주택기금
		obj.setColumn(e.row, 'GTN', nGTN);							// 보증금
		this.ds_tot.setColumn(e.row, 'GTN', nGTN);
		this.ds_tot.setColumn(e.row, 'BSIS_AMOUNT', nBSIS);			// 기초금액
		this.ds_land.setColumn(e.row, 'GTN', nGTN);
		this.ds_land.setColumn(e.row, 'BSIS_AMOUNT', nBSIS);
	}
}

 /*
 * 함수명  	: ds_rent_oncolumnchanged
 * 설명 		: 월임대료 입력또는 변경시
 * params  		: None
 * return Type 	: None
 * 사용법		: this.ds_rent_oncolumnchanged();
 */
this.ds_rent_oncolumnchanged = function(obj:Dataset, e:nexacro.DSColChangeEventInfo)
{
this.debug('oncol:' + obj.name + ' - ' + e.row + ':' + e.columnid + '=' + e.newvalue);
	if(e.columnid == 'DPRC_NON'||'RPAIRS_MNTNC_CT'||'IRNCF'||'ENDW_INTR'||'TAXDUE'||'MGNTC_CPTAL_INTR')
	{
		var Tot  = parseInt(obj.getColumn(e.row, 'DPRC_NON'))||0;				// 감가상각비
		    Tot += parseInt(obj.getColumn(e.row, 'RPAIRS_MNTNC_CT'))||0;		// 수선유지비용
		    Tot += parseInt(obj.getColumn(e.row, 'IRNCF'))||0;					// 보험료
		    Tot += parseInt(obj.getColumn(e.row, 'ENDW_INTR')||0);				// 기금이자
		    Tot += parseInt(obj.getColumn(e.row, 'TAXDUE'))||0;					// 제세공과금
		    Tot += parseInt(obj.getColumn(e.row, 'MGNTC_CPTAL_INTR')||0);		// 자기자금이자

		this.ds_rent.setColumn(e.row, 'TOTAL', Tot);
		this.ds_tot.setColumn(e.row, 'RNTCHRG', Tot);		// 임대료
	}
}
]]></Script>
  </Form>
</FDL>
