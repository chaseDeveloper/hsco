<?xml version="1.0" encoding="utf-8"?>
<FDL version="1.5">
  <TypeDefinition url="..\..\..\default_typedef.xml"/>
  <Form id="SLS020208" classname="SLS020208" left="0" top="0" width="1059" height="765" titletext="주택계약관리" oninit="SLS020208_oninit" onload="SLS020208_onload">
    <Layouts>
      <Layout>
        <Div id="div_search" taborder="0" left="0" top="0" right="28" height="33" cssclass="div_WFSA_Box">
          <Layouts>
            <Layout>
              <Static id="Static00" taborder="4" text="주택코드" cssclass="sta_WFSA_Label" left="7" top="5" width="64" height="21" style="background:URL('theme://images/sta_WFSA_Label.png') left middle;"/>
              <Combo id="cmb_houseCodeSh" taborder="0" left="71" top="5" width="212" height="21" innerdataset="@ds_houseCodeSh" codecolumn="HOUSE_CODE" datacolumn="ALL_HOUSE_NM" index="-1" onitemchanged="fn_comboOnItemChangeHandler" type="filter" autoselect="true"/>
              <Static id="Static16" taborder="5" text="동/호" cssclass="sta_WFSA_Label" left="298" top="5" width="50" height="21"/>
              <Static id="Static02" taborder="6" text="성명" cssclass="sta_WFSA_Label" left="527" top="5" width="38" height="21"/>
              <Edit id="edt_cntrctrNm" taborder="3" left="565" top="5" width="120" height="21" lengthunit="utf8" maxlength="100" visible="true" enable="true"/>
              <Edit id="cmb_dongHoSh" taborder="1" left="350" top="6" width="74" height="21"/>
              <Edit id="cmb_hoSh" taborder="2" left="438" top="6" width="74" height="21"/>
              <Static id="Static17" taborder="7" text="/" top="5" height="21" width="5" left="427"/>
            </Layout>
          </Layouts>
        </Div>
        <Static id="Static00" taborder="1" text="15" visible="false" left="1031" top="0" width="15" height="763" style="background:#1b3cd23c;align:center middle;"/>
        <Static id="Static01" taborder="2" text="스&#13;&#10;크&#13;&#10;롤&#13;&#10;13" visible="false" top="0" right="0" width="13" height="763" style="background:#d07b173c;align:center middle;"/>
        <Static id="Static07" taborder="3" text="10" visible="false" left="-6" top="43" width="1031" height="10" style="background:#dc143c3c;align:center middle;"/>
        <Static id="Static31" taborder="4" text="계약목록" cssclass="sta_WF_Title02" left="0" top="50" width="130" height="19"/>
        <Grid id="grd_hcntrctrList" taborder="6" useinputpanel="false" left="0" top="69" width="263" binddataset="ds_hcntrctrList" autofittype="col" bottom="0">
          <Formats>
            <Format id="default">
              <Columns>
                <Column size="30"/>
                <Column size="105"/>
                <Column size="70"/>
                <Column size="60"/>
              </Columns>
              <Rows>
                <Row size="24" band="head"/>
                <Row size="24"/>
                <Row size="24" band="summ"/>
              </Rows>
              <Band id="head">
                <Cell text="순번"/>
                <Cell col="1" text="주택코드"/>
                <Cell col="2" text="동/호"/>
                <Cell col="3" text="계약자"/>
              </Band>
              <Band id="body">
                <Cell expr="expr:currow + 1"/>
                <Cell col="1" style="align:left;color:EXPR((CNTRCTR_STTUS_CODE==&quot;02&quot;)?&quot;red&quot;:&quot;&quot;);color2:EXPR((CNTRCTR_STTUS_CODE==&quot;02&quot;)?&quot;red&quot;:&quot;&quot;);" text="bind:ALL_HOUSE_NM"/>
                <Cell col="2" style="color:EXPR((CNTRCTR_STTUS_CODE==&quot;02&quot;)?&quot;red&quot;:&quot;&quot;);color2:EXPR((CNTRCTR_STTUS_CODE==&quot;02&quot;)?&quot;red&quot;:&quot;&quot;);" text="bind:DONG_HO"/>
                <Cell col="3" style="color:EXPR((CNTRCTR_STTUS_CODE==&quot;02&quot;)?&quot;red&quot;:&quot;&quot;);color2:EXPR((CNTRCTR_STTUS_CODE==&quot;02&quot;)?&quot;red&quot;:&quot;&quot;);" text="bind:CSTMR_NM"/>
              </Band>
              <Band id="summary">
                <Cell colspan="4" displaytype="number" style="align:left;" text="expr:dataset.getRowCount()" mask="expr:dataset.getRowCount() == 0  ? &quot;건수 : 0&quot;  : '건수 : #,###'"/>
              </Band>
            </Format>
          </Formats>
        </Grid>
        <Static id="Static08" taborder="7" text="5" visible="false" left="0" top="64" width="1031" height="5" style="background:#dc143c3c;align:center middle;"/>
        <Static id="Static05" taborder="8" text="10" visible="false" left="263" top="69" width="10" height="675" style="background:#1b3cd23c;align:center middle;"/>
        <Static id="Static02" taborder="10" text="시설물점검 내역" cssclass="sta_WF_Title02" left="273" top="50" width="130" height="19"/>
        <CheckBox id="chk_cntrctrSttusCode" taborder="19" text="해약자만 검색" value="02" truevalue="02" falsevalue="01" onclick="div_search_chk_cntrctrSttusCode_onclick" left="164" top="50" width="100" height="21" visible="false"/>
        <Div id="Div00" taborder="30" text="Div00" top="69" scrollbars="none" bottom="0" right="28" left="273">
          <Layouts>
            <Layout>
              <Static id="Static02" taborder="2" text="점검의뢰" cssclass="sta_WF_Title02" left="0.13%" top="4" right="68.21%" height="19"/>
              <Div id="Div01" taborder="3" top="25" height="206" cssclass="div_WFSA_Box" left="0" right="0%" style="background:transparent;border:1 solid transparent ;">
                <Layouts>
                  <Layout>
                    <Static id="Static04" taborder="81" cssclass="sta_WF_Labelbg" top="119" height="79" right="0.26%" left="32"/>
                    <Static id="Static03" taborder="82" cssclass="sta_WF_Labelbg" top="26" height="94" width="722" right="2"/>
                    <Static id="Static14" taborder="83" cssclass="sta_WF_Labelbg" top="0" height="27" right="0.26%" left="32"/>
                    <Calendar id="cal_CHCK_BGNDE" taborder="84" dateformat="yyyy-MM-dd" cssclass="cal_WF_Readonly" top="3" height="21" left="96" width="115" readonly="true"/>
                    <Calendar id="cal_CHCK_ENDDE" taborder="85" dateformat="yyyy-MM-dd" cssclass="cal_WF_Readonly" top="3" height="21" left="233" width="115" readonly="true"/>
                    <Static id="Static05" taborder="86" text="~" top="3" height="21" style="align:center middle;" left="211" width="22"/>
                    <TextArea id="txt_DLIV_MATTER" taborder="87" lengthunit="utf8" maxlength="200" cssclass="txt_WF_Readonly" top="29" height="88" left="96" right="0.26%" readonly="true"/>
                    <TextArea id="txt_REFER_MATTER" taborder="88" lengthunit="utf8" maxlength="200" top="122" height="73" left="96" right="0.26%" cssclass="txt_WF_Readonly" readonly="true"/>
                    <Static id="Static15" taborder="89" text="점검기간" cssclass="sta_WF_Label" top="0" height="27" left="0" width="94"/>
                    <Static id="Static06" taborder="90" text="퇴거예정일" cssclass="sta_WF_Label" top="0" height="27" width="94" left="351"/>
                    <Static id="Static02" taborder="91" text="전달사항" cssclass="sta_WF_Label" left="0" top="26" height="94" style="align:left middle;" width="94"/>
                    <Static id="Static00" taborder="92" text="비고" cssclass="sta_WF_Label" left="0" top="119" height="79" style="align:left middle;" width="94"/>
                    <Calendar id="cal_lvhsDe" taborder="93" dateformat="yyyy-MM-dd" cssclass="cal_WF_Readonly" top="3" height="21" left="447" width="115" readonly="true"/>
                  </Layout>
                </Layouts>
              </Div>
              <Div id="Div00" taborder="4" top="246" height="214" cssclass="div_WFSA_Box" left="0" right="0%" style="background:transparent;border:1 solid transparent ;color:transparent;">
                <Layouts>
                  <Layout>
                    <Static id="Static04" taborder="90" cssclass="sta_WF_Labelbg" left="0%" top="26" right="0.28%" height="92"/>
                    <Static id="Static05" taborder="91" cssclass="sta_WF_Labelbg" left="0%" top="117" right="0.28%" height="88"/>
                    <Static id="Static14" taborder="92" cssclass="sta_WF_Labelbg" top="0" right="0.28%" height="27" left="0"/>
                    <TextArea id="txt_CHCK_DTLS" taborder="93" readonly="false" lengthunit="utf8" maxlength="200" top="29" height="86" left="96" right="0.26%"/>
                    <TextArea id="txt_RPAIRS_DTLS" taborder="94" readonly="false" lengthunit="utf8" maxlength="200" top="120" height="82" left="96" right="0.26%"/>
                    <Calendar id="cal_RCEPT_DE" taborder="95" dateformat="yyyy-MM-dd" top="3" height="21" left="96" width="105" readonly="false"/>
                    <Static id="Static06" taborder="96" text="해약자부담금액" cssclass="sta_WF_Label" top="0" height="27" left="411" width="105"/>
                    <Static id="Static02" taborder="97" text="시설보수금액" cssclass="sta_WF_Label" top="0" height="27" left="203" width="104"/>
                    <Static id="Static00" taborder="98" text="점검일자" cssclass="sta_WF_Label" top="0" height="27" left="0" width="94"/>
                    <Static id="Static07" taborder="99" text="점검내역 &#13;&#10;및 점검결과" cssclass="sta_WF_Label" left="0" top="26" height="92" width="94"/>
                    <Static id="Static01" taborder="100" text="비고" cssclass="sta_WF_Label" left="0" top="117" height="88" width="94"/>
                    <MaskEdit id="msk_FCLTY_RPAIRS_AMOUNT" taborder="101" readonly="false" mask="###,###,###,###,###" onchanged="fn_cancelRentReturnAmtSearchCall" top="3" height="21" left="309" width="100"/>
                    <MaskEdit id="msk_BND_AMOUNT" taborder="102" readonly="false" mask="###,###,###,###,###" onchanged="fn_cancelRentReturnAmtSearchCall" top="3" height="21" left="518" width="100"/>
                  </Layout>
                </Layouts>
              </Div>
              <Static id="Static03" taborder="5" text="점검결과" cssclass="sta_WF_Title02" left="0%" top="227" right="68.6%" height="19"/>
              <Grid id="grd_ladPayStdrList" taborder="6" binddataset="ds_fileList" useinputpanel="false" oncelldblclick="Tab00_tabpage1_grd_ladPayStdrList_oncelldblclick" top="489" right="0%" bottom="0" left="0" autofittype="col">
                <Formats>
                  <Format id="default">
                    <Columns>
                      <Column size="40"/>
                      <Column size="100"/>
                      <Column size="587"/>
                    </Columns>
                    <Rows>
                      <Row size="24" band="head"/>
                      <Row size="24"/>
                    </Rows>
                    <Band id="head">
                      <Cell displaytype="checkbox" edittype="checkbox"/>
                      <Cell col="1" text="순번"/>
                      <Cell col="2" text="파일명"/>
                    </Band>
                    <Band id="body">
                      <Cell displaytype="checkbox" edittype="checkbox" text="bind:CHK"/>
                      <Cell col="1" text="bind:FILE_ORDR"/>
                      <Cell col="2" text="bind:ORGINL_FILE_NM"/>
                    </Band>
                  </Format>
                </Formats>
              </Grid>
              <Button id="btn_fileAdd" taborder="7" text="파일추가" onclick="fn_addFile" cssclass="btn_WF_Gridadd" visible="true" top="464" height="19" left="0" width="75"/>
              <Button id="btn_fileDel" taborder="8" text="파일삭제" onclick="fn_deleteFile" cssclass="btn_WF_Griddel" visible="true" top="464" height="19" left="78" width="75"/>
              <Button id="btn_download" taborder="9" text="다운로드" onclick="fn_downloadAtchFile" cssclass="btn_WF_Process" top="464" height="19" visible="true" left="155" width="75"/>
            </Layout>
          </Layouts>
        </Div>
      </Layout>
    </Layouts>
    <Bind>
      <BindItem id="item0" compid="div_topArea.cmb_houseCode" propid="value" datasetid="ds_hcntrctrInfo" columnid="HOUSE_CODE"/>
      <BindItem id="item1" compid="div_topArea.edt_dong" propid="value" datasetid="ds_hcntrctrInfo" columnid="DONG"/>
      <BindItem id="item2" compid="div_topArea.edt_ho" propid="value" datasetid="ds_hcntrctrInfo" columnid="HO"/>
      <BindItem id="item3" compid="Div00.cmb_houseCodeSh" propid="value" datasetid="ds_cond00" columnid="HOUSE_CODE"/>
      <BindItem id="item4" compid="Div00.edt_dong" propid="value" datasetid="ds_cond00" columnid="DONG"/>
      <BindItem id="item5" compid="Div00.edt_ho" propid="value" datasetid="ds_cond00" columnid="HO"/>
      <BindItem id="item6" compid="Div00.cmb_pyeong" propid="value" datasetid="ds_cond00" columnid="PYEONG"/>
      <BindItem id="item7" compid="Div00.edt_cntrctrNo" propid="value" datasetid="ds_cond00" columnid="CNTRCTR_NM"/>
      <BindItem id="item8" compid="Div00.chk_cntrctrSttusCode" propid="value" datasetid="ds_cond00" columnid="CNTRCTR_STTUS_CODE"/>
      <BindItem id="item39" compid="div_search.cmb_houseCodeSh" propid="value" datasetid="ds_cond00" columnid="HOUSE_CODE"/>
      <BindItem id="item43" compid="div_search.edt_cntrctrNm" propid="value" datasetid="ds_cond00" columnid="CSTMR_NM"/>
      <BindItem id="item63" compid="chk_cntrctrSttusCode" propid="value" datasetid="ds_cond00" columnid="CNTRCTR_STTUS_CODE"/>
      <BindItem id="item22" compid="cmb_hoSh" propid="value" datasetid="ds_cond00" columnid="HO"/>
      <BindItem id="item64" compid="cmb_dongHoSh" propid="value" datasetid="ds_cond00" columnid="DONG"/>
      <BindItem id="item30" compid="edt_rm" propid="value" datasetid="ds_hcntrctrInfo" columnid="RM"/>
      <BindItem id="item40" compid="div_search.cmb_dongHoSh" propid="value" datasetid="ds_cond00" columnid="DONG"/>
      <BindItem id="item41" compid="div_search.cmb_hoSh" propid="value" datasetid="ds_cond00" columnid="HO"/>
      <BindItem id="item9" compid="Div00.Div01.cal_CHCK_BGNDE" propid="value" datasetid="ds_rentCancelChckReqestInfo" columnid="CHCK_BGNDE"/>
      <BindItem id="item10" compid="Div00.Div01.cal_CHCK_ENDDE" propid="value" datasetid="ds_rentCancelChckReqestInfo" columnid="CHCK_ENDDE"/>
      <BindItem id="item11" compid="Div00.Div01.cal_lvhsDe" propid="value" datasetid="ds_rentCancelChckReqestInfo" columnid="LVHS_PREARNGE_DE"/>
      <BindItem id="item12" compid="Div00.Div01.txt_DLIV_MATTER" propid="value" datasetid="ds_rentCancelChckReqestInfo" columnid="DLIV_MATTER"/>
      <BindItem id="item13" compid="Div00.Div00.cal_RCEPT_DE" propid="value" datasetid="ds_rentCancelChckDspthInfo" columnid="CHCK_DE"/>
      <BindItem id="item14" compid="Div00.Div00.msk_FCLTY_RPAIRS_AMOUNT" propid="value" datasetid="ds_rentCancelChckDspthInfo" columnid="FCLTY_RPAIRS_AMOUNT"/>
      <BindItem id="item15" compid="Div00.Div00.msk_BND_AMOUNT" propid="value" datasetid="ds_rentCancelChckDspthInfo" columnid="BND_AMOUNT"/>
      <BindItem id="item16" compid="Div00.Div00.txt_CHCK_DTLS" propid="value" datasetid="ds_rentCancelChckDspthInfo" columnid="CHCK_DTLS"/>
      <BindItem id="item17" compid="Div00.Div00.txt_RPAIRS_DTLS" propid="value" datasetid="ds_rentCancelChckDspthInfo" columnid="RPAIRS_DTLS"/>
      <BindItem id="item18" compid="Div00.Div01.txt_REFER_MATTER" propid="value" datasetid="ds_rentCancelChckReqestInfo" columnid="REFER_MATTER"/>
    </Bind>
    <Objects>
      <Dataset id="ds_validation" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="compId" type="STRING" size="256"/>
          <Column id="colId" type="STRING" size="256"/>
          <Column id="PK" type="STRING" size="256"/>
          <Column id="notNull" type="STRING" size="256"/>
          <Column id="type" type="STRING" size="256"/>
          <Column id="nlength" type="STRING" size="256"/>
          <Column id="from" type="STRING" size="256"/>
          <Column id="to" type="STRING" size="256"/>
          <Column id="lengthChkGb" type="STRING" size="256"/>
          <Column id="msgId" type="STRING" size="256"/>
          <Column id="expr" type="STRING" size="256"/>
          <Column id="func" type="STRING" size="256"/>
        </ColumnInfo>
        <Rows>
          <Row>
            <Col id="compId">div_search</Col>
            <Col id="colId">cmb_houseSeSh</Col>
            <Col id="notNull">Y</Col>
            <Col id="msgId">주택구분</Col>
          </Row>
          <Row>
            <Col id="compId">div_search</Col>
            <Col id="colId">cmb_houseCodeSh</Col>
            <Col id="PK"/>
            <Col id="notNull">N</Col>
            <Col id="type"/>
            <Col id="nlength"/>
            <Col id="from"/>
            <Col id="to"/>
            <Col id="lengthChkGb"/>
            <Col id="msgId">주택코드</Col>
            <Col id="expr"/>
            <Col id="func"/>
          </Row>
        </Rows>
      </Dataset>
      <Dataset id="ds_cond00" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="HOUSE_SE" type="STRING" size="256"/>
          <Column id="HOUSE_CODE" type="STRING" size="256"/>
          <Column id="DONG_HO" type="STRING" size="256"/>
          <Column id="DONG" type="STRING" size="256"/>
          <Column id="HO" type="STRING" size="256"/>
          <Column id="AEA" type="STRING" size="256"/>
          <Column id="CSTMR_NM" type="STRING" size="256"/>
          <Column id="CNTRCTR_STTUS_CODE" type="STRING" size="256"/>
          <Column id="CNTRCTR_STTUS_AT" type="STRING" size="256"/>
          <Column id="RENT_LTTOT_CNVRS_AT" type="STRING" size="256"/>
          <Column id="CNTRCTR_NM" type="STRING" size="256"/>
          <Column id="EMPTY_CODE" type="STRING" size="256"/>
        </ColumnInfo>
        <Rows>
          <Row>
            <Col id="CNTRCTR_STTUS_CODE">01</Col>
          </Row>
        </Rows>
      </Dataset>
      <Dataset id="ds_cond01" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="CNTRCTR_NO" type="STRING" size="256"/>
          <Column id="HOUSE_CODE" type="STRING" size="256"/>
          <Column id="DONG_HO" type="STRING" size="256"/>
          <Column id="DONG" type="STRING" size="256"/>
          <Column id="HO" type="STRING" size="256"/>
          <Column id="CNTRCTR_STTUS_CODE" type="STRING" size="256"/>
          <Column id="SANCTN_AT" type="STRING" size="256"/>
        </ColumnInfo>
        <Rows>
          <Row/>
        </Rows>
      </Dataset>
      <Dataset id="ds_cond02" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="CNTRCTR_NO" type="STRING" size="256"/>
          <Column id="CNTRCTR_CSTMR_NO" type="STRING" size="256"/>
          <Column id="LTTOT_RENT_SE" type="STRING" size="256"/>
          <Column id="HOUSE_TY_CODE" type="STRING" size="256"/>
          <Column id="HOUSE_CODE" type="STRING" size="256"/>
          <Column id="DONG" type="STRING" size="256"/>
          <Column id="HO" type="STRING" size="256"/>
        </ColumnInfo>
        <Rows>
          <Row/>
        </Rows>
      </Dataset>
      <Dataset id="ds_cond03" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="CNTRCTR_NO" type="STRING" size="256"/>
          <Column id="HOUSE_CODE" type="STRING" size="256"/>
          <Column id="DONG" type="STRING" size="256"/>
          <Column id="HO" type="STRING" size="256"/>
        </ColumnInfo>
        <Rows>
          <Row/>
        </Rows>
      </Dataset>
      <Dataset id="ds_condCombo00" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="HOUSE_CODE" type="STRING" size="256"/>
        </ColumnInfo>
        <Rows>
          <Row/>
        </Rows>
      </Dataset>
      <Dataset id="ds_houseCodeSh" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="HOUSE_CODE" type="STRING" size="256"/>
          <Column id="HOUSE_NM" type="STRING" size="256"/>
          <Column id="ALL_HOUSE_NM" type="STRING" size="256"/>
          <Column id="HOUSE_SE" type="STRING" size="256"/>
          <Column id="USE_AT" type="STRING" size="256"/>
        </ColumnInfo>
        <Rows>
          <Row/>
        </Rows>
      </Dataset>
      <Dataset id="ds_houseCode" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="HOUSE_CODE" type="STRING" size="256"/>
          <Column id="HOUSE_NM" type="STRING" size="256"/>
          <Column id="ALL_HOUSE_NM" type="STRING" size="256"/>
          <Column id="HOUSE_SE" type="STRING" size="256"/>
          <Column id="USE_AT" type="STRING" size="256"/>
        </ColumnInfo>
        <Rows>
          <Row/>
        </Rows>
      </Dataset>
      <Dataset id="ds_hcntrctrList" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false" onrowposchanged="ds_hcntrctrList_onrowposchanged">
        <ColumnInfo>
          <Column id="HOUSE_CODE" type="STRING" size="256"/>
          <Column id="HOUSE_NM" type="STRING" size="256"/>
          <Column id="ALL_HOUSE_NM" type="STRING" size="256"/>
          <Column id="HOUSE_SE" type="STRING" size="256"/>
          <Column id="HOUSE_TY_CODE" type="STRING" size="256"/>
          <Column id="DONG_HO" type="STRING" size="256"/>
          <Column id="DONG" type="STRING" size="256"/>
          <Column id="HO" type="STRING" size="256"/>
          <Column id="AEA" type="STRING" size="256"/>
          <Column id="CSTMR_NM" type="STRING" size="256"/>
          <Column id="SU_NM" type="STRING" size="256"/>
          <Column id="USE_AT" type="STRING" size="256"/>
          <Column id="CNTRCTR_NO" type="STRING" size="256"/>
          <Column id="CNTRCTR_STTUS_CODE" type="STRING" size="256"/>
          <Column id="PLOT_CT" type="STRING" size="256"/>
          <Column id="BILDNG_CT" type="STRING" size="256"/>
          <Column id="SUPLY_AMOUNT" type="STRING" size="256"/>
          <Column id="VAT" type="STRING" size="256"/>
          <Column id="BASS_LTTOT_AMOUNT" type="STRING" size="256"/>
          <Column id="BASS_RNTCHRG" type="STRING" size="256"/>
          <Column id="MT_RNTCHRG" type="STRING" size="256"/>
          <Column id="RCIV_AMOUNT" type="STRING" size="256"/>
          <Column id="NPYAMOUNT" type="STRING" size="256"/>
          <Column id="TY_AEA" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_rentCancelChckDspthInfo" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="HOUSE_CODE" type="STRING" size="256"/>
          <Column id="DONG" type="STRING" size="256"/>
          <Column id="HO" type="STRING" size="256"/>
          <Column id="CHCK_SN" type="STRING" size="256"/>
          <Column id="RCEPT_DE" type="STRING" size="256"/>
          <Column id="CHCK_EMPNO" type="STRING" size="256"/>
          <Column id="CNTRCTR_NO" type="STRING" size="256"/>
          <Column id="HOUSE_NM" type="STRING" size="256"/>
          <Column id="CNTRCTR_NM" type="STRING" size="256"/>
          <Column id="HOUSE_SUPLY_SE" type="STRING" size="256"/>
          <Column id="CNTRCTR_CTTPC" type="STRING" size="256"/>
          <Column id="LVHS_DE" type="STRING" size="256"/>
          <Column id="CHCK_DE" type="STRING" size="256"/>
          <Column id="BND_AMOUNT" type="STRING" size="256"/>
          <Column id="CHCK_DTLS" type="STRING" size="256"/>
          <Column id="RPAIRS_DTLS" type="STRING" size="256"/>
          <Column id="FCLTY_RPAIRS_AMOUNT" type="STRING" size="256"/>
          <Column id="REGISTER_ID" type="STRING" size="256"/>
          <Column id="REGIST_DT" type="STRING" size="256"/>
          <Column id="UPDUSR_ID" type="STRING" size="256"/>
          <Column id="UPDT_DT" type="STRING" size="256"/>
          <Column id="FILE_SN" type="STRING" size="256"/>
          <Column id="ELCTRN_SANCTN_NO" type="STRING" size="256"/>
          <Column id="SANCTN_KND" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_rentCancelChckReqestInfo" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="HOUSE_CODE" type="STRING" size="256"/>
          <Column id="DONG" type="STRING" size="256"/>
          <Column id="HO" type="STRING" size="256"/>
          <Column id="CHCK_SN" type="STRING" size="256"/>
          <Column id="CANCL_DE" type="STRING" size="256"/>
          <Column id="CHCK_EMPNO" type="STRING" size="256"/>
          <Column id="CNTRCTR_NO" type="STRING" size="256"/>
          <Column id="HOUSE_NM" type="STRING" size="256"/>
          <Column id="CNTRCTR_NM" type="STRING" size="256"/>
          <Column id="HOUSE_SUPLY_SE" type="STRING" size="256"/>
          <Column id="CNTRCTR_CTTPC" type="STRING" size="256"/>
          <Column id="LVHS_PREARNGE_DE" type="STRING" size="256"/>
          <Column id="CHCK_BGNDE" type="STRING" size="256"/>
          <Column id="CHCK_ENDDE" type="STRING" size="256"/>
          <Column id="DLIV_MATTER" type="STRING" size="256"/>
          <Column id="REFER_MATTER" type="STRING" size="256"/>
          <Column id="REGISTER_ID" type="STRING" size="256"/>
          <Column id="REGIST_DT" type="STRING" size="256"/>
          <Column id="UPDUSR_ID" type="STRING" size="256"/>
          <Column id="UPDT_DT" type="STRING" size="256"/>
          <Column id="ELCTRN_SANCTN_NO" type="STRING" size="256"/>
          <Column id="SANCTN_AT" type="STRING" size="256"/>
          <Column id="RESCI_RESN_CODE" type="STRING" size="256"/>
          <Column id="CNTRCT_DE" type="STRING" size="256"/>
          <Column id="BASS_GTN" type="STRING" size="256"/>
          <Column id="ALL_HOUSE_NM" type="STRING" size="256"/>
          <Column id="LVHS_DE" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_fileList" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="FILE_SN" type="STRING" size="1000"/>
          <Column id="FILE_ORDR" type="STRING" size="256"/>
          <Column id="FILE_STRE_COURS" type="STRING" size="256"/>
          <Column id="ORGINL_FILE_NM" type="STRING" size="256"/>
          <Column id="STRE_FILE_NM" type="STRING" size="256"/>
          <Column id="FILE_EXTSN" type="STRING" size="256"/>
          <Column id="FILE_TY" type="STRING" size="256"/>
          <Column id="CHK" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_approve" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="DATA_VALUE" type="STRING" size="1000"/>
          <Column id="DATA_TITLE" type="STRING" size="256"/>
          <Column id="O_URL" type="STRING" size="256"/>
          <Column id="I_KEY" type="STRING" size="256"/>
          <Column id="EMPNO" type="STRING" size="256"/>
          <Column id="SEQ" type="STRING" size="256"/>
          <Column id="DEPT_CD" type="STRING" size="256"/>
          <Column id="EMP_CD" type="STRING" size="256"/>
          <Column id="TITLE" type="STRING" size="256"/>
          <Column id="CNTRCTR_NO" type="STRING" size="256"/>
          <Column id="DIV_SE" type="STRING" size="256"/>
          <Column id="HOUSE_CODE" type="STRING" size="256"/>
          <Column id="DONG" type="STRING" size="256"/>
          <Column id="HO" type="STRING" size="256"/>
          <Column id="CHCK_SN" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_cond05" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="FILE_NM" type="STRING" size="255"/>
          <Column id="COURS_NM" type="STRING" size="255"/>
          <Column id="REGISTER_ID" type="STRING" size="255"/>
          <Column id="REGIST_DT" type="STRING" size="255"/>
          <Column id="UPDUSR_ID" type="STRING" size="255"/>
          <Column id="UPDT_DT" type="STRING" size="255"/>
          <Column id="SN" type="STRING" size="255"/>
          <Column id="FILE_SE" type="STRING" size="255"/>
          <Column id="FILE_SN" type="STRING" size="256"/>
          <Column id="CNTRCTR_NO" type="STRING" size="256"/>
          <Column id="SANCTN_NO" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_sancKnd" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="SANCTN_KND" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_APPROVALSTATUS" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="CODE" type="STRING" size="256"/>
          <Column id="CODE_NM" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
    </Objects>
    <Script type="xscript5.0"><![CDATA[/***********************************************************************
 * 화면ID   : RNT050101
 * 화면명   : 하자보수관리
 * 화면설명 : 하자보수관리.
 * 작성일   : 2016.08.17
 * 작성자   : 최승락
 * 수정이력 : 
 ***********************************************************************
 *     수정일     수정자   내용
 ***********************************************************************
 *    2015.00.00   홍길동   fn_xxx() 보완 수정
 ***********************************************************************
 */

/***********************************************************************
 * Script Include 
 ***********************************************************************/
// 시스템 공통 라이브러리 Include
include "pms_lib::pmsUtilInclude.xjs";

/***********************************************************************
 * 화면 변수 선언부
 ***********************************************************************/
// 화면 전역에서 사용할 Form 변수를 선언한다.

this.SYS_SE = "PMS";						// 시스템 구분
this.JOB_SE = "RPA";						// 업무 구분
this.FILE_MANAGER = null;					// 파일 업/다운로더

var rowpos = "";
var select_at = false;
var save_row = -1;
this.chargerYn = 'N';		// 화면 접근 허용 여부

/***********************************************************************
 * onInit / onLoad 영역
 ***********************************************************************/
this.SLS020208_oninit = function(obj:Form, e:nexacro.InitEventInfo)
{	
	this.fn_init();             // 공통 폼 초기화
	this.fn_init_form();		// Form 초기화
	this.fn_init_dataset();		// DataSet 초기화		
}
 
this.SLS020208_onload = function(obj:Form, e:nexacro.LoadEventInfo)
{	
	this.fn_loadCombo();
	var paramMap = {};	
	paramMap["USE_AT"] = "1";
	paramMap["HOUSE_SE"] = "S2,S4";//분양 "S2,S4":임대 "R1,R2,R3":영구임대
	this.ds_cond00.setColumn(0, "HOUSE_SE", "S2,S4");// 주택구분(S1,S3,S5,S9/S2,S4), 분양전환구분(HOU013 : 01(전환대기), 02(분양전환))
	this.ds_cond00.setColumn(0, "RENT_LTTOT_CNVRS_AT", null);
	this.chk_cntrctrSttusCode.set_value("02");
	//this.div_top.div_rent.set_visible(false);


	// Clear Datasets
	this.pmsUtil.clearDataSet([this.ds_hcntrctrList]);

	// 주택코드 목록 조회
	this.pmsUtil.getHouseCode(paramMap, "ds_houseCodeSh");
	this.pmsUtil.getHouseCode(paramMap, "ds_houseCode");	

	//파일첨부
 	var fileConfig = {
		onChange: this.fn_onFileSelected,
		onSuccess : this.fn_onFileSuccess,
		useMultiSelect : true             // 다중선택 옵션
	};
	this.FILE_MANAGER = new this.fileManager(this, "PMS", "RPA");
	this.FILE_MANAGER.init(fileConfig);		

     // 동호 enter key down 이벤트 제거
	this.div_search.cmb_dongHoSh.clearEventHandler("onkeydown");
	this.div_search.cmb_hoSh.clearEventHandler("onkeydown");		
}

/***********************************************************************
 * Form/Dataset 오브젝트 초기화
 ***********************************************************************/
/*
 * 함수명  	    : initForm
 * 설명 		: Form을 초기화한다.
 * params  		: None
 * return Type 	: None
 * 사용법		: this.initForm();
 */
this.fn_init_form = function()
{
	this.gfn_initForm(this);	// 시스템 공통으로 Form을 Initialize 한다.
}


/*
/*
 * 함수명  	    : fn_init_dataset
 * 설명 		: Dataset을 초기화한다.
 *                주로, 조건 Dataset들(ds_cond, ds_cond_00, ds_cond_01, ...) 을 초기화한다.
 * params  		: None
 * return Type 	: None
 * 사용법		: this.initDataset();
 */
this.fn_init_dataset = function()
{
	this.gfn_initCondDs(this, this.div_search);	// 조건에 사용되는 Dataset 초기화
	
	// isUpdate용	
	this.checkDs.push(this.ds_hcntrctrInfo);
}

/***********************************************************************
 * 공통 코드 조회
 ***********************************************************************/
/*
 * 함수명  	    : fn_loadCombo
 * 설명 		: 화면의 Combo 에 데이터를 불러온다.
 * params  		: None
 * return Type 	: None
 * 사용법		: this.fn_loadCombo();
 */
this.fn_loadCombo = function()
{
	// 공통코드 목록 조회
	var comboParams = [
		    ["ds_APPROVALSTATUS", "COM023", "1", " "]   // 결재진행상태
		];
	this.gfn_comboLoad(comboParams, this.fn_callbackAfter);
}


/*
 * 함수명  	    : fn_comboOnItemChangeHandler
 * 설명 		: 콤보 onItemChange 이벤트 처리(아이템 선택)
 * params  		: obj 	: 이벤트 발생 콤보 Component
				  e		: 발생 이벤트
 * return Type 	: None
 * 사용법		: <Combo onitemchanged = "fn_comboOnItemChangeHandler">...</Combo>
 */
this.fn_comboOnItemChangeHandler = function(obj:Combo, e:nexacro.ItemChangeEventInfo)
{
	var comName = obj.name;
	var comValue = e ? e.postvalue : obj.value;
	var comIndex = e ? e.postindex : obj.index;

	var paramMap = {};
	switch(comName){		
		// 조회조건 - 주택 콤보
		case "cmb_houseCodeSh" :
			paramMap["HOUSE_CODE"] = comValue;			
			//this.pmsUtil.getHouseDongHoAea(paramMap, "ds_dongHoSh", "ds_houseAeaSh");
			//this.pmsUtil.getHouseDong(paramMap, "ds_dongSh");
			break;
			
		default :
			break;
	}
}


/***********************************************************************
 * Transaction 관련 이벤트 핸들러 
 **********************************************************************/
/*
 * 함수명  	: fn_sanction
 * 설명 		: 결재 버튼 처리
 * params  		: None
 * return Type 	: None
 * 사용법		: 
 */
this.fn_sanction = function(){
    
    if(this.ds_rentCancelChckDspthInfo.rowcount < 1) return;
    
	this.ds_sancKnd.clearData();
	this.ds_approve.clearData();
	//this.fn_transaction("sancKnd");

	var sanctnNo = this.ds_rentCancelChckDspthInfo.getColumn(this.ds_rentCancelChckDspthInfo.rowposition , "ELCTRN_SANCTN_NO");
	var sanctnknd = this.ds_rentCancelChckDspthInfo.getColumn(this.ds_rentCancelChckDspthInfo.rowposition , "SANCTN_KND");
	
	if(sanctnNo != null && sanctnknd != '0'){
		var param = {
			arg_0 : this,  
			arg_1 : sanctnNo
		};

		this.gfn_popup('sancPopup', 710, 518, '', param, "com::COM010400_P01.xfdl");		
		return;
	}	
	
	var today = this.dateUtils.today();
	var ds = this.ds_rentCancelChckDspthInfo; 
	
	var cancl_de = this.ds_rentCancelChckReqestInfo.getColumn(this.ds_rentCancelChckReqestInfo.rowposition , "CANCL_DE");
	var lvhs_de = ds.getColumn( ds.rowposition , "LVHS_DE");
	var chck_de = ds.getColumn( ds.rowposition , "CHCK_DE");
	
	var filds = new Array(16);
	filds[0] = ds.getColumn( ds.rowposition , "HOUSE_CODE");   // 주택코드
	filds[1] = ds.getColumn( ds.rowposition , "HOUSE_NM");   //주택명
	filds[2] = ds.getColumn( ds.rowposition , "DONG");    //동
	filds[3] = ds.getColumn( ds.rowposition , "HO");    //호
	filds[4] = ds.getColumn( ds.rowposition , "CNTRCTR_NM");   //계약자
	filds[5] = ds.getColumn( ds.rowposition , "HOUSE_SUPLY_SE");    //공급구분
	filds[6] = ds.getColumn( ds.rowposition , "CNTRCTR_CTTPC");   //연락처
	filds[7] = cancl_de.substring(0,4) +". " + cancl_de.substring(4 , 6) +". " +cancl_de.substring(6 , 8)   //해약접수
	filds[8] = lvhs_de.substring(0,4) +". " + lvhs_de.substring(4 , 6) +". " + lvhs_de.substring(6 , 8)   //퇴거예정
	filds[9] = chck_de.substring(0,4) +". " + chck_de.substring(4 , 6) +". " + chck_de.substring(6 , 8)   //점검일
	filds[10] = ds.getColumn( ds.rowposition , "CHCK_DTLS"); //점검사항
	filds[11] = this.comUtils.formatComma(ds.getColumn( ds.rowposition , "FCLTY_RPAIRS_AMOUNT"));//발생금액
	filds[12] = this.comUtils.formatComma(ds.getColumn( ds.rowposition , "BND_AMOUNT")); //유보금
	filds[13] =  ds.getColumn( ds.rowposition , "RPAIRS_DTLS");//비고
	filds[14] =  today.substring(0,4) +"년 " + today.substring(4 , 6) +"월 " + today.substring(6 , 8) + "일";//년월일
	
		
	var dongho = ds.getColumn(ds.rowposition , "HOUSE_NM") +' '+ ds.getColumn(ds.rowposition , "DONG") + '-' + ds.getColumn(ds.rowposition , "HO");	
	var dataValue = filds.join("|");
	var dataTitle = "해약세대 점검완료통보서("+dongho+")";
	var title     = dataTitle;
	
	this.ds_approve.clearData();	
	this.ds_approve.addRow();
	
	this.ds_approve.setColumn(0, "TITLE",      title                );
	this.ds_approve.setColumn(0, "DATA_TITLE", dataTitle            );
	this.ds_approve.setColumn(0, "DATA_VALUE", dataValue            );
	this.ds_approve.setColumn(0, "DEPT_CD",    application.gds_userInfo.getColumn(0 , "DEPT_CODE"));
	this.ds_approve.setColumn(0, "EMP_CD",     application.gds_userInfo.getColumn(0, "USER_ID"));
	this.ds_approve.setColumn(0, "EMPNO", 	   application.gds_userInfo.getColumn(0, "USER_ID"));
	this.ds_approve.setColumn(0, "CNTRCTR_NO", ds.getColumn( ds.rowposition , "CNTRCTR_NO"));
	
	this.pmsUtil.dumper(this.ds_approve);		
	
	var sSvcID        	= "approve";                    
	var sController   	= "hsco/pms/rnt/rnt050501/approveU.do";	
	var sInDatasets   	= "input1=ds_approve";
	var sOutDatasets  	= "ds_approve=output1";
	var sArgs = "";	
	
	Ex.core.tran(this,sSvcID, sController, sInDatasets, sOutDatasets, sArgs);

}

/*
 * 함수명      : fn_search
 * 설명 		: 계약목록 조회 조회 이벤트 처리
 * params  		: None
 * return Type 	: None
 * 사용법		: this.fn_search();
 */
this.fn_search = function()
{	
	// Validation 체크
	if(!this.gfn_checkValidation(this.div_search, this.ds_validation)) {
		return;
	}
		                        
	// Clear Datasets
	this.pmsUtil.clearDataSet([this.ds_hcntrctrList]);
	
	var inStatusCode = this.ds_cond00.getColumn(0, "CNTRCTR_STTUS_CODE");	// 계약상태코드(해약자만 검색)
	var statusCodeAt = inStatusCode == "02" ? "Y" : null;					// 해약자의 경우 순수 해약자 정보만 조회
	this.ds_cond00.setColumn(0, "CNTRCTR_STTUS_AT", statusCodeAt);			// 순수 해약(계약)정보만 조회
    this.ds_cond00.setColumn(0, "HOUSE_SE", "S2,S4");	    	     	   // 주택구분(S1,S3,S5,S9/S2,S4), 분양전환구분(HOU013 : 01(전환대기), 02(분양전환))
    
    this.pmsUtil.dumper(this.ds_cond00);
	
	this.pmsUtil.getHcntrctrList("ds_cond00", "ds_hcntrctrList");
	
}


/*
 * 함수명  	: fn_insert
 * 설명 		: 계약정보 추가
 * params  		: None
 * return Type 	: None
 * 사용법		: this.fn_insert();
 */
this.fn_insert = function()
{
	if(this.ds_rentCancelChckDspthInfo.rowcount > 0 ) return;
	if(this.ds_rentCancelChckReqestInfo.rowcount < 0 ) return;
	

	var nRow = this.ds_rentCancelChckDspthInfo.addRow();
	this.ds_rentCancelChckDspthInfo.setColumn( nRow , "CNTRCTR_NO" , this.ds_hcntrctrList.getColumn( this.ds_hcntrctrList.rowposition , "CNTRCTR_NO"));	
	this.ds_rentCancelChckDspthInfo.setColumn( nRow , "HOUSE_CODE" , this.ds_hcntrctrList.getColumn( this.ds_hcntrctrList.rowposition , "HOUSE_CODE"));
	this.ds_rentCancelChckDspthInfo.setColumn( nRow , "DONG" , this.ds_hcntrctrList.getColumn( this.ds_hcntrctrList.rowposition , "DONG"));
	this.ds_rentCancelChckDspthInfo.setColumn( nRow , "HO" , this.ds_hcntrctrList.getColumn( this.ds_hcntrctrList.rowposition , "HO"));
	this.ds_rentCancelChckDspthInfo.setColumn( nRow , "HOUSE_NM" , this.ds_hcntrctrList.getColumn( this.ds_hcntrctrList.rowposition , "HOUSE_NM"));
	this.ds_rentCancelChckDspthInfo.setColumn( nRow , "CNTRCTR_NM" , this.ds_hcntrctrList.getColumn( this.ds_hcntrctrList.rowposition , "CSTMR_NM"));
	this.ds_rentCancelChckDspthInfo.setColumn( nRow , "HOUSE_SUPLY_SE" , this.ds_rentCancelChckReqestInfo.getColumn( this.ds_rentCancelChckReqestInfo.rowposition , "HOUSE_SUPLY_SE"));
	this.ds_rentCancelChckDspthInfo.setColumn( nRow , "CNTRCTR_CTTPC" , this.ds_rentCancelChckReqestInfo.getColumn( this.ds_rentCancelChckReqestInfo.rowposition , "CNTRCTR_CTTPC"));
	this.ds_rentCancelChckDspthInfo.setColumn( nRow , "LVHS_DE" , this.ds_rentCancelChckReqestInfo.getColumn( this.ds_rentCancelChckReqestInfo.rowposition , "LVHS_PREARNGE_DE"));
	this.ds_rentCancelChckDspthInfo.setColumn( nRow , "RCEPT_DE" , this.dateUtils.today());
	this.ds_rentCancelChckDspthInfo.setColumn( nRow , "CHCK_DTLS" , "붙임 조사결과표 참조");
	this.Div00.Div00.cal_RCEPT_DE.set_value(this.dateUtils.today());
}

/*
 * 함수명  	: fn_save
 * 설명 		: 계약정보 저장 이벤트 처리
 * params  		: None
 * return Type 	: None
 * 사용법		: this.fn_save();
 */
this.fn_save = function (){
							
	if(this.ds_rentCancelChckDspthInfo.getColumn(this.ds_rentCancelChckDspthInfo.rowposition , "ELCTRN_SANCTN_NO") != null){
		this.alert("결재된 내역은 수정 및 삭제 할 수 없습니다.");
	}

	// 저장확인
	if(this.confirm("저장하시겠습니까?")){
		this.fn_transaction("saveSlaryList");
	}
}


/*
 * 함수명  	    : fn_delete
 * 설명 		: 계약정보 삭제 이벤트 처리
 * params  		: None
 * return Type 	: None
 * 사용법		: this.fn_delete();
 */
this.fn_delete = function ()
{
	if(this.gfn_message("confirm.삭제여부"))	{
		var nCurRow = this.ds_rentCancelChckDspthInfo.rowposition;
		var nRowType = this.ds_rentCancelChckDspthInfo.getRowType(nCurRow);
		this.ds_rentCancelChckDspthInfo.deleteRow(nCurRow);	
	}
}

/**********************************************************************
 * CALL TRANSACTION 영역
 **********************************************************************/ 
/*
 * 함수명  	    : fn_transaction
 * 설명 		: Transaction 요청 처리 함수
 * params  		: strSvcId : 서비스요청 ID
 * return Type 	: None
 * 사용법		: this.fn_transaction("SELECT");
 */
this.fn_transaction = function(strSvcId)
{
	switch (strSvcId) {	

		//시설점검의뢰 조회
		case "selectRentCancelChckReqestInfo": 
			this.ds_cond01.clearData();
			var nRow = this.ds_cond01.addRow();
			this.ds_cond01.setColumn( nRow , "HOUSE_CODE" ,  this.ds_hcntrctrList.getColumn(this.ds_hcntrctrList.rowposition , "HOUSE_CODE"));
			this.ds_cond01.setColumn( nRow , "DONG" , this.ds_hcntrctrList.getColumn(this.ds_hcntrctrList.rowposition , "DONG"));
			this.ds_cond01.setColumn( nRow , "HO" , this.ds_hcntrctrList.getColumn(this.ds_hcntrctrList.rowposition , "HO"));
			this.ds_cond01.setColumn( nRow , "CNTRCTR_NO" , this.ds_hcntrctrList.getColumn(this.ds_hcntrctrList.rowposition , "CNTRCTR_NO"));
			//this.ds_cond01.setColumn( nRow , "SANCTN_AT" , "1");
		
 		    var sController   	= "hsco/pms/sls/hou/ctr/SLS020102/selectRentCancelChckReqestInfo.do";
	        var sInDatasets   	= "input1=ds_cond01";
	        var sOutDatasets  	= "ds_rentCancelChckReqestInfo=output1";
	        //var bSync = false;
		    break;
					
		//시설점검 통보 조회
		case "selectRentCancelChckDspthInfo": 
			this.ds_cond01.clearData();
			var nRow = this.ds_cond01.addRow();
			this.ds_cond01.setColumn( nRow , "HOUSE_CODE" ,  this.ds_hcntrctrList.getColumn(this.ds_hcntrctrList.rowposition , "HOUSE_CODE"));
			this.ds_cond01.setColumn( nRow , "DONG" , this.ds_hcntrctrList.getColumn(this.ds_hcntrctrList.rowposition , "DONG"));
			this.ds_cond01.setColumn( nRow , "HO" , this.ds_hcntrctrList.getColumn(this.ds_hcntrctrList.rowposition , "HO"));
			this.ds_cond01.setColumn( nRow , "CNTRCTR_NO" , this.ds_hcntrctrList.getColumn(this.ds_hcntrctrList.rowposition , "CNTRCTR_NO"));			
		
 		    var sController   	= "hsco/pms/sls/hou/ctr/SLS020102/selectRentCancelChckDspthInfo.do";
	        var sInDatasets   	= "input1=ds_cond01";
	        var sOutDatasets  	= "ds_rentCancelChckDspthInfo=output1";
	        //var bSync = false;
		    break;

		//시설점검 통보 첨부파일 조회 
		case "selectDspthFileList": 
 		    var sController   	= "hsco/pms/sls/hou/ctr/SLS020102/selectDspthFileList.do";
	        var sInDatasets   	= "input1=ds_rentCancelChckDspthInfo";
	        var sOutDatasets  	= "ds_fileList=output1";
	        //var bSync = false;
		    break;					
				
		case "saveSlaryList":	// 하자보증 정보 저장하기
				var sController   	= "hsco/pms/rnt/rnt050101/listCUD.do";	
				var sInDatasets   	= "input1=ds_rentCancelChckDspthInfo:U";
				var sOutDatasets  	= "";
				break;
			
		case "delete" :	// 사진 선택 파일 삭제			
				var sController = "hsco/pms/rnt/rnt050101/atchDelete.do";
				var sInDatasets = "input1=ds_cond05";
				var sOutDatasets = "";
				break;						
				
		case "sancKnd": // 전자결재 진행상태
				bSync = false;
				this.ds_cond05.clearData();
				var nRow = this.ds_cond05.addRow();
				this.ds_cond05.setColumn( nRow , "SANCTN_NO" , this.ds_rentCancelChckDspthInfo.getColumn(this.ds_rentCancelChckDspthInfo.rowposition , "ELCTRN_SANCTN_NO"));
			
				var sController   	= "hsco/pms/rnt/rnt030301/sancKnd.do";
				var sInDatasets   	= "input1=ds_cond05";
				var sOutDatasets  	= "ds_sancKnd=output1";
				break;						
					
		default :
			break;
	}

	Ex.core.tran(this, strSvcId, sController, sInDatasets, sOutDatasets); 
}

/**********************************************************************
 * Transaction Callback 영역
 **********************************************************************/ 
 /*
 * 함수명  	    : fn_callBack
 * 설명 		: Transaction Callback 처리
 * params  		: strSvcId    : 서비스요청 ID
 *                nErrorCode  : 오류 메시지 코드 ([예] 0 : Success, 그밖의 경우, error)
 *                strErrorMsg : 오류 메시지([예]  success.insert|정상적으로 등록되었습니다.)
 * return Type 	: None
 * 사용법		: 
 */
this.fn_callBack = function (strSvcId, nErrorCode, strErrorMsg)
{		
	var bSuccess = nErrorCode == 0 ? true : false;
	if (bSuccess){
		
		var comboOption = null;
		var targetCombo = null;
		switch(strSvcId){
		
			// 주택코드 목록 조회영역
			case "houseCodeSh" :
				targetCombo = this.div_search.cmb_houseCodeSh;
				comboOption = {};
				comboOption["type"] = this.pmsUtil.PROMPT_ALL;
				comboOption["noNullText"] = "코드없음";				
				this.pmsUtil.setComboPrompt(targetCombo, comboOption);
				break;
				

			// 시설점검의뢰 조회
			case "selectRentCancelChckReqestInfo" :
				this.fn_transaction("selectRentCancelChckDspthInfo");
				break;

			// 시설점검 통보 조회
			case "selectRentCancelChckDspthInfo" :				
				this.ds_fileList.clearData();
				if(this.ds_rentCancelChckDspthInfo.rowcount < 1) return;
				this.fn_transaction("selectDspthFileList");
				break;

			// 첨부파일 삭제
			case "delete" :
				this.gfn_message("success.처리.성공")
				this.ds_fileList.clearData();
				this.fn_transaction("selectRentCancelChckDspthInfo");
				break;
				
			// 하자보증 신규 , 수정 , 삭제 
			case "saveSlaryList" :
				this.gfn_message("success.처리.성공")
				this.ds_fileList.clearData();
				this.fn_transaction("selectRentCancelChckDspthInfo");
				break;

			case "approve" :
				this.fn_transaction("selectRentCancelChckDspthInfo");
				var brow = this.ds_approve.getColumn(0,"O_URL");
				system.execBrowser(brow); 
				
				break;



			default :
				break;
		}
		
	}else{
		this.gfn_callBackMsg(strSvcId, nErrorCode, strErrorMsg);
	}	
}


// ----------------------------------------------------------------------------
// 계약목록 변경 후 처리
// ----------------------------------------------------------------------------
this.ds_hcntrctrList_onrowposchanged = function(obj:Dataset, e:nexacro.DSRowPosChangeEventInfo)
{
	this.fn_transaction("selectRentCancelChckReqestInfo");
}

//해약자만 검색 버튼 클릭시
this.div_search_chk_cntrctrSttusCode_onclick = function(obj:CheckBox,  e:nexacro.ClickEventInfo)
{
	this.fn_search();
}

/* ==================================================
 첨부파일 처리 관련
 ==================================================*/
/*
 * 파일업로드 파일 선택
 * @param 
 * @return void
 */
  /*
 * 함수명  	: Button01_onclick
 * 설명 		: 사진추가 버튼 이벤트 처리(행추가)
 * params  		: Non
 * return Type 	: None
 * 사용법		: this.Button01_onclick();
 */
this.fn_addFile = function(obj:Button,  e:nexacro.ClickEventInfo)
{
	if(this.ds_rentCancelChckDspthInfo.getRowType(this.ds_rentCancelChckDspthInfo.rowposition) != Dataset.ROWTYPE_NORMAL) return;
	this.fn_addAtchFile();	
}
this.fn_addAtchFile = function(){
// 	var allowFile = ["jpg"];	// 선택 허용 파일유형 - Confilg에서 설정이 가능하나 선택시에도 처리가능하게
// 	this.FILE_MANAGER.addFiles(allowFile, false);	
	this.FILE_MANAGER.addFiles();
}
/**
 * 파일업로드 파일 선택 이벤트 핸들러
 * @param fileFullName 선택 전체 파일명
 * @param type 실행구분(ExtFileUpload/ExtFileDownload)
 * @param fileFullName 선택 파일명
 * @return void
 */
this.fn_onFileSelected = function(type, fileFullName){
	this.ds_cond05.clearData();
	if(type == this.FILE_MANAGER.TYPE_UPLOADER){
		var isNmArray = this.pmsUtil.isArray(fileFullName);
		
		if(isNmArray){
			var selFileLeng = fileFullName.length;
			for(var i = 0; i < selFileLeng; i++){
				var nRow = this.ds_cond05.addRow();
				this.ds_cond05.setColumn(nRow , "CNTRCTR_NO" , this.ds_rentCancelChckDspthInfo.getColumn(this.ds_rentCancelChckDspthInfo.rowposition , "CNTRCTR_NO"));
				this.ds_cond05.setColumn(nRow , "FILE_SN" , this.ds_rentCancelChckDspthInfo.getColumn(this.ds_rentCancelChckDspthInfo.rowposition , "FILE_SN")); 
				}	
				this.fn_save2();
		}else{
			var nRow = this.ds_cond05.addRow();
			this.ds_cond05.setColumn(nRow , "CNTRCTR_NO" , this.ds_rentCancelChckDspthInfo.getColumn(this.ds_rentCancelChckDspthInfo.rowposition , "CNTRCTR_NO"));
			this.ds_cond05.setColumn(nRow , "FILE_SN" , this.ds_rentCancelChckDspthInfo.getColumn(this.ds_rentCancelChckDspthInfo.rowposition , "FILE_SN"));    
			this.fn_save2();
			//this.fn_setAtchFileView();		// 첨부파일 영역 처리
		}
	}
}

/*
 * 함수명  	: this.fn_save2
 * 설명 		: 사진 저장 이벤트 처리
 * params  		: None
 * return Type 	: None
 * 사용법		: this.fn_save2();
 */
this.fn_save2 = function()
{
	// 파일 첨부여부 확인
	var hasAttFile = this.FILE_MANAGER.hasFile();
	if(hasAttFile){
		var attFileCount = this.FILE_MANAGER.getfileCount();
		var sController = "hsco/pms/rnt/rnt050101/atchCUD.do";
		var oInDatasets = "input1=ds_cond05";
		var sOutDatasets = "ds_failList=failList";
		this.FILE_MANAGER.upload(sController, oInDatasets, sOutDatasets);
	}else{
		return;
			//this.fn_transaction("saveSlaryList2");		// 첨부파일저장
	}	
}

/**
 * 함수명  	: fn_downloadAtchFile
 * 설명 		: 첨부파일 보기(다운로드)
 * params  		: null
 * return Type 	: None
 * 사용법		: this.fn_downloadAtchFile();
 */
this.fn_downloadAtchFile = function(){

	for(var i = 0 ; i < this.ds_fileList.getRowCount() ; i++)
	{
		if(this.ds_fileList.getColumn( i , "CHK") == 1){
			var fileSn = this.ds_fileList.getColumn(i , "FILE_SN"); 	// 파일일련번호(파일경로)
			var fileOrder = this.ds_fileList.getColumn(i , "FILE_ORDR");					// 임시 : 첨부파일은 공통으로 파일일련번호와 파일순차로 조회가능하나 현재(2015/10/21) 컬럼이 맞지않음
			var fileName = this.ds_fileList.getColumn(i , "ORGINL_FILE_NM");	// 실제 파일명	
			this.FILE_MANAGER.download(fileSn, fileOrder, fileName);	
		}
	}			
}

/**
 * 파일업로드 파일 업로드 성공 이벤트 핸들러
 * @param fileFullName 선택 전체 파일명
 * @param type 실행구분(ExtFileUpload/ExtFileDownload)
 * @param e 발생이벤트
 * @return void
 */
this.fn_onFileSuccess = function(type, e){
	if(type == this.FILE_MANAGER.TYPE_UPLOADER){
	this.fn_transaction("selectRentCancelChckDspthInfo");
		//this.fn_search();
	}
	if(type == this.FILE_MANAGER.TYPE_DOWNLOADER){
		this.gfn_message("success.파일.다운로드.성공");
	}
}

/**
 * 함수명  	: Button06_onclick
 * 설명 		: 첨부파일 삭제
 * params  		: null
 * return Type 	: None
 * 사용법		: this.Button06_onclick();
 */
this.fn_deleteFile = function(obj:Button,  e:nexacro.ClickEventInfo){

	this.fn_deleteAtchFile();
} 
this.fn_deleteAtchFile = function(){
	this.ds_cond05.clearData();
	var checkListLeng = 0;
	var confirmMsg = "선택한 이미지를 삭제하시겠습니까?";
	if(confirm(confirmMsg)){
			this.ds_cond01.clearData();
			// 선택자료 가져오기
			for(var i = 0 ; i < this.ds_fileList.rowcount ; i++){
				if(this.ds_fileList.getColumn( i , "CHK") == '1'){
					var nRow = this.ds_cond05.addRow();
					this.ds_cond05.setColumn( nRow , "CNTRCTR_NO" , this.ds_rentCancelChckDspthInfo.getColumn( this.ds_rentCancelChckDspthInfo.rowposition , "CNTRCTR_NO"));
					this.ds_cond05.setColumn( nRow , "FILE_SN" , this.ds_fileList.getColumn( i , "FILE_SN"));
					this.ds_cond05.setColumn( nRow , "FILE_ORDR" , this.ds_fileList.getColumn( i , "FILE_ORDR"));	
					checkListLeng += 1;
					}
				}	
			
			// 선택자료 여부 체크
			if (checkListLeng == 0 ) {
				this.alert("선택된 자료가없습니다.");
				return;
			}

			this.fn_transaction("delete");		// 첨부파일 삭제;
	}

}


]]></Script>
  </Form>
</FDL>
