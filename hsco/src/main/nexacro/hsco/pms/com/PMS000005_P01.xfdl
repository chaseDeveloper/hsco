<?xml version="1.0" encoding="utf-8"?>
<FDL version="1.5">
  <TypeDefinition url="..\..\default_typedef.xml"/>
  <Form id="PMS000005_P01" classname="PMS000005_P01" left="0" top="0" width="800" height="600" titletext="고객별 관리팝업" onload="PMS000005_P01_onload" oninit="PMS000005_P01_oninit">
    <Layouts>
      <Layout>
        <Static id="Static07" taborder="2" onclick="Static00_onclick" cssclass="sta_WF_PopupBg" left="0" top="0" right="0" bottom="0"/>
        <Static id="Static00" taborder="3" text="15" visible="false" top="0" height="600" style="background:#1b3cd23c;align:center middle;" width="15" left="783"/>
        <Static id="Static02" taborder="4" cssclass="sta_WF_PopupTitle" left="0%" top="0" right="0%" height="34" text="고객상담관리"/>
        <Static id="Static06" taborder="5" text="15" visible="false" left="0%" top="34" right="1.75%" height="15" style="background:#dc143c3c;align:center middle;"/>
        <Static id="sta_title" taborder="6" text="고객상담관리" cssclass="sta_WF_Title01" left="2.25%" top="53" right="73.13%" height="21"/>
        <Static id="Static12" taborder="7" text="5" visible="false" left="2.13%" top="74" right="1.88%" height="5" style="background:#dc143c3c;align:center middle;"/>
        <Button id="Button02" taborder="8" text="종료" onclick="Button02_onclick" cssclass="btn_WF_CRUD" left="91.88%" top="49" right="1.88%" height="25"/>
        <Div id="div_work" taborder="9" top="79" bottom="4" style="border:0 solid #808080ff ;" left="2" right="17">
          <Layouts>
            <Layout width="1039" height="736">
              <Tab id="Tab00" taborder="0" left="15" top="38" bottom="15" onchanged="Tab00_onchanged" tabindex="0" scrollbars="autoboth" style="showextrabutton:false;" dragscrolltype="none" right="15">
                <Tabpages>
                  <Tabpage id="tabpage1" text="고객상담관리" dragscrolltype="none" style="padding:0 0 0 0;">
                    <Layouts>
                      <Layout>
                        <Static id="Static10" taborder="34" text="5" visible="false" left="0%" top="5" right="0%" height="5" style="background:#dc143c3c;align:center middle;"/>
                        <Grid id="grd_cstmrCnsltList" taborder="35" binddataset="ds_cstmrCnsltList" autoenter="select" useinputpanel="false" autofittype="col" onselectchanged="div_work_grd_hmpgCstmrCvpl_onselectchanged" left="0" top="265" bottom="0" right="0">
                          <Formats>
                            <Format id="default">
                              <Columns>
                                <Column size="40"/>
                                <Column size="90"/>
                                <Column size="70"/>
                                <Column size="40"/>
                                <Column size="40"/>
                                <Column size="402"/>
                              </Columns>
                              <Rows>
                                <Row size="24" band="head"/>
                                <Row size="24"/>
                              </Rows>
                              <Band id="head">
                                <Cell text="순번"/>
                                <Cell col="1" text="상담일자"/>
                                <Cell col="2" text="상담고객"/>
                                <Cell col="3" text="동"/>
                                <Cell col="4" text="호"/>
                                <Cell col="5" text="상담내용"/>
                              </Band>
                              <Band id="body">
                                <Cell text="expr:currow+1"/>
                                <Cell col="1" displaytype="date" edittype="none" text="bind:CNSLT_DE" calendardisplaynulltype="none"/>
                                <Cell col="2" text="bind:CSTMR_NM"/>
                                <Cell col="3" text="bind:DONG"/>
                                <Cell col="4" text="bind:HO"/>
                                <Cell col="5" edittype="none" style="align:left;padding:0 0 0 5;" text="bind:CNSLT_CN" tooltiptext="bind:CNSLT_CN"/>
                              </Band>
                            </Format>
                          </Formats>
                        </Grid>
                        <CheckBox id="chk_indpndCheck" taborder="50" text="자주묻는질문관리 등록" value="0" truevalue="1" falsevalue="0" left="76.24%" top="14" right="4.05%" height="21" visible="false"/>
                        <Static id="Static36" taborder="54" text="10" visible="false" left="59.14%" top="10" right="11.62%" height="5" style="background:#dc143c3c;align:center middle;"/>
                        <Static id="sta_AUDIT_TABLE01" taborder="62" text="상담내역정보" onclick="Static00_onclick" cssclass="sta_WF_Title02" left="0.13%" top="15" right="83.29%" height="19"/>
                        <Static id="sta_AUDIT_TABLE00" taborder="63" text="상담목록" onclick="Static00_onclick" cssclass="sta_WF_Title02" top="248" height="19" width="134" right="82.9%"/>
                        <Static id="Static02" taborder="65" text="5" visible="false" left="0%" top="236" right="-38.8%" height="5" style="background:#dc143c3c;align:center middle;"/>
                        <Static id="Static01" taborder="66" text="5" visible="false" left="0%" top="276" right="-30.81%" height="5" style="background:#dc143c3c;align:center middle;"/>
                        <Static id="Static21" taborder="67" text="10" visible="false" left="0%" top="0" right="-35.31%" height="10" style="background:#dc143c3c;align:center middle;"/>
                        <Static id="Static08" taborder="68" cssclass="sta_WF_Labelbg" left="8.22%" top="115" right="0%" height="27"/>
                        <Static id="Static00" taborder="71" cssclass="sta_WF_Labelbg" left="8.22%" top="37" right="0%" height="27"/>
                        <Static id="Static14" taborder="72" cssclass="sta_WF_Labelbg" left="8.22%" top="141" right="0%" height="100"/>
                        <TextArea id="txt_cnsltCn" taborder="73" wordwrap="char" lengthunit="utf8" maxlength="1500" cssclass="txt_WF_Essential" top="118" height="120" width="516" left="73"/>
                        <Calendar id="cal_cnsltDe" taborder="74" dateformat="yyyy-MM-dd" cssclass="cal_WF_Essential" top="40" height="21" width="112" left="73"/>
                        <Static id="Static15" taborder="75" cssclass="sta_WF_Labelbg" left="5.09%" top="89" right="76.5%" height="27"/>
                        <Combo id="cmb_cstmrCnsltList" taborder="76" innerdataset="@ds_cus031" codecolumn="CODE" datacolumn="CODE_NM" cssclass="cmb_WF_Essential" top="92" height="21" index="-1" width="111" left="73"/>
                        <Static id="Static05" taborder="85" text="5" visible="false" left="814" top="14" width="5" height="200" style="background:#dc143c3c;align:center middle;"/>
                        <Static id="Static03" taborder="86" cssclass="sta_WF_Labelbg" left="8.22%" top="63" right="0%" height="27"/>
                        <Edit id="Edit02" taborder="87" lengthunit="utf8" maxlength="100" cssclass="edt_WF_Essential" top="65" height="23" width="112" left="73"/>
                        <Edit id="Edit03" taborder="88" inputtype="digit" lengthunit="utf8" maxlength="12" cssclass="edt_WF_Essential" top="65" height="23" width="157" left="253"/>
                        <Static id="Static06" taborder="90" cssclass="sta_WF_Labelbg" left="31.72%" top="89" right="0%" height="27"/>
                        <Combo id="cmb_cstmrCnsltList00" taborder="91" innerdataset="@ds_cus032" codecolumn="CODE" datacolumn="CODE_NM" cssclass="cmb_WF_Essential" top="92" height="21" index="-1" width="157" left="253"/>
                        <Edit id="Edit04" taborder="92" inputtype="digit" lengthunit="utf8" maxlength="4" top="39" height="23" left="253" width="70"/>
                        <Static id="Static24" taborder="93" text="/" top="40" height="21" width="7" left="327"/>
                        <Edit id="Edit05" taborder="94" inputtype="digit" lengthunit="utf8" maxlength="4" top="39" height="23" left="339" width="70"/>
                        <Combo id="cmb_cstmrCnsltList01" taborder="95" innerdataset="@ds_cus033" codecolumn="CODE" datacolumn="CODE_NM" top="92" height="21" index="-1" width="111" left="478"/>
                        <Static id="sta_wrter05" taborder="98" text="소분류" cssclass="sta_WF_Label" top="89" height="27" width="64" left="412"/>
                        <Static id="sta_wrter" taborder="99" text="상담일자" cssclass="sta_WF_Label" top="37" height="27" width="70" left="0"/>
                        <Static id="sta_chrctrCn" taborder="100" text="상담내용" cssclass="sta_WF_Label" top="115" height="126" width="70" left="0"/>
                        <Static id="sta_wrter01" taborder="101" text="상담고객" cssclass="sta_WF_Label" top="63" height="27" width="70" left="0"/>
                        <Static id="sta_wrter00" taborder="102" text="대분류" cssclass="sta_WF_Label" top="89" height="27" width="70" left="0"/>
                        <Static id="sta_wrter03" taborder="103" text="중분류" cssclass="sta_WF_Label" top="89" height="27" width="65" left="186"/>
                        <Static id="sta_wrter04" taborder="104" text="동/호" cssclass="sta_WF_Label" top="37" height="27" width="65" left="186"/>
                        <Static id="sta_wrter02" taborder="105" text="전화번호" cssclass="sta_WF_Label" top="63" height="27" width="65" left="186"/>
                      </Layout>
                    </Layouts>
                  </Tabpage>
                  <Tabpage id="tabpage2" text="문자발송내역">
                    <Layouts>
                      <Layout>
                        <Grid id="grd_smsLog" taborder="0" binddataset="ds_smsLog" useinputpanel="false" cellsizingtype="col" left="0%" top="34" right="0%" bottom="0" oncellclick="msgOncellclick">
                          <Formats>
                            <Format id="default">
                              <Columns>
                                <Column size="29"/>
                                <Column size="120"/>
                                <Column size="80"/>
                                <Column size="105"/>
                                <Column size="120"/>
                                <Column size="70"/>
                                <Column size="282"/>
                                <Column size="70"/>
                                <Column size="70"/>
                                <Column size="70"/>
                                <Column size="70"/>
                                <Column size="70"/>
                                <Column size="70"/>
                              </Columns>
                              <Rows>
                                <Row size="24" band="head"/>
                                <Row size="24"/>
                              </Rows>
                              <Band id="head">
                                <Cell text="번호"/>
                                <Cell col="1" text="발송일시"/>
                                <Cell col="2" text="발송상태"/>
                                <Cell col="3" text="수신번호"/>
                                <Cell col="4" text="수신일시"/>
                                <Cell col="5" text="수신자"/>
                                <Cell col="6" text="메시지내용"/>
                                <Cell col="7" text="수신결과"/>
                                <Cell col="8" text="기타1"/>
                                <Cell col="9" text="기타2"/>
                                <Cell col="10" text="기타3"/>
                                <Cell col="11" text="기타4"/>
                                <Cell col="12" text="기타5"/>
                              </Band>
                              <Band id="body">
                                <Cell displaytype="number" text="expr:currow+1"/>
                                <Cell col="1" text="bind:SNDNG_RESVE_DT" mask="####-##-## ##:##:##"/>
                                <Cell col="2" displaytype="normal" edittype="none" text="bind:RLST_CD"/>
                                <Cell col="3" text="bind:RECPTN_TELNO"/>
                                <Cell col="4" text="bind:SEND_DATE" mask="####-##-## ##:##:##"/>
                                <Cell col="5" text="bind:RCVER_NM"/>
                                <Cell col="6" style="align:left;" text="bind:SNDNG_CN"/>
                                <Cell col="7" displaytype="normal" text="bind:STS"/>
                                <Cell col="8" text="bind:CHRCTR_PREPAR_VALUE_0"/>
                                <Cell col="9" text="bind:CHRCTR_PREPAR_VALUE_1"/>
                                <Cell col="10" text="bind:CHRCTR_PREPAR_VALUE_2"/>
                                <Cell col="11" text="bind:CHRCTR_PREPAR_VALUE_3"/>
                                <Cell col="12" text="bind:CHRCTR_PREPAR_VALUE_4"/>
                              </Band>
                            </Format>
                          </Formats>
                        </Grid>
                        <Static id="sta_AUDIT_TABLE01" taborder="1" text="문자발송내역" onclick="Static00_onclick" cssclass="sta_WF_Title02" left="0.13%" top="10" right="83.18%" height="19"/>
                        <Static id="Static01" taborder="2" text="5" visible="false" left="0%" top="29" right="-35.43%" height="5" style="background:#dc143c3c;align:center middle;"/>
                        <Static id="Static21" taborder="3" text="10" visible="false" left="0%" top="0" right="-35.17%" height="10" style="background:#dc143c3c;align:center middle;"/>
                        <TextArea id="TextArea00" taborder="4" top="113" right="0%" height="181" onmouseleave="msgOnmouseleave" readonly="true" style="background:#f0f0f0ff;" width="342"/>
                      </Layout>
                    </Layouts>
                  </Tabpage>
                  <Tabpage id="tabpage3" text="안내문발송내역">
                    <Layouts>
                      <Layout>
                        <Grid id="grd_rentCntrctCstmrList" cssclass="grd02_WF_blue" taborder="0" binddataset="ds_gdccSndngHistList" useinputpanel="false" oncelldblclick="div_WORK_grd_rentCntrctCstmrList_oncelldblclick" onselectchanged="div_WORK_grd_houseCstmrList_onselectchanged" left="0" top="34" right="0" bottom="0">
                          <Formats>
                            <Format id="default">
                              <Columns>
                                <Column size="85"/>
                                <Column size="70"/>
                                <Column size="150"/>
                                <Column size="230"/>
                                <Column size="230"/>
                                <Column size="100"/>
                                <Column size="100"/>
                              </Columns>
                              <Rows>
                                <Row size="24" band="head"/>
                                <Row size="24"/>
                              </Rows>
                              <Band id="head">
                                <Cell style="font:bold 9 Gulim;" cssclass=".sta_WFDA_labelB" text="발송일자"/>
                                <Cell col="1" style="font:bold 9 Gulim;" cssclass=".sta_WFDA_labelB" text="업무구분"/>
                                <Cell col="2" style="font:bold 9 Gulim;" cssclass=".sta_WFDA_labelB" text="안내문종류"/>
                                <Cell col="3" style="font:bold 9 Gulim;" cssclass=".sta_WFDA_labelB" text="주소"/>
                                <Cell col="4" style="font:bold 9 Gulim;" text="주소상세"/>
                                <Cell col="5" style="font:bold 9 Gulim;" text="연락처1"/>
                                <Cell col="6" style="font:bold 9 Gulim;" text="연락처2"/>
                              </Band>
                              <Band id="body">
                                <Cell style="align:center;" text="bind:GDCC_SNDNG_DE" mask="####-##-##"/>
                                <Cell col="1" style="align:center;" text="bind:JOB_SE_CODE"/>
                                <Cell col="2" style="align:center;" text="bind:GDCC_KND"/>
                                <Cell col="3" style="align:left;" text="bind:ADRES"/>
                                <Cell col="4" style="align:left;" text="bind:ADRES_DETAIL"/>
                                <Cell col="5" style="align:left;" text="bind:TELNO"/>
                                <Cell col="6" style="align:left;" text="bind:MBTLNO"/>
                              </Band>
                            </Format>
                          </Formats>
                        </Grid>
                        <Static id="Static01" taborder="1" text="5" visible="false" left="0%" top="29" right="-35.15%" height="5" style="background:#dc143c3c;align:center middle;"/>
                        <Static id="sta_AUDIT_TABLE01" taborder="2" text="안내문발송내역" onclick="Static00_onclick" cssclass="sta_WF_Title02" left="0.13%" top="10" right="83.22%" height="19"/>
                        <Static id="Static21" taborder="3" text="10" visible="false" left="0%" top="0" right="-34.89%" height="10" style="background:#dc143c3c;align:center middle;"/>
                      </Layout>
                    </Layouts>
                  </Tabpage>
                </Tabpages>
              </Tab>
              <Div id="div_search1" taborder="1" top="0" right="0" height="33" style="background:#f9fbffff;font:bold 9 Verdana;" cssclass="div_WFSA_Box" left="15" visible="false">
                <Layouts>
                  <Layout>
                    <Static id="Static03" taborder="109" text="고객명" cssclass="sta_WFSA_Label" left="2.03%" top="5" right="89.3%" height="21" style="align:left middle;font:bold 9 Verdana;"/>
                    <Static id="Static01" taborder="111" text="동/호" cssclass="sta_WFSA_Label" top="5" height="21" style="align:left middle;font:bold 9 Verdana;" width="80" left="397"/>
                    <Static id="Static02" taborder="114" text="주택명" cssclass="sta_WFSA_Label" top="5" height="21" style="align:left middle;font:bold 9 Verdana;" width="80" left="187"/>
                    <Edit id="Edit04" taborder="115" inputtype="digit" lengthunit="utf8" maxlength="4" top="4" height="23" width="100" left="78" readonly="true" cssclass="edt_WF_Readonly"/>
                    <Edit id="Edit00" taborder="116" inputtype="digit" lengthunit="utf8" maxlength="4" top="4" height="23" width="150" left="241" readonly="true" cssclass="edt_WF_Readonly"/>
                    <Edit id="Edit01" taborder="117" inputtype="digit" lengthunit="utf8" maxlength="4" top="4" height="23" width="50" left="448" readonly="true" cssclass="edt_WF_Readonly"/>
                    <Static id="Static24" taborder="118" text="/" left="65.84%" top="5" right="33.25%" height="21"/>
                    <Edit id="Edit05" taborder="119" inputtype="digit" lengthunit="utf8" maxlength="4" top="4" height="23" width="50" left="515" readonly="true" cssclass="edt_WF_Readonly"/>
                  </Layout>
                </Layouts>
              </Div>
              <Div id="div_search2" taborder="2" top="0" height="33" style="background:#f9fbffff;font:bold 9 Verdana;" cssclass="div_WFSA_Box" left="15" right="0" visible="false">
                <Layouts>
                  <Layout>
                    <Static id="Static03" taborder="120" text="고객명" cssclass="sta_WFSA_Label" left="2.09%" top="5" right="89.27%" height="21" style="align:left middle;font:bold 9 Verdana;"/>
                    <Static id="Static01" taborder="121" text="블럭/롯트" cssclass="sta_WFSA_Label" left="51.96%" top="5" right="37.57%" height="21" style="align:left middle;font:bold 9 Verdana;"/>
                    <Static id="Static02" taborder="122" text="토지명" cssclass="sta_WFSA_Label" left="24.48%" top="5" right="65.05%" height="21" style="align:left middle;font:bold 9 Verdana;"/>
                    <Edit id="Edit04" taborder="123" inputtype="digit" readonly="true" lengthunit="utf8" maxlength="4" cssclass="edt_WF_Readonly" left="10.21%" top="4" right="76.7%" height="23"/>
                    <Edit id="Edit00" taborder="124" inputtype="digit" readonly="true" lengthunit="utf8" maxlength="4" cssclass="edt_WF_Readonly" left="31.54%" top="4" right="48.82%" height="23"/>
                    <Edit id="Edit01" taborder="125" inputtype="digit" readonly="true" lengthunit="utf8" maxlength="4" cssclass="edt_WF_Readonly" left="61.78%" top="4" right="31.68%" height="23"/>
                    <Static id="Static24" taborder="126" text="/" left="68.98%" top="5" right="30.1%" height="21"/>
                    <Edit id="Edit05" taborder="127" inputtype="digit" readonly="true" lengthunit="utf8" maxlength="4" cssclass="edt_WF_Readonly" left="70.55%" top="4" right="22.91%" height="23"/>
                  </Layout>
                </Layouts>
              </Div>
              <Div id="div_search3" taborder="3" top="0" height="33" style="background:#f9fbffff;font:bold 9 Verdana;" cssclass="div_WFSA_Box" left="15" right="0" visible="false">
                <Layouts>
                  <Layout>
                    <Static id="Static03" taborder="128" text="고객명" cssclass="sta_WFSA_Label" left="2.09%" top="5" right="89.27%" height="21" style="align:left middle;font:bold 9 Verdana;"/>
                    <Static id="Static01" taborder="129" text="블럭/롯트" cssclass="sta_WFSA_Label" left="55.37%" top="5" right="34.16%" height="21" style="align:left middle;font:bold 9 Verdana;" visible="false"/>
                    <Static id="Static02" taborder="130" text="사업지구명" cssclass="sta_WFSA_Label" left="24.48%" top="5" right="65.05%" height="21" style="align:left middle;font:bold 9 Verdana;"/>
                    <Edit id="Edit04" taborder="131" inputtype="digit" readonly="true" lengthunit="utf8" maxlength="4" cssclass="edt_WF_Readonly" left="10.21%" top="4" right="76.7%" height="23"/>
                    <Edit id="Edit00" taborder="132" inputtype="digit" readonly="true" lengthunit="utf8" maxlength="4" cssclass="edt_WF_Readonly" left="34.95%" top="4" right="45.42%" height="23"/>
                    <Edit id="Edit01" taborder="133" inputtype="digit" readonly="true" lengthunit="utf8" maxlength="4" cssclass="edt_WF_Readonly" left="65.18%" top="4" right="28.27%" height="23" visible="false"/>
                    <Static id="Static24" taborder="134" text="/" left="72.38%" top="5" right="26.7%" height="21" visible="false"/>
                    <Edit id="Edit05" taborder="135" inputtype="digit" readonly="true" lengthunit="utf8" maxlength="4" cssclass="edt_WF_Readonly" left="73.95%" top="4" right="19.5%" height="23" visible="false"/>
                  </Layout>
                </Layouts>
              </Div>
            </Layout>
          </Layouts>
        </Div>
        <Button id="Button00" taborder="10" text="신규" onclick="fn_insert" cssclass="btn_WF_CRUD" left="78.63%" top="49" right="15.13%" height="25" visible="true"/>
        <Button id="Button01" taborder="11" text="저장" onclick="fn_save" cssclass="btn_WF_CRUD" left="85.25%" top="49" right="8.5%" height="25" visible="true"/>
        <Button id="Button03" taborder="12" text="조회" onclick="fn_search" cssclass="btn_WF_CRUD" left="72%" top="49" right="21.75%" height="25" visible="true"/>
      </Layout>
    </Layouts>
    <Bind>
      <BindItem id="item0" compid="div_work.Tab00.tabpage1.txt_cnsltCn" propid="value" datasetid="ds_cstmrCnsltList" columnid="CNSLT_CN"/>
      <BindItem id="item15" compid="div_work.Tab00.tabpage1.cal_cnsltDe" propid="value" datasetid="ds_cstmrCnsltList" columnid="CNSLT_DE"/>
      <BindItem id="item24" compid="div_work.Tab00.tabpage1.cmb_cstmrCnsltList" propid="value" datasetid="ds_cstmrCnsltList" columnid="CNSLT_SE1"/>
      <BindItem id="item25" compid="div_work.Tab00.tabpage1.Edit02" propid="value" datasetid="ds_cstmrCnsltList" columnid="CSTMR_NM"/>
      <BindItem id="item26" compid="div_work.Tab00.tabpage1.Edit03" propid="value" datasetid="ds_cstmrCnsltList" columnid="CSTMR_TELNO"/>
      <BindItem id="item53" compid="div_work.Tab00.tabpage1.cmb_cstmrCnsltList00" propid="value" datasetid="ds_cstmrCnsltList" columnid="CNSLT_SE2"/>
      <BindItem id="item146" compid="div_work.Tab00.tabpage1.Edit04" propid="value" datasetid="ds_cstmrCnsltList" columnid="DONG"/>
      <BindItem id="item155" compid="div_work.Tab00.tabpage1.Edit05" propid="value" datasetid="ds_cstmrCnsltList" columnid="HO"/>
      <BindItem id="item162" compid="div_work.Tab00.tabpage1.cmb_cstmrCnsltList01" propid="value" datasetid="ds_cstmrCnsltList" columnid="CNSLT_SE3"/>
      <BindItem id="item1" compid="div_work.div_search1.Edit04" propid="value" datasetid="ds_cstmrList" columnid="NM"/>
      <BindItem id="item2" compid="div_work.div_search1.Edit00" propid="value" datasetid="ds_cstmrList" columnid="HOUSE_NM"/>
      <BindItem id="item3" compid="div_work.div_search1.Edit01" propid="value" datasetid="ds_cstmrList" columnid="DONG"/>
      <BindItem id="item4" compid="div_work.div_search1.Edit05" propid="value" datasetid="ds_cstmrList" columnid="HO"/>
      <BindItem id="item5" compid="div_work.div_search3.Edit04" propid="value" datasetid="ds_cstmrList" columnid="NM"/>
      <BindItem id="item6" compid="div_work.div_search3.Edit00" propid="value" datasetid="ds_cstmrList" columnid="HOUSE_NM"/>
      <BindItem id="item7" compid="div_work.div_search2.Edit04" propid="value" datasetid="ds_cstmrList" columnid="NM"/>
      <BindItem id="item8" compid="div_work.div_search2.Edit00" propid="value" datasetid="ds_cstmrList" columnid="HOUSE_NM"/>
      <BindItem id="item9" compid="div_work.div_search2.Edit01" propid="value" datasetid="ds_cstmrList" columnid="DONG"/>
      <BindItem id="item10" compid="div_work.div_search2.Edit05" propid="value" datasetid="ds_cstmrList" columnid="HO"/>
    </Bind>
    <Objects>
      <Dataset id="ds_cond" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="CNSLT_BGN_DE" type="STRING" size="256"/>
          <Column id="CNSLT_END_DE" type="STRING" size="256"/>
          <Column id="CNSLT_CN" type="STRING" size="256"/>
          <Column id="DONG" type="STRING" size="256"/>
          <Column id="HO" type="STRING" size="256"/>
          <Column id="RCEPTER_SE" type="STRING" size="256"/>
          <Column id="CNTRCTR_NO" type="STRING" size="256"/>
          <Column id="WAITR_HOUSE_CODE" type="STRING" size="256"/>
          <Column id="WAITR_RECEP_DE" type="STRING" size="256"/>
          <Column id="WAITR_SN" type="STRING" size="256"/>
          <Column id="CHRCTR_PREPAR_VALUE_0" type="STRING" size="256"/>
          <Column id="CHRCTR_PREPAR_VALUE_1" type="STRING" size="256"/>
          <Column id="CHRCTR_PREPAR_VALUE_2" type="STRING" size="256"/>
          <Column id="CHRCTR_PREPAR_VALUE_3" type="STRING" size="256"/>
          <Column id="CHRCTR_PREPAR_VALUE_4" type="STRING" size="256"/>
          <Column id="JOB_SE" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_cond2" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="NM" type="STRING" size="256"/>
          <Column id="MBTLNO" type="STRING" size="256"/>
          <Column id="TELNO" type="STRING" size="256"/>
          <Column id="CSTMR_NO" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_cstmrList" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="CSTMR_SE" type="STRING" size="256"/>
          <Column id="PRMANENT_CSTMR_NO" type="STRING" size="256"/>
          <Column id="WAIT_AT" type="STRING" size="256"/>
          <Column id="CNTRCT_AT" type="STRING" size="256"/>
          <Column id="NM" type="STRING" size="256"/>
          <Column id="IHIDNUM" type="STRING" size="256"/>
          <Column id="EMAIL" type="STRING" size="256"/>
          <Column id="TELNO" type="STRING" size="256"/>
          <Column id="MBTLNO" type="STRING" size="256"/>
          <Column id="ZIP" type="STRING" size="256"/>
          <Column id="ADRES" type="STRING" size="256"/>
          <Column id="CNTRCTR_NO" type="STRING" size="256"/>
          <Column id="HOUSE_CODE" type="STRING" size="256"/>
          <Column id="DONG" type="STRING" size="256"/>
          <Column id="HO" type="STRING" size="256"/>
          <Column id="RCEPT_DE" type="STRING" size="256"/>
          <Column id="RCEPT_SN" type="STRING" size="256"/>
          <Column id="CSTMR_BRTHDY" type="STRING" size="256"/>
          <Column id="RCEPTER_SE" type="STRING" size="256"/>
          <Column id="JOB_SE" type="STRING" size="256"/>
          <Column id="HOUSE_NM" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_cstmrCnsltList" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false" oncolumnchanged="ds_cstmrCnsltList_oncolumnchanged" onrowposchanged="ds_cstmrCnsltList_onrowposchanged">
        <ColumnInfo>
          <Column id="SN" type="BIGDECIMAL" size="11"/>
          <Column id="CNSLT_SE" type="STRING" size="5"/>
          <Column id="CSTMR_NM" type="STRING" size="100"/>
          <Column id="CSTMR_TELNO" type="STRING" size="12"/>
          <Column id="CSTMR_BRTHDY" type="STRING" size="8"/>
          <Column id="DONG" type="STRING" size="4"/>
          <Column id="HO" type="STRING" size="4"/>
          <Column id="CNSLT_DE" type="STRING" size="8"/>
          <Column id="CNSLT_CN" type="STRING" size="1500"/>
          <Column id="CNSLT_MAN" type="STRING" size="30"/>
          <Column id="INDPND_REGIST_AT" type="STRING" size="2"/>
          <Column id="JOB_SE" type="STRING" size="3"/>
          <Column id="CSTMR_NO" type="BIGDECIMAL" size="11"/>
          <Column id="RCEPTER_SE" type="STRING" size="3"/>
          <Column id="CNTRCTR_NO" type="STRING" size="11"/>
          <Column id="WAITR_HOUSE_CODE" type="STRING" size="4"/>
          <Column id="WAITR_RECEP_DE" type="STRING" size="8"/>
          <Column id="WAITR_SN" type="BIGDECIMAL" size="11"/>
          <Column id="MSSAGE_ID" type="STRING" size="10"/>
          <Column id="REGISTER_ID" type="STRING" size="12"/>
          <Column id="REGIST_DT" type="STRING" size="255"/>
          <Column id="UPDUSR_ID" type="STRING" size="12"/>
          <Column id="UPDT_DT" type="STRING" size="255"/>
          <Column id="CNSLT_SE1" type="STRING" size="256"/>
          <Column id="CNSLT_SE2" type="STRING" size="256"/>
          <Column id="CNSLT_SE3" type="STRING" size="256"/>
          <Column id="INDPND_CHK" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_cstmrGrad" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="CODE" type="STRING" size="256"/>
          <Column id="CODE_NM" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_cstmrSe" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="CODE" type="STRING" size="256"/>
          <Column id="CODE_NM" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_chrctrCnInfo" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="CHRCTR_CN" type="STRING" size="256"/>
          <Column id="SEND_TEL_NO" type="STRING" size="256"/>
          <Column id="CHRCTR_SE" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_validation" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="compId" type="STRING" size="256"/>
          <Column id="colId" type="STRING" size="256"/>
          <Column id="PK" type="STRING" size="256"/>
          <Column id="notNull" type="STRING" size="256"/>
          <Column id="type" type="STRING" size="256"/>
          <Column id="nlength" type="STRING" size="256"/>
          <Column id="from" type="STRING" size="256"/>
          <Column id="to" type="STRING" size="256"/>
          <Column id="lengthChkGb" type="STRING" size="256"/>
          <Column id="msgId" type="STRING" size="256"/>
          <Column id="expr" type="STRING" size="256"/>
          <Column id="func" type="STRING" size="256"/>
        </ColumnInfo>
        <Rows>
          <Row>
            <Col id="compId">ds_cstmrCnsltList</Col>
            <Col id="colId">CNSLT_DE</Col>
            <Col id="PK"/>
            <Col id="notNull">Y</Col>
            <Col id="type">[Undefined]</Col>
            <Col id="nlength">[Undefined]</Col>
            <Col id="from">[Undefined]</Col>
            <Col id="to">[Undefined]</Col>
            <Col id="lengthChkGb">[Undefined]</Col>
            <Col id="msgId">상담일자</Col>
            <Col id="expr">[Undefined]</Col>
            <Col id="func">[Undefined]</Col>
          </Row>
          <Row>
            <Col id="compId">ds_cstmrCnsltList</Col>
            <Col id="colId">CNSLT_SE1</Col>
            <Col id="PK"/>
            <Col id="notNull">Y</Col>
            <Col id="type">[Undefined]</Col>
            <Col id="nlength">[Undefined]</Col>
            <Col id="from">[Undefined]</Col>
            <Col id="to">[Undefined]</Col>
            <Col id="lengthChkGb">[Undefined]</Col>
            <Col id="msgId">대분류</Col>
            <Col id="expr">[Undefined]</Col>
            <Col id="func">[Undefined]</Col>
          </Row>
          <Row>
            <Col id="colId">CNSLT_SE2</Col>
            <Col id="compId">ds_cstmrCnsltList</Col>
            <Col id="msgId">중분류</Col>
            <Col id="notNull">Y</Col>
            <Col id="PK"/>
          </Row>
          <Row>
            <Col id="colId">CSTMR_NM</Col>
            <Col id="compId">ds_cstmrCnsltList</Col>
            <Col id="msgId">상담고객</Col>
            <Col id="notNull">Y</Col>
            <Col id="PK"/>
          </Row>
          <Row>
            <Col id="colId">CSTMR_TELNO</Col>
            <Col id="compId">ds_cstmrCnsltList</Col>
            <Col id="notNull">Y</Col>
            <Col id="msgId">전화번호</Col>
          </Row>
          <Row>
            <Col id="compId">ds_cstmrCnsltList</Col>
            <Col id="colId">CNSLT_CN</Col>
            <Col id="PK"/>
            <Col id="notNull">Y</Col>
            <Col id="type">[Undefined]</Col>
            <Col id="nlength">[Undefined]</Col>
            <Col id="from">[Undefined]</Col>
            <Col id="to">[Undefined]</Col>
            <Col id="lengthChkGb">[Undefined]</Col>
            <Col id="msgId">상담내용</Col>
            <Col id="expr">[Undefined]</Col>
          </Row>
          <Row>
            <Col id="compId">ds_chrctrCnInfo</Col>
            <Col id="notNull">Y</Col>
            <Col id="msgId">문자내용</Col>
            <Col id="colId">CHRCTR_CN</Col>
          </Row>
          <Row>
            <Col id="compId">ds_chrctrCnInfo</Col>
            <Col id="notNull">Y</Col>
            <Col id="msgId">발신번호</Col>
            <Col id="colId">SEND_TEL_NO</Col>
          </Row>
          <Row>
            <Col id="compId">div_search</Col>
            <Col id="colId">Calendar00</Col>
            <Col id="from">Calendar00</Col>
            <Col id="to">Calendar01</Col>
            <Col id="msgId">상담시작일</Col>
            <Col id="notNull">Y</Col>
          </Row>
          <Row>
            <Col id="compId">div_search</Col>
            <Col id="colId">Calendar01</Col>
            <Col id="from">Calendar00</Col>
            <Col id="to">Calendar01</Col>
            <Col id="msgId">상담종료일</Col>
            <Col id="notNull">Y</Col>
          </Row>
        </Rows>
      </Dataset>
      <Dataset id="ds_cus030" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false"/>
      <Dataset id="ds_smsClient1" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="RECIPIENT_NUM" type="STRING" size="256"/>
          <Column id="CHANGE_WORD5" type="STRING" size="256"/>
        </ColumnInfo>
        <Rows>
          <Row>
            <Col id="RECIPIENT_NUM">010</Col>
            <Col id="CHANGE_WORD5">이동석</Col>
          </Row>
          <Row>
            <Col id="RECIPIENT_NUM">019</Col>
            <Col id="CHANGE_WORD5">정윤원</Col>
          </Row>
        </Rows>
      </Dataset>
      <Dataset id="ds_cus031" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="CODE" type="STRING" size="256"/>
          <Column id="CODE_NM" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_cus032" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="CODE" type="STRING" size="256"/>
          <Column id="CODE_NM" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_cus033" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="CODE" type="STRING" size="256"/>
          <Column id="CODE_NM" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_cond4" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="TELNO" type="STRING" size="256"/>
          <Column id="CSTMR_NM" type="STRING" size="256"/>
          <Column id="DONG" type="STRING" size="256"/>
          <Column id="HO" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_cnsltSe" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="CODE" type="STRING" size="256"/>
          <Column id="CODE_NM" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_smsLog" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="DEPT_CODE" type="STRING" size="256"/>
          <Column id="SNDNG_SVC_TY" type="STRING" size="256"/>
          <Column id="RECPTN_TELNO" type="STRING" size="256"/>
          <Column id="SNDNG_RESVE_DT" type="STRING" size="256"/>
          <Column id="MSSAGE_TY" type="STRING" size="256"/>
          <Column id="SNDNG_CN" type="STRING" size="256"/>
          <Column id="RCVER_NM" type="STRING" size="256"/>
          <Column id="CHRCTR_PREPAR_VALUE_0" type="STRING" size="256"/>
          <Column id="CHRCTR_PREPAR_VALUE_1" type="STRING" size="256"/>
          <Column id="CHRCTR_PREPAR_VALUE_2" type="STRING" size="256"/>
          <Column id="CHRCTR_PREPAR_VALUE_3" type="STRING" size="256"/>
          <Column id="CHRCTR_PREPAR_VALUE_4" type="STRING" size="256"/>
          <Column id="SEND_DATE" type="STRING" size="256"/>
          <Column id="STS" type="STRING" size="256"/>
          <Column id="REGIST_DT" type="STRING" size="256"/>
          <Column id="RLST_CD" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_com046" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="CODE" type="STRING" size="256"/>
          <Column id="CODE_NM" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_com048" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="CODE" type="STRING" size="256"/>
          <Column id="CODE_NM" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_com047" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="CODE" type="STRING" size="256"/>
          <Column id="CODE_NM" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_com049" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="CODE" type="STRING" size="256"/>
          <Column id="CODE_NM" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_gdccSndngHistList" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="GDCC_SNDNG_DE" type="STRING" size="256"/>
          <Column id="JOB_SE_CODE" type="STRING" size="256"/>
          <Column id="GDCC_KND" type="STRING" size="256"/>
          <Column id="ADRES" type="STRING" size="256"/>
          <Column id="ADRES_DETAIL" type="STRING" size="256"/>
          <Column id="TELNO" type="STRING" size="256"/>
          <Column id="MBTLNO" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
    </Objects>
    <Script type="xscript5.0"><![CDATA[/***********************************************************************
 * 화면ID    : PMS000005_P01.xfdl
 * 화면명    : 고객관리 팝업
 * 화면설명  : 선택한 고객의 콜센터의 상담내역 및 문자발송내역 조회
 * 작성일    : 2016.07.21
 * 작성자    : 이광원
 * 수정이력  : 
 ***********************************************************************
 *     수정일     수정자   내용
 ***********************************************************************
 *    
 ***********************************************************************/
 
/***********************************************************************
 * Script Include 
 ***********************************************************************/
include "lib::comInclude.xjs";
include "mis_lib::misUtil.xjs";
include "lib::comSms.xjs";

/***********************************************************************
 * 화면 변수 선언부
 ***********************************************************************/
this.checkDs = [
  this.ds_cstmrCnsltList
];
var save_row = -1;
this.strUserNm;
this.fv_objForm;
/***********************************************************************
 * onInit 영역
 ***********************************************************************/
this.PMS000005_P01_oninit = function(obj:Form, e:nexacro.InitEventInfo)
{
	// Form 초기화
	this.fn_init_form();

	// DataSet 초기화
	this.fn_init_dataset();
	this.div_work.Tab00.tabpage2.TextArea00.set_visible(false);
}

/***********************************************************************
 * onLoad 영역
 ***********************************************************************/
this.PMS000005_P01_onload = function(obj:Form, e:nexacro.LoadEventInfo)
{ 	
	this.strUserNm = application.gds_userInfo.getColumn(0, "USER_NM");	// 로그인 사용자 이름
	
	this.fv_objForm = this.parent.arg_0;
	this.ds_cond.copyRow( 0 , this.parent.arg_1 , 0);
		
	this.fn_transaction("selectCstmrList");		
	this.ds_cond.setColumn( 0 , "CNSLT_BGN_DE" , "19000101");
	this.ds_cond.setColumn( 0 , "CNSLT_END_DE" , this.dateUtils.today());
		
	/*
	// 사용자 콤보 생성
	var paramMap = {};	
	paramMap["USE_AT"] = "";
	this.pmsUtil.getLadCodeList(paramMap, "ds_landCodeSh");

	this.fn_get_lndcgrCode(this.ds_lndcgrCode);							// 지목 코드
	*/
	
}

/**********************************************************************
* Form 오브젝트 초기화
***********************************************************************/
this.fn_init_form = function()
{
	this.gfn_initForm(this);	// 시스템 공통으로 Form을 Initialize 한다.
	this.fn_misFormInit(this);
	
	this.ds_cond4.addRow();
	
	this.ds_chrctrCnInfo.addRow();
	this.ds_chrctrCnInfo.setColumn(0, "REGISTER_ID", this.fn_getEmpnm());
	
	//조회조건
	this.ds_cond.clearData();
	this.ds_cond.addRow();
	this.ds_cond.setColumn(0, "CNSLT_BGN_DE", this.dateUtils.addDate(this.dateUtils.today(), -7, "s"));
	this.ds_cond.setColumn(0, "CNSLT_END_DE", this.gfn_today());
	
	var comboParams = [["ds_cstmrGrad",         "CUS021", 1, "전체"], 	//고객등급
					   ["ds_cstmrSe",           "CUS020", 1, ""], 		//고객구분
					   ["ds_cnsltSe",           "CUS018", 1, "선택"], 	//상담구분
					   
					   ["ds_cus030",            "CUS030", 1, ""],		//화성도시공사 연락처
					   
					   ["ds_cus031",            "CUS031", 1, ""],		//상담구분1 콜센터상담구분(대분류)
					   ["ds_cus032",            "CUS032", 1, ""],		//상담구분2	콜센터상담구분(중분류)
					   ["ds_cus033",            "CUS033", 1, ""],		//상담구분3 콜센터상담구분(소분류)
					   
					   ["ds_com046",            "COM046", 1, ""],		//SMS결과코드
					   ["ds_com048",            "COM046", 1, ""],		//SMS전송상태
					   
					   ["ds_com047",            "COM047", 1, ""],		//MMS결과코드
					   ["ds_com049",            "COM049", 1, ""],		//MMS전송상태					   
					   
		              ];
	var callback = function (svcId, errorCode, errorMsg) {
		this.ds_cus030.filter("CODE == 'TEL'");
		var telNo = this.ds_cus030.getColumn(0, "VAL0");
		this.ds_chrctrCnInfo.setColumn(0, "SEND_TEL_NO", telNo);
		this.fn_transaction("selectCstmrCnsltList");
	};
	this.gfn_comboLoad (comboParams, callback);
}

/**********************************************************************
* Dataset 오브젝트 초기화
***********************************************************************/
this.fn_init_dataset = function()
{
	
}

/***********************************************************************
* 상단 조회처리
************************************************************************/
this.fn_search = function()
{	
	//validation check
	if(!this.gfn_checkValidation(this.div_search, this.ds_validation)){
		return;
	}

	this.ds_cstmrCnsltList.clearData();

	//상담 목록 조회 
	this.fn_transaction("selectCstmrCnsltList");
}

/**********************************************************************
 *상단 저장 처리
 ***********************************************************************/ 
this.fn_save = function()
{
	//validation check		
	if(!this.gfn_checkValidation(this.ds_cstmrCnsltList, this.ds_validation)){
		return;
	}
	if(this.gfn_message("confirm.저장.여부")){
		save_row = this.ds_cstmrCnsltList.rowposition; 
		this.fn_transaction("cstmrCnsltListCUD");
	}
}

/* 신규버튼 */
this.fn_insert = function(obj:Button,  e:nexacro.ClickEventInfo)
{
	if(this.ds_cstmrCnsltList.rowcount == 0){
		//this.fn_transaction("selectCstmrList");
		var nRow = this.ds_cstmrCnsltList.addRow();
		this.div_work.Tab00.tabpage1.cal_cnsltDe.set_value(this.dateUtils.today());
		this.ds_cstmrCnsltList.copyRow( nRow , this.ds_cond , 0);				
		this.ds_cstmrCnsltList.copyRow( nRow , this.ds_cstmrList , 0 ,
		 "CSTMR_NM=NM,"
		+"CSTMR_TELNO=TELNO,"
		+"CSTMR_MBTLNO_MBTLNO,"
		+"DONG=DONG,"
		+"HO=HO,"
		+"CSTMR_BRTHDY=CSTMR_BRTHDY,"
		+"CSTMR_NO=PRMANENT_CSTMR_NO."
		);		
	}else{
		var nRow = this.ds_cstmrCnsltList.addRow();	
		this.ds_cstmrCnsltList.copyRow( nRow , this.ds_cstmrCnsltList , this.ds_cstmrCnsltList.rowposition - 1);
		// 상담목록내용 , 대 중 소 분류 초기화
		this.div_work.Tab00.tabpage1.cal_cnsltDe.set_value(this.dateUtils.today());
		this.div_work.Tab00.tabpage1.txt_cnsltCn.set_value("");
		this.div_work.Tab00.tabpage1.cmb_cstmrCnsltList.set_value("");
		this.div_work.Tab00.tabpage1.cmb_cstmrCnsltList00.set_value("");
		this.div_work.Tab00.tabpage1.cmb_cstmrCnsltList01.set_value("");
	}	
}
/**********************************************************************
 * CALL TRANSACTION 영역
 **********************************************************************/ 
this.fn_transaction = function(strSvcId)
{
	switch (strSvcId) {
		
		
		// 상담목록 조회
		case "selectCstmrCnsltList":
			var sController   	= "hsco/mis/cus/CUS030103/selectCstmrCnsltList.do";
			var sInDatasets   	= "input02=ds_cond";
			var sOutDatasets  	= "ds_cstmrCnsltList=output02";
		break;
		
		// 고객정보 조회
		case "selectCstmrList":
			this.ds_cstmrList.clearData();
			var sController   	= "hsco/pms/com/PMS000005/selectCstmrList.do";
			var sInDatasets   	= "input1=ds_cond";
			var sOutDatasets  	= "ds_cstmrList=output1";
		break;		
			
		// 상담목록 CUD
		case "cstmrCnsltListCUD":
			var sController   	= "hsco/mis/cus/CUS030103/cstmrCnsltListCUD.do";
			var sInDatasets   	= "input03=ds_cstmrCnsltList:U";
			var sOutDatasets  	= "";
		break;
		
		// 문자메세지 목록
	    case "selectSmstranList": 
			var sController   	= "hsco/pms/com/PMS000005/selectSmstranList.do";
			var sInDatasets   	= "input1=ds_cond"
			var sOutDatasets  	= "ds_smsLog=output1";
			break;				
		
		case "gdccSndngHistList":		//임대계약자
			var sController   	= "/hsco/pms/rnt/pra/RNT00000000/gdccSndngHistList.do"; 
			var sInDatasets   	= "input1=ds_cond";
			var sOutDatasets  	= "ds_gdccSndngHistList=output1";
			break;

	}
	var sArgs = "";	
	Ex.core.tran(this, strSvcId, sController, sInDatasets, sOutDatasets, sArgs); 
}

 /**********************************************************************
 * Transaction Callback 영역
 ***********************************************************************/ 
this.fn_callBack = function (strSvcId, nErrorCode, strErrorMsg)
{
	if (nErrorCode != 0){
		this.gfn_callback_message(strSvcId, nErrorCode, strErrorMsg);	
	} 
	else {	
		var comboOption = null;
		switch(strSvcId)
		{		
		
			// 고객목록 조회
			case "selectCstmrList": 
				
			var job_se = this.ds_cstmrList.getColumn( 0 , "JOB_SE");
			if(job_se == "RN1" || job_se == "RN2" || job_se == "RN3" || job_se == "HOU"){
				if(job_se == "RN3" || job_se == "HOU"){
						this.div_work.Tab00.removeTabpage(2);
				}
				this.div_work.div_search1.set_visible(true);
				this.div_work.div_search2.set_visible(false);
				this.div_work.div_search3.set_visible(false);
			}
			if(job_se == "LAD"){

				this.div_work.div_search1.set_visible(false);
				this.div_work.div_search2.set_visible(true);
				this.div_work.div_search3.set_visible(false);
				this.div_work.Tab00.removeTabpage(2);
			}
			if(job_se == "CMP"){

				this.div_work.div_search1.set_visible(false);
				this.div_work.div_search2.set_visible(false);
				this.div_work.div_search3.set_visible(true);
				this.div_work.Tab00.removeTabpage(2);
			}			
			
			break;

			case "selectCstmrCnsltList":
				if(save_row != -1){
					this.ds_cstmrCnsltList.set_rowposition(save_row);
					save_row = -1;
				}
			break;
			
			//상담목록cud콜백
			case "cstmrCnsltListCUD":
				this.gfn_message("success.처리.성공");
				this.fn_transaction("selectCstmrCnsltList");
			break;
			
		}
	}
}

/**********************************************************************
 * 분류 선택 시 이벤트
 ***********************************************************************/ 
this.ds_cstmrCnsltList_oncolumnchanged = function(obj:Dataset, e:nexacro.DSColChangeEventInfo)
{
	//대분류
	if(e.columnid == "CNSLT_SE1"){
		this.ds_cus032.filter("CODE.substr(0,1) == '"+ e.newvalue +"'");
		this.div_work.Tab00.tabpage1.cmb_cstmrCnsltList00.set_index(0);
		
		var code = this.ds_cstmrCnsltList.getColumn(this.ds_cstmrCnsltList.rowposition, "CNSLT_SE2");
		this.ds_cus033.filter("CODE.substr(0,3) == '"+ code +"'");
		this.div_work.Tab00.tabpage1.cmb_cstmrCnsltList01.set_index(0);
	}
	
	//중분류
	if(e.columnid == "CNSLT_SE2"){
		this.ds_cus033.filter("CODE.substr(0,3) == '"+ e.newvalue +"'");
		this.div_work.Tab00.tabpage1.cmb_cstmrCnsltList01.set_index(0);
	}
}


this.Button02_onclick = function(obj:Button,  e:nexacro.ClickEventInfo)
{
	this.close();
}

// 탭변경시 조회
this.Tab00_onchanged = function(obj:Tab, e:nexacro.TabIndexChangeEventInfo)
{
	// 고객 상담 목록
	if(this.div_work.Tab00.tabindex == 0){
		this.Button03.set_visible(true);
		this.Button00.set_visible(true);
		this.Button01.set_visible(true);
		this.fn_transaction("selectCstmrCnsltList");	
	}	
	// 문자메세지 발송 목록
	if(this.div_work.Tab00.tabindex == 1){
		this.Button03.set_visible(false);
		this.Button00.set_visible(false);
		this.Button01.set_visible(false);
		this.fn_transaction("selectSmstranList");	
	}		
	// 안내문 발송 목록
	if(this.div_work.Tab00.tabindex == 2){
		this.Button03.set_visible(false);
		this.Button00.set_visible(false);
		this.Button01.set_visible(false);
		this.fn_transaction("gdccSndngHistList");	
	}		
	
}

// 그리드 메세지 클릭시 상세 화면
this.msgOncellclick = function(obj:Grid, e:nexacro.GridClickEventInfo)
{
	if (e.cell == obj.getBindCellIndex("body", "SNDNG_CN")) {
		var title = this.ds_smsLog.getColumn(this.ds_smsLog.rowposition, "RCVER_NM");
		
		var _msgAreaObj = this.div_work.Tab00.tabpage2.TextArea00;
		var tempMsgContent = this.ds_smsLog.getColumn(this.ds_smsLog.rowposition,"SNDNG_CN");
		var msgContent = '\n';
		for (var i = 0; i < tempMsgContent.length; i++) {
		  if(i % 26 == 0){
			  msgContent = msgContent + '\n\t' ;
		  }
		  msgContent = msgContent + tempMsgContent.charAt(i);
		}
		_msgAreaObj.set_value(msgContent);
		_msgAreaObj.style.set_background("URL('image::msgImg.png')");
		_msgAreaObj.set_top(e.clientY*1.1);
		_msgAreaObj.set_visible(true);
	}
}

// 상세화면 마우스 오버시
this.msgOnmouseleave = function(obj:TextArea, e:nexacro.MouseEventInfo)
{
	this.div_work.Tab00.tabpage2.TextArea00.set_visible(false);
}
]]></Script>
  </Form>
</FDL>
