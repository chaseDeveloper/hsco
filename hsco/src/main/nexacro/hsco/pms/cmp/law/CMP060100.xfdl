<?xml version="1.0" encoding="utf-8"?>
<FDL version="1.5">
  <TypeDefinition url="..\..\..\default_typedef.xml"/>
  <Form id="CMP060100" classname="CMP060100" left="0" top="0" width="1059" height="735" titletext="공탁관리" oninit="CMP060100_oninit" onload="CMP060100_onload">
    <Layouts>
      <Layout>
        <Div id="div_search" taborder="0" left="0" top="0" height="103" style="border:1 solid #a8c2e2ff ;" cssclass="div_WFSA_Box" right="28">
          <Layouts>
            <Layout>
              <Static id="sta_BSNS_AREA_NM" taborder="6" text="사업지구" onclick="Div00_Static00_onclick" left="10" top="5" width="64" height="21" style="align:left middle;" cssclass="sta_WFSA_Label"/>
              <Static id="sta_LOCPLC" taborder="7" text="소재지" onclick="Div00_Static00_onclick" left="315" top="5" width="51" height="21" style="align:left middle;" cssclass="sta_WFSA_Label"/>
              <Static id="sta_OWNER" taborder="8" text="소유자" onclick="Div00_Static00_onclick" left="605" top="5" width="51" height="21" style="align:left middle;" cssclass="sta_WFSA_Label"/>
              <Edit id="edt_nm" taborder="2" cssclass="edt_WFDA_Pink" left="656" top="5" width="91" height="21"/>
              <CheckBox id="chk_request" taborder="3" text="미청구" left="762" top="5" width="80" height="21" visible="false"/>
              <CheckBox id="chk_aceptncAdjdcOdrChkAll" taborder="9" text="전체" onchanged="div_SearchArea_chk_ALL_onchanged" left="23" top="55" width="44" height="15" onclick="div_search_chk_aceptncAdjdcOdrChkAll_onclick"/>
              <Static id="sta_00" taborder="10" text="수용재결" onclick="Div00_Static00_onclick" left="10" top="31" width="64" height="21" style="align:left middle;" cssclass="sta_WFSA_Label"/>
              <CheckBox id="chk_thingClChkAll" taborder="11" text="전체" onchanged="div_SearchArea_chk_ALL_onchanged" left="329" top="55" width="44" height="15" onclick="div_search_chk_thingClChkAll_onclick"/>
              <Static id="sta_01" taborder="12" text="수용증액" onclick="Div00_Static00_onclick" left="315" top="31" width="64" height="21" style="align:left middle;" cssclass="sta_WFSA_Label"/>
              <Div id="div_ACEPTNC_ADJDC_ODR" taborder="4" left="74" top="31" width="226" height="65" style="border:1 solid #a8c2e2ff ;" url="pms_cmp_formLib::CmpMultiCheckBar.xfdl" onload="CMP060100_onload"/>
              <Div id="div_THING_CL" taborder="5" left="379" top="31" style="border:1 solid #a8c2e2ff ;" url="pms_cmp_formLib::CmpMultiCheckBar.xfdl" bottom="5" width="636"/>
              <Combo id="cmb_bsnsAreaCode" taborder="0" innerdataset="@ds_bsnsAreaCode" codecolumn="CODE" datacolumn="FULL_CODE_NM" left="74" top="5" width="226" height="21" onitemchanged="div_search_cmb_bsnsAreaCode_onitemchanged" cssclass="cmb_WF_Essential"/>
              <Combo id="cmb_locplcCode" taborder="1" innerdataset="@ds_locplcCode" codecolumn="CODE" datacolumn="CODE_NM" left="379" top="5" width="211" height="21"/>
            </Layout>
          </Layouts>
        </Div>
        <Div id="div_DETAIL_01" taborder="2" text="Div02" left="239" top="103" height="255" right="28">
          <Layouts>
            <Layout>
              <Grid id="grd_thingWtnnc" taborder="2" useinputpanel="false" left="0" top="36" right="0" bottom="0" autofittype="none" binddataset="ds_thingWtnnc">
                <Formats>
                  <Format id="default">
                    <Columns>
                      <Column size="40" band="left"/>
                      <Column size="177"/>
                      <Column size="109"/>
                      <Column size="96"/>
                      <Column size="78"/>
                      <Column size="84"/>
                      <Column size="77"/>
                      <Column size="72"/>
                      <Column size="43"/>
                      <Column size="120"/>
                      <Column size="120"/>
                    </Columns>
                    <Rows>
                      <Row size="24" band="head"/>
                      <Row size="24" band="head"/>
                      <Row size="24"/>
                      <Row size="24" band="summ"/>
                    </Rows>
                    <Band id="head">
                      <Cell rowspan="2" text="순번"/>
                      <Cell col="1" rowspan="2" text="소재지"/>
                      <Cell col="2" rowspan="2" text="물건분류"/>
                      <Cell col="3" rowspan="2" text="물건종류"/>
                      <Cell col="4" rowspan="2" text="지목"/>
                      <Cell col="5" colspan="3" text="수량/면적"/>
                      <Cell col="8" rowspan="2" text="단위"/>
                      <Cell col="9" rowspan="2" text="단가"/>
                      <Cell col="10" rowspan="2" text="금액"/>
                      <Cell row="1" col="5" text="지적"/>
                      <Cell row="1" col="6" text="편입"/>
                      <Cell row="1" col="7" text="소유"/>
                    </Band>
                    <Band id="body">
                      <Cell text="expr:currow + 1"/>
                      <Cell col="1" displaytype="normal" style="align:left;" text="bind:FULL_LOCPLC_CODE_NM" combodataset="ds_locplcCode" combocodecol="CODE" combodatacol="CODE_NM"/>
                      <Cell col="2" displaytype="combo" style="align:left;" text="bind:THING_CL" combodataset="ds_thingCl" combocodecol="CODE" combodatacol="CODE_NM"/>
                      <Cell col="3" style="align:left;" text="bind:THING_NM"/>
                      <Cell col="4" displaytype="combo" style="align:left;" text="bind:LNDCGR_INCRPR" combodataset="ds_lndcgrCode" combocodecol="CODE" combodatacol="CODE_NM"/>
                      <Cell col="5" displaytype="number" style="align:right;" text="bind:AR_LGSTR"/>
                      <Cell col="6" displaytype="number" style="align:right;" text="bind:AR_INCRPR"/>
                      <Cell col="7" displaytype="number" style="align:right;" text="bind:AR"/>
                      <Cell col="8" displaytype="combo" style="align:center;" text="bind:UNIT" combodataset="ds_unit" combocodecol="CODE" combodatacol="CODE_NM"/>
                      <Cell col="9" displaytype="number" style="align:right;" text="bind:UNTPC"/>
                      <Cell col="10" displaytype="number" style="align:right;" text="bind:RWMNY"/>
                    </Band>
                    <Band id="summary">
                      <Cell expr="dataset.rowcount"/>
                      <Cell col="1"/>
                      <Cell col="2"/>
                      <Cell col="3"/>
                      <Cell col="4"/>
                      <Cell col="5"/>
                      <Cell col="6"/>
                      <Cell col="7"/>
                      <Cell col="8"/>
                      <Cell col="9" displaytype="number"/>
                      <Cell col="10" displaytype="number" expr="dataset.getSum('RWMNY')"/>
                    </Band>
                  </Format>
                </Formats>
              </Grid>
              <Static id="Static08" taborder="3" text="10" visible="false" left="0" top="0" right="0" height="10" style="background:#dc143c3c;align:center middle;"/>
              <Static id="Static00" taborder="4" text="물건내역" cssclass="sta_WF_Title02" left="0" top="10" width="119" height="21"/>
              <Static id="Static04" taborder="5" text="5" onclick="Tab00_tabpage5_Static02_onclick" visible="false" left="0" top="31" right="0" height="5" style="background:#dc143c3c;align:center middle;"/>
              <Button id="Button00" taborder="6" text="물건내역" top="11" width="68" height="19" right="0" onclick="div_DETAIL_01_Button00_onclick"/>
            </Layout>
          </Layouts>
        </Div>
        <Div id="div_DETAIL02" taborder="3" text="Div01" left="239" top="358" right="28" bottom="0">
          <Layouts>
            <Layout>
              <Grid id="grd_ldgmnt" taborder="2" useinputpanel="false" left="0" top="36" right="0" binddataset="ds_ldgmnt" height="169" onselectchanged="div_DETAIL02_grd_ldgmnt_onselectchanged" onlbuttondown="div_DETAIL02_grd_ldgmnt_onlbuttondown" onlbuttonup="div_DETAIL02_grd_ldgmnt_onlbuttonup" onmouseleave="div_DETAIL02_grd_ldgmnt_onmouseleave" cellmovingtype="none">
                <Formats>
                  <Format id="default">
                    <Columns>
                      <Column size="40" band="left"/>
                      <Column size="95"/>
                      <Column size="88"/>
                      <Column size="88"/>
                      <Column size="24"/>
                      <Column size="100"/>
                      <Column size="98"/>
                      <Column size="235"/>
                      <Column size="109"/>
                      <Column size="122"/>
                      <Column size="100"/>
                      <Column size="124"/>
                      <Column size="112"/>
                      <Column size="133"/>
                      <Column size="191"/>
                    </Columns>
                    <Rows>
                      <Row size="24" band="head"/>
                      <Row size="24" band="head"/>
                      <Row size="24"/>
                      <Row size="24" band="summ"/>
                    </Rows>
                    <Band id="head">
                      <Cell rowspan="2" text="순번"/>
                      <Cell col="1" rowspan="2" text="공탁일자"/>
                      <Cell col="2" rowspan="2" text="피공탁자"/>
                      <Cell col="3" rowspan="2" text="주민번호"/>
                      <Cell col="4" rowspan="2" displaytype="image" text="theme://images\ico_menu_check.png"/>
                      <Cell col="5" rowspan="2" text="연락처"/>
                      <Cell col="6" rowspan="2" text="우편번호"/>
                      <Cell col="7" rowspan="2" text="피공탁자&#13;&#10;주소"/>
                      <Cell col="8" rowspan="2" text="공탁금액"/>
                      <Cell col="9" rowspan="2" text="공탁사유"/>
                      <Cell col="10" rowspan="2" displaytype="normal" edittype="none" text="보상형태"/>
                      <Cell col="11" rowspan="2" text="공탁은행"/>
                      <Cell col="12" rowspan="2" text="대리인"/>
                      <Cell col="13" rowspan="2" text="대리인&#13;&#10;연락처"/>
                      <Cell col="14" rowspan="2" text="대리인&#13;&#10;주소"/>
                    </Band>
                    <Band id="body">
                      <Cell text="expr:currow + 1"/>
                      <Cell col="1" displaytype="date" edittype="date" text="bind:LDGMNT_DE" calendardisplaynulltype="none"/>
                      <Cell col="2" edittype="text" style="align:left;" text="bind:NM"/>
                      <Cell col="3" colspan="2" edittype="mask" style="align:center;" text="bind:IHIDNUM" mask="######-#{######}" tooltiptext="bind:IHIDNUM"/>
                      <Cell col="5" edittype="text" style="align:left;" text="bind:DESPOSITARY_TLPHON"/>
                      <Cell col="6" edittype="text" style="align:left;" text="bind:ZIP_DEPOSITARY"/>
                      <Cell col="7" edittype="text" style="align:left;" text="bind:ADRES_DEPOSITARY"/>
                      <Cell col="8" displaytype="number" edittype="text" style="align:right;" text="bind:LDGMNT_AMOUNT"/>
                      <Cell col="9" displaytype="combo" edittype="combo" style="align:left;" text="bind:LDGMNT_REASON" combodataset="ds_ldgmntReasonList" combocodecol="CODE" combodatacol="CODE_NM"/>
                      <Cell col="10" displaytype="combo" edittype="combo" style="align:left;" text="bind:REWARD_STLE" combodataset="ds_rewardStleList" combocodecol="CODE" combodatacol="CODE_NM"/>
                      <Cell col="11" displaytype="text" edittype="text" style="align:left;" text="bind:LDGMNT_BANK"/>
                      <Cell col="12" edittype="text" style="align:left;" text="bind:NM_AGENT"/>
                      <Cell col="13" edittype="text" style="align:left;" text="bind:TELNO_AGENT"/>
                      <Cell col="14" edittype="text" style="align:left;" text="bind:ADRES_AGENT"/>
                    </Band>
                    <Band id="summary">
                      <Cell/>
                      <Cell col="1"/>
                      <Cell col="2"/>
                      <Cell col="3"/>
                      <Cell col="4"/>
                      <Cell col="5"/>
                      <Cell col="6"/>
                      <Cell col="7"/>
                      <Cell col="8" displaytype="number" style="align:right;" text="expr:dataset.getSum('LDGMNT_AMOUNT')"/>
                      <Cell col="9"/>
                      <Cell col="10"/>
                      <Cell col="11"/>
                      <Cell col="12"/>
                      <Cell col="13"/>
                      <Cell col="14"/>
                    </Band>
                  </Format>
                </Formats>
              </Grid>
              <Static id="Static08" taborder="3" text="10" visible="false" left="0" top="0" right="13" height="10" style="background:#dc143c3c;align:center middle;"/>
              <Static id="Static00" taborder="4" text="공탁내역" cssclass="sta_WF_Title02" left="0" top="10" width="119" height="21"/>
              <Static id="Static04" taborder="5" text="5" onclick="Tab00_tabpage5_Static02_onclick" visible="false" left="0" top="31" right="13" height="5" style="background:#dc143c3c;align:center middle;"/>
              <Button id="Button01" taborder="6" text="공탁서" onclick="div_DETAIL_01_Button01_onclick" top="11" width="68" height="19" right="70" visible="true"/>
              <Button id="Button02" taborder="7" text="통지서" onclick="div_DETAIL_01_Button02_onclick" top="11" width="68" height="19" right="0" visible="true"/>
              <Static id="Static01" taborder="8" text="10" visible="false" left="0" top="205" right="0" height="10" style="background:#dc143c3c;align:center middle;"/>
              <Static id="Static02" taborder="9" text="공탁첨부파일" cssclass="sta_WF_Title02" left="376" top="215" width="119" height="21"/>
              <Static id="Static03" taborder="10" text="5" onclick="Tab00_tabpage5_Static02_onclick" visible="false" left="0" top="236" right="0" height="5" style="background:#dc143c3c;align:center middle;"/>
              <Grid id="grd_ds_ldgmntAtchList" taborder="11" useinputpanel="false" left="375" top="241" right="0" bottom="0" binddataset="ds_ldgmntAtchList" autofittype="col">
                <Formats>
                  <Format id="default">
                    <Columns>
                      <Column size="52"/>
                      <Column size="338"/>
                    </Columns>
                    <Rows>
                      <Row size="24" band="head"/>
                      <Row size="24"/>
                    </Rows>
                    <Band id="head">
                      <Cell text="순번"/>
                      <Cell col="1" text="파일명"/>
                    </Band>
                    <Band id="body">
                      <Cell text="expr:currow + 1"/>
                      <Cell col="1" text="bind:FILE_NM"/>
                    </Band>
                  </Format>
                </Formats>
              </Grid>
              <Button id="btn_fileAtch" taborder="12" text="첨부" cssclass="btn_WF_Process" top="216" width="38" height="19" onclick="div_DETAIL02_btn_fileAtch_onclick" right="110"/>
              <Button id="btn_fileDownload" taborder="13" text="다운로드" cssclass="btn_WF_Process" top="216" width="68" height="19" onclick="div_DETAIL02_btn_fileDownload_onclick" right="40"/>
              <Button id="btn_fileDelete" taborder="14" text="삭제" top="216" width="38" height="19" onclick="div_DETAIL02_btn_fileDelete_onclick" right="0"/>
              <ImageViewer id="imv_imageView" taborder="15" image="URL('theme://images/image_sample.png')" left="0" top="241" bottom="0" width="364" stretch="fixaspectratio"/>
              <Static id="Static05" taborder="16" text="공탁첨부파일 미리보기" cssclass="sta_WF_Title02" left="0" top="215" width="184" height="21"/>
            </Layout>
          </Layouts>
        </Div>
        <Div id="div_WORK" taborder="1" text="Div01" left="0" top="103" width="229" style="border:0 solid #808080ff ;" bottom="0">
          <Layouts>
            <Layout>
              <Grid id="grd_thingOwner" taborder="6" binddataset="ds_thingOwner" useinputpanel="false" onselectchanged="div_WORK_grd_thingOwner_onselectchanged" left="0" top="36" right="0" bottom="0">
                <Formats>
                  <Format id="default">
                    <Columns>
                      <Column size="80"/>
                      <Column size="235"/>
                    </Columns>
                    <Rows>
                      <Row size="24" band="head"/>
                      <Row size="24"/>
                      <Row size="24" band="summ"/>
                    </Rows>
                    <Band id="head">
                      <Cell text="소유자"/>
                      <Cell col="1" text="주소"/>
                    </Band>
                    <Band id="body">
                      <Cell style="align:left;" text="bind:NM"/>
                      <Cell col="1" style="align:left;" text="bind:ADRES"/>
                    </Band>
                    <Band id="summary">
                      <Cell displaytype="number" style="align:center;" text="expr:dataset.rowcount"/>
                      <Cell col="1"/>
                    </Band>
                  </Format>
                </Formats>
              </Grid>
              <Static id="Static08" taborder="7" text="10" visible="false" left="0" top="0" height="10" style="background:#dc143c3c;align:center middle;" right="0"/>
              <Static id="Static00" taborder="8" text="소유자 목록" cssclass="sta_WF_Title02" left="0" top="10" width="119" height="21"/>
              <Static id="Static04" taborder="9" text="5" onclick="Tab00_tabpage5_Static02_onclick" visible="false" left="0" top="31" right="0" style="background:#dc143c3c;align:center middle;" height="5"/>
            </Layout>
          </Layouts>
        </Div>
        <Static id="Static01" taborder="14" text="15" visible="false" left="1031" top="0" width="15" height="735" style="background:#1b3cd23c;align:center middle;"/>
        <Static id="Static02" taborder="15" text="스&#13;&#10;크&#13;&#10;롤&#13;&#10;13" visible="false" top="0" right="0" width="13" height="735" style="background:#d07b173c;align:center middle;"/>
        <Static id="Static47" taborder="16" text="10" onclick="Static47_onclick" visible="false" left="229" top="103" bottom="0" width="10" style="background:#1b3cd23c;align:center middle;"/>
      </Layout>
    </Layouts>
    <Objects>
      <Dataset id="ds_thingOwner" useclientlayout="true">
        <ColumnInfo>
          <Column id="BSNS_AREA_CODE" type="STRING" size="255"/>
          <Column id="THING_SN" type="STRING" size="255"/>
          <Column id="OWNER_NO" type="STRING" size="255"/>
          <Column id="OWNER_SN" type="STRING" size="255"/>
          <Column id="NM" type="STRING" size="255"/>
          <Column id="ADRES" type="STRING" size="255"/>
          <Column id="IHIDNUM" type="STRING" size="255"/>
          <Column id="TELNO_1" type="STRING" size="255"/>
          <Column id="ZIP" type="STRING" size="255"/>
          <Column id="ACEPTNC_ADJDC_ODR" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_thingWtnnc" useclientlayout="true">
        <ColumnInfo>
          <Column id="RNUM" type="STRING" size="256"/>
          <Column id="BSNS_AREA_CODE" type="STRING" size="256"/>
          <Column id="THING_SN" type="STRING" size="256"/>
          <Column id="FULL_LOCPLC_CODE_NM" type="STRING" size="256"/>
          <Column id="LOCPLC_CODE" type="STRING" size="256"/>
          <Column id="THING_CL_NM" type="STRING" size="256"/>
          <Column id="THING_CL" type="STRING" size="256"/>
          <Column id="THING_NM" type="STRING" size="256"/>
          <Column id="LNDCGR_INCRPR" type="STRING" size="256"/>
          <Column id="LNDCGR_INCRPR_NM" type="STRING" size="256"/>
          <Column id="REAL_LNDCGR" type="STRING" size="256"/>
          <Column id="NOW_USE_STTUS" type="STRING" size="256"/>
          <Column id="AR_LGSTR" type="STRING" size="256"/>
          <Column id="AR_INCRPR" type="STRING" size="256"/>
          <Column id="UNIT" type="STRING" size="256"/>
          <Column id="UNIT_NM" type="STRING" size="256"/>
          <Column id="UNTPC" type="BIGDECIMAL" size="256"/>
          <Column id="RWMNY" type="BIGDECIMAL" size="256"/>
          <Column id="RM_1" type="STRING" size="256"/>
          <Column id="AR" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_locplcCode" useclientlayout="true">
        <ColumnInfo>
          <Column id="CODE" type="STRING" size="256"/>
          <Column id="CODE_NM" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_thingCl" useclientlayout="true">
        <ColumnInfo>
          <Column id="CODE" type="STRING" size="256"/>
          <Column id="CODE_NM" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_aceptncAdjdcOdr" useclientlayout="true">
        <ColumnInfo>
          <Column id="CODE" type="STRING" size="256"/>
          <Column id="CODE_NM" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_lndcgrCode" useclientlayout="true">
        <ColumnInfo>
          <Column id="CODE" type="STRING" size="256"/>
          <Column id="CODE_NM" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_unit" useclientlayout="true">
        <ColumnInfo>
          <Column id="CODE" type="STRING" size="256"/>
          <Column id="CODE_NM" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_validation" useclientlayout="true">
        <ColumnInfo>
          <Column id="compId" type="STRING" size="256"/>
          <Column id="colId" type="STRING" size="256"/>
          <Column id="PK" type="STRING" size="256"/>
          <Column id="notNull" type="STRING" size="256"/>
          <Column id="type" type="STRING" size="256"/>
          <Column id="nlength" type="STRING" size="256"/>
          <Column id="from" type="STRING" size="256"/>
          <Column id="to" type="STRING" size="256"/>
          <Column id="lengthChkGb" type="STRING" size="256"/>
          <Column id="msgId" type="STRING" size="256"/>
          <Column id="expr" type="STRING" size="256"/>
          <Column id="func" type="STRING" size="256"/>
        </ColumnInfo>
        <Rows>
          <Row>
            <Col id="compId">div_search</Col>
            <Col id="colId">cmb_bsnsAreaCode</Col>
            <Col id="notNull">Y</Col>
            <Col id="to"/>
            <Col id="msgId">사업지구</Col>
          </Row>
        </Rows>
      </Dataset>
      <Dataset id="ds_cond00" useclientlayout="true">
        <ColumnInfo>
          <Column id="BSNS_AREA_CODE" type="STRING" size="256"/>
          <Column id="LOCPLC_CODE" type="STRING" size="256"/>
          <Column id="REWARD_ODR" type="STRING" size="256"/>
          <Column id="LNM" type="STRING" size="256"/>
          <Column id="SLNO" type="STRING" size="256"/>
          <Column id="NM" type="STRING" size="256"/>
          <Column id="THING_CL" type="STRING" size="256"/>
          <Column id="OPTION0" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_bsnsAreaCode" useclientlayout="true">
        <ColumnInfo>
          <Column id="CODE" type="STRING" size="256"/>
          <Column id="CODE_NM" type="STRING" size="256"/>
          <Column id="FULL_CODE_NM" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_cond01" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="BSNS_AREA_CODE" type="STRING" size="256"/>
          <Column id="OWNER_NO" type="STRING" size="256"/>
          <Column id="ACEPTNC_ADJDC_ODR" type="STRING" size="256"/>
          <Column id="THING_CL" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_bndeApplcAt" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="CODE" type="STRING" size="256"/>
          <Column id="CODE_NM" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_ldgmnt" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false" oncolumnchanged="ds_ldgmnt_oncolumnchanged">
        <ColumnInfo>
          <Column id="BSNS_AREA_CODE" type="STRING" size="256"/>
          <Column id="OWNER_NO" type="STRING" size="256"/>
          <Column id="LDGMNT_SN" type="STRING" size="256"/>
          <Column id="NM" type="STRING" size="256"/>
          <Column id="IHIDNUM" type="STRING" size="256"/>
          <Column id="ZIP_DEPOSITARY" type="STRING" size="256"/>
          <Column id="ADRES_DEPOSITARY" type="STRING" size="256"/>
          <Column id="DESPOSITARY_TLPHON" type="STRING" size="256"/>
          <Column id="LDGMNT_DE" type="STRING" size="256"/>
          <Column id="LDGMNT_AMOUNT" type="BIGDECIMAL" size="256"/>
          <Column id="LDGMNT_REASON" type="STRING" size="256"/>
          <Column id="REWARD_STLE" type="STRING" size="256"/>
          <Column id="LDGMNT_BANK" type="STRING" size="256"/>
          <Column id="NM_AGENT" type="STRING" size="256"/>
          <Column id="TELNO_AGENT" type="STRING" size="256"/>
          <Column id="ADRES_AGENT" type="STRING" size="256"/>
          <Column id="FILE_SN" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_thingCl2" useclientlayout="true">
        <ColumnInfo>
          <Column id="CODE" type="STRING" size="256"/>
          <Column id="CODE_NM" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_ldgmntReasonList" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="CODE" type="STRING" size="256"/>
          <Column id="CODE_NM" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_rewardStleList" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="CODE" type="STRING" size="256"/>
          <Column id="CODE_NM" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_ldgmntReport" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="BSNS_AREA_NM" type="STRING" size="256"/>
          <Column id="BSNS_AREA_CODE" type="STRING" size="256"/>
          <Column id="OWNER_NO" type="STRING" size="256"/>
          <Column id="LDGMNT_SN" type="STRING" size="256"/>
          <Column id="NM" type="STRING" size="256"/>
          <Column id="IHIDNUM" type="STRING" size="256"/>
          <Column id="ZIP_DEPOSITARY" type="STRING" size="256"/>
          <Column id="ADRES_DEPOSITARY" type="STRING" size="256"/>
          <Column id="DESPOSITARY_TLPHON" type="STRING" size="256"/>
          <Column id="LDGMNT_DE" type="STRING" size="256"/>
          <Column id="LDGMNT_AMOUNT" type="STRING" size="256"/>
          <Column id="LDGMNT_REASON" type="STRING" size="256"/>
          <Column id="REWARD_STLE" type="STRING" size="256"/>
          <Column id="LDGMNT_BANK" type="STRING" size="256"/>
          <Column id="NM_AGENT" type="STRING" size="256"/>
          <Column id="TELNO_AGENT" type="STRING" size="256"/>
          <Column id="ADRES_AGENT" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_ownerNm" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="NM" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_ldgmntAtchList2" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false" onrowposchanged="ds_ldgmntAtchList_onrowposchanged">
        <ColumnInfo>
          <Column id="BSNS_AREA_CODE" type="STRING" size="256"/>
          <Column id="OWNER_NO" type="STRING" size="256"/>
          <Column id="LDGMNT_SN" type="STRING" size="256"/>
          <Column id="FILE_NO" type="STRING" size="256"/>
          <Column id="COURS_NM" type="STRING" size="256"/>
          <Column id="FILE_NM" type="STRING" size="256"/>
          <Column id="FILE_EXTSN" type="STRING" size="256"/>
          <Column id="FILE_SN" type="STRING" size="256"/>
          <Column id="FILE_ORDR" type="STRING" size="256"/>
          <Column id="ATCH_FILE_SE" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_docGubun" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="CODE" type="STRING" size="256"/>
          <Column id="CODE_NM" type="STRING" size="256"/>
          <Column id="FULL_CODE_NM" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_cond02" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="BSNS_AREA_CODE" type="STRING" size="256"/>
          <Column id="OWNER_NO" type="STRING" size="256"/>
          <Column id="LDGMNT_SN" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_cond03" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="BSNS_AREA_CODE" type="STRING" size="256"/>
          <Column id="OWNER_NO" type="STRING" size="256"/>
          <Column id="LDGMNT_SN" type="STRING" size="256"/>
          <Column id="SYS_SE_CODE" type="STRING" size="256"/>
          <Column id="JOB_SE_CODE" type="STRING" size="256"/>
          <Column id="FILE_SN" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_ldgmntAtchList" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false" onrowposchanged="ds_ldgmntAtchList_onrowposchanged">
        <ColumnInfo>
          <Column id="THING_SN" type="STRING" size="256"/>
          <Column id="PHOTO_NO" type="STRING" size="256"/>
          <Column id="BSNS_AREA_CODE" type="STRING" size="256"/>
          <Column id="FILE_NM" type="STRING" size="256"/>
          <Column id="COURS_NM" type="STRING" size="256"/>
          <Column id="PHOTO_SE" type="STRING" size="256"/>
          <Column id="FILE_EXTSN" type="STRING" size="256"/>
          <Column id="FILE_SN" type="STRING" size="256"/>
          <Column id="FILE_ORDR" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_condPrint" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="BSNS_AREA_CODE" type="STRING" size="256"/>
          <Column id="OWNER_NO" type="STRING" size="256"/>
          <Column id="ACEPTNC_ADJDC_ODR" type="STRING" size="256"/>
          <Column id="THING_CL" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
    </Objects>
    <Script type="xscript5.0"><![CDATA[/***********************************************************************
 * 화면ID   : CMP060100
 * 화면명   : 공탁관리
 * 화면설명 : 공탁관리.
 * 작성일   : 2015.07.21
 * 작성자   : 지효정
 * 수정이력 : 
 ***********************************************************************
 *     수정일     수정자   내용
 ***********************************************************************
 */
 
/***********************************************************************
 * Script Include 
 ***********************************************************************/
include "pms_lib::cmpUtilInclude.xjs";

this.SYS_SE = "PMS";						// 시스템 구분
this.JOB_SE = "CMP";						// 업무 구분
this.FILE_MANAGER = null;					// 파일 업/다운로더

/***********************************************************************
 * onInit / onLoad 영역
 ***********************************************************************/
this.CMP060100_oninit = function(obj:Form, e:nexacro.InitEventInfo)
{
	this.fn_init();//공통 폼 초기화
	this.fn_init_form();//폼 초기화
	this.fn_init_dataset();//Dataset 초기화
}

this.CMP060100_onload = function(obj:Form, e:nexacro.LoadEventInfo)
{
	this.fn_load_combo();
	// 파일 업/다운로더 설정
	var fileConfig = {
		onChange : this.fn_onFileSelected,
		onSuccess : this.fn_onFileSuccess,
		useMultiSelect : true             // 다중선택 옵션
	};

	this.FILE_MANAGER = new this.fileManager(this, this.SYS_SE, this.JOB_SE);
	this.FILE_MANAGER.init(fileConfig);
}

/*
 * 함수명  	: fn_init_form
 * 설명 		: Form을 초기화한다.
 * params  		: None
 * return Type 	: None
 * 사용법		: this.initForm();
 */
this.fn_init_form = function(){

	/*******************************************************************************
	**검색 영역 수용재결 멀티 체크박스 등록
	********************************************************************************/
	var div_aceptncAdjdcOdr = this.div_search.div_ACEPTNC_ADJDC_ODR;
	div_aceptncAdjdcOdr.fn_init(3);
	div_aceptncAdjdcOdr.fn_set_DSColumn("CODE", "CODE_NM");
	div_aceptncAdjdcOdr.fn_set_checkAll(this.div_search.chk_aceptncAdjdcOdrChkAll);
	
	/*******************************************************************************
	**검색 영역 물건목록 멀티 체크박스 등록
	********************************************************************************/
	var div_thingCl = this.div_search.div_THING_CL;
	div_thingCl.fn_init(3);
	div_thingCl.fn_set_DSColumn("CODE", "CODE_NM");
	div_thingCl.fn_set_checkAll(this.div_search.chk_thingClChkAll);
	
	/*******************************************************************************
	*프로세스에 맞게 데이이터셋을 순서대로 배열에 삽입
	********************************************************************************/
	this.fn_setAll_ds();
	
	this.div_DETAIL02.grd_ldgmnt.set_cellmovingtype('none');
}

/*
 * 함수명  	: fn_init_dataset
 * 설명 		: Dataset을 초기화한다.
 *                주로, 조건 Dataset들(ds_cond, ds_cond_00, ds_cond_01, ...) 을 초기화한다.
 * params  		: None
 * return Type 	: None
 * 사용법		: this.initDataset();
 */
this.fn_init_dataset = function()
{
	//조회, 종료시에 수정여부 체크할 데이터셋
	this.checkDs.push(this.ds_ldgmnt);
	
	this.gfn_initCondDs(this, this.div_search);
}

/*
 * 함수명  	: fn_get_codeList
 * 설명 		: 모든 코드 리스트 검색
 * params  		: None
 * return Type 	: None
 * 사용법		: this.fn_get_codeList();
 */
this.fn_load_combo = function(){
	this.fn_add_comboHeader(this, this.div_search.cmb_bsnsAreaCode, "선택");
	this.fn_add_comboHeader(this, this.div_search.cmb_locplcCode, "전체");
	
	this.fn_get_userBsnsArea(this.ds_bsnsAreaCode, "선택");						//사업지구
	this.fn_get_lndcgrCode(this.ds_lndcgrCode);									//지목 코드
	this.fn_get_cmmCode(this.ds_thingCl, "", {grpCode:"CMP001"} ); 				//물건분류
	this.fn_get_cmmCode(this.ds_unit, "", {grpCode:"CMP002"} ); 				//단위
	this.fn_get_cmmCode(this.ds_ldgmntReasonList, "", {grpCode:"CMP011"} ); 	//공탁사유
	this.fn_get_cmmCode(this.ds_rewardStleList, "", {grpCode:"CMP012"} ); 		//보상형태
	this.fn_get_cmmCode(this.ds_docGubun, "", {grpCode:"CMP015"}); 		//문서구분
	
	this.fn_get_thingClChkBox(this.ds_thingCl2, this.div_search.div_THING_CL, {grpCode:"CMP001", option4:'Y'}, true);	//물건분류 (멀티 체크박스)
}

this.div_search_cmb_bsnsAreaCode_onitemchanged = function(obj:Combo, e:nexacro.ItemChangeEventInfo)
{
	var bsnsAreaCode = this.div_search.cmb_bsnsAreaCode.value;
	this.fn_get_locplcCode(this.ds_locplcCode, "전체", {bsnsAreaCode:bsnsAreaCode});	//소재지
	this.fn_get_aceptncAdjdcOdrChkBox(this.ds_aceptncAdjdcOdr, this.div_search.div_ACEPTNC_ADJDC_ODR, {bsnsAreaCode:bsnsAreaCode}, true);
}

/*
 * 함수명  	: fn_search
 * 설명 		: 기본 조서 검색
 * params  		: None
 * return Type 	: None
 * 사용법		: this.fn_search();
 */
this.fn_search = function(){
	// 검색영역 Validation 체크
	if(!this.gfn_checkValidation(this.div_search, this.ds_validation)) {
		return;
	}
	
	this.fn_clearAll_ds();
	this.fn_divToDS(this.ds_cond00, this.div_search);
	this.fn_transaction("thingOwnerList");
}

/*
 * 함수명  	: fn_save
 * 설명 		: 저장
 * params  		: None
 * return Type 	: None
 * 사용법		: this.fn_save();
 */
this.fn_save = function(){

	if(this.confirm("S")){
		this.fn_transaction("ldgmntCUD");	
	}
	
	return true;
}

 /*
 * 함수명  	: fn_insert
 * 설명 		: 신규버튼
 * params  		: None
 * return Type 	: None
 * 사용법		: 
 */
this.fn_insert = function(){
	if(this.fn_get_sum(this.ds_thingWtnnc, "RWMNY") <= this.fn_get_sum(this.ds_ldgmnt, "LDGMNT_AMOUNT")){
		this.alert("공탁할 물건이 없습니다.");
		return;
	}
	
	var thingOwnerRowPos = this.ds_thingOwner.rowposition;
	var bsnsAreaCode = this.ds_thingOwner.getColumn(thingOwnerRowPos, "BSNS_AREA_CODE");
	var ownerNo = this.ds_thingOwner.getColumn(thingOwnerRowPos, "OWNER_NO");
	var nm = this.ds_thingOwner.getColumn(thingOwnerRowPos, "NM");
	var adres = this.ds_thingOwner.getColumn(thingOwnerRowPos, "ADRES");
	var ihidnum = this.ds_thingOwner.getColumn(thingOwnerRowPos, "IHIDNUM");
	var telno1 = this.ds_thingOwner.getColumn(thingOwnerRowPos, "TELNO_1");
	var zip = this.ds_thingOwner.getColumn(thingOwnerRowPos, "ZIP");
	var amount = this.fn_get_sum(this.ds_thingWtnnc, "RWMNY") - this.fn_get_sum(this.ds_ldgmnt, "LDGMNT_AMOUNT");
	
	var nRow = this.ds_ldgmnt.addRow();
	this.ds_ldgmnt.setColumn(nRow, "BSNS_AREA_CODE", bsnsAreaCode);
	this.ds_ldgmnt.setColumn(nRow, "OWNER_NO", ownerNo);
	this.ds_ldgmnt.setColumn(nRow, "LDGMNT_DE", this.gfn_today());
	this.ds_ldgmnt.setColumn(nRow, "NM", nm);
	this.ds_ldgmnt.setColumn(nRow, "ADRES_DEPOSITARY", adres);
	this.ds_ldgmnt.setColumn(nRow, "IHIDNUM", ihidnum);
	this.ds_ldgmnt.setColumn(nRow, "TELNO", telno1);
	this.ds_ldgmnt.setColumn(nRow, "ZIP_DEPOSITARY", zip);
	this.ds_ldgmnt.setColumn(nRow, "LDGMNT_AMOUNT", amount);
}

/*
 * 함수명  	: fn_delete
 * 설명 		: 삭제버튼
 * params  		: None
 * return Type 	: None
 * 사용법		: 
 */
this.fn_delete = function(){
	if(this.ds_ldgmnt.rowcount == 0){
		this.alert("삭제할 공탁 내역이 없습니다.");
		return;
	}
	
	if(this.confirm("D") == true){
		this.ds_ldgmnt.deleteRow(this.ds_ldgmnt.rowposition);
	}
}
 
/*
 * 함수명  	: fn_cancel
 * 설명 		: 취소버튼
 * params  		: None
 * return Type 	: None
 * 사용법		: 
 */
this.fn_cancel = function(){
	if(this.confirm("C")){
		var ds = this.ds_ldgmnt;
		ds.reset();
		ds.applyChange();
	}
}

/*
 * 함수명  	: fn_close
 * 설명 		: 종료버튼
 * params  		: None
 * return Type 	: None
 * 사용법		: 
 */
this.fn_close = function(){
	this.close();
}

/*
 * 함수명  	: div_WORK_grd_thingOwner_onselectchanged
 * 설명 		: 소유자 셀렉트 체인지 이벤트 처리
 * params  		: None
 * return Type 	: None
 * 사용법		: 
 */
this.div_WORK_grd_thingOwner_onselectchanged = function(obj:Grid, e:nexacro.GridSelectEventInfo)
{
	this.fn_clearAll_ds(1);
	var bsnsAreaCode = this.ds_thingOwner.getColumn(e.row, "BSNS_AREA_CODE");
	var ownerNo = this.ds_thingOwner.getColumn(e.row, "OWNER_NO");
	this.fn_divToDS(this.ds_cond01, this.div_search);
	this.ds_cond01.setColumn(0, "BSNS_AREA_CODE", bsnsAreaCode);
	this.ds_cond01.setColumn(0, "OWNER_NO", ownerNo);
	//this.ds_cond01.setColumn(0, "ACEPTNC_ADJDC_ODR", this.div_search.div_aceptncAdjdcOdr.fn_get_value);
	
	this.fn_transaction("thingWtnncList");
	this.fn_transaction("ldgmntList");
}

this.ds_ldgmnt_oncolumnchanged = function(obj:Dataset, e:nexacro.DSColChangeEventInfo)
{
	if(e.columnid == "LDGMNT_AMOUNT"){
		if(this.fn_get_sum(this.ds_thingWtnnc, "RWMNY") < this.fn_get_sum(this.ds_ldgmnt, "LDGMNT_AMOUNT")){
			this.alert("금액이 너무 큽니다.");
			obj.setColumn(e.row, "LDGMNT_AMOUNT", e.oldvalue);
			return;
		}
	}
}

/*
 * 함수명  	: div_DETAIL_01_Button00_onclick
 * 설명 		: 물건내역
 * params  		: None
 * return Type 	: None
 * 사용법		: 
 */
this.div_DETAIL_01_Button00_onclick = function(obj:Button,  e:nexacro.ClickEventInfo)
{
	if(this.ds_thingWtnnc.rowcount == 0){
		this.alert("물건내역이 없습니다.");
		return;
	}
	
	this.fn_divToDS(this.ds_condPrint, this.div_search);
	var ownerNo = this.ds_thingOwner.getColumn(this.ds_thingOwner.rowposition, "OWNER_NO");
	this.ds_condPrint.setColumn(0, "OWNER_NO", ownerNo);
	
	this.gfn_ReportPopup(this, "PMS/CMP/CMP060100_R03.crf", this.ds_condPrint);
	
	
	
// 	var vOpts = new this.cf_Opts();
// 	vOpts.setToolbar(false);
// 	vOpts.setScale(100);
// 	vOpts.setReportPath("/pms/cmp/CMP060100_R03.jrf");
// 	vOpts.setSaveFilename("토지및 물건내역");
// 	vOpts.setLocalDs(["ds_thingWtnnc", this.ds_thingWtnnc]);
// 	vOpts.setLocalDs(["ds_ownerNm", this.ds_ownerNm]);
// 	var parm = {
// 		arg_0 : this,  //==> 필수, 팝업을 호출하는 form을 참조할 수 있도록 팝업에 Argument로 넘겨준다. (반드시 기술해야 함.)
// 		opts : vOpts
// 	};
// 
// 	this.gfn_popup("Popup_Report", 884, 735, "토지및 물건내역", parm, "common::frmReportPopup.xfdl", "report_callback");
}

/*
 * 함수명  	: div_DETAIL_01_Button01_onclick
 * 설명 		: 공탁서
 * params  		: None
 * return Type 	: None
 * 사용법		: 
 */
this.div_DETAIL_01_Button01_onclick = function(obj:Button,  e:nexacro.ClickEventInfo)
{
	if(this.ds_ldgmnt.rowposition == -1){
		this.alert("선택된 공탁내역이 없습니다.");
		return;
	}
	
	this.ds_ldgmntReport.clearData();
	this.ds_ldgmntReport.addRow();
	
	var rowposition = this.ds_ldgmnt.rowposition;
	
	var temp1 = this.ds_ldgmnt.getColumn(rowposition, "BSNS_AREA_CODE");
	var temp2 = this.ds_ldgmnt.getColumn(rowposition, "OWNER_NO");
	var temp3 = this.ds_ldgmnt.getColumn(rowposition, "LDGMNT_SN");
	
	this.ds_ldgmntReport.setColumn(0, "BSNS_AREA_CODE", temp1);
	this.ds_ldgmntReport.setColumn(0, "OWNER_NO", temp2);
	this.ds_ldgmntReport.setColumn(0, "LDGMNT_SN", temp3);
	
	this.gfn_ReportPopup(this, "PMS/CMP/CMP060100_R01.crf", this.ds_condPrint);
}

/*
 * 함수명  	: div_DETAIL_01_Button02_onclick
 * 설명 		: 통지서
 * params  		: None
 * return Type 	: None
 * 사용법		: 
 */
this.div_DETAIL_01_Button02_onclick = function(obj:Button,  e:nexacro.ClickEventInfo)
{
	if(this.ds_ldgmnt.rowposition == -1){
		this.alert("선택된 공탁내역이 없습니다.");
		return;
	}
	
	this.ds_ldgmntReport.clearData();
	this.ds_ldgmntReport.addRow();
	
	var rowposition = this.ds_ldgmnt.rowposition;
	
	var temp1 = this.ds_ldgmnt.getColumn(rowposition, "BSNS_AREA_CODE");
	var temp2 = this.ds_ldgmnt.getColumn(rowposition, "OWNER_NO");
	var temp3 = this.ds_ldgmnt.getColumn(rowposition, "LDGMNT_SN");
	
	this.ds_ldgmntReport.setColumn(0, "BSNS_AREA_CODE", temp1);
	this.ds_ldgmntReport.setColumn(0, "OWNER_NO", temp2);
	this.ds_ldgmntReport.setColumn(0, "LDGMNT_SN", temp3);
	
	this.gfn_ReportPopup(this, "PMS/CMP/CMP060100_R02.crf", this.ds_condPrint);
}

this.div_DETAIL02_grd_ldgmnt_onselectchanged = function(obj:Grid, e:nexacro.GridSelectEventInfo)
{
	this.ds_cond02.setColumn(0, "BSNS_AREA_CODE", this.ds_ldgmnt.getColumn(this.ds_ldgmnt.rowposition, "BSNS_AREA_CODE"));
	this.ds_cond02.setColumn(0, "OWNER_NO", this.ds_ldgmnt.getColumn(this.ds_ldgmnt.rowposition, "OWNER_NO"));
	this.ds_cond02.setColumn(0, "LDGMNT_SN", this.ds_ldgmnt.getColumn(this.ds_ldgmnt.rowposition, "LDGMNT_SN"));
	this.fn_transaction("ldgmntAtchList");
}

/***********************************************************************
* 사용자 정의 함수
************************************************************************/
/*
 * 함수명  	: fn_setAll_ds
 * 설명 		: 프로세스에 맞게 데이이터셋을 순서대로 배열에 삽입
 * params  		: None
 * return Type 	: None
 * 사용법		: 
 */
this.fn_setAll_ds = function(){
	this.arrDS = [];
	this.arrDS.push(this.ds_thingOwner);
	this.arrDS.push(this.ds_thingWtnnc); 
	this.arrDS.push(this.ds_ldgmnt); 
	this.arrDS.push(this.ds_ldgmntAtchList);
}

/*
 * 함수명  	: fn_clearAll_ds
 * 설명 		: 데이터셋의 데이터 삭제
 * params  		: None
 * return Type 	: None
 * 사용법		: 
 */
this.fn_clearAll_ds = function(startIdx){
	if(startIdx == null){
		startIdx = 0;
	}
	var cnt = this.arrDS.length;
	for(var i=startIdx; i<cnt; i++){
		this.arrDS[i].clearData();
	}
}

/**********************************************************************
 * CALL TRANSACTION 영역
 **********************************************************************/
 /*
 * 함수명  	: fn_transaction
 * 설명 		: Transaction 요청 처리 함수
 * params  		: strSvcId : 서비스요청 ID
 * return Type 	: None
 * 사용법		: this.fn_transaction("SELECT");
 */
this.fn_transaction = function(strSvcId)
{
	var bSync = true;
	
	switch (strSvcId) {
		case "thingOwnerList": //소유자 리스트 조회
			var sController   	= "hsco/pms/cmp/law/CMP060100/thingOwnerList.do";
			var sInDatasets   	= "input1=ds_cond00";
			var sOutDatasets  	= "ds_thingOwner=output1";
			break;
	
		case "thingWtnncList": //기본 조서 리스트 조회
			var sController   	= "hsco/pms/cmp/law/CMP060100/thingWtnncList.do";
			var sInDatasets   	= "input1=ds_cond01";
			var sOutDatasets  	= "ds_thingWtnnc=output1";
			break; 
			
		case "ldgmntList": 		//공탁내역 리스트 조회
			var sController   	= "hsco/pms/cmp/law/CMP060100/ldgmntList.do";
			var sInDatasets   	= "input1=ds_cond01";
			var sOutDatasets  	= "ds_ldgmnt=output1";
			break;
			
		case "ldgmntCUD": 		//공탁내역 리스트 조회
			var sController   	= "hsco/pms/cmp/law/CMP060100/ldgmntCUD.do";
			var sInDatasets   	= "input1=ds_ldgmnt:U";
			var sOutDatasets  	= "";
			break;
			
		case "aceptncAdjdcOdrList": //수용재결차수 리스트 조회
			var sController   	= "hsco/pms/cmp/law/CMP060100/aceptncAdjdcOdrList.do";
			var sInDatasets   	= "input1=ds_cond01";
			var sOutDatasets  	= "ds_aceptncAdjdcOdr=output1";
			break;
			
		case "ldgmntAtchList":		//첨부파일 리스트 조회
			var sController   	= "hsco/pms/cmp/law/CMP060100/ldgmntAtchList.do";
			var sInDatasets   	= "input1=ds_cond02";
			var sOutDatasets  	= "ds_ldgmntAtchList=output1";
			break;
			
		case "ldgmntAtchC": 		//첨부파일 저장
			var sController   	= "hsco/pms/cmp/law/CMP060100/ldgmntAtchC.do";
			var sInDatasets   	= "input1=ds_cond03"
			var sOutDatasets  	= "ds_ldgmntAtchList=output1";
			break;
			
		case "ldgmntAtchD": 		//첨부파일 삭제
			var sController   	= "hsco/pms/cmp/law/CMP060100/ldgmntAtchD.do";
			var sInDatasets   	= "input1=ds_ldgmntAtchList:U"
			var sOutDatasets  	= "";
			break;
	}

	if(this.fn_validate_tranasaction(strSvcId, sController, sInDatasets, sOutDatasets) == false){
		return;
	}
	
	Ex.core.tran(this, strSvcId, sController, sInDatasets, sOutDatasets, "", null, null, bSync); 
}

/**********************************************************************
 * Transaction Callback 영역
 ***********************************************************************/
 /*
 * 함수명  	: fn_callBack
 * 설명 		: Transaction Callback 처리
 * params  		: strSvcId    : 서비스요청 ID
 *                nErrorCode  : 오류 메시지 코드 ([예] 0 : Success, 그밖의 경우, error)
 *                strErrorMsg : 오류 메시지([예]  success.insert|정상적으로 등록되었습니다.)
 * return Type 	: None
 * 사용법		: 
 */
this.fn_callBack = function (strSvcId, nErrorCode, strErrorMsg)
{
	this.fn_callback_message(strSvcId, nErrorCode, strErrorMsg);
	
	var bSuccess = nErrorCode == 0?true:false;
}

this.div_DETAIL02_btn_fileAtch_onclick = function(obj:Button,  e:nexacro.ClickEventInfo)
{
	var rowType = this.ds_ldgmnt.getRowType(this.ds_ldgmnt.rowposition);

	if(rowType == "0") {
		this.alert("파일을 첨부할 공탁건를 먼저 선택하시기 바랍니다.");
		return;
	}
	if(rowType == "2") {
		this.alert("신규 공탁건은 저장 후 파일을 첨부하실 수 있습니다.");
		return;
	}
	
	this.fn_addAtchFile();
}

this.fn_addAtchFile = function(){
 	//var allowFile = ["jpg"];	// 선택 허용 파일유형 - Confilg에서 설정이 가능하나 선택시에도 처리가능하게
 	//this.FILE_MANAGER.addFiles( allowFile , true , true);	
	this.FILE_MANAGER.addFiles();
}

/**
 * 파일업로드 파일 선택 이벤트 핸들러
 * @param fileFullName 선택 전체 파일명
 * @param type 실행구분(ExtFileUpload/ExtFileDownload)
 * @param fileFullName 선택 파일명
 * @return void
 */
this.fn_onFileSelected = function(type, fileFullName){

	this.ds_cond03.clearData();
	if(type == this.FILE_MANAGER.TYPE_UPLOADER){
		var isNmArray = this.pmsUtil.isArray(fileFullName);
		var rowposition = this.ds_ldgmnt.rowposition;
		var bsnsAreaCode = this.ds_ldgmnt.getColumn(rowposition, "BSNS_AREA_CODE");
		var ownerNo = this.ds_ldgmnt.getColumn(rowposition, "OWNER_NO");
		var ldgmntSn = this.ds_ldgmnt.getColumn(rowposition, "LDGMNT_SN");
		var fileSn = this.nvl(this.ds_ldgmnt.getColumn(rowposition, "FILE_SN"),"");

		if(isNmArray){
			var selFileLeng = fileFullName.length;
			for(var i = 0; i < selFileLeng; i++){
				var nRow = this.ds_cond03.addRow();
				this.ds_cond03.setColumn(nRow, "BSNS_AREA_CODE", bsnsAreaCode);
				this.ds_cond03.setColumn(nRow, "OWNER_NO", ownerNo);
				this.ds_cond03.setColumn(nRow, "LDGMNT_SN", ldgmntSn);
				this.ds_cond03.setColumn(nRow, "FILE_SN", fileSn);
				this.ds_cond03.setColumn(nRow, "SYS_SE_CODE" , this.SYS_SE); 
				this.ds_cond03.setColumn(nRow, "JOB_SE_CODE", this.JOB_SE);
			}	

			this.fn_saveFiles();
		}
		else {
			var nRow = this.ds_cond03.addRow();
			this.ds_cond03.setColumn(nRow, "BSNS_AREA_CODE", bsnsAreaCode);
			this.ds_cond03.setColumn(nRow, "LDGMNT_SN", ldgmntSn);
			this.ds_cond03.setColumn(nRow, "OWNER_NO", ownerNo);
			this.ds_cond03.setColumn(nRow, "FILE_SN", fileSn);
			this.ds_cond03.setColumn(nRow, "SYS_SE_CODE" , this.SYS_SE); 
			this.ds_cond03.setColumn(nRow, "JOB_SE_CODE", this.JOB_SE);
			this.fn_saveFiles();
		}
	}
}

/**
 * 파일업로드 파일 업로드 성공 이벤트 핸들러
 * @param fileFullName 선택 전체 파일명
 * @param type 실행구분(ExtFileUpload/ExtFileDownload)
 * @param e 발생이벤트
 * @return void
 */
this.fn_onFileSuccess = function(type, e){
	var fileSn = "";

	if(type == this.FILE_MANAGER.TYPE_UPLOADER){
		retRow  = this.ds_ldgmnt.rowposition;
		nowType = this.ds_ldgmnt.getRowType(retRow);
		fileSn  = this.ds_ldgmntAtchList.getColumn(0,"FILE_SN");
		
		this.ds_ldgmnt.setColumn(retRow, "FILE_SN",fileSn);
		
		if(nowType == Dataset.ROWTYPE_NORMAL) {
			this.ds_ldgmnt.set_updatecontrol(false);
			var dd = this.ds_ldgmnt.setRowType(retRow, Dataset.ROWTYPE_NORMAL);
			this.ds_ldgmnt.set_updatecontrol(true);
		}
	}else if(type == this.FILE_MANAGER.TYPE_DOWNLOADER){
		this.gfn_message("success.파일.다운로드.성공");
	}
}

/*
* 함수명  		: fn_saveFile
* 설명 			: 첨부파일 저장
* params  		: None
* return Type 	: None
* 사용법		: 
*/
this.fn_saveFiles = function(){
	var hasAttFile = this.FILE_MANAGER.hasFile();
	if(hasAttFile){
		var attFileCount = this.FILE_MANAGER.getfileCount();
		var sController   	= "hsco/pms/cmp/law/CMP060100/ldgmntAtchC.do";
		var sInDatasets   	= "input1=ds_cond03";
		var sOutDatasets 	= "ds_ldgmntAtchList=output1";
		this.FILE_MANAGER.upload(sController, sInDatasets, sOutDatasets);
	}else{
		this.fn_transaction("ldgmntAtchC");		// 첨부파일저장
	}	
}
this.div_DETAIL02_btn_fileDownload_onclick = function(obj:Button,  e:nexacro.ClickEventInfo)
{
	if(this.ds_ldgmntAtchList.rowposition > -1){
		var selFileSn = this.ds_ldgmntAtchList.getColumn(this.ds_ldgmntAtchList.rowposition, "FILE_SN");			// 선택 파일 일련번호
		var selFileOrdr = this.ds_ldgmntAtchList.getColumn(this.ds_ldgmntAtchList.rowposition, "FILE_ORDR");		// 선택 파일 파일번호(순차번호)
		var selFileNm = this.ds_ldgmntAtchList.getColumn(this.ds_ldgmntAtchList.rowposition, "FILE_NM");			// 선택 파일 명
		
		this.FILE_MANAGER.download(selFileSn, selFileOrdr, selFileNm);
	}
}

this.div_DETAIL02_btn_fileDelete_onclick = function(obj:Button,  e:nexacro.ClickEventInfo)
{
	if(this.ds_ldgmntAtchList.rowposition > -1){
		if(this.confirm("d") == true){
			this.ds_ldgmntAtchList.deleteRow(this.ds_ldgmntAtchList.rowposition);
			this.fn_transaction("ldgmntAtchD");
		}
	}
}

this.ds_ldgmntAtchList_onrowposchanged = function(obj:Dataset, e:nexacro.DSRowPosChangeEventInfo)
{
	var selAtchFileSe = this.ds_ldgmntAtchList.getColumn(e.newrow, "PHOTO_SE");	// 선택 파일 첨부파일구분 : 1:사진, 2:문서
	var isImage = false;
	var oViewer = this.div_DETAIL02.imv_imageView;
	oViewer.set_image("");
	
	if(selAtchFileSe == 1){
		//this.div_remndrLadInfo.btn_downImage.set_enable(true);		// 다운로드 버튼 활성화
		isImage = true;
	}else{
		isImage = false;
	}
	
	var selFileSn = this.ds_ldgmntAtchList.getColumn(e.newrow, "FILE_SN");			// 선택 파일 일련번호
	var selFileOrdr = this.ds_ldgmntAtchList.getColumn(e.newrow, "FILE_ORDR");			// 선택 파일 파일번호(순차번호)
	var selFileNm = this.ds_ldgmntAtchList.getColumn(e.newrow, "FILE_NM");			// 선택 파일 명
	
	if(isImage){
		var strUrl = application.gv_host + "hsco/cmm/download/viewImage.do";
		var params = "?FILE_SN=" + selFileSn + "&FILE_ORDR=" + selFileOrdr;
		oViewer.set_image(strUrl + params);
	}else{
		//this.FILE_MANAGER.download(selFileSn, selFileOrdr, selFileNm);
	}
}

this.div_DETAIL02_grd_ldgmnt_onlbuttondown = function(obj:Grid, e:nexacro.GridMouseEventInfo)
{
	if(obj.getCellProperty( "Head", e.cell , "displaytype" ) == 'image'){
		this.grd_maskChange(true);	
	}	
}

this.div_DETAIL02_grd_ldgmnt_onlbuttonup = function(obj:Grid, e:nexacro.GridMouseEventInfo)
{
	if(obj.getCellProperty( "Head", e.cell , "displaytype" ) == 'image'){
		this.grd_maskChange(false);	
	}
}

this.div_DETAIL02_grd_ldgmnt_onmouseleave = function(obj:Grid, e:nexacro.MouseEventInfo)
{
	this.grd_maskChange(false);	
}

this.grd_maskChange = function(gbn)
{
	var targetGrid = this.div_DETAIL02.grd_ldgmnt;
	var mask = gbn ? '######-#######' : '######-#{######}';
	targetGrid.setCellProperty("body" , targetGrid.getBindCellIndex("body", "IHIDNUM") , "mask" , mask);		
}]]></Script>
  </Form>
</FDL>
