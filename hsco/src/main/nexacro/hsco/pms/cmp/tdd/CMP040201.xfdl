<?xml version="1.0" encoding="utf-8"?>
<FDL version="1.5">
  <TypeDefinition url="..\..\..\default_typedef.xml"/>
  <Form id="frm_CMP040201" classname="CMP020501" left="0" top="0" width="1059" height="735" titletext="보상금일괄지출결의" onload="frm_CMP040201_onload" style="background:#ffffffff;">
    <Layouts>
      <Layout>
        <Div id="div_search" taborder="0" text="Div00" left="0" top="0" height="59" style="background:#f9fbffff;border:1 solid #a8c2e2ff ;" cssclass="div_SearchBox" right="28">
          <Layouts>
            <Layout>
              <Static id="sta_BSNS_AREA_CODE" taborder="8" text="사업지구" left="15" top="5" width="64" height="21" cssclass="sta_WFSA_Label"/>
              <Static id="sta_RQEST_DE" taborder="16" text="청구일자" cssclass="sta_WFSA_Label" left="15" top="31" height="21" width="64"/>
              <Calendar id="cal_ST_RQEST_DE" taborder="3" left="79" top="31" height="21" width="100" dateformat="yyyy-MM-dd" value="null" canchange="div_search_cal_ST_RQEST_DE_canchange"/>
              <Static id="sta_NM" taborder="18" text="결재구분" cssclass="sta_WFSA_Label" left="735" top="5" height="21" width="59"/>
              <Calendar id="cal_ED_RQEST_DE" taborder="4" left="196" top="31" height="21" width="100" dateformat="yyyy-MM-dd" canchange="div_search_cal_ED_RQEST_DE_canchange"/>
              <Static id="sta_BSNS_AREA_CODE01" taborder="23" text="~" cssclass="sta_Search" left="181" top="31" height="22" width="11"/>
              <Static id="sta_PYMNT_DE" taborder="24" text="지급예정일" cssclass="sta_WFSA_Label" left="391" top="31" height="21" width="72"/>
              <Calendar id="cal_ST_PYMNT_PRARNDE" taborder="5" left="471" top="31" height="21" width="100" dateformat="yyyy-MM-dd" canchange="div_search_cal_ST_PYMNT_DE_canchange"/>
              <Static id="sta_BSNS_AREA_CODE03" taborder="26" text="~" cssclass="sta_Search" left="573" top="31" right="445" height="22"/>
              <Calendar id="cal_ED_PYMNT_PRARNDE" taborder="6" left="587" top="31" height="21" width="100" dateformat="yyyy-MM-dd" canchange="div_search_cal_ED_PYMNT_DE_canchange"/>
              <Combo id="cmb_BSNS_AREA_CODE" taborder="0" innerdataset="DS_BSNS_AREA_CODE" codecolumn="CODE" datacolumn="FULL_CODE_NM" onitemchanged="div_search_cmb_BSNS_AREA_CODE_onitemchanged" left="79" top="5" width="262" height="21" cssclass="cmb_WF_Essential"/>
              <Radio id="rdo_LAST_SANCTN_STTUS2" taborder="28" rowcount="1" index="-1" innerdataset="@DS_LAST_SANCTN_STTUS" codecolumn="CODE" datacolumn="CODE_NM" value="N" left="815" top="31" width="142" height="21" visible="false"/>
              <Static id="sta_jobKey" taborder="30" text="소재지" cssclass="sta_WFSA_Label" left="391" top="5" width="64" height="21"/>
              <Combo id="cmb_LOCPLC_CODE" taborder="31" innerdataset="DS_LOCPLC_CODE" codecolumn="CODE" datacolumn="CODE_NM" onitemchanged="div_SearchArea_cmb_LOCPLC_CODE_onitemchanged" left="471" top="5" width="216" height="22"/>
              <Combo id="cmb_LAST_SANCTN_STTUS" taborder="32" innerdataset="@ds_sanctnSttus" codecolumn="CODE" datacolumn="CODE_NM" onitemchanged="div_SearchArea_cmb_LOCPLC_CODE_onitemchanged" left="815" top="5" width="112" height="22"/>
            </Layout>
          </Layouts>
        </Div>
        <Div id="div_WORK" taborder="1" text="Div00" left="0" top="59" style="background:#ffffffff;" right="28" bottom="0">
          <Layouts>
            <Layout>
              <Static id="Static08" taborder="5" text="10" visible="false" left="0" top="0" width="1031" height="10" style="background:#dc143c3c;align:center middle;"/>
              <Tab id="Tab00" taborder="13" top="10" right="0%" tabindex="0" scrollbars="autoboth" left="0" bottom="0" style="showextrabutton:false;" onchanged="div_WORK_Tab00_onchanged">
                <Tabpages>
                  <Tabpage id="tabpage1" text="지출결의등록">
                    <Layouts>
                      <Layout>
                        <Static id="Static01" taborder="0" text="보상금지출결의현황" cssclass="sta_WF_Title02" left="0%" top="10" right="86.91%" height="21" onclick="div_WORK_Tab00_tabpage1_Static01_onclick"/>
                        <Static id="sta_PYMNT_DE" taborder="1" text="지급예정일" cssclass="sta_WFSA_Label" top="10" height="21" width="72" right="284"/>
                        <Calendar id="cal_PYMNT_PRARNDE" taborder="2" dateformat="yyyy-MM-dd" canchange="div_search_cal_ST_PYMNT_DE_canchange" top="10" height="21" width="100" right="176"/>
                        <Button id="btn_expndtrDecsn" taborder="3" text="지출결의" onclick="div_WORK_btn_expndtrDecsn_onclick" cssclass="btn_WF_Process" top="10" height="21" width="66" right="0"/>
                        <Button id="btn_allChangeDe" taborder="4" text="예정일일괄변경" onclick="btn_allChangeDe_onclick" top="10" height="21" width="106" right="68"/>
                        <Static id="Static04" taborder="5" text="5" onclick="Tab00_tabpage5_Static02_onclick" visible="false" left="0%" top="31" right="0%" height="5" style="background:#dc143c3c;align:center middle;"/>
                        <Grid id="grd_DS_TBCMP_THING_WTNNC" cssclass="grd02_WF_blue" taborder="6" binddataset="DS_TBCMP_RWMNY_PYMNT" useinputpanel="false" left="0%" top="36" right="0%" bottom="0">
                          <Formats>
                            <Format id="default">
                              <Columns>
                                <Column size="40" band="left"/>
                                <Column size="100" band="left"/>
                                <Column size="220" band="left"/>
                                <Column size="100"/>
                                <Column size="220"/>
                                <Column size="100"/>
                                <Column size="120"/>
                                <Column size="80"/>
                                <Column size="150"/>
                                <Column size="100"/>
                                <Column size="100"/>
                                <Column size="100"/>
                                <Column size="50"/>
                              </Columns>
                              <Rows>
                                <Row size="24" band="head"/>
                                <Row size="24" band="head"/>
                                <Row size="24"/>
                                <Row size="24" band="summ"/>
                              </Rows>
                              <Band id="head">
                                <Cell rowspan="2" displaytype="checkbox" edittype="checkbox"/>
                                <Cell col="1" colspan="2" text="소유자정보"/>
                                <Cell col="3" colspan="2" text="청구인정보"/>
                                <Cell col="5" rowspan="2" text="청구일자"/>
                                <Cell col="6" rowspan="2" text="청구금액"/>
                                <Cell col="7" rowspan="2" text="은행"/>
                                <Cell col="8" rowspan="2" text="계좌번호"/>
                                <Cell col="9" rowspan="2" text="예금주"/>
                                <Cell col="10" rowspan="2" text="예정일"/>
                                <Cell col="11" rowspan="2" text="지급일자"/>
                                <Cell col="12" rowspan="2" text="결재&#13;&#10;상태"/>
                                <Cell row="1" col="1" text="소유자"/>
                                <Cell row="1" col="2" text="주소"/>
                                <Cell row="1" col="3" text="청구인"/>
                                <Cell row="1" col="4" text="주소"/>
                              </Band>
                              <Band id="body">
                                <Cell displaytype="expr:(LAST_SANCTN_STTUS =='S02')?'none':(LAST_SANCTN_STTUS=='S00')?'none':'checkbox'" edittype="expr:(LAST_SANCTN_STTUS =='S02')?'none':(LAST_SANCTN_STTUS=='S00')?'none':'checkbox'" text="bind:CHK"/>
                                <Cell col="1" style="align:left;" text="bind:OWNER_NM"/>
                                <Cell col="2" style="align:left;" text="bind:ADRES"/>
                                <Cell col="3" style="align:left;" text="bind:BILLER_NM"/>
                                <Cell col="4" style="align:left;" text="bind:BILLER_ADRES"/>
                                <Cell col="5" displaytype="date" style="align:center;" text="bind:RQEST_DE" calendardisplaynulltype="none"/>
                                <Cell col="6" style="align:right;" text="bind:RQEST_AMOUNT"/>
                                <Cell col="7" displaytype="combo" style="align:left;" text="bind:BANK_CODE" combodataset="DS_BANK_INFO" combocodecol="CODE" combodatacol="CODE_NM" combodisplay="edit"/>
                                <Cell col="8" style="align:left;" text="bind:ACNUTNO"/>
                                <Cell col="9" style="align:left;" text="bind:OWNER_DPSTR"/>
                                <Cell col="10" displaytype="date" style="align:center;" text="bind:PYMNT_PRARNDE" calendardisplaynulltype="none"/>
                                <Cell col="11" displaytype="date" style="align:center;" text="bind:PYMNT_DE" calendardisplaynulltype="none"/>
                                <Cell col="12" displaytype="image" style="align:center;" text="bind:LAST_SANCTNSTS_IMG"/>
                              </Band>
                              <Band id="summary">
                                <Cell/>
                                <Cell col="1" displaytype="number" style="align:center;" text="expr:dataset.rowcount"/>
                                <Cell col="2"/>
                                <Cell col="3"/>
                                <Cell col="4"/>
                                <Cell col="5"/>
                                <Cell col="6" displaytype="number" style="align:right;" text="expr:dataset.getSum('RQEST_AMOUNT')"/>
                                <Cell col="7"/>
                                <Cell col="8"/>
                                <Cell col="9"/>
                                <Cell col="10"/>
                                <Cell col="11"/>
                                <Cell col="12"/>
                              </Band>
                            </Format>
                          </Formats>
                        </Grid>
                        <Static id="Static08" taborder="7" text="10" visible="false" left="0%" top="0" right="0%" height="10" style="background:#dc143c3c;align:center middle;"/>
                      </Layout>
                    </Layouts>
                  </Tabpage>
                  <Tabpage id="tabpage2" text="지출결의확인">
                    <Layouts>
                      <Layout>
                        <Static id="Static01" taborder="0" text="보상금지출결의 완료" cssclass="sta_WF_Title02" left="0%" top="10" right="81.57%" height="21"/>
                        <Static id="Static08" taborder="2" text="10" visible="false" left="0%" top="0" right="0%" height="10" style="background:#dc143c3c;align:center middle;"/>
                        <Static id="Static04" taborder="3" text="5" onclick="Tab00_tabpage5_Static02_onclick" visible="false" left="0%" top="31" right="0%" height="5" style="background:#dc143c3c;align:center middle;"/>
                        <Button id="btn_allChangeDe" taborder="6" text="지급일자일괄등록" top="10" height="21" right="0" onclick="div_WORK_Tab00_tabpage2_btn_allChangeDe_onclick" width="104"/>
                        <Grid id="grd_DS_TBCMP_THING_WTNNC" cssclass="grd02_WF_blue" taborder="7" binddataset="DS_TBCMP_RWMNY_PYMNT" useinputpanel="false" left="0%" top="36" right="0%" bottom="0" oncelldblclick="div_WORK_Tab00_tabpage2_grd_DS_TBCMP_THING_WTNNC_oncelldblclick">
                          <Formats>
                            <Format id="default">
                              <Columns>
                                <Column size="40" band="left"/>
                                <Column size="100" band="left"/>
                                <Column size="220" band="left"/>
                                <Column size="100"/>
                                <Column size="220"/>
                                <Column size="100"/>
                                <Column size="120"/>
                                <Column size="80"/>
                                <Column size="150"/>
                                <Column size="100"/>
                                <Column size="100"/>
                                <Column size="100"/>
                                <Column size="100"/>
                              </Columns>
                              <Rows>
                                <Row size="24" band="head"/>
                                <Row size="24" band="head"/>
                                <Row size="24"/>
                                <Row size="24" band="summ"/>
                              </Rows>
                              <Band id="head">
                                <Cell rowspan="2" displaytype="checkbox" edittype="checkbox"/>
                                <Cell col="1" colspan="2" text="소유자정보"/>
                                <Cell col="3" colspan="2" text="청구인정보"/>
                                <Cell col="5" rowspan="2" text="청구일자"/>
                                <Cell col="6" rowspan="2" text="청구금액"/>
                                <Cell col="7" rowspan="2" text="은행"/>
                                <Cell col="8" rowspan="2" text="계좌번호"/>
                                <Cell col="9" rowspan="2" text="예금주"/>
                                <Cell col="10" rowspan="2" text="예정일"/>
                                <Cell col="11" rowspan="2" text="지급일자"/>
                                <Cell col="12" rowspan="2" text="지출일자"/>
                                <Cell col="13"/>
                                <Cell row="1" col="1" text="소유자"/>
                                <Cell row="1" col="2" text="주소"/>
                                <Cell row="1" col="3" text="청구인"/>
                                <Cell row="1" col="4" text="주소"/>
                                <Cell row="1" col="13"/>
                              </Band>
                              <Band id="body">
                                <Cell displaytype="expr:(LAST_SANCTN_STTUS =='S02')?'none':(LAST_SANCTN_STTUS=='S00')?'none':'checkbox'" edittype="expr:(LAST_SANCTN_STTUS =='S02')?'none':(LAST_SANCTN_STTUS=='S00')?'none':'checkbox'" text="bind:CHK"/>
                                <Cell col="1" style="align:left;" text="bind:OWNER_NM"/>
                                <Cell col="2" style="align:left;" text="bind:ADRES"/>
                                <Cell col="3" style="align:left;" text="bind:BILLER_NM"/>
                                <Cell col="4" style="align:left;" text="bind:BILLER_ADRES"/>
                                <Cell col="5" displaytype="date" style="align:center;" text="bind:RQEST_DE" calendardisplaynulltype="none"/>
                                <Cell col="6" style="align:right;" text="bind:RQEST_AMOUNT"/>
                                <Cell col="7" displaytype="combo" style="align:left;" text="bind:BANK_CODE" combodataset="DS_BANK_INFO" combocodecol="CODE" combodatacol="CODE_NM" combodisplay="edit"/>
                                <Cell col="8" style="align:left;" text="bind:ACNUTNO"/>
                                <Cell col="9" style="align:left;" text="bind:OWNER_DPSTR"/>
                                <Cell col="10" displaytype="date" style="align:center;" text="bind:PYMNT_PRARNDE" calendardisplaynulltype="none"/>
                                <Cell col="11" displaytype="date" style="align:center;" text="bind:PYMNT_DE" calendardisplaynulltype="none"/>
                                <Cell col="12" displaytype="date" style="align:center;" text="bind:RCPT_DE" calendardisplaynulltype="none"/>
                                <Cell col="13"/>
                              </Band>
                              <Band id="summary">
                                <Cell/>
                                <Cell col="1" displaytype="number" style="align:center;" text="expr:dataset.rowcount"/>
                                <Cell col="2"/>
                                <Cell col="3"/>
                                <Cell col="4"/>
                                <Cell col="5"/>
                                <Cell col="6" displaytype="number" style="align:right;" text="expr:dataset.getSum('RQEST_AMOUNT')"/>
                                <Cell col="7"/>
                                <Cell col="8"/>
                                <Cell col="9"/>
                                <Cell col="10"/>
                                <Cell col="11"/>
                                <Cell col="12"/>
                                <Cell col="13"/>
                              </Band>
                            </Format>
                          </Formats>
                        </Grid>
                      </Layout>
                    </Layouts>
                  </Tabpage>
                </Tabpages>
              </Tab>
            </Layout>
          </Layouts>
        </Div>
        <Static id="Static01" taborder="10" text="15" visible="false" left="1031" top="0" width="15" height="735" style="background:#1b3cd23c;align:center middle;"/>
        <Static id="Static02" taborder="11" text="스&#13;&#10;크&#13;&#10;롤&#13;&#10;13" visible="false" top="0" right="0" width="13" height="735" style="background:#d07b173c;align:center middle;"/>
      </Layout>
    </Layouts>
    <Objects>
      <Dataset id="DS_TBCMP_RWMNY_PYMNT" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false" canrowposchange="DS_TBCMP_THING_WTNNC_canrowposchange" oncolumnchanged="DS_TBCMP_THING_WTNNC_oncolumnchanged">
        <ColumnInfo>
          <Column id="CHK" type="STRING" size="1"/>
          <Column id="OWNER_NM" type="STRING" size="256"/>
          <Column id="ADRES" type="STRING" size="256"/>
          <Column id="BILLER_NM" type="STRING" size="256"/>
          <Column id="BILLER_ADRES" type="STRING" size="256"/>
          <Column id="RQEST_AMOUNT" type="BIGDECIMAL" size="15"/>
          <Column id="BANK_CODE" type="STRING" size="3"/>
          <Column id="ACNUTNO" type="STRING" size="20"/>
          <Column id="OWNER_DPSTR" type="STRING" size="100"/>
          <Column id="PYMNT_PRARNDE" type="STRING" size="8"/>
          <Column id="PYMNT_DE" type="STRING" size="8"/>
          <Column id="INNER_SANCTN_NO" type="BIGDECIMAL" size="16"/>
          <Column id="BSNS_AREA_CODE" type="STRING" size="4"/>
          <Column id="OWNER_NO" type="INT" size="5"/>
          <Column id="RQEST_SN" type="BIGDECIMAL" size="10"/>
          <Column id="RQEST_DE" type="STRING" size="8"/>
          <Column id="SANCTN_NO" type="BIGDECIMAL" size="16"/>
          <Column id="LAST_SANCTN_STTUS" type="STRING" size="10"/>
          <Column id="DECSN_YEAR" type="STRING" size="256"/>
          <Column id="EXPNDTR_DECSN_NO" type="STRING" size="10"/>
          <Column id="EXPNDTR_DECSN_STTUS" type="STRING" size="256"/>
          <Column id="LAST_SANCTNSTS_IMG" type="STRING" size="256"/>
          <Column id="REGIST_DT" type="STRING" size="256"/>
          <Column id="RCPT_DE" type="STRING" size="256"/>
          <Column id="RWMNY_PYMNT_SE" type="STRING" size="256"/>
          <Column id="CMPNSP_NO" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="DS_BSNS_AREA_CODE" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="CODE" type="STRING" size="256"/>
          <Column id="CODE_NM" type="STRING" size="256"/>
          <Column id="FULL_CODE_NM" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_validation" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="compId" type="STRING" size="256"/>
          <Column id="colId" type="STRING" size="256"/>
          <Column id="PK" type="STRING" size="256"/>
          <Column id="notNull" type="STRING" size="256"/>
          <Column id="type" type="STRING" size="256"/>
          <Column id="nlength" type="STRING" size="256"/>
          <Column id="from" type="STRING" size="256"/>
          <Column id="to" type="STRING" size="256"/>
          <Column id="lengthChkGb" type="STRING" size="256"/>
          <Column id="msgId" type="STRING" size="256"/>
          <Column id="expr" type="STRING" size="256"/>
          <Column id="func" type="STRING" size="256"/>
        </ColumnInfo>
        <Rows>
          <Row>
            <Col id="compId">div_search</Col>
            <Col id="colId">cmb_BSNS_AREA_CODE</Col>
            <Col id="notNull">Y</Col>
            <Col id="to"/>
            <Col id="msgId">사업지구</Col>
          </Row>
        </Rows>
      </Dataset>
      <Dataset id="ds_cond00" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="BSNS_AREA_CODE" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_tbaccFnncInsttCode" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="FNNC_INSTT_CODE" type="STRING" size="256"/>
          <Column id="FNNC_INSTT_CODE_NM" type="STRING" size="256"/>
          <Column id="BRFFC_CODE" type="STRING" size="256"/>
          <Column id="BRFFC_CODE_NM" type="STRING" size="256"/>
          <Column id="REGISTER_ID" type="STRING" size="256"/>
          <Column id="REGIST_DT" type="DATE" size="256"/>
          <Column id="UPDUSR_ID" type="STRING" size="256"/>
          <Column id="UPDT" type="DATE" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="DS_LAST_SANCTN_STTUS">
        <ColumnInfo>
          <Column id="CODE" type="STRING" size="256"/>
          <Column id="CODE_NM" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_expDsnMastr" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="DECSN_YEAR" type="STRING" size="4"/>
          <Column id="DECSN_NO" type="STRING" size="10"/>
          <Column id="CAUSE_ACTION_NO" type="STRING" size="10"/>
          <Column id="BUDGET_YEAR" type="STRING" size="4"/>
          <Column id="BSNS_SE" type="STRING" size="1"/>
          <Column id="BALC_SE" type="STRING" size="1"/>
          <Column id="BUDGET_ACNT_CODE" type="STRING" size="8"/>
          <Column id="BUDGET_ACNT_NM" type="STRING" size="256"/>
          <Column id="ANACT_KND" type="STRING" size="2"/>
          <Column id="DEPT_CODE" type="STRING" size="6"/>
          <Column id="DEPT_NM" type="STRING" size="256"/>
          <Column id="CYFD_SE" type="STRING" size="1"/>
          <Column id="ITNC_DE" type="STRING" size="8"/>
          <Column id="PYMNT_ITNC_DE" type="STRING" size="8"/>
          <Column id="DET_DCSN_DE" type="STRING" size="8"/>
          <Column id="PRMPC_JRNLZPR_RGIST_DE" type="STRING" size="8"/>
          <Column id="CPTAL_EXPNDTR_ACNTBK_DE" type="STRING" size="8"/>
          <Column id="EXPNDTR_BUDGET_CNRL_DE" type="STRING" size="8"/>
          <Column id="CAUSE_ACTION_DE" type="STRING" size="8"/>
          <Column id="DECSN_AMOUNT" type="BIGDECIMAL" size="22"/>
          <Column id="BUDGET_ACNT_BLCE" type="BIGDECIMAL" size="22"/>
          <Column id="EXPNDTR_UNIT_CODE" type="STRING" size="8"/>
          <Column id="EXPNDTR_UNIT_NM" type="STRING" size="256"/>
          <Column id="EXPNDTR_UNIT_CODE_BLCE" type="BIGDECIMAL" size="22"/>
          <Column id="CPTAL_CHRG_CONFM" type="STRING" size="1"/>
          <Column id="TIMHDER_CONFM" type="STRING" size="1"/>
          <Column id="CNTRCT_NO" type="STRING" size="11"/>
          <Column id="FNNC_INSTT_CODE" type="STRING" size="3"/>
          <Column id="ACNUTNO" type="STRING" size="20"/>
          <Column id="SUMRY" type="STRING" size="200"/>
          <Column id="BSNS_CODE" type="STRING" size="5"/>
          <Column id="BSNS_NM" type="STRING" size="256"/>
          <Column id="PRMPC_YEAR" type="STRING" size="256"/>
          <Column id="PRMPC_CODE" type="STRING" size="6"/>
          <Column id="PRMPC_NM" type="STRING" size="256"/>
          <Column id="REGISTER_ID" type="STRING" size="12"/>
          <Column id="REGIST_DT" type="DATE" size="7"/>
          <Column id="UPDUSR_ID" type="STRING" size="12"/>
          <Column id="UPDT_DT" type="DATE" size="7"/>
          <Column id="EXPNDTR_CNFIRM_AT" type="STRING" size="2"/>
          <Column id="ATMC_JRNLZ_TY_CODE" type="STRING" size="256"/>
          <Column id="GNRL_DEBTOR_ACNT_NM" type="STRING" size="256"/>
          <Column id="GNRL_CRDIT_ACNT_NM" type="STRING" size="256"/>
          <Column id="SETOFF_DEBTOR_ACNT_NM" type="STRING" size="256"/>
          <Column id="SETOFF_CRDIT_ACNT_NM" type="STRING" size="256"/>
          <Column id="FILE_SN" type="STRING" size="256"/>
          <Column id="CHECK_NO" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_expDsnMtrDet" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false" oncolumnchanged="ds_expDsnMtrDet_oncolumnchanged">
        <ColumnInfo>
          <Column id="DECSN_YEAR" type="STRING" size="4"/>
          <Column id="DECSN_NO" type="STRING" size="11"/>
          <Column id="CNTRCT_DE" type="STRING" size="8"/>
          <Column id="ACPTNC_DE" type="STRING" size="8"/>
          <Column id="ORDER_DE" type="STRING" size="8"/>
          <Column id="DVYFG_DE" type="STRING" size="8"/>
          <Column id="PYMNT_CMMND_PBLICTE_DE" type="STRING" size="8"/>
          <Column id="CHECK_NO" type="BIGDECIMAL" size="22"/>
          <Column id="TAXXPT_AMOUNT" type="BIGDECIMAL" size="22"/>
          <Column id="VAT_DECSN_AMOUNT" type="BIGDECIMAL" size="22"/>
          <Column id="SUPLY_AMOUNT" type="BIGDECIMAL" size="22"/>
          <Column id="VAT_AMOUNT" type="BIGDECIMAL" size="22"/>
          <Column id="DSGN_AMOUNT" type="BIGDECIMAL" size="22"/>
          <Column id="CNTRCT_SE" type="STRING" size="3"/>
          <Column id="CNTRCT_MTHD" type="STRING" size="1"/>
          <Column id="ATCH_FILE" type="STRING" size="100"/>
          <Column id="ATCH_FLPTH" type="STRING" size="200"/>
          <Column id="ATCH_FILE_1" type="STRING" size="100"/>
          <Column id="ATCH_FLPTH_1" type="STRING" size="200"/>
          <Column id="REGISTER_ID" type="STRING" size="12"/>
          <Column id="REGIST_DT" type="DATE" size="7"/>
          <Column id="UPDUSR_ID" type="STRING" size="12"/>
          <Column id="UPDT_DT" type="DATE" size="7"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_expDsnDetail" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false" oncolumnchanged="ds_expDsnDetail_oncolumnchanged" onrowsetchanged="ds_expDsnDetail_onrowsetchanged">
        <ColumnInfo>
          <Column id="DECSN_YEAR" type="STRING" size="4"/>
          <Column id="DECSN_NO" type="STRING" size="11"/>
          <Column id="SEQ" type="BIGDECIMAL" size="22"/>
          <Column id="DECSN_AMOUNT" type="BIGDECIMAL" size="22"/>
          <Column id="TAXXPT_AMOUNT" type="BIGDECIMAL" size="22"/>
          <Column id="VAT_AT" type="STRING" size="1"/>
          <Column id="BILL_KND" type="STRING" size="1"/>
          <Column id="VAT_DECSN_AMOUNT" type="BIGDECIMAL" size="22"/>
          <Column id="SUPLY_AMOUNT" type="BIGDECIMAL" size="22"/>
          <Column id="VAT" type="BIGDECIMAL" size="22"/>
          <Column id="BCNC_CODE" type="STRING" size="10"/>
          <Column id="BCNC_NM" type="STRING" size="256"/>
          <Column id="NM" type="STRING" size="30"/>
          <Column id="ADRES" type="STRING" size="200"/>
          <Column id="RQEST_DE" type="STRING" size="8"/>
          <Column id="RQEST_MAN" type="STRING" size="30"/>
          <Column id="RCPT_DE" type="STRING" size="8"/>
          <Column id="RCPT_MAN" type="STRING" size="30"/>
          <Column id="FNNC_INSTT_CODE" type="STRING" size="3"/>
          <Column id="ACNUTNO" type="STRING" size="20"/>
          <Column id="ENTRPRS_SE" type="STRING" size="1"/>
          <Column id="EVRFRND" type="STRING" size="1"/>
          <Column id="TCNDVLP" type="STRING" size="1"/>
          <Column id="CNTRWK_PRPOS_MTRIL" type="STRING" size="1"/>
          <Column id="AREA_ENTRPS" type="STRING" size="1"/>
          <Column id="FEMALE_ENTRPRS" type="STRING" size="1"/>
          <Column id="MIDDL_PD_CMPET_PRDUCT" type="STRING" size="1"/>
          <Column id="FRGCPT_ENTRPRS" type="STRING" size="1"/>
          <Column id="DSPSN" type="STRING" size="1"/>
          <Column id="SRSILL_DSPSN" type="STRING" size="1"/>
          <Column id="SOCTY_ENTRPRS" type="STRING" size="1"/>
          <Column id="DSPSN_PRDCTN_FCLTY" type="STRING" size="1"/>
          <Column id="SOCTY_CPER_MXTR" type="STRING" size="1"/>
          <Column id="GREEN_PRDUCT" type="STRING" size="1"/>
          <Column id="WHTAX_AT" type="STRING" size="1"/>
          <Column id="WHTAX_KND" type="STRING" size="1"/>
          <Column id="WHTAX_ADRES" type="STRING" size="200"/>
          <Column id="IHDNUM" type="STRING" size="256"/>
          <Column id="INCMTAX" type="STRING" size="256"/>
          <Column id="IHNTS" type="STRING" size="256"/>
          <Column id="WHTAX_INCOME_SE_CODE" type="STRING" size="256"/>
          <Column id="WHTAX_INDUTY_CODE" type="STRING" size="256"/>
          <Column id="MTCHG_SE" type="STRING" size="5"/>
          <Column id="BRRW_AMOUNT_INTR_RPAY_AT" type="STRING" size="1"/>
          <Column id="RM" type="STRING" size="200"/>
          <Column id="CMPNSP_NO" type="STRING" size="30"/>
          <Column id="REGISTER_ID" type="STRING" size="12"/>
          <Column id="REGIST_DT" type="DATE" size="7"/>
          <Column id="UPDUSR_ID" type="STRING" size="12"/>
          <Column id="UPDT_DT" type="DATE" size="7"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="DS_LOCPLC_CODE" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="CODE" type="STRING" size="256"/>
          <Column id="CODE_NM" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="DS_BANK_INFO">
        <ColumnInfo>
          <Column id="CODE" type="STRING" size="256"/>
          <Column id="CODE_NM" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_decsnNo" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="BSNS_AREA_CODE" type="STRING" size="256"/>
          <Column id="OWNER_NO" type="STRING" size="256"/>
          <Column id="RQEST_SN" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="DS_TBCMP_RWMNY_PYMNT_REPORT" useclientlayout="true">
        <ColumnInfo>
          <Column id="FULL_LOCPLC_CODE_NM" type="STRING" size="255"/>
          <Column id="CODE_NM" type="STRING" size="255"/>
          <Column id="STRCT_STNDRD" type="STRING" size="255"/>
          <Column id="AR_LGSTR" type="BIGDECIMAL" size="255"/>
          <Column id="AR_INCRPR" type="BIGDECIMAL" size="255"/>
          <Column id="AR" type="BIGDECIMAL" size="255"/>
          <Column id="UNIT" type="STRING" size="255"/>
          <Column id="UNTPC" type="BIGDECIMAL" size="255"/>
          <Column id="RWMNY" type="BIGDECIMAL" size="255"/>
          <Column id="ACNUTNO" type="STRING" size="255"/>
          <Column id="BANK_NM" type="STRING" size="255"/>
          <Column id="RQEST_AMOUNT" type="BIGDECIMAL" size="255"/>
          <Column id="OWNER_NM" type="STRING" size="255"/>
          <Column id="ADRES" type="STRING" size="255"/>
          <Column id="RQEST_SN" type="INT" size="255"/>
          <Column id="SORT_ORD" type="STRING" size="255"/>
          <Column id="BNDE_APPLC_GROUP" type="INT" size="255"/>
          <Column id="LNM" type="STRING" size="255"/>
          <Column id="SLNO" type="STRING" size="255"/>
          <Column id="SORT_ORDR" type="INT" size="255"/>
          <Column id="GROUP_ORDER" type="INT" size="255"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_cond01" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="BSNS_AREA_CODE" type="STRING" size="256"/>
          <Column id="OWNER_NO__RQEST_SN" type="STRING" size="2000"/>
        </ColumnInfo>
        <Rows>
          <Row/>
        </Rows>
      </Dataset>
      <Dataset id="ds_innerSanctnParam" useclientlayout="true">
        <ColumnInfo>
          <Column id="INNER_SANCTN_ID" type="STRING" size="16"/>
          <Column id="INNER_SANCTN_MDL_ID" type="STRING" size="10"/>
          <Column id="SYS_SE_CODE" type="STRING" size="256"/>
          <Column id="JOB_SE" type="STRING" size="256"/>
          <Column id="LAST_SANCTN_STEP" type="STRING" size="256"/>
          <Column id="SANCTN_STEP" type="STRING" size="256"/>
          <Column id="LAST_SANCTNER_ID" type="STRING" size="256"/>
          <Column id="LAST_SANCTN_DT" type="STRING" size="256"/>
          <Column id="JOB_KEY" type="STRING" size="256"/>
        </ColumnInfo>
        <Rows>
          <Row/>
        </Rows>
      </Dataset>
      <Dataset id="gds_apprline" useclientlayout="true">
        <ColumnInfo>
          <Column id="APPRLINE_COL1" type="STRING" size="256"/>
          <Column id="APPRLINE_COL2" type="STRING" size="256"/>
          <Column id="APPRLINE_COL3" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_sanction">
        <ColumnInfo>
          <Column id="BSNS_AREA_CODE" type="STRING" size="256"/>
          <Column id="OWNER_NO" type="STRING" size="256"/>
          <Column id="RQEST_SN" type="STRING" size="256"/>
          <Column id="JOB_KEY" type="STRING" size="256"/>
          <Column id="INNER_SANCTN_NO" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_sanctnSttus">
        <ColumnInfo>
          <Column id="CODE" type="STRING" size="256"/>
          <Column id="CODE_NM" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
    </Objects>
    <Bind>
      <BindItem id="item9" compid="div_search.rdo_LAST_SANCTN_STTUS2" propid="value" datasetid="DS_TBCMP_BILLER_CHANGE" columnid="SEIZR_AT"/>
    </Bind>
    <Script type="xscript5.0"><![CDATA[/***********************************************************************
 * 화면ID   : CMP040201
 * 화면명   : 보상금일괄지출결의
 * 화면설명 : 보상금일괄지출결의
 * 작성일   : 2016.07.18
 * 작성자   : 지효정
 * 수정이력 : 
 ***********************************************************************
 *     수정일     수정자   내용
 ***********************************************************************
 */


/***********************************************************************
 * Script Include 
 ***********************************************************************/
include "pms_lib::cmpUtilInclude.xjs";
include "lib::comInnerSanct.xjs";

/***********************************************************************
 * onInit / onLoad 영역
 ***********************************************************************/
this.frm_CMP040201_onload = function(obj:Form, e:nexacro.LoadEventInfo)
{
	this.fn_init();//공통 폼 초기화
	this.fn_init_form();//폼 초기화
	this.fn_init_dataset();//Dataset 초기화
	this.fn_load_combo();
}

/*
 * 함수명  	: fn_init_form
 * 설명 		: Form을 초기화한다.
 * params  		: None
 * return Type 	: None
 * 사용법		: this.initForm();
 */
this.fn_init_form = function(){
	var today = this.gfn_today();
	this.div_search.cal_ST_RQEST_DE.set_value(this.fn_first_yyyymmdd(today));
	this.div_search.cal_ED_RQEST_DE.set_value(today);
	
	//this.div_search.cal_ST_PYMNT_PRARNDE.set_value(this.fn_first_yyyymmdd(today));
	//this.div_search.cal_ED_PYMNT_PRARNDE.set_value(today);
	this.div_WORK.Tab00.tabpage1.cal_PYMNT_PRARNDE.set_value(today);
}

/*
 * 함수명  	: fn_init_dataset
 * 설명 		: Dataset을 초기화한다.
 *                주로, 조건 Dataset들(ds_cond, ds_cond_00, ds_cond_01, ...) 을 초기화한다.
 * params  		: None
 * return Type 	: None
 * 사용법		: this.initDataset();
 */
this.fn_init_dataset = function()
{
	this.gfn_initCondDs(this, this.div_search);
}

/*
 * 함수명  	: fn_get_codeList
 * 설명 		: 모든 코드 리스트 검색
 * params  		: None
 * return Type 	: None
 * 사용법		: this.fn_get_codeList();
 */
this.fn_load_combo = function(){
	this.fn_add_comboHeader(this, this.div_search.cmb_BSNS_AREA_CODE, "선택");
	this.fn_add_comboHeader(this, this.div_search.cmb_LOCPLC_CODE, "전체");
	this.fn_get_userBsnsArea(this.DS_BSNS_AREA_CODE, "선택");				//사업지구

	this.fn_get_cmmCode(this.DS_BANK_INFO, "", {grpCode:"COM021"});//금융기관
	this.fn_get_cmmCode(this.DS_LAST_SANCTN_STTUS, "", {grpCode:"AUD032"});//결재상태
	this.fn_get_cmmCode(this.ds_sanctnSttus, "미결재", {grpCode:"COM034"});//최종결재상태
}

/*
 * 함수명  	: div_search_cmb_BSNS_AREA_CODE_onitemchanged
 * 설명 		: 사업지구의 내용 변경시 소재지 콤보 업데이트
 * params  		: None
 * return Type 	: None
 * 사용법		: 
 */
this.div_search_cmb_BSNS_AREA_CODE_onitemchanged = function(obj:Combo, e:nexacro.ItemChangeEventInfo)
{
	var bsnsAreaCode = this.div_search.cmb_BSNS_AREA_CODE.value;
	this.fn_get_locplcCode(this.DS_LOCPLC_CODE, "전체", {bsnsAreaCode:this.div_search.cmb_BSNS_AREA_CODE.value});
}


/*
 * 함수명  	: fn_search
 * 설명 		: 기본 조서 검색
 * params  		: None
 * return Type 	: None
 * 사용법		: this.fn_search();
 */
this.fn_search = function(){
	// 검색영역 Validation 체크
	if(!this.gfn_checkValidation(this.div_search, this.ds_validation)) {
		return;
	}
	
	this.fn_clearAll_ds();
	this.fn_divToDS(this.ds_cond00, this.div_search);
	
	if(this.div_WORK.Tab00.tabindex == 0){
		this.fn_transaction("rwmnyPymntList");
	} else {
		this.fn_transaction("rwmnyPymntList1");
	}
	
}

/*
 * 함수명  	: fn_save
 * 설명 		: 기본조서, 청구인변경, 등기이전 저장
 * params  		: None
 * return Type 	: None
 * 사용법		: this.fn_save();
 */
this.fn_save = function(){
	//업데이트 유무 체크
	if(this.fn_checkUpdate(this.DS_TBCMP_RWMNY_PYMNT) == false){ //보상금지출결의현황
		this.alert("comm.데이터.변경.없음");
		return false;
	}
	
	if(this.confirm("S")){
		this.fn_transaction("rwmnyPymntDeU");
	}
}


/*
 * 함수명  	: fn_sanction
 * 설명 		: 결재버튼
 * params  		: None
 * return Type 	: None
 * 사용법		: 
 */
this.fn_sanction = function(){
	var arrOwnerNo = this.fn_checkValue(this.div_WORK.Tab00.tabpage1.grd_DS_TBCMP_THING_WTNNC , "OWNER_NO");
		
	if(0 == this.DS_TBCMP_RWMNY_PYMNT.rowcount || arrOwnerNo.length == 0) {
		this.alert("선택한 건이 없습니다.");
		return false;
	}

	var gridObj = this.DS_TBCMP_RWMNY_PYMNT;			//그리드
	var gridSelectedRow = gridObj.rowposition;	//그리드 선택로우

	var ownerNo__rqestSn = "-1";
	var indexs = getRandomArray(10, 99);
	var rndKey = "";
	var rgstDt = "-1";

	for(var i=0; i<indexs.length; i++) {
		rndKey += indexs[i];
	}
	
	//내부결재요청
	//업무키 조합한다.
	var key = gridObj.getColumn(gridSelectedRow, "BSNS_AREA_CODE") + "^" 
			+ this.gfn_today()+"^"
			+ rndKey;
    var nRow = -1;
    var notNull = false;
    
    this.ds_sanction.clearData();

	for(var i=0; i<this.DS_TBCMP_RWMNY_PYMNT.rowcount; i++) {
		if("1" == this.DS_TBCMP_RWMNY_PYMNT.getColumn(i, "CHK")) {
			if(null != this.DS_TBCMP_RWMNY_PYMNT.getColumn(i, "LAST_SANCTN_STTUS")){
				notNull = true;
			}
			
			if("-1" == ownerNo__rqestSn) {
				ownerNo__rqestSn = ""+this.DS_TBCMP_RWMNY_PYMNT.getColumn(i, "OWNER_NO")+""+this.DS_TBCMP_RWMNY_PYMNT.getColumn(i, "RQEST_SN");
			}
			else {
				ownerNo__rqestSn = ownerNo__rqestSn+","+this.DS_TBCMP_RWMNY_PYMNT.getColumn(i, "OWNER_NO")+this.DS_TBCMP_RWMNY_PYMNT.getColumn(i, "RQEST_SN");
			}
			
			nRow = this.ds_sanction.addRow();
			this.ds_sanction.setColumn(nRow, "BSNS_AREA_CODE"  , this.DS_TBCMP_RWMNY_PYMNT.getColumn(i, "BSNS_AREA_CODE"));
			this.ds_sanction.setColumn(nRow, "OWNER_NO"        , this.DS_TBCMP_RWMNY_PYMNT.getColumn(i, "OWNER_NO"));
			this.ds_sanction.setColumn(nRow, "RQEST_SN"        , this.DS_TBCMP_RWMNY_PYMNT.getColumn(i, "RQEST_SN"));
			this.ds_sanction.setColumn(nRow, "JOB_KEY"         , key);
			
			if(rgstDt == -1) {
				rgstDt = this.DS_TBCMP_RWMNY_PYMNT.getColumn(i, "REGIST_DT").substr(0,8);
			}
			else {
				if(rgstDt > this.DS_TBCMP_RWMNY_PYMNT.getColumn(i, "REGIST_DT").substr(0,8)) {
					rgstDt = this.DS_TBCMP_RWMNY_PYMNT.getColumn(i, "REGIST_DT").substr(0,8);
				}
			}
		}
	}
	
	if(notNull){
		this.alert("fail.실행.불가", "결재 완료건은 결재 실행을");
		return;
	}
	
	//보고서변환
	this.ds_cond01.clearData();
	this.ds_cond01.addRow();
	this.ds_cond01.setColumn(0,"BSNS_AREA_CODE", this.DS_TBCMP_RWMNY_PYMNT.getColumn(gridSelectedRow, "BSNS_AREA_CODE"));
	this.ds_cond01.setColumn(0,"OWNER_NO__RQEST_SN", ownerNo__rqestSn);

	var sanctnId = "";
	var strSvcId = "innerSanctnUbiDataset";
	var reportTitle  = "보상금청구내역";
	var reportUri    = "/pms/cmp/CMP040200_R03.jrf";
	var saveFileName = "보상금청구내역";
	var sController   	= "/hsco/pms/cmp/tdd/CMP040200/rwmnyPymntPrintList.do";
	var sInDatasets   	= "input1=ds_cond01"; 
	var sOutDatasets  	= "DS_TBCMP_RWMNY_PYMNT_REPORT=output1";
	
	this.gfn_makeReportTranInfo(sanctnId, strSvcId, sController, sInDatasets, sOutDatasets, reportTitle, reportUri, saveFileName);
			
	this.ds_innerSanctnParam.clearData();
	this.ds_innerSanctnParam.addRow();
	this.ds_innerSanctnParam.setColumn(0, "INNER_SANCTN_MDL_ID", "CMP-100037");	/*내부결재모형ID*/
	this.ds_innerSanctnParam.setColumn(0, "SYS_SE_CODE", "PMS");				/*시스템구분 COM024*/
	this.ds_innerSanctnParam.setColumn(0, "JOB_SE", "CMP");						/*업무구분 COM025*/
	this.ds_innerSanctnParam.setColumn(0, "JOB_KEY", key);						/*시스템 업무별 UNIQUE KEY*/
	
	var fn_cb = function(sPopupId, sReturn){
		var sanctnResult = sReturn.split("^"); /*index 0: 응답코드, index 1 : 내부결재ID*/
		if("0000"==sanctnResult[0]){
			for(var i=0; i<this.ds_sanction.rowcount; i++) {
				this.ds_sanction.setColumn(i, "INNER_SANCTN_ID" , sanctnResult[1]);
			}

			this.fn_transaction("sanctnUpdate");
		}
		else {
			for(var i=0; i<this.ds_sanction.rowcount; i++) {
				this.ds_sanction.setColumn(i, "INNER_SANCTN_ID" , "");
				this.ds_sanction.setColumn(i, "JOB_KEY"         , "");
			}
			
			this.fn_transaction("sanctnUpdate");
		}
	}
	
	this.fn_transaction("sanctnUpdate");
	
	var result = this.gfn_openInnerSanctionPopup(this.ds_innerSanctnParam, fn_cb, rgstDt);	
}

/*
 * 함수명  	: fn_calcel
 * 설명 		: 랜덤함수 생성
 * params  		: None
 * return Type 	: None
 * 사용법		: 
 */
function getRandomArray(idxSize, range) {
	/* 랜덤 수를 가진 배열을 반환하는 메서드.
	 * idxSize : 반환받을 배열 사이즈, 
	 * range : 랜덤 수의 범위
	 */
	var indexs = new Array(); // 랜덤 인덱스 배열
	var hasValue = false; //같은 값이 있는지 확인하기 위한 변수
	
	if(idxSize > range) {
		console.error('index size > range');
		return indexs;
	}
	
	while(indexs.length < idxSize) {
		hasValue = false;
		var temp = parseInt(Math.random() * range);
		for(c = 0; c < indexs.length; c++) {
			if(temp == indexs[c]) {
				hasValue = true;
				break;
			}
		}
		if(hasValue == false) {
			indexs.push(temp);
		} 
	}
	return indexs;
}


/*
 * 함수명  	: fn_calcel
 * 설명 		: 취소버튼
 * params  		: None
 * return Type 	: None
 * 사용법		: 
 */
this.fn_cancel = function(){
	this.DS_TBCMP_RWMNY_PYMNT.reset();
}

/*
 * 함수명  	: fn_close
 * 설명 		: 종료버튼
 * params  		: None
 * return Type 	: None
 * 사용법		: 
 */
this.fn_close = function(){
	this.close();
}

this.div_search_cal_ST_RQEST_DE_canchange = function(obj:Calendar, e:nexacro.ChangeEventInfo)
{
	if(this.comUtils.isNullEmpty(this.div_search.cal_ED_RQEST_DE.value) == true || 
	   this.comUtils.isNullEmpty(e.postvalue) == true) return true;
	   
	if(e.postvalue > this.div_search.cal_ED_RQEST_DE.value){
		this.alert("시작일자는 종료일자보다 클 수 없습니다.");
		return false;
	}
}

this.div_search_cal_ED_RQEST_DE_canchange = function(obj:Calendar, e:nexacro.ChangeEventInfo)
{
	if(this.comUtils.isNullEmpty(this.div_search.cal_ST_RQEST_DE.value) == true || 
	   this.comUtils.isNullEmpty(e.postvalue) == true) return true;
	   
	if(e.postvalue < this.div_search.cal_ST_RQEST_DE.value){
		this.alert("종료일자는 시작일자보다 작을 수 없습니다.");
		return false;
	}
}

this.div_search_cal_ST_PYMNT_PRARNDE_canchange = function(obj:Calendar, e:nexacro.ChangeEventInfo)
{
	if(this.comUtils.isNullEmpty(this.div_search.cal_ED_PYMNT_PRARNDE.value) == true || 
	   this.comUtils.isNullEmpty(e.postvalue) == true) return true;
	   
	if(e.postvalue > this.div_search.cal_ED_PYMNT_PRARNDE.value){
		this.alert("시작일자는 종료일자보다 클 수 없습니다.");
		return false;
	}
}

this.div_search_cal_ED_PYMNT_PRARNDE_canchange = function(obj:Calendar, e:nexacro.ChangeEventInfo)
{
	if(this.comUtils.isNullEmpty(this.div_search.cal_ST_PYMNT_PRARNDE.value) == true || 
	   this.comUtils.isNullEmpty(e.postvalue) == true) return true;
	   
	if(e.postvalue < this.div_search.cal_ST_PYMNT_PRARNDE.value){
		this.alert("종료일자는 시작일자보다 작을 수 없습니다.");
		return false;
	}
}

/***********************************************************************
* 사용자 정의 함수
************************************************************************/
/*
 * 함수명  	: fn_clearAll_ds
 * 설명 		: 데이터셋의 데이터 삭제
 * params  		: None
 * return Type 	: None
 * 사용법		: 
 */
this.fn_clearAll_ds = function(){
	this.DS_TBCMP_RWMNY_PYMNT.clearData();
}

/**********************************************************************
 * CALL TRANSACTION 영역
 **********************************************************************/
 /*
 * 함수명  	: fn_transaction
 * 설명 		: Transaction 요청 처리 함수
 * params  		: strSvcId : 서비스요청 ID
 * return Type 	: None
 * 사용법		: this.fn_transaction("SELECT");
 */
this.fn_transaction = function(strSvcId)
{
	var bSync = true;

	switch (strSvcId) {	
		case "rwmnyPymntList": //보상금지출결의현황 조회
			var sController   	= "hsco/pms/cmp/tdd/CMP040201/rwmnyPymntList.do";
			var sInDatasets   	= "input1=ds_cond00";
			var sOutDatasets  	= "DS_TBCMP_RWMNY_PYMNT=output1";
			break;

		case "rwmnyPymntList1": //보상금지출결의 완료 건 조회
			var sController   	= "hsco/pms/cmp/tdd/CMP040201/rwmnyPymntList1.do";
			var sInDatasets   	= "input1=ds_cond00";
			var sOutDatasets  	= "DS_TBCMP_RWMNY_PYMNT=output1";
			break;

		case "rwmnyPymntDeU": //보상금 지급예정일 일괄변경
			var sController   	= "hsco/pms/cmp/tdd/CMP040201/rwmnyPymntDeU.do";
			var sInDatasets   	= "input1=DS_TBCMP_RWMNY_PYMNT:U";
			var sOutDatasets  	= "ds_tbaccFnncInsttCode=output1";
			break;
		case "sanctnUpdate": //업무key 변경
			var sController   	= "hsco/pms/cmp/tdd/CMP040200/sanctnUpdate.do";
			var sInDatasets   	= "input1=ds_sanction";
			var sOutDatasets  	= "";
			bSync = false;
			break;
	}

	if(this.fn_validate_tranasaction(strSvcId, sController, sInDatasets, sOutDatasets) == false){
		return;
	}
	
	Ex.core.tran(this, strSvcId, sController, sInDatasets, sOutDatasets, "", null, null, bSync); 
}

/**********************************************************************
 * Transaction Callback 영역
 ***********************************************************************/
 /*
 * 함수명  	: fn_callBack
 * 설명 		: Transaction Callback 처리
 * params  		: strSvcId    : 서비스요청 ID
 *                nErrorCode  : 오류 메시지 코드 ([예] 0 : Success, 그밖의 경우, error)
 *                strErrorMsg : 오류 메시지([예]  success.insert|정상적으로 등록되었습니다.)
 * return Type 	: None
 * 사용법		: 
 */
this.fn_callBack = function (strSvcId, nErrorCode, strErrorMsg)
{
	
	var bSuccess = nErrorCode == 0?true:false;
	
	if(bSuccess) {
		switch (strSvcId) {	
			case "rwmnyPymntList": //보상금지출결의현황 조회
			case "sanctnUpdate": //업무key 변경
				break;

			case "rwmnyPymntDeU": //보상금 지급예정일 일괄변경
				this.fn_callback_message(strSvcId, nErrorCode, strErrorMsg);
				break;
		}
	}
	else {
		this.fn_callback_message(strSvcId, nErrorCode, strErrorMsg);
	}
}

this.btn_allChangeDe_onclick = function(obj:Button,  e:nexacro.ClickEventInfo)
{
	
	var arrOwnerNo = this.fn_checkValue(this.div_WORK.grd_DS_TBCMP_THING_WTNNC, "OWNER_NO");
	
	if(0 == this.DS_TBCMP_RWMNY_PYMNT.rowcount || arrOwnerNo.length == 0) {
		this.alert("선택한 건이 없습니다.");
		return false;
	}

	var pymntPrarnde = this.div_WORK.cal_PYMNT_PRARNDE.value;

	for(var i=0; i<this.DS_TBCMP_RWMNY_PYMNT.rowcount; i++){
		if("1" == this.DS_TBCMP_RWMNY_PYMNT.getColumn(i, "CHK")) {
			this.DS_TBCMP_RWMNY_PYMNT.setColumn(i,"PYMNT_PRARNDE", pymntPrarnde);
		}
	}
	
	this.alert("예정일이 일괄변경되었습니다.");
}

this.div_WORK_btn_expndtrDecsn_onclick = function(obj:Button,  e:nexacro.ClickEventInfo)
{
//결재상태가 전결완료상태일때만 지출결의서 등록가능하도록 한다.
	if(this.DS_TBCMP_RWMNY_PYMNT.getColumn(this.DS_TBCMP_RWMNY_PYMNT.rowposition, "LAST_SANCTN_STTUS") != 'S01'){
		this.alert("결재가 완료되지 않았습니다.");
		return;
	}
	
	var day 	 = this.gfn_today();	// 결의일자
	var pymntDe  = this.DS_TBCMP_RWMNY_PYMNT.getColumn(this.DS_TBCMP_RWMNY_PYMNT.rowposition, "PYMNT_PRARNDE");	// 지급예정일자
	var pymntYr  = pymntDe.substring(0,4);	// 회계년
	var sumry	 = "보상금 청구";
	var nRow     = 0;
	var rqestSum = 0;
	var tmp      = 0;
	

	// 결의세부
	this.ds_expDsnDetail.clearData();
	this.ds_decsnNo.clearData();
	for(var i=0; i<this.DS_TBCMP_RWMNY_PYMNT.rowcount; i++) {
		if("1" == this.DS_TBCMP_RWMNY_PYMNT.getColumn(i, "CHK")) {
			nRow = this.ds_expDsnDetail.addRow();
			this.ds_expDsnDetail.setColumn(nRow, "DECSN_AMOUNT"		, this.DS_TBCMP_RWMNY_PYMNT.getColumn(i, "RQEST_AMOUNT"));	// 결의금액
			this.ds_expDsnDetail.setColumn(nRow, "TAXXPT_AMOUNT"	, "0");									// 면세금액
			this.ds_expDsnDetail.setColumn(nRow, "VAT_AT"			, "0");									// 부가세여부
			this.ds_expDsnDetail.setColumn(nRow, "VAT_DECSN_AMOUNT"	, "0");									// 부가세결의금액
			this.ds_expDsnDetail.setColumn(nRow, "SUPLY_AMOUNT"		, "0");									// 공급가액
			this.ds_expDsnDetail.setColumn(nRow, "VAT"				, "0");									// 부가세
			this.ds_expDsnDetail.setColumn(nRow, "RCPT_DE"			,  pymntDe);							// 영수일자
			this.ds_expDsnDetail.setColumn(nRow, "FNNC_INSTT_CODE"	, this.DS_TBCMP_RWMNY_PYMNT.getColumn(i, "BANK_CODE"));		// 지출은행 (국민은행 초기값 셋팅)
			this.ds_expDsnDetail.setColumn(nRow, "ACNUTNO"			, this.DS_TBCMP_RWMNY_PYMNT.getColumn(i, "ACNUTNO"));
			this.ds_expDsnDetail.setColumn(nRow, "IHDNUM"			, this.DS_TBCMP_RWMNY_PYMNT.getColumn(i, "IHDNUM"));

			tmp = this.DS_TBCMP_RWMNY_PYMNT.getColumn(i, "RQEST_AMOUNT");
			rqestSum = Number(rqestSum) + Number(tmp);

			nRow = this.ds_decsnNo.addRow();
			this.ds_decsnNo.setColumn(nRow, "BSNS_AREA_CODE" , this.DS_TBCMP_RWMNY_PYMNT.getColumn(i, "BSNS_AREA_CODE"));
			this.ds_decsnNo.setColumn(nRow, "OWNER_NO"		 , this.DS_TBCMP_RWMNY_PYMNT.getColumn(i, "OWNER_NO"));
			this.ds_decsnNo.setColumn(nRow, "RQEST_SN"		 , this.DS_TBCMP_RWMNY_PYMNT.getColumn(i, "RQEST_SN"));
		}
	}	
	
	// 결의마스터 셋팅
	this.ds_expDsnMastr.clearData();
	this.ds_expDsnMastr.addRow();
	this.ds_expDsnMastr.setColumn(0, "DECSN_YEAR"	 , pymntYr);				// 회계년월
	this.ds_expDsnMastr.setColumn(0, "ANACT_KND"	 , "03");					// 결의서구분
	this.ds_expDsnMastr.setColumn(0, "DEPT_CODE"	 , this.gfn_getDeptId());	// 부서코드
	this.ds_expDsnMastr.setColumn(0, "DEPT_NM"		 , this.gfn_getDeptName());	// 부서명
	this.ds_expDsnMastr.setColumn(0, "ITNC_DE"		 , day);					// 발의일자
	this.ds_expDsnMastr.setColumn(0, "PYMNT_ITNC_DE" , pymntDe);				// 지급발의일자
	this.ds_expDsnMastr.setColumn(0, "DECSN_AMOUNT"	 , rqestSum);				// 확정금액 -> 결의금액
	this.ds_expDsnMastr.setColumn(0, "SUMRY"	 	 , sumry);					// 적요
	this.ds_expDsnMastr.setColumn(0, "DET_DCSN_DE"   , day);			        // 채무확정일자
	this.ds_expDsnMastr.setColumn(0, "PRMPC_JRNLZPR_RGIST_DE" , day);	        // 원장분개장등기
	this.ds_expDsnMastr.setColumn(0, "EXPNDTR_BUDGET_CNRL_DE" , pymntDe);		// 지출예산통제
	this.ds_expDsnMastr.setColumn(0, "CPTAL_EXPNDTR_ACNTBK_DE", pymntDe);		// 자금지출부등기
	this.ds_expDsnMastr.setColumn(0, "CAUSE_ACTION_DE"        , day  );			// 원인행위일자 2016.09.04	
	
	// 결의마스터상세
	this.ds_expDsnMtrDet.clearData();
	this.ds_expDsnMtrDet.addRow();
	this.ds_expDsnMtrDet.setColumn(0, "TAXXPT_AMOUNT"	, "0");					// 면세금액
	this.ds_expDsnMtrDet.setColumn(0, "VAT_DECSN_AMOUNT", "0");					// 부가세결의금액
	this.ds_expDsnMtrDet.setColumn(0, "SUPLY_AMOUNT"	, "0");					// 공급가액
	this.ds_expDsnMtrDet.setColumn(0, "VAT_AMOUNT"		, "0");					// 부가세금액	
	
	// 지출결의 팝업 호출
	var decsnYear = this.DS_TBCMP_RWMNY_PYMNT.getColumn(this.DS_TBCMP_RWMNY_PYMNT.rowposition, "DECSN_YEAR");
	var decsnNo	  = this.DS_TBCMP_RWMNY_PYMNT.getColumn(this.DS_TBCMP_RWMNY_PYMNT.rowposition, "EXPNDTR_DECSN_NO");
	var param = {
		 arg_0      			: this
		,trgFormId				: "CMP040200"						// 팝업을 호출하는 화면의 ID
		,anactKnd				: "03"								// 결의서구분
		,decsnYear				: decsnYear							// 결의년도
		,decsnNo				: decsnNo							// 결의번호
		,dsExpDsnMastr			: this.ds_expDsnMastr.saveXML()		// 결의마스터(Dataset)
		,dsExpDsnMtrDet 		: this.ds_expDsnMtrDet.saveXML()	// 결의마스터상세(Dataset)
		,dsExpDsnDetail 		: this.ds_expDsnDetail.saveXML()	// 결의세부(Dataset)
		,dsDecsnNo				: this.ds_decsnNo.saveXML()			// 키값정보(Dataset)
	};
	
	this.gfn_popup("expDsnPopup", 902, 719, "지출결의서", param, "mis_acc::ACC020203_P01.xfdl", "fn_PopUpCallback3",true);	
}

/* 지급일자 일괄등록 */
this.div_WORK_Tab00_tabpage2_btn_allChangeDe_onclick = function(obj:Button,  e:nexacro.ClickEventInfo)
{
	var ds = this.DS_TBCMP_RWMNY_PYMNT;
	for(var i = 0 ; i < ds.rowcount ; i++){
		if(ds.getColumn( i  , "CHK") == 1){
			if(ds.getColumn( i , "CMPNSP_NO") != 0){
				ds.setColumn( i , "PYMNT_DE" , ds.getColumn( i , "RCPT_DE"));
				ds.setColumn( i , "RWMNY_PYMNT_SE" , "1");
			}
		}	
	}
}
/* TAB CHAGE  이벤트 */
this.div_WORK_Tab00_onchanged = function(obj:Tab, e:nexacro.TabIndexChangeEventInfo)
{
	if(obj.tabindex == 0){
		this.div_search.cmb_LAST_SANCTN_STTUS.set_enable(true);
	} else {
		this.div_search.cmb_LAST_SANCTN_STTUS.set_enable(false);
	}
	
	this.fn_search();
}

/* TAB2 더블클릭시 지출결의서 호출 */
this.div_WORK_Tab00_tabpage2_grd_DS_TBCMP_THING_WTNNC_oncelldblclick = function(obj:Grid, e:nexacro.GridClickEventInfo)
{
	// 지출결의 팝업 호출
	var decsnYear = this.DS_TBCMP_RWMNY_PYMNT.getColumn(this.DS_TBCMP_RWMNY_PYMNT.rowposition, "DECSN_YEAR");
	var decsnNo	  = this.DS_TBCMP_RWMNY_PYMNT.getColumn(this.DS_TBCMP_RWMNY_PYMNT.rowposition, "EXPNDTR_DECSN_NO");
	
		var args = {
			  arg_0     : this
			, trgFormId	: "CMP040200"	// 팝업을 호출하는 화면의 ID
			, anactKnd	: "03"
			, decsnYear	: decsnYear
			, decsnNo	: decsnNo
		};
		this.gfn_popup("expPopup", 903, 842, "지출결의서", args, "mis_acc::ACC020203_P01.xfdl", "fn_popupCallBack", true);

}
]]></Script>
  </Form>
</FDL>
