<?xml version="1.0" encoding="utf-8"?>
<FDL version="1.5">
  <TypeDefinition url="..\..\..\..\default_typedef.xml"/>
  <Form id="SLS070101" classname="SLS070101" left="0" top="0" width="1059" height="735" titletext="토지기본정보관리" oninit="SLS070101_oninit" onload="SLS070101_onload">
    <Layouts>
      <Layout>
        <!-- [BEGIN] 조회조건 -->
        <Combo id="cmb_payCode" taborder="11" displaynulltext="전체" innerdataset="ds_payCodeList" codecolumn="CODE" datacolumn="ALL_CODE_NM" onitemchanged="fn_payRateComboOnItemChangeHandler" left="663" top="310" width="90" height="21" visible="false"/>
        <Static id="sta_schPrposSe01" taborder="12" text="납부코드" cssclass="sta_WFSA_Label" left="598" top="310" width="64" height="21" visible="false"/>
        <Combo id="cmb_suplySe" taborder="13" displaynulltext="전체" innerdataset="ds_suplySe" codecolumn="CODE" datacolumn="ALL_CODE_NM" onitemchanged="fn_payRateComboOnItemChangeHandler" left="503" top="310" width="90" height="21" visible="false"/>
        <Static id="sta_schPrposSe00" taborder="14" text="공급코드" cssclass="sta_WFSA_Label" left="438" top="310" width="57" height="21" visible="false"/>
        <Combo id="cmb_prposSe" taborder="15" displaynulltext="전체" innerdataset="@ds_prposSe" codecolumn="CODE" datacolumn="ALL_CODE_NM" onitemchanged="fn_payRateComboOnItemChangeHandler" left="339" top="310" width="90" height="21" visible="false"/>
        <Static id="sta_schPrposSe" taborder="16" text="용도코드" cssclass="sta_WFSA_Label" left="274" top="310" width="64" height="21" visible="false"/>
        <Div id="div_search" taborder="0" left="0" top="0" right="28" height="33" cssclass="div_WFSA_Box">
          <Layouts>
            <Layout>
              <Static id="sta_titLadCodeSh" taborder="2" text="토지코드" cssclass="sta_WFSA_Label" left="287" top="5" width="64" height="21" visible="true"/>
              <Static id="sta_titUseAtSh" taborder="3" text="사용여부" cssclass="sta_WFSA_Label" left="15" top="5" width="64" height="21"/>
              <Radio id="rdo_useAt" taborder="1" index="1" innerdataset="@ds_radioSh" codecolumn="CD" datacolumn="CD_NM" direction="vertical" onitemchanged="div_SEARCH_rdo_USE_ENNC_onitemchanged" left="79" top="5" width="184" height="20" visible="true" onitemclick="div_search_rdo_useAt_onitemclick" value="1"/>
              <Combo id="cmb_ladCodeSh" taborder="4" innerdataset="@ds_landCodeSh" codecolumn="LAD_CODE" datacolumn="ALL_LAD_NM" type="filter" onitemchanged="div_search_cmb_ladCodeSh_onitemchanged" left="351" top="5" width="196" height="22" style="background:#ffffffff;border:1 solid #bdbdbdff ;"/>
            </Layout>
          </Layouts>
        </Div>
        <!-- [ END ] 조회조건 -->
        <!-- [BEGIN] 토지코드 목록 -->
        <Static id="sta_titLandList" taborder="4" text="토지목록" cssclass="sta_WF_Title02" left="0" top="40" width="130" height="19"/>
        <Grid id="grd_landList" taborder="1" binddataset="ds_landList" useinputpanel="false" left="0" top="59" width="263" autofittype="col" cellsizingtype="col" bottom="6" onselectchanged="fn_grdOnSelectChangHandler">
          <Formats>
            <Format id="default">
              <Columns>
                <Column size="40"/>
                <Column size="64"/>
                <Column size="159"/>
              </Columns>
              <Rows>
                <Row size="24" band="head"/>
                <Row size="24"/>
              </Rows>
              <Band id="head">
                <Cell text="순번"/>
                <Cell col="1" text="토지코드"/>
                <Cell col="2" text="토지명"/>
              </Band>
              <Band id="body">
                <Cell style="backgroundimage: ;" expr="expr:currow + 1"/>
                <Cell col="1" text="bind:LAD_CODE"/>
                <Cell col="2" style="align:left;" text="bind:LAD_NM"/>
              </Band>
            </Format>
          </Formats>
        </Grid>
        <!-- [ END ] 토지코드 목록 -->
        <!-- [BEGIN] 토지 정보 -->
        <Static id="sta_titLandInfo" taborder="5" text="토지정보" cssclass="sta_WF_Title02" left="273" top="40" width="130" height="19"/>
        <Div id="div_landInfo" taborder="2" left="273" top="59" height="209" right="28">
          <Layouts>
            <Layout>
              <!-- 토지코드/취득가액 -->
              <Static id="sta_baseLadCode" taborder="23" cssclass="sta_WF_Labelbg" left="0" top="0" height="27" width="758"/>
              <Static id="sta_titLadCode" taborder="24" text="토지코드" cssclass="sta_WF_Label" left="0" top="0" width="100" height="27"/>
              <Static id="sta_titAcqsAmount" taborder="25" text="취득가액" cssclass="sta_WF_Label" left="420" top="0" width="100" height="27"/>
              <Edit id="edt_ladCode" taborder="0" left="102" top="3" width="95" height="21" cssclass="edt_WF_Essential" lengthunit="utf8" maxlength="3" autoselect="true"/>
              <Edit id="edt_ladNm" taborder="1" left="199" top="3" width="219" height="21" cssclass="edt_WF_Essential" lengthunit="utf8" maxlength="30" autoselect="true"/>
              <MaskEdit id="msk_acqsAmount" taborder="2" left="522" top="3" width="233" height="21" style="align:right;" mask="#,###" autoselect="true"/>
              <!-- 소재지/용도코드 -->
              <Static id="sta_baseAddrZipLnm" taborder="26" cssclass="sta_WF_Labelbg" left="0" top="26" height="27" width="758"/>
              <Static id="sta_titAddrZipLnm" taborder="33" text="소재지" cssclass="sta_WF_Label" left="0" top="26" width="100" height="27"/>
              <Edit id="edt_zipLnm" taborder="4" left="102" top="29" width="95" height="21" readonly="true" autoselect="false" style="align:left;" maxlength="6"/>
              <Button id="btn_adresLnm" taborder="3" cssclass="btn_WF_Search" left="169" top="29" width="28" height="21" onclick="fn_btnOnClickHandler"/>
              <Edit id="edt_locplcBassAdresLnm" taborder="5" left="199" top="29" width="219" height="21" autoselect="true"/>
              <!-- (지번) -->
              <Static id="sta_baseAddrDetLnm" taborder="32" cssclass="sta_WF_Labelbg" left="0" top="52" height="27" width="758"/>
              <Static id="sta_titAddrDetLnm" taborder="28" text="소재지(지번)" cssclass="sta_WF_Label" left="0" top="26" width="100" height="53"/>
              <Edit id="edt_locplcDetailAdresLnm" taborder="6" left="102" top="55" width="316" height="21" autoselect="true"/>
              <!-- 소재지/사업코드 -->
              <Static id="sta_baseAddrZip" taborder="21" cssclass="sta_WF_Labelbg" left="0" top="78" height="27" width="758" onclick="div_landInfo_sta_baseAddrZip_onclick"/>
              <Static id="sta_titAddrZip" taborder="30" text="소재지" cssclass="sta_WF_Label" left="0" top="78" width="100" height="27"/>
              <Static id="sta_titBsnsSe" taborder="27" text="사업코드" cssclass="sta_WF_Label" left="420" top="26" height="27" width="100"/>
              <Edit id="edt_zip" taborder="8" left="102" top="81" width="95" height="21" readonly="true" autoselect="false" style="align:left;" maxlength="6"/>
              <Button id="btn_adres" taborder="7" cssclass="btn_WF_Search" left="176" top="81" width="21" height="21" onclick="fn_btnOnClickHandler"/>
              <Edit id="edt_locplcBassAdres" taborder="9" left="199" top="81" width="219" height="21" enable="true" autoselect="true"/>
              <Combo id="cmb_bsnsSe" taborder="10" left="607" top="29" width="148" height="21" innerdataset="@ds_bsnsCode" codecolumn="BSNS_CODE" datacolumn="BSNS_NM" onitemchanged="fn_comboOnItemChangeHandler" type="filter" autoselect="true" visible="true" enable="true" readonly="true"/>
              <!-- (도로명)/사업구분 -->
              <Static id="sta_baseAddrDet" taborder="29" cssclass="sta_WF_Labelbg" left="0" top="104" height="27" width="758"/>
              <Static id="sta_titAddrDet" taborder="31" text="소재지(도로명)" cssclass="sta_WF_Label" left="0" top="78" width="100" height="53"/>
              <Edit id="edt_locplcDetailAdres" taborder="11" left="102" top="107" width="316" height="21" enable="true" autoselect="true"/>
              <!-- 시행기간/분양사업 -->
              <Static id="sta_baseOpertnDe" taborder="35" cssclass="sta_WF_Labelbg" left="0" top="130" height="27" width="758"/>
              <Static id="sta_titOpertnDe" taborder="34" text="시행기간" cssclass="sta_WF_Label" left="0" top="130" width="100" height="27"/>
              <Static id="sta_titLttotBsnsCode" taborder="40" text="분양사업" cssclass="sta_WF_Label" left="420" top="130" height="27" width="100"/>
              <Calendar id="cal_opertnBgnde" taborder="12" dateformat="yyyy-MM-dd" left="102" top="133" width="105" height="21" autoselect="true"/>
              <Static id="sta_delmOpertnDe" taborder="39" text="~" left="207" top="135" width="21" height="21" style="align:center;"/>
              <Calendar id="cal_opertnEndde" taborder="13" dateformat="yyyy-MM-dd" left="228" top="133" width="105" height="21" autoselect="true"/>
              <!-- 계약승인고시/임대사업 -->
              <Static id="sta_basePlanConfmNtfcDe" taborder="38" cssclass="sta_WF_Labelbg" left="0" top="156" height="27" width="758"/>
              <Static id="sta_titPlanConfmNtfcDe" taborder="37" text="계약승인고시" cssclass="sta_WF_Label" left="0" top="156" width="100" height="27"/>
              <Static id="sta_titRentBsnsCode" taborder="41" text="임대사업" cssclass="sta_WF_Label" left="420" top="156" height="27" width="100"/>
              <Calendar id="cal_planConfmNtfcDe1" taborder="15" dateformat="yyyy-MM-dd" left="102" top="159" width="105" height="21" autoselect="true"/>
              <Static id="sta_delmPlanConfmNtfcDe" taborder="22" text="~" left="207" top="159" width="21" height="21" style="align:center;"/>
              <Calendar id="cal_planConfmNtfcDe2" taborder="16" dateformat="yyyy-MM-dd" left="228" top="159" width="105" height="21" autoselect="true"/>
              <Combo id="cmb_lttotBsnsCode" taborder="14" innerdataset="@ds_bsnsCode" codecolumn="BSNS_CODE" datacolumn="BSNS_NM" left="607" top="133" height="21" width="148" type="filter" autoselect="true" enable="true" readonly="true" visible="true"/>
              <Combo id="cmb_rentBsnsCode" taborder="17" innerdataset="@ds_bsnsCode" codecolumn="BSNS_CODE" datacolumn="BSNS_NM" left="607" top="159" height="21" width="148" type="filter" autoselect="true" enable="true" readonly="true" visible="true"/>
              <!-- 사용유무/열람여부/홈페이지사용여부 -->
              <Static id="sta_baseUseAt" taborder="42" cssclass="sta_WF_Labelbg" left="0" top="182" height="27" width="758"/>
              <Static id="sta_titUseAt" taborder="36" text="구분" cssclass="sta_WF_Label" left="0" top="182" width="100" height="27"/>
              <CheckBox id="chk_useAt" taborder="18" text="사용여부" left="107" top="185" height="21" truevalue="1" falsevalue="0" width="90"/>
              <CheckBox id="chk_readingAt" taborder="19" text="열람여부" value="0" truevalue="1" falsevalue="0" left="197" top="185" height="21" width="90"/>
              <CheckBox id="chk_hmpgUseAt" taborder="20" text="홈페이지 사용여부" value="0" truevalue="1" falsevalue="0" left="286" top="185" height="21" width="130"/>
              <Edit id="edt_bsnsSe" taborder="43" left="522" top="29" height="21" imemode="alpha" inputmode="upper" inputtype="number,english,alpha" lengthunit="utf8" maxlength="4" style="background:#ffffffff;" tabstop="false" width="77"/>
              <Button id="btn_bsnsSe" taborder="44" left="573" top="28" height="21" cssclass="btn_WF_Search" width="28" onclick="div_landInfo_btn_bsnsSe_onclick"/>
              <Edit id="edt_lttotBsnsCode" taborder="45" tabstop="false" imemode="alpha" inputmode="upper" inputtype="number,english,alpha" lengthunit="utf8" maxlength="4" left="522" top="133" width="77" height="21" style="background:#ffffffff;"/>
              <Button id="btn_lttotBsnsCode" taborder="46" cssclass="btn_WF_Search" left="573" top="132" width="28" height="21" onclick="div_landInfo_btn_lttotBsnsCode_onclick"/>
              <Edit id="edt_rentBsnsCode" taborder="47" tabstop="false" imemode="alpha" inputmode="upper" inputtype="number,english,alpha" lengthunit="utf8" maxlength="4" left="522" top="159" width="77" height="21" style="background:#ffffffff;"/>
              <Button id="btn_rentBsnsCode" taborder="48" cssclass="btn_WF_Search" left="573" top="158" width="28" height="21" onclick="div_landInfo_btn_rentBsnsCode_onclick"/>
              <Edit id="cmb_bsnsSe2" taborder="49" left="607" top="29" height="21" width="148" readonly="true"/>
              <Edit id="cmb_rentBsnsCode2" taborder="50" left="607" top="159" width="148" height="21" readonly="true"/>
              <Edit id="cmb_lttotBsnsCode2" taborder="51" left="607" top="133" width="148" height="21" readonly="true"/>
            </Layout>
          </Layouts>
        </Div>
        <!-- [ END ] 토지 정보 -->
        <!-- [BEGIN] 기타정보 Tab -->
        <Grid id="grd_landPayRateList" taborder="6" binddataset="ds_landPayRateList" autoenter="select" useinputpanel="false" cellsizingtype="col" autofittype="col" left="273" top="302" bottom="6" width="758">
          <Formats>
            <Format id="default">
              <Columns>
                <Column size="30"/>
                <Column size="45"/>
                <Column size="100"/>
                <Column size="141"/>
                <Column size="128"/>
                <Column size="126"/>
                <Column size="163"/>
              </Columns>
              <Rows>
                <Row size="24" band="head"/>
                <Row size="24"/>
              </Rows>
              <Band id="head">
                <Cell displaytype="checkbox" edittype="checkbox"/>
                <Cell col="1" text="순번"/>
                <Cell col="2" text="용도코드"/>
                <Cell col="3" cssclass="Cellgrd_WF_HeadEssential" text="공급코드"/>
                <Cell col="4" cssclass="Cellgrd_WF_HeadEssential" text="납부코드"/>
                <Cell col="5" cssclass="Cellgrd_WF_HeadEssential" text="납부기한일"/>
                <Cell col="6" text="비율"/>
              </Band>
              <Band id="body">
                <Cell displaytype="checkbox" edittype="checkbox" style="backgroundimage: ;" text="bind:CHK"/>
                <Cell col="1" displaytype="text" style="align: ;" expr="expr:currow + 1"/>
                <Cell col="2" displaytype="combo" edittype="expr:dataset.getRowType(currow) == Dataset.ROWTYPE_INSERT ? 'combo' : 'none'" text="bind:PRPOS_SE" combodataset="ds_prposSe00" combocodecol="CODE" combodatacol="CODE_NM" combodisplay="expr:dataset.getRowType(currow) == Dataset.ROWTYPE_INSERT ? 'display' : 'edit'"/>
                <Cell col="3" displaytype="combo" edittype="expr:dataset.getRowType(currow) == Dataset.ROWTYPE_INSERT ? 'combo' : 'none'" text="bind:SUPLY_SE" combodataset="ds_suplySe00" combocodecol="CODE" combodatacol="CODE_NM" combodisplay="expr:dataset.getRowType(currow) == Dataset.ROWTYPE_INSERT ? 'display' : 'edit'"/>
                <Cell col="4" displaytype="combo" edittype="expr:dataset.getRowType(currow) == Dataset.ROWTYPE_INSERT ? 'combo' : 'none'" text="bind:PAY_CODE" combodataset="ds_payCodeList00" combocodecol="CODE" combodatacol="CODE_NM" combodisplay="expr:dataset.getRowType(currow) == Dataset.ROWTYPE_INSERT ? 'display' : 'edit'"/>
                <Cell col="5" displaytype="date" edittype="date" text="bind:PAY_TMLMT" calendardisplay="display" calendardisplaynulltype="none"/>
                <Cell col="6" displaytype="text" edittype="textarea" style="align:right;" text="bind:PAY_RATE" editautoselect="true" editdisplay="display"/>
              </Band>
            </Format>
          </Formats>
        </Grid>
        <Button id="btn_rateDelete" taborder="8" text="행삭제" onclick="fn_btnOnClickHandler" cssclass="btn_WF_Griddel" left="898" top="278" width="64" height="19"/>
        <Button id="btn_rateAdd" taborder="9" text="행추가" onclick="fn_btnOnClickHandler" cssclass="btn_WF_Gridadd" left="831" top="278" width="64" height="19"/>
        <Button id="btn_bsisEstbs" taborder="10" text="일괄등록" onclick="fn_btnOnClickHandler" cssclass="btn_WF_Process" left="762" top="278" width="66" height="19"/>
        <Button id="btn_payInfoSave" taborder="18" text="저장" onclick="btn_payInfoSave_onclick" cssclass="btn_WF_Process" left="965" top="278" width="66" height="19" enable="true"/>
        <Static id="sta_titLandInfo00" taborder="19" text="납부비율" cssclass="sta_WF_Title02" left="273" top="283" width="130" height="19"/>
        <Button id="btn_patgbSave" taborder="22" text="적용" onclick="btn_patgbSave_onclick" cssclass="btn_WF_Process" top="278" width="38" height="20" left="686"/>
        <Edit id="adj_pay_rate" taborder="23" top="278" width="81" height="20" left="604" style="align:right middle;"/>
        <Static id="sta_titLadCodeSh" taborder="24" text="납부기한일" cssclass="sta_WFSA_Label" left="394" top="278" width="74" height="21"/>
        <Static id="sta_titLadCodeSh00" taborder="25" text="비율" cssclass="sta_WFSA_Label" left="568" top="278" width="44" height="21"/>
        <Calendar id="adj_pay_tmlmt" taborder="26" top="278" height="20" width="92" left="468" dateformat="yyyy-MM-dd" value="null"/>
      </Layout>
    </Layouts>
    <Objects>
      <!-- 토지코드(조회조건) -->
      <Dataset id="ds_landCodeSh" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="LAD_CODE" type="STRING" size="256"/>
          <Column id="LAD_NM" type="STRING" size="256"/>
          <Column id="ALL_LAD_NM" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <!-- 사용여부(조회조건 -->
      <Dataset id="ds_radioSh" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="CD" type="STRING" size="256"/>
          <Column id="CD_NM" type="STRING" size="256"/>
        </ColumnInfo>
        <Rows>
          <Row>
            <Col id="CD_NM">전체</Col>
            <Col id="CD"/>
          </Row>
          <Row>
            <Col id="CD">1</Col>
            <Col id="CD_NM">사용</Col>
          </Row>
          <Row>
            <Col id="CD">0</Col>
            <Col id="CD_NM">미사용</Col>
          </Row>
        </Rows>
      </Dataset>
      <!-- 토지용도코드(LAD003) -->
      <Dataset id="ds_prposSe" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="GRP_CODE" type="STRING" size="256"/>
          <Column id="CODE" type="STRING" size="256"/>
          <Column id="CODE_NM" type="STRING" size="256"/>
          <Column id="ALL_CODE_NM" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <!-- 토지공급코드(LAD004) -->
      <Dataset id="ds_suplySe" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="GRP_CODE" type="STRING" size="256"/>
          <Column id="CODE" type="STRING" size="256"/>
          <Column id="CODE_NM" type="STRING" size="256"/>
          <Column id="ALL_CODE_NM" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <!-- 토지납부코드(LAD0A1) -->
      <Dataset id="ds_paySe" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="GRP_CODE" type="STRING" size="256"/>
          <Column id="CODE" type="STRING" size="256"/>
          <Column id="CODE_NM" type="STRING" size="256"/>
          <Column id="ALL_CODE_NM" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <!-- 사업유형(PRJ012) -->
      <Dataset id="ds_bsnsTy" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="GRP_CODE" type="STRING" size="256"/>
          <Column id="CODE" type="STRING" size="256"/>
          <Column id="CODE_NM" type="STRING" size="256"/>
          <Column id="ALL_CODE_NM" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <!-- 토지급지구분(LAD0B5) -->
      <Dataset id="ds_classificationSe" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="GRP_CODE" type="STRING" size="256"/>
          <Column id="CODE" type="STRING" size="256"/>
          <Column id="CODE_NM" type="STRING" size="256"/>
          <Column id="ALL_CODE_NM" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <!-- 사업코드 -->
      <Dataset id="ds_bsnsCode" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false" oncolumnchanged="ds_bsnsCode_oncolumnchanged">
        <ColumnInfo>
          <Column id="BSNS_CODE" type="STRING" size="256"/>
          <Column id="BSNS_NM" type="STRING" size="256"/>
          <Column id="ALL_BSNS_NM" type="STRING" size="256"/>
          <Column id="BSNS_TY" type="STRING" size="256"/>
          <Column id="BSNS_TY_NM" type="STRING" size="256"/>
          <Column id="BSNS_BEGIN_YM" type="STRING" size="256"/>
          <Column id="BSNS_END_YM" type="STRING" size="256"/>
          <Column id="RM" type="STRING" size="256"/>
          <Column id="CL_SE" type="STRING" size="256"/>
          <Column id="SLE_SE" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <!-- 토지목록 -->
      <Dataset id="ds_landList" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false" canrowposchange="fn_dsCanRowPosChangeHandler">
        <ColumnInfo>
          <Column id="LAD_CODE" type="STRING" size="256"/>
          <Column id="LAD_NM" type="STRING" size="256"/>
          <Column id="ACQS_AMOUNT" type="STRING" size="256"/>
          <Column id="BSNS_CODE" type="STRING" size="256"/>
          <Column id="BSNS_NM" type="STRING" size="256"/>
          <Column id="LOCPLC_ZIP" type="STRING" size="256"/>
          <Column id="LOCPLC_BASS_ADRES" type="STRING" size="256"/>
          <Column id="OPERTN_BGNDE" type="STRING" size="256"/>
          <Column id="OPERTN_ENDDE" type="STRING" size="256"/>
          <Column id="PLAN_CONFM_NTFC_DE_1" type="STRING" size="256"/>
          <Column id="PLAN_CONFM_NTFC_DE_2" type="STRING" size="256"/>
          <Column id="LTTOT_BSNS_NM" type="STRING" size="256"/>
          <Column id="LTTOT_BSNS_CODE" type="STRING" size="256"/>
          <Column id="RENT_BSNS_NM" type="STRING" size="256"/>
          <Column id="RENT_BSNS_CODE" type="STRING" size="256"/>
          <Column id="PRPOS_CODE" type="STRING" size="256"/>
          <Column id="READNG_AT" type="STRING" size="256"/>
          <Column id="HMPG_USE_AT" type="STRING" size="256"/>
          <Column id="BSNS_TY" type="STRING" size="256"/>
          <Column id="LOCPLC_DETAIL_ADRES" type="STRING" size="256"/>
          <Column id="LOCPLC_ZIP_LNM" type="STRING" size="256"/>
          <Column id="LOCPLC_BASS_ADRES_LNM" type="STRING" size="256"/>
          <Column id="LOCPLC_DETAIL_ADRES_LNM" type="STRING" size="256"/>
          <Column id="USE_AT" type="STRING" size="256"/>
          <Column id="REGISTER_ID" type="STRING" size="256"/>
          <Column id="REGIST_DT" type="STRING" size="256"/>
          <Column id="UPDUSR_ID" type="STRING" size="256"/>
          <Column id="UPDT_DT" type="STRING" size="256"/>
        </ColumnInfo>
        <Rows/>
      </Dataset>
      <!-- 납부비율 목록 -->
      <Dataset id="ds_landPayRateList" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="CHK" type="STRING" size="256"/>
          <Column id="LAD_CODE" type="STRING" size="256"/>
          <Column id="PRPOS_SE" type="STRING" size="256"/>
          <Column id="SUPLY_SE" type="STRING" size="256"/>
          <Column id="PAY_CODE" type="STRING" size="256"/>
          <Column id="PAY_TMLMT" type="STRING" size="256"/>
          <Column id="PAY_RATE" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <!-- 급지등록 목록 -->
      <Dataset id="ds_landClUntpcList" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="CHK" type="STRING" size="256"/>
          <Column id="LAD_CODE" type="STRING" size="256"/>
          <Column id="CLASSIFICATION_SE" type="STRING" size="256"/>
          <Column id="CLASSIFICATION_UNTPC" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <!-- 조회조건(토지목록) -->
      <Dataset id="ds_cond00" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="USE_AT" type="STRING" size="256"/>
        </ColumnInfo>
        <Rows>
          <Row/>
        </Rows>
      </Dataset>
      <!-- 조회조건(선택토지) -->
      <Dataset id="ds_cond01" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="LAD_CODE" type="STRING" size="256"/>
          <Column id="PRPOS_SE" type="STRING" size="256"/>
          <Column id="SUPLY_SE" type="STRING" size="256"/>
          <Column id="PAY_CODE" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <!-- 입력값확인 -->
      <Dataset id="ds_validation" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="compId" type="STRING" size="256"/>
          <Column id="colId" type="STRING" size="256"/>
          <Column id="PK" type="STRING" size="256"/>
          <Column id="notNull" type="STRING" size="256"/>
          <Column id="type" type="STRING" size="256"/>
          <Column id="nlength" type="STRING" size="256"/>
          <Column id="from" type="STRING" size="256"/>
          <Column id="to" type="STRING" size="256"/>
          <Column id="lengthChkGb" type="STRING" size="256"/>
          <Column id="msgId" type="STRING" size="256"/>
          <Column id="expr" type="STRING" size="256"/>
          <Column id="func" type="STRING" size="256"/>
        </ColumnInfo>
        <Rows>
          <!-- 토지정보 입력확인 -->
          <Row>
            <Col id="compId">ds_landList</Col>
            <Col id="colId">LAD_CODE</Col>
            <Col id="notNull">Y</Col>
            <Col id="msgId">토지코드</Col>
            <Col id="PK">N</Col>
          </Row>
          <Row>
            <Col id="compId">ds_landList</Col>
            <Col id="colId">LAD_NM</Col>
            <Col id="notNull">Y</Col>
            <Col id="msgId">토지명</Col>
          </Row>
          <Row>
            <Col id="compId">ds_landList</Col>
            <Col id="colId">OPERTN_BGNDE</Col>
            <Col id="notNull">N</Col>
            <Col id="from"/>
            <Col id="to">OPERTN_ENDDE</Col>
            <Col id="msgId">시행기간</Col>
          </Row>
          <Row>
            <Col id="compId">ds_landList</Col>
            <Col id="colId">PLAN_CONFM_NTFC_DE_1</Col>
            <Col id="notNull">N</Col>
            <Col id="from"/>
            <Col id="to">PLAN_CONFM_NTFC_DE_2</Col>
            <Col id="msgId">계약승인고시</Col>
          </Row>
          <!-- 납부비율 입력 확인 -->
          <Row>
            <Col id="compId">ds_landPayRateList</Col>
            <Col id="colId">PRPOS_SE</Col>
            <Col id="notNull">Y</Col>
            <Col id="msgId">용도구분</Col>
            <Col id="PK">Y</Col>
          </Row>
          <Row>
            <Col id="compId">ds_landPayRateList</Col>
            <Col id="colId">SUPLY_SE</Col>
            <Col id="notNull">Y</Col>
            <Col id="msgId">공급구분</Col>
            <Col id="PK">Y</Col>
          </Row>
          <Row>
            <Col id="colId">PAY_TMLMT</Col>
            <Col id="compId">ds_landPayRateList</Col>
            <Col id="notNull">N</Col>
            <Col id="msgId">납부기한일</Col>
            <Col id="PK">N</Col>
          </Row>
          <Row>
            <Col id="compId">ds_landPayRateList</Col>
            <Col id="colId">PAY_CODE</Col>
            <Col id="notNull">Y</Col>
            <Col id="msgId">납부코드</Col>
            <Col id="PK">Y</Col>
          </Row>
          <!-- 급지구분 입력 확인 -->
          <Row>
            <Col id="compId">ds_ladClUntpcList</Col>
            <Col id="colId">CLASSIFICATION_SE</Col>
            <Col id="notNull">Y</Col>
            <Col id="msgId">급지구분</Col>
            <Col id="PK">Y</Col>
          </Row>
          <Row>
            <Col id="compId">ds_ladClUntpcList</Col>
            <Col id="colId">CLASSIFICATION_UNTPC</Col>
            <Col id="notNull">Y</Col>
            <Col id="msgId">급지단가</Col>
          </Row>
        </Rows>
      </Dataset>
      <Dataset id="ds_landPrposRateList" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="CHK" type="STRING" size="256"/>
          <Column id="LAD_CODE" type="STRING" size="256"/>
          <Column id="PRPOS_SE" type="STRING" size="256"/>
          <Column id="SUPLY_SE" type="STRING" size="256"/>
          <Column id="PAY_CODE" type="STRING" size="256"/>
          <Column id="PAY_TMLMT" type="STRING" size="256"/>
          <Column id="PAY_RATE" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_landSuplyRateList" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="CHK" type="STRING" size="256"/>
          <Column id="LAD_CODE" type="STRING" size="256"/>
          <Column id="PRPOS_SE" type="STRING" size="256"/>
          <Column id="SUPLY_SE" type="STRING" size="256"/>
          <Column id="PAY_CODE" type="STRING" size="256"/>
          <Column id="PAY_TMLMT" type="STRING" size="256"/>
          <Column id="PAY_RATE" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_payCode" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="GRP_CODE" type="STRING" size="256"/>
          <Column id="CODE" type="STRING" size="256"/>
          <Column id="CODE_NM" type="STRING" size="256"/>
          <Column id="ALL_CODE_NM" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_tmpPayCodeList" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="GRP_CODE" type="STRING" size="256"/>
          <Column id="CODE" type="STRING" size="256"/>
          <Column id="CODE_NM" type="STRING" size="256"/>
          <Column id="ALL_CODE_NM" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_payCodeList" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="GRP_CODE" type="STRING" size="256"/>
          <Column id="CODE" type="STRING" size="256"/>
          <Column id="CODE_NM" type="STRING" size="256"/>
          <Column id="ALL_CODE_NM" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_payCodeList00" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="GRP_CODE" type="STRING" size="256"/>
          <Column id="CODE" type="STRING" size="256"/>
          <Column id="CODE_NM" type="STRING" size="256"/>
          <Column id="ALL_CODE_NM" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_prposSe00" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="GRP_CODE" type="STRING" size="256"/>
          <Column id="CODE" type="STRING" size="256"/>
          <Column id="CODE_NM" type="STRING" size="256"/>
          <Column id="ALL_CODE_NM" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_suplySe00" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="GRP_CODE" type="STRING" size="256"/>
          <Column id="CODE" type="STRING" size="256"/>
          <Column id="CODE_NM" type="STRING" size="256"/>
          <Column id="ALL_CODE_NM" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_bsnsType" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="CODE" type="STRING" size="256"/>
          <Column id="CODE_NM" type="STRING" size="256"/>
          <Column id="FULL_CODE_NM" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_payAdjustGb">
        <ColumnInfo>
          <Column id="NAME" type="STRING" size="256"/>
          <Column id="CODE" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
    </Objects>
    <Bind>
      <BindItem id="item0" compid="div_search.cmb_ladCodeSh" propid="value" datasetid="ds_cond00" columnid="LAD_CODE"/>
      <BindItem id="item1" compid="div_search.rdo_useAt" propid="value" datasetid="ds_cond00" columnid="USE_AT"/>
      <BindItem id="item2" compid="div_landInfo.edt_ladCode" propid="value" datasetid="ds_landList" columnid="LAD_CODE"/>
      <BindItem id="item3" compid="div_landInfo.edt_ladNm" propid="value" datasetid="ds_landList" columnid="LAD_NM"/>
      <BindItem id="item4" compid="div_landInfo.cmb_bsnsSe" propid="value" datasetid="ds_landList" columnid="BSNS_CODE"/>
      <BindItem id="item5" compid="div_landInfo.edt_zipLnm" propid="value" datasetid="ds_landList" columnid="LOCPLC_ZIP_LNM"/>
      <BindItem id="item6" compid="div_landInfo.edt_locplcBassAdresLnm" propid="value" datasetid="ds_landList" columnid="LOCPLC_BASS_ADRES_LNM"/>
      <BindItem id="item7" compid="div_landInfo.edt_locplcDetailAdresLnm" propid="value" datasetid="ds_landList" columnid="LOCPLC_DETAIL_ADRES_LNM"/>
      <BindItem id="item8" compid="div_landInfo.edt_zip" propid="value" datasetid="ds_landList" columnid="LOCPLC_ZIP"/>
      <BindItem id="item9" compid="div_landInfo.edt_locplcBassAdres" propid="value" datasetid="ds_landList" columnid="LOCPLC_BASS_ADRES"/>
      <BindItem id="item10" compid="div_landInfo.edt_locplcDetailAdres" propid="value" datasetid="ds_landList" columnid="LOCPLC_DETAIL_ADRES"/>
      <BindItem id="item11" compid="div_landInfo.cal_opertnBgnde" propid="value" datasetid="ds_landList" columnid="OPERTN_BGNDE"/>
      <BindItem id="item12" compid="div_landInfo.cal_opertnEndde" propid="value" datasetid="ds_landList" columnid="OPERTN_ENDDE"/>
      <BindItem id="item13" compid="div_landInfo.cal_planConfmNtfcDe1" propid="value" datasetid="ds_landList" columnid="PLAN_CONFM_NTFC_DE_1"/>
      <BindItem id="item14" compid="div_landInfo.cal_planConfmNtfcDe2" propid="value" datasetid="ds_landList" columnid="PLAN_CONFM_NTFC_DE_2"/>
      <BindItem id="item16" compid="div_landInfo.msk_acqsAmount" propid="value" datasetid="ds_landList" columnid="ACQS_AMOUNT"/>
      <BindItem id="item18" compid="div_landInfo.cmb_lttotBsnsCode" propid="value" datasetid="ds_landList" columnid="LTTOT_BSNS_CODE"/>
      <BindItem id="item19" compid="div_landInfo.cmb_rentBsnsCode" propid="value" datasetid="ds_landList" columnid="RENT_BSNS_CODE"/>
      <BindItem id="item20" compid="div_landInfo.chk_useAt" propid="value" datasetid="ds_landList" columnid="USE_AT"/>
      <BindItem id="item21" compid="div_landInfo.chk_readingAt" propid="value" datasetid="ds_landList" columnid="READNG_AT"/>
      <BindItem id="item22" compid="div_landInfo.chk_hmpgUseAt" propid="value" datasetid="ds_landList" columnid="HMPG_USE_AT"/>
      <BindItem id="item24" compid="div_landInfo.edt_bsnsSe" propid="value" datasetid="ds_landList" columnid="BSNS_CODE"/>
      <BindItem id="item25" compid="div_landInfo.edt_lttotBsnsCode" propid="value" datasetid="ds_landList" columnid="LTTOT_BSNS_CODE"/>
      <BindItem id="item26" compid="div_landInfo.edt_rentBsnsCode" propid="value" datasetid="ds_landList" columnid="RENT_BSNS_CODE"/>
      <BindItem id="item27" compid="div_landInfo.cmb_bsnsSe2" propid="value" datasetid="ds_landList" columnid="BSNS_NM"/>
      <BindItem id="item28" compid="div_landInfo.cmb_rentBsnsCode2" propid="value" datasetid="ds_landList" columnid="RENT_BSNS_NM"/>
      <BindItem id="item29" compid="div_landInfo.cmb_lttotBsnsCode2" propid="value" datasetid="ds_landList" columnid="LTTOT_BSNS_NM"/>
      <BindItem id="item23" compid="cmb_payCode" propid="value" datasetid="ds_cond00" columnid="PRPOS_SE"/>
      <BindItem id="item17" compid="cmb_suplySe" propid="value" datasetid="ds_cond00" columnid="PRPOS_SE"/>
      <BindItem id="item15" compid="cmb_prposSe" propid="value" datasetid="ds_cond00" columnid="PRPOS_SE"/>
    </Bind>
    <InitValue/>
    <Script type="xscript5.0"><![CDATA[/***********************************************************************
 * 화면ID   : SLS070101
 * 화면명   : 토지기본정보관리
 * 화면설명 : 토지기본정를 관리한다.
 * 작성일   : 2015.09.16
 * 작성자   : 최승락
 * 수정이력 : 
 ***********************************************************************
 *     수정일     수정자   내용
 ***********************************************************************
 *    2015.00.00   홍길동   fn_xxx() 보완 수정
 ***********************************************************************
 */

/***********************************************************************
 * Script Include 
 ***********************************************************************/
// 시스템 공통 라이브러리 Include
include "pms_lib::pmsUtilInclude.xjs";

/***********************************************************************
 * 화면 변수 선언부 
 ***********************************************************************/
// 화면 전역에서 사용할 Form 변수를 선언한다.
this.DEFAULT_DATE = null;			// 기본일자(현재일)

//this.SELECTED_LAD_CODE = null;		// 선택 토지코드
//this.SELECTED_LAD_NM = null;		// 선택 토지명

this.RELOAD_LAND_LIST = false;			// 토지정보 리로드 여부

this.SELECTED_LAD_INFO = null;		// 선택 토지정보
this.AFTER_LAD_INDEX = -1;			// 후 선택 토지 정보 Index
this.AFTER_LAD_INFO = null;			// 후 선택 토지 정보

// 조회전 변경데이터 저장처리 여부
// 조회전 처리로 구현 되었으나, 공통적으로 저장하지 않아 구분값으로 처리
this.CHANG_DATA_BEFORE_SAVE = false;


/***********************************************************************
 * onInit / onLoad 영역
 ***********************************************************************/
this.SLS070101_oninit = function(obj:Form, e:nexacro.InitEventInfo)
{
	this.fn_init();
	//div_search.rdo_useAt.set_value(1);
	//this.fn_init_form();		// Form 초기화 - fn_init에 포함
	this.fn_init_dataset();		// DataSet 초기화	
}

this.SLS070101_onload = function(obj:Form, e:nexacro.LoadEventInfo)
{
	// 상수 값 설정
	this.DEFAULT_DATE = this.gfn_today();
	
	this.fn_setDefaultInfo();	// 기본화면 정보 설정
	
	this.fn_loadCombo();		// Combo에 사용되는 Dataset Load
	//this.ds_cond00.addRow(); 2016.06.16
}

/***********************************************************************
 * Form/Dataset 오브젝트 초기화
 ***********************************************************************/
/*
 * 함수명  	    : initForm
 * 설명 		: Form을 초기화한다.
 * params  		: None
 * return Type 	: None
 * 사용법		: this.initForm();
 */
this.fn_init_form = function()
{
	// 시스템 공통으로 Form을 Initialize 한다.
	this.gfn_initForm(this);
}
 
/*
 * 함수명  	: initDataset
 * 설명 		: Dataset을 초기화한다.
 *                주로, 조건 Dataset들(ds_cond, ds_cond_00, ds_cond_01, ...) 을 초기화한다.
 * params  		: None
 * return Type 	: None
 * 사용법		: this.initDataset();
 */
this.fn_init_dataset = function()
{
	//조회, 종료시에 수정여부 체크할 데이터셋 지정
	this.checkDs.push(this.ds_landClUntpcList, this.ds_landPayRateList, this.ds_landList);	// 급지등록 목록, 납부금액이율 목록, 토지목록

	this.gfn_initCondDs(this, this.div_search);	// 조회조건에 사용되는 Dataset 초기화
}

/*
 * 함수명  	: fn_loadCombo
 * 설명 		: 화면의 Combo 에 데이터를 불러온다.
 * params  		: None
 * return Type 	: None
 * 사용법		: this.fn_loadCombo();
 */
this.fn_loadCombo = function()
{
/*	// 공통코드 목록 조회
	var comCodeParam = [
 		  {OUT_PUT:"ds_prposSe", GRP_CODE:"LAD003", USE_AT:"1"} 			// 토지용도코드
 		, {OUT_PUT:"ds_suplySe", GRP_CODE:"LAD004", USE_AT:"1"} 			// 토지공급코드
 		, {OUT_PUT:"ds_paySe",   GRP_CODE:"LAD0A1", USE_AT:"1"} 			// 토지납부코드
 		, {OUT_PUT:"ds_payCode",   GRP_CODE:"LAD0A1", USE_AT:"1"} 			// 토지납부코드
 		, {OUT_PUT:"ds_bsnsTy",  GRP_CODE:"PRJ012", USE_AT:"1"} 			// 사업유형
 		, {OUT_PUT:"ds_classificationSe", GRP_CODE:"LAD0B5", USE_AT:"1"} 	// 토지급지구분
 	];
 	
 	this.pmsUtil.getCommonCode("selectCommonCode", comCodeParam);
*/
 		var comboParams = [
			["ds_prposSe", "LAD003", "", "전체"],
			["ds_suplySe", "LAD004", "", "전체"],
			["ds_paySe", "LAD0A1", "", "전체"],
			["ds_payCode", "LAD0A1", "", "전체"],
			["ds_bsnsTy", "PRJ012", "", ""],
			["ds_classificationSe", "LAD0B5", "", ""]
		];
	this.gfn_comboLoad(comboParams, this.fn_callBackAfter);
	
	
	// 토지코드 목록 조회
	var paramMap = {};	
	paramMap["USE_AT"] = "";
	this.pmsUtil.getLadCodeList(paramMap, "ds_landCodeSh",  "fn_callbackAfter2");		// 조회조건 토지코드 2016.06.16
	this.pmsUtil.getBsnsCodeList(paramMap, "ds_bsnsCode");		// 사업코드 목록

	//2016.06.16
	this.fn_search();
	
}

this.fn_callBackAfter = function (){
	this.fn_setPayListByBaseCode();

}

this.fn_callbackAfter2 = function(){
	//this.ds_landCodeSh.insertRow(0);
	this.ds_landCodeSh.setColumn(0, "ALL_LAD_NM", "전체");
	this.div_search.cmb_ladCodeSh.set_index(0);	
}
/***********************************************************************
 * Transaction 관련 이벤트 핸들러 
 **********************************************************************/
/*
 * 함수명  	    : fn_search
 * 설명 		: 토지목록 조회 조회 이벤트 처리
 * params  		: None
 * return Type 	: None
 * 사용법		: this.fn_search();
 */
this.fn_search = function(){	
	this.fn_searchLandList(false);		// 등록 토지목록을 조회한다.
}

/*
 * 함수명  	: fn_insert
 * 설명 		: 신규 버튼 이벤트 처리(행추가)
 * params  		: Non
 * return Type 	: None
 * 사용법		: this.fn_insert();
 */
this.fn_insert = function(){
	this.fn_addGridRow(this.grd_landList, "LAD");	// 신규 토지정보 행 추가	
	
}

/*
 * 함수명  	: fn_save
 * 설명 		: 토지정보 저장 이벤트 처리
 *                주로, 조건 Dataset들(ds_cond, ds_cond_00, ds_cond_01, ...) 을 초기화한다.
 * params  		: None
 * return Type 	: None
 * 사용법		: this.fn_save();
 */
this.fn_save = function(){
	this.fn_saveLandInfo();		// 입력 토지정보 저장처리
}

/*
 * 함수명  	: fn_delete
 * 설명 		: 삭제 버튼 이벤트 처리 - 선택 행 정보 삭제처리
 * params  		: Non
 * return Type 	: None
 * 사용법		: this.fn_delete();
 */
this.fn_delete = function(){
	this.fn_deleteLandInfo();	// 토지 상세정보 삭제
}


/*--------------------------------------------------------------------
 * [ END ] 기본 버튼 처리
 --------------------------------------------------------------------*/

/**********************************************************************
 * CALL TRANSACTION 영역
 **********************************************************************/ 

/*
 * 함수명  	: fn_searchLandList
 * 설명 		: 토지목록 조회 처리 함수
 * params  		: reload : 리로드 여부
 * return Type 	: None
 * 사용법		: this.fn_searchLandList(BOOLEAN);
 */
this.fn_searchLandList = function(reload){

	// 검색영역 Validation 체크
	if(!this.gfn_checkValidation(this.div_search, this.ds_validation)) {
		return;
	}

	// 선택 상세정보 초기화 - 수정시 이전 선택값 선택을 위해 구분
	if(reload){
		// TODO		
	}else{
	
		this.SELECTED_LAD_INFO = null;
		
		// 저장후 최종 선택 정보 선택을 위한 처리
		this.AFTER_LAD_INDEX = -1;			// 후 선택 토지정보 Index
		this.AFTER_LAD_INFO = null;			// 후 선택 토지정보
		
		// 탭 선택을 변경 - 초기화(0번째 선택)
		//this.fn_setTabPageSttus(true);
	}
	
	this.RELOAD_LAND_LIST = reload;			// 리로드 여부 설정

	this.fn_setDetailView(false);			// 상세정보영역 설정

	// Clear Datasets
	this.pmsUtil.clearDataSet([this.ds_landClUntpcList, this.ds_landPayRateList, this.ds_landList]);

	// BLT값 계산
	//var schMap = this.pmsUtil.getDatasetItem(this.ds_cond00, 0);
	//var bltInfoMap = this.pmsUtil.getBltSumInfo(schMap);				// 블록,로트,롯트구분을을 합산하여 검색조건을 만든다.
	
	// BLT 값 조회조건 반영
	//this.pmsUtil.putMapToDataset(this.ds_cond00, bltInfoMap, 0);

	// 토지목록조회
	this.fn_transaction("selectLandList");
}

/*
 * 함수명  	: selectLandEtcList
 * 설명 		: 선택 토지의 기타정보(토지납부비율, 토지급지단가)목록 조회
 * params  		: oGrid : 선택 토지목록 그리드
 * return Type 	: None
 * 사용법		: this.selectLandEtcList(GRID);
 */
this.fn_selectLandEtcList = function(oGrid){

	var selRowItem = this.pmsUtil.getGridSelectedItem(oGrid);
	this.SELECTED_LAD_INFO = selRowItem;							// 선택 토지상세정보
	
	var rowType = selRowItem["DS_ROW_TYPE"];
	
	// Clear DataSet - 토지급지단가 목록, 토지납부비율 목록 
	this.pmsUtil.clearDataSet([this.ds_landClUntpcList, this.ds_landPayRateList]);
	
	// 추가된 Row일 경우 return;
	if(rowType == Dataset.ROWTYPE_INSERT){
		// TODO
	}else{
	
		// 조회용 정보 설정
		this.pmsUtil.putMapToDataset(this.ds_cond01, selRowItem, 0);	// 토지급지단가 목록, 토지납부비율 목록 조회 용
		
		this.fn_transaction("selectLandEtcList");
	}
}

/*
 * 함수명  	: fn_saveLandInfo
 * 설명 		: 토지정보 저장 처리
 * params  		: None
 * return Type 	: None
 * 사용법		: this.fn_saveLandInfo();
 */
this.fn_saveLandInfo= function(){

	// 토지정보 수정 확인
	var isLandUpdated = this.comUtils.isDatasetUpdated(this.ds_landList);
	
	// 납부금액비율정보 수정 확인
	var isPayUpdated = this.comUtils.isDatasetUpdated(this.ds_landPayRateList);
	
	// 급지정보 수정 확인
	var isClassUpdated = this.comUtils.isDatasetUpdated(this.ds_landClUntpcList);
	

	// 수정내역이 있을 경우 입력값 확인
	
	// 급지정보
	if(isClassUpdated){
		if(!this.gfn_checkValidation(this.ds_landClUntpcList, this.ds_validation)){
			return;
		}
	}
	
	// 납부금액비율정보
	if(isPayUpdated){
		if(!this.gfn_checkValidation(this.ds_landPayRateList, this.ds_validation)){
			return;
		}
	}
	
	// 토지정보
	if(isLandUpdated){
		if(!this.gfn_checkValidation(this.ds_landList, this.ds_validation)) {
			return;
		}
	}
	
	var tranId = null;			// 요청 Transaction ID
	
	/*
	// 토지정보 수정내역이 있을 경우 - 전체 수정 Method 호출
	if(isLandUpdated){
		tranId = "saveLandList";
	}else{
		// 상세(납부금액비율, 급지정보)수정 내역이 있을 경우 - 개별 Method호출
		if(isPayUpdated || isClassUpdated){
			tranId = "saveLandEtcList";
		}
	}
	*/
	if(isLandUpdated || isPayUpdated || isClassUpdated){
		tranId = "saveLandList";
	}
	
	if(tranId == null){
		this.alert("comm.데이터.변경.없음");
		return;
	}
	
	if(!this.confirm("confirm.저장.여부")){
		return;
	}
	
	// 저장 후 선택 행 정보 설정
	this.AFTER_LAD_INDEX = this.ds_landList.rowposition;						// 선택 행
	this.AFTER_LAD_INFO = this.pmsUtil.getGridSelectedItem(this.grd_landList);	// 선택 행 토지정보

	this.fn_transaction(tranId);
}

/*
 * 함수명  	: fn_deleteLandInfo
 * 설명 		: 토지정보 삭제 처리
 * params  		: None
 * return Type 	: None
 * 사용법		: this.fn_deleteLandInfo();
 */
this.fn_deleteLandInfo = function(){

	var selItem = this.pmsUtil.getGridSelectedItem(this.grd_landList);
	var rowType = selItem["DS_ROW_TYPE"];
	var rowIdx = this.ds_landList.rowposition; //selItem["DS_ROW"];
	
	var confirmMsgId = "";
	var confirmMsg = "";
	var ladInfo = "[" + selItem['LAD_CODE'] + "] "+ selItem['LAD_NM'];
	confirmMsgId = "comm.행위여부";
	confirmMsg = "선택한 토지정보(" + ladInfo + ")를 삭제합니다.\n진행";
	
	if(this.confirm(confirmMsgId, confirmMsg)){
		if(rowType == Dataset.ROWTYPE_INSERT){
			this.ds_landList.deleteRow(rowIdx);
		}else{
			this.fn_transaction("deleteLandInfo");		// 선택 토지정보 삭제
		}
	}
}

/*
 * 함수명   	: fn_transaction
 * 설명 		: Transaction 요청 처리 함수
 * params  		: strSvcId : 서비스요청 ID
 * return Type 	: None
 * 사용법		: this.fn_transaction("SELECT");
 */
this.fn_transaction = function(strSvcId)
{
	var bSync = true;
	
	var sController = null;
	var oInDatasets = null;
	var sOutDatasets = null;
	var reqParam = null;
	switch (strSvcId) {
	
		// 토지기본정보 조회
		case "selectLandList" :
			sController   	= "hsco/pms/sls/lad/std/SLS070101/selectLandList.do";
			oInDatasets   	= "input1=ds_cond00";
			sOutDatasets  	= "ds_landList=landList";
			break;
		
		// 토지기본정보에 따른 기타정보 목록(토지납부비율, 토지급지단가) 조회
		case "selectLandEtcList" :
			sController   	= "hsco/pms/sls/lad/std/SLS070101/selectLandEtcList.do";
			oInDatasets   	= "input1=ds_cond01";
			sOutDatasets  	= "ds_landPayRateList=payRateList ds_landClUntpcList=clUntpcList";
			break;
		
		// 토지기본정보 저장(전체저장)
		case "saveLandList" :
			sController   	= "hsco/pms/sls/lad/std/SLS070101/saveLandList.do";
			oInDatasets   	= "input1=ds_landList:U input2=ds_landPayRateList:U input3=ds_landClUntpcList:U";
			sOutDatasets  	= "";
			break;
			
		// 토지기본정보 삭제(전체 삭제)
		case "deleteLandInfo" :
			sController   	= "hsco/pms/sls/lad/std/SLS070101/deleteLandInfo.do";
			oInDatasets   	= "input1=ds_cond01";
			sOutDatasets  	= "";
			break;
			
		// 토지 납부정보 저장
		case "saveLandPayList" :
			sController   	= "/hsco/pms/sls/lad/std/SLS070101/saveLandPayRateList.do";
			oInDatasets   	= "input1=ds_landPayRateList:U";
			sOutDatasets  	= "";
			break;
		
		default :
			break;
	}

	if(sController == null) return;
	var sInDataType = typeof(oInDatasets);

	if(sInDataType == "object"){
		this.pmsUtil.pmsComTran(strSvcId, sController, oInDatasets, sOutDatasets, null, null, false);
	}else{
		Ex.core.tran(this, strSvcId, sController, oInDatasets, sOutDatasets, null, null, null, bSync);
	}
}

/**********************************************************************
 * Transaction Callback 영역
 **********************************************************************/ 

/*
 * 함수명  	: fn_callBack
 * 설명 		: Transaction Callback 처리
 * params  		: strSvcId    : 서비스요청 ID
 *                nErrorCode  : 오류 메시지 코드 ([예] 0 : Success, 그밖의 경우, error)
 *                strErrorMsg : 오류 메시지([예]  success.insert|정상적으로 등록되었습니다.)
 * return Type 	: None
 * 사용법		: 
 */
this.fn_callBack = function (strSvcId, nErrorCode, strErrorMsg)
{		
	var bSuccess = nErrorCode == 0 ? true : false;
	if (bSuccess){
		
		var comboOption = null;
		var targetCombo = null;
		switch(strSvcId){
		
			// 공통코드 목록 조회
			case "selectCommonCode" :			// 공통코드 목록 조회
				// TODO
				this.fn_setPayListByBaseCode(); // 토지코드 목록 
				break;
		
			// 토지코드 목록 조회
			case "landCodeSh" :
				targetCombo = this.div_search.cmb_ladCodeSh;
				comboOption = {
					type: this.pmsUtil.PROMPT_ALL
				}
				this.pmsUtil.setComboPrompt(targetCombo, comboOption);
				this.ds_landCodeSh.deleteRow(0);
				break;
				
			// 사업코드 조회
			case "bsnsCode" :
			
				targetCombo = this.div_landInfo.cmb_bsnsSe;
				comboOption = {
					type: this.pmsUtil.PROMPT_SELECT
				}
				this.pmsUtil.setComboPrompt(targetCombo, comboOption);
			
				break;
		
			// 토지기본정보 목록 조회
			case "selectLandList" :
				// TODO
				break;
			
			// 토지기본정보에 따른 기타정보 목록(토지납부비율, 토지급지단가) 조회
			case "selectLandEtcList" :
				
				// 상세정보 활성화
				this.fn_setDetailView(true);
				break;
			
			// 토지기본정보 저장(전체저장)
			case "saveLandList" :break;	
			case "saveLandPayList" : 
				this.alert("저장되었습니다");
				break;
			// 토지기본정보 삭제(전체 삭제)
			case "deleteLandInfo" :
				this.fn_searchLandList(true);	// 목록 리로드
				break;

			default :
				break;
		}
		
	}else{
		this.gfn_callBackMsg(strSvcId, nErrorCode, strErrorMsg);
	}	
}


/***********************************************************************
* Transaction 영역 끝
************************************************************************/

/***********************************************************************
 * non-Transaction 관련 컴포넌트 이벤트 처리 함수
 ***********************************************************************/

/*
 * 함수명  	: fn_btnOnClickHandler
 * 설명 		: 버튼 onClick 이벤트 처리
 * params  		: obj 	: 이벤트 발생 그리드 Component
				  e		: 발생 이벤트
 * return Type 	: None
 * 사용법		: <Button onclick="fn_btnOnClickHandler">...</Button>
 */
this.fn_btnOnClickHandler = function(obj:Button,  e:nexacro.ClickEventInfo)
{                                               	
	var btnName = obj.name;
	switch(btnName){
	
		// 토지정보 ----------------------------------------------------
		
		// 토지 소재지 지번 주소검색
		case "btn_adresLnm" :
			this.fn_popupZipCode(true);
			break;
		
		// 토지 소재지 주소검색
		case "btn_adres" :
			this.fn_popupZipCode(false);
			break;
		
	
		// 토지납부비율 ----------------------------------------------------
		
		// 기초설정
		case "btn_bsisEstbs" :
			this.fn_popupBsisEstbs();
			break;
	
		// 토지납부비율 행추가
		case "btn_rateAdd" :
			this.fn_addGridRow(this.grd_landPayRateList, "PAY");
			break;
			
		// 토지납부비율 행삭제
		case "btn_rateDelete" :
			this.fn_deleteGridRow(this.grd_landPayRateList, "PAY");
			break;
			
		// 토지납부비율 행취소
		case "btn_rateCancel" :
			this.fn_cancelGridRow(this.grd_landPayRateList, "PAY");
			break;
		
		// 토지급지단가 ----------------------------------------------------
	
		// 토지급지단가 행추가
		case "btn_untpcAdd" :
			this.fn_addGridRow(this.grd_ladClUntpcList, "UNTPC");
			break;
			
		// 토지급지단가 행삭제
		case "btn_untpcDelete" :
			this.fn_deleteGridRow(this.grd_ladClUntpcList, "UNTPC");
			break;
			
		// 토지급지단가 행취소
		case "btn_untpcCancel" :
			this.fn_cancelGridRow(this.grd_ladClUntpcList, "UNTPC");
			break;
	
		default :
			break;
	}
}

/*
 * 함수명  	: fn_comboOnItemChangeHandler
 * 설명 		: 콤보 onItemChange 이벤트 처리(아이템 선택)
 * params  		: obj 	: 이벤트 발생 콤보 Component
				  e		: 발생 이벤트
 * return Type 	: None
 * 사용법		: <Combo onitemchanged="fn_comboOnItemChangeHandler">...</Combo>
 */
this.fn_comboOnItemChangeHandler = function(obj:Combo, e:nexacro.ItemChangeEventInfo)
{
	var comName = obj.name;
	var comValue = e ? e.postvalue : obj.value;
	var comIndex = e ? e.postindex : obj.index;

	var paramMap = {};
	switch(comName){

		// 토지정보 사업코드 - 사업코드 변경에 따른 사업코드 변경 처리
		case "cmb_bsnsSe" :
		
			// 선택 사업코드의 사업유형 코드 추출
			var selBsnsTy = this.pmsUtil.getComboSelectedItem(obj, "BSNS_TY");
			
			// 선택 토지정보의 사업유형 필드 업데이트
			var landSelPos = this.ds_landList.rowposition;
			this.ds_landList.setColumn(landSelPos, "BSNS_TY", selBsnsTy);
			
			break;

		default :
			break;
	}
}

/*
 * 함수명  	: fn_dsCanRowPosChangeHandler
 * 설명 		: 데이터셋 canrowposchange 이벤트 처리(행 선택)
 * params  		: obj 	: 이벤트 발생 데이터셋 Component
				  e		: 발생 이벤트
 * return Type 	: Boolean
 * 사용법		: <Dataset canrowposchange="fn_dsCanRowPosChangeHandler">...</Dataset>
 */
this.fn_dsCanRowPosChangeHandler = function(obj:Dataset, e:nexacro.DSRowPosChangeEventInfo){
	
	var result = true;
	var dsName = obj.name;
	switch(dsName){
	
		// 토지목록
		case "ds_landList" :
			var oldRow = e.oldrow;
			var newRow = e.newrow;
			
			// 토지 기타정보(토지납부비율, 토지급지단가) 수정내역 확인
			// fn_checkUpdateEtcInfoList(afterRowDs, afterRowIdx)
			result = this.fn_checkUpdateEtcInfoList(dsName, newRow);
			break;
		
		default :
			break;
	}
	
	return result;
}

/*
 * 함수명  	: fn_dsCanColumnChangeHandler
 * 설명 		: 데이터셋 cancolumnchange 이벤트 처리
 * params  		: obj 	: 이벤트 발생 데이터셋 Component
				  e		: 발생 이벤트
 * return Type 	: Boolean
 * 사용법		: <Dataset canrowposchange="fn_dsCanColumnChangeHandler">...</Dataset>
 */
this.fn_dsCanColumnChangeHandler = function(obj:Dataset,  e:nexacro.DSColChangeEventInfo)
{
	var result = true;
	var dsName = obj.name;

	var rowIdx = e.row;
	var colId = e.columnid;
	var oldValue = e.oldvalue;
	var newValue = e.newvalue;
	switch(dsName){
			
		// 납부금액이율
		case "ds_landPayRateList" :
			
			if(colId == "PAY_RATE"){	// 비율변경시 입력 비율 유효성 확인

				result = this.fn_enablePayRatio(obj, colId, rowIdx, newValue);
				if(!result){
					//this.gfn_message(null, "비율의 총합은 100을 넘을 수 없습니다.\n이전값으로 복원합니다.");
					obj.setColumn(rowIdx, colId, oldValue);
				}
			}
			break;
		default :
			break;		
	}
	return result;
}

/**
 * 납부비율 합계계산
 */
this.fn_enablePayRatio = function(obj:Dataset, colId, notRowId, notValue)
{
	var result = true;
	
	var canValue = this.comUtils.isNullEmpty(notValue) ? 0 : Number(notValue);
	var canSumIdx = this.comUtils.isNullEmpty(notRowId) ? -1 : notRowId;

	var colSum = 0;
	var rowCount = obj.getRowCount();
	for(var i = 0; i < rowCount; i++)
	{
		if(canSumIdx > -1 && i == canSumIdx)
		{
			continue;
		}

		var colValue = obj.getColumn(i, colId);
		colSum += Number(colValue);
	}

	if(canSumIdx > -1)
	{
		colSum += canValue;
	}

	if(colSum > 100)
	{
		result = false;
	}
	
	return result;
}


/**
 * 납부정보 저장 버튼
 */
this.btn_payInfoSave_onclick = function(obj:Button,  e:nexacro.ClickEventInfo)
{
	// 납부금액비율정보 수정 확인
	var isPayUpdated = this.comUtils.isDatasetUpdated(this.ds_landPayRateList);

	// 납부금액비율정보
	if(isPayUpdated){
		if(!this.gfn_checkValidation(this.ds_landPayRateList, this.ds_validation)){
			return;
		}
	}
	
	this.fn_transaction("saveLandPayList");
	
}


/*
 * 함수명  	: fn_grdOnSelectChangHandler
 * 설명 		: 그리드 onSelectChange 이벤트 처리(행 선택) 
 * params  		: obj 	: 이벤트 발생 그리드 Component
				  e		: 발생 이벤트
 * return Type 	: None
 * 사용법		: <Grid onselectchanged="fn_grdOnSelectChangHandler">...</Grid>
 */
this.fn_grdOnSelectChangHandler = function(obj:Grid, e:nexacro.GridSelectEventInfo)
{
	var gridName = obj.name;
	var selRowPosition = e.row;
	var targetDs = obj.binddataset ? obj.binddataset : obj.getInnerDataset();
	var targetDsObj = typeof(targetDs) == "string" ? this[targetDs] : targetDs;
	this.grd_landList.selectRow(selRowPosition);
	
	this.debug("selRowPosition : ==> " + selRowPosition);
	this.div_search.cmb_ladCodeSh.set_index(selRowPosition);

	switch(gridName){

		// 토지목록 - 선택변경
		case "grd_landList" :
		
		    

			var targetDsObjLeng = targetDsObj.getRowCount();
			if(targetDsObjLeng > 0){
			
				if(selRowPosition > -1){
				
				    
					var selRowType = null;
					if(this.AFTER_LAD_INDEX > -1){
						
						var afterInfo = this.AFTER_LAD_INFO;
						selRowType = afterInfo["DS_ROW_TYPE"];
						var reSelRowPosition = -1;
						if(selRowType == Dataset.ROWTYPE_INSERT){
						
							var afterLadCode = afterInfo["LAD_CODE"];
							reSelRowPosition = targetDsObj.findRow("LAD_CODE", afterLadCode);
							
						}else{// (selRowType == Dataset.ROWTYPE_UPDATE)
							reSelRowPosition = this.AFTER_LAD_INDEX;
						}

						this.AFTER_LAD_INDEX = -1;
						this.AFTER_LAD_INFO = null;
						
						// 선택행이 첫번째(0)일 경우 수정 후 행 변경 이벤트가 발생하지 않아
						// 강제적으로 설정
						if(selRowPosition == 0 && reSelRowPosition == 0){
							if(this.RELOAD_LAND_LIST){
								// 선택 토지정보의 기타정보 조회 및 입력부 설정
								this.fn_getLandEtcInfoBySelectRow(obj);
								
								this.RELOAD_LAND_LIST = false;
							}
						}else{
							targetDsObj.set_rowposition(reSelRowPosition);
						}
					}else{
						// 선택 토지정보의 기타정보 조회 및 입력부 설정
						this.fn_getLandEtcInfoBySelectRow(obj);
					}
				}
			}else{
				this.AFTER_LAD_INDEX = -1;
				this.AFTER_LAD_INFO = null;
			}
			break;

		default :
			break;
	}
}

/**
 * 선택 토지정보의 기타정보 조회 및 입력부 설정
 */
this.fn_getLandEtcInfoBySelectRow = function(obj:Grid)
{
	// 선택한 행의 Rowtype에 따라 설정
	var selRowType = this.pmsUtil.getGridSelectedRowType(obj);
	if(selRowType == Dataset.ROWTYPE_INSERT){
		this.fn_setInputFieldSttus(false);	// 입력 필드 처리(Edit)
	}else{
		this.fn_setInputFieldSttus(true);	// 입력 필드 처리(Readonly)
	}
	
	// 해당 토지코드의 기타정보(토지납부비율, 토지급지단가)목록 조회
	this.fn_selectLandEtcList(obj);
}

/***********************************************************************
* 사용자 정의 함수
************************************************************************/
/**
 * 화면 기본 설정
 */
this.fn_setDefaultInfo = function(){
	this.fn_setDetailView(false);			// 상세정보 영역 설정
}

/**
 * 상세정보 영역 사용여부 설정 및 기타 설정
 */
this.fn_setDetailView = function(enabled){
	
	// 정보 영역(입력/탭) 설정
	this.div_landInfo.set_enable(enabled);	// 정보 영역 설정
	//this.tab_master.set_enable(enabled);	// 탭 영역 설정
	this.div_landInfo.chk_useAt.set_value("1");
}

/**
 * 토지정보 입력필드 상태값 설정
 */
this.fn_setInputFieldSttus = function(isReadonly){

	var cssClass = isReadonly ? "edt_WF_Readonly" : "edt_WF_Essential";
	
	this.div_landInfo.edt_ladCode.set_readonly(isReadonly);	// 토지코드
	//this.div_landInfo.edt_ladNm.set_readonly(isReadonly);	// 토지명
	
	this.div_landInfo.edt_ladCode.set_cssclass(cssClass);
	//this.div_landInfo.edt_ladNm.set_cssclass(cssClass);
}

/**
 * 함수명  	: fn_checkUpdateEtcInfoList
 * 설명 		: 토지 기타정보 목록의 변경여부를 확인 한다.
 * params		: afterRowIdx	: 처리 후 선택 Row Index
 * return Type 	: Boolean
 * 사용법		: this.fn_checkUpdatePayInfoList(this.DATASET, ROW_INDEX);
 */
this.fn_checkUpdateEtcInfoList = function(targetDs, targetNm, afterRowDs, afterRowIdx){
	var result = true;
	var confMsg = null;

	// 변경정보를 확인한다.
	var isPayUpdated = this.comUtils.isDatasetUpdated(this.ds_landPayRateList);		// 납부금액비율정보 수정 확인
	var isClassUpdated = this.comUtils.isDatasetUpdated(this.ds_landClUntpcList);	// 급지정보 수정 확인

	if(this.CHANG_DATA_BEFORE_SAVE){		
		if(isPayUpdated || isClassUpdated){
			// 정보 저장 시 저장 루틴 구현
		}
	}else{
		if(isPayUpdated || isClassUpdated){
			
			confMsg = "";
			// CHECK_CHANGE_MESSAGE : "confirm.변경.취소.여부" - 변경된 내역이 존재합니다.\\n현재 작업을 취소하신 후 계속 진행하시겠습니까?
			
			if(isPayUpdated){
				confMsg += "납부금액비율";
			}
			
			if(!this.comUtils.isNullEmpty(confMsg)){
				confMsg += ", ";
			}
			
			if(isClassUpdated){
				confMsg += "급지등록";
			}
			
			//+ "에 " + this.pmsUtil.CHECK_CHANGE_MESSAGE;
			
			if(this.confirm(this.pmsUtil.CHECK_CHANGE_MESSAGE, confMsg)){
				result = false;
			}
		}else{
			result = true;
		}
	}
	return result;
}

/*--------------------------------------------------------------------
 * 그리드 처리 관련
 --------------------------------------------------------------------*/

/**
 * 함수명  	: fn_addGridRow
 * 설명 		: 그리드 행 추가
 * params  		: oGrid 대상 그리드
 * 				: String 구분("LAD":토지정보,"PAY":납부금액이율,"UNTPC":급지등록)
 * return Type 	: None
 * 사용법		: this.fn_addGridRow(GRID, String);
 */
this.fn_addGridRow = function(oGrid:Grid, type)
{
	// 대상 데이터셋 추출
	var targetDs = oGrid.binddataset ? oGrid.binddataset : oGrid.getInnerDataset();
	var targetDsObj = typeof(targetDs) == "string" ? this[targetDs] : targetDs;
	
	var newIndex = targetDsObj.addRow();
	
	switch(type)
	{
		// 토지정보
		case "LAD":
			// 신규 토지 기본정보 설정
			this.fn_setNewLandInfo(oGrid, targetDsObj, newIndex);
			break;
			
		case "PAY" :	// 납부금액이율
		case "UNTPC" :	// 급지등록
			// 신규 토지 기타 정보(납부금액이율/급지등록) 설정
			this.fn_setNewEtcInfo(targetDsObj, newIndex);
			break;
			
		default :
			break;
	}
}

/**
 * 함수명  	: fn_cancelGridRow
 * 설명 		: 그리드 행 취소
 * params  		: oGrid 대상 그리드
 * 				: String 구분("LAD":토지정보,"PAY":납부금액이율,"UNTPC":급지등록)
 * return Type 	: None
 * 사용법		: this.fn_cancelGridRow(GRID, String);
 */
this.fn_cancelGridRow = function(oGrid:Grid, type)
{
	// 대상 데이터셋 추출
	var targetDs = oGrid.binddataset ? oGrid.binddataset : oGrid.getInnerDataset();
	var targetDsObj = typeof(targetDs) == "string" ? this[targetDs] : targetDs;
	
	// 수정여부 확인
	var isUpdated = this.comUtils.isDatasetUpdated(targetDsObj);
	
	if(isUpdated){
		var confirmMsg = "입력을 취소하시겠습니까?\n확인 버튼을 클릭하시면 입력(수정)한 내용이 초기화 됩니다.";
		if(this.confirm(null, confirmMsg)){
			// 대상 데이터셋 초기화
			targetDsObj.reset();
		}
	}else{
		this.alert("comm.데이터.변경.없음");
	}
}
 
/**
 * 함수명  	: fn_deleteGridRow
 * 설명 		: 그리드 행 삭제
 * params  		: oGrid 대상 그리드
 * 				: String 구분("LAD":토지정보,"PAY":납부금액이율,"UNTPC":급지등록)
 * return Type 	: None
 * 사용법		: this.fn_deleteGridRow(GRID, String);
 */
this.fn_deleteGridRow = function(oGrid:Grid, type)
{
	// 대상 데이터셋 추출
	var targetDs = oGrid.binddataset ? oGrid.binddataset : oGrid.getInnerDataset();
	var targetDsObj = typeof(targetDs) == "string" ? this[targetDs] : targetDs;
	
	// 삭제 대상 행 목록 추출
	var option = {};
	option["viewRow"] = "expr:CHK == '1'";
	var checkList = this.pmsUtil.datasetToObject(this.ds_landPayRateList, option, true);
	var checkListLeng = checkList == null ? 0 : checkList.length;

	// 선택자료 여부 체크
	if(checkListLeng == 0)
	{
		var altMsg = "삭제할 " + (type == "PAY" ? "납부금액이율 " : (type == "UNTPC" ? "급지등록 " : "")) + "항목";
		this.alert("comm.항목.선택.요청", altMsg);
		return;
	}
	
	// 선택 데이터 삭제 - 삭제 하시겠습니까? 메시지 출력됨
	this.gfn_delMultiRow(targetDsObj);
}

/*--------------------------------------------------------------------
 * 신규행 추가 관련
 --------------------------------------------------------------------*/

/*
 * 함수명  	: fn_setNewLandInfo
 * 설명 		: 신규 토지 기본정보 설정
 * params  		: Non
 * return Type 	: None
 * 사용법		: this.fn_setNewLandInfo();
 */
this.fn_setNewLandInfo = function(oGrid:Grid, oDs:Dataset, setIndex){

	// 기초 데이터 설정
	oDs.setColumn(setIndex, "OPERTN_BGNDE", this.DEFAULT_DATE);
	oDs.setColumn(setIndex, "OPERTN_ENDDE", this.DEFAULT_DATE);
	oDs.setColumn(setIndex, "PLAN_CONFM_NTFC_DE_1", this.DEFAULT_DATE);
	oDs.setColumn(setIndex, "PLAN_CONFM_NTFC_DE_2", this.DEFAULT_DATE);
	
	// 상세정보 활성화
	this.fn_setDetailView(true);
	
	// 입력 포커스 처리
	this.pmsUtil.setFocusGridBindComp(oGrid, setIndex, "LAD_CODE");
}

/*
 * 함수명  	: fn_setNewLandInfo
 * 설명 		: 신규 토지 기타 정보(납부금액이율/급지등록) 설정
 * params  		: Non
 * return Type 	: None
 * 사용법		: this.fn_setNewLandInfo();
 */
this.fn_setNewEtcInfo = function(oDs:Dataset, setIndex)
{
	var setLadCode = this.pmsUtil.getGridSelectedItem(this.grd_landList, "LAD_CODE");
	
	// 토지코드 입력여부 확인
	var isNullLadCode = this.comUtils.isNullEmpty(setLadCode);
	if(isNullLadCode)
	{
		// 생성 ROw 삭제
		oDs.deleteRow(setIndex);
	
		this.alert("comm.입력.요청.를", "토지코드");	// {0} 항목을 입력하십시오.
		
		// 입력 포커스 처리
		var landSelPos = this.ds_landList.rowposition;
		this.pmsUtil.setFocusGridBindComp(this.grd_landList, landSelPos, "LAD_CODE");
	}else{
		// 기초 데이터 설정
		oDs.setColumn(setIndex, "CHK", "0");
		oDs.setColumn(setIndex, "LAD_CODE", setLadCode);
	}
}

/*
 * 함수명  	: fn_set_bsnsCode
 * 설명 		: TabPage1(보상사업지구) 사업지구 찾기 팝업 확인후 에디트 등록
 * params  		: None
 * return Type 	: None
 * 사용법		: this.fn_set_legaldongCode();
 */ 
this.fn_set_bsnsCode = function(type, code, nm, yn)
{
	var rowposition = this.ds_landList.rowposition;
	this.ds_landList.setColumn(rowposition,"BSNS_CODE",code);	
	this.ds_landList.setColumn(rowposition,"BSNS_TY",type);
	this.ds_landList.setColumn(rowposition,"BSNS_NM",nm);
	return true;
} 

this.fn_set_lttotBsnsCode = function(type, code, nm, yn)
{
	var rowposition = this.ds_landList.rowposition;
	this.ds_landList.setColumn(rowposition,"LTTOT_BSNS_CODE",code);	
	this.ds_landList.setColumn(rowposition,"LTTOT_BSNS_NM",nm);	
	return true;
} 

this.fn_set_rentBsnsCode = function(type, code, nm, yn)
{
	var rowposition = this.ds_landList.rowposition;
	this.ds_landList.setColumn(rowposition,"RENT_BSNS_CODE",code);	
	this.ds_landList.setColumn(rowposition,"RENT_BSNS_NM",nm);	
	return true;
} 

/*
 * 함수명  	: fn_set_fnnc_instt
 * 설명 		: TabPage1(보상사업지구) 금융코드 조회  팝업 확인후 에디트 등록
 * params  		: None
 * return Type 	: None
 * 사용법		: this.fn_set_fnnc_instt();
 */ 
this.fn_set_fnnc_instt = function(bankCode,bankName)
{
	var rowposition = this.ds_bsnsCode.rowposition;
	this.ds_bsnsCode.setColumn(rowposition, "BANK_CODE", bankCode);
	this.ds_bsnsCode.setColumn(rowposition, "BANK_NAME", bankName);
}

/*--------------------------------------------------------------------
 * 팝업 처리 관련
 --------------------------------------------------------------------*/

/**
 * 기초설정 팝업 출력
 */
this.fn_popupBsisEstbs = function()
{
	var landListSize = this.ds_landList.getRowCount();
	if(landListSize > 0)
	{
		var landItem = this.pmsUtil.getGridSelectedItem(this.grd_landList);	// 선택 토지정보

		var popupParm = {
			caller : this,  //==> 필수, 팝업을 호출하는 form을 참조할 수 있도록 팝업에 Argument로 넘겨준다. (반드시 기술해야 함.)
			ladcode : landItem["LAD_CODE"],				// 토지코드
			ladnm : landItem["LAD_NM"],					// 토지명
			prposcode : landItem["PRPOS_CODE"],			// 용도코드
			suplycode : landItem["SUPLY_CODE"],			// 공급코드
			callback : this.callBackSelectLandEtcList
		};
				
		// 팝업 공통함수
		this.gfn_popup("popup_ladPayCodeList", 600, 470, "기초설정", popupParm, "pms_sls_lad_std::SLS070101_P1.xfdl");
		
	}else{
		this.gfn_message(null, "선택된 토지정보가 없습니다.");
		return;
	}
}

this.callBackSelectLandEtcList = function (result){
	if(result){
	//	open.close();
		this.fn_transaction("selectLandEtcList");
	}
}


// 우편번호 ----------------------------------------------------------------------------

/**
 * 주소검색 팝업 출력
 * @param isLnm 지번필드 여부
 */
this.fn_popupZipCode = function(isLnm){

	var option = {};
	option["zipField"] = isLnm ? "LOCPLC_ZIP_LNM" : "LOCPLC_ZIP";		// 우편번호
	option["roadBaseField"] = isLnm ? null : "LOCPLC_BASS_ADRES";		// 도로명주소(일반)
	option["roadDetField"] = isLnm ? null : "LOCPLC_DETAIL_ADRES";		// 도로명주소(상세)
	//option["jibunField"] = isLnm ? "LOCPLC_DETAIL_ADRES_LNM" : "LOCPLC_DETAIL_ADRES";		// 지번주소
	option["jibunBaseField"] = isLnm ? "LOCPLC_BASS_ADRES_LNM" : null;	// 지번주소(일반)
	option["jibunDetField"] = isLnm ? "LOCPLC_DETAIL_ADRES_LNM" : null;	// 지번주소(상세)
	option["schWord"] = isLnm ? this.div_landInfo.edt_locplcBassAdresLnm.value : this.div_landInfo.edt_locplcBassAdres.value;
	//option["callback"] = this.fn_callbackZip;
	
	this.pmsUtil.popupZipCode(this.ds_landList, option);
}


/**
 * 납부코드 데이터 설정
 */

this.fn_setPayListByBaseCode = function()
{
	
	var dsCodeList = this.ds_payCode;	// 납부코드 목록
	var tempDs = this.ds_tmpPayCodeList;// 임시 선택 대상 토지 납부코드
	var targetDs = this.ds_payCodeList;	// 조회 선택 대상 토지 납부코드
	var targetDs00 = this.ds_payCodeList00; // 저장 선택 대산 토지 납부코드
	var targetDsPrp = this.ds_prposSe00;  // 저장 선택 대산 토지 용도코드
	var targetDsSup = this.ds_suplySe00; // 저장 선택 대산 토지 공급코드
	
	// Clear Datasets
	this.pmsUtil.clearDataSet([tempDs, targetDs]); 
	
	// 데이터 설정
	var listLeng = dsCodeList.getRowCount();
	var s0Index = this.ds_payCode.findRow("CODE", "S0");
	var s9Index = this.ds_payCode.findRow("CODE", "S9");
	
	var baseIndex = tempDs.addRow();
	tempDs.copyRow(baseIndex, dsCodeList, 0);
	
	for(var i = s0Index; i <= s9Index; i++){
		var newIdx = tempDs.addRow();
		var bSucc = tempDs.copyRow(newIdx, dsCodeList, i);
	}
	// 실제 목록에 복사
	targetDs.copyData(tempDs);
	
	
	// 납부비율 저장 콤보 "전체" row  삭제
	targetDsPrp.copyData(this.ds_prposSe);
	targetDsPrp.deleteRow(0);
	targetDsSup.copyData(this.ds_suplySe);
	targetDsSup.deleteRow(0);
	
	tempDs.deleteRow(0);
	targetDs00.copyData(tempDs);
	

	// Clear Datasets
	this.pmsUtil.clearDataSet([tempDs]);
}


// 납부비율 콤보 조건 조회
this.fn_payRateComboOnItemChangeHandler = function(obj:Combo, e:nexacro.ItemChangeEventInfo)
{
	var ladCode = this.ds_cond01.getColumn(0,"LAD_CODE");
//	this.pmsUtil.clearDataSet([this.ds_landPayRateList]);
	var prposSe = this.cmb_prposSe.value;
	var suplySe = this.cmb_suplySe.value;
	var payCode = this.cmb_payCode.value;

	this.ds_cond01.setColumn(0, "LAD_CODE", ladCode);
	this.ds_cond01.setColumn(0, "PRPOS_SE", prposSe);
	this.ds_cond01.setColumn(0, "SUPLY_SE", suplySe);
	this.ds_cond01.setColumn(0, "PAY_CODE", payCode);
	
	this.fn_transaction("selectLandEtcList");
	//this.pmsUtil.clearDataSet([this.ds_landPayRateList]);
}

/*
 * 함수명  	: div_landInfo_btn_bsnsSe_onclick
 * 설명 		: 사업코드, 분양사업, 임대사업  찾기 팝업
 * params  		: None
 * return Type 	: None
 * 사용법		: div_landInfo_btn_bsnsSe_onclick();
 */ 
this.div_landInfo_btn_bsnsSe_onclick = function(obj:Button,  e:nexacro.ClickEventInfo)
{
	this.gfn_popup("popup_bsnsCode", 500, 500, "사업코드", {callback:"fn_set_bsnsCode"}, "pms_cmp_std::CMP010100_P06.xfdl");
}



this.div_landInfo_btn_lttotBsnsCode_onclick = function(obj:Button,  e:nexacro.ClickEventInfo)
{
	this.gfn_popup("popup_lttotBsnsCode", 500, 500, "분양사업", {callback:"fn_set_lttotBsnsCode"}, "pms_cmp_std::CMP010100_P06.xfdl");
}

this.div_landInfo_btn_rentBsnsCode_onclick = function(obj:Button,  e:nexacro.ClickEventInfo)
{
	this.gfn_popup("popup_rentBsnsCode", 500, 500, "임대사업", {callback:"fn_set_rentBsnsCode"}, "pms_cmp_std::CMP010100_P06.xfdl");
}
this.div_search_cmb_ladCodeSh_onitemchanged = function(obj:Combo, e:nexacro.ItemChangeEventInfo)
{
	var comName = obj.name;
	var comValue = e ? e.postvalue : obj.value;
	var comIndex = e ? e.postindex : obj.index;

	this.debug("comName : ==> " + comName);
	this.debug("comValue : ==> " + comValue);
	this.debug("comIndex : ==> " + comIndex);
	
	var paramMap = {};
	switch(comName){

		case "cmb_ladCodeSh" :	// 조회조건 토지코드
			this.grd_landList.selectRow(comIndex);
			break;

		default :
			break;
	}
}


/*
 * 함수명  	: btn_patgbSave_onclick
 * 설명 		: 납부비율 구분값 일괄 적용
 * params  		: None
 * return Type 	: None
 * 사용법		: btn_patgbSave_onclick();
 */ 
this.btn_patgbSave_onclick = function(obj:Button,  e:nexacro.ClickEventInfo)
{
	var rateCnt = this.ds_landPayRateList.rowcount;
	for(var i=0; i< rateCnt; i++){
		this.ds_landPayRateList.setColumn(i, "PAY_RATE", this.adj_pay_rate.value);
	}

	var tmlmtCnt = this.ds_landPayRateList.rowcount;
	for(var i=0; i< tmlmtCnt; i++){
		this.ds_landPayRateList.setColumn(i, "PAY_TMLMT", this.adj_pay_tmlmt.value);
	}
}
]]></Script>
  </Form>
</FDL>
