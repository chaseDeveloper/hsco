<?xml version="1.0" encoding="utf-8"?>
<FDL version="1.5">
  <TypeDefinition url="..\..\..\..\default_typedef.xml"/>
  <Form id="SLS020205_P02" classname="SLS020205_P02" left="0" top="0" width="1026" height="358" titletext="임대보증금 차출" oninit="SLS020205_P02_oninit" onload="SLS020205_P02_onload" scrollbars="none">
    <Layouts>
      <Layout>
        <Button id="btn_Close" taborder="2" onclick="btn_Close_onclick" top="49" right="15" width="50" height="25" style="background:#4563a1ff;border:1 solid #2d4d8eff ;bordertype:round 2 2 ;font:bold 8 dotum;gradation:linear 0,0 #f4f4f4ff 0,100 #e2e7edff;" userdata="A:T;" text="닫기" cssclass="btn_WF_CRUD"/>
        <Button id="btn_approval" taborder="1" onclick="btn_approval_onclick" top="49" right="67" width="50" height="25" style="background:#4563a1ff;border:1 solid #2d4d8eff ;bordertype:round 2 2 ;font:bold 8 dotum;" userdata="A:T;" cssclass="btn_WF_CRUD" text="결재"/>
        <Div id="div_detail00" taborder="4" left="0" top="90" width="1045" height="94">
          <Layouts>
            <Layout>
              <Static id="sta_WFDA_Label01" taborder="13" cssclass="sta_WF_Labelbg" left="150" top="10" width="362" height="27"/>
              <Static id="sta_WFDA_Label00" taborder="14" cssclass="sta_WF_Labelbg" left="150" top="36" width="362" height="27"/>
              <Static id="sta_WFDA_Label03" taborder="16" cssclass="sta_WF_Labelbg" left="630" top="10" width="381" height="27"/>
              <Static id="sta_WFDA_Label04" taborder="17" cssclass="sta_WF_Labelbg" left="630" top="36" width="381" height="27"/>
              <Edit id="edt_EMPNO" taborder="1" left="157" top="13" width="140" height="21" readonly="true" cssclass="edt_WF_Readonly"/>
              <Edit id="edt_EMPNM" taborder="2" left="302" top="13" width="199" height="21" readonly="true" cssclass="edt_WF_Readonly"/>
              <Edit id="edt_DEPT_NM" taborder="4" left="157" top="39" width="140" height="21" readonly="true" cssclass="edt_WF_Readonly"/>
              <Edit id="edt_OFCPS_NM" taborder="6" left="404" top="39" width="97" height="21" readonly="true" cssclass="edt_WF_Readonly"/>
              <Edit id="edt_CLSF_SE" taborder="5" left="302" top="39" width="97" height="21" readonly="true" cssclass="edt_WF_Readonly"/>
              <Combo id="cmb_SANCTN_STTUS_SE" taborder="12" left="640" top="39" width="228" height="21" innerdataset="@ds_sanctnSttusCode" datacolumn="CODE_NM" codecolumn="CODE" readonly="true" cssclass="cmb_WF_Readonly"/>
              <Static id="sta_EMP" taborder="0" text="사번 / 성명" cssclass="sta_WF_Label" top="10" right="894" width="136" height="27" style="font:9 Dotum;"/>
              <Static id="sta_EMP00" taborder="3" text="소속 / 직급 / 직위 " cssclass="sta_WF_Label" top="36" right="894" width="136" height="27" style="align:left middle;font:9 Dotum;"/>
              <Static id="sta_SANCTN_RECOM_DE" taborder="8" text="기안일시" cssclass="sta_WF_Label" top="10" right="413" width="118" height="27" style="font:9 Dotum;"/>
              <Static id="sta_SANCTN_STTUS_SE" taborder="11" text="결재진행상태" cssclass="sta_WF_Label" top="36" right="413" width="118" height="27" style="align:left middle;font:9 Dotum;"/>
              <MaskEdit id="mae_dtftDt00" taborder="19" readonly="true" type="string" mask="9999-99-99 999:999" cssclass="msk_WF_Readonly" left="61.24%" top="13" right="16.94%" height="21" style="align:left middle;" maskchar=" "/>
            </Layout>
          </Layouts>
        </Div>
        <Div id="div_detail01" taborder="5" left="0" top="182" width="1045" height="170">
          <Layouts>
            <Layout>
              <Static id="sta_WFDA_Label00" taborder="16" cssclass="sta_WF_Labelbg" left="150" top="2" width="362" height="27"/>
              <Static id="sta_WFDA_Label01" taborder="17" cssclass="sta_WF_Labelbg" left="150" top="28" width="362" height="27"/>
              <Static id="sta_WFDA_Label02" taborder="18" cssclass="sta_WF_Labelbg" left="150" top="54" width="362" height="27"/>
              <Static id="sta_WFDA_Label03" taborder="19" cssclass="sta_WF_Labelbg" left="150" top="80" width="362" height="27"/>
              <Static id="sta_WFDA_Label04" taborder="27" cssclass="sta_WF_Labelbg" left="150" top="106" width="362" height="27"/>
              <Static id="sta_WFDA_Label05" taborder="20" cssclass="sta_WF_Labelbg" left="150" top="132" width="362" height="27"/>
              <Static id="sta_WFDA_Label06" taborder="21" cssclass="sta_WF_Labelbg" left="514" top="3" width="497" height="157"/>
              <Static id="sta_VRSC_MAN" taborder="9" cssclass="sta_WF_Label" top="106" right="894" width="136" height="27" style="align:left middle;font:9 Dotum;"/>
              <Static id="sta_VRSC_MAN_CALL" taborder="13" cssclass="sta_WF_Label" top="132" right="894" width="136" height="27" style="align:left middle;font:9 Dotum;"/>
              <Static id="sta_BGN_DT" taborder="2" text="지출금액" cssclass="sta_WF_Label" top="28" right="894" width="136" height="27" style="align:left middle;font:9 Dotum;"/>
              <Static id="sta_DCLZ_SE" taborder="0" text="주택명" cssclass="sta_WF_Label" top="2" right="894" width="136" height="27" style="font:9 Dotum;"/>
              <Static id="sta_AM_PM_SE" taborder="5" text="계약자" cssclass="sta_WF_Label" top="54" right="894" width="136" height="27" style="align:left middle;font:9 Dotum;"/>
              <Static id="sta_DAYCNT" taborder="7" cssclass="sta_WF_Label" top="80" right="894" width="136" height="27" style="align:left middle;font:9 Dotum;"/>
              <Edit id="edt_DAYCNT00" taborder="29" left="14.93%" top="5" right="70.43%" height="21" readonly="true"/>
              <MaskEdit id="edt_VRSC_MAN_CALL00" taborder="34" readonly="true" left="14.93%" top="31" right="70.43%" height="21" mask="#,###"/>
              <Static id="sta_DAYCNT01" taborder="36" cssclass="sta_WF_Label" left="49.19%" top="80" right="37.8%" height="27" style="align:left middle;font:9 Dotum;" text="지출과목"/>
              <Static id="sta_WFDA_Label10" taborder="37" cssclass="sta_WF_Labelbg" left="62.11%" top="80" right="3.25%" height="27"/>
              <Static id="sta_VRSC_MAN01" taborder="38" cssclass="sta_WF_Label" left="49.19%" top="106" right="37.8%" height="27" style="align:left middle;font:9 Dotum;"/>
              <Static id="sta_WFDA_Label11" taborder="39" cssclass="sta_WF_Labelbg" left="62.11%" top="106" right="3.25%" height="27"/>
              <Static id="sta_VRSC_MAN_CALL01" taborder="40" cssclass="sta_WF_Label" left="49.19%" top="132" right="37.8%" height="27" style="align:left middle;font:9 Dotum;"/>
              <Static id="sta_WFDA_Label12" taborder="41" cssclass="sta_WF_Labelbg" left="62.11%" top="132" right="3.25%" height="27"/>
              <Static id="sta_DAYCNT00" taborder="42" text="예금주" cssclass="sta_WF_Label" left="49.19%" top="2" right="37.8%" height="27" style="align:left middle;font:9 Dotum;"/>
              <Static id="sta_WFDA_Label07" taborder="43" cssclass="sta_WF_Labelbg" left="62.11%" top="2" right="3.25%" height="27"/>
              <Static id="sta_VRSC_MAN00" taborder="44" text="은행명" cssclass="sta_WF_Label" left="49.19%" top="28" right="37.8%" height="27" style="align:left middle;font:9 Dotum;"/>
              <Static id="sta_WFDA_Label08" taborder="45" cssclass="sta_WF_Labelbg" left="62.11%" top="28" right="3.25%" height="27"/>
              <Static id="sta_VRSC_MAN_CALL00" taborder="46" text="계좌번호" cssclass="sta_WF_Label" left="49.19%" top="54" right="37.8%" height="27" style="align:left middle;font:9 Dotum;"/>
              <Static id="sta_WFDA_Label09" taborder="47" cssclass="sta_WF_Labelbg" left="62.11%" top="54" right="3.25%" height="27"/>
              <Edit id="edt_DAYCNT01" taborder="51" left="14.93%" top="57" right="70.43%" height="21" readonly="true"/>
              <Edit id="edt_DAYCNT02" taborder="52" left="62.58%" top="5" right="22.78%" height="21"/>
              <Edit id="edt_DAYCNT03" taborder="53" left="62.58%" top="57" right="22.78%" height="21"/>
              <Edit id="edt_VRSC_MAN_CALL01" taborder="54" readonly="true" left="29.86%" top="31" right="55.5%" height="21"/>
              <Edit id="edt_DAYCNT04" taborder="55" left="62.58%" top="83" right="4.31%" height="21"/>
              <Edit id="edt_DAYCNT05" taborder="56" left="62.58%" top="31" right="22.78%" height="21"/>
            </Layout>
          </Layouts>
        </Div>
        <Static id="sta_REGIST_NM" taborder="3" text="등록자" cssclass="sta_WF_Title02" left="17" top="79" right="937" height="21" style="font:bold 9 Gulim;"/>
        <Static id="Static06" taborder="6" text="15" visible="false" left="0" top="34" width="1058" height="15" style="background:#dc143c3c;align:center middle;"/>
        <Static id="Static02" taborder="9" text="15" visible="false" left="1011" top="34" width="15" height="336" style="background:#1b3cd23c;align:center middle;"/>
        <Static id="Static05" taborder="10" text="15" visible="false" left="0" top="34" width="15" height="336" style="background:#1b3cd23c;align:center middle;"/>
        <Static id="Static12" taborder="12" text="5" visible="false" left="17" top="74" width="1026" height="5" style="background:#dc143c3c;align:center middle;"/>
        <Static id="sta_ELCTRN" taborder="14" text="전자결재 진행상태" cssclass="sta_WF_Title02" left="512" top="79" right="333" height="21" style="align:left middle;font:bold 9 Gulim;"/>
        <Static id="sta_DETAIL" taborder="15" text="상세내용" cssclass="sta_WF_Title02" left="17" top="163" right="925" height="21" style="align:left middle;font:bold 9 Gulim;"/>
        <Static id="Static10" taborder="17" text="10" visible="false" left="15" top="153" width="995" height="10" style="background:#dc143c3c;align:center middle;"/>
        <Static id="Static01" taborder="18" text="전자결제정보" cssclass="sta_WF_PopupTitle" left="0" top="0" right="0" height="34"/>
        <Static id="Static03" taborder="19" text="15" visible="false" left="2" top="343" width="1040" height="15" style="background:#dc143c3c;align:center middle;"/>
      </Layout>
    </Layouts>
    <Bind>
      <BindItem id="item0" compid="div_detail00.edt_EMPNO" propid="value" datasetid="DS_REGISTER_INFO" columnid="EMPNO"/>
      <BindItem id="item1" compid="div_detail00.edt_EMPNM" propid="value" datasetid="DS_REGISTER_INFO" columnid="EMPNM"/>
      <BindItem id="item2" compid="div_detail00.edt_DEPT_NM" propid="value" datasetid="DS_REGISTER_INFO" columnid="DEPT_NM"/>
      <BindItem id="item3" compid="div_detail00.edt_CLSF_SE" propid="value" datasetid="DS_REGISTER_INFO" columnid="CLSF_SE"/>
      <BindItem id="item4" compid="div_detail00.edt_OFCPS_NM" propid="value" datasetid="DS_REGISTER_INFO" columnid="OFCPS_NM"/>
      <BindItem id="item7" compid="div_detail00.cmb_SANCTN_STTUS_SE" propid="value" datasetid="ds_lttot_pay" columnid="SANCTN_STTS"/>
      <BindItem id="item8" compid="div_detail01.edt_DAYCNT00" propid="value" datasetid="ds_lttot_pay" columnid="HOUSE_NM"/>
      <BindItem id="item11" compid="div_detail01.edt_VRSC_MAN_CALL00" propid="value" datasetid="ds_lttot_pay" columnid="PAYAMT"/>
      <BindItem id="item9" compid="div_detail01.edt_DAYCNT01" propid="value" datasetid="ds_lttot_pay" columnid="CSTMR_NM"/>
      <BindItem id="item5" compid="div_detail01.edt_VRSC_MAN_CALL01" propid="value" datasetid="ds_lttot_pay" columnid="PAYAMT_KR"/>
      <BindItem id="item6" compid="div_detail00.mae_dtftDt00" propid="value" datasetid="ds_lttot_pay" columnid="DRFT_DT"/>
      <BindItem id="item10" compid="div_detail01.edt_DAYCNT02" propid="value" datasetid="ds_lttot_pay" columnid="NM"/>
      <BindItem id="item12" compid="div_detail01.edt_DAYCNT05" propid="value" datasetid="ds_lttot_pay" columnid="BANK_NM"/>
      <BindItem id="item13" compid="div_detail01.edt_DAYCNT03" propid="value" datasetid="ds_lttot_pay" columnid="ACCOUNT"/>
      <BindItem id="item14" compid="div_detail01.edt_DAYCNT04" propid="value" datasetid="ds_lttot_pay" columnid="JICHUL"/>
    </Bind>
    <Objects>
      <Dataset id="ds_lttot_pay" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false" oncolumnchanged="DS_WRKCP_oncolumnchanged">
        <ColumnInfo>
          <Column id="CNTRCTR_NO" type="STRING" size="256"/>
          <Column id="CSTMR_NM" type="STRING" size="256"/>
          <Column id="HOUSE_NM" type="STRING" size="256"/>
          <Column id="PAY_CODE" type="STRING" size="256"/>
          <Column id="PAY_SN" type="STRING" size="256"/>
          <Column id="PAYAMT" type="STRING" size="256"/>
          <Column id="ELCTRN_SANCTN_NO" type="STRING" size="256"/>
          <Column id="DRFT_DT" type="STRING" size="256"/>
          <Column id="SANCTN_STTS" type="STRING" size="256"/>
          <Column id="PAYAMT_KR" type="STRING" size="256"/>
          <Column id="PAY_TMLMT" type="STRING" size="256"/>
          <Column id="RENT_LTTOT_CNVRS_DE" type="STRING" size="256"/>
          <Column id="INTRLCK_DATA" type="STRING" size="256"/>
          <Column id="NM" type="STRING" size="256"/>
          <Column id="ACCOUNT" type="STRING" size="256"/>
          <Column id="BANK_NM" type="STRING" size="256"/>
          <Column id="JICHUL" type="STRING" size="256"/>
          <Column id="BANK_ACCOUNT" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="DS_DCLZ_SE1" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="GRP_CODE_SN" type="bigdecimal" size="16"/>
          <Column id="CODE_CN" type="string" size="32"/>
          <Column id="CODE_ORDR" type="bigdecimal" size="16"/>
          <Column id="USE_AT" type="string" size="32"/>
          <Column id="CODE_NM" type="string" size="32"/>
          <Column id="GRP_CODE" type="string" size="32"/>
          <Column id="CODE" type="string" size="32"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="DS_AM_PM_AT" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="code" type="STRING" size="256"/>
          <Column id="data" type="STRING" size="256"/>
        </ColumnInfo>
        <Rows>
          <Row>
            <Col id="data">선택</Col>
          </Row>
          <Row>
            <Col id="code">001</Col>
            <Col id="data">오전</Col>
          </Row>
          <Row>
            <Col id="code">002</Col>
            <Col id="data">오후</Col>
          </Row>
        </Rows>
      </Dataset>
      <Dataset id="DS_REGISTER_INFO" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="EMPNO" type="STRING" size="256"/>
          <Column id="EMPNM" type="STRING" size="256"/>
          <Column id="DEPT_CODE" type="STRING" size="256"/>
          <Column id="DEPT_NM" type="STRING" size="256"/>
          <Column id="CLSF_SE" type="STRING" size="256"/>
          <Column id="OFCPS_NM" type="STRING" size="256"/>
          <Column id="OFCPS_SE" type="STRING" size="256"/>
          <Column id="DCLZ_SE" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_approve" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="DATA_VALUE" type="STRING" size="1000"/>
          <Column id="DATA_TITLE" type="STRING" size="256"/>
          <Column id="O_URL" type="STRING" size="256"/>
          <Column id="I_KEY" type="STRING" size="256"/>
          <Column id="EMPNO" type="STRING" size="256"/>
          <Column id="SEQ" type="STRING" size="256"/>
          <Column id="DEPT_CD" type="STRING" size="256"/>
          <Column id="EMP_CD" type="STRING" size="256"/>
          <Column id="TITLE" type="STRING" size="256"/>
          <Column id="CNTRCTR_NO" type="STRING" size="256"/>
          <Column id="PAY_SN" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_sanctnSttusCode" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="CODE" type="STRING" size="256"/>
          <Column id="CODE_NM" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_validation" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="compId" type="STRING" size="256"/>
          <Column id="colId" type="STRING" size="256"/>
          <Column id="PK" type="STRING" size="256"/>
          <Column id="notNull" type="STRING" size="256"/>
          <Column id="type" type="STRING" size="256"/>
          <Column id="nlength" type="STRING" size="256"/>
          <Column id="from" type="STRING" size="256"/>
          <Column id="to" type="STRING" size="256"/>
          <Column id="lengthChkGb" type="STRING" size="256"/>
          <Column id="msgId" type="STRING" size="256"/>
          <Column id="expr" type="STRING" size="256"/>
          <Column id="func" type="STRING" size="256"/>
        </ColumnInfo>
        <Rows>
          <Row>
            <Col id="colId">DCLZ_SE</Col>
            <Col id="compId">DS_WRKCP</Col>
            <Col id="msgId">근태구분</Col>
            <Col id="notNull">Y</Col>
          </Row>
          <Row>
            <Col id="colId">BGNDT</Col>
            <Col id="compId">DS_WRKCP</Col>
            <Col id="msgId">시작일자</Col>
            <Col id="notNull">Y</Col>
          </Row>
          <Row>
            <Col id="compId">DS_WRKCP</Col>
            <Col id="colId">ENDDT</Col>
            <Col id="notNull">Y</Col>
            <Col id="msgId">종료일자</Col>
          </Row>
          <Row>
            <Col id="compId">DS_WRKCP</Col>
            <Col id="colId">VRSC_EMPNO</Col>
            <Col id="notNull">Y</Col>
            <Col id="msgId">업무대행자</Col>
          </Row>
          <Row>
            <Col id="compId">DS_WRKCP</Col>
            <Col id="colId">PRVONSH</Col>
            <Col id="notNull">Y</Col>
            <Col id="msgId">사유/용무</Col>
          </Row>
          <Row>
            <Col id="compId">DS_WRKCP</Col>
            <Col id="msgId">일수</Col>
            <Col id="notNull">Y</Col>
            <Col id="colId">WORK_DAYCNT</Col>
          </Row>
        </Rows>
      </Dataset>
      <Dataset id="ds_cond00">
        <ColumnInfo>
          <Column id="EMPNO" type="STRING" size="256"/>
          <Column id="CNTRCTR_NO" type="STRING" size="256"/>
          <Column id="PAY_SN" type="STRING" size="256"/>
          <Column id="DEPT_CODE" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_bank"/>
    </Objects>
    <Script type="xscript5.0"><![CDATA[/***********************************************************************
 * 01. 업무구분 : 전자결제 - 임대보증금반환
 * 02. 화면명   : SLS020205_P02.xfdl
 * 03. 화면설명 : 전자결제 - 임대보증금반환
 * 04. 작성일   : 2016.01.21
 * 05. 작성자   : 이광원
 * 06. 수정이력 : 2016.01.21 최초생성
 ***********************************************************************
 *     수정일     작성자   내용
 ***********************************************************************
 *    2016.01.21   이광원   최초
 ***********************************************************************
 */

/***********************************************************************
 * Script Include 
 ************************************************************************/
include "lib::comInclude.xjs";
include "pms_lib::pmsUtilInclude.xjs";
this.fv_objForm;
/***********************************************************************
* 폼로드 시 처리
************************************************************************/
this.SLS020205_P02_onload = function(obj:Form, e:nexacro.LoadEventInfo)
{	
	this.fn_loadCombo();
}
/*
 * 함수명  	: fn_loadCombo
 * 설명 		: 화면의 Combo 에 데이터를 불러온다.
 * params  		: None
 * return Type 	: None
 * 사용법		: this.fn_loadCombo();
 */
this.fn_loadCombo = function ()
{
	var comboParams = [
		    ["ds_sanctnSttusCode", "COM023", "1", ""],   // 전자결재상태
		    ["ds_bank", "COM021", "1", ""]   // 은행명
		];
	this.gfn_comboLoad(comboParams , this.fn_callbackAfter());
}

/*
 * 함수명  	: fn_callbackAfter
 * 설명 		: 공통 callback
 * params  		: None
 * return Type 	: None
 * 사용법		: this.fn_callbackAfter();
 */
this.fn_callbackAfter = function ()
{
	this.fv_objForm = this.parent.art_0;
	var nRow = this.ds_cond00.addRow();
	this.ds_cond00.copyRow(0,this.parent.arg_1,0);
	this.fn_search();		
	this.fn_search1();
}
/***********************************************************************
 * 설명: 상세조회 처리
 ************************************************************************/
this.fn_search= function()
{	
	this.ds_lttot_pay.clearData();
	var sSvcID        	= "approveList";                    
    var sController   	= "hsco/pms/sls/hou/ctr/SLS020205/approveList.do";
	var sInDatasets   	= "input1=ds_cond00";
	var sOutDatasets  	= "ds_lttot_pay=output1";
	var sArgs = "";	
	
	Ex.core.tran(this,sSvcID, sController, sInDatasets, sOutDatasets, sArgs); 
}

/***********************************************************************
 * 설명: 등록자 정보 조회처리
 ************************************************************************/
this.fn_search1= function()
{	
	this.ds_lttot_pay.clearData();
	var sSvcID        	= "registerInfoR";                    
    var sController   	= "hsco/pms/sls/hou/ctr/SLS020205/registerInfoR.do";
	var sInDatasets   	= "input1=ds_cond00";
	var sOutDatasets  	= "DS_REGISTER_INFO=output1";
	var sArgs = "";	

	Ex.core.tran(this,sSvcID, sController, sInDatasets, sOutDatasets, sArgs); 
}


/***********************************************************************************
* 설명	: 상세조회에서 날짜 변경시 처리
***********************************************************************************/
/***********************************************************************************
* 설명	: 대행자 검색팝업 호출
***********************************************************************************/
/***********************************************************************************
* 설명	: 대행자 검색팝업 콜백
***********************************************************************************/
/***********************************************************************
 * 설명: 취소버튼 클릭시
 ************************************************************************/
this.fn_cancel= function()
{
	if (this.gfn_message("confirm.취소여부") ) {  
		this.ds_lttot_pay.reset();		//DATASET ROLLBACK
		this.ds_lttot_pay.applyChange();	//DATASET COMMIT
		return;
	}	
}

/***********************************************************************
 * 설명: 저장버튼 클릭시
 ************************************************************************/
this.fn_save= function()
{	
	// validation 체크
	if(!this.gfn_checkValidation_NoUpdChk(this.DS_WRKCP, this.ds_validation)) {
		return;
	}
	var sSvcID        	= "tbhrmWrkcpCUD";                    
	var sController   	= "hsco/pms/sls/hou/ctr/SLS020205/approveU.do";	
	var sInDatasets   	= "input1=ds_lttot_pay:U";
	var sOutDatasets  	= "";
	var sArgs = "";	
	Ex.core.tran(this,sSvcID, sController, sInDatasets, sOutDatasets, sArgs);	
}

/***********************************************************************
 * 설명: 닫기
 ************************************************************************/
this.btn_Close_onclick = function(obj:Button,  e:nexacro.ClickEventInfo)
{
	this.close();
}

/***********************************************************************************
* 설명	: 트랜잭션 콜백함수를 처리한다.
***********************************************************************************/
this.fn_callBack = function (strSvcId, nErrorCode, strErrorMsg)
{ 
	//에러 처리
	if (nErrorCode < 0) {
		//return Ex.core.comMsg("alert", strErrorMsg);
	}
	else {
		if(strSvcId == "approveList"){
		    var falt_amount = this.ds_lttot_pay.getColumn(this.ds_lttot_pay.rowposition , "PAYAMT");
			var mt_amount_kr = this.fn_numToHangul(falt_amount) + '원';
			this.ds_lttot_pay.setColumn( 0 , "PAYAMT_KR" , mt_amount_kr);
			
				if(this.ds_lttot_pay.getColumn( 0 , ELCTRN_SANCTN_NO) != null)
				{
					this.div_detail01.edt_DAYCNT02.set_readonly(true);
					this.div_detail01.edt_DAYCNT03.set_readonly(true);
					this.div_detail01.edt_DAYCNT04.set_readonly(true);
					this.div_detail01.edt_DAYCNT05.set_readonly(true);
				}	
		}
		if(strSvcId == "tbhrmWrkcpR"){
			var sanctnknd = this.DS_WRKCP.getColumn(this.DS_WRKCP.rowposition, "SANCTN_KND");
			if(sanctnknd != '0'){ //결재가 진행되면 수정불가
				this.div_detail01.cmb_DCLZ_SE.set_readonly(true);
				this.div_detail01.cal_BGNDT.set_readonly(true);
				this.div_detail01.cal_ENDDT.set_readonly(true);
				this.div_detail01.cmb_AM_PM_AT.set_readonly(true);
				this.div_detail01.edt_DAYCNT.set_readonly(true);
				this.div_detail01.btn_Vrsc_man_search.set_readonly(true);
				this.div_detail01.edt_PRVONSH.set_readonly(true);
			}
		}
		if(strSvcId == "approve"){
			var brow = this.ds_approve.getColumn(0,"O_URL");
			system.execBrowser(brow); 
		}
	}
}

/***********************************************************************************
* 설명	: 결재
***********************************************************************************/
this.btn_approval_onclick = function(obj:Button,  e:nexacro.ClickEventInfo)
{
	var sanctnknd = this.ds_lttot_pay.getColumn(0 , "ELCTRN_SANCTN_NO");

	if(sanctnknd != null){
		this.gfn_message("info.처리불가","이미 결재가 진행되었습니다.");
		return false;
	}	

	var account = this.div_detail01.edt_DAYCNT03.value;
	var bank_nm = this.div_detail01.edt_DAYCNT05.value;
	var pay_tmlmt = this.ds_lttot_pay.getColumn(0 , "PAY_TMLMT");
	var cnvrs_de = this.ds_lttot_pay.getColumn(0 , "RENT_LTTOT_CNVRS_DE");
	
	var filds = new Array(41);
	filds[0] = this.div_detail01.edt_VRSC_MAN_CALL00.value;  //지출금액
	filds[1] = this.div_detail01.edt_DAYCNT00.value;    //아파트명
	filds[2] = this.div_detail01.edt_DAYCNT01.value;    //계약자
	filds[3] = this.div_detail01.edt_DAYCNT02.value; //성명
	filds[4] = this.div_detail01.edt_VRSC_MAN_CALL00.value; // 금액
	filds[5] = bank_nm +' '+account ;     // 계좌번호
	filds[6] = pay_tmlmt +' '+ cnvrs_de; // 잔금납부일
	filds[7] = this.div_detail01.edt_DAYCNT04.value;     // 지출과목
		
	var dataValue = filds.join("|");
	var dataTitle = "임대보증금 지출";
	var title     = "임대보증금 지출";
	
	this.ds_approve.clearData();	
	this.ds_approve.addRow();
	
	this.ds_approve.setColumn(0, "TITLE",      title                );
	this.ds_approve.setColumn(0, "DATA_TITLE", dataTitle            );
	this.ds_approve.setColumn(0, "DATA_VALUE", dataValue            );
	this.ds_approve.setColumn(0, "DEPT_CD",    this.ds_cond00.getColumn(0 , "DEPT_CODE"));
	this.ds_approve.setColumn(0, "EMP_CD",     this.ds_cond00.getColumn(0 , "EMPNO"));
	this.ds_approve.setColumn(0, "EMPNO", 	   this.ds_cond00.getColumn(0 , "EMPNO"));
	this.ds_approve.setColumn(0, "CNTRCTR_NO", this.ds_cond00.getColumn( 0 , "CNTRCTR_NO"));
	this.ds_approve.setColumn(0, "PAY_SN" , this.ds_cond00.getColumn( 0 , "PAY_SN"));
	
	var sSvcID        	= "approve";                    
	var sController   	= "hsco/pms/sls/hou/ctr/SLS020205/approveU.do";	
	var sInDatasets   	= "input1=ds_approve";
	var sOutDatasets  	= "ds_approve=output1";
	var sArgs = "";	
	
	Ex.core.tran(this,sSvcID, sController, sInDatasets, sOutDatasets, sArgs);	
}

]]></Script>
  </Form>
</FDL>
