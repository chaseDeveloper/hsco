<?xml version="1.0" encoding="utf-8"?>
<FDL version="1.5">
  <TypeDefinition url="..\..\default_typedef.xml"/>
  <Form id="EIS030207" classname="" inheritanceid="" position="absolute" titletext="사업정보" left="0" top="0" width="1059" height="735" onload="EIS030207_onload" oninit="EIS030207_oninit" onbeforeclose="EIS030207_onbeforeclose">
    <Layouts>
      <Layout>
        <ImageViewer id="popImv" taborder="0" stretch="fixaspectratio" onclick="imv_onclick" visible="false" left="0" top="0" right="10" bottom="0" onmouseleave="imv_onmouseleave" style2="background:#8fffff1b;align:center;"/>
        <Div id="div_search" taborder="1" left="0" top="0" right="28" height="33" cssclass="div_WFSA_Box">
          <Layouts>
            <Layout>
              <Static id="sta_CL_SE" taborder="11" text="사업코드" cssclass="sta_WFSA_Label" left="15" top="6" width="60" height="20"/>
              <Combo id="cmb_bsns_code" taborder="12" innerdataset="ds_BSNS" codecolumn="BSNS_CODE" datacolumn="BSNS_ALL_NM" displayrowcount="15" onitemchanged="fn_bsnsChanged" cssclass="cmb_WF_Essential" left="79" top="5" width="350" height="21"/>
            </Layout>
          </Layouts>
        </Div>
        <Div id="div_WORK" taborder="2" left="0" top="33" right="28" bottom="0">
          <Layouts>
            <Layout width="1031" height="676">
              <Static id="sta_1" taborder="69" text="사업정보" cssclass="sta_WF_Title02" left="0" top="12" right="896" height="19"/>
              <Static id="sta_gud_h00" taborder="70" text="10" visible="false" left="0" top="0" right="310" height="10" style="background:#dc143c3c;align:center;"/>
              <Div id="div_3" taborder="71" left="731" top="0%" width="300" height="33.19%">
                <Layouts>
                  <Layout>
                    <Static id="sta_gud_h01" taborder="13" text="10" visible="false" left="0" top="0" right="0" height="10" style="background:#dc143c3c;align:center;"/>
                    <Static id="sta_gud_h02" taborder="14" text="5" visible="false" left="0" top="29" right="0" height="5" style="background:#dc143c3c;align:center;"/>
                    <Static id="sta_1" taborder="15" text="조감도 사진" cssclass="sta_WF_Title02" left="0" top="12" right="248" height="19"/>
                    <ImageViewer id="imv3" taborder="16" stretch="fixaspectratio" onclick="imv_onclick" left="0" top="34" right="0" bottom="27"/>
                  </Layout>
                </Layouts>
              </Div>
              <Div id="div_0" taborder="74" left="0" top="29" width="721" height="176">
                <Layouts>
                  <Layout>
                    <Static id="sta_bg3" taborder="270" cssclass="sta_WF_Labelbg" left="98" top="73" right="0" height="35"/>
                    <Static id="sta_18" taborder="287" text="사업기간" cssclass="sta_WF_Label" left="0" top="73" width="107" height="35"/>
                    <Static id="sta_32" taborder="294" text="~" left="245" top="80" width="17" height="21"/>
                    <Calendar id="cal_32" taborder="313" autoselect="true" dateformat="yyyy-MM-dd" onchanged="tab_tab1_div_0_cal_32_onchanged" left="109" top="80" width="130" height="21" style="buttonsize:0;border:0 solid #ffffffff ;align:center middle;" readonly2="1" readonly="true"/>
                    <Calendar id="cal_33" taborder="314" autoselect="true" dateformat="yyyy-MM-dd" onchanged="tab_tab1_div_0_cal_32_onchanged" left="261" top="80" width="130" height="21" style="buttonsize:0;border:0 solid #ffffffff ;align:center middle;" readonly2="1" readonly="true"/>
                    <Static id="sta_00" taborder="322" text="공사개요" cssclass="sta_WF_Label" left="0" top="5" width="107" height="35"/>
                    <Static id="sta_bg00" taborder="323" cssclass="sta_WF_Labelbg" left="106" top="5" right="0" height="35"/>
                    <Edit id="edt_00" taborder="324" imemode="hangul" maxlength="100" autoselect="true" left="109" top="12" right="3" height="21" readonly2="1" style="border:0 solid #ffffffff ;" readonly="true"/>
                    <Static id="sta_bg09" taborder="325" cssclass="sta_WF_Labelbg" left="106" top="107" right="0" height="35"/>
                    <Edit id="edt_01" taborder="326" imemode="hangul" maxlength="100" autoselect="true" left="109" top="114" right="3" height="21" readonly2="1" style="border:0 solid #ffffffff ;" readonly="true"/>
                    <Static id="sta_03" taborder="327" text="건립규모" cssclass="sta_WF_Label" left="0" top="107" width="107" height="35"/>
                    <Static id="sta_bg02" taborder="349" cssclass="sta_WF_Labelbg" left="98" top="39" right="0" height="35"/>
                    <Static id="sta_11" taborder="350" text="사업위치" cssclass="sta_WF_Label" left="0" top="39" width="107" height="35"/>
                    <Edit id="edt_22" taborder="351" imemode="hangul" maxlength="100" autoselect="true" onchanged="tab_tab1_div_0_edt_22_onchanged" left="109" top="46" right="3" height="21" readonly2="1" style="border:0 solid #ffffffff ;" readonly="true"/>
                    <Static id="sta_bg10" taborder="357" cssclass="sta_WF_Labelbg" left="103" top="141" right="0" height="35"/>
                    <Static id="sta_41" taborder="358" text="총사업비" cssclass="sta_WF_Label" left="0" top="141" width="107" height="35"/>
                    <MaskEdit id="mae_31" taborder="360" limitbymask="both" left="109" top="148" width="107" height="21" style="border:0 solid #ffffffff ;padding:1 4 0 4;align:left middle;" readonly2="1" readonly="true" mask="###,###,###,###,##0" type="number"/>
                    <Static id="sta_01" taborder="361" text="원" left="224" top="148" width="17" height="21" visible="false"/>
                  </Layout>
                </Layouts>
              </Div>
              <Static id="sta_gud_v03" taborder="75" text="10" visible="false" left="721" top="0" bottom="497" width="10" style="background:#1b3cd23c;"/>
              <Static id="sta_gud_h02" taborder="76" text="5" visible="false" left="0" top="29" right="310" height="5" style="background:#dc143c3c;align:center;"/>
              <Div id="Div00" taborder="77" left="37.25%" top="107" right="61.2%" height="24" style="background:white;">
                <Layouts>
                  <Layout/>
                </Layouts>
              </Div>
              <WebBrowser id="chart1" left="0.97%" top="239" height="414" taborder="78" width="32.01%"/>
              <WebBrowser id="chart2" left="34.04%" top="239" height="414" taborder="79" width="32.01%"/>
              <WebBrowser id="chart3" top="239" right="0.97%" height="414" taborder="80" width="32.01%"/>
            </Layout>
          </Layouts>
        </Div>
        <Static id="sta_gud_v01" taborder="3" text="28" visible="false" top="0" right="0" bottom="0" width="28" style="background:#1b3cd23c;align:center;"/>
        <Div id="Div00" taborder="4" left="22.1%" top="139" right="77.05%" height="24" style="background:white;"/>
      </Layout>
    </Layouts>
    <Bind>
      <BindItem id="item03" compid="div_WORK.div_0.edt_22" propid="value" datasetid="ds_BSNS_SUMRY" columnid="ADRES"/>
      <BindItem id="item05" compid="div_WORK.div_0.cal_32" propid="value" datasetid="ds_BSNS_SUMRY" columnid="BGNDE_PD"/>
      <BindItem id="item06" compid="div_WORK.div_0.cal_33" propid="value" datasetid="ds_BSNS_SUMRY" columnid="ENDDE_PD"/>
      <BindItem id="item07" compid="div_WORK.div_0.mae_31" propid="value" datasetid="ds_BSNS_SUMRY" columnid="TOT_WCT"/>
      <BindItem id="item21" compid="div_WORK.div_0.edt_00" propid="value" datasetid="ds_BSNS_SUMRY" columnid="CNTRWK_SUMRY"/>
      <BindItem id="item22" compid="div_WORK.div_0.edt_01" propid="value" datasetid="ds_BSNS_SUMRY" columnid="ERC_SCALE"/>
    </Bind>
    <Objects>
      <Dataset id="ds_BSNS_SUMRY" useclientlayout="1">
        <ColumnInfo>
          <Column id="BSNS_CODE" type="STRING" size="256"/>
          <Column id="ZIP" type="STRING" size="256"/>
          <Column id="ADRES" type="STRING" size="256"/>
          <Column id="ADRES_DETAIL" type="STRING" size="256"/>
          <Column id="TOT_WCT" type="STRING" size="256"/>
          <Column id="BGNDE_PD" type="STRING" size="256"/>
          <Column id="ENDDE_PD" type="STRING" size="256"/>
          <Column id="BSNS_CONFM_DE" type="STRING" size="256"/>
          <Column id="REWARD_PBLANC_DE" type="STRING" size="256"/>
          <Column id="STRWRK_DE" type="STRING" size="256"/>
          <Column id="COMPET_DE" type="STRING" size="256"/>
          <Column id="MVN_DE" type="STRING" size="256"/>
          <Column id="BSNS_AR" type="STRING" size="256"/>
          <Column id="TOTAR" type="STRING" size="256"/>
          <Column id="BILDNG_AR" type="STRING" size="256"/>
          <Column id="OPERTN_AR" type="STRING" size="256"/>
          <Column id="CMPNS_AR" type="STRING" size="256"/>
          <Column id="BDTLDR" type="STRING" size="256"/>
          <Column id="MEASRMT_RT" type="STRING" size="256"/>
          <Column id="GREENS_RT" type="STRING" size="256"/>
          <Column id="CNTRWK_SUMRY" type="STRING" size="256"/>
          <Column id="TCHNLGY_ND_MSRC" type="STRING" size="256"/>
          <Column id="ERC_SCALE" type="STRING" size="256"/>
          <Column id="TY_ACCTO_HSHLD" type="STRING" size="256"/>
          <Column id="DSGN_ENTRPS" type="STRING" size="256"/>
          <Column id="CNSTRCT_ENTRPS" type="STRING" size="256"/>
          <Column id="SPRVISN_ENTRPS" type="STRING" size="256"/>
          <Column id="SPT_AGENT" type="STRING" size="256"/>
          <Column id="INQRY_TLPHON" type="STRING" size="256"/>
          <Column id="FILE_SN" type="STRING" size="256"/>
          <Column id="FILE_SN_IMG1" type="STRING" size="256"/>
          <Column id="FILE_SN_IMG2" type="STRING" size="256"/>
          <Column id="FILE_SN_IMG3" type="STRING" size="256"/>
          <Column id="OPERT_CL" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_cond1">
        <ColumnInfo>
          <Column id="BSNS_CODE" type="STRING" size="256"/>
          <Column id="FILE_SN" type="STRING" size="256"/>
          <Column id="CNTRCT_NO" type="STRING" size="11"/>
          <Column id="CNST_CODE" type="STRING" size="4"/>
          <Column id="NO_NM" type="STRING" size="1"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_BSNS" useclientlayout="0">
        <ColumnInfo>
          <Column id="BSNS_CODE" type="string" size="5"/>
          <Column id="BSNS_NM" type="string" size="100"/>
          <Column id="BSNS_ALL_NM" type="string" size="100"/>
          <Column id="BSNS_TY" type="string" size="3"/>
          <Column id="RM" type="string" size="200"/>
          <Column id="STRWRK_DE" type="string" size="8"/>
          <Column id="COMPET_DE" type="string" size="8"/>
          <Column id="BSNS_CONFM_DE" type="string" size="8"/>
          <Column id="MVN_DE" type="string" size="8"/>
          <Column id="RN" type="string" size="8"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_files" useclientlayout2="1" useclientlayout="true">
        <ColumnInfo>
          <Column id="FILE_SN" type="BIGDECIMAL" size="21"/>
          <Column id="FILE_ORDR" type="BIGDECIMAL" size="4"/>
          <Column id="FILE_NM" type="STRING" size="255"/>
          <Column id="CHK" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_images" useclientlayout2="1">
        <ColumnInfo>
          <Column id="FILE_SN" type="BIGDECIMAL" size="21"/>
          <Column id="FILE_ORDR" type="BIGDECIMAL" size="4"/>
          <Column id="COL" type="STRING" size="256"/>
          <Column id="FILE_NM" type="STRING" size="255"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_validation">
        <ColumnInfo>
          <Column id="compId" type="STRING" size="256"/>
          <Column id="colId" type="STRING" size="256"/>
          <Column id="PK" type="STRING" size="256"/>
          <Column id="notNull" type="STRING" size="256"/>
          <Column id="type" type="STRING" size="256"/>
          <Column id="nlength" type="STRING" size="256"/>
          <Column id="from" type="STRING" size="256"/>
          <Column id="to" type="STRING" size="256"/>
          <Column id="lengthChkGb" type="STRING" size="256"/>
          <Column id="msgId" type="STRING" size="256"/>
          <Column id="expr" type="STRING" size="256"/>
          <Column id="func" type="STRING" size="256"/>
        </ColumnInfo>
        <Rows>
          <Row>
            <Col id="compId">div_0</Col>
            <Col id="colId">cal_32</Col>
            <Col id="msgId">사업기간</Col>
            <Col id="to">cal_33</Col>
          </Row>
        </Rows>
      </Dataset>
      <Dataset id="ds_1" useclientlayout2="1">
        <ColumnInfo>
          <Column id="PLAN" type="BIGDECIMAL" size="21"/>
          <Column id="ACMSLT" type="BIGDECIMAL" size="4"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_2" useclientlayout2="1">
        <ColumnInfo>
          <Column id="TOT_AMT" type="BIGDECIMAL" size="21"/>
          <Column id="REWARD_AMT" type="BIGDECIMAL" size="4"/>
          <Column id="PROGRS_RT" type="BIGDECIMAL" size="4"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_3" useclientlayout2="1">
        <ColumnInfo>
          <Column id="LTTOT_RT" type="BIGDECIMAL" size="21"/>
          <Column id="RTRVL_RT" type="BIGDECIMAL" size="4"/>
        </ColumnInfo>
      </Dataset>
    </Objects>
    <Script type="xscript5.0"><![CDATA[/***********************************************************************
 * 화면ID   : EIS030207.xfdl
 * 화면명   : 사업지구현황등록
 * 화면설명 :
 * 작성일   :
 * 작성자   :
 * 수정이력 :
 ***********************************************************************
 *     수정일     수정자   내용
 ***********************************************************************
 *
 ***********************************************************************
 */

/***********************************************************************
 * Script Include
 ***********************************************************************/
// 시스템 공통 라이브러리 Include
include "lib::comInclude.xjs";
include "pms_lib::pmsUtilInclude.xjs";
include "lib::rMateChartH5.xjs";
include "lib::rMateChartH5License.xjs";

/***********************************************************************
 * 화면 변수 선언부
 ***********************************************************************/
this.FILE_MANAGER = null;


/***********************************************************************
 * onInit / onLoad 영역
 ***********************************************************************/
this.EIS030207_oninit = function(obj:Form, e:nexacro.InitEventInfo)
{
	this.fn_init();				//공통 폼 초기화
	this.fn_init_form();		//폼 초기화
	this.fn_init_dataset();		//Dataset 초기화
}

this.EIS030207_onload = function(obj:Form, e:nexacro.LoadEventInfo)
{
	this.fn_loadCombo();	// 공통코드처리

	var fileConfig = {
		 onChange: this.fn_onFileSelected
		,onSuccess : this.fn_onFileSuccess
	};
	this.FILE_MANAGER = new this.fileManager(this, "PMS", "PRJ");
	this.FILE_MANAGER.init(fileConfig);
	
	// 차트 set
	var host = application.services["svcurl"].url;
	var htmlUrl = host + "rmate/nexacroChartH5Sample.html";		// 차트를 그릴 html의 url
	var scriptRootUrl = host + "rmate";							// rMateChartH5의 assets과 js가 저장된 url
	var chartVars = this.makeChartVars();
	this.rMateChartCreate(this.div_WORK.chart1, scriptRootUrl, htmlUrl, chartVars);	// 차트1 생성
	this.rMateChartCreate(this.div_WORK.chart2, scriptRootUrl, htmlUrl, chartVars);	// 차트2 생성
	this.rMateChartCreate(this.div_WORK.chart3, scriptRootUrl, htmlUrl, chartVars);	// 차트3 생성
}

this.EIS030207_onbeforeclose = function(obj:Form, e:nexacro.CloseEventInfo)
{
	this.rMateChartClear(this.div_WORK.chart1);		// 차트1 clear
	this.rMateChartClear(this.div_WORK.chart2);		// 차트2 clear
	this.rMateChartClear(this.div_WORK.chart3);		// 차트3 clear
}


/***********************************************************************
 * Form/Dataset 오브젝트 초기화
 ***********************************************************************/
/*
 * 함수명		: initForm
 * 설명			: Form을 초기화한다.
 * params		: None
 * return Type	: None
 * 사용법		: this.initForm();
 */
this.fn_init_form = function()
{}


/*
 * 함수명		: fn_init_dataset
 * 설명 		: Dataset을 초기화한다.
 *					주로, 조건 Dataset들(ds_cond, ds_cond_00, ds_cond_01, ...) 을 초기화한다.
 * params		: None
 * return Type	: None
 * 사용법		: this.fn_init_dataset();
 */
this.fn_init_dataset = function()
{
	this.gfn_initCondDs(this, this.div_search);		// 조건에 사용되는 Dataset 초기화
	this.checkDs.push(this.ds_BSNS_SUMRY);			
}



/***********************************************************************
 * 공통 코드 조회
 ***********************************************************************/
/*
 * 함수명		: fn_loadCombo
 * 설명			: 화면의 Combo 에 데이터를 불러온다.
 * params		: None
 * return Type	: None
 * 사용법		: this.fn_loadCombo();
 */
this.fn_loadCombo = function ()
{
	var callback = null;
	this.fn_fill_combo(this.div_search.cmb_bsns_code, "hsco/pms/prj/bsnsCdList.do", "선택", callback);		// 사업코드목록
}


/*
 * 함수명		: fn_search
 * 설명			: 조회 이벤트 처리
 * params		: None
 * return Type	: None
 * 사용법		: this.fn_search();
 */
this.fn_search = function()
{
	var bsnsCode = this.ds_BSNS.getColumn(this.ds_BSNS.rowposition, "BSNS_CODE") || '';	// 사업코드
	
	if(bsnsCode == ''){
		this.alert("사업코드를 선택하세요.");
		return;
	}
	
	this.fn_bsnsChanged(this.div_search.cmb_bsns_code);
}



/**********************************************************************
 * CALL TRANSACTION 영역
 **********************************************************************/
/*
 * 함수명		: fn_transaction
 * 설명			: Transaction 요청 처리 함수
 * params		: strSvcId : 서비스요청 ID
 * return Type	: None
 * 사용법		: this.fn_transaction("SELECT");
 */
this.fn_transaction = function(strSvcId)
{
	var sInDatasets  = "";
	var sOutDatasets = "";
	var sController  = "";
	switch (strSvcId) {
		case "mList":		// 사업개요 조회
			sController  = "hsco/pms/prj/PRJ040201/mList.do";
			sInDatasets  = "input1=ds_cond1";
			sOutDatasets = "ds_BSNS_SUMRY=output1";
			break;
		case "fileList":	// 첨부파일 조회
			this.ds_cond1.setColumn(0, "BSNS_CODE", this.ds_BSNS_SUMRY.getColumn(0, "BSNS_CODE"));
			this.ds_cond1.setColumn(0, "FILE_SN",   this.ds_BSNS_SUMRY.getColumn(0, "FILE_SN"));
			sController  = "hsco/pms/prj/PRJ040201/fileList.do";
			sInDatasets  = "input1=ds_cond1";
			sOutDatasets = "ds_images=output1 ds_files=output2";
			break;
		case "chart":		// 차트 조회
			sController  = "hsco/eis/eis/EIS030207/chart.do";
			sInDatasets  = "input1=ds_cond1";
			sOutDatasets = "ds_1=output1 ds_2=output2 ds_3=output3";
			break;
	}

	Ex.core.tran(this, strSvcId, sController, sInDatasets, sOutDatasets);// , "", sCallbackFunc, sShowProgress, bAsync, bBinary);
}



/**********************************************************************
 * Transaction Callback 영역
 ***********************************************************************/
/*
 * 함수명		: fn_callBack
 * 설명			: Transaction Callback 처리
 * params		: strSvcId    : 서비스요청 ID
 *					nErrorCode  : 오류 메시지 코드 ([예] 0 : Success, 그밖의 경우, error)
 *					strErrorMsg : 오류 메시지([예]  success.insert|정상적으로 등록되었습니다.)
 * return Type	: None
 * 사용법		:
 */
this.fn_callBack = function (strSvcId, nErrorCode, strErrorMsg)
{
	if (nErrorCode != 0){
		return this.gfn_callback_message(strSvcId, nErrorCode, strErrorMsg);
	}

	switch(strSvcId){
		case "mList":		// 사업개요 조회
			var bsnsCode = this.ds_BSNS.getColumn(this.ds_BSNS.rowposition, "BSNS_CODE") || '';	// 사업코드
			
			if(bsnsCode == ''){
				return;
			}
	
			this.fn_transaction("fileList");	// 첨부파일 조회
			this.fn_transaction("chart");		// 차트 조회
			break;
		case "fileList":	// 첨부파일 조회
			this.fn_procFiles(this.ds_images);	// 이미지 set
			break;
		case "chart":		// 차트 조회
			this.chart_data_create();			// 차트생성
			break;
	}
}



/**********************************************************************
 * 사용자정의 함수
 ***********************************************************************/
/*
 * 함수명		: fn_bsnsChanged
 * 설명			: 사업코드 변경
 * params		: None
 * return Type	: None
 * 사용법		: this.fn_bsnsChanged
 */
this.fn_bsnsChanged = function(obj:Combo, e:nexacro.ItemChangeEventInfo)
{
	var idx = obj.index || 0;
	if(this.ds_BSNS.rowcount == 0)
		return false;

	this.ds_BSNS.set_rowposition(idx);

	this.ds_cond1.setColumn(0, "BSNS_CODE", this.ds_BSNS.getColumn(idx, "BSNS_CODE"));	// 사업코드

	this.ds_BSNS_SUMRY.clearData();
	this.ds_images.clearData();
	this.ds_1.clearData();
	this.ds_2.clearData();
	this.ds_3.clearData();

	this.div_WORK.div_3.imv3.set_image('');

	this.fn_transaction("mList");		// 사업개요 조회
}



/***********************************************************************
 * 이미지 관련 영역
 ***********************************************************************/
/*
 * 함수명		: imv_onclick
 * 설명			: 이미지 onclick - 이미지 미리보기 실행
 * params		: None
 * return Type	: None
 * 사용법		:
 */
this.imv_onclick = function(obj:ImageViewer,  e:nexacro.ClickEventInfo)
{
	if(obj.name == 'popImv'){
		obj.set_visible(false);
		return;
	}

	if(!obj.image)
		return;

	var imv = this.popImv;

	imv.set_image(obj.image);
	imv.set_visible(true);
	imv.bringToFront();
}


/*
 * 함수명		: imv_onmouseleave
 * 설명			: 이미지 미리보기 onmouseleave
 * params		: None
 * return Type	: None
 * 사용법		:
 */
this.imv_onmouseleave = function(obj:ImageViewer, e:nexacro.MouseEventInfo)
{
	obj.set_visible(false);
}


/*
 * 이미지 파일 처리 - 이미지 호출
 */
this.fn_procFiles = function()
{
	for(var i = 0; i < this.ds_images.rowcount; i++){
		var fileSn = this.ds_images.getColumn(i, 'FILE_SN');
		var fileOrder = this.ds_images.getColumn(i, 'FILE_ORDR');
		var fileSe = this.ds_images.getColumn(i, 'COL');		// 이미지구분
		var imgObj = null;

		if(fileSe == 'FILE_SN_IMG3'){	// 조감도
			imgObj = this.div_WORK.div_3.imv3;

			if(!imgObj) continue;
			this.fn_requestImg(imgObj, fileSn, fileOrder);
		}
	}
}


/*
 * 이미지 url set
 */
this.fn_requestImg = function(obj:ImageViewer, fileSn, fileOrder)
{
	var strUrl = application.gv_host + "hsco/cmm/download/viewImage.do";
	var params = "?FILE_SN=" + fileSn + "&FILE_ORDR=" + fileOrder;
	obj.set_image(strUrl + params);
}




/***********************************************************************************
* 설명	: 차트관련 영역
***********************************************************************************/
// 차트 데이터
var chartData1 = [];
var chartData2 = [];
var chartData3 = [];

// 차트 레이아웃
var layoutStr1 = '<rMateChart backgroundColor="#FFFFFF"  borderStyle="none">'
                    +'<Options>'
                        +'<Caption text="공사진행률"/>'									/* 차트제목 */
                        //+'<SubCaption text="( 단위 : 만원 )" textAlign="right" />'				/* 차트단위 */
                        //+'<Legend defaultMouseOverAction="false" useVisibleCheck="false"/>'	/* 범례 */
                    +'</Options>'
					+'<Column2DChart showDataTips="true" columnWidthRatio="0.5" maxColumnWidth="70" selectionMode="single">'
						+'<horizontalAxis>'
							+'<CategoryAxis categoryField="legend"/>'
						+'</horizontalAxis>'
						+'<verticalAxis>'
							+'<LinearAxis />'
						+'</verticalAxis>'
						+'<series>'
							+'<Column2DSeries labelPosition="outside" yField="PLAN" displayName="계획 " outsideLabelYOffset="-2">'
								+'<showDataEffect>'
									+'<SeriesInterpolate/>'
								+'</showDataEffect>'
							+'</Column2DSeries>'
							+'<Column2DSeries labelPosition="outside" yField="ACMSLT" displayName="실적 "  outsideLabelYOffset="-2">'
								+'<showDataEffect>'
									+'<SeriesInterpolate/>'
								+'</showDataEffect>'
							+'</Column2DSeries>'
						+'</series>'
					+'</Column2DChart>'
                +'</rMateChart>';
            
var layoutStr2 = '<rMateChart backgroundColor="#FFFFFF"  borderStyle="none">'
                    +'<Options>'
                        +'<Caption text="보상현황"/>'											/* 차트제목 */
                        //+'<SubCaption text="( 단위 : 만원 )" textAlign="right" />'			/* 차트단위 */
                        //+'<Legend defaultMouseOverAction="false" useVisibleCheck="false"/>'	/* 범례 */
                    +'</Options>'
					+'<Column2DChart showDataTips="true" columnWidthRatio="0.5" maxColumnWidth="70" selectionMode="single">'
						+'<horizontalAxis>'
							+'<CategoryAxis categoryField="legend"/>'
						+'</horizontalAxis>'
						+'<verticalAxis>'
							+'<LinearAxis />'
						+'</verticalAxis>'
						+'<series>'
							+'<Column2DSeries labelPosition="outside" yField="TOT_AMT" displayName="보상총금액 " outsideLabelYOffset="-2">'
								+'<showDataEffect>'
									+'<SeriesInterpolate/>'
								+'</showDataEffect>'
							+'</Column2DSeries>'
							+'<Column2DSeries labelPosition="outside" yField="REWARD_AMT" displayName="보상지출금액 "  outsideLabelYOffset="-2">'
								+'<showDataEffect>'
									+'<SeriesInterpolate/>'
								+'</showDataEffect>'
							+'</Column2DSeries>'
						+'</series>'
					+'</Column2DChart>'
                +'</rMateChart>';

var layoutStr3 = '<rMateChart backgroundColor="#FFFFFF"  borderStyle="none">'
                    +'<Options>'
                        +'<Caption text="분양/회수율"/>'										/* 차트제목 */
                        //+'<SubCaption text="( 단위 : 만원 )" textAlign="right" />'			/* 차트단위 */
                        //+'<Legend defaultMouseOverAction="false" useVisibleCheck="false"/>'	/* 범례 */
                    +'</Options>'
					+'<Column2DChart showDataTips="true" columnWidthRatio="0.5" maxColumnWidth="70" selectionMode="single">'
						+'<horizontalAxis>'
							+'<CategoryAxis categoryField="legend"/>'
						+'</horizontalAxis>'
						+'<verticalAxis>'
							+'<LinearAxis />'
						+'</verticalAxis>'
						+'<series>'
							+'<Column2DSeries labelPosition="outside" yField="LTTOT_RT" displayName="분양률 " outsideLabelYOffset="-2">'
								+'<showDataEffect>'
									+'<SeriesInterpolate/>'
								+'</showDataEffect>'
							+'</Column2DSeries>'
							+'<Column2DSeries labelPosition="outside" yField="RTRVL_RT" displayName="회수율 "  outsideLabelYOffset="-2">'
								+'<showDataEffect>'
									+'<SeriesInterpolate/>'
								+'</showDataEffect>'
							+'</Column2DSeries>'
						+'</series>'
					+'</Column2DChart>'
                +'</rMateChart>';

this.makeChartVars = function() {
	var chartVars = "";

	var rMateOnLoadCallFunction = "rMateChartOnLoad";
	chartVars += "rMateOnLoadCallFunction="+rMateOnLoadCallFunction;

	return chartVars;
}


// 차트 데이터, 레이아웃 set
this.rMateChartOnLoad = function(id) {
	if (id == "chart1") {
		this.rMateChartSetLayout(this.div_WORK.chart1, layoutStr1);
		this.rMateChartSetData(this.div_WORK.chart1, chartData1);
	}
	else if (id == "chart2") {
		this.rMateChartSetLayout(this.div_WORK.chart2, layoutStr2);
		this.rMateChartSetData(this.div_WORK.chart2, chartData2);
	}
	else if (id == "chart3") {
		this.rMateChartSetLayout(this.div_WORK.chart3, layoutStr3);
		this.rMateChartSetData(this.div_WORK.chart3, chartData3);
	}
}


/*
 * 차트 데이터 생성
 */
this.chart_data_create = function()
{
	chartData1 = [];
    chartData2 = [];
    chartData3 = [];
    
    chartData1.push({
		legend : '',
		PLAN   : this.ds_1.getColumn(0, "PLAN"),
		ACMSLT : this.ds_1.getColumn(0, "ACMSLT")
	});
    
    chartData2.push({
		legend : '',
		TOT_AMT    : this.ds_2.getColumn(0, "TOT_AMT"),
		REWARD_AMT : this.ds_2.getColumn(0, "REWARD_AMT")
	});

    chartData3.push({
		legend : '',
		LTTOT_RT : this.ds_3.getColumn(0, "LTTOT_RT"),
		RTRVL_RT : this.ds_3.getColumn(0, "RTRVL_RT")
	});
    
    // 차트 reload
	this.rMateChartSetData(this.div_WORK.chart1, chartData1);
	this.rMateChartSetData(this.div_WORK.chart2, chartData2);
	this.rMateChartSetData(this.div_WORK.chart3, chartData3);
}	
]]></Script>
  </Form>
</FDL>
