<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd" >
<sqlMap namespace="SAL050208_SQL">	
	
	<!-- 화성도시공사 사업자정보 목록조회 -->
	<select id="SAL050208DAO.selectCprInfoList" parameterClass="java.util.HashMap" resultClass="java.util.HashMap">
		<![CDATA[	
		    SELECT 
			         A.BIZRNO
					,A.MTLTY
					,A.RPRSNTV
					,H_DECRYPT(A.RPRSNTV_IHIDNUM)  AS RPRSNTV_IHIDNUM
					,A.JURIRNO
					,A.ZIP
					,A.ADRES
					,A.ADRES_DETAIL
					,A.ADRES_RN
					,A.TELNO
					,A.FAXNO
					,A.EMAIL
					,A.BIZCND
					,A.ITEM					 
			FROM TBPMS_CPR_INFO A
			WHERE 1=1
		]]>	
    </select>      
	
	<!-- 연말정산대상자정보 목록조회 -->
	<select id="SAL050208DAO.selectYndExcclcPrintList" parameterClass="java.util.HashMap" resultClass="java.util.HashMap">
		<![CDATA[			 
	         SELECT 
			         A.EXCCLC_YEAR
					,A.EXCCLC_SE
					,A.EMPNO
					,A.EMPNM
					,A.CLSF_CODE
					,A.EXCCLC_BGNDE
					,A.EXCCLC_ENDDE
					,A.DEPT_CODE
					,A.DEPT_NM
					,A.SRCLS
					,A.OFCPS_CODE
					,A.ECNY_SE
					,A.ECNY_DE
					,A.RETIRE_DE
					,A.LAYOFF_BEGIN_DE
					,A.LAYOFF_ENDDE
					,A.ZIP
					,A.ADRES
					,A.EMPL_SE
					,A.NOW_WORK_SALARY_AMOUNT
					,A.NOW_WORK_BNS_AMOUNT
					,A.NOW_WORK_RCOGN_BNS_AMOUNT
					,A.BEFORE_WORK_1_SALARY
					,A.BEFORE_WORK_1_BNS
					,A.BEFORE_WORK_1_RCOGN_BNS
					,A.BEFORE_WORK_2_SALARY
					,A.BEFORE_WORK_2_BNS
					,A.BEFORE_WORK_2_RCOGN_BNS
					,A.TAXXMPT_OUTNATN_INCOME
					,A.TAXXMPT_NIGHT_ERNM
					,A.ETC_TAXXMPT
					,A.SALARY_TOT_AMOUNT
					,A.BNS_TOT_AMOUNT
					,A.RCOGN_BNS_TOT_AMOUNT
					,A.ERNM_INCME_AMOUNT
					,A.ERNM_DDC
					,A.ERNM_AMOUNT
					,A.BSIS_DDC
					,A.SPOUSE_DDC
					,A.DNTMY_DDC
					,A.COURS_PVLTRT_DDC_65
					,A.COURS_PVLTRT_DDC_70
					,A.DSPSN_DDC
					,A.LADY_HSHLDR_DDC
					,A.MNYCH_BRP_DDC
					,A.CHLDBRTH_ADP_DDC
					,A.MNYCH_DDC
					,A.PARNTS_1_DDC
					,A.HN_DDC_AMOUNT_SM
					,A.IRNCF_DDC
					,A.MCP_DDC
					,A.EDCCT_DDC
					,A.CASH_RCIPT_AMOUNT
					,A.LFSTS_INTR
					,A.PNINT_RPAY_AMOUNT
					,A.BRRW_INTR_RPAY_AMOUNT
					,A.HOUSE_PREPRTN_SVINGS
					,A.MTHT_AM
					,A.HOUSE_CPTAL_DDC
					,A.CTBNY_DDC
					,A.MRRG_INTR_FNRL_DDC
					,A.STD_DDC
					,A.ANNTY_IRNCF
					,A.DDCT_INCOME_AMOUNT
					,A.INDVDL_ANNTY_SVINGS_INCOME_DDC
					,A.ANNTY_SVINGS_INCOME_DDC
					,A.SPT_HNF_TCHNLGY_DDC
					,A.INVT_MXTR_INCOME_DDC
					,A.CREDTCARD_DDC
					,A.GNRLZ_STDTAX
					,A.COMPUT_TAXAMT
					,A.ERNM_TAXAMT_DDC_AMOUNT
					,A.TAXAMT_DDC_6_BELOW
					,A.HOUSE_BRRW_AMOUNT
					,A.FRNTN_PAY
					,A.CNTR_POLITC_CPTAL
					,A.LABRR_STOCK_SVINGS
					,A.INORG_STOCK_SVINGS
					,A.TAXAMT_DDC_SM
					,A.RDCXPT_TAXAMT
					,A.DECSN_TAXAMT_INCMTAX
					,A.DECSN_TAXAMT_AGSPT
					,A.DECSN_TAXAMT_LCLTY_INCMTAX
					,A.DECSN_TAXAMT_EMPLYMINSRNC
					,A.DECSN_TAXAMT_ENCRG_ENDW
					,A.BEFORE_WORK_INCMTAX
					,A.BEFORE_WORK_AGSPT
					,A.BEFORE_WORK_LCLTY_INCMTAX
					,A.NOW_LEV_PREARNGE_INCMTAX
					,A.NOW_LEV_PREARNGE_AGSPT
					,A.NOW_LEV_PREARNGE_LCLTY_INCMTAX
					,A.NOW_LEV_PREARNGE_EMPLYMINSRNC
					,A.NOW_LEV_PREARNGE_ENCRG_ENDW
					,A.NOW_LEV_RESULT_INCMTAX
					,A.NOW_LEV_RESULT_AGSPT
					,A.NOW_LEV_RESULT_LCLTY_INCMTAX
					,A.NOW_LEV_RESULT_EMPLYMINSRNC
					,A.NOW_LEV_RESULT_ENCRG_ENDW
					,A.DDCT_LEV_INCMTAX
					,A.DDCT_LEV_AGSPT
					,A.DDCT_LEV_LCLTY_INCMTAX
					,A.DDCT_LEV_EMPLYMINSRNC
					,A.DDCT_LEV_ENCRG_ENDW
					,A.DDCT_RETUN_INCMTAX
					,A.DDCT_RETUN_AGSPT
					,A.DDCT_RETUN_LCLTY_INCMTAX
					,A.DDCT_RETUN_EMPLYMINSRNC
					,A.DDCT_RETUN_ENCRG_ENDW
					,A.CNTR_CYFD
					,A.ETC_INCOME_DDC_SM
					,A.GNRLZ_LMT_EXCESS_AMOUNT
					
					,A.ANNTY_SVINGS_TAXAMT
					,A.IRNCF_TAXAMT
					,A.MCP_TAXAMT
					,A.EDCCT_TAXAMT
					,A.CNTR_POLITC_TAXAMT
					,A.CNTR_POLITC_UP
					,A.CNTR_POLITC_UP_TAXAMT
					,A.LEGAL_CNTR
					,A.LEGAL_CNTR_TAXAMT
					,A.APPN_CNTR
					,A.APPN_CNTR_TAXAMT
					,A.MTHT_AM_TAXAMT					
					,A.GRNT_IRNCF
					,A.PNINT_RPAY_FNNC
					,A.PNINT_RPAY_RESIDNT
					,A.SUBSCRPT_SVINGS
					,A.HOUSE_SUBSCRPT_GNRLZ
					,A.LABRR_HOUSE_PREPRTN
					,A.SPECL_INCOME_DDC
					
					,NVL((D.SUPORTR_20 + D.SUPORTR_60),0)  AS  SUPORTR
					,D.COURS_PVLTRT_70
					,D.DSPSN_CO
					,D.HLTHINS
					,D.EMPLYMINSRNC
					,D.CHLDRN_6_BELOW
                    ,D.CHLDBRTH_ADP_CHLDRN
		   FROM TBSAL_YND_EXCCLC_DETAIL A
		       ,TBHRM_HR_MASTR C
			   ,VWHRM_DEPT B
			   ,TBSAL_YND_EXCCLC_BSIS D
		   WHERE A.EXCCLC_YEAR = #EXCCLC_YEAR#
		   AND A.EXCCLC_SE = #EXCCLC_SE#
		   AND A.EMPNO IN (#EMPNO2#)
		   AND A.EMPNO = C.EMPNO
		   AND A.EXCCLC_YEAR = D.EXCCLC_YEAR
		   AND A.EXCCLC_SE = D.EXCCLC_SE
		   AND A.EMPNO = D.EMPNO
		   AND A.DEPT_CODE = B.DEPT_CODE
		   /* AND B.USE_AT = '1' */
		   AND B.DEPT_LEVEL_SE IN('1','2')
		   ORDER BY  C.RSPOFC_SE, SFHRM_GET_OFCPSCD(A.EMPNO,C.JSSFC_SE,C.HR_CLSF_SE,C.ECNY_DE), C.PAY_CLSF_SE,  A.EMPNO,C.JSSFC_SE 
		]]>	
    </select>  
    
    <!-- 인적공제 조회 -->
	<select id="SAL050208DAO.selectYndExcclcPrint2List" parameterClass="java.util.HashMap" resultClass="java.util.HashMap">
		<![CDATA[	
			  SELECT     
			       A.EXCCLC_YEAR
						,A.EXCCLC_SE
						,A.EMPNO
						,A.FAMILY_NM
						,SFCOM_DEC_ALL(A.FAMILY_IHIDNUM_ENCPT) AS FAMILY_IHIDNUM_ENCPT
						,A.EMPNM
						,(CASE A.FAMILY_RELATE
		                  WHEN '0' THEN '0'
		                  WHEN '001' THEN '1' WHEN '002' THEN '1' WHEN '003' THEN '1' WHEN '004' THEN '1' 
		                  WHEN '013' THEN '2' WHEN '014' THEN '2' WHEN '017' THEN '2' WHEN '018' THEN '2'
		                  WHEN '005' THEN '3' WHEN '006' THEN '3'
		                  WHEN '007' THEN '4'
		                  WHEN '008' THEN '6' WHEN '009' THEN '6' WHEN '010' THEN '6' WHEN '011' THEN '6' WHEN '012' THEN '6'
		                  END) AS FAMILY_RELATE
						,A.DDC_AT
						,A.ISE_FRGNR_SE
						,A.TROBL_AT
						,A.BELOW_6_AT
						,A.LADY_AT
						,A.COURS_PVLTRT_AT
						,A.CHLDBRTH_ADP_AT
						,A.PARNTS_1_AT	
						,A.GRNT_INSRNC       AS IRNCF1
						,A.GRNT_INSRNC_ETC   AS IRNCF2
						,A.DSPSN_INSRNC      AS IRNCF3
						,A.DSPSN_INSRNC_ETC	 AS IRNCF4			
						,A.EDCCT_SE_DTA
						,NVL(A.EDCCT_DTA,0)  AS EDCCT_DTA
						,NVL(A.CTBNY_DTA,0)  AS CTBNY_DTA
						,A.MCP_SE_DTA
						,NVL(A.MCP_DTA,0)  AS MCP_DTA
						,NVL(A.CREDTCARD_DTA,0)  AS CREDTCARD_DTA
						,NVL(A.DBCD_PRPAY_DTA,0)  AS DBCD_PRPAY_DTA
						,NVL(A.CASH_RCIPT_DTA,0)  AS CASH_RCIPT_DTA
						,NVL(A.TRDIT_MRKT_DTA,0)  AS TRDIT_MRKT_DTA
						,NVL(A.PBTRNSP_TRNSPORT_USE_DTA,0)  AS V						
						,A.EDCCT_SE_ETC
						,NVL(A.EDCCT_ETC,0)  AS EDCCT_ETC
						,NVL(A.CTBNY_ETC,0)  AS CTBNY_ETC
						,A.MCP_SE_ETC
						,NVL(A.MCP_ETC,0)  AS MCP_ETC
						,NVL(A.CREDTCARD_ETC,0)  AS CREDTCARD_ETC
						,NVL(A.DBCD_PRPAY_ETC,0)  AS DBCD_PRPAY_ETC
						,NVL(A.TRDIT_MRKT_ETC,0)  AS TRDIT_MRKT_ETC
						,NVL(A.PBTRNSP_USE_ETC,0)  AS PBTRNSP_USE_ETC				
						
  		    FROM TBSAL_YND_EXCCLC_HN_DDC A
			WHERE A.EMPNO     = #EMPNO#
		    AND A.EXCCLC_YEAR = #EXCCLC_YEAR#
		    AND A.EXCCLC_SE   = #EXCCLC_SE#
		    ORDER BY A.FAMILY_RELATE
		]]>	
    </select>   

</sqlMap>