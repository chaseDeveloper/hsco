<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd" >
<sqlMap namespace="SLS020101_SQL">	

	<!-- 쿼리명 : 계약상세 조회
	설명 : 계약상세 조회 쿼리
	수정일  수정자  수정내용
	
	작성자 : 최승락
	최초작성일 : 2015.08.18
	-->
	<select id="SLS020101DAO.selectHcntrctrInfo" parameterClass="java.util.HashMap" resultClass="java.util.HashMap">
		<![CDATA[
		 WITH tab_01
         AS (SELECT t2.house_cstmr_no AS cntrctr_cstmr_no,
                    t2.cstmr_nm AS cntrctr_nm,
                    t2.cntrctr_ihidnum,
                    t2.cstmr_nm,
                    t2.ihidnum,
                    t2.zip,
                    t2.adres,
                    t2.adres_detail,
                    t2.telno,
                    t2.mbtlno,
                    t2.email,
                    t2.cntrctr_no,
                    t1.house_code,
                    t1.ho,
                    t1.dong,
                    t2.house_cstmr_no,
                    t2.bdnbr,
                    t2.etc_cttpc,
                    t2.rqest_estbs_dm,
                    t2.zip_dm,
                    t2.bdnbr_dm,
                    t2.bass_adres_dm,
                    t2.detail_adres_dm,
                    t2.cntrctr_sttus_code,
                    nvl( t2.lttot_qualf_se, t2.rent_qualf_se) as lttot_qualf_se,
                    t2.rent_qualf_se,
                    t2.cntrct_de,
                    t2.ctrtc_file_cours,
                    t2.ctrtc_file,
                    t2.rent_bgnde,
                    t2.rent_endde,
                    t2.rent_mvn_prarnde,
                    t2.rent_mvn_time,
                    t2.rent_lvhs_de,
                    t2.rent_lttot_cnvrs_de,
                    t2.vat_at,
                    t2.resale_at,
                    t2.nmchange_cnnc_code,
                    t2.cancl_de,
                    t2.rm,
                    t2.biz_owner_name,
                    t1.FLOOR,
                    t1.house_ty_code,
                    t1.lttot_ty_code,
                    t1.rent_ty_code,
                    t1.bass_lttot_amount,
                    t1.bass_gtn,
                    t1.bass_rntchrg,
                    t1.lttot_amount,
                    t1.rntchrg,
                    t1.gtn,
                    t2.FILE_SN,
                    (SELECT house_nm
                       FROM tbsls_house_info
                      WHERE house_code = t1.house_code)
                       AS house_nm,
                    (SELECT resci_resn_code
                       FROM tbsls_hcntrctr_cancl
                      WHERE cntrctr_no = t2.cntrctr_no)
                       AS resci_resn_code,
                    (SELECT suply_amount
                       FROM tbsls_house_ty
                      WHERE     house_code = t1.house_code
                            AND house_ty_code = t1.house_ty_code)
                       AS suply_amount,
                    (SELECT plot_ct
                       FROM tbsls_house_ty
                      WHERE     house_code = t1.house_code
                            AND house_ty_code = t1.house_ty_code)
                       AS plot_ct,
                    (SELECT bildng_ct
                       FROM tbsls_house_ty
                      WHERE     house_code = t1.house_code
                            AND house_ty_code = t1.house_ty_code)
                       AS bildng_ct
               FROM tbsls_house_dong_ho t1,
                    (SELECT t1.house_cstmr_no AS cntrctr_cstmr_no,
                            t1.cstmr_nm AS cntrctr_nm,
                            sfcom_dec_all (t1.ihidnum) AS cntrctr_ihidnum,
                            t1.cstmr_nm,
                            sfcom_dec_all (t1.ihidnum) AS ihidnum,
                            t1.zip,
                            t1.adres,
                            t1.adres_detail,
                            t1.telno,
                            t1.mbtlno,
                            t1.email,
                            t2.cntrctr_no,
                            t2.house_code,
                            t2.ho,
                            t2.dong,
                            t2.house_cstmr_no,
                            t2.bdnbr,
                            t1.etc_cttpc,
                            t2.rqest_estbs_dm,
                            t2.zip_dm,
                            t2.bdnbr_dm,
                            t2.bass_adres_dm,
                            t2.detail_adres_dm,
                            t2.cntrctr_sttus_code,
                            t2.lttot_qualf_se,
                            t2.rent_qualf_se,
                            t2.cntrct_de,
                            t2.ctrtc_file_cours,
                            t2.ctrtc_file,
                            t2.rent_bgnde,
                            t2.rent_endde,
                            t2.rent_mvn_prarnde,
                            t2.rent_mvn_time,
                            t2.rent_lvhs_de,
                            t2.rent_lttot_cnvrs_de,
                            t2.FILE_SN,
                            t2.vat_at,
                            t2.resale_at,
                            t2.nmchange_cnnc_code,
                            t2.cancl_de,
                            t2.rm,
                            t2.biz_owner_name,
                            (SELECT resci_resn_code
                               FROM tbsls_hcntrctr_cancl
                              WHERE cntrctr_no = t2.cntrctr_no)
                               AS resci_resn_code
                       FROM tbsls_house_cstmr t1, tbsls_hcntrctr t2
                      WHERE     t1.house_cstmr_no = t2.house_cstmr_no
                    ]]>
                    	<isEqual property="CNTRCTR_STTUS_CODE" compareValue="01">
                            AND t2.cancl_de IS NULL          
                        </isEqual>
                        <isEqual property="CNTRCTR_STTUS_CODE" compareValue="02">
                            AND t2.cancl_de IS NOT NULL      
                        </isEqual>
                        <isNotEmpty property="CSTMR_NM">
							AND t1.cstmr_nm LIKE '%' || #CSTMR_NM# || '%'
						</isNotEmpty>
				                           
                   <![CDATA[
                                                       ) t2
              WHERE     t1.house_code = t2.house_code(+)
                    AND t1.dong = t2.dong(+)
                    AND t1.ho = t2.ho(+)),
         tab_02
	         AS (SELECT t1.house_cstmr_no AS cntrctr_cstmr_no,
	                t1.house_cstmr_no_sub AS spouse_cstmr_no,
	                t2.cstmr_nm AS spouse_nm,
	                sfcom_dec_all (t2.ihidnum) AS spouse_ihidnum
	           FROM tbsls_hcntrctr t1, tbsls_house_cstmr t2
	          WHERE     t1.house_cstmr_no_sub = t2.house_cstmr_no
	           ]]>
            	<isEqual property="CNTRCTR_STTUS_CODE" compareValue="01">
                    AND t1.cancl_de IS NULL          
                </isEqual>
                <isEqual property="CNTRCTR_STTUS_CODE" compareValue="02">
                    AND t1.cancl_de IS NOT NULL      
                </isEqual>	          
	          <![CDATA[	          
	          )
	          
         /* 계약자2 수정 */
         /* AS (SELECT t1.cntrctr_cstmr_no,
                    t1.family_sn,
                    t1.family_relate,
                    t1.cntrctr_relate,
                    t1.house_cstmr_no AS spouse_cstmr_no,
                    t2.cstmr_nm AS spouse_nm,
                    sfcom_dec_all (t2.ihidnum) AS spouse_ihidnum
               FROM tbsls_hcntrctr_family t1, tbsls_house_cstmr t2
              WHERE     t1.house_cstmr_no = t2.house_cstmr_no
                    AND t1.family_relate IN ('005', '006'))*/
    SELECT a.cntrctr_cstmr_no,
           a.cntrctr_nm,
           a.cntrctr_ihidnum,
           a.cstmr_nm,
           a.ihidnum,
           a.zip,
           a.adres,
           a.adres_detail,
           a.telno,
           a.mbtlno,
           a.email,
           a.cntrctr_no,
           a.house_code,
           a.ho,
           a.dong,
           a.house_cstmr_no,
           a.bdnbr,
           a.etc_cttpc,
           a.rqest_estbs_dm,
           a.zip_dm,
           a.bdnbr_dm,
           a.bass_adres_dm,
           a.detail_adres_dm,
           a.cntrctr_sttus_code,
           a.lttot_qualf_se,
           a.rent_qualf_se,
           a.cntrct_de,
           a.ctrtc_file_cours,
           a.ctrtc_file,
           a.rent_bgnde,
           a.rent_endde,
           a.rent_mvn_prarnde,
           a.rent_mvn_time,
           a.rent_lvhs_de,
           a.rent_lttot_cnvrs_de,
           a.vat_at,
           a.resale_at,
           a.nmchange_cnnc_code,
           a.cancl_de,
           a.rm,
           a.biz_owner_name,
           a.FLOOR,
           a.house_ty_code,
           a.lttot_ty_code,
           a.rent_ty_code,
           a.bass_lttot_amount,
           a.bass_gtn,
           a.bass_rntchrg,
           a.lttot_amount,
           a.rntchrg,
           a.gtn,
           a.house_nm,
           a.suply_amount,
           a.plot_ct,
           a.bildng_ct,
           (SELECT CASE
                      WHEN t.lttot_cnvrs_se IN ('01') THEN '분향전환대기'
                      WHEN t.lttot_cnvrs_se IN ('02') THEN '분양전환'
                      WHEN t.house_se IN ('S1', 'S3', 'S5', 'S9') THEN '분양'
                      WHEN t.house_se IN ('S2', 'S4') THEN '임대'
                      ELSE '영구임대'
                   END
                      AS house_se_nm
              FROM tbsls_house_info t
             WHERE t.house_code = a.house_code)
              AS house_se_nm,
           (SELECT MAX ('자동이체')
              FROM tbsls_house_setle_info s
             WHERE s.cntrctr_no = a.cntrctr_no AND s.setle_se = '02')
              AS auto_chk,
           b.spouse_cstmr_no,
           b.spouse_nm,
           b.spouse_ihidnum,
           a.FILE_SN,
           /*b.family_sn,
           b.family_relate,*/
          /* (SELECT file_sn
              FROM tbcom_cmmn_atchmnfl z
             WHERE     TO_CHAR (file_sn) = a.ctrtc_file
                   AND TO_CHAR (file_ordr) = a.ctrtc_file_cours)
              file_sn,*/
           (SELECT file_ordr
              FROM tbcom_cmmn_atchmnfl z
             WHERE     TO_CHAR (file_sn) = a.FILE_SN
                   AND TO_CHAR (file_ordr) = '1')
              file_ordr,
           (SELECT file_extsn
              FROM tbcom_cmmn_atchmnfl z
             WHERE     TO_CHAR (file_sn) = a.ctrtc_file
                   AND TO_CHAR (file_ordr) = a.ctrtc_file_cours)
              file_extsn,
           (SELECT stre_file_nm
              FROM tbcom_cmmn_atchmnfl z
             WHERE     TO_CHAR (file_sn) = a.ctrtc_file
                   AND TO_CHAR (file_ordr) = a.ctrtc_file_cours)
              stre_file_nm,
           (SELECT orginl_file_nm
              FROM tbcom_cmmn_atchmnfl z
             WHERE     TO_CHAR (file_sn) = a.ctrtc_file
                   AND TO_CHAR (file_ordr) = a.ctrtc_file_cours)
              orginl_file_nm,
           (SELECT REGEXP_SUBSTR (file_ty,
                                  '[^/]+',
                                  1,
                                  1)
              FROM tbcom_cmmn_atchmnfl z
             WHERE     TO_CHAR (file_sn) = a.ctrtc_file
                   AND TO_CHAR (file_ordr) = a.ctrtc_file_cours)
              file_ty
               , nvl((select count(1) from va_receipt v where v.crt_id = a.cntrctr_no),0) 
              + nvl((select count(1) from tbsls_house_rciv_pstmrk v where v.cntrctr_no = a.cntrctr_no),0)
                as rec_cnt
      FROM tab_01 a, tab_02 b
     WHERE     1 = 1
    ]]>
           AND a.cntrctr_cstmr_no = b.cntrctr_cstmr_no(+)
            <isNotEmpty property="CNTRCTR_NO">
           AND a.cntrctr_no = #CNTRCTR_NO#
          </isNotEmpty>
          <isNotEmpty property="HOUSE_CODE">
           AND a.house_code = #HOUSE_CODE#
          </isNotEmpty>
          <isNotEmpty property="DONG">
           AND a.dong = #DONG#
          </isNotEmpty>
          <isNotEmpty property="HO">
           AND a.ho = #HO#
          </isNotEmpty>
           
	</select>
	
	
	<!-- 압류/대출/국민주택기금 정보  2016.03.08 -->
	<select id="SLS020101DAO.selectHcntrctrInfo2" parameterClass="java.util.HashMap" resultClass="java.util.HashMap">	
		SELECT *
			  FROM (SELECT '1' AS F_LINK
			              ,MAX(CDIT_GRNTE_BANK) AS F_CDIT_GRNTE_BANK
			              ,MAX(TRNSFR_DE) AS F_TRNSFR_DE
			              ,SUM(CDIT_TRNSFR_AMOUNT) AS F_CDIT_TRNSFR_AMOUNT
			              ,TO_CHAR(SUM(CDIT_TRNSFR_AMOUNT), '999G999G999') AS F_CDIT_TRNSFRS_AMOUNT
			          FROM TBSLS_HCNTRCTR_LON /* 주택계약자대출 */
			         WHERE CNTRCTR_NO = #CNTRCTR_NO#
			           AND RELIS_DE IS NULL) A
			      ,(SELECT '1' AS F_LINK
			              ,MAX(CRDTR_NM) AS F_CRDTR_NM
			              ,MAX(CDIT_DECSN_DE) AS F_CDIT_DECSN_DE
			              ,SUM(DET_AMOUNT) AS F_DET_AMOUNT
			              ,TO_CHAR(SUM(DET_AMOUNT), '999G999G999') AS F_DETS_AMOUNT
			          FROM TBSLS_HCNTRCTR_SEIZR /* 주택계약자압류 */
			         WHERE CNTRCTR_NO = #CNTRCTR_NO#
			           AND RELIS_DE IS NULL) B
			      ,(SELECT '1' AS F_LINK
			              ,MAX(ALTRV_LON_DE) AS F_ALTRV_LON_DE
			              ,SUM(KJF) AS F_KJF_AMT
			              ,TO_CHAR(SUM(KJF), '999G999G999') AS F_KJFS_AMT
			          FROM TBSLS_HCNTRCTR_KJF_PAY_CNFIRM /* 주택계약자국민주택기금납부확인 */  
			         WHERE CNTRCTR_NO = #CNTRCTR_NO#) C
			
			 WHERE A.F_LINK = B.F_LINK
			   AND A.F_LINK = C.F_LINK    		
	</select>
	
		
	<!-- 계약번호  -->
	<select id="SLS020101DAO.selectCntrctrNo" parameterClass="java.util.Map" resultClass="String">	
		SELECT SUBSTR(NVL(MAX(CNTRCTR_NO),#HOUSE_CODE#),1,3)||LPAD(NVL(SUBSTR(MAX(CNTRCTR_NO),4,5),0)+1,5,0)||'01' AS CNTRCTR_NO
		  FROM TBSLS_HCNTRCTR
         WHERE 1 = 1
           AND HOUSE_CODE = #HOUSE_CODE#           		
	</select>
	

	<!-- 쿼리명 : 계약정보 입력
	설명 : 계약정보 입력 쿼리
	수정일  수정자  수정내용
	
	작성자 : 최승락
	최초작성일 : 2015.08.27
	-->
	<insert id="SLS020101DAO.insertHcntrctrInfo" parameterClass="java.util.Map">
		INSERT INTO TBSLS_HCNTRCTR
		(
			  CNTRCTR_NO
			, HOUSE_CODE
			, HO
			, DONG
			, HOUSE_CSTMR_NO
			, BDNBR						/* 건물번호 */		
			, RQEST_ESTBS_DM            /* 청구설정_DM */
			, ZIP_DM
			, BDNBR_DM                  /*건물번호_DM*/
			, BASS_ADRES_DM
			, DETAIL_ADRES_DM
			, CNTRCTR_STTUS_CODE
			, LTTOT_QUALF_SE
			, RENT_QUALF_SE
			, CNTRCT_DE
			, CTRTC_FILE_COURS
			, CTRTC_FILE
			, RENT_BGNDE
			, RENT_ENDDE
			, RENT_MVN_PRARNDE
			, RENT_MVN_TIME
			, RENT_LVHS_DE
			, RENT_LTTOT_CNVRS_DE
			, VAT_AT
			, RESALE_AT
			, NMCHANGE_CNNC_CODE
			, CANCL_DE
			, RM
			, BIZ_OWNER_NAME
			, HOUSE_CSTMR_NO_SUB
			, REGISTER_ID
			, REGIST_DT
			, UPDUSR_ID
			, UPDT_DT
		)
		VALUES
		(
			  #CNTRCTR_NO#
			, #HOUSE_CODE#
			, #HO#
			, #DONG#
			, #CNTRCTR_CSTMR_NO#
			, #BDNBR#
			, #RQEST_ESTBS_DM#
			, #ZIP_DM#
			, #BDNBR_DM#
			, #BASS_ADRES_DM#
			, #DETAIL_ADRES_DM#
			, #CNTRCTR_STTUS_CODE#
			, #LTTOT_QUALF_SE#
			, #RENT_QUALF_SE#
			, NVL(#CNTRCT_DE#, TO_CHAR(SYSDATE, 'YYYYMMDD'))
			, #CTRTC_FILE_COURS#
			, #CTRTC_FILE#
			, #RENT_BGNDE#
			, #RENT_ENDDE#
			, #RENT_MVN_PRARNDE#
			, #RENT_MVN_TIME#
			, #RENT_LVHS_DE#
			, #RENT_LTTOT_CNVRS_DE#
			, #VAT_AT#
			, #RESALE_AT#
			, #NMCHANGE_CNNC_CODE#
			, #CANCL_DE#
			, #RM#
			, #BIZ_OWNER_NAME#
			, #SPOUSE_CSTMR_NO#
			, #S_USER_ID#
			, SYSDATE
			, #S_USER_ID#
			, SYSDATE
		)
	</insert>
	

	<!-- 쿼리명 : 주택동호 테이블 수정
	설명 : 주택동호 테이블 수정 쿼리
	수정일  수정자  수정내용
	
	작성자 : 최승락
	최초작성일 : 2015.08.27
	-->	
	<update id="SLS020101DAO.updateDongHoInfo" parameterClass="java.util.Map">
		MERGE INTO TBSLS_HOUSE_DONG_HO T1
		USING (
			SELECT MIN(HOUSE_CODE) AS HOUSE_CODE
				 , MIN(DONG) AS DONG
				 , MIN(HO) AS HO
				 , SUM(PAYAMT) AS PAYAMT
			  FROM TBSLS_HOUSE_TYBY_PAY_DETAIL
			 WHERE PAY_CODE LIKE 'S%'
			   AND NVL(OPTN_IEM_AT, 'N') = 'N'
			   AND HOUSE_CODE = #HOUSE_CODE#
			   AND DONG = #DONG#
			   AND HO = #HO#
			) S1
			ON (
					    T1.HOUSE_CODE = S1.HOUSE_CODE
					AND T1.DONG = S1.DONG
					AND T1.HO = S1.HO
				)
		WHEN MATCHED
			THEN
				UPDATE
				SET LTTOT_AMOUNT = S1.PAYAMT
	</update>


	<!-- 쿼리명 : 주택계약자 수정
	설명 : 주택계약자 수정 쿼리
	수정일  수정자  수정내용
	
	작성자 : 최승락
	최초작성일 : 2015.09.01
	-->
	<update id="SLS020101DAO.updateHcntrctrInfo" parameterClass="java.util.Map">
		<!-- UPDATE TBSLS_HCNTRCTR
		   SET
			  HOUSE_CSTMR_NO      = #CNTRCTR_CSTMR_NO#
			, BDNBR               = #BDNBR#
			, RQEST_ESTBS_DM      = #RQEST_ESTBS_DM#
			, ZIP_DM              = #ZIP_DM#
			, BDNBR_DM            = #BDNBR_DM#
			, BASS_ADRES_DM       = #BASS_ADRES_DM#
			, DETAIL_ADRES_DM     = #DETAIL_ADRES_DM#
			, CNTRCTR_STTUS_CODE  = #CNTRCTR_STTUS_CODE#
			, LTTOT_QUALF_SE      = #LTTOT_QUALF_SE#
			, RENT_QUALF_SE       = #RENT_QUALF_SE#
			, CNTRCT_DE           = #CNTRCT_DE#
			, CTRTC_FILE_COURS    = #CTRTC_FILE_COURS#
			, CTRTC_FILE          = #CTRTC_FILE#
			, RENT_BGNDE          = #RENT_BGNDE#
			, RENT_ENDDE          = #RENT_ENDDE#
			, RENT_MVN_PRARNDE    = #RENT_MVN_PRARNDE#
			, RENT_MVN_TIME       = #RENT_MVN_TIME#
			, RENT_LVHS_DE        = #RENT_LVHS_DE#
			, RENT_LTTOT_CNVRS_DE = #RENT_LTTOT_CNVRS_DE#
			, VAT_AT              = #VAT_AT#
			, RESALE_AT           = #RESALE_AT#
			, NMCHANGE_CNNC_CODE  = #NMCHANGE_CNNC_CODE#
			, CANCL_DE            = #CANCL_DE#
			, RM                  = #RM#
			, UPDUSR_ID           = #S_USER_ID#
			, UPDT_DT             = SYSDATE
		 WHERE 1 = 1
		   AND CNTRCTR_NO = #CNTRCTR_NO# -->
		UPDATE TBSLS_HCNTRCTR
		   SET
			  HOUSE_CSTMR_NO      = #CNTRCTR_CSTMR_NO#
			, BDNBR               = #BDNBR#
			, RQEST_ESTBS_DM      = #RQEST_ESTBS_DM#
			, ZIP_DM              = #ZIP_DM#
			, BDNBR_DM            = #BDNBR_DM#
			, BASS_ADRES_DM       = #BASS_ADRES_DM#
			, DETAIL_ADRES_DM     = #DETAIL_ADRES_DM#
			, CNTRCTR_STTUS_CODE  = #CNTRCTR_STTUS_CODE#
			, LTTOT_QUALF_SE      = #LTTOT_QUALF_SE#
			, RENT_QUALF_SE       = #RENT_QUALF_SE#
			, CNTRCT_DE           = #CNTRCT_DE#
			, CTRTC_FILE_COURS    = #CTRTC_FILE_COURS#
			, CTRTC_FILE          = #CTRTC_FILE#
			, RENT_BGNDE          = #RENT_BGNDE#
			, RENT_ENDDE          = #RENT_ENDDE#
			, RENT_MVN_PRARNDE    = #RENT_MVN_PRARNDE#
			, RENT_MVN_TIME       = #RENT_MVN_TIME#
			, RENT_LVHS_DE        = #RENT_LVHS_DE#
			, RENT_LTTOT_CNVRS_DE = #RENT_LTTOT_CNVRS_DE#
			, VAT_AT              = #VAT_AT#
			, RESALE_AT           = #RESALE_AT#
			, NMCHANGE_CNNC_CODE  = #NMCHANGE_CNNC_CODE#
			, CANCL_DE            = #CANCL_DE#
			, RM                  = #RM#
			, BIZ_OWNER_NAME      = #BIZ_OWNER_NAME#
			, HOUSE_CSTMR_NO_SUB  = #SPOUSE_CSTMR_NO#
			, UPDUSR_ID           = #S_USER_ID#
			, UPDT_DT             = SYSDATE
		 WHERE 1 = 1
		   AND CNTRCTR_NO = #CNTRCTR_NO#	   
	</update>
	
	<!-- 쿼리명 : 주택분양금수정
	설명 : 주택분양금 수정 쿼리
	수정일  수정자  수정내용
	
	작성자 : 최승락
	최초작성일 : 2016.12.06
	-->
	<update id="SLS020101DAO.updateHcntrctrInfo2" parameterClass="java.util.Map">

		UPDATE TBSLS_HOUSE_DONG_HO
		   SET
			  LTTOT_AMOUNT = #LTTOT_AMOUNT#
			, UPDUSR_ID           = #S_USER_ID#
			, UPDT_DT             = SYSDATE			  
		 WHERE 1 = 1
		   AND HOUSE_CODE = #HOUSE_CODE#
		   AND DONG       = #DONG#
		   AND HO	      = #HO#
	</update>	
	
	<!-- 주택고객 생성 -->
	<insert id="SLS020101DAO.houseCstmrC" parameterClass="java.util.Map">
		INSERT INTO TBSLS_HOUSE_CSTMR(
			 HOUSE_CSTMR_NO	/*주택고객번호*/
			,CSTMR_NM            	/*성명*/
			,IHIDNUM       	/*주민등록번호*/
			,ZIP           	/*우편번호*/
			,ADRES         	/*주소*/
			,ADRES_DETAIL  	/*주소_상세*/
			,TELNO         	/*전화번호*/
			,MBTLNO        	/*휴대폰번호*/
			,EMAIL 			/*이메일*/
			,ETC_CTTPC 	    /*기타연락처*/
			,REGISTER_ID	/*등록자ID*/
			,REGIST_DT		/*등록일시*/
			,UPDUSR_ID		/*수정자ID*/
			,UPDT_DT		/*수정일시*/
		) 		
		VALUES(
			 SQ_TBSLS_HOUSE_CSTMR_1.NEXTVAL	/*주택고객번호*/
			,#CNTRCTR_NM#           /*성명*/
			,SFCOM_ENC_ALL(#CNTRCTR_IHIDNUM#)      /*주민등록번호*/
			,#ZIP#          /*우편번호*/
			,#ADRES#        /*주소*/
			,#ADRES_DETAIL# /*주소_상세*/
			,#TELNO#        /*전화번호*/
			,#MBTLNO#       /*휴대폰번호*/
			,#EMAIL#		/*이메일*/
			,#ETC_CTTPC#	/*기타연락처*/
			,#S_USER_ID#	/*등록자ID*/
			,SYSDATE		/*등록일시*/
			,#S_USER_ID#	/*수정자ID*/
			,SYSDATE 		/*수정일시*/
		)
	</insert>
	
	<!-- 주택고객 생성 -->
	<insert id="SLS020101DAO.houseSubCstmrC" parameterClass="java.util.Map">
		INSERT INTO TBSLS_HOUSE_CSTMR(
			 HOUSE_CSTMR_NO	/*주택고객번호*/
			,CSTMR_NM            	/*성명*/
			,IHIDNUM       	/*주민등록번호*/
			,REGISTER_ID	/*등록자ID*/
			,REGIST_DT		/*등록일시*/
			,UPDUSR_ID		/*수정자ID*/
			,UPDT_DT		/*수정일시*/
		) 		
		VALUES(
			 SQ_TBSLS_HOUSE_CSTMR_1.NEXTVAL	/*주택고객번호*/
			,#SPOUSE_NM#           /*성명*/
			,SFCOM_ENC_ALL(#SPOUSE_IHIDNUM#)      /*주민등록번호*/
			,#S_USER_ID#	/*등록자ID*/
			,SYSDATE		/*등록일시*/
			,#S_USER_ID#	/*수정자ID*/
			,SYSDATE 		/*수정일시*/
		)
	</insert>			
	
	<!-- 주태고객 수정 -->
	<update id="SLS020101DAO.houseCstmrU" parameterClass="java.util.Map">
		UPDATE TBSLS_HOUSE_CSTMR SET
			 CSTMR_NM = #CNTRCTR_NM#          			/*성명*/
			,IHIDNUM = SFCOM_ENC_ALL(#CNTRCTR_IHIDNUM#)      		/*주민등록번호*/
			,ZIP = #ZIP#  					/*우편번호*/
			,ADRES = #ADRES#      			/*주소*/
			,ADRES_DETAIL = #ADRES_DETAIL#  /*주소_상세*/
			,TELNO = #TELNO#         		/*전화번호*/
			,MBTLNO = #MBTLNO#    			/*휴대폰번호*/
			,EMAIL = #EMAIL#				/*이메일*/
			,ETC_CTTPC = #ETC_CTTPC#	    /*기타연락처*/
			,UPDUSR_ID = #S_USER_ID#		/*수정자ID*/
			,UPDT_DT = SYSDATE				/*수정일시*/
		WHERE HOUSE_CSTMR_NO = #HOUSE_CSTMR_NO#
	</update>
	
			<!-- 주택고객1 목록 -->
	<select id="SLS020101DAO.houseCstmrListCount" parameterClass="java.util.Map" resultClass="String">
<!--         SELECT 
             MAX(HOUSE_CSTMR_NO)   /*주택고객번호*/
        FROM TBSLS_HOUSE_CSTMR A
        WHERE 1=1
        AND A.IHIDNUM = SFCOM_ENC_ALL(#CNTRCTR_IHIDNUM#)
        AND A.CSTMR_NM = #CNTRCTR_NM# 	 -->
        SELECT 
             MAX(HOUSE_CSTMR_NO)   /*주택고객번호*/
        FROM TBSLS_HOUSE_CSTMR A
        WHERE 1=1
        AND A.IHIDNUM = SFCOM_ENC_ALL(#CNTRCTR_IHIDNUM#)
        AND A.CSTMR_NM = #CNTRCTR_NM#   
        AND A.ZIP = #ZIP#
        AND A.ADRES = #ADRES#
        <isNotEmpty property="ADRES_DETAIL">
        AND A.ADRES_DETAIL = #ADRES_DETAIL# 
		</isNotEmpty>  
		<isNotEmpty property="TELNO">
		   AND A.TELNO = #TELNO#            /* 분양임화성분 - S:분양  R:보증금  */
		</isNotEmpty>  
		<isNotEmpty property="MBTLNO">
		   AND A.MBTLNO = #MBTLNO#           /* 분양임화성분 - S:분양  R:보증금  */
		</isNotEmpty> 
		<isNotEmpty property="EMAIL">
		   AND A.EMAIL = #EMAIL#           /* 분양임화성분 - S:분양  R:보증금  */
		</isNotEmpty> 
		<isNotEmpty property="ETC_CTTPC">
		   AND A.ETC_CTTPC = #ETC_CTTPC#           /* 분양임화성분 - S:분양  R:보증금  */
		</isNotEmpty> 			             
	</select>
	
			<!-- 주택고객2 목록 -->
	<select id="SLS020101DAO.houseCstmrListSubCount" parameterClass="java.util.Map" resultClass="String">
        SELECT 
             MAX(HOUSE_CSTMR_NO)   /*주택고객번호*/
        FROM TBSLS_HOUSE_CSTMR A
        WHERE 1=1
        AND A.IHIDNUM = SFCOM_ENC_ALL(#SPOUSE_IHIDNUM#)
        AND A.CSTMR_NM = #SPOUSE_NM# 	
	</select>	
	

	<!-- 첨부파일 정보 업데이트 -->
	<update id="SLS020101DAO.updateFileInfo" parameterClass="java.util.Map">
		UPDATE TBSLS_HCNTRCTR
		   SET CTRTC_FILE_COURS    = #CTRTC_FILE_COURS#
			, CTRTC_FILE          = #CTRTC_FILE#
			, UPDUSR_ID           = #S_USER_ID#
			, UPDT_DT             = SYSDATE
		 WHERE 1 = 1
		   AND CNTRCTR_NO = #CNTRCTR_NO#
	</update>
		
	
	<!-- 수납정보 존재여부 체크  -->
	<select id="SLS020101DAO.selectExistYn" parameterClass="java.util.Map" resultClass="String">
		SELECT DECODE(COUNT(CNTRCTR_NO),0,'N','Y') AS EXIST_YN
		  FROM TBSLS_HOUSE_LTTOT_PAY 
		 WHERE 1 = 1
		   AND CNTRCTR_NO = #CNTRCTR_NO#
		   AND RCIV_DE IS NOT NULL
	</select>
	
	
	<!-- 쿼리명 : 주택분양납부 테이블 정보 삭제
	설명 : 주택분양납부 테이블 정보를 삭제한다.
	수정일  수정자  수정내용
	
	작성자 : 최승락
	최초작성일 : 2015.09.14
	-->	
	<delete id="SLS020101DAO.deleteHouseLttotPay" parameterClass="java.util.Map">
		DELETE
		  FROM TBSLS_HOUSE_LTTOT_PAY
		 WHERE 1 = 1
		   AND CNTRCTR_NO = #CNTRCTR_NO#
	</delete>
	
	
	<!-- 쿼리명 : 주택계약자공유자 테이블 정보 삭제
	설명 : 주택계약자공유자 테이블 정보 삭제 쿼리
	수정일  		수정자  	수정내용
	2015.12.08	최승락	최초작성
	작성자 : 최승락
	최초작성일 : 2015.12.08
	-->
	<delete id="SLS020101DAO.deleteHcntrctrCocnr" parameterClass="java.util.Map"> 
		DELETE 
		  FROM TBSLS_HCNTRCTR_COCNR
		 WHERE 1 = 1
		   AND CNTRCTR_NO = #CNTRCTR_NO#
	</delete>
	
	
	<!-- 쿼리명 : 주택계약자공유자  삭제
	설명 : 주택계약자공유자  삭제
	수정일  		수정자  	수정내용
	2015.12.08	최승락	최초작성
	작성자 : 최승락
	최초작성일 : 2015.12.08
	-->
	<delete id="SLS020101DAO.deleteOneHcntrctrCocnr" parameterClass="java.util.Map"> 
		DELETE 
		  FROM TBSLS_HCNTRCTR_COCNR
		 WHERE 1 = 1
<!-- 		   AND CNTRCTR_CSTMR_NO = #CNTRCTR_CSTMR_NO# -->
		   AND   CNTRCTR_NO = #CNTRCTR_NO#
		   AND COCNR_SN = #COCNR_SN#
	</delete>
	
	<!-- 쿼리명 : 주택계약자사업자 테이블 정보 삭제
	설명 : 주택계약자사업자 테이블 정보 삭제 쿼리
	수정일  		수정자  	수정내용
	2015.12.08	최승락	최초작성
	작성자 : 최승락
	최초작성일 : 2015.12.08
	-->
	<delete id="SLS020101DAO.deleteHcntrctrBsnm" parameterClass="java.util.Map"> 
		DELETE 
		  FROM TBSLS_HCNTRCTR_BSNM
		 WHERE 1 = 1
		   AND CNTRCTR_NO = #CNTRCTR_NO#
	</delete>
	

	<!-- 쿼리명 : 가상계좌 삭제
	설명 : 가상계좌 정보를 삭제한다.
	수정일  수정자  수정내용
	
	작성자 : 최승락
	최초작성일 : 2015.11.27
	-->	
	<update id="SLS020101DAO.updateVaMast" parameterClass="java.util.Map">
		UPDATE VA_MAST
		   SET CUST_CD = NULL
		 WHERE 1 = 1
		   AND CUST_CD = #CNTRCTR_NO#
	</update>
	

	<!-- 쿼리명 : 주택계약자 삭제
	설명 : 주택계약자 정보를 삭제한다 (계약정보 삭제)
	수정일  수정자  수정내용
	
	작성자 : 최승락
	최초작성일 : 2015.09.03
	-->	
	<delete id="SLS020101DAO.deleteHcntrctr" parameterClass="java.util.Map">
		DELETE 
		  FROM TBSLS_HCNTRCTR
		 WHERE 1 = 1
		   AND CNTRCTR_NO = #CNTRCTR_NO#
	</delete>
		

	<!-- 쿼리명 : 주택분양납부 약정사항(tabpage1) /임대보증금 (tabpage5)조회
	설명 : 주택분양납부 약정사항(tabpage1) /임대보증금 (tabpage5)조회 쿼리
	수정일  수정자  수정내용
	
	작성자 : 최승락
	최초작성일 : 2015.08.29
	-->
	<select id="SLS020101DAO.selectHcntrctrPayList" parameterClass="java.util.HashMap" resultClass="java.util.HashMap">
		<![CDATA[
			SELECT '0' AS CHK
			      ,T1.CNTRCTR_NO               /* 계약자번호       */
			      ,T1.PAY_NO                   /* 납부번호         */
			      ,T1.PAY_CODE                 /* 납부코드         */
			      ,T1.PAY_SE                   /* 납부구분         */
			      ,T1.PAY_SN                   /* 납부일련번호     */
			      ,T1.PAYAMT                   /* 납부금액         */
			      ,T1.PAY_SUPLY_AMOUNT         /* 납부공급가액     */
			      ,T1.PAY_VAT                  /* 납부부가세       */
			      ,T1.ARRRG_AMOUNT             /* 연체할인금액     */
			      ,T1.YRINS_SALE_INTR          /* 연부매각이자     */
			      ,T1.RQEST_YM                 /* 청구년월         */
			      ,T1.PAY_TMLMT                /* 납부기한         */
			      ,T1.PAY_PRARNDE AS PAY_STDR_DE            /* 납부예정일       */
			      ,T1.MDAT_DE                  /* 조정일자         */
			      ,T1.OUTPT_DE                 /* 출력일자         */
			      ,T1.PAYMTHD                  /* 납부방법         */
			      ,T1.PAY_BANK_CODE            /* 납부은행코드     */
			      ,T1.OCR_NO                   /* OCR밴드          */
			      ,T1.LEV_DECSN_NO             /* 징수결의번호     */
			      ,T1.TRMNAT_UNUSED_AT         /* 해지미사용여부   */
			      ,T1.RCIV_DECSN_NO            /* 수납결의번호     */
			      ,T1.LTTOT_RENT_SE            /* 분양임화성분     */
			      ,T1.TMPR_RCIV_AMOUNT         /* 임시수납금액     */
			      ,T1.TMPR_RCIV_NO             /* 임시수납번호     */
			      ,T1.RCIV_DE                  /* 수납일자         */
			      ,T1.RCIV_AMOUNT              /* 수납금액         */
			      ,T1.CNTRCT_ODR               /* 계약차수         */
			      ,T1.POINT_DSCNT_AM           /* 포인트할인액     */
			      ,T1.RM                       /* 비고             */
			      ,T1.ARRRG_DSCNT_SE           /* 연체할인구분     */
			      ,T1.ARRRG_DSCNT_AMOUNT       /* 연체할인금액     */
			      ,T1.ARRRG_DSCNT_SUPLY_AMOUNT /* 연체할인공급금액 */
			      ,T1.ARRRG_DSCNT_VAT          /* 연체할인부가세   */
			      ,T1.ARRRG_DSCNT_DAYCNT       /* 연체할인일수     */
			      ,T1.ARRRG_DSCNT_INTRT        /* 연체할인이율     */
			      ,T1.RCIV_PREARNGE_DE         /* 수납예정일자     */
			      ,T1.REGISTER_ID              /* 등록자ID         */
			      ,T1.REGIST_DT                /* 등록일시         */
			      ,T1.UPDUSR_ID                /* 수정자ID         */
			      ,T1.UPDT_DT                  /* 수정일시         */
			      ,T1.ELCTRN_SANCTN_NO         /* 전자결재번호     */
			      ,T1.SANCTN_STTUS             /* 결재상태         */
			      ,  CASE WHEN T1.ARRRG_DSCNT_AMOUNT < 0 THEN
                     T1.ARRRG_DSCNT_AMOUNT ELSE 0 END AS PREPAY_DSCNT_AMOUNT   /* 선납금액         */
                  , (NVL(T1.PAYAMT, 0) + NVL (T1.ARRRG_AMOUNT , 0) + NVL(T1.ARRRG_DSCNT_AMOUNT, 0) + NVL (YRINS_SALE_INTR, 0)  + NVL (POINT_DSCNT_AM, 0))  AS UNCLAMT   /* 미수금액         */
			      
			      ,(CASE
			         WHEN T1.RCIV_DE IS NULL THEN
			          (NVL(T1.PAYAMT, 0) + NVL (T1.ARRRG_AMOUNT , 0) + NVL(T1.ARRRG_DSCNT_AMOUNT, 0) + NVL(YRINS_SALE_INTR, 0) + NVL(POINT_DSCNT_AM, 0))
			         ELSE
			          0
			       END) AS NPYAMOUNT /* 납부합계 */
			       ,'' AS RCIV_BANK_CODE    /* 수납은행 */

			  FROM TBSLS_HOUSE_LTTOT_PAY T1 	/* 주택분양납부 */
			 WHERE 1 = 1
		]]>
			   AND T1.CNTRCTR_NO = #CNTRCTR_NO#
			<isNotEmpty property="LTTOT_RENT_SE">
			   AND T1.LTTOT_RENT_SE = #LTTOT_RENT_SE#            /* 분양임화성분 - S:분양  R:보증금  */
			</isNotEmpty>
             ORDER BY T1.PAY_TMLMT, T1.PAY_CODE, T1.RCIV_DE , T1.PAY_NO		 
	</select>
	
	
	
	<!-- 쿼리명 : 분양전환/취소 가능 여부 조회
	설명 : 분양전환/취소 가능 여부
	수정일  수정자  수정내용
	
	작성자 : 최승락
	최초작성일 : 2015.08.29
	-->
	<select id="SLS020101DAO.selectParcelCnt" parameterClass="java.util.HashMap" resultClass="java.util.HashMap">
		<![CDATA[
			SELECT 
				COUNT(0) AS PARCEL_CNT
			  FROM TBSLS_HOUSE_LTTOT_PAY T1 	/* 주택분양납부 */
			  		, TBSLS_HOUSE_RCIV_PSTMRK T2
			 WHERE 1 = 1
		]]>
			   AND T1.CNTRCTR_NO = T2.CNTRCTR_NO(+)
               AND T1.PAY_NO = T2.PAY_NO(+)
			   AND T1.CNTRCTR_NO = #CNTRCTR_NO#
			   AND T1.LTTOT_RENT_SE = 'R'            /* 분양임화성분 - S:분양  R:보증금  */
			   AND T1.RCIV_DE is not null
	 
	</select>
	
	
	<!-- 주택임대료납부 (tabpage6) 2016.03.08 -->
	<select id="SLS020101DAO.selectHcntrctrRentPayList" parameterClass="java.util.HashMap" resultClass="java.util.HashMap">
		<![CDATA[
			SELECT '0' AS CHK
			      ,T1.CNTRCTR_NO               /* 계약자번호         */
			      ,T1.PAY_NO                   /* 납부번호           */
			      ,T1.PAY_CODE                 /* 납부코드           */
			      ,T1.RQEST_YM                 /* 청구년월           */
			      ,T1.MT_RNTCHRG               /* 월임대료           */
			      ,T1.ARRRG_AMOUNT             /* 연체금액           */
			      ,T1.DFNNT_AMOUNT             /* 차액금액           */
			      ,T1.PAY_TMLMT                /* 납부기한           */
			      ,T1.PAY_PRARNDE              /* 납부예정일         */
			      ,T1.CANCL_DE                 /* 해약일자           */
			      ,T1.PAYMTHD                  /* 납부방법           */
			      ,T1.PAY_BANK_CODE            /* 납부은행코드       */
			      ,T1.OCR_NO                   /* OCR밴드            */
			      ,T1.MDAT_DE                  /* 조정일자           */
			      ,T1.LEV_DECSN_NO             /* 징수결의번호       */
			      ,T1.RCIV_DECSN_NO            /* 수납결의번호       */
			      ,T1.LTTOT_RENT_SE            /* 분양임화성분       */
			      ,T1.MDAT_YM                  /* 조정년월           */
			      ,T1.MDAT_SE                  /* 조정구분           */
			      ,T1.TMPR_RCIV_AMOUNT         /* 임시수납금액       */
			      ,T1.TMPR_RCIV_NO             /* 임시수납번호       */
			      ,T1.RCIV_DE                  /* 수납일자           */
			      ,T1.RCIV_AMOUNT              /* 수납금액           */
			      ,T1.OPERT_SE                 /* 작업구분           */
			      ,T1.CASH_RCIPT_RGSDE         /* 현금영수증등록일   */
			      ,T1.CASH_RCIPT_SN            /* 현금영수증일련번호 */
			      ,T1.RM                       /* 비고               */
			      ,T1.ARRRG_DSCNT_SE           /* 연체할인구분       */
			      ,T1.ARRRG_DSCNT_AMOUNT       /* 연체할인금액       */
			      ,T1.ARRRG_DSCNT_SUPLY_AMOUNT /* 연체할인공급금액   */
			      ,T1.ARRRG_DSCNT_VAT          /* 연체할인부가세     */
			      ,T1.ARRRG_DSCNT_DAYCNT       /* 연체할인일수       */
			      ,T1.ARRRG_DSCNT_INTRT        /* 연체할인이율       */
			      ,T1.RCIV_PREARNGE_DE         /* 수납예정일자       */
			      ,T1.REGISTER_ID              /* 등록자ID           */
			      ,T1.REGIST_DT                /* 등록일시           */
			      ,T1.UPDUSR_ID                /* 수정자ID           */
			      ,T1.UPDT_DT                  /* 수정일시           */
			      ,T1.MT_RNTCHRG + T1.ARRRG_AMOUNT + T1.DFNNT_AMOUNT AS TOT_AMOUNT
			      ,(CASE
			         WHEN T1.RCIV_DE IS NULL THEN
			          (T1.MT_RNTCHRG + T1.ARRRG_AMOUNT + T1.DFNNT_AMOUNT)
			         ELSE
			          0
			       END) AS NPYAMOUNT /* 미수금액 */
			      ,T1.RCIV_AMOUNT AS PAYAMT_SUM /* 수납금액 = 납부금액 합 */
			      ,T2.BANK_CODE AS RCIV_BANK_CODE    /* 수납은행 */
			  FROM TBSLS_HOUSE_RENT_PAY T1  	/* 주택임대납부 */
			  		, TBSLS_HOUSE_RCIV_PSTMRK T2
			 WHERE 1 = 1
			   AND T1.CNTRCTR_NO = T2.CNTRCTR_NO(+)
               AND T1.PAY_NO = T2.PAY_NO(+)
		]]>
			   AND T1.CNTRCTR_NO = #CNTRCTR_NO#
             ORDER BY T1.PAY_TMLMT DESC
	</select>
	
	
	
	<!-- 주택임대료납부 (tabpage6) 수정 -->
	<update id="SLS020101DAO.saveHcntrctrRentPayPopList" parameterClass="java.util.HashMap">
		UPDATE TBSLS_HOUSE_RENT_PAY
		   SET MT_RNTCHRG = #MT_RNTCHRG#
		      ,ARRRG_AMOUNT = #ARRRG_AMOUNT#
		      ,PAY_TMLMT = #PAY_TMLMT#
		      ,RM = #RM#
		      ,UPDUSR_ID = #S_USER_ID#
			  ,UPDT_DT = SYSDATE
		 WHERE CNTRCTR_NO = #CNTRCTR_NO#
		   AND PAY_NO = #PAY_NO#	
	</update>


	<!-- 쿼리명 : 공유자(tabpage2) 조회
	설명 : 공유자(tabpage2) 조회 쿼리
	수정일  수정자  수정내용

	작성자 : 최승락
	최초작성일 : 2015.10.04
	-->
	<select id="SLS020101DAO.selectHcntrctrCocnrList" parameterClass="java.util.HashMap" resultClass="java.util.HashMap">
		<![CDATA[
			SELECT
				  T2.CSTMR_NM
				, SFCOM_DEC_ALL(T2.IHIDNUM) AS IHIDNUM
				, T2.ZIP
				, T2.ADRES
				, T2.ADRES_DETAIL
				, T2.TELNO
				, T2.MBTLNO
				, T1.RELIS_DE
				, T1.RM
				, T1.HOUSE_CSTMR_NO
				, T1.CNTRCTR_NO
				, T1.COCNR_SN
			  FROM TBSLS_HCNTRCTR_COCNR T1
				, TBSLS_HOUSE_CSTMR T2
			 WHERE 1 = 1
		]]>
			   AND T1.HOUSE_CSTMR_NO = T2.HOUSE_CSTMR_NO
			   AND T1.CNTRCTR_NO = #CNTRCTR_NO#
	</select>


	<!-- 쿼리명 : 사업자(tabpage3) 조회
	설명 : 사업자(tabpage3) 조회 쿼리
	수정일  수정자  수정내용

	작성자 : 최승락
	최초작성일 : 2015.10.04
	-->
	<select id="SLS020101DAO.selectHouseCstmrBsnmList" parameterClass="java.util.HashMap" resultClass="java.util.HashMap">
		<![CDATA[
			SELECT 
				  T1.BSNM_SN
				, T1.CNTRCTR_NO
				, T1.BIZRNO
				, T1.MTLTY_NM
				, T2.CSTMR_NM
				, SFCOM_DEC_ALL(T2.IHIDNUM) AS IHIDNUM
				, T1.BIZCND
				, T1.INDUTY
				, T1.BSNS_CONFM_DE     
				, T1.ADRES
			  FROM TBSLS_HCNTRCTR_BSNM T1
				, TBSLS_HOUSE_CSTMR T2
			 WHERE 1 = 1
		]]>
			   AND T1.HOUSE_CSTMR_NO = T2.HOUSE_CSTMR_NO
			   AND T1.CNTRCTR_NO = #CNTRCTR_NO#
	</select>
	

	<!-- 쿼리명 : 가상계좌(tabpage4) 조회
	설명 : 가상계좌(tabpage4) 조회 쿼리
	수정일  수정자  수정내용
	
	작성자 : 최승락
	최초작성일 : 2015.09.07
	-->
	<select id="SLS020101DAO.selectVirtlAcnutList" parameterClass="java.util.HashMap" resultClass="java.util.HashMap">
		<![CDATA[
			SELECT 
			       '0' AS CHK
				 , BANK_CD
				 , VACCT_NO
				 , STAT_CD
				 , NVL(OPT1,'0') AS OPT1 /* 입대료지정계좌 */
				 , NVL(OPT2,'0') AS OPT2 /* 보증금지정계좌 */
				 , NVL(OPT3,'0') AS OPT3 /* 주거급여전용계좌 */
				 , LAST_ENTRY
				 , LAST_DATE
			  FROM VA_MAST
			 WHERE 1 = 1
		]]>
			   AND CUST_CD = #CNTRCTR_NO#
	</select>
	
	
	<!-- 공급금액정보(tabpage7) 2016.03.09 -->
	<select id="SLS020101DAO.selectHcntrctrSuplyAmtList" parameterClass="java.util.HashMap" resultClass="java.util.HashMap">
			
			SELECT A.*, SFCOM_CODE_NM('HOU0A1', A.PAY_CODE, 'ALL_CODE_NM') AS PAY_CODE_NM
			  FROM TBSLS_HOUSE_TYBY_PAY A /* 주택타입별납부 */
			 WHERE HOUSE_CODE = #HOUSE_CODE#
			   AND HOUSE_TY_CODE = #HOUSE_TY_CODE#
			 ORDER BY PAY_NO
			 		
	</select>
	
	
	<!-- 쿼리명 : 납부코드 조회
	설명 : 납부코드 조회 쿼리
	수정일  		수정자  	수정내용
	2015.12.01	최승락	최초작성
	작성자 : 최승락
	최초작성일 : 2015.12.01
	-->
	<select id="SLS020101DAO.selectHouPayCodeList" parameterClass="java.util.HashMap" resultClass="java.util.HashMap">
			WITH
			TAB_01 AS
			(
			SELECT
				  CODE
				, GRP_CODE_SN
				
				, CODE_NM
				, '['||CODE||']'||CODE_NM AS ALL_CODE_NM
				, GRP_CODE
				, OLD_GRP_CODE
				, CODE_CN
				, CODE_ORDR
				, CHRCTR_PREPAR_VALUE_0
				, CHRCTR_PREPAR_VALUE_1
				, CHRCTR_PREPAR_VALUE_2
				, CHRCTR_PREPAR_VALUE_3
				, CHRCTR_PREPAR_VALUE_4
				, CHRCTR_PREPAR_VALUE_1 AS LTTOT_RENT_SE
				, INTGR_PREPAR_VALUE
				, MSTK_PREPAR_VALUE
				, CODE_ETC_1
				, CODE_ETC_2
				, CODE_ETC_3
				, USE_AT
			  FROM TBCOM_CMMN_CODE
			 WHERE 1 = 1
			 <isNotEmpty property="GRP_CODE">
			   AND GRP_CODE = #GRP_CODE#
			 </isNotEmpty>
			 <isNotEmpty property="LTTOT_RENT_SE">
			   AND CHRCTR_PREPAR_VALUE_1 = #LTTOT_RENT_SE#
			 </isNotEmpty>
			 <isNotEmpty property="USE_AT">
			   AND USE_AT = #USE_AT#
			 </isNotEmpty>
			)
			,
			TAB_02 AS
			(
			SELECT
				  #CNTRCTR_NO# AS CNTRCTR_NO
				, W1.HOUSE_CODE
				, W2.DONG
				, W2.HO
				, W1.HOUSE_TY_CODE
				, W1.PAY_CODE
				, '0' AS PAY_SE
				, '0' AS PAY_SN
				, W1.PAY_TMLMT
				, W1.PAY_TMLMT AS PAY_PRARNDE
                , W2.BASS_LTTOT_AMOUNT * (W1.PAY_RATE * 0.01) AS PAYAMT
                , W2.BASS_LTTOT_AMOUNT * (W1.PAY_RATE * 0.01) AS NPYAMOUNT
			  FROM TBSLS_HOUSE_TYBY_PAY W1 , TBSLS_HOUSE_DONG_HO W2
			 WHERE 1 = 1
			  AND W1.HOUSE_CODE = W2.HOUSE_CODE
              AND W1.HOUSE_TY_CODE = W2.HOUSE_TY_CODE
			 <isNotEmpty property="HOUSE_CODE">
			   AND W1.HOUSE_CODE = #HOUSE_CODE#
			 </isNotEmpty>
			 <isNotEmpty property="DONG">
			   AND W2.DONG = #DONG#
			 </isNotEmpty>
			 <isNotEmpty property="HO">
			   AND W2.HO = #HO#
			 </isNotEmpty>
			 <isNotEmpty property="LTTOT_TY_CODE">
			   AND W2.LTTOT_TY_CODE = #LTTOT_TY_CODE#
			 </isNotEmpty>
			   AND NVL(W1.OPTN_IEM_AT, '0') = '0'
			   AND W1.PAY_CODE NOT IN ('D1', 'D2', 'D3')
			)
			SELECT
				  T1.CODE
				, T1.GRP_CODE_SN
				, T1.CODE_NM
				, T1.ALL_CODE_NM
				, T1.GRP_CODE
				, T1.OLD_GRP_CODE
				, T1.CODE_CN
				, T1.CODE_ORDR
				, T1.CHRCTR_PREPAR_VALUE_0
				, T1.CHRCTR_PREPAR_VALUE_1
				, T1.CHRCTR_PREPAR_VALUE_2
				, T1.CHRCTR_PREPAR_VALUE_3
				, T1.CHRCTR_PREPAR_VALUE_4
				, T1.LTTOT_RENT_SE
				, T1.INTGR_PREPAR_VALUE
				, T1.MSTK_PREPAR_VALUE
				, T1.CODE_ETC_1
				, T1.CODE_ETC_2
				, T1.CODE_ETC_3
				, T1.USE_AT
				, T2.CNTRCTR_NO
				, T2.HOUSE_CODE
				, T2.DONG
				, T2.HO
				, T2.HOUSE_TY_CODE
				, T2.PAY_CODE
				, T2.PAY_SE
				, T2.PAY_SN
				, T2.PAY_TMLMT
				, T2.PAY_PRARNDE
				, T2.PAYAMT
				, T2.NPYAMOUNT
			  FROM TAB_01 T1
				, TAB_02 T2
			 WHERE 1 = 1
			   AND T1.CODE = T2.PAY_CODE(+)
			 ORDER BY T1.CODE_ORDR
	</select>
	
	<!-- 쿼리명 : 기준정보 조회
	설명 : 기준정보 조회 쿼리
	수정일  		수정자  	수정내용
	2015.12.01	최승락	최초작성
	작성자 : 최승락
	최초작성일 : 2015.12.01
	-->
	<select id="SLS020101DAO.selectHouPayBaisList" parameterClass="java.util.HashMap" resultClass="java.util.HashMap">
		<![CDATA[
			SELECT
			      '0' AS CHK
				, T1.CNTRCTR_NO
				, T1.PAY_NO
				, T1.PAY_CODE
				, T1.PAY_SE
				, T1.PAY_SN
				, T1.PAYAMT
				, T1.PAY_SUPLY_AMOUNT
				, T1.PAY_VAT
				, T1.ARRRG_AMOUNT
				, T1.YRINS_SALE_INTR
				, T1.RQEST_YM
				, T1.PAY_TMLMT
				, T1.PAY_PRARNDE
				, T1.MDAT_DE
				, T1.OUTPT_DE
				, T1.PAYMTHD
				, T1.PAY_BANK_CODE
				, T1.OCR_NO
				, T1.LEV_DECSN_NO
				, T1.TRMNAT_UNUSED_AT
				, T1.RCIV_DECSN_NO
				, T1.LTTOT_RENT_SE
				, T1.TMPR_RCIV_AMOUNT
				, T1.TMPR_RCIV_NO
				, T1.RCIV_DE
				, T1.RCIV_AMOUNT
				, T1.CNTRCT_ODR
				, T1.POINT_DSCNT_AM
				, T1.RM
				, T1.ARRRG_DSCNT_SE
				, T1.ARRRG_DSCNT_AMOUNT
				, T1.ARRRG_DSCNT_SUPLY_AMOUNT
				, T1.ARRRG_DSCNT_VAT
				, T1.ARRRG_DSCNT_DAYCNT
				, T1.ARRRG_DSCNT_INTRT
				, T1.RCIV_PREARNGE_DE
				, T1.REGISTER_ID
				, T1.REGIST_DT
				, T1.UPDUSR_ID
				, T1.UPDT_DT
				, (
					 CASE
						WHEN T1.RCIV_DE IS NULL
						THEN (NVL(T1.PAYAMT,0) + NVL(T1.ARRRG_AMOUNT,0) + NVL(YRINS_SALE_INTR,0) + NVL(POINT_DSCNT_AM, 0))
						ELSE 0
						END
				  ) AS NPYAMOUNT
				 , T2.HOUSE_CODE
				 , T2.DONG
				 , T2.HO
			  FROM TBSLS_HOUSE_LTTOT_PAY T1
			     , TBSLS_HCNTRCTR T2
			 WHERE 1 = 1
		]]>
		       AND T1.CNTRCTR_NO = T2.CNTRCTR_NO
			   AND T1.CNTRCTR_NO = #CNTRCTR_NO#
			   AND T1.LTTOT_RENT_SE = #LTTOT_RENT_SE#
			   AND T1.RCIV_DE IS NULL
			 ORDER BY T1.PAY_TMLMT , T1.PAY_CODE, T1.PAY_SN
	</select>


	<!-- 주택분양납부 삭제여부 체크 -->
	<select id="SLS020101DAO.selectHouseLttotPayExistYn" parameterClass="java.util.Map" resultClass="String">
		SELECT DECODE(COUNT(*), 0, 'N', 'Y') AS EXIST_YN
		  FROM TBSLS_HOUSE_LTTOT_PAY
		 WHERE 1 = 1
			 AND CNTRCTR_NO = #CNTRCTR_NO#
			 AND LTTOT_RENT_SE = 'S'
			 AND RCIV_DE IS NULL
	</select>
	
	
	<!-- 쿼리명 : 기준정보 삭제
	설명 : 기준정보 삭제 쿼리
	수정일  		수정자  	수정내용
	2015.12.01	최승락	최초작성
	작성자 : 최승락
	최초작성일 : 2015.12.01
	-->
	<delete id="SLS020101DAO.deleteHouPayBaisList" parameterClass="java.util.Map">
		DELETE 
		  FROM TBSLS_HOUSE_LTTOT_PAY 
		 WHERE 1 = 1
		   AND CNTRCTR_NO = #CNTRCTR_NO#
		   AND PAY_NO = #PAY_NO#
		   AND LTTOT_RENT_SE = 'S'
		   AND RCIV_DE IS NULL
	</delete>
	
	
	<!-- 쿼리명 : 보증금 삭제
	설명 : 보증금 삭제 쿼리
	수정일  		수정자  	수정내용
	2015.12.01	최승락	최초작성
	작성자 : 최승락
	최초작성일 : 2015.12.01
	-->
	<delete id="SLS020101DAO.deleteHouDepositBaisList" parameterClass="java.util.Map">
		DELETE 
		  FROM TBSLS_HOUSE_LTTOT_PAY 
		 WHERE 1 = 1
		   AND CNTRCTR_NO = #CNTRCTR_NO#
		   AND PAY_NO = #PAY_NO#
		   AND LTTOT_RENT_SE = 'R'
		   AND RCIV_DE IS NULL
	</delete>


	<!-- 쿼리명 : 기준정보 생성
	설명 : 기준정보 조회 쿼리
	수정일  		수정자  	수정내용
	2015.11.30	최승락	최초작성
	작성자 : 최승락
	최초작성일 : 2015.11.30
	-->
	<select id="SLS020101DAO.selectCreatHouPayBaisList" parameterClass="java.util.HashMap" resultClass="java.util.HashMap">
		<![CDATA[
		
			SELECT
                   R1.CNTRCTR_NO                  /* 계약번호 */
                 , R1.LTTOT_RENT_SE              /* 분양/보증금 구분 */
                 , NULL AS PAY_NO               /* 납부번호 */               
                 , R1.HOUSE_CODE                /* 주택코드 */
                 , R1.HOUSE_TY_CODE                /* 주택코드 */
                 , MAX(R1.PAY_CODE) AS PAY_CODE    /* 납부코드 */
                 , R1.PAY_SE                    /* 납부구분 */
                 , R1.PAY_SN                     /* 납부순번 */
                 , R1.PAY_TMLMT                    /* 납부기한일 */
                 , R1.PAY_TMLMT AS PAY_PRARNDE    /* 납부에정일 */
                 , SUM(R1.PAYAMT) AS PAYAMT        /* 납부금액 */
                 , SUM(R1.PAYAMT) AS NPYAMOUNT    /* 미납금액 */
                 , NULL AS RM                    /* 비고 */
                 , MAX(PAY_NO) AS REC_SEQ       /* 회수 */            
              FROM (
                    SELECT
                          #CNTRCTR_NO# AS CNTRCTR_NO
                        , #LTTOT_RENT_SE# AS LTTOT_RENT_SE
                        , T1.HOUSE_CODE
                        , T1.HOUSE_TY_CODE
                        , T1.PAY_CODE
                        , T1.PAY_NO
                        , '0' AS PAY_SE                
                        , '0' AS PAY_SN
                        , CASE
                            WHEN SUBSTR(T1.PAY_TMLMT, 1, 4) = '1899'
                                THEN TO_CHAR(SYSDATE,'YYYYMMDD')
                            WHEN SUBSTR(T1.PAY_TMLMT, 1, 4) = '1900'
                                THEN NULL
                            WHEN T1.PAY_TMLMT < TO_CHAR(SYSDATE,'YYYYMMDD')
                                THEN CASE
                                    WHEN '' = '1'
                                        THEN T2.MAX_DATE
                                    ELSE (
                                            CASE
                                                WHEN T1.HOUSE_CODE IN ('135', '136', '137', '911')  /* 911 삭제 테스트코드 */
                                                    THEN T2.MIN_DATE
                                                ELSE T2.MAX_DATE
                                                END
                                            )
                                    END
                            ELSE T1.PAY_TMLMT
                            END AS PAY_TMLMT
                        , DECODE(#RENT_QUALF_SE#,'28', T1.INHBTNT_PAYAMT, T1.PAYAMT) AS PAYAMT
                    FROM TBSLS_HOUSE_TYBY_PAY T1
                        , (
                            SELECT MAX(CASE WHEN SUBSTR(S1.PAY_TMLMT,1,4) = '1899'
                                        THEN TO_CHAR(SYSDATE, 'YYYYMMDD')
                                        WHEN S1.PAY_TMLMT < TO_CHAR(SYSDATE, 'YYYYMMDD')
                                        THEN NULL
                                        ELSE S1.PAY_TMLMT
                                   END) AS MAX_DATE
                             , MIN(CASE WHEN S1.PAY_TMLMT < TO_CHAR(SYSDATE, 'YYYYMMDD')
                                        THEN NULL
                                        ELSE S1.PAY_TMLMT
                                   END) AS MIN_DATE
                          FROM TBSLS_HOUSE_TYBY_PAY S1
                         WHERE 1 = 1
                           AND S1.HOUSE_CODE = #HOUSE_CODE#
                           AND S1.HOUSE_TY_CODE = #HOUSE_TY_CODE#
                           AND ENGG_SE = '01' 
                           AND S1.PAY_CODE LIKE #LTTOT_RENT_SE# || '%'            
                        ) T2
                    WHERE 1 = 1
                    AND T1.HOUSE_CODE = #HOUSE_CODE#
                    AND T1.HOUSE_TY_CODE = #HOUSE_TY_CODE#
                    AND T1.ENGG_SE = '01'
                    AND T1.PAY_CODE LIKE #LTTOT_RENT_SE# || '%'
                  ) R1
             GROUP BY R1.CNTRCTR_NO, R1.LTTOT_RENT_SE, R1.HOUSE_CODE, R1.HOUSE_TY_CODE, R1.PAY_TMLMT, R1.PAY_SN
             
             ]]>
             
         <isEqual property="ESTN" compareValue="Y">
          UNION
             
          <![CDATA[   
             SELECT
                   R1.CNTRCTR_NO                  /* 계약번호 */
                  ,R1.LTTOT_RENT_SE              /* 분양/보증금 구분 */
                 , NULL AS PAY_NO               /* 납부번호 */               
                 , R1.HOUSE_CODE                /* 주택코드 */
                 , R1.HOUSE_TY_CODE                /* 주택코드 */
                 , MAX(R1.PAY_CODE) AS PAY_CODE    /* 납부코드 */
                 , R1.PAY_SE                    /* 납부구분 */
                 , R1.PAY_SN                     /* 납부순번 */
                 , R1.PAY_TMLMT                    /* 납부기한일 */
                 , R1.PAY_TMLMT AS PAY_PRARNDE    /* 납부에정일 */
                 , SUM(R1.PAYAMT) AS PAYAMT        /* 납부금액 */
                 , SUM(R1.PAYAMT) AS NPYAMOUNT    /* 미납금액 */
                 , NULL AS RM                    /* 비고 */
                 , MAX(PAY_NO) AS REC_SEQ       /* 회수 */            
              FROM (
                    SELECT
                          #CNTRCTR_NO# AS CNTRCTR_NO
                        , #LTTOT_RENT_SE# AS LTTOT_RENT_SE
                        , T1.HOUSE_CODE
                        , T1.HOUSE_TY_CODE
                        , T1.PAY_CODE
                        , T1.PAY_NO
                        , '0' AS PAY_SE                
                        , '0' AS PAY_SN
                        , CASE
                            WHEN SUBSTR(T1.PAY_TMLMT, 1, 4) = '1899'
                                THEN TO_CHAR(SYSDATE,'YYYYMMDD')
                            WHEN SUBSTR(T1.PAY_TMLMT, 1, 4) = '1900'
                                THEN NULL
                            WHEN T1.PAY_TMLMT < TO_CHAR(SYSDATE,'YYYYMMDD')
                                THEN CASE
                                    WHEN '' = '1'
                                        THEN T2.MAX_DATE
                                    ELSE (
                                            CASE
                                                WHEN T1.HOUSE_CODE IN ('135', '136', '137', '911')  /* 911 삭제 테스트코드 */
                                                    THEN T2.MIN_DATE
                                                ELSE T2.MAX_DATE
                                                END
                                            )
                                    END
                            ELSE T1.PAY_TMLMT
                            END AS PAY_TMLMT
                        , DECODE(#RENT_QUALF_SE#,'28', T1.INHBTNT_PAYAMT, T1.PAYAMT) AS PAYAMT
                    FROM TBSLS_HOUSE_TYBY_PAY T1
                        , (
                            SELECT MAX(CASE WHEN SUBSTR(S1.PAY_TMLMT,1,4) = '1899'
                                        THEN TO_CHAR(SYSDATE, 'YYYYMMDD')
                                        WHEN S1.PAY_TMLMT < TO_CHAR(SYSDATE, 'YYYYMMDD')
                                        THEN NULL
                                        ELSE S1.PAY_TMLMT
                                   END) AS MAX_DATE
                             , MIN(CASE WHEN S1.PAY_TMLMT < TO_CHAR(SYSDATE, 'YYYYMMDD')
                                        THEN NULL
                                        ELSE S1.PAY_TMLMT
                                   END) AS MIN_DATE
                          FROM TBSLS_HOUSE_TYBY_PAY S1
                         WHERE 1 = 1
                           AND S1.HOUSE_CODE = #HOUSE_CODE#
                           AND S1.HOUSE_TY_CODE = #HOUSE_TY_CODE#
                           AND ENGG_SE = '02'                          
                        ) T2
                    WHERE 1 = 1
                    AND T1.HOUSE_CODE = #HOUSE_CODE#
                    AND T1.HOUSE_TY_CODE = #HOUSE_TY_CODE#
                    AND T1.ENGG_SE = '02'
                  ) R1
             GROUP BY R1.CNTRCTR_NO, R1.LTTOT_RENT_SE, R1.HOUSE_CODE, R1.HOUSE_TY_CODE, R1.PAY_TMLMT, R1.PAY_SN
           
  ]]>
             </isEqual>
               ORDER BY PAY_TMLMT, PAY_CODE, REC_SEQ
	</select>
	
	
	<!-- 쿼리명 : 기준정보 입력
	설명 : 기준정보 입력 쿼리
	수정일		수정자  	수정내용
	2015.11.30	최승락	최초작성
	작성자 : 최승락
	최초작성일 : 2015.11.30
	-->	
	<update id="SLS020101DAO.updateHouPayBaisList" parameterClass="java.util.Map">
		MERGE INTO TBSLS_HOUSE_LTTOT_PAY
		USING DUAL
			ON (
				CNTRCTR_NO = #CNTRCTR_NO#
				AND PAY_NO = #PAY_NO#
			   )
		WHEN MATCHED
			THEN
				UPDATE
				SET
				   PAY_CODE = #PAY_CODE#
				 , PAY_SE = #PAY_SE#
				 , PAY_SN = #PAY_SN#
				 , PAYAMT = #PAYAMT#
				 , PAY_SUPLY_AMOUNT = ROUND((#PAYAMT# / 1.1))
				 , PAY_VAT = ROUND((#PAYAMT# / 11))
				 , ARRRG_AMOUNT = #ARRRG_AMOUNT#
				 , YRINS_SALE_INTR = #YRINS_SALE_INTR#
				 , RQEST_YM = #RQEST_YM#
				 , PAY_TMLMT = #PAY_TMLMT#
				 , PAY_PRARNDE = #PAY_PRARNDE#
				 , MDAT_DE = #MDAT_DE#
				 , OUTPT_DE = #OUTPT_DE#
				 , PAYMTHD = #PAYMTHD#
				 , PAY_BANK_CODE = #PAY_BANK_CODE#
				 , OCR_NO = #OCR_NO#
				 , LEV_DECSN_NO = #LEV_DECSN_NO#
				 , TRMNAT_UNUSED_AT = #TRMNAT_UNUSED_AT#
				 , RCIV_DECSN_NO = #RCIV_DECSN_NO#
				 , LTTOT_RENT_SE = #LTTOT_RENT_SE#
				 , TMPR_RCIV_AMOUNT = #TMPR_RCIV_AMOUNT#
				 , TMPR_RCIV_NO = #TMPR_RCIV_NO#
				 , RCIV_DE = #RCIV_DE#
				 , RCIV_AMOUNT = #RCIV_AMOUNT#
				 , CNTRCT_ODR = #CNTRCT_ODR#
				 , POINT_DSCNT_AM = #POINT_DSCNT_AM#
				 , RM = #RM#
				 , ARRRG_DSCNT_SE = #ARRRG_DSCNT_SE#
				 , ARRRG_DSCNT_AMOUNT = #ARRRG_DSCNT_AMOUNT#
				 , ARRRG_DSCNT_SUPLY_AMOUNT = #ARRRG_DSCNT_SUPLY_AMOUNT#
				 , ARRRG_DSCNT_VAT = #ARRRG_DSCNT_VAT#
				 , ARRRG_DSCNT_DAYCNT = #ARRRG_DSCNT_DAYCNT#
				 , ARRRG_DSCNT_INTRT = #ARRRG_DSCNT_INTRT#
				 , RCIV_PREARNGE_DE = #RCIV_PREARNGE_DE#
				 , UPDUSR_ID = #S_USER_ID#
				 , UPDT_DT = SYSDATE
		WHEN NOT MATCHED
			THEN
				INSERT (
				  CNTRCTR_NO
				, PAY_NO
				, PAY_CODE
				, PAY_SE
				, PAY_SN
				, PAYAMT
				, PAY_SUPLY_AMOUNT
				, PAY_VAT
				, ARRRG_AMOUNT
				, YRINS_SALE_INTR
				, RQEST_YM
				, PAY_TMLMT
				, PAY_PRARNDE
				, MDAT_DE
				, OUTPT_DE
				, PAYMTHD
				, PAY_BANK_CODE
				, OCR_NO
				, LEV_DECSN_NO
				, TRMNAT_UNUSED_AT
				, RCIV_DECSN_NO
				, LTTOT_RENT_SE
				, TMPR_RCIV_AMOUNT
				, TMPR_RCIV_NO
				, RCIV_DE
				, RCIV_AMOUNT
				, CNTRCT_ODR
				, POINT_DSCNT_AM
				, RM
				, ARRRG_DSCNT_SE
				, ARRRG_DSCNT_AMOUNT
				, ARRRG_DSCNT_SUPLY_AMOUNT
				, ARRRG_DSCNT_VAT
				, ARRRG_DSCNT_DAYCNT
				, ARRRG_DSCNT_INTRT
				, RCIV_PREARNGE_DE
				, REGISTER_ID
				, REGIST_DT
				, UPDUSR_ID
				, UPDT_DT
				)
				VALUES 
				(
				  #CNTRCTR_NO#
				, #PAY_NO#
				, #PAY_CODE#
				, #PAY_SE#
				, #PAY_SN#
				, #PAYAMT#
				, ROUND((#PAYAMT# / 1.1))
				, ROUND((#PAYAMT# / 11))
				, NVL(#ARRRG_AMOUNT#, 0)
				, #YRINS_SALE_INTR#
				, #RQEST_YM#
				, #PAY_TMLMT#
				, #PAY_PRARNDE#
				, #MDAT_DE#
				, #OUTPT_DE#
				, #PAYMTHD#
				, #PAY_BANK_CODE#
				, #OCR_NO#
				, #LEV_DECSN_NO#
				, #TRMNAT_UNUSED_AT#
				, #RCIV_DECSN_NO#
				, #LTTOT_RENT_SE#
				, NVL(#TMPR_RCIV_AMOUNT#, 0)
				, #TMPR_RCIV_NO#
				, #RCIV_DE#
				, NVL(#RCIV_AMOUNT#, 0)
				, #CNTRCT_ODR#
				, #POINT_DSCNT_AM#
				, #RM#
				, #ARRRG_DSCNT_SE#
				, NVL(#ARRRG_DSCNT_AMOUNT#, 0)
				, NVL(#ARRRG_DSCNT_SUPLY_AMOUNT#, 0)
				, #ARRRG_DSCNT_VAT#
				, #ARRRG_DSCNT_DAYCNT#
				, #ARRRG_DSCNT_INTRT#
				, #RCIV_PREARNGE_DE#
				, #S_USER_ID#
				, SYSDATE
				, #S_USER_ID#
				, SYSDATE
				)
	</update>
	
	
	<!-- 쿼리명 : 납부정보 삭제
	설명 : 납부정보 삭제 쿼리
	수정일  수정자  수정내용
	
	작성자 : 최승락
	최초작성일 : 2015.12.20
	-->
	<delete id="SLS020101DAO.deleteLcntrctrPayPopList" parameterClass="java.util.Map">
		DELETE
		  FROM TBSLS_HOUSE_LTTOT_PAY
		 WHERE 1 = 1
		   AND CNTRCTR_NO = #CNTRCTR_NO#
		   AND PAY_NO = #PAY_NO#
	</delete>
	
	
	<!-- 쿼리명 : 납부정보 삭제
	설명 : 납부정보 삭제 쿼리
	수정일  수정자  수정내용
	
	작성자 : 최승락
	최초작성일 : 2015.12.20
	-->
	<delete id="SLS020101DAO.deleteHcntrctrRentPayPopList" parameterClass="java.util.Map">
		DELETE
		  FROM TBSLS_HOUSE_RENT_PAY
		 WHERE 1 = 1
		   AND CNTRCTR_NO = #CNTRCTR_NO#
		   AND PAY_NO = #PAY_NO#
	</delete>


	<!-- 납부번호 첫자리  -->
	<select id="SLS020101DAO.selectHeadPayNo" parameterClass="java.util.Map" resultClass="String">
		SELECT CHRCTR_PREPAR_VALUE_0
		  FROM TBCOM_CMMN_CODE
		 WHERE GRP_CODE = 'HOU0A1'
		  AND CODE = #PAY_CODE#
	</select>


	<!-- 납부번호 뒷자리  -->
	<select id="SLS020101DAO.selectTailPayNo" parameterClass="java.util.Map" resultClass="String">
		SELECT LPAD((NVL(MAX(SUBSTR(PAY_NO, 2,3)),0) + 1),3,0)||'0'
		  FROM TBSLS_HOUSE_LTTOT_PAY
		 WHERE CNTRCTR_NO = #CNTRCTR_NO#
	</select>
	
	<!-- 분납 납부번호 -->
	<select id="SLS020101DAO.selectInspyPayNo" parameterClass="java.util.Map" resultClass="String">
		SELECT SUBSTR(MAX(PAY_NO), 1, 4)|| NVL(MAX(SUBSTR(PAY_NO,5,1)),0) + 1 
		  FROM TBSLS_HOUSE_LTTOT_PAY
		 WHERE 1 = 1
		   AND CNTRCTR_NO = #CNTRCTR_NO#
		   AND PAY_NO LIKE SUBSTR(#PAY_NO#, 1, 4)||'%'
	</select>
	
	<!-- 임대 납부번호 뒷자리  -->
	<select id="SLS020101DAO.selectTailRentPayNo" parameterClass="java.util.Map" resultClass="String">
		SELECT LPAD((NVL(MAX(SUBSTR(PAY_NO, 2,3)),0) + 1),3,0)||'0'
		  FROM TBSLS_HOUSE_RENT_PAY
		 WHERE CNTRCTR_NO = #CNTRCTR_NO#
	</select>
	
	
	
	<!-- 쿼리명 : 납부금액계산 및 적용
	설명 : 납부금액계산 및 적용 쿼리
	수정일  		수정자  	수정내용
	2015.12.07	최승락	최초작성
	작성자 : 최승락
	최초작성일 : 2015.12.07
	-->
	<select id="SLS020101DAO.selectInspyIntrInfo" parameterClass="java.util.HashMap" resultClass="java.util.HashMap">
		SELECT SFSLS_HOUSE_INSTALLMENT(#SE#, #HOUSE_CODE#, #TO_DAY#, #PAY_TMLMT#, #PAYAMT#, #RATIO#, #SL_SE#) AS PAYAMT
		  FROM DUAL
	</select>
	
	
	<!-- 쿼리명 : 납부일 조회
	설명 : 납부일 조회 쿼리
	수정일  수정자  수정내용
	
	작성자 : 이광원
	최초작성일 : 2016.12.07
	-->
	<select id="SLS020101DAO.selectPayList" parameterClass="java.util.Map" resultClass="java.util.HashMap">
		SELECT 
		       A.CNTRCTR_NO
		     , C.CSTMR_NM
		     , B.HOUSE_CODE
		     , B.DONG
		     , B.HO
		     , A.PAY_CODE
		     , A.PAY_TMLMT
		     , A.PAY_SN
		     , A.PAY_SE
		  FROM TBSLS_HOUSE_LTTOT_PAY A
          JOIN TBSLS_HCNTRCTR B ON A.CNTRCTR_NO = B.CNTRCTR_NO
          JOIN TBSLS_HOUSE_CSTMR C ON B.HOUSE_CSTMR_NO = C.HOUSE_CSTMR_NO		  
		 WHERE 1=1
		   AND B.HOUSE_CODE = #HOUSE_CODE#
		   AND A.PAY_CODE = #PAY_CODE#
		   AND A.RCIV_DE IS NULL
	</select>
	
	<!-- 쿼리명 : 잔금납부일 수정
	설명 : 잔금납부일 수정 쿼리
	수정일  수정자  수정내용
	
	작성자 : 최승락
	최초작성일 : 2015.10.05
	-->
	<update id="SLS020101DAO.updateRemndrPayDe" parameterClass="java.util.Map">
		UPDATE TBSLS_HOUSE_LTTOT_PAY T1
		   SET T1.PAY_TMLMT = #PAY_TMLMT#
		 WHERE 1 = 1
		   AND T1.CNTRCTR_NO IN (
							 SELECT S1.CNTRCTR_NO
							   FROM TBSLS_HCNTRCTR S1
							  WHERE 1 = 1
							    AND S1.HOUSE_CODE = #HOUSE_CODE#
							    AND S1.CNTRCTR_STTUS_CODE = '01'
						    )
		   AND T1.PAY_CODE = #PAY_CODE#
		   AND T1.RCIV_DE IS NULL
	</update>
	
	
	<!-- 쿼리명 : 연체/선납계산
		설명 : 연체/선납계산
		수정일  수정자  수정내용
		
		작성자 : 이광원
		최초작성일 : 2016.0.3.09 
	-->	
	<select id="SLS020101DAO.houseCalList" parameterClass="java.util.Map" resultClass="java.util.HashMap">
            SELECT
                  T1.CNTRCTR_NO
                , T1.PAY_NO
                , T1.RQEST_YM
                , T1.PAY_CODE
                , T1.PAY_SE
                , T1.PAYAMT
                , T1.PAY_SUPLY_AMOUNT
                , T1.PAY_VAT
                , T1.ARRRG_AMOUNT
                , SFSLS_LAD_APAY_CAL(  #LAD_CODE#  /* 토지코드  */
                					 , NVL(T1.PAY_TMLMT , #IN_TO_DAY#) /* 납입기한이 없으면 변경기한일로 대체 */ 
                					 , #IN_TO_DAY# /* 변경기한일(수납예정일자)  */ 
                					 , T1.PAYAMT  /* 납부금액  */
                					 , T1.CNTRCTR_NO /* 계약자번호 */
                					 ) AS  APAY_CAL /* 토지코드가 국가산단 이고 용도구분이 산업시설용지 구분  */
          	   , TO_DATE(T1.PAY_TMLMT , 'YYYYMMDD')  - TO_DATE(#IN_TO_DAY# , 'YYYYMMDD') AS CNT_DAY
       		   , SFSLS_LAD_RATIO(  ' ' 
                           , #LAD_CODE# 
                           , #IN_TO_DAY# 
                           , T1.PAY_TMLMT 
                           , '0' 
                           , CASE WHEN #LAD_CODE# = '024' AND #PRPOS_SE# = '12' 
                                  THEN '1' 
                                  ELSE '0' END
                           ,  '0'       ) as RATIO                  
                , NVL(T1.PAY_TMLMT , #IN_TO_DAY#) AS PAY_TMLMT
                , T1.PAYMTHD
                , T1.OCR_NO
                , T1.MDAT_DE
                , T1.LEV_DECSN_NO
                , T1.RM
                , T1.RCIV_DECSN_NO
                , T1.LTTOT_RENT_SE
                , T1.TMPR_RCIV_AMOUNT
                , T1.ARRRG_DSCNT_SE
                , T1.ARRRG_DSCNT_AMOUNT
                , T1.ARRRG_DSCNT_SUPLY_AMOUNT
                , T1.ARRRG_DSCNT_VAT
                , T1.ARRRG_DSCNT_DAYCNT
                , T1.ARRRG_DSCNT_INTRT
                , T1.RCIV_DE
                
                , #IN_TO_DAY# AS PAY_STDR_DE
                <![CDATA[ 
				, CASE WHEN T1.ARRRG_DSCNT_AMOUNT < 0 
					THEN T1.ARRRG_DSCNT_AMOUNT  END AS PREPAY_DSCNT_AMOUNT
                ]]>
                , (NVL(T1.PAYAMT, 0)  + NVL(T1.ARRRG_AMOUNT, 0) ) AS PAYAMT_SM
         		, (NVL(T1.PAYAMT, 0) + NVL(T1.ARRRG_DSCNT_AMOUNT, 0) - NVL(T2.RCIV_AMOUNT, 0))  AS UNCLAMT
         		
                , T2.RCIV_AMOUNT AS R_RCIV_AMOUNT
                , T2.RCIV_DE AS R_RCIV_DE
                , T2.PAYMTHD AS R_RCIV_MTH
                , T2.BANK_CODE AS R_BANK_CODE
              FROM TBSLS_HOUSE_LTTOT_PAY T1
                , TBSLS_HOUSE_RCIV_PSTMRK T2
             WHERE 1 = 1
              AND T1.CNTRCTR_NO = T2.CNTRCTR_NO(+)
              AND T1.PAY_NO = T2.PAY_NO(+)
              AND T1.CNTRCTR_NO = #CNTRCTR_NO#
              AND T1.LTTOT_RENT_SE = #LTTOT_RENT_SE#
             ORDER BY PAY_TMLMT, T1.PAY_CODE, T1.RCIV_DE , T1.PAY_NO 
    </select>
    
    
    <!-- 쿼리명 : 임대료 연체/선납계산
		설명 : 임대료 연체/선납계산
		수정일  수정자  수정내용
		
		작성자 : 이광원
		최초작성일 : 2016.0.3.09 
	-->	
	<select id="SLS020101DAO.houseRentCalList" parameterClass="java.util.Map" resultClass="java.util.HashMap">
            SELECT
                  T1.CNTRCTR_NO
                , T1.PAY_NO
                , T1.RQEST_YM
                , T1.PAY_CODE
                , T1.MT_RNTCHRG AS PAYAMT
                , T1.ARRRG_AMOUNT
                , SFSLS_LAD_APAY_CAL(  #LAD_CODE#  /* 토지코드  */
                					 , NVL(T1.PAY_TMLMT , #IN_TO_DAY#) /* 납입기한이 없으면 변경기한일로 대체 */ 
                					 , #IN_TO_DAY# /* 변경기한일(수납예정일자)  */ 
                					 , T1.MT_RNTCHRG  /* 납부금액  */
                					 , T1.CNTRCTR_NO /* 계약자번호 */
                					 ) AS  APAY_CAL /* 토지코드가 국가산단 이고 용도구분이 산업시설용지 구분  */
          	   , TO_DATE(T1.PAY_TMLMT , 'YYYYMMDD')  - TO_DATE(#IN_TO_DAY# , 'YYYYMMDD') AS CNT_DAY
       		   , SFSLS_LAD_RATIO(  ' ' 
                           , #LAD_CODE# 
                           , #IN_TO_DAY# 
                           , T1.PAY_TMLMT 
                           , '0' 
                           , CASE WHEN #LAD_CODE# = '024' AND #PRPOS_SE# = '12' 
                                  THEN '1' 
                                  ELSE '0' END
                           ,  '0'       ) as RATIO                  
                , NVL(T1.PAY_TMLMT , #IN_TO_DAY#) AS PAY_TMLMT
                , T1.PAYMTHD
                , T1.OCR_NO
                , T1.MDAT_DE
                , T1.LEV_DECSN_NO
                , T1.RM
                , T1.RCIV_DECSN_NO
                , T1.LTTOT_RENT_SE
                , T1.TMPR_RCIV_AMOUNT
                , T1.ARRRG_DSCNT_SE
                , T1.ARRRG_DSCNT_AMOUNT
                , T1.ARRRG_DSCNT_SUPLY_AMOUNT
                , T1.ARRRG_DSCNT_VAT
                , T1.ARRRG_DSCNT_DAYCNT
                , T1.ARRRG_DSCNT_INTRT
                , T1.RCIV_DE
                
                , #IN_TO_DAY# AS PAY_STDR_DE
                <![CDATA[ 
				, CASE WHEN T1.ARRRG_DSCNT_AMOUNT < 0 
					THEN T1.ARRRG_DSCNT_AMOUNT  END AS PREPAY_DSCNT_AMOUNT
                ]]>
             
         		, (NVL(T1.MT_RNTCHRG, 0) + NVL(T1.ARRRG_DSCNT_AMOUNT, 0) - NVL(T2.RCIV_AMOUNT, 0))  AS UNCLAMT
         		
                , T2.RCIV_AMOUNT AS R_RCIV_AMOUNT
                , T2.RCIV_DE AS R_RCIV_DE
                , T2.PAYMTHD AS R_RCIV_MTH
                , T2.BANK_CODE AS R_BANK_CODE
              FROM TBSLS_HOUSE_RENT_PAY T1
                , TBSLS_HOUSE_RCIV_PSTMRK T2
             WHERE 1 = 1
              AND T1.CNTRCTR_NO = T2.CNTRCTR_NO(+)
              AND T1.PAY_NO = T2.PAY_NO(+)
              AND T1.CNTRCTR_NO = #CNTRCTR_NO#
              AND T1.LTTOT_RENT_SE = #LTTOT_RENT_SE#
            ORDER BY   PAY_TMLMT DESC
    </select>
    
    	<!-- 쿼리명 : 주택분양납부 등록
		설명 : 주택분양납부 등록
		수정일  수정자  수정내용
		
		작성자 : 최인석
		최초작성일 : 2016.08.02 
		-->	
    	<insert id="SLS020101DAO.insertLcntrctrPayPopList" parameterClass="java.util.Map">
		INSERT INTO TBSLS_HOUSE_LTTOT_PAY
		(
			  CNTRCTR_NO
			, PAY_NO
			, PAY_CODE
			, PAY_SE
			, PAY_SN
			, PAYAMT
			, PAY_SUPLY_AMOUNT
			, PAY_VAT
			, ARRRG_AMOUNT
			, YRINS_SALE_INTR
			, RQEST_YM
			, PAY_TMLMT
			, PAY_PRARNDE
			, MDAT_DE
			, OUTPT_DE
			, PAYMTHD
			, PAY_BANK_CODE
			, OCR_NO
			, LEV_DECSN_NO
			, TRMNAT_UNUSED_AT
			, RCIV_DECSN_NO
			, LTTOT_RENT_SE
			, TMPR_RCIV_AMOUNT
			, TMPR_RCIV_NO
			, RCIV_DE
			, RCIV_AMOUNT
			, CNTRCT_ODR
			, POINT_DSCNT_AM
			, RM
			, ARRRG_DSCNT_SE
			, ARRRG_DSCNT_AMOUNT
			, ARRRG_DSCNT_SUPLY_AMOUNT
			, ARRRG_DSCNT_VAT
			, ARRRG_DSCNT_DAYCNT
			, ARRRG_DSCNT_INTRT
			, RCIV_PREARNGE_DE
			, ELCTRN_SANCTN_NO
			,SANCTN_STTUS 
			,REGISTER_ID 
			,REGIST_DT 
			,UPDUSR_ID 
			,UPDT_DT 
		) VALUES (
			  #CNTRCTR_NO#
			, #PAY_NO#
			, #PAY_CODE#
			, #PAY_SE#
			, #PAY_SN#
			, #PAYAMT#
			, #PAY_SUPLY_AMOUNT#
			, #PAY_VAT#
			, #ARRRG_AMOUNT#
			, #YRINS_SALE_INTR#
			, #RQEST_YM#
			, #PAY_TMLMT#
			, #PAY_STDR_DE#
			, #MDAT_DE#
			, #OUTPT_DE#
			, #PAYMTHD#
			, #PAY_BANK_CODE#
			, #OCR_NO#
			, #LEV_DECSN_NO#
			, #TRMNAT_UNUSED_AT#
			, #RCIV_DECSN_NO#
			, #LTTOT_RENT_SE#
			, #TMPR_RCIV_AMOUNT#
			, #TMPR_RCIV_NO#
			, #RCIV_DE#
			, #RCIV_AMOUNT#
			, #CNTRCT_ODR#
			, #POINT_DSCNT_AM#
			, #RM#
			, #ARRRG_DSCNT_SE#
			, #ARRRG_DSCNT_AMOUNT#
			, #ARRRG_DSCNT_SUPLY_AMOUNT#
			, #ARRRG_DSCNT_VAT#
			, #ARRRG_DSCNT_DAYCNT#
			, #ARRRG_DSCNT_INTRT#
			, #RCIV_PREARNGE_DE#
			, #ELCTRN_SANCTN_NO#
			, #SANCTN_STTUS#
			, #S_USER_ID#
			, SYSDATE
			, #S_USER_ID#
			, SYSDATE
		)
	</insert>
	
	
	<!-- 쿼리명 : 주택임대납부 등록
		설명 : 주택임대납부 등록
		수정일  수정자  수정내용
		
		작성자 : 최인석
		최초작성일 : 2016.08.02 
		-->	
	<insert id="SLS020101DAO.insertHcntrctrRentPayPopList" parameterClass="java.util.Map">
		INSERT INTO TBSLS_HOUSE_RENT_PAY
		(
			  CNTRCTR_NO
			, PAY_NO
			, PAY_CODE
			, RQEST_YM
			, MT_RNTCHRG
			, ARRRG_AMOUNT
			, DFNNT_AMOUNT
			, PAY_TMLMT
			, PAY_PRARNDE
			, CANCL_DE
			, PAYMTHD
			, PAY_BANK_CODE
			, OCR_NO
			, MDAT_DE
			, LEV_DECSN_NO
			, RCIV_DECSN_NO
			, LTTOT_RENT_SE
			, MDAT_YM
			, MDAT_SE
			, TMPR_RCIV_AMOUNT
			, TMPR_RCIV_NO
			, RCIV_DE
			, RCIV_AMOUNT
			, OPERT_SE
			, CASH_RCIPT_RGSDE
			, CASH_RCIPT_SN
			, RM
			, ARRRG_DSCNT_SE
			, ARRRG_DSCNT_AMOUNT
			, ARRRG_DSCNT_SUPLY_AMOUNT
			, ARRRG_DSCNT_VAT
			, ARRRG_DSCNT_DAYCNT
			, ARRRG_DSCNT_INTRT 
			, RCIV_PREARNGE_DE 
			,REGISTER_ID 
			,REGIST_DT 
			,UPDUSR_ID 
			,UPDT_DT 
		) VALUES (
			 #CNTRCTR_NO#
			, #PAY_NO#
			, #PAY_CODE#
			, #RQEST_YM#
			, #MT_RNTCHRG#
			, #ARRRG_AMOUNT#
			, #DFNNT_AMOUNT#
			, #PAY_TMLMT#
			, #PAY_PRARNDE#
			, #CANCL_DE#
			, #PAYMTHD#
			, #PAY_BANK_CODE#
			, #OCR_NO#
			, #MDAT_DE#
			, #LEV_DECSN_NO#
			, #RCIV_DECSN_NO#
			, #LTTOT_RENT_SE#
			, #MDAT_YM#
			, #MDAT_SE#
			, #TMPR_RCIV_AMOUNT#
			, #TMPR_RCIV_NO#
			, #RCIV_DE#
			, #RCIV_AMOUNT#
			, #OPERT_SE#
			, #CASH_RCIPT_RGSDE#
			, #CASH_RCIPT_SN#
			, #RM#
			, #ARRRG_DSCNT_SE#
			, #ARRRG_DSCNT_AMOUNT#
			, #ARRRG_DSCNT_SUPLY_AMOUNT#
			, #ARRRG_DSCNT_VAT#
			, #ARRRG_DSCNT_DAYCNT#
			, #ARRRG_DSCNT_INTRT# 
			, #RCIV_PREARNGE_DE# 
			, #S_USER_ID#
			, SYSDATE
			, #S_USER_ID#
			, SYSDATE
			

		)
	</insert>
	
	
	<!-- 쿼리명 : 납부정보 수정
	설명 : 납부정보 수정 쿼리
	수정일  수정자  수정내용
	
	작성자 : 최승락
	최초작성일 : 2015.12.20
	-->
	<update id="SLS020101DAO.updateLcntrctrPayPopList" parameterClass="java.util.Map">
		UPDATE TBSLS_HOUSE_LTTOT_PAY
		   SET
			  RQEST_YM = #RQEST_YM#
			, PAY_CODE = #PAY_CODE#
			, PAY_SE = #PAY_SE#
			, PAY_SN = #PAY_SN#
			, PAYAMT = #PAYAMT#
			, PAY_SUPLY_AMOUNT = #PAY_SUPLY_AMOUNT#
			, PAY_VAT = #PAY_VAT#
			, ARRRG_AMOUNT = #ARRRG_AMOUNT#
			, YRINS_SALE_INTR = #YRINS_SALE_INTR#
			, PAY_TMLMT = #PAY_TMLMT#
			, PAY_PRARNDE = #PAY_STDR_DE#
			, MDAT_DE = #MDAT_DE#
			, OUTPT_DE = #OUTPT_DE#
			, PAYMTHD = #PAYMTHD#
			, PAY_BANK_CODE = #PAY_BANK_CODE#
			, OCR_NO = #OCR_NO#
			, LEV_DECSN_NO = #LEV_DECSN_NO#
			, TRMNAT_UNUSED_AT = #TRMNAT_UNUSED_AT#
			, RCIV_DECSN_NO = #RCIV_DECSN_NO#
			, LTTOT_RENT_SE = #LTTOT_RENT_SE#
			, TMPR_RCIV_AMOUNT = #TMPR_RCIV_AMOUNT#
			, TMPR_RCIV_NO = #TMPR_RCIV_NO#
			, RCIV_DE = #RCIV_DE#
			, RCIV_AMOUNT = #RCIV_AMOUNT#
			, CNTRCT_ODR = #CNTRCT_ODR#
			, POINT_DSCNT_AM = #POINT_DSCNT_AM#
			, RM = #RM#
			, ARRRG_DSCNT_SE = #ARRRG_DSCNT_SE#
			, ARRRG_DSCNT_AMOUNT = #ARRRG_DSCNT_AMOUNT#
			, ARRRG_DSCNT_SUPLY_AMOUNT = #ARRRG_DSCNT_SUPLY_AMOUNT#
			, ARRRG_DSCNT_VAT = #ARRRG_DSCNT_VAT#
			, ARRRG_DSCNT_DAYCNT = #ARRRG_DSCNT_DAYCNT#
			, ARRRG_DSCNT_INTRT = #ARRRG_DSCNT_INTRT#
			, RCIV_PREARNGE_DE = #RCIV_PREARNGE_DE#
			, ELCTRN_SANCTN_NO = #ELCTRN_SANCTN_NO#
			, SANCTN_STTUS = #SANCTN_STTUS#
			, UPDUSR_ID = #S_USER_ID#
			, UPDT_DT = SYSDATE
		 WHERE 1 = 1
		   AND CNTRCTR_NO = #CNTRCTR_NO#
		   AND PAY_NO = #PAY_NO#
		   AND RCIV_DE IS NULL
	</update>
	
	
	
	
	<!-- 쿼리명 : 연체/선납 저장
	설명 : 연체/선납 저장 쿼리
	수정일  수정자  수정내용
	
	작성자 : 최승락
	최초작성일 : 2015.12.20
	-->
	<update id="SLS020101DAO.saveHouseCalPay" parameterClass="java.util.Map">
		UPDATE TBSLS_HOUSE_LTTOT_PAY
		   SET
			  RQEST_YM = #RQEST_YM#
			, PAYAMT = #PAYAMT#
			, PAY_SUPLY_AMOUNT = #PAY_SUPLY_AMOUNT#
			, PAY_VAT = #PAY_VAT#
			, ARRRG_AMOUNT = #ARRRG_AMOUNT#
			, PAY_TMLMT = #PAY_TMLMT#
			, MDAT_DE = #MDAT_DE#
			, OUTPT_DE = #OUTPT_DE#
			, PAYMTHD = #PAYMTHD#
			, PAY_BANK_CODE = #PAY_BANK_CODE#
			, OCR_NO = #OCR_NO#
			, LEV_DECSN_NO = #LEV_DECSN_NO#
			, TRMNAT_UNUSED_AT = #TRMNAT_UNUSED_AT#
			, RCIV_DECSN_NO = #RCIV_DECSN_NO#
			, LTTOT_RENT_SE = #LTTOT_RENT_SE#
			, TMPR_RCIV_AMOUNT = #TMPR_RCIV_AMOUNT#
			, ARRRG_DSCNT_SE = #ARRRG_DSCNT_SE#
			, ARRRG_DSCNT_AMOUNT = #ARRRG_DSCNT_AMOUNT#
			, ARRRG_DSCNT_SUPLY_AMOUNT = #ARRRG_DSCNT_SUPLY_AMOUNT#
			, ARRRG_DSCNT_VAT = #ARRRG_DSCNT_VAT#
			, ARRRG_DSCNT_DAYCNT = #ARRRG_DSCNT_DAYCNT#
			, ARRRG_DSCNT_INTRT = #ARRRG_DSCNT_INTRT#
			, UPDUSR_ID = #S_USER_ID#
			, UPDT_DT = SYSDATE
		 WHERE 1 = 1
		   AND CNTRCTR_NO = #CNTRCTR_NO#
		   AND PAY_NO = #PAY_NO#
		   AND RCIV_DE IS NULL
	</update>
	
	
	
	<!-- 쿼리명 : 임대료 연체/선납 저장
	설명 : 임대료 연체/선납 저장 쿼리
	수정일  수정자  수정내용
	
	작성자 : 최승락
	최초작성일 : 2015.12.20
	-->
	<update id="SLS020101DAO.saveHouseRentCalPay" parameterClass="java.util.Map">
		UPDATE TBSLS_HOUSE_RENT_PAY
		   SET
			  RQEST_YM = #RQEST_YM#
			, MT_RNTCHRG = #PAYAMT#
			, ARRRG_AMOUNT = #ARRRG_AMOUNT#
			, PAY_TMLMT = #PAY_TMLMT#
			, MDAT_DE = #MDAT_DE#
			, PAYMTHD = #PAYMTHD#
			, PAY_BANK_CODE = #PAY_BANK_CODE#
			, OCR_NO = #OCR_NO#
			, LEV_DECSN_NO = #LEV_DECSN_NO#
			, RCIV_DECSN_NO = #RCIV_DECSN_NO#
			, LTTOT_RENT_SE = #LTTOT_RENT_SE#
			, TMPR_RCIV_AMOUNT = #TMPR_RCIV_AMOUNT#
			, ARRRG_DSCNT_SE = #ARRRG_DSCNT_SE#
			, ARRRG_DSCNT_AMOUNT = #ARRRG_DSCNT_AMOUNT#
			, ARRRG_DSCNT_SUPLY_AMOUNT = #ARRRG_DSCNT_SUPLY_AMOUNT#
			, ARRRG_DSCNT_VAT = #ARRRG_DSCNT_VAT#
			, ARRRG_DSCNT_DAYCNT = #ARRRG_DSCNT_DAYCNT#
			, ARRRG_DSCNT_INTRT = #ARRRG_DSCNT_INTRT#
			, UPDUSR_ID = #S_USER_ID#
			, UPDT_DT = SYSDATE
		 WHERE 1 = 1
		   AND CNTRCTR_NO = #CNTRCTR_NO#
		   AND PAY_NO = #PAY_NO#
		   AND RCIV_DE IS NULL
	</update>
	
	
	
	<!-- 쿼리명 : 공유자 등록
	설명 : 공유자 등록
	수정일  수정자  수정내용
	
	작성자 : 최승락
	최초작성일 : 2015.12.20
	-->
	<insert id="SLS020101DAO.insertHcntrctrCocnr" parameterClass="java.util.Map">
		INSERT INTO TBSLS_HCNTRCTR_COCNR(
<!-- 		     CNTRCTR_CSTMR_NO	/*계약자고객번호*/ -->
	 		COCNR_SN     		/*공유자일련번호*/
		    ,CNTRCTR_NO  		/*계약자번호*/
		    ,HOUSE_CSTMR_NO		/*주택고객번호*/
		    ,RM                 /*비고*/
		    ,RELIS_DE           /*해제일자*/
			,REGISTER_ID		/*등록자ID*/
			,REGIST_DT			/*등록일시*/
			,UPDUSR_ID			/*수정자ID*/
			,UPDT_DT			/*수정일시*/
		) 
	 	VALUES(
<!-- 			 #CNTRCTR_CSTMR_NO# /*계약자고객  번호*/     -->       
	 		SQ_TBSLS_HCNTRCTR_COCNR_1.NEXTVAL	/*공유자일련번호*/
	 		,#CNTRCTR_NO#		/*계약자번호*/
	 		,#HOUSE_CSTMR_NO#	/*주택고객번호*/
	 		,#RM#				/*비고*/
	 		,#RELIS_DE#			/*해제일자*/
			,#S_USER_ID#		/*등록자ID*/
			,SYSDATE			/*등록일시*/
			,#S_USER_ID#		/*수정자ID*/
			,SYSDATE 			/*수정일시*/
	 		)
	</insert>
	
	
	<!-- 주택계약자 공유자 수정 -->
	<update id="SLS020101DAO.updateHcntrctrCocnr" parameterClass="java.util.HashMap">
		UPDATE TBSLS_HCNTRCTR_COCNR SET
			 HOUSE_CSTMR_NO = #HOUSE_CSTMR_NO#	/*주택고객번호*/
			,UPDUSR_ID = #S_USER_ID#			/*수정자ID*/
			,UPDT_DT = SYSDATE					/*수정일시*/
		WHERE 1=1
		<!-- AND   CNTRCTR_CSTMR_NO = #CNTRCTR_CSTMR_NO# -->
		AND   COCNR_SN = #COCNR_SN#
		AND   CNTRCTR_NO = #CNTRCTR_NO#
		AND   HOUSE_CSTMR_NO = #HOUSE_CSTMR_NO#
	</update>
	
	
	<!-- 쿼리명 : 주택고객 목록 조회
	설명 : 주택고객 목록 조회 쿼리
	수정일  		수정자  	수정내용
	2015.10.07	최승락	최초생성
	작성자 : 최승락
	최초작성일 : 2015.10.07
	-->
	<select id="SLS020101DAO.selectHouseCstmrbyIhidnum" parameterClass="java.util.HashMap" resultClass="java.util.HashMap">
		<![CDATA[
			SELECT 
				  T1.HOUSE_CSTMR_NO
				, T1.CSTMR_NM
				, SFCOM_DEC_ALL(T1.IHIDNUM) AS IHIDNUM
				, T1.ZIP
				, T1.ADRES
				, T1.ADRES_DETAIL
				, T1.TELNO
				, T1.MBTLNO
				, T1.EMAIL
			  FROM TBSLS_HOUSE_CSTMR T1
			 WHERE 1 = 1
		]]>
			<isNotEmpty property="IHIDNUM">
			   AND T1.IHIDNUM = SFCOM_ENC_ALL(#IHIDNUM#)
			</isNotEmpty>
	</select>
	
	
	<!-- 쿼리명 : 주택고객 정보 수정
	설명 : 주택고객 정보 쿼리
	수정일  수정자  수정내용
	
	작성자 : 최승락
	최초작성일 : 2015.10.08
	-->
	<update id="SLS020101DAO.updateHouseCstmr" parameterClass="java.util.Map">
		UPDATE TBSLS_HOUSE_CSTMR
		   SET
			  CSTMR_NM = #CSTMR_NM#
			, IHIDNUM = SFCOM_ENC_ALL(#IHIDNUM#)
			, ZIP = #ZIP#
			, ADRES = #ADRES#
			, ADRES_DETAIL = #ADRES_DETAIL#
			, TELNO = #TELNO#
			, MBTLNO = #MBTLNO#
			, EMAIL = #EMAIL#
			, UPDUSR_ID = #S_USER_ID#
			, UPDT_DT = SYSDATE
		 WHERE 1 = 1
		   AND HOUSE_CSTMR_NO = #HOUSE_CSTMR_NO#
	</update>
	
	
	
	<!-- 쿼리명 : 주택계약자사업자 목록 조회
	설명 : 주택계약자사업자 조회 쿼리
	수정일  		수정자  	수정내용
	2015.10.08	변승우	최초생성
	작성자 : 변승우
	최초작성일 : 2015.10.08
	-->
	<select id="SLS020101DAO.selectHouseLcntrctrBnsmList" parameterClass="java.util.HashMap" resultClass="java.util.HashMap">
		SELECT
			      A.CNTRCTR_NO
			      ,A.BIZRNO
			      ,A.MTLTY_NM
			      ,B.CSTMR_NM
			      ,SFCOM_DEC_ALL(B.IHIDNUM) AS IHIDNUM
			      ,A.BIZCND
			      ,A.INDUTY
			      ,'['||B.ZIP||']' ||' '|| B.ADRES ||' '|| B.ADRES_DETAIL AS FULL_ADRES
			      ,B.ZIP
                  ,B.ADRES
                  ,B.ADRES_DETAIL
                  ,B.EMAIL
				  ,(CASE WHEN A.USE_AT = 'Y'
			           THEN A.USE_AT  /* 실납부금액 이자 , 반환이자지급율  */
			           ELSE 'N'
			       END) AS USE_AT    			      
			      ,A.BSNM_SN
			      ,A.HOUSE_CSTMR_NO
		FROM TBSLS_HCNTRCTR_BSNM A, TBSLS_HOUSE_CSTMR B
		WHERE 1 = 1 
		<isNotEmpty property="CNTRCTR_NO">
		AND A.CNTRCTR_NO = #CNTRCTR_NO#
		</isNotEmpty>
<!-- 		<isNotEmpty property="BSNM_SN">
		AND A.BSNM_SN = #BSNM_SN#
		</isNotEmpty> -->
		AND A.HOUSE_CSTMR_NO = B.HOUSE_CSTMR_NO
	</select>
	
	
	
	<!-- 주택계약자압류 조회  -->
	<select id="SLS020101DAO.selectLcntrctrSeizrList" parameterClass="java.util.HashMap" resultClass="java.util.HashMap">
		
		SELECT '0' AS CHK
				,'SEIZR' AS GBN
		      	,CNTRCTR_NO              
				,SEIZR_SN                
				,CRDTR_NM                
				,CRDTR_ADRES             
				,CRDTR_TELNO             
				,CRDTR_TELNO_2           
				,CDIT_DECSN_DE           
				,CDIT_RCEPT_DE           
				,INCDNT_CN               
				,CDIT_CN                 
				,SEIZR_SE                
				,DET_AMOUNT              
				,RELIS_RCEPT_DE          
				,RELIS_DE                
				,PRCAFS_CHARGER          
				,PRCAFS_CHRG_DEPT        
				,PRCAFS_CHRG_CTTPC       
				,PRCAFS_CHRG_EMAIL       
				,RM
				,SEIZR_ATCHMNFL_COURS                      
				,SEIZR_ATCHMNFL
			    ,SEIZR_ATCHMNFL_COURS AS FILE_ORDR                     
				,SEIZR_ATCHMNFL
				,REGISTER_ID             
				,REGIST_DT              
				,UPDUSR_ID               
				,UPDT_DT                
				,FILE_SN           
		  FROM TBSLS_HCNTRCTR_SEIZR /* 주택계약자압류 */
		 WHERE 1 = 1      
		   AND CNTRCTR_NO = #CNTRCTR_NO#
           
	</select>
	
	
	<!-- 주택계약자압류 Max 일련번호 조회  -->
	<select id="SLS020101DAO.selectMaxSeizrSn" parameterClass="java.util.HashMap" resultClass="String">
		
		SELECT             
				MAX(SEIZR_SN) AS   SEIZR_SN             
      
		  FROM TBSLS_HCNTRCTR_SEIZR /* 주택계약자압류 */
		 WHERE 1 = 1      
		   AND CNTRCTR_NO = #CNTRCTR_NO#
           
	</select>
	
	
	<!-- 주택계약자대출 Max 일련번호 조회  -->
	<select id="SLS020101DAO.selectMaxLonSn" parameterClass="java.util.HashMap" resultClass="String">
		
		SELECT             
				MAX(LON_SN) AS   LON_SN             
      
		  FROM TBSLS_HCNTRCTR_LON /* 주택계약자대출 */
		 WHERE 1 = 1      
		   AND CNTRCTR_NO = #CNTRCTR_NO#
           
	</select>
	
	
	
	<!-- 주택계약자압류 단일 조회  -->
	<select id="SLS020101DAO.selectSeizeOne" parameterClass="java.util.HashMap" resultClass="java.util.HashMap">
		
		SELECT 
		        '0' AS LON_INFO_DEL
		        ,'0' AS LON_INFO_ADD
		        ,'0' AS CHK
				,'SEIZR' AS GBN
		      	,CNTRCTR_NO              
				,SEIZR_SN                
				,CRDTR_NM                
				,CRDTR_ADRES             
				,CRDTR_TELNO             
				,CRDTR_TELNO_2           
				,CDIT_DECSN_DE           
				,CDIT_RCEPT_DE           
				,INCDNT_CN               
				,CDIT_CN                 
				,SEIZR_SE                
				,DET_AMOUNT              
				,RELIS_RCEPT_DE          
				,RELIS_DE                
				,PRCAFS_CHARGER          
				,PRCAFS_CHRG_DEPT        
				,PRCAFS_CHRG_CTTPC       
				,PRCAFS_CHRG_EMAIL       
				,RM
				,SEIZR_ATCHMNFL_COURS                      
				,SEIZR_ATCHMNFL
			    ,SEIZR_ATCHMNFL_COURS AS FILE_ORDR                     
				,SEIZR_ATCHMNFL
				,REGISTER_ID             
				,REGIST_DT              
				,UPDUSR_ID               
				,UPDT_DT                
				,FILE_SN           
		  FROM TBSLS_HCNTRCTR_SEIZR /* 주택계약자압류 */
		 WHERE 1 = 1      
		   AND CNTRCTR_NO = #CNTRCTR_NO#
           AND SEIZR_SN = #SEIZR_SN#
	</select>
	
	
	
	<!-- 주택계약자대출 조회  -->
	<select id="SLS020101DAO.selectLcntrctrLonList" parameterClass="java.util.HashMap" resultClass="java.util.HashMap">
		SELECT '0' AS CHK
				,'LON' AS GBN
		      	,CNTRCTR_NO        
				,LON_SN            
				,LON_SE            
				,TRNSFR_DE         
				,CDIT_TRNSFR_AMOUNT
				,CDIT_GRNTE_BANK   
				,BANK_ADRES        
				,RELIS_DE          
				,RM                
				,PRCAFS_CHARGER    
				,PRCAFS_CHRG_DEPT  
				,PRCAFS_CHRG_CTTPC
				,'' AS PRCAFS_CHRG_EMAIL 
				,LON_ATCHMNFL_COURS				
				,LON_ATCHMNFL  
			    ,LON_ATCHMNFL_COURS AS FILE_ORDR                     
				,LON_ATCHMNFL
				,REGISTER_ID       
				,REGIST_DT         
				,UPDUSR_ID         
				,UPDT_DT      
				,FILE_SN     
		  FROM TBSLS_HCNTRCTR_LON /* 주택계약자대출 */
		 WHERE 1 = 1      
		   AND CNTRCTR_NO = #CNTRCTR_NO#
           
	</select>

	
	<!-- 주택계약자대출 단일 조회  -->
	<select id="SLS020101DAO.selectLonOne" parameterClass="java.util.HashMap" resultClass="java.util.HashMap">
		SELECT '0' AS CHK
				,'LON' AS GBN
		      	,CNTRCTR_NO        
				,LON_SN            
				,LON_SE            
				,TRNSFR_DE         
				,CDIT_TRNSFR_AMOUNT
				,CDIT_GRNTE_BANK   
				,BANK_ADRES        
				,RELIS_DE          
				,RM                
				,PRCAFS_CHARGER    
				,PRCAFS_CHRG_DEPT  
				,PRCAFS_CHRG_CTTPC
				,'' AS PRCAFS_CHRG_EMAIL 
				,LON_ATCHMNFL_COURS				
				,LON_ATCHMNFL  
			    ,LON_ATCHMNFL_COURS AS FILE_ORDR                     
				,LON_ATCHMNFL   
				,REGISTER_ID       
				,REGIST_DT         
				,UPDUSR_ID         
				,UPDT_DT      
				,FILE_SN     
		  FROM TBSLS_HCNTRCTR_LON /* 주택계약자대출 */
		 WHERE 1 = 1      
		   AND CNTRCTR_NO = #CNTRCTR_NO#
           AND LON_SN = #LON_SN#
	</select>
	
	<!-- 쿼리명 : 압류 파일정보 수정
	설명 : 압류 파일정보 수정
	수정일  		수정자  	수정내용
	2016.07.28	최인석		최초생성
	작성자 : 최인석
	최초작성일 : 2016.07.28
	-->
    <insert id="SLS020101DAO.atchSeizrCUD" parameterClass="java.util.HashMap">
    	UPDATE /* SLS020101DAO.atchSeizrCUD */
    	       TBSLS_HCNTRCTR_SEIZR  		
    	   SET SEIZR_ATCHMNFL_COURS = #ATCH_FLPTH#	
             , SEIZR_ATCHMNFL = #ATCH_FILE#		
             , FILE_SN = #FILE_SN#			
             , UPDT_DT = SYSDATE			
             , UPDUSR_ID = #S_USER_ID#		
    	 WHERE 1 = 1
    	   AND CNTRCTR_NO = #CNTRCTR_NO#	
    	   AND SEIZR_SN = #SEIZR_SN#	
    </insert>
    
    <!-- 쿼리명 : 대출 파일정보 수정
	설명 : 대출  파일정보 수정
	수정일  		수정자  	수정내용
	2016.07.28	최인석		최초생성
	작성자 : 최인석
	최초작성일 : 2016.07.28
	-->
    <insert id="SLS020101DAO.atchLonCUD" parameterClass="java.util.HashMap">
    	UPDATE /* SLS020101DAO.atchLonCUD */
    	       TBSLS_HCNTRCTR_LON  		
    	   SET LON_RELIS_ATCHMNFL_COURS = #ATCH_FLPTH#	
             , LON_ATCHMNFL = #ATCH_FILE#		
             , FILE_SN = #FILE_SN#			
             , UPDT_DT = SYSDATE			
             , UPDUSR_ID = #S_USER_ID#		
    	 WHERE 1 = 1
    	   AND CNTRCTR_NO = #CNTRCTR_NO#	
    	   AND LON_SN = #LON_SN#	
    </insert>
    
    
    <!-- 쿼리명 : 압류 첨부파일 삭제
	설명 : 압류 첨부파일 삭제
	수정일  수정자  수정내용
	
	작성자 : 최인석
	최초작성일 : 2016.07.28
	-->	
	<delete id="SLS020101DAO.atchSeizrDelete" parameterClass="java.util.Map">
	 UPDATE TBSLS_HCNTRCTR_SEIZR
	    SET FILE_SN = NULL
	  WHERE 1=1
    	 AND CNTRCTR_NO = #CNTRCTR_NO#	
    	 AND SEIZR_SN = #SEIZR_SN#	
	</delete>
	
	<!-- 쿼리명 : 대출 첨부파일 삭제
	설명 : 대출 첨부파일 삭제
	수정일  수정자  수정내용
	
	작성자 : 최인석
	최초작성일 : 2016.07.28
	-->	
	<delete id="SLS020101DAO.atchLonDelete" parameterClass="java.util.Map">
	 UPDATE TBSLS_HCNTRCTR_LON
	    SET FILE_SN = NULL
	  WHERE 1=1
    	 AND CNTRCTR_NO = #CNTRCTR_NO#	
    	 AND LON_SN = #LON_SN#	
	</delete>
	
	
	<!-- 주택계약자압류 추가  -->
	<insert id="SLS020101DAO.insertHcntrctrSeizr" parameterClass="java.util.Map">
	      INSERT INTO TBSLS_HCNTRCTR_SEIZR
		  (    
		     CNTRCTR_NO                  
			,SEIZR_SN                   
			,CRDTR_NM                   
			,CRDTR_ADRES                   
			,CRDTR_TELNO         
			,CRDTR_TELNO_2       
			,CDIT_DECSN_DE             
			,CDIT_RCEPT_DE              
			,INCDNT_CN
			,CDIT_CN        
			,SEIZR_SE
			,DET_AMOUNT                 
			,RELIS_RCEPT_DE           
			,RELIS_DE
			,PRCAFS_CHARGER              
			,PRCAFS_CHRG_DEPT               
			,PRCAFS_CHRG_CTTPC
			,PRCAFS_CHRG_EMAIL
			,RM                          
			,SEIZR_ATCHMNFL_COURS
			,SEIZR_ATCHMNFL
			,REGISTER_ID                 
			,REGIST_DT
			,UPDUSR_ID                   
			,UPDT_DT          
			                
		  ) VALUES (
		         	     
		 	#CNTRCTR_NO#                    /*계약자번호 */
		 	,( SELECT NVL(MAX(SEIZR_SN),0) + 1 FROM TBSLS_HCNTRCTR_SEIZR WHERE 1 = 1 AND CNTRCTR_NO = #CNTRCTR_NO# )          
			,#CRDTR_NM#                    /* */			     	     
			,#CRDTR_ADRES#                    	 /*  */          
			,#CRDTR_TELNO#         /*  */          
			,#CRDTR_TELNO_2#               /* */          
			,#CDIT_DECSN_DE#                /*   */          
			,#CDIT_RCEPT_DE#            /*   */
			,#INCDNT_CN#           /*   */
			,#CDIT_CN#                   /*  */
			,#SEIZR_SE#                   /* */         
			,#DET_AMOUNT#                  /* */          
			,#RELIS_RCEPT_DE#                 /*  */          
			,#RELIS_DE#                     /* */
			,#PRCAFS_CHARGER#                     	 /*  */          
			,#PRCAFS_CHRG_DEPT#             /* */
			,#PRCAFS_CHRG_CTTPC#                   /*  */
			,#PRCAFS_CHRG_EMAIL#                   /*  */
			,#RM#                            /* */ 
			,#SEIZR_ATCHMNFL_COURS#                            /*    */ 
			,#SEIZR_ATCHMNFL#                            /*    */          
			,#S_USER_NM#                     /*등록자명                   */        
			,SYSDATE       					 /*등록일시                    */
			,#S_USER_NM#                     /*수정자명                    */          
			,SYSDATE                         /*수정일시                    */      
		  )
	  
	  </insert>
	  
	  
	 <!-- 주택계약자대출 추가  -->
	<insert id="SLS020101DAO.insertHcntrctrLon" parameterClass="java.util.Map">
		  INSERT INTO TBSLS_HCNTRCTR_LON
		  (    
		     CNTRCTR_NO                  
			,LON_SN                   
			,LON_SE                   
			,TRNSFR_DE                   
			,CDIT_TRNSFR_AMOUNT         
			,CDIT_GRNTE_BANK       
			,BANK_ADRES             
			,RELIS_DE              
			,PRCAFS_CHARGER              
			,PRCAFS_CHRG_DEPT               
			,PRCAFS_CHRG_CTTPC
			,RM                          
			,LON_ATCHMNFL_COURS
			,LON_ATCHMNFL
			,REGISTER_ID                 
			,REGIST_DT
			,UPDUSR_ID                   
			,UPDT_DT          
			                
		  ) VALUES (
		         	     
		 	#CNTRCTR_NO#                    /*계약자번호                  */
		 	,( SELECT NVL(MAX(LON_SN),0) + 1 FROM TBSLS_HCNTRCTR_LON WHERE 1 = 1 AND CNTRCTR_NO = #CNTRCTR_NO# )          
			,#LON_SE#                    /* */			     	     
			,#TRNSFR_DE#                    	 /*     */          
			,#CDIT_TRNSFR_AMOUNT#         /*        */          
			,#CDIT_GRNTE_BANK#               /*              */          
			,#BANK_ADRES#                /*           */          
			,#RELIS_DE#            /*      */
			,#PRCAFS_CHARGER#                     	 /*    */          
			,#PRCAFS_CHRG_DEPT#             /*      */
			,#PRCAFS_CHRG_CTTPC#                   /*          */
			,#RM#                            /*      */ 
			,#LON_ATCHMNFL_COURS#                            /*             */ 
			,#LON_ATCHMNFL#                            /*                  */          
			,#S_USER_NM#                     /*등록자명                   */        
			,SYSDATE       					 /*등록일시                    */
			,#S_USER_NM#                     /*수정자명                    */          
			,SYSDATE                         /*수정일시                    */      
		  )
	  
	  </insert>
	  
	  
	  <!-- 주택계약자압류 수정  -->
	  <update id="SLS020101DAO.updateHcntrctrSeizr" parameterClass="java.util.Map">
		  UPDATE TBSLS_HCNTRCTR_SEIZR
		     SET CRDTR_NM             = #CRDTR_NM#             /*  */
		     	,CRDTR_ADRES          = #CRDTR_ADRES#             /*   */
		        ,CRDTR_TELNO          = #CRDTR_TELNO#            	  /*   */
		        ,CRDTR_TELNO_2        = #CRDTR_TELNO_2#            	  /*     */
		        ,CDIT_DECSN_DE        = #CDIT_DECSN_DE#            	  /*    */
		        ,CDIT_RCEPT_DE        = #CDIT_RCEPT_DE#            	  /*    */
		        ,INCDNT_CN            = #INCDNT_CN#            	  /*   */
		        ,CDIT_CN              = #CDIT_CN#            	  /*    */
		        ,SEIZR_SE          	  = #SEIZR_SE#            	  /*    */
		        ,DET_AMOUNT           = #DET_AMOUNT#            	  /*  */
		        ,RELIS_RCEPT_DE       = #RELIS_RCEPT_DE#            	  /*    */
		        ,RELIS_DE          	  = #RELIS_DE#            	  /*   */
		        ,PRCAFS_CHARGER       = #PRCAFS_CHARGER#            	  /*    */
		        ,PRCAFS_CHRG_DEPT     = #PRCAFS_CHRG_DEPT#            	  /*   */
		        ,PRCAFS_CHRG_CTTPC    = #PRCAFS_CHRG_CTTPC#            	  /*   */
		        ,PRCAFS_CHRG_EMAIL    = #PRCAFS_CHRG_EMAIL#            	  /*   */
		        ,RM                   = #RM#                    /*    */
		        ,SEIZR_ATCHMNFL_COURS = #SEIZR_ATCHMNFL_COURS# /* 첨부파일경로*/
		        ,SEIZR_ATCHMNFL       = #SEIZR_ATCHMNFL#       /* 첨부파일    */
		        ,UPDUSR_ID            = #S_USER_ID#
		        ,UPDT_DT              = SYSDATE
		   WHERE 1 = 1
		     AND CNTRCTR_NO  = #CNTRCTR_NO#
		     AND SEIZR_SN    = #SEIZR_SN#
	  	  
	  </update>
	  
	  
	  <!-- 주택계약자대출 수정  -->
	  <update id="SLS020101DAO.updateHcntrctrLon" parameterClass="java.util.Map">
		  UPDATE TBSLS_HCNTRCTR_LON
		     SET LON_SE               = #LON_SE#             /*    */
		     	,TRNSFR_DE            = #TRNSFR_DE#             /*       */
		        ,CDIT_TRNSFR_AMOUNT   = #CDIT_TRNSFR_AMOUNT#            	  /*    */
		        ,CDIT_GRNTE_BANK      = #CDIT_GRNTE_BANK#            	  /*    */
		        ,BANK_ADRES           = #BANK_ADRES#            	  /*    */
		        ,RELIS_DE          	  = #RELIS_DE#            	  /*     */
		        ,PRCAFS_CHARGER       = #PRCAFS_CHARGER#            	  /*   */
		        ,PRCAFS_CHRG_DEPT     = #PRCAFS_CHRG_DEPT#            	  /*    */
		        ,PRCAFS_CHRG_CTTPC    = #PRCAFS_CHRG_CTTPC#            	  /*   */
		        ,RM                   = #RM#                    /*   */
		        ,LON_ATCHMNFL_COURS   = #LON_ATCHMNFL_COURS# /* 첨부파일경로*/
		        ,LON_ATCHMNFL         = #LON_ATCHMNFL#       /* 첨부파일    */
		        ,UPDUSR_ID            = #S_USER_ID#
		        ,UPDT_DT              = SYSDATE
		   WHERE 1 = 1
		     AND CNTRCTR_NO = #CNTRCTR_NO#
		     AND LON_SN     = #LON_SN#
	  </update>
	  
	  
	 <!-- 주택계약자압류 삭제  -->
	 <delete id="SLS020101DAO.deleteHcntrctrSeizr" parameterClass="java.util.Map">
	      DELETE TBSLS_HCNTRCTR_SEIZR
		   WHERE 1 = 1
             AND CNTRCTR_NO  = #CNTRCTR_NO#
             AND SEIZR_SN    = #SEIZR_SN#
		   
	  </delete>
	  
	  
	<!-- 주택계약자대출 삭제  -->
	<delete id="SLS020101DAO.deleteHcntrctrLon" parameterClass="java.util.Map">
	      DELETE TBSLS_HCNTRCTR_LON
		   WHERE 1 = 1
             AND CNTRCTR_NO  = #CNTRCTR_NO#
             AND LON_SN    = #LON_SN#
		   
	</delete>
	  
	  
	  
	 <!-- 주택계약자대출 추가  -->
	<insert id="SLS020101DAO.insertHcntrctrSeizrToLon" parameterClass="java.util.Map">
		  INSERT INTO TBSLS_HCNTRCTR_LON
		  (    
		     CNTRCTR_NO                  
			,LON_SN                   
			,LON_SE                   
			,TRNSFR_DE                   
			,CDIT_TRNSFR_AMOUNT         
			,CDIT_GRNTE_BANK       
			,BANK_ADRES             
			,RELIS_DE              
			,PRCAFS_CHARGER              
			,PRCAFS_CHRG_DEPT               
			,PRCAFS_CHRG_CTTPC
			,RM                          
			,LON_ATCHMNFL_COURS
			,LON_ATCHMNFL
			,REGISTER_ID                 
			,REGIST_DT
			,UPDUSR_ID                   
			,UPDT_DT          
			                
		  ) VALUES (
		         	     
		 	#CNTRCTR_NO#                    /*계약자번호                  */
		 	,( SELECT NVL(MAX(LON_SN),0) + 1 FROM TBSLS_HCNTRCTR_LON WHERE 1 = 1 AND CNTRCTR_NO = #CNTRCTR_NO# )          
			,( select CHRCTR_PREPAR_VALUE_0 from TBCOM_CMMN_CODE a
				 where grp_code = 'HOU006'
   						and code = #SEIZR_SE#
  			)     	     
			,#CDIT_RCEPT_DE#                    	 /*     */          
			,#DET_AMOUNT#         /*        */          
			,#CRDTR_NM#               /*              */          
			,#CRDTR_ADRES#                /*           */          
			,#RELIS_DE#            /*      */
			,#PRCAFS_CHARGER#                     	 /*    */          
			,#PRCAFS_CHRG_DEPT#             /*      */
			,#PRCAFS_CHRG_CTTPC#                   /*          */
			,#RM#                            /*      */ 
			,#SEIZR_ATCHMNFL_COURS#                            /*             */ 
			,#SEIZR_ATCHMNFL#                            /*                  */          
			,#S_USER_ID#                     /*등록자ID                    */        
			,SYSDATE       					 /*등록일시                    */
			,#S_USER_ID#                     /*수정자ID                    */          
			,SYSDATE                         /*수정일시                    */      
		  )
	  
	  </insert>
	  
	  
	  
	  <!-- 주택계약자대출 해제일자 update  -->
	  <update id="SLS020101DAO.insertHcntrctrLonAddRelisDe" parameterClass="java.util.Map">
		  UPDATE TBSLS_HCNTRCTR_LON
		     SET RELIS_DE          	  = #RELIS_DE#            	 
		        ,UPDUSR_ID            = #S_USER_ID#
		        ,UPDT_DT              = SYSDATE
		   WHERE 1 = 1
		     AND CNTRCTR_NO = #CNTRCTR_NO#
		     AND LON_SN     = #LON_SN#
	  </update>
	  
	  
	  
	  
	  
	<!-- 주택타입 공급가액  -->
	<select id="SLS020101DAO.selectHouseTySuplyAmount" parameterClass="java.util.HashMap" resultClass="java.util.HashMap">
			SELECT SUPLY_AMOUNT
			  FROM TBSLS_HOUSE_TY
			 WHERE 1 = 1

			<isNotEmpty property="HOUSE_CODE">
			   AND HOUSE_CODE = #HOUSE_CODE#
			</isNotEmpty>
			<isNotEmpty property="HOUSE_TY_CODE">
			   AND HOUSE_TY_CODE = #HOUSE_TY_CODE#
			</isNotEmpty>
	</select>
	
	
	          
   <!-- 주택타입 상세조회  -->
	<select id="SLS020101DAO.selectHouseTypeInfo" parameterClass="java.util.HashMap" resultClass="java.util.HashMap">       
			SELECT 
		   		 T1.HOUSE_CODE
		        ,T1.HOUSE_TY_CODE
		        ,T1.HOUSE_TY_NM
		        ,T1.TY_AEA
		        ,T1.HOUSE_DRC
		        ,T1.TY_FLOOR_BEGIN
		        ,T1.TY_FLOOR_END
		        ,T1.AEA
		        ,T1.ROOM_CO
		        ,T1.HOUSE_STLE
		        ,T1.SUPLY_AMOUNT
		        ,T1.VAT
		        ,T1.INHBTNT_BILDNG_CT
		        ,T1.INHBTNT_VAT
		        ,T1.RNTCHRG
		        ,T1.KJF
		        ,T1.FINANC_LMT_AMOUNT
		        ,T1.PLOT_CT
		        ,T1.BILDNG_CT
		        ,T1.HOUSE_DVR_AR
		        ,T1.HOUSE_CMNUSE_AR
		        ,T1.HOUSE_LTTOT_AR
		        ,T1.HOUSE_CNTRCT_AR
		        ,T1.HOUSE_LEGAL_EXCESS
		        ,T1.HOUSE_BILDNG_AR
		        ,T1.HOUSE_ETC_CMNUSE
		        ,T1.HOUSE_PLOT_QOTA
		        ,T1.RM
			FROM TBSLS_HOUSE_TY T1
			WHERE 1=1
		 	    AND HOUSE_CODE = #HOUSE_CODE#
		    	AND HOUSE_TY_CODE = #HOUSE_TY_CODE#
    </select>           
	  
    
   <parameterMap id="SPSLS_HOU_CTR_CANCEL_param" class="java.util.HashMap">
		<parameter property="IN_CNTRCTR_NO"		jdbcType="VARCHAR"	javaType="string" 	mode="IN" />
		<parameter property="IN_REGISTER_ID"		jdbcType="VARCHAR"	javaType="string" 	mode="IN" />					
	</parameterMap>	
	
	<procedure id="SLS020101DAO.SPSLS_HOU_CTR_CANCEL" parameterMap="SPSLS_HOU_CTR_CANCEL_param">
		{ call SPSLS_HOU_CTR_CANCEL(?,?) }
	</procedure>	
	
	 <!-- 쿼리명 : 명의변경 첨부파일 삭제
	설명 : 명의변경 첨부파일 삭제
	수정일  수정자  수정내용
	
	작성자 : 손연옥
	최초작성일 : 2016.12.01
	-->	
	<delete id="SLS020101DAO.ChangeFileDelete" parameterClass="java.util.Map">
	 UPDATE TBSLS_HCNTRCTR_CHANGE
	    SET FILE_SN = NULL
	  WHERE 1=1
    	 AND CNTRCTR_NO = #CNTRCTR_NO#	
    	 AND CHANGE_SE = #SEIZR_SN#
    	 AND CHANGE_SN = #CHANGE_SN#	
	</delete>
	
   <!-- 쿼리명 : 주택계약자 우편물 주소 수정
	설명 : 주택계약자 주소 수정
	수정일  수정자  수정내용
	
	작성자 : 손연옥
	최초작성일 : 2016.12.21
	-->
	<update id="SLS020101DAO.saveDM" parameterClass="java.util.Map">
		UPDATE TBSLS_HCNTRCTR
		   SET
			  ZIP_DM              = #ZIP_DM#
			, BDNBR_DM            = #BDNBR_DM#
			, BASS_ADRES_DM       = #BASS_ADRES_DM#
			, DETAIL_ADRES_DM     = #DETAIL_ADRES_DM#
			, UPDUSR_ID           = #S_USER_ID#
			, UPDT_DT             = SYSDATE
		 WHERE 1 = 1
		   AND CNTRCTR_NO = #CNTRCTR_NO#	   
	</update>
		
</sqlMap>